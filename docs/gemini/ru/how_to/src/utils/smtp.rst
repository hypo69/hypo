Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот модуль предоставляет функции для отправки и получения электронных писем с помощью SMTP или IMAP сервера. Он включает функции отправки писем с помощью SMTP и извлечения писем с помощью IMAP.  Код содержит robust error handling и логирование ошибок. Важно, что он не хранит credentials напрямую в файле, используя переменные окружения.

Шаги выполнения
-------------------------
1. **Настройка переменных окружения:** Установите переменные окружения `SMTP_SERVER`, `SMTP_PORT`, `SMTP_USER`, `SMTP_PASSWORD` и `SMTP_RECEIVER` с соответствующими значениями для вашей SMTP конфигурации.  Важно:  НЕ вводите credentials непосредственно в код!

2. **Отправка письма (функция `send`):**
    * Передайте значения для `subject`, `body` и `to` в функцию `send()`.
    * Функция попытается отправить письмо, используя предоставленные данные и настройки из переменных окружения.
    * Функция возвращает `True`, если отправка прошла успешно, и `False` в случае ошибки. Логирует ошибки, включая подробности (тему, тело и ошибку).

3. **Получение писем (функция `receive`):**
    * Передайте значения для `imap_server`, `user`, `password` и `folder` в функцию `receive()`.
    * Функция подключается к IMAP серверу и извлекает письма из указанного папки.
    * Полученные письма возвращаются как список словарей, где каждый словарь содержит `subject`, `from`, `body` письма.
    * Функция возвращает `None` в случае ошибки. Логирует ошибки, включая подробности об ошибке.


Пример использования
-------------------------
.. code-block:: python

    import os
    from hypotez.src.utils.smtp import send, receive

    # Установите переменные окружения
    os.environ['SMTP_SERVER'] = 'your_smtp_server'
    os.environ['SMTP_PORT'] = '587'
    os.environ['SMTP_USER'] = 'your_email@example.com'
    os.environ['SMTP_PASSWORD'] = 'your_password'
    os.environ['SMTP_RECEIVER'] = 'recipient@example.com'


    # Отправка письма
    success = send(subject="Тестовое письмо", body="Это тестовое письмо.", to="recipient@example.com")
    if success:
        print("Письмо отправлено успешно.")
    else:
        print("Ошибка при отправке письма.")


    # Получение писем
    imap_server = 'imap.example.com'
    emails = receive(imap_server, 'your_email@example.com', 'your_password', 'inbox')
    if emails:
        for email in emails:
            print(f"Тема: {email['subject']}, Отправитель: {email['from']}, Тело: {email['body']}")
    else:
        print("Ошибка при получении писем.")