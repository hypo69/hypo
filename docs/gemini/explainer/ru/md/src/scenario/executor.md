# executor.py - Модуль для выполнения сценариев

```markdown
## Описание

Модуль `executor.py` содержит функции для выполнения сценариев, загрузки их из файлов, обработки процесса извлечения информации о продуктах и её вставки в PrestaShop.

## Функции

* **`dump_journal(s, journal)`**: Сохраняет данные журнала в JSON-файл.
    * `s`: Экземпляр поставщика.
    * `journal`: Словарь, содержащий данные журнала.
    * Сохраняет данные в файл `_journal/{timestamp}.json` в каталоге поставщика.


* **`run_scenario_files(s, scenario_files_list)`**: Выполняет список файлов сценариев.
    * `s`: Экземпляр поставщика.
    * `scenario_files_list`: Список путей к файлам сценариев (или один путь).
    * Возвращает `True`, если все сценарии выполнены успешно, `False` в противном случае.
    * Обрабатывает исключения во время выполнения сценариев и записывает сообщения об ошибках в журнал.
    * Обновляет журнал (_journal_) с результатами выполнения каждого сценария.


* **`run_scenario_file(s, scenario_file)`**: Загружает и выполняет сценарии из файла.
    * `s`: Экземпляр поставщика.
    * `scenario_file`: Путь к файлу сценария.
    * Возвращает `True`, если сценарий выполнен успешно, `False` в противном случае.
    * Обрабатывает исключения при загрузке файла сценария.


* **`run_scenarios(s, scenarios)`**: Выполняет список сценариев (не файлы).
    * `s`: Экземпляр поставщика.
    * `scenarios`: Список сценариев или один сценарий в виде словаря.
    * Возвращает результат выполнения сценариев (список или словарь), или `False` при ошибке.
    * Если `scenarios` не указан, берет сценарии из `s.current_scenario`.


* **`run_scenario(supplier, scenario, scenario_name)`**: Выполняет полученный сценарий.
    * `supplier`: Экземпляр поставщика.
    * `scenario`: Словарь, содержащий детали сценария.
    * `scenario_name`: Имя сценария.
    * Находит список продуктов в категории, используя `s.related_modules.get_list_products_in_category(s)`.
        * Если список пуст, выводит предупреждение и возвращает `None`.
    * Обрабатывает каждый продукт в списке:
        * Переходит на страницу продукта.
        * Собирает поля продукта с помощью `s.related_modules.grab_product_page(s)`.
        * Создаёт экземпляр `Product` и сохраняет данные в базу PrestaShop, используя `execute_PrestaShop_insert(f)`.
        * Обрабатывает исключения во время обработки продукта.
    * Возвращает список URL-адресов обработанных продуктов.

* **`insert_grabbed_data(product_fields)`**: Вставляет собранные данные о продукте в PrestaShop.
    * `product_fields`: Экземпляр `ProductFields`, содержащий информацию о продукте.
    * Вызывает `execute_PrestaShop_insert` для выполнения вставки.


* **`execute_PrestaShop_insert(f, coupon_code, start_date, end_date)`**: Вставляет продукт в PrestaShop.
    * `f`: Экземпляр `ProductFields` с данными о продукте.
    * `coupon_code`, `start_date`, `end_date`: Опциональные параметры для промо-акций.
    * Использует `PrestaShop` для отправки данных о продукте.
    * Возвращает `True` при успешной вставке, `False` в противном случае.


## Использование

Этот модуль используется для выполнения сценариев, обрабатывающих информацию о продуктах и вставляющих её в PrestaShop.  Он интегрирован в более широкий контекст управления данными поставщика (например, через экземпляр `s` в функциях).

## Замечания

* Модуль использует асинхронное программирование (asyncio) для повышения производительности.
* Использование `logger` для логирования событий и ошибок.
* Предполагается наличие классов `Supplier`, `Product`, `ProductFields`, `PrestaShop`, `ProductCampaignsManager` и других необходимых для работы модулей.
* Необходима корректная инициализация модулей и зависимостей для успешной работы.

```
```