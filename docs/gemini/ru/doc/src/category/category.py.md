# Модуль `category`

## Обзор

Модуль `category` предназначен для работы с категориями товаров, в первую очередь для PrestaShop. Он предоставляет классы для взаимодействия и обработки данных категорий продуктов.

## Оглавление

- [Классы](#классы)
  - [`Category`](#class-category)
- [Функции](#функции)
  - [`compare_and_print_missing_keys`](#function-compare_and_print_missing_keys)

## Классы

### `Category`

**Описание**: Класс `Category` предназначен для обработки категорий продуктов. Он наследуется от класса `PrestaCategory`.

**Методы**:

- `__init__`: Инициализирует объект `Category`.
- `get_parents`: Возвращает список родительских категорий.
- `crawl_categories_async`: Асинхронно сканирует категории и строит иерархический словарь.
- `crawl_categories`: Рекурсивно сканирует категории и строит иерархический словарь.
- `_is_duplicate_url`: Проверяет, существует ли URL уже в словаре категорий.

#### `__init__`

**Описание**: Инициализирует объект `Category`.

**Параметры**:
- `api_credentials` (Dict): API учетные данные для доступа к данным категории.
- `*args`: Переменная длина аргументов (не используется).
- `**kwargs`: Ключевые аргументы (не используются).

#### `get_parents`

**Описание**: Возвращает список родительских категорий.

**Параметры**:
- `id_category` (int): ID категории для поиска родительских категорий.
- `dept` (int): Уровень глубины категории.

**Возвращает**:
- `list`: Список родительских категорий.

#### `crawl_categories_async`

**Описание**: Асинхронно сканирует категории, строя иерархический словарь.

**Параметры**:
- `url` (str): URL страницы категории.
- `depth` (int): Глубина рекурсии сканирования.
- `driver`: Экземпляр Selenium WebDriver.
- `locator` (str): XPath-локатор для ссылок на категории.
- `dump_file` (str): Путь к файлу JSON для сохранения результатов.
- `default_category_id` (int): ID категории по умолчанию.
- `category` (Optional[Dict]): Существующий словарь категорий (по умолчанию `None`).

**Возвращает**:
- `Dict`: Обновленный или новый словарь категорий.

**Вызывает исключения**:
- `Exception`: Возникает при ошибке во время сканирования категорий.

#### `crawl_categories`

**Описание**: Рекурсивно сканирует категории и строит иерархический словарь.

**Параметры**:
- `url` (str): URL страницы для сканирования.
- `depth` (int): Глубина рекурсии.
- `driver`: Экземпляр Selenium WebDriver.
- `locator` (str): XPath-локатор для поиска ссылок на категории.
- `dump_file` (str): Файл для сохранения иерархического словаря.
- `id_category_default` (int): ID категории по умолчанию.
- `category` (Dict): Словарь категорий (по умолчанию пустой).

**Возвращает**:
- `Dict`: Иерархический словарь категорий и их URL-адресов.

**Вызывает исключения**:
- `Exception`: Возникает при ошибке во время сканирования категорий.

#### `_is_duplicate_url`

**Описание**: Проверяет, существует ли URL уже в словаре категорий.

**Параметры**:
- `category` (Dict): Словарь категорий.
- `url` (str): URL для проверки.

**Возвращает**:
- `bool`: `True`, если URL является дубликатом, `False` в противном случае.

## Функции

### `compare_and_print_missing_keys`

**Описание**: Сравнивает текущий словарь с данными в файле и выводит отсутствующие ключи.

**Параметры**:
- `current_dict` (Dict): Текущий словарь.
- `file_path` (str): Путь к файлу для сравнения.

**Возвращает**:
    - `None`: Функция ничего не возвращает.

**Вызывает исключения**:
- `Exception`: Возникает при ошибке загрузки данных из файла.