# Модуль для перевода README-файла
## Обзор

Модуль предназначен для автоматического перевода README-файла на указанный язык с использованием AI-модели. В данном случае, перевод осуществляется на немецкий язык (german).
Модуль использует асинхронный подход для эффективной обработки текста и разбивает README-файл на части для параллельного перевода.

## Подробней
Модуль `translate_readme.py` является частью проекта `hypotez` и отвечает за автоматический перевод README-файла на немецкий язык с использованием AI-модели g4f (gpt4free). Он использует асинхронный подход для эффективной обработки текста и разбивает README-файл на части для параллельного перевода.

Модуль выполняет следующие шаги:
1.  Читает содержимое README.md файла.
2.  Разделяет его на части, разделенные заголовками "## ".
3.  Переводит каждую часть с использованием асинхронной функции translate_part.
4.  Собирает переведенные части обратно в единый текст.
5.  Сохраняет переведенный текст в новый файл с именем README-GE.md.

Использование асинхронного подхода позволяет ускорить процесс перевода, особенно для больших файлов. Модуль также учитывает необходимость сохранения определенных элементов без перевода, таких как примеры кода и элементы форматирования Markdown.

## Функции

### `read_text`

```python
def read_text(text: str) -> str:
    """
    Извлекает текст из markdown документа между блоками code snippets, обозначенных символами ```.

    Args:
        text (str): Входной текст, который необходимо обработать.

    Returns:
        str: Текст, извлеченный между блоками code snippets.
    """
```

**Как работает функция**:

1.  Разделяет входной текст на строки.
2.  Находит начальный и конечный индексы блоков кода, отмеченных символами ```.
3.  Извлекает текст между этими блоками и возвращает его.

### `translate`

```python
async def translate(text: str) -> str:
    """
    Асинхронно переводит предоставленный текст, используя AI-модель.

    Args:
        text (str): Текст для перевода.

    Returns:
        str: Переведенный текст.
    """
```

**Как работает функция**:

1.  Формирует запрос для AI-модели, включающий текст для перевода и инструкции по переводу на немецкий язык.
2.  Добавляет инструкцию по сохранению "[!Note]" без изменений, если она присутствует в тексте.
3.  Использует асинхронный метод `provider.create_async` для отправки запроса и получения перевода.
4.  Извлекает переведенный текст из ответа.
5.  Добавляет закрывающие символы "```", если необходимо, чтобы обеспечить целостность блоков кода.

### `translate_part`

```python
async def translate_part(part: str, i: int) -> str:
    """
    Асинхронно переводит часть текста, проверяя, не входит ли она в blocklist.

    Args:
        part (str): Часть текста для перевода.
        i (int): Индекс части текста.

    Returns:
        str: Переведенная часть текста.
    """
```

**Как работает функция**:

1.  Проверяет, содержит ли часть текста заголовки из списка `blocklist`.
2.  Если часть текста входит в `blocklist`, переводит только первую строку (заголовок) и элементы из списка `allowlist`.
3.  Если часть текста не входит в `blocklist`, переводит весь текст целиком.
4.  Выводит в консоль сообщение о том, что часть текста с индексом `i` переведена.

### `translate_readme`

```python
async def translate_readme(readme: str) -> str:
    """
    Асинхронно переводит README файл, разделяя его на части.

    Args:
        readme (str): Содержимое README файла.

    Returns:
        str: Переведенное содержимое README файла.
    """
```

**Как работает функция**:

1.  Разделяет README-файл на части, используя разделитель `\n## `.
2.  Асинхронно переводит каждую часть с использованием функции `translate_part`.
3.  Собирает переведенные части обратно в единый текст, разделяя их символами `\n\n`.

**Примеры**:
Примеры использования функции `translate_readme`:

```python
import asyncio
async def main():
    readme_content = "## Title\nThis is a test README file.\n## Another Title\nMore content here."
    translated_readme = await translate_readme(readme_content)
    print(translated_readme)

if __name__ == "__main__":
    asyncio.run(main())
```

В этом примере readme_content это строковое представление содержимого README-файла. Функция translate_readme асинхронно переводит содержимое и возвращает переведенный текст, который затем выводится на экран.

## Переменные
- `iso`: строка, содержащая код страны "GE".
- `language`: строка, содержащая название языка "german".
- `translate_prompt`: строка, содержащая prompt для перевода текста на указанный язык.
- `keep_note`: строка, содержащая инструкцию для сохранения "[!Note]" без изменений.
- `blocklist`: список строк, содержащих заголовки, которые не нужно переводить целиком.
- `allowlist`: список строк, содержащих элементы, которые нужно переводить, даже если они находятся в `blocklist`.