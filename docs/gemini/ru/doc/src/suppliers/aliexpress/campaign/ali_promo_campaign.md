# Модуль `hypotez/src/suppliers/aliexpress/campaign/ali_promo_campaign.py`

## Обзор

Модуль `ali_promo_campaign.py` предоставляет класс `AliPromoCampaign` для управления рекламными кампаниями на AliExpress. Он позволяет загружать данные, обрабатывать категории и товары, генерировать данные с помощью AI, а также создавать и редактировать JSON-файлы с информацией о кампаниях.  Поддерживает различные языки и валюты.

## Классы

### `AliPromoCampaign`

**Описание**: Класс `AliPromoCampaign` отвечает за управление рекламной кампанией. Он позволяет загружать данные, обрабатывать категории и товары, использовать AI для генерации данных и сохранять результаты в JSON-файлах.

**Атрибуты**:

- `language`: Язык кампании.
- `currency`: Валюта кампании.
- `base_path`: Базовая директория для хранения данных кампании.
- `campaign_name`: Название кампании.
- `campaign`: Объект `SimpleNamespace`, содержащий данные кампании из JSON.
- `campaign_ai`: Объект `SimpleNamespace`, содержащий данные кампании, полученные с помощью AI (копия `campaign`).
- `gemini`: Объект `GoogleGenerativeAI` для работы с моделью Gemini.
- `openai`: Объект `OpenAIModel` (возможно, используется для работы с моделями OpenAI).


**Методы**:

#### `__init__`

**Описание**: Инициализирует объект `AliPromoCampaign`.  Если файл кампании не найден, вызывается `process_new_campaign` для его создания.

**Параметры**:
- `campaign_name` (str): Название кампании.
- `language` (Optional[str], optional): Язык. По умолчанию `None`.
- `currency` (Optional[str], optional): Валюта. По умолчанию `None`.
- `model` (str, optional): Выбор модели для работы с AI (openai или gemini). По умолчанию 'openai'.

**Возвращает**:
- `SimpleNamespace`: Объект, содержащий данные кампании.

#### `_models_payload`

**Описание**: Инициализирует модели AI. Важно, что данный метод настроен на работу с Gemini.

**Возвращает**:
- `None`

#### `process_campaign`

**Описание**:  Обрабатывает все категории в текущей кампании.

**Пример**:
```python
>>> campaign.process_campaign()
```

#### `process_campaign_category`

**Описание**: Обрабатывает конкретную категорию в кампании для всех языков и валют.

**Параметры**:
- `category_name` (str): Название категории.

**Возвращает**:
- `list[SimpleNamespace] | None`: Список объектов `SimpleNamespace`, представляющих товары в категории, или `None`, если не найдено.


#### `process_new_campaign`

**Описание**: Создает новую рекламную кампанию. Создает структуры директорий, загружает данные о товарах и категориях,  обрабатывает данные через AI и сохраняет в JSON.

**Параметры**:
- `campaign_name` (str): Название кампании.
- `language` (Optional[str], optional): Язык. По умолчанию `None`.
- `currency` (Optional[str], optional): Валюта. По умолчанию `None`.

**Возвращает**:
- `List[Tuple[str, Any]]`:  Список кортежей, содержащих имена категорий и результаты их обработки.

#### `process_ai_category`

**Описание**: Обрабатывает AI данные для указанной категории или всех категорий.

**Параметры**:
- `category_name` (Optional[str], optional): Имя категории для обработки. Если не указано, обрабатываются все категории.

**Возвращает**:
- `None`


#### `process_category_products`

**Описание**: Обрабатывает товары в указанной категории.  Использует `AliAffiliatedProducts` для получения данных о связанных товарах.

**Параметры**:
- `category_name` (str): Название категории.

**Возвращает**:
- `Optional[List[SimpleNamespace]]`: Список объектов `SimpleNamespace`, представляющих товары, или `None`, если товары не найдены.


#### `dump_category_products_files`

**Описание**: Сохраняет данные о товарах в файлы JSON.

**Параметры**:
- `category_name` (str): Имя категории.
- `products` (List[SimpleNamespace]): Список товаров.

**Возвращает**:
- `None`


#### `set_categories_from_directories`

**Описание**: Устанавливает категории кампании из названий директорий в подкаталоге "category".


#### `generate_output`

**Описание**:  Сохраняет данные о товарах в различных форматах (JSON, HTML).


#### `generate_html`

**Описание**: Создает HTML файл для категории и корневой индекс-файл.


#### `generate_html_for_campaign`

**Описание**: Генерирует HTML-страницы для всей рекламной кампании.

## Функции

(Список функций и их описаний -  следует добавить, если в файле присутствуют функции помимо методов класса)


## Примечания

Документация использует расширенный синтаксис Markdown, включая блок кода и таблицы, чтобы отразить все детали.  Обратите внимание на подробные примеры использования методов, а также блок-схемы, поясняющие работу функций.