# Модуль `main.js`

## Обзор

Этот модуль представляет собой ядро бота для Telegram, который обрабатывает голосовые и текстовые сообщения. Он использует API OpenAI для перевода голосовых сообщений в текст и последующего ответа на них.

## Импорты

```javascript
import { Telegraf } from 'telegraf';
import { message } from 'telegraf/filters';
import { code } from 'telegraf/format';
import config from 'config';
import { ogg } from './ogg.js';
import { openai } from './openai.js';
import { removeFile } from './utils.js';
```

## Переменные

* `bot`: Экземпляр класса `Telegraf`, используемый для взаимодействия с Telegram-ботом. Инициализирован с токеном, полученным из файла `config`.


## Команды

### `start`

**Описание**: Обрабатывает команду `/start`.

**Аргументы**:

* `ctx`: Объект контекста, предоставляющий доступ к данным сообщения.

**Возвращает**:

*  Ничего.


## Обработчики событий

### `voice`

**Описание**: Обрабатывает голосовые сообщения.

**Аргументы**:

* `ctx`: Объект контекста, предоставляющий доступ к данным сообщения.

**Возвращает**:

* Ничего.

**Обрабатывает исключения**:

* `e`: Любое исключение, возникающее во время обработки сообщения. Выводит сообщение об ошибке в консоль.


### `text`

**Описание**: Обрабатывает текстовые сообщения.

**Аргументы**:

* `ctx`: Объект контекста, предоставляющий доступ к данным сообщения.
* `text`: Текст полученного сообщения.

**Возвращает**:

* Ничего.

**Обрабатывает исключения**:

* `e`: Любое исключение, возникающее во время обработки сообщения. Выводит сообщение об ошибке в консоль.


## Функции

### `processTextToChat`

**Описание**: Обрабатывает полученный текст и отправляет его в чат.

**Аргументы**:
* `ctx`: Объект контекста, предоставляющий доступ к данным сообщения.
* `text`: Текст сообщения.


**Возвращает**:
* Ничего.

**Обрабатывает исключения**:
* `e`: Любое исключение, возникающее во время обработки сообщения. Выводит сообщение об ошибке в консоль.

## Запуск бота

```javascript
bot.launch();
process.once('SIGINT', () => bot.stop('SIGINT'));
process.once('SIGTERM', () => bot.stop('SIGTERM'));
```

Запускает бота и устанавливает обработчики для завершения работы при сигналах `SIGINT` и `SIGTERM`.
```