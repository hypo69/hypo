# Модуль `background.js`

## Обзор

Данный модуль отвечает за обработку сообщений, поступающих из других частей расширения, и отправку данных на сервер.  Он слушает события клика на иконку расширения и взаимодействует с другими частями расширения, используя `chrome.runtime.onMessage.addListener`. При поступлении сообщения с типом `'collectData'` отправляет URL страницы на сервер.

## Функции

### `sendDataToServer(url)`

**Описание**: Отправляет собранные данные на сервер.

**Параметры**:

- `url` (str): URL страницы, для которой нужно собрать данные.

**Возвращает**:

-  Нет

**Вызывает исключения**:

- `Error`: Если произошла ошибка при отправке данных на сервер.


### Обработчик событий `chrome.browserAction.onClicked`

**Описание**: Выполняется при клике на иконку расширения. Отправляет сообщение в активную вкладку с action `collectData` и URL текущей вкладки.

**Параметры**:

- `tab` (объект): Объект, содержащий информацию о вкладке.

**Возвращает**:

- Нет


### Обработчик событий `chrome.runtime.onMessage`

**Описание**: Слушает сообщения, отправленные из других частей расширения.

**Параметры**:

- `message` (объект): Сообщение, полученное от другого скрипта.
- `sender` (объект): Объект, содержащий информацию о отправителе сообщения.
- `sendResponse` (функция): Функция, которая может быть использована для отправки ответа отправителю.


**Возвращает**:

- boolean: `true` для продолжения слушания сообщений.

**Вызывает исключения**:

- Нет


## Структура

Данный модуль использует `chrome.storage.local` для доступа к сохранённым данным и `fetch` для отправки данных на сервер.


## Использование

Модуль предназначен для интеграции в расширение, где он будет обрабатывать сообщения о сборе данных, получаемые из контентных скриптов. При клике на иконку расширения или при поступлении сообщения с действием `collectData` происходит отправка URL страницы на сервер, для последующей обработки.


## Замечания

- Необходимо заменить `'http://127.0.0.1/hypotez.online/api/'` на действительный адрес сервера.
- Для корректной работы, модуль должен быть интегрирован в расширение Chrome.
- Обратите внимание на использование `fetch`, которое позволяет асинхронно отправлять данные на сервер, используя Promises.