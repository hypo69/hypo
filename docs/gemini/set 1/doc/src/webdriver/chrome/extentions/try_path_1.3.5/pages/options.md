# Модуль options.js

## Обзор

Этот скрипт управляет настройками расширения, позволяя пользователю изменять атрибуты и стили, связанные с отображением всплывающего окна. Он получает данные из браузера, обновляет поля формы и сохраняет новые настройки в хранилище браузера.

## Функции

### `isValidAttrName`

**Описание**: Проверяет, является ли переданное имя атрибута допустимым.

**Параметры**:

- `name` (string): Имя атрибута.

**Возвращает**:

- boolean: `true`, если имя атрибута допустимо, иначе `false`.

**Вызывает исключения**:
- `Error`: Возникает, если возникла ошибка при попытке установить атрибут элементу.


### `isValidAttrNames`

**Описание**: Проверяет, являются ли все имена атрибутов в массиве допустимыми.

**Параметры**:

- `names` (object): Объект, содержащий имена атрибутов.

**Возвращает**:

- boolean: `true`, если все имена атрибутов допустимы, иначе `false`.


### `isValidStyleLength`

**Описание**: Проверяет, соответствует ли длина стилей допустимому формату.

**Параметры**:

- `len` (string): Длина стилей.

**Возвращает**:

- boolean: `true`, если длина стилей соответствует формату (auto или числоpx), иначе `false`.


### `loadDefaultCss`

**Описание**: Загружает и возвращает CSS-стили по умолчанию.

**Возвращает**:

- Promise<string>: Promise, содержащий загруженные CSS-стили или `null` при ошибке.

**Вызывает исключения**:
- `Error`: Возникает, если возникла ошибка при загрузке CSS-стилей.


### `extractBodyStyles`

**Описание**: Извлекает стили ширины и высоты из CSS строки.

**Параметры**:

- `css` (string): Строка CSS.

**Возвращает**:

- object: Объект с полями `width` и `height`, содержащими значения из CSS, или пустые строки в случае ошибки.

**Вызывает исключения**:
- Нет


### `createPopupCss`

**Описание**: Создаёт строку CSS для всплывающего окна.

**Параметры**:

- `bodyStyles` (object): Объект, содержащий стили `width` и `height`.

**Возвращает**:

- string: Строка CSS для всплывающего окна.


### Обработчик события load

**Описание**: Обработчик события `load` окна. Инициализирует элементы, добавляет обработчик события `click` для кнопки "Сохранить" и обработчик события `click` для кнопки "По умолчанию".

**Вызывает исключения**:
- `Error`: Возникает при ошибке выполнения `browser.runtime.sendMessage` или `browser.storage.sync.set`.


## Переменные

- `defaultAttributes`: Объект, содержащий значения атрибутов по умолчанию.
- `defaultPopupBodyStyles`: Объект, содержащий стили по умолчанию для тела всплывающего окна.
- `elementAttr`, `contextAttr`, `focusedAttr`, `ancestorAttr`, `frameAttr`, `frameAncestorAttr`: Переменные, хранящие ссылки на элементы формы для ввода атрибутов.
- `style`, `popupBodyWidth`, `popupBodyHeight`: Переменные, хранящие ссылки на элементы формы для ввода стилей.
- `message`: Переменная, хранящая ссылку на элемент для вывода сообщений пользователю.
- `testElement`: Переменная, используемая для проверки валидности имен атрибутов.