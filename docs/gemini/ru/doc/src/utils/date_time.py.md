# Модуль `date_time`

## Обзор

Модуль `date_time` содержит класс `TimeoutCheck` с функциями для проверки, находится ли текущее время в заданном интервале, с возможностью указания таймаута. Этот модуль полезен для выполнения операций, которые должны происходить только в определенные периоды времени.

## Подробней

Модуль предоставляет возможность определить, попадает ли текущее время в заданный временной интервал, что может быть полезно для выполнения операций, которые должны происходить только в определенные периоды (например, ночное обслуживание). По умолчанию временной интервал установлен с 23:00 до 06:00, и функция может обрабатывать интервалы, охватывающие полночь.

Дополнительно, он предоставляет функциональность ожидания ответа с таймаутом.

## Классы

### `TimeoutCheck`

**Описание**: Класс `TimeoutCheck` предоставляет методы для проверки, находится ли текущее время в заданном интервале, а также для ожидания ввода от пользователя с использованием таймаута.

**Как работает класс**:
Класс `TimeoutCheck` инициализируется без аргументов. Он содержит методы `interval`, `interval_with_timeout`, `get_input` и `input_with_timeout`. Метод `interval` проверяет, находится ли текущее время в заданном интервале. Метод `interval_with_timeout` выполняет ту же проверку, но с использованием таймаута. Методы `get_input` и `input_with_timeout` используются для получения ввода от пользователя с таймаутом.

**Методы**:
- `__init__`: Инициализирует экземпляр класса `TimeoutCheck` с атрибутом `result`, установленным в `None`.
- `interval`: Проверяет, находится ли текущее время в заданном интервале.
- `interval_with_timeout`: Проверяет, находится ли текущее время в заданном интервале с использованием таймаута.
- `get_input`: Запрашивает ввод от пользователя.
- `input_with_timeout`: Ожидает ввод от пользователя с таймаутом.

#### `__init__`
```python
    def __init__(self):
        self.result = None
```
**Описание**: Инициализирует экземпляр класса `TimeoutCheck`.

**Как работает метод**:
Метод инициализирует атрибут `result` экземпляра класса `TimeoutCheck` значением `None`. Этот атрибут используется для хранения результата проверки интервала времени.

**Параметры**:
- Отсутствуют.

**Возвращает**:
- Отсутствует.

#### `interval`
```python
    def interval(self, start: time = time(23, 0), end: time = time(6, 0)) -> bool:
        current_time = datetime.now().time()

        if start < end:
            # Interval within the same day (e.g., 08:00 to 17:00)
            self.result = start <= current_time <= end
        else:
            # Interval spanning midnight (e.g., 23:00 to 06:00)
            self.result = current_time >= start or current_time <= end
```
**Описание**: Проверяет, находится ли текущее время в заданном интервале.

**Как работает метод**:
Метод получает текущее время и сравнивает его с заданным интервалом, определяемым параметрами `start` и `end`. Если интервал находится в пределах одного дня, проверяется, находится ли текущее время между `start` и `end`. Если интервал охватывает полночь, проверяется, находится ли текущее время после `start` или до `end`. Результат сохраняется в атрибуте `self.result`.

**Параметры**:
- `start` (time): Начало интервала (по умолчанию 23:00).
- `end` (time): Конец интервала (по умолчанию 06:00).

**Возвращает**:
- `bool`: `True`, если текущее время находится в интервале, `False` в противном случае.

#### `interval_with_timeout`
```python
    def interval_with_timeout(self, timeout: int = 5, start: time = time(23, 0), end: time = time(6, 0)) -> bool:
        thread = threading.Thread(target=self.interval, args=(start, end))
        thread.start()
        thread.join(timeout)

        if thread.is_alive():
            print(f"Timeout occurred after {timeout} seconds, continuing execution.")
            thread.join()  # Ensures thread stops after timeout
            return False  # Timeout occurred, so returning False
        return self.result
```
**Описание**: Проверяет, находится ли текущее время в заданном интервале с использованием таймаута.

**Как работает метод**:
Метод запускает поток для проверки интервала времени с использованием метода `interval`. Поток ожидает завершения в течение заданного таймаута. Если таймаут истекает, метод возвращает `False`. Если поток завершается до истечения таймаута, метод возвращает результат проверки интервала, сохраненный в атрибуте `self.result`.

**Параметры**:
- `timeout` (int): Время ожидания в секундах (по умолчанию 5).
- `start` (time): Начало интервала (по умолчанию 23:00).
- `end` (time): Конец интервала (по умолчанию 06:00).

**Возвращает**:
- `bool`: `True`, если текущее время находится в интервале и ответ получен в течение таймаута, `False`, если нет или произошел таймаут.

#### `get_input`
```python
    def get_input(self):
        """ Запрашиваем ввод от пользователя."""
        self.user_input = input("U:> ")
```
**Описание**: Запрашивает ввод от пользователя.

**Как работает метод**:
Метод выводит приглашение "U:> " и ожидает ввода от пользователя. Введенные данные сохраняются в атрибуте `self.user_input`.

**Параметры**:
- Отсутствуют.

**Возвращает**:
- Отсутствует.

#### `input_with_timeout`
```python
    def input_with_timeout(self, timeout: int = 5) -> str | None:
        thread = threading.Thread(target=self.get_input)
        thread.start()

        # Ожидаем завершения потока или тайм-аут
        thread.join(timeout)

        if thread.is_alive():
            print(f"Timeout occurred after {timeout} seconds.")
            return  # Возвращаем None, если тайм-аут произошел

        return self.user_input
```
**Описание**: Ожидает ввод от пользователя с таймаутом.

**Как работает метод**:
Метод запускает поток для получения ввода от пользователя с использованием метода `get_input`. Поток ожидает завершения в течение заданного таймаута. Если таймаут истекает, метод возвращает `None`. Если поток завершается до истечения таймаута, метод возвращает введенные пользователем данные, сохраненные в атрибуте `self.user_input`.

**Параметры**:
- `timeout` (int): Время ожидания ввода в секундах (по умолчанию 5).

**Возвращает**:
- `str | None`: Введенные данные или `None`, если произошел таймаут.

## Функции

В данном модуле функции отсутствуют.