# Класс `Supplier`

## Обзор

Класс `Supplier` служит базовым классом для управления поставщиками данных в приложении. Он предоставляет структуру для взаимодействия с различными источниками данных, такими как Amazon, AliExpress, Walmart и другими. Этот класс обрабатывает инициализацию настроек, специфичных для поставщика, управляет сценариями сбора данных и предоставляет методы для входа в систему и выполнения сценариев.

## Оглавление

* [Классы](#классы)
* [Функции](#функции)
* [Как это работает](#как-это-работает)
* [Визуальное представление](#визуальное-представление)
* [Пример использования](#пример-использования)
* [Заключение](#заключение)


## Классы

### `Supplier`

**Описание**: Базовый класс для управления поставщиками данных. Он отвечает за инициализацию, настройку и выполнение сценариев для конкретного поставщика.

**Атрибуты**:

- `supplier_id`: Уникальный идентификатор поставщика.
- `supplier_prefix`: Префикс для поставщика, например, `aliexpress` или `amazon`.
- `supplier_settings`: Настройки для поставщика, загружаемые из файла конфигурации.
- `locale`: Код локализации (например, `en` для английского, `ru` для русского).
- `price_rule`: Правило для расчета цен (например, добавление НДС или применение скидок).
- `related_modules`: Модуль, содержащий функции, специфичные для поставщика.
- `scenario_files`: Список файлов сценариев, которые нужно выполнить.
- `current_scenario`: Текущий выполняемый сценарий.
- `login_data`: Данные для входа на сайт поставщика (если требуется).
- `locators`: Локаторы веб-элементов на сайте поставщика.
- `driver`: Веб-драйвер для взаимодействия с сайтом поставщика.
- `parsing_method`: Метод для парсинга данных (например, `webdriver`, `api`, `xls`, `csv`).

**Методы**:

- `__init__`
    ```python
    def __init__(self, supplier_prefix: str, locale: str = 'en', webdriver: str | Driver | bool = 'default', *attrs, **kwargs):
        # Инициализирует префикс поставщика, локаль и веб-драйвер
    ```
- `_payload`
    ```python
    def _payload(self, webdriver: str | Driver | bool, *attrs, **kwargs) -> bool:
        # Загружает файлы конфигурации и инициализирует веб-драйвер
    ```
- `login`
    ```python
    def login(self) -> bool:
        # Выполняет вход на сайт поставщика
    ```
- `run_scenario_files`
    ```python
    def run_scenario_files(self, scenario_files: str | List[str] = None) -> bool:
        # Выполняет один или несколько файлов сценариев и возвращает True, если все сценарии успешно завершены
    ```
- `run_scenarios`
    ```python
    def run_scenarios(self, scenarios: dict | list[dict]) -> bool:
        # Выполняет заданные сценарии и возвращает True, если все сценарии успешно завершены
    ```


## Как это работает

1. **Инициализация**: При создании объекта класса `Supplier` метод `__init__` инициализирует префикс поставщика, локаль и веб-драйвер.
2. **Загрузка конфигурации**: Метод `_payload` загружает файлы конфигурации для поставщика, включая настройки, локаторы и инициализирует веб-драйвер.
3. **Вход в систему**: Метод `login` обрабатывает процесс аутентификации для веб-сайта поставщика.
4. **Выполнение сценариев**: Методы `run_scenario_files` и `run_scenarios` выполняют сценарии из списка файлов или списка словарей.


## Визуальное представление

Класс `Supplier` выступает в качестве чертежа для управления сбором данных от различных поставщиков. Он определяет общие методы и атрибуты, которые могут быть использованы или расширены конкретными реализациями для разных поставщиков. Класс централизует управление поставщиками, включая конфигурацию, вход в систему и выполнение сценариев.


## Пример использования

```python
# Создайте объект Supplier для 'aliexpress'
supplier = Supplier(supplier_prefix='aliexpress', locale='en', webdriver='chrome')

# Выполните вход на сайт поставщика
supplier.login()

# Выполните файлы сценариев
supplier.run_scenario_files(['example_scenario.json'])

# Или выполните конкретные сценарии
supplier.run_scenarios([{'action': 'scrape', 'target': 'product_list'}])
```


## Заключение

В заключение, класс `Supplier` предоставляет структурированный способ взаимодействия с поставщиками данных, управляя конфигурациями, выполняя вход в систему и выполняя сценарии сбора данных. Он служит основополагающим компонентом, который можно расширить для конкретных поставщиков, унаследовавшись от этого базового класса и добавив или переопределив функциональность по мере необходимости.