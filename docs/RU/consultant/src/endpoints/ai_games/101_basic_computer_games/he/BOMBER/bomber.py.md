# Анализ кода модуля `bomber.py`

**Качество кода: 7/10**

-   **Плюсы:**
    -   Код хорошо структурирован и понятен, логика игры реализована корректно.
    -   Используются константы для `GRAVITY` и `TARGET_DISTANCE`, что улучшает читаемость.
    -   Обработка ошибок ввода с помощью `try-except` предотвращает сбои программы при некорректном вводе.
    -   Комментарии к коду на иврите достаточно информативны.
    -   В коде имеется подробное описание алгоритма игры, а также блок-схема в формате Mermaid.
-   **Минусы:**
    -   Комментарии не соответствуют стандарту reStructuredText (RST).
    -   Отсутствует логирование ошибок.
    -   Используется стандартный `print` для вывода, что не подходит для больших приложений.
    -   Нет импорта необходимых библиотек из `src.utils` и `src.logger`.

**Рекомендации по улучшению:**

1.  **Документация:**
    -   Переписать все комментарии и docstrings в формате reStructuredText (RST).
    -   Добавить описание модуля в начале файла.
    -   Добавить docstring для функции `play_bomber`, описывающий её параметры и возвращаемое значение (в данном случае - None).

2.  **Логирование:**
    -   Использовать `from src.logger.logger import logger` для логирования ошибок и других важных событий.
    -   Заменить `print` на `logger.info` для вывода информации об игре и `logger.error` для вывода сообщений об ошибках.

3.  **Импорты:**
    -   Добавить необходимые импорты, если это необходимо (в данном случае импорты из `src.utils.jjson` не требуются, поскольку в коде нет работы с JSON).
    -  Использовать `from math import sin, cos, radians` вместо `import math`, где это возможно для большей читаемости.
  
4.  **Структура кода:**
    -  Переписать функцию `play_bomber` так, чтобы она соответствовала стандарту, избегая излишнего вложенности блоков кода.
    -   Заменить `return` в функции `play_bomber` на `break` в цикле `while`, если `return` не подразумевает возврат значения.
5.  **Обработка ошибок:**
    -   Удалить избыточный блок try-except, заменив `print` на `logger.error` для вывода сообщений об ошибках.

**Оптимизированный код:**

```python
"""
Модуль игры "Бомбер"
====================

Этот модуль реализует простую игру "Бомбер", в которой игрок пытается
попасть в цель, вводя угол и начальную скорость снаряда.

Правила игры:
    1. Цель находится на расстоянии 1000 единиц от пушки.
    2. Игрок вводит угол и начальную скорость снаряда.
    3. Игра вычисляет дальность полета снаряда и расстояние до цели.
    4. Игра продолжается до тех пор, пока игрок не попадет в цель или
       не исчерпает 10 попыток.
    5. Попадание засчитывается, если расстояние до цели меньше 1.

Пример использования:
---------------------

.. code-block:: python

    if __name__ == "__main__":
        play_bomber()

"""
from math import sin, cos, radians
from src.logger.logger import logger

# Константа ускорения свободного падения
GRAVITY = 32.2
# Расстояние до цели
TARGET_DISTANCE = 1000


def play_bomber():
    """
    Запускает игру "Бомбер".

    Функция реализует игровой процесс, запрашивая у пользователя
    угол и скорость снаряда и выводя результаты каждого выстрела.
    Игра продолжается до тех пор, пока игрок не попадет в цель или
    не исчерпает 10 попыток.

    :return: None
    """
    # Инициализация счетчика попыток
    number_of_attempts = 0

    # Основной игровой цикл
    while number_of_attempts < 10:
        number_of_attempts += 1
        logger.info(f"Попытка {number_of_attempts}:")

        # Запрос пользовательского ввода с обработкой ошибок
        try:
            initial_angle = float(input("Введите начальный угол (в градусах): "))
            initial_velocity = float(input("Введите начальную скорость: "))
        except ValueError as ex:
            logger.error("Пожалуйста, введите корректные числа.", exc_info=ex)
            continue

        # Преобразование угла из градусов в радианы
        angle_in_radians = radians(initial_angle)

        # Вычисление дальности полета снаряда
        distance = (2 * initial_velocity**2 * sin(angle_in_radians) * cos(angle_in_radians)) / GRAVITY

        # Вычисление расстояния до цели
        distance_to_target = abs(distance - TARGET_DISTANCE)

        logger.info(f"Дальность полета: {distance:.2f}")
        logger.info(f"Расстояние до цели: {distance_to_target:.2f}")

        # Проверка на попадание
        if distance_to_target < 1:
            logger.info("Попадание!")
            break

    # Вывод сообщения о проигрыше, если не удалось попасть в цель за 10 попыток
    if number_of_attempts >= 10:
        logger.info("Вы проиграли!")


if __name__ == "__main__":
    play_bomber()

"""
Объяснение кода:
-----------------
1.  **Импорт модулей:**
    -  `from math import sin, cos, radians`: Импортирует необходимые функции из модуля `math` для
       тригонометрических вычислений и преобразования углов.
    -  `from src.logger.logger import logger`: Импортирует модуль `logger` для ведения журнала событий и ошибок.
2.  **Определение констант:**
    -  `GRAVITY = 32.2`: Определяет константу ускорения свободного падения.
    -  `TARGET_DISTANCE = 1000`: Определяет расстояние до цели.
3.  **Функция `play_bomber()`:**
    -  `number_of_attempts = 0`: Инициализирует счетчик попыток.
    -  `while number_of_attempts < 10:`: Запускает цикл, который повторяется не более 10 раз.
    -  `number_of_attempts += 1`: Увеличивает счетчик попыток на 1 перед каждой попыткой.
    -  `logger.info(f"Попытка {number_of_attempts}:")`: Выводит в лог информацию о номере текущей попытки.
    -  `try...except ValueError as ex`: Обрабатывает исключения, возникающие при некорректном вводе чисел пользователем,
       использует `logger.error` для записи сообщения об ошибке в лог.
    -  `initial_angle = float(input("Введите начальный угол (в градусах): "))`: Запрашивает у пользователя ввод начального
       угла и преобразует его в число с плавающей точкой.
    -  `initial_velocity = float(input("Введите начальную скорость: "))`: Запрашивает у пользователя ввод начальной
       скорости и преобразует его в число с плавающей точкой.
    -  `angle_in_radians = radians(initial_angle)`: Преобразует угол из градусов в радианы.
    -  `distance = (2 * initial_velocity**2 * sin(angle_in_radians) * cos(angle_in_radians)) / GRAVITY`: Вычисляет
       дальность полета снаряда, используя введенные пользователем значения.
    -  `distance_to_target = abs(distance - TARGET_DISTANCE)`: Вычисляет расстояние от места падения снаряда до цели.
    -  `logger.info(f"Дальность полета: {distance:.2f}")`: Выводит в лог информацию о дальности полета снаряда.
    -  `logger.info(f"Расстояние до цели: {distance_to_target:.2f}")`: Выводит в лог информацию о расстоянии до цели.
    -  `if distance_to_target < 1:`: Проверяет, попал ли игрок в цель (расстояние до цели меньше 1).
    -  `logger.info("Попадание!")`: Выводит в лог сообщение о попадании в цель.
    -  `break`: Завершает цикл, если игрок попал в цель.
    -  `if number_of_attempts >= 10`: Проверяет, не истекло ли количество попыток.
    -  `logger.info("Вы проиграли!")`: Выводит в лог сообщение о проигрыше, если игрок не попал в цель за 10 попыток.
4.  **Условие запуска программы:**
    -  `if __name__ == "__main__":`: Проверяет, что скрипт запущен напрямую, а не импортирован как модуль.
    -  `play_bomber()`: Вызывает функцию `play_bomber()`, чтобы начать игру.
"""
```