## Ответ на Задачу No 370: Совершенные треугольники

### 1. Анализ задачи и решение
**Понимание задачи:**
* Совершенный треугольник - это треугольник с целыми сторонами, у которого площадь численно равна периметру.
* Нам нужно найти количество совершенных треугольников с периметром, не превышающим 10<sup>16</sup>.

**Решение:**
1. **Формула Герона:** Площадь треугольника можно выразить через его полупериметр (s) и длины сторон (a, b, c):
   `Площадь = sqrt(s * (s - a) * (s - b) * (s - c))`, где `s = (a + b + c) / 2`.
2. **Условие совершенного треугольника:** Площадь численно равна периметру, то есть `sqrt(s * (s - a) * (s - b) * (s - c)) = a + b + c = 2s`.
3. **Упрощение:** Возведем обе части равенства в квадрат: `s * (s - a) * (s - b) * (s - c) = 4s^2`. Сократим на `s`: `(s - a) * (s - b) * (s - c) = 4s`.
4. **Поиск решений:** Преобразованное уравнение значительно упрощает перебор. Заметим, что `s = (a + b + c)/2`. Нам необходимо перебирать тройки целых чисел (a, b, c), которые удовлетворяют:
   * Условию треугольника: a + b > c, a + c > b, b + c > a
   * Преобразованному условию совершенства: `(s - a) * (s - b) * (s - c) = 4s`
   * Условию ограничения периметра: `a + b + c <= 10^16`
5. **Алгоритм оптимизации:** Поскольку точный перебор слишком ресурсозатратен, нужно учесть математические свойства совершенных треугольников. Известно, что все совершенные треугольники имеют одну из сторон, равную 6.  Сторона равная 6, появляется в 5 треугольниках: (5, 12, 13), (6, 8, 10), (6, 25, 29), (7, 15, 20) и (9, 10, 17).

   Все совершенные треугольники, стороны которых не превышают 10^16, получаются путем масштабирования этих базовых треугольников на натуральное число. Таким образом, перебор достаточно производить по базовым треугольникам и масштабирующему коэффициенту.

### 2. Алгоритм решения

1. Начать
2. Инициализировать переменную `count` со значением 0 для подсчета количества совершенных треугольников.
3. Определить список базовых совершенных треугольников:
   * `base_triangles = [(5, 12, 13), (6, 8, 10), (6, 25, 29), (7, 15, 20), (9, 10, 17)]`
4. Для каждого `base_triangle` в `base_triangles`:
   * Вычислить периметр базового треугольника: `base_perimeter = sum(base_triangle)`
   * Инициализировать переменную масштабирующего коэффициента `k` = 1
   * Пока `base_perimeter * k <= 10^16`:
      * Увеличить `count` на 1
      * Увеличить `k` на 1
5. Вывести значение `count`
6. Конец

### 3. Реализация на Python 3.12
```python
def count_perfect_triangles(max_perimeter):
    """
    Counts the number of perfect triangles with perimeter not exceeding max_perimeter.

    Args:
        max_perimeter: The maximum perimeter of the triangles.

    Returns:
        The count of perfect triangles.
    """

    count = 0
    base_triangles = [(5, 12, 13), (6, 8, 10), (6, 25, 29), (7, 15, 20), (9, 10, 17)]

    for triangle in base_triangles:
        base_perimeter = sum(triangle)
        k = 1
        while base_perimeter * k <= max_perimeter:
            count += 1
            k += 1
    return count


# Пример использования:
max_perimeter = 10**16
result = count_perfect_triangles(max_perimeter)
print(result)
```

### 4. Блок-схема в формате mermaid
```mermaid
flowchart TD
    Start((Начало)) --> InitializeCount((Инициализировать count = 0))
    InitializeCount --> DefineBaseTriangles((Определить base_triangles))
    DefineBaseTriangles --> LoopTrianglesStart((Начать цикл: Для каждого triangle в base_triangles))
     LoopTrianglesStart --> CalculateBasePerimeter((Вычислить base_perimeter = sum(triangle)))
    CalculateBasePerimeter --> InitializeK((Инициализировать k = 1))
     InitializeK --> LoopKStart((Начать цикл: Пока base_perimeter * k <= max_perimeter))
    LoopKStart --> IncrementCount((Увеличить count на 1))
    IncrementCount --> IncrementK((Увеличить k на 1))
      IncrementK --> LoopKStart
    LoopKStart -- Нет --> LoopTrianglesStart
     LoopTrianglesStart -- Конец --> OutputCount((Вывести count))
    OutputCount --> End((Конец))
```

**Legenda:**
* **Начало, Конец:** Начало и конец алгоритма.
* **Инициализировать count = 0:** Создаем переменную для хранения количества совершенных треугольников и присваиваем ей значение 0.
* **Определить base_triangles:** Определяем список базовых совершенных треугольников.
* **Начать цикл: Для каждого triangle в base_triangles, Конец цикла:** Определяет начало и конец цикла перебора базовых треугольников.
* **Вычислить base_perimeter = sum(triangle):** Вычисляем периметр текущего базового треугольника.
* **Инициализировать k = 1:** Инициализируем масштабирующий коэффициент значением 1.
* **Начать цикл: Пока base_perimeter \* k <= max_perimeter, Конец цикла:**  Определяет начало и конец цикла перебора коэффициентов масштабирования.
* **Увеличить count на 1:** Увеличиваем счетчик найденных совершенных треугольников.
* **Увеличить k на 1:** Увеличиваем масштабирующий коэффициент.
* **Вывести count:** Выводим общее количество найденных совершенных треугольников.
