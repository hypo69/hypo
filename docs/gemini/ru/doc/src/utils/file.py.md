# Модуль `src.utils.file`

## Обзор

Модуль `src.utils.file` предоставляет набор утилит для работы с файлами, включая чтение, запись, поиск файлов и другие операции. Поддерживает работу как с отдельными файлами, так и с директориями, включая рекурсивный поиск.

## Оглавление

- [Функции](#Функции)
  - [`save_text_file`](#save_text_file)
  - [`read_text_file_generator`](#read_text_file_generator)
  - [`read_text_file`](#read_text_file)
  - [`yield_text_from_files`](#yield_text_from_files)
  - [`_read_file_content`](#_read_file_content)
  - [`_read_file_lines_generator`](#_read_file_lines_generator)
  - [`get_filenames_from_directory`](#get_filenames_from_directory)
  - [`recursively_yield_file_path`](#recursively_yield_file_path)
  - [`recursively_get_file_path`](#recursively_get_file_path)
  - [`recursively_read_text_files`](#recursively_read_text_files)
  - [`get_directory_names`](#get_directory_names)
  - [`remove_bom`](#remove_bom)
  - [`main`](#main)

## Функции

### `save_text_file`

**Описание**: Сохраняет данные в текстовый файл.

**Параметры**:
- `file_path` (str | Path): Путь к файлу для сохранения.
- `data` (str | list[str] | dict): Данные для записи. Могут быть строкой, списком строк или словарем.
- `mode` (str, optional): Режим записи файла ('w' для записи, 'a' для добавления). По умолчанию 'w'.

**Возвращает**:
- `bool`: `True`, если файл успешно сохранен, `False` в противном случае.

**Вызывает исключения**:
- `Exception`: При возникновении ошибки при записи в файл.

### `read_text_file_generator`

**Описание**: Читает содержимое файла(ов) или директории.

**Параметры**:
- `file_path` (str | Path): Путь к файлу или директории.
- `as_list` (bool, optional): Если `True`, то возвращает генератор строк или список строк, в зависимости от типа вывода. По умолчанию `False`.
- `extensions` (list[str], optional): Список расширений файлов для включения при чтении директории. По умолчанию `None`.
- `chunk_size` (int, optional): Размер чанка для чтения файла в байтах. По умолчанию 8192.
- `recursive` (bool, optional): Если `True`, то поиск файлов выполняется рекурсивно. По умолчанию `False`.
- `patterns` (str | list[str], optional): Шаблоны для фильтрации файлов при рекурсивном поиске. По умолчанию `None`.

**Возвращает**:
- `Generator[str, None, None] | str | list[str] | None`:
    - Если `as_list` is True и `file_path` является файлом, возвращает генератор строк.
    - Если `as_list` is True и `file_path` является директорией и `recursive` is True, возвращает список строк.
    - Если `as_list` is False и `file_path` является файлом, возвращает строку.
    - Если `as_list` is False и `file_path` является директорией, возвращает объединенную строку.
    - Возвращает `None` в случае ошибки.

**Вызывает исключения**:
- `Exception`: При возникновении ошибки при чтении файла.

### `read_text_file`

**Описание**: Читает содержимое файла.

**Параметры**:
- `file_path` (str | Path): Путь к файлу или директории.
- `as_list` (bool, optional): Если True, возвращает содержимое в виде списка строк. По умолчанию False.
- `extensions` (list[str], optional): Список расширений файлов для включения при чтении директории. По умолчанию None.
- `exc_info` (bool, optional): Если True, логирует traceback при ошибке. По умолчанию True.

**Возвращает**:
- `str | list[str] | None`: Содержимое файла в виде строки или списка строк, или None в случае ошибки.

**Вызывает исключения**:
- `Exception`: При возникновении ошибки при чтении файла.

### `yield_text_from_files`

**Описание**: Читает содержимое файла и возвращает его в виде генератора строк или одной строки.

**Параметры**:
- `file_path` (str | Path): Путь к файлу.
- `as_list` (bool, optional): Если True, возвращает генератор строк. По умолчанию False.
- `chunk_size` (int, optional): Размер чанка для чтения файла в байтах. По умолчанию 8192.

**Возвращает**:
- `Generator[str, None, None] | str | None`: Генератор строк, объединенная строка или None в случае ошибки.

**Yields**:
- `str`: Строки из файла, если `as_list` is True.

**Вызывает исключения**:
- `Exception`: При возникновении ошибки при чтении файла.

### `_read_file_content`

**Описание**: Читает содержимое файла по чанкам и возвращает как строку.

**Параметры**:
- `file_path` (Path): Путь к файлу для чтения.
- `chunk_size` (int): Размер чанка для чтения файла в байтах.

**Возвращает**:
- `str`: Содержимое файла в виде строки.

**Вызывает исключения**:
- `Exception`: При возникновении ошибки при чтении файла.

### `_read_file_lines_generator`

**Описание**: Читает файл по строкам с помощью генератора.

**Параметры**:
- `file_path` (Path): Путь к файлу для чтения.
- `chunk_size` (int): Размер чанка для чтения файла в байтах.

**Yields**:
- `str`: Строки из файла.

**Вызывает исключения**:
- `Exception`: При возникновении ошибки при чтении файла.

### `get_filenames_from_directory`

**Описание**: Возвращает список имен файлов в директории, опционально отфильтрованных по расширению.

**Параметры**:
- `directory` (str | Path): Путь к директории для поиска.
- `extensions` (str | list[str], optional): Расширения для фильтрации. По умолчанию `*`.

**Возвращает**:
- `list[str]`: Список имен файлов, найденных в директории.

**Вызывает исключения**:
- `Exception`: При возникновении ошибки при получении списка имен файлов.

### `recursively_yield_file_path`

**Описание**: Рекурсивно возвращает пути ко всем файлам, соответствующим заданным шаблонам, в указанной директории.

**Параметры**:
- `root_dir` (str | Path): Корневая директория для поиска.
- `patterns` (str | list[str]): Шаблоны для фильтрации файлов.

**Yields**:
- `Path`: Путь к файлу, соответствующему шаблону.

**Вызывает исключения**:
- `Exception`: При возникновении ошибки при рекурсивном поиске файлов.

### `recursively_get_file_path`

**Описание**: Рекурсивно возвращает список путей ко всем файлам, соответствующим заданным шаблонам, в указанной директории.

**Параметры**:
- `root_dir` (str | Path): Корневая директория для поиска.
- `patterns` (str | list[str]): Шаблоны для фильтрации файлов.

**Возвращает**:
- `list[Path]`: Список путей к файлам, соответствующим шаблонам.

**Вызывает исключения**:
- `Exception`: При возникновении ошибки при рекурсивном поиске файлов.

### `recursively_read_text_files`

**Описание**: Рекурсивно читает текстовые файлы из указанной корневой директории, соответствующие заданным шаблонам.

**Параметры**:
- `root_dir` (str | Path): Путь к корневой директории для поиска.
- `patterns` (str | list[str]): Шаблон(ы) имени файла для фильтрации.
- `as_list` (bool, optional): Если True, то возвращает содержимое файла как список строк. По умолчанию `False`.

**Возвращает**:
- `list[str]`: Список содержимого файлов (или список строк, если `as_list=True`), соответствующих заданным шаблонам.

**Вызывает исключения**:
- `Exception`: При возникновении ошибки при чтении файла.

### `get_directory_names`

**Описание**: Возвращает список имен директорий из указанной директории.

**Параметры**:
- `directory` (str | Path): Путь к директории, из которой нужно получить имена.

**Возвращает**:
- `list[str]`: Список имен директорий, найденных в указанной директории.

**Вызывает исключения**:
- `Exception`: При возникновении ошибки при получении списка имен директорий.

### `remove_bom`

**Описание**: Удаляет BOM из текстового файла или из всех файлов Python в директории.

**Параметры**:
- `path` (str | Path): Путь к файлу или директории.

**Вызывает исключения**:
- `Exception`: При возникновении ошибки при удалении BOM из файла.

### `main`

**Описание**: Entry point for BOM removal in Python files.

**Параметры**:
- Нет

**Возвращает**:
 - None