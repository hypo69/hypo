# Модуль hypotez/src/endpoints/kazarinov/gemini_chat.py

## Обзор

Этот модуль предоставляет класс `KazarinovAI` для обработки задач обучения и диалогового общения с помощью модели Google Generative AI (Gemini). Модуль также содержит функцию `chat()` для запуска чат-сессии с этим AI-помощником.  Он использует предварительно подготовленные данные и системные инструкции, хранящиеся на Google Drive.

## Классы

### `KazarinovAI`

**Описание**: Класс `KazarinovAI` отвечает за обучение модели и генерацию диалогов для проекта Kazarinov с использованием Google Generative AI.  Он хранит API ключ, системные инструкции, пути к файлам и историю диалогов.

**Атрибуты**:

- `api_key`: API ключ для доступа к Gemini.
- `base_path`: Базовый путь к системным инструкциям и обучающим файлам на Google Drive.
- `system_instruction_list`: Список системных инструкций, полученных из файлов на Google Drive.
- `history_file`: Путь к файлу истории диалогов.
- `gemini_1`, `gemini_2`: Экземпляры класса `GoogleGenerativeAI` для работы с моделью.
- `timestamp`: Текущая временная метка.


**Методы**:

#### `__init__(self, system_instruction=None, generation_config={"response_mime_type": "text/plain"})`

**Описание**: Инициализирует экземпляр класса `KazarinovAI`.

**Параметры**:

- `system_instruction` (str, optional): Системная инструкция для модели. По умолчанию `None`.
- `generation_config` (dict | list[dict], optional): Конфигурация генерации текста. По умолчанию `{"response_mime_type": "text/plain"}`.

**Возвращает**:
- None

#### `train(self)`

**Описание**: Обучает модель на основе данных из файлов, разбивая их на чанки для обработки.

**Параметры**:
- `train_files` (list | str): Список или имя файла обучающих данных.

**Возвращает**:
- None

**Обрабатывает исключения**:
- Возможные исключения при чтении или обработке данных не описаны.

#### `question_answer(self)`

**Описание**: Обрабатывает вопросы, используя предварительно подготовленные файлы.


**Параметры**:
- `train_files` (list | str): Список или имя файла с вопросами.

**Возвращает**:
- None

**Обрабатывает исключения**:
- Возможные исключения при чтении или обработке данных не описаны.



#### `dialog(self)`

**Описание**: Проводит диалог, используя вопросы из разных языков, которые выбираются случайным образом.

**Параметры**:
-  Нет

**Возвращает**:
- None

**Обрабатывает исключения**:
- Возможные исключения при чтении или обработке данных не описаны.



#### `ask(self, q: str, no_log: bool = False, with_pretrain: bool = True) -> bool`

**Описание**: Отправляет вопрос модели Gemini и получает ответ.

**Параметры**:
- `q` (str): Вопрос для модели.
- `no_log` (bool, optional): Флаг для отключения логирования. По умолчанию `False`.
- `with_pretrain` (bool, optional): Флаг для использования предварительного обучения. По умолчанию `True`.

**Возвращает**:
- bool: Возвращает True, если запрос выполнен успешно.

**Обрабатывает исключения**:
- `Exception`: Возможные исключения при работе с моделью.



## Функции

### `chat()`

**Описание**: Запускает чат-сессию с моделью `KazarinovAI`.  Читает системные инструкции и обрабатывает пользовательский ввод, пока пользователь не выберет выход.

**Возвращает**:
- None

**Обрабатывает исключения**:
- `Exception`: Возможные исключения при чтении файлов системных инструкций.