# Модуль `hypotez/src/utils/smtp.py`

## Обзор

Модуль `hypotez/src/utils/smtp.py` предоставляет функции для отправки и получения электронных писем с использованием SMTP и IMAP серверов. Он включает в себя функции для отправки писем с помощью SMTP и получения писем с помощью IMAP.

## Функции

### `send`

**Описание**: Отправляет электронное письмо. Возвращает `True`, если отправка успешна, и `False` в противном случае.  Логирует ошибки.

**Параметры**:
- `subject` (str, опционально): Тема письма. По умолчанию пустая строка.
- `body` (str, опционально): Тело письма. По умолчанию пустая строка.
- `to` (str, опционально): Адрес получателя. По умолчанию `one.last.bit@gmail.com`.

**Возвращает**:
- bool: `True`, если отправка успешна, `False` в противном случае.

**Вызывает исключения**:
- Любые исключения, которые могут возникнуть во время работы с SMTP сервером (например, проблемы с подключением, неверные данные авторизации).  Подробная информация об ошибке будет записана в лог.


### `receive`

**Описание**: Получает электронные письма с IMAP сервера. Возвращает список словарей, содержащих информацию о каждом письме (тема, от кого, тело), если операция прошла успешно, `None` в противном случае.  Логирует ошибки.

**Параметры**:
- `imap_server` (str): Адрес IMAP сервера.
- `user` (str): Логин для доступа к IMAP серверу.
- `password` (str): Пароль для доступа к IMAP серверу.
- `folder` (str, опционально): Папка на IMAP сервере, из которой нужно получить письма. По умолчанию `inbox`.

**Возвращает**:
- Optional[List[Dict[str, str]]]: Список словарей с информацией о письмах или `None`, если произошла ошибка.


**Вызывает исключения**:
- Любые исключения, которые могут возникнуть во время работы с IMAP сервером (например, проблемы с подключением, неверные данные авторизации, проблемы с чтением почты). Подробная информация об ошибке будет записана в лог.

## Важные замечания

* **Безопасность**:  Не храните учетные данные (логин, пароль) напрямую в коде. Используйте переменные окружения (например, `os.environ`) для хранения этих данных.
* **Обработка ошибок**: Модуль содержит надежную обработку ошибок, логируя все исключения с подробной информацией о возникшей проблеме.
* **Обработка MIME**: Код корректно использует `MIMEText` для создания электронных писем, что критично для отправки текстовых писем.
* **Декодирование тела письма**: Функция `receive` декодирует тело письма с использованием `utf-8`, обрабатывая возможные ошибки декодирования.