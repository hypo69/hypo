# Модуль `src.suppliers.gearbest.graber`

## Обзор

Модуль `src.suppliers.gearbest.graber` предназначен для сбора значений полей на странице товара `gearbest.com`. Он наследует функциональность сбора данных от родительского класса и предоставляет возможность переопределять методы обработки полей для нестандартных случаев.
В классе реализована обработка конкретных полей товаров, специфичных для `gearbest.com`.

## Подробней

Этот модуль является частью системы сбора данных о товарах с различных интернет-магазинов. Он специализируется на парсинге страниц товаров `gearbest.com`.
Для обеспечения гибкости и расширяемости, модуль использует декораторы для выполнения предварительных действий перед отправкой запросов к веб-драйверу.

## Классы

### `Graber`

**Описание**: Класс `Graber` предназначен для захвата информации о товарах с сайта `gearbest.com`. Он наследуется от класса `Graber` (Grbr) из модуля `src.suppliers.graber` и переопределяет некоторые его методы для адаптации к специфике сайта `gearbest.com`.

**Как работает класс**:
1.  **Инициализация**: При инициализации класса устанавливается префикс поставщика (`supplier_prefix`) как `etzmaleh`. Этот префикс используется для идентификации поставщика в системе.
2.  **Наследование**: Класс наследует методы и атрибуты от родительского класса `Graber` (Grbr), что позволяет повторно использовать общую логику парсинга.
3.  **Контекст**: Класс использует `Context` для хранения глобальных настроек, таких как локаторы для декоратора `@close_pop_up`.

**Методы**:

*   `__init__`: Инициализирует экземпляр класса `Graber`, устанавливает префикс поставщика и вызывает конструктор родительского класса.

#### `__init__`

```python
def __init__(self, driver: Driver, lang_index):
    """Инициализация класса сбора полей товара."""
    ...
```

**Назначение**: Инициализация экземпляра класса `Graber`.

**Параметры**:

*   `driver` (Driver): Экземпляр веб-драйвера, используемый для взаимодействия с веб-страницей.
*   `lang_index` (int): Индекс языка, используемый при парсинге страницы.

**Как работает функция**:

1.  Устанавливает атрибут `supplier_prefix` в значение `etzmaleh`.
2.  Вызывает конструктор родительского класса `Grbr` с переданными параметрами и `supplier_prefix`.
3.  Устанавливает `Context.locator_for_decorator` в `None`, чтобы декоратор `@close_pop_up` не выполнялся по умолчанию.

**Примеры**:

```python
driver = Driver()
graber = Graber(driver, 0)
```

## Функции

### `close_pop_up`

```python
def close_pop_up(value: Any = None) -> Callable:
    """Создает декоратор для закрытия всплывающих окон перед выполнением основной логики функции.

    Args:
        value (Any): Дополнительное значение для декоратора.

    Returns:
        Callable: Декоратор, оборачивающий функцию.
    """
    ...
```

**Назначение**: Функция `close_pop_up` является декоратором, который предназначен для закрытия всплывающих окон на веб-странице перед выполнением основной логики функции, которую он оборачивает.

**Параметры**:

*   `value` (Any, optional): Дополнительное значение, которое может быть передано декоратору. По умолчанию `None`.

**Возвращает**:

*   `Callable`: Декоратор, который можно использовать для оборачивания других функций.

**Как работает функция**:

1.  Функция `close_pop_up` принимает необязательный параметр `value`.
2.  Она определяет внутреннюю функцию `decorator`, которая принимает функцию `func` в качестве аргумента.
3.  Внутри `decorator` определяется функция `wrapper`, которая выполняет следующие действия:

    *   Пытается выполнить локатор `Context.locator.close_pop_up` с помощью `Context.driver.execute_locator()`, чтобы закрыть всплывающее окно.
    *   Если выполнение локатора завершается неудачно, ошибка регистрируется с помощью `logger.debug()`.
    *   Вызывает обернутую функцию `func` с помощью `await func(*args, **kwargs)` и возвращает результат.
4.  Функция `decorator` возвращает функцию `wrapper`.
5.  Функция `close_pop_up` возвращает функцию `decorator`.

**Примеры**:

```python
@close_pop_up()
async def my_function():
    # Основная логика функции
    pass