# Документация для модуля `src.logger`

## Обзор

Модуль `src.logger` предоставляет гибкую систему логирования, поддерживающую консоль, файлы и логирование в формате JSON. Он использует шаблон проектирования Singleton, чтобы гарантировать использование только одного экземпляра логгера во всем приложении. Логгер поддерживает различные уровни логирования (например, `INFO`, `ERROR`, `DEBUG`) и включает цветной вывод для консольных логов. Вы также можете настроить форматы вывода логов и управлять логированием в различные файлы.

## Оглавление
- [Классы](#классы)
    - [SingletonMeta](#singletonmeta)
    - [JsonFormatter](#jsonformatter)
    - [Logger](#logger)
- [Функции](#функции)
    - [`__init__`](#__init__)
    - [`_configure_logger`](#_configure_logger)
    - [`initialize_loggers`](#initialize_loggers)
    - [`log`](#log)
    - [`info`](#info)
    - [`success`](#success)
    - [`warning`](#warning)
    - [`debug`](#debug)
    - [`error`](#error)
    - [`critical`](#critical)
- [Параметры для логгера](#параметры-для-логгера)
- [Конфигурация файлового логирования (`config`)](#конфигурация-файлового-логирования-config)
- [Пример использования](#пример-использования)

---

## Классы

### `SingletonMeta`

**Описание**: Метакласс, реализующий шаблон проектирования Singleton для логгера.

**Как работает класс**:
Гарантирует, что у класса будет только один экземпляр. При каждой попытке создать новый экземпляр возвращается существующий.

### `JsonFormatter`

**Описание**: Пользовательский форматтер, выводящий логи в формате JSON.

**Как работает класс**:
Преобразует записи лога в формат JSON для структурированного логирования.

### `Logger`

**Описание**: Основной класс логгера, поддерживающий консольное, файловое и JSON-логирование.

**Как работает класс**:
Класс `Logger` управляет созданием и конфигурацией различных логгеров (консольного, файлового и JSON). Он предоставляет методы для записи сообщений на разных уровнях (INFO, DEBUG, ERROR и т.д.) с возможностью добавления исключений и цветового форматирования. Класс использует паттерн Singleton, чтобы гарантировать, что в приложении используется только один экземпляр логгера.

**Методы**:
- [`__init__`](#__init__): Инициализирует экземпляр логгера.
- [`_configure_logger`](#_configure_logger): Конфигурирует и возвращает экземпляр логгера.
- [`initialize_loggers`](#initialize_loggers): Инициализирует логгеры для консольного и файлового логирования.
- [`log`](#log): Записывает сообщение на указанном уровне.
- [`info`](#info): Записывает информационное сообщение.
- [`success`](#success): Записывает сообщение об успехе.
- [`warning`](#warning): Записывает предупреждение.
- [`debug`](#debug): Записывает отладочное сообщение.
- [`error`](#error): Записывает сообщение об ошибке.
- [`critical`](#critical): Записывает критическое сообщение.

---

## Функции

### `__init__`

```python
def __init__(self):
    """
    Инициализирует экземпляр Logger с заполнителями для различных типов логгеров (консоль, файл и JSON).

    Args:
        None

    Returns:
        None

    Raises:
        None
    """
```

**Как работает функция**:
Инициализирует экземпляр класса `Logger`. При инициализации создаются заполнители для различных типов логгеров (консольный, файловый и JSON), которые будут настроены позже.

### `_configure_logger`

```python
def _configure_logger(name: str, log_path: str, level: Optional[int] = logging.DEBUG, formatter: Optional[logging.Formatter] = None, mode: Optional[str] = 'a') -> logging.Logger:
    """
    Конфигурирует и возвращает экземпляр логгера.

    Args:
        name (str): Имя логгера.
        log_path (str): Путь к файлу лога.
        level (Optional[int], optional): Уровень логирования, например, logging.DEBUG. По умолчанию logging.DEBUG.
        formatter (Optional[logging.Formatter], optional): Пользовательский форматтер (необязательно).
        mode (Optional[str], optional): Режим файла, например, 'a' для добавления (по умолчанию).

    Returns:
        logging.Logger: Сконфигурированный экземпляр logging.Logger.

    Raises:
        None
    """
```

**Как работает функция**:
Функция `_configure_logger` создает и настраивает экземпляр логгера. Она устанавливает уровень логирования, форматтер и путь к файлу лога. Если форматтер не указан, используется формат по умолчанию. Режим файла определяет, как будет открыт файл лога (например, для добавления или перезаписи).

**Параметры**:
- `name` (str): Имя логгера.
- `log_path` (str): Путь к файлу лога.
- `level` (Optional[int], optional): Уровень логирования, например, `logging.DEBUG`. По умолчанию `logging.DEBUG`.
- `formatter` (Optional[logging.Formatter], optional): Пользовательский форматтер (необязательно).
- `mode` (Optional[str], optional): Режим файла, например, `'a'` для добавления (по умолчанию).

**Возвращает**:
- `logging.Logger`: Сконфигурированный экземпляр `logging.Logger`.

### `initialize_loggers`

```python
def initialize_loggers(info_log_path: Optional[str] = '', debug_log_path: Optional[str] = '', errors_log_path: Optional[str] = '', json_log_path: Optional[str] = ''):
    """
    Инициализирует логгеры для консольного и файлового логирования (info, debug, error и JSON).

    Args:
        info_log_path (Optional[str], optional): Путь к файлу info лога (необязательно).
        debug_log_path (Optional[str], optional): Путь к файлу debug лога (необязательно).
        errors_log_path (Optional[str], optional): Путь к файлу error лога (необязательно).
        json_log_path (Optional[str], optional): Путь к файлу JSON лога (необязательно).

    Returns:
        None

    Raises:
        None
    """
```

**Как работает функция**:
Функция `initialize_loggers` инициализирует различные логгеры (info, debug, error и JSON) для записи в файлы. Она вызывает функцию `_configure_logger` для каждого типа логгера, передавая соответствующие пути к файлам. Если путь к файлу не указан, логгер не создается.

**Параметры**:
- `info_log_path` (Optional[str], optional): Путь к файлу info лога (необязательно).
- `debug_log_path` (Optional[str], optional): Путь к файлу debug лога (необязательно).
- `errors_log_path` (Optional[str], optional): Путь к файлу error лога (необязательно).
- `json_log_path` (Optional[str], optional): Путь к файлу JSON лога (необязательно).

### `log`

```python
def log(level, message, ex=None, exc_info=False, color=None):
    """
    Записывает сообщение на указанном уровне (например, INFO, DEBUG, ERROR) с необязательным исключением и цветовым форматированием.

    Args:
        level: Уровень логирования (например, logging.INFO, logging.DEBUG).
        message: Сообщение лога.
        ex: Необязательное исключение для записи в лог.
        exc_info: Нужно ли включать информацию об исключении (по умолчанию False).
        color: Кортеж с цветом текста и фона для консольного вывода (необязательно).

    Returns:
        None

    Raises:
        None
    """
```

**Как работает функция**:
Функция `log` является основной функцией для записи сообщений в лог. Она принимает уровень логирования, сообщение и дополнительные параметры, такие как исключение и цветовое форматирование. Функция определяет, нужно ли выводить сообщение в консоль или в файл, и вызывает соответствующие методы для записи.

**Параметры**:
- `level`: Уровень логирования (например, `logging.INFO`, `logging.DEBUG`).
- `message`: Сообщение лога.
- `ex`: Необязательное исключение для записи в лог.
- `exc_info`: Нужно ли включать информацию об исключении (по умолчанию `False`).
- `color`: Кортеж с цветом текста и фона для консольного вывода (необязательно).

### `info`

```python
def info(message, ex=None, exc_info=False, colors: Optional[tuple] = None):
    """
    Записывает информационное сообщение.

    Args:
        message: Информационное сообщение для записи в лог.
        ex: Необязательное исключение для записи в лог.
        exc_info: Нужно ли включать информацию об исключении (по умолчанию False).
        colors: Кортеж значений цвета для сообщения (необязательно).

    Returns:
        None

    Raises:
        None
    """
```

**Как работает функция**:
Функция `info` записывает информационное сообщение с уровнем `INFO`. Она вызывает функцию `log`, передавая уровень `logging.INFO` и остальные параметры.

**Параметры**:
- `message`: Информационное сообщение для записи в лог.
- `ex`: Необязательное исключение для записи в лог.
- `exc_info`: Нужно ли включать информацию об исключении (по умолчанию `False`).
- `colors`: Кортеж значений цвета для сообщения (необязательно).

### `success`

```python
def success(message, ex=None, exc_info=False, colors: Optional[tuple] = None):
    """
    Записывает сообщение об успехе.

    Args:
        message: Сообщение об успехе для записи в лог.
        ex: Необязательное исключение для записи в лог.
        exc_info: Нужно ли включать информацию об исключении (по умолчанию False).
        colors: Кортеж значений цвета для сообщения (необязательно).

    Returns:
        None

    Raises:
        None
    """
```

**Как работает функция**:
Функция `success` записывает сообщение об успехе с уровнем `INFO`. Она вызывает функцию `log`, передавая уровень `logging.INFO` и остальные параметры.

**Параметры**:
- `message`: Сообщение об успехе для записи в лог.
- `ex`: Необязательное исключение для записи в лог.
- `exc_info`: Нужно ли включать информацию об исключении (по умолчанию `False`).
- `colors`: Кортеж значений цвета для сообщения (необязательно).

### `warning`

```python
def warning(message, ex=None, exc_info=False, colors: Optional[tuple] = None):
    """
    Записывает предупреждающее сообщение.

    Args:
        message: Предупреждающее сообщение для записи в лог.
        ex: Необязательное исключение для записи в лог.
        exc_info: Нужно ли включать информацию об исключении (по умолчанию False).
        colors: Кортеж значений цвета для сообщения (необязательно).

    Returns:
        None

    Raises:
        None
    """
```

**Как работает функция**:
Функция `warning` записывает предупреждающее сообщение с уровнем `WARNING`. Она вызывает функцию `log`, передавая уровень `logging.WARNING` и остальные параметры.

**Параметры**:
- `message`: Предупреждающее сообщение для записи в лог.
- `ex`: Необязательное исключение для записи в лог.
- `exc_info`: Нужно ли включать информацию об исключении (по умолчанию `False`).
- `colors`: Кортеж значений цвета для сообщения (необязательно).

### `debug`

```python
def debug(message, ex=None, exc_info=True, colors: Optional[tuple] = None):
    """
    Записывает отладочное сообщение.

    Args:
        message: Отладочное сообщение для записи в лог.
        ex: Необязательное исключение для записи в лог.
        exc_info: Нужно ли включать информацию об исключении (по умолчанию True).
        colors: Кортеж значений цвета для сообщения (необязательно).

    Returns:
        None

    Raises:
        None
    """
```

**Как работает функция**:
Функция `debug` записывает отладочное сообщение с уровнем `DEBUG`. Она вызывает функцию `log`, передавая уровень `logging.DEBUG` и остальные параметры.

**Параметры**:
- `message`: Отладочное сообщение для записи в лог.
- `ex`: Необязательное исключение для записи в лог.
- `exc_info`: Нужно ли включать информацию об исключении (по умолчанию `True`).
- `colors`: Кортеж значений цвета для сообщения (необязательно).

### `error`

```python
def error(message, ex=None, exc_info=True, colors: Optional[tuple] = None):
    """
    Записывает сообщение об ошибке.

    Args:
        message: Сообщение об ошибке для записи в лог.
        ex: Необязательное исключение для записи в лог.
        exc_info: Нужно ли включать информацию об исключении (по умолчанию True).
        colors: Кортеж значений цвета для сообщения (необязательно).

    Returns:
        None

    Raises:
        None
    """
```

**Как работает функция**:
Функция `error` записывает сообщение об ошибке с уровнем `ERROR`. Она вызывает функцию `log`, передавая уровень `logging.ERROR` и остальные параметры.

**Параметры**:
- `message`: Сообщение об ошибке для записи в лог.
- `ex`: Необязательное исключение для записи в лог.
- `exc_info`: Нужно ли включать информацию об исключении (по умолчанию `True`).
- `colors`: Кортеж значений цвета для сообщения (необязательно).

### `critical`

```python
def critical(message, ex=None, exc_info=True, colors: Optional[tuple] = None):
    """
    Записывает критическое сообщение.

    Args:
        message: Критическое сообщение для записи в лог.
        ex: Необязательное исключение для записи в лог.
        exc_info: Нужно ли включать информацию об исключении (по умолчанию True).
        colors: Кортеж значений цвета для сообщения (необязательно).

    Returns:
        None

    Raises:
        None
    """
```

**Как работает функция**:
Функция `critical` записывает критическое сообщение с уровнем `CRITICAL`. Она вызывает функцию `log`, передавая уровень `logging.CRITICAL` и остальные параметры.

**Параметры**:
- `message`: Критическое сообщение для записи в лог.
- `ex`: Необязательное исключение для записи в лог.
- `exc_info`: Нужно ли включать информацию об исключении (по умолчанию `True`).
- `colors`: Кортеж значений цвета для сообщения (необязательно).

---

### Параметры для логгера

Класс `Logger` принимает несколько необязательных параметров для настройки поведения логирования.

- **Level**: Управляет серьезностью захватываемых логов. Общие уровни включают:
  - `logging.DEBUG`: Подробная информация, полезная для диагностики проблем.
  - `logging.INFO`: Общая информация, такая как успешные операции.
  - `logging.WARNING`: Предупреждения, которые не обязательно требуют немедленных действий.
  - `logging.ERROR`: Сообщения об ошибках.
  - `logging.CRITICAL`: Критические ошибки, требующие немедленного внимания.

- **Formatter**: Определяет, как форматируются сообщения журнала. По умолчанию сообщения форматируются как `'%(asctime)s - %(levelname)s - %(message)s'`. Вы можете предоставить пользовательский форматтер для разных форматов, таких как JSON.

- **Color**: Цвета для сообщений журнала в консоли. Цвета указываются в виде кортежа с двумя элементами:
  - **Цвет текста**: Указывает цвет текста (например, `colorama.Fore.RED`).
  - **Цвет фона**: Указывает цвет фона (например, `colorama.Back.WHITE`).

Цвет можно настроить для разных уровней журнала (например, зеленый для информации, красный для ошибок и т. д.).

---

### Конфигурация файлового логирования (`config`)

Чтобы записывать сообщения в файл, вы можете указать пути к файлам в конфигурации.

```python
config = {
    'info_log_path': 'logs/info.log',
    'debug_log_path': 'logs/debug.log',
    'errors_log_path': 'logs/errors.log',
    'json_log_path': 'logs/log.json'
}
```

Пути к файлам, указанные в `config`, используются для записи журналов в соответствующие файлы для каждого уровня журнала.

---

### Пример использования

#### 1. Инициализация логгера:

```python
logger: Logger = Logger()
config = {
    'info_log_path': 'logs/info.log',
    'debug_log_path': 'logs/debug.log',
    'errors_log_path': 'logs/errors.log',
    'json_log_path': 'logs/log.json'
}
logger.initialize_loggers(**config)
```

#### 2. Запись сообщений на разных уровнях:

```python
logger.info('Это информационное сообщение')
logger.success('Это сообщение об успехе')
logger.warning('Это предупреждающее сообщение')
logger.debug('Это отладочное сообщение')
logger.error('Это сообщение об ошибке')
logger.critical('Это критическое сообщение')
```

#### 3. Настройка цветов:

```python
logger.info('Это сообщение будет зеленым', colors=(colorama.Fore.GREEN, colorama.Back.BLACK))
logger.error('Это сообщение будет с красным фоном', colors=(colorama.Fore.WHITE, colorama.Back.RED))
```

---

Этот модуль предоставляет комплексную и гибкую систему ведения журнала для приложений Python. Вы можете настроить ведение журнала в консоли и файлы с различными форматами и цветами, управлять уровнями ведения журнала и корректно обрабатывать исключения. Конфигурация для ведения журнала в файлы хранится в словаре `config`, что обеспечивает простую настройку.