# Модуль `date_time`

## Обзор

Модуль `date_time` предоставляет функциональность для проверки, находится ли текущее время в заданном интервале, с возможностью установки таймаута. Он содержит класс `TimeoutCheck`, который позволяет определять, попадает ли текущее время в заданный временной промежуток. Это полезно для выполнения операций, которые должны происходить только в определенные периоды времени (например, ночное обслуживание). В модуле определены методы для проверки интервала времени с таймаутом и для ожидания ввода от пользователя с таймаутом.

## Подробней

Модуль предоставляет класс `TimeoutCheck`, который содержит методы для проверки, находится ли текущее время в заданном интервале, а также для ожидания ввода от пользователя с таймаутом. Это может быть полезно, когда необходимо выполнить определенные действия только в заданный период времени, например, запустить задачу обслуживания в ночное время. Кроме того, модуль предоставляет возможность установить таймаут для ожидания ввода от пользователя, что может быть полезно для предотвращения блокировки программы.

## Классы

### `TimeoutCheck`

**Описание**: Класс для проверки, находится ли текущее время в заданном интервале, с возможностью установки таймаута.

**Методы**:
- `__init__`: Инициализирует экземпляр класса `TimeoutCheck`.
- `interval`: Проверяет, находится ли текущее время в заданном интервале.
- `interval_with_timeout`: Проверяет, находится ли текущее время в заданном интервале с таймаутом.
- `get_input`: Запрашивает ввод от пользователя.
- `input_with_timeout`: Ожидает ввод от пользователя с таймаутом.

**Примеры**
```python
timeout_check = TimeoutCheck()

# Проверка интервала с таймаутом в 5 секунд
if timeout_check.interval_with_timeout(timeout=5):
    print("Текущее время находится в интервале.")
else:
    print("Текущее время находится вне интервала или произошел таймаут.")
```

## Функции

### `interval`

```python
    def interval(self, start: time = time(23, 0), end: time = time(6, 0)) -> bool:
        """ Check if the current time is within the specified interval.
        
        Args:
            start (time): Start of the interval (default is 23:00).
            end (time): End of the interval (default is 06:00).

        Returns:
            bool: True if the current time is within the interval, False otherwise.
        """
        ...
```

**Описание**: Проверяет, находится ли текущее время в заданном интервале.

**Параметры**:
- `start` (time): Начало интервала (по умолчанию 23:00).
- `end` (time): Конец интервала (по умолчанию 06:00).

**Возвращает**:
- `bool`: `True`, если текущее время находится в интервале, `False` в противном случае.

**Как работает функция**:
```
    +-------------------+    Да   +------------------------+
    |  start < end?     |------>| start <= current_time  |
    +-------------------+        |        <= end?          |
            | Нет                 +------------------------+
            |                      / \
            v                     Да  Нет
    +------------------------+     |   +-------------+
    | current_time >= start  |----->|   |   result    |
    |    or current_time     |         |   (True)    |
    |       <= end?           |         +-------------+
    +------------------------+     |
            |                      |   +-------------+
            v                     ---->|   |   result    |
          Нет                            |   (False)   |
            |                              +-------------+
            |
            v
    +-------------+
    |   result    |
    |   (False)   |
    +-------------+
```

**Примеры**:
```python
timeout_check = TimeoutCheck()
if timeout_check.interval(start=time(22, 0), end=time(7, 0)):
    print("Текущее время находится в интервале.")
else:
    print("Текущее время находится вне интервала.")
```

### `interval_with_timeout`

```python
    def interval_with_timeout(self, timeout: int = 5, start: time = time(23, 0), end: time = time(6, 0)) -> bool:
        """ Check if the current time is within the specified interval with a timeout.

        Args:
            timeout (int): Time in seconds to wait for the interval check.
            start (time): Start of the interval (default is 23:00).
            end (time): End of the interval (default is 06:00).

        Returns:
            bool: True if the current time is within the interval and response within timeout, False if not or timeout occurs.
        """
        ...
```

**Описание**: Проверяет, находится ли текущее время в заданном интервале с таймаутом.

**Параметры**:
- `timeout` (int): Время в секундах для ожидания проверки интервала.
- `start` (time): Начало интервала (по умолчанию 23:00).
- `end` (time): Конец интервала (по умолчанию 06:00).

**Возвращает**:
- `bool`: `True`, если текущее время находится в интервале и ответ получен в течение таймаута, `False`, если нет или произошел таймаут.

**Как работает функция**:

```
+-----------------------------------------------------+
|  Создание и запуск потока для проверки интервала   |
+-----------------------------------------------------+
            |
            v
+-----------------------------------------------------+
|   Ожидание завершения потока в течение timeout     |
+-----------------------------------------------------+
            |
            v
+-----------------------------------------------------+
| Поток жив? (Таймаут произошел)                      |
+-----------------------------------------------------+
            | Да
            v
+-----------------------------------------------------+
|  Вывод сообщения о таймауте и завершение потока     |
+-----------------------------------------------------+
            |
            v
+-----------------------------------------------------+
|                 Возврат False                       |
+-----------------------------------------------------+
            | Нет
            v
+-----------------------------------------------------+
|                Возврат self.result                  |
+-----------------------------------------------------+
```

**Примеры**:
```python
timeout_check = TimeoutCheck()
if timeout_check.interval_with_timeout(timeout=5, start=time(22, 0), end=time(7, 0)):
    print("Текущее время находится в интервале.")
else:
    print("Текущее время находится вне интервала или произошел таймаут.")
```

### `get_input`

```python
    def get_input(self):
        """ Запрашиваем ввод от пользователя."""
        ...
```

**Описание**: Запрашивает ввод от пользователя.

**Как работает функция**:
Запрашивает ввод пользователя и сохраняет его в атрибуте `self.user_input`.

### `input_with_timeout`

```python
    def input_with_timeout(self, timeout: int = 5) -> str | None:
        """ Ожидаем ввод с тайм-аутом.

        Args:
            timeout (int): Время ожидания ввода в секундах.

        Returns:
            str | None: Введенные данные или None, если был тайм-аут.
        """
        ...
```

**Описание**: Ожидает ввод от пользователя с таймаутом.

**Параметры**:
- `timeout` (int): Время ожидания ввода в секундах.

**Возвращает**:
- `str | None`: Введенные данные или `None`, если произошел таймаут.

**Как работает функция**:

```
+-----------------------------------------------------+
|  Создание и запуск потока для получения ввода      |
+-----------------------------------------------------+
            |
            v
+-----------------------------------------------------+
|   Ожидание завершения потока в течение timeout     |
+-----------------------------------------------------+
            |
            v
+-----------------------------------------------------+
| Поток жив? (Таймаут произошел)                      |
+-----------------------------------------------------+
            | Да
            v
+-----------------------------------------------------+
|  Вывод сообщения о таймауте и возврат None          |
+-----------------------------------------------------+
            | Нет
            v
+-----------------------------------------------------+
|            Возврат введенных данных                |
+-----------------------------------------------------+
```
```python
timeout_check = TimeoutCheck()
user_input = timeout_check.input_with_timeout(timeout=10)
if user_input:
    print(f"Вы ввели: {user_input}")
else:
    print("Таймаут ввода.")