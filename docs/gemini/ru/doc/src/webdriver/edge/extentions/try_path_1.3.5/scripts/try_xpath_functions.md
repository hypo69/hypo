# Модуль try_xpath_functions.js

## Обзор

Данный JavaScript-модуль `try_xpath_functions.js` предоставляет набор функций для работы с XPath и DOM-элементами в браузере. Он позволяет выполнять XPath-запросы, получать и обрабатывать результаты в различных форматах, а также управлять атрибутами и классами элементов. Модуль предназначен для использования в расширениях браузера.


## Функции

### `execExpr`

**Описание**: Выполняет XPath-запрос или DOM-методы `querySelector` и `querySelectorAll`.

**Параметры**:

- `expr` (str): XPath-выражение или CSS-селектор.
- `method` (str): Метод выполнения запроса ("evaluate", "querySelector", "querySelectorAll").
- `opts` (Optional[dict], optional): Опции для выполнения запроса:
    - `context` (Optional[Node | Document], optional): Контекст для выполнения запроса (по умолчанию `document`).
    - `resolver` (Optional[function], optional): Функция-резолвер для обработки значений в запросе.
    - `resultType` (Optional[int], optional): Тип результата XPath-запроса (по умолчанию `xpathResult.ANY_TYPE`).
    - `document` (Optional[Document], optional): Документ, используемый для выполнения XPath-запроса (по умолчанию `context.ownerDocument`).


**Возвращает**:

- `dict`: Словарь с результатами:
    - `items` (list): Список результатов запроса.
    - `method` (str): Использованный метод выполнения запроса.
    - `resultType` (int | None): Тип результата запроса (или None, если это не XPath запрос).


**Вызывает исключения**:

- `Error`: Бросается при некорректном контексте для используемого метода:
    - Для `evaluate`: если `context` не является элементом или атрибутом.
    - Для `querySelector`/`querySelectorAll`: если `context` не является документом или элементом.
    - При некорректном формате или значении `resolver`.


### `resToArr`

**Описание**: Преобразует результат XPath-запроса в массив.

**Параметры**:

- `res` (object): Результат объекта `evaluate` XPath запроса.
- `type` (int): Тип результата.


**Возвращает**:

- `list`: Массив результатов.


**Вызывает исключения**:

- `Error`: Бросается при недопустимом типе результата.


### `makeResolver`

**Описание**: Создает функцию-резолвер для обработки значений в запросе.

**Параметры**:

- `obj` (Optional[str | dict | function], optional): Значение для создания резолвера (строка, словарь или функция).


**Возвращает**:

- `function`: Функция-резолвер.


**Вызывает исключения**:

- `Error`: Бросается при некорректном формате `resolver` (не строка, не словарь и не функция). При ошибке парсинга строки.


### `isValidDict`

**Описание**: Проверяет, является ли объект допустимым словарем.

**Параметры**:

- `obj` (object): Объект для проверки.

**Возвращает**:

- `bool`: True, если объект является допустимым словарем, False иначе.


### `objToMap`

**Описание**: Преобразует объект в Map.

**Параметры**:

- `obj` (object): Объект для преобразования.

**Возвращает**:

- `Map`: Преобразованный Map.


### `isDocOrElem`

**Описание**: Проверяет, является ли объект документом или элементом.

**Параметры**:

- `obj` (object): Объект для проверки.

**Возвращает**:

- `bool`: True, если объект является документом или элементом, False иначе.


### `listToArr`

**Описание**: Преобразует список в массив.

**Параметры**:

- `list` (list): Список для преобразования.

**Возвращает**:

- `list`: Преобразованный массив.


### `getItemDetail`

**Описание**: Возвращает информацию об элементе DOM.

**Параметры**:

- `item` (object): Элемент DOM для получения информации.

**Возвращает**:

- `dict`: Словарь с информацией об элементе.

### `getItemDetails`

**Описание**: Возвращает информацию о множестве элементов DOM.

**Параметры**:

- `items` (list): Список элементов DOM для получения информации.

**Возвращает**:

- `list`: Список словарей с информацией об элементах.

**(и так далее для остальных функций)**