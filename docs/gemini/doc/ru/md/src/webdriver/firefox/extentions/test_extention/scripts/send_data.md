# Модуль send_data.js

## Обзор

Данный скрипт JavaScript отвечает за сбор информации о загруженной странице (заголовок, URL, содержимое) и отправку этой информации на сервер по заданному API-адресу. Скрипт использует метод `fetch` для асинхронной отправки данных.

## Функции

### `onPageLoad`

**Описание**: Обработчик события загрузки страницы. Собирает данные с текущей страницы и отправляет их на сервер.

**Действия**:
1. Получает заголовок страницы (`document.title`).
2. Получает URL текущей страницы (`window.location.href`).
3. Получает HTML-код тела страницы (`document.body.innerHTML`).
4. Формирует объект `data` с собранной информацией.
5. Отправляет объект `data` на сервер с помощью `fetch`.
6. Обрабатывает ответ от сервера, используя `.then()` для успешного ответа и `.catch()` для обработки ошибок.
7. Выводит полученный ответ в консоль (`console.log`).


**Вызывает исключения**:
- `Error`: Вызывается, если запрос на сервер завершается неудачей (например, сервер вернул код ошибки).  В этом случае сообщение об ошибке выводится в консоль (`console.error`).


## API-интерфейс

### `fetch`

**Описание**:  Функция `fetch` отправляет асинхронный HTTP-запрос на указанный URL.

**Параметры**:
- `'http://127.0.0.1/hypotez.online/api/'` (строка): Адрес API-эндпоинта.
- `{method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(data)}` (объект): Параметры запроса.
  - `method: 'POST'`: Метод HTTP-запроса.
  - `headers: {'Content-Type': 'application/json'}`: Заголовок запроса для указания типа отправляемых данных (JSON).
  - `body: JSON.stringify(data)`: Тело запроса, содержащее сериализованные в JSON данные `data`.

**Возвращает**:
- `Promise`: Объект, содержащий результат выполнения запроса.  Результат запроса, полученный от сервера.

##  Пример использования

```javascript
// Пример использования функции onPageLoad:
onPageLoad();
```

```
```

```javascript
// Пример объекта data, отправляемого на сервер:
{
    title: "Заголовок страницы",
    url: "https://example.com",
    body: "<html><body>Содержимое страницы</body></html>"
}
```
```
```
```javascript
// Пример ответа от сервера (в формате JSON):
{
    "message": "Данные успешно получены"
}
```
```
```
```javascript
// Обработка ошибок в примере использования:
try {
    onPageLoad();
} catch (ex) {
    console.error("Ошибка:", ex.message);
}
```
```javascript

```


```javascript
// Пример обработчика события загрузки страницы:
window.addEventListener('load', onPageLoad);
```


```javascript

```
```javascript


```
```javascript