# Модуль `hypotez/src/utils/convertors/png.py`

## Обзор

Модуль `src.utils.convertors.png` предоставляет инструменты для генерации изображений PNG из текстовых строк, используя библиотеку Pillow. Он позволяет настраивать параметры изображения, такие как размер, шрифт, цвета и расположение текста. Модуль также включает функцию для преобразования изображений WEBP в PNG.

## Классы

### `TextToImageGenerator`

**Описание**: Класс `TextToImageGenerator` отвечает за генерацию изображений PNG. Он предоставляет методы для определения путей, расчета позиций текста, генерации изображений, обработки комментариев и пустых строк, проверки наличия файлов, извлечения текста, анализа размера, определения размера шрифта и настройки логирования.


**Методы**:

- **`__init__`**: Инициализирует класс с настройками по умолчанию.
- **`generate_images`**: Генерирует изображения PNG из предоставленного списка строк.
- **`generate_png`**: Создает изображение PNG с заданным текстом, шрифтом, цветами и другими параметрами.
- **`center_text_position`**: Рассчитывает позицию для центрирования текста на холсте.
- **`overlay_images`**: Накладывает одно изображение PNG поверх другого в заданной позиции с возможностью настройки прозрачности.

## Функции

### `webp2png`

**Описание**: Преобразует изображение WEBP в формат PNG.

**Параметры**:
- `webp_path` (str): Путь к входному изображению WEBP.
- `png_path` (str): Путь для сохранения преобразованного изображения PNG.


**Возвращает**:
- bool: `True`, если преобразование выполнено успешно, иначе `None`. Выводит сообщение об ошибке, если преобразование не удалось.

##  **Константы**

### `MODE`

**Описание**: Строковая константа, хранящая режим работы модуля.


**Значение**:
- `'dev'` (строка)



## Примеры

```python
# Пример использования класса TextToImageGenerator
generator = TextToImageGenerator()
lines = ["Текст 1", "Текст 2"]
output_dir = "./output_images"
images = await generator.generate_images(lines, output_dir=output_dir, font="arial.ttf")
for image_path in images:
    print(f"Изображение сохранено: {image_path}")

# Пример использования функции webp2png
success = webp2png("input.webp", "output.png")
if success:
  print("Изображение успешно преобразовано")

```


```python
# Пример использования overlay_images
background_image_path = Path("background.png")
overlay_image_path = Path("overlay.png")
try:
    result_image = generator.overlay_images(background_image_path, overlay_image_path, position=(50, 50), alpha=0.8)
    result_image.save("result.png")
except Exception as e:
    print(f"Ошибка при наложении изображений: {e}")
```


**Примечания**:
- Обратите внимание на использование асинхронного метода `generate_images` и обработку возможных исключений.
-  Примеры демонстрируют базовые методы. Для более сложных сценариев, возможно, потребуется настройка параметров изображения, например, размера, шрифта, цветов.
- Для корректной работы необходимо установить библиотеку Pillow: `pip install Pillow`.
- В примерах предполагается, что файлы `background.png` и `overlay.png` существуют в текущем каталоге.