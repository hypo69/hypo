# Анализ кода модуля CHANGE

**Качество кода**
7
-  Плюсы
    - Описание игры и инструкция к ее реализации четкие и понятные.
    - Приведен пример работы программы, что упрощает понимание процесса игры.
    - Указаны ограничения по реализации, что полезно для разработчиков.
-  Минусы
    - Документ в формате Markdown, а не reStructuredText, что не соответствует требованиям.
    - Отсутствует какой-либо программный код, что не позволяет проверить его на соответствие требованиям.
    - Не хватает явного описания входных данных и ожидаемых результатов.

**Рекомендации по улучшению**
1. **Переформатировать документ в RST**: Необходимо перевести текст из Markdown в reStructuredText для соответствия стандартам документации.
2. **Добавить программный код**: Предоставить пример кода реализации игры на Python, который будет соответствовать описанию.
3. **Реализовать ввод и вывод**: Код должен включать функции для запроса ввода данных от пользователя (стоимость товара, сумма оплаты) и вывода результата (сдачи, разбитой на монеты и купюры).
4. **Добавить документацию к коду**: Код должен быть снабжен docstring для функций и классов, чтобы соответствовать требованиям.
5. **Обработка ошибок**: В коде должна быть предусмотрена обработка ошибок ввода, например, некорректный формат числа.
6. **Добавить тестирование**: Реализовать тестирование основных функций для проверки корректности расчетов.
7. **Логирование**: Использовать `logger` для записи ошибок и отладочной информации.

**Оптимизированный код**
```markdown
"""
Модуль описывает игру CHANGE (Кассовая программа)
=========================================================================================

Игра CHANGE представляет собой симуляцию кассового аппарата в магазине.
Игрок вводит стоимость товара и сумму оплаты, а программа вычисляет и выводит сдачу,
используя различные купюры и монеты.

Пример использования
--------------------

.. code-block:: python

    # Пример использования функции change_calculator
    change = change_calculator(4.59, 10.00)
    print(f"Сдача: ${change['change']:.2f}")
    for coin, count in change['coins'].items():
        print(f"{count} {coin}")
"""

def change_calculator(price: float, payment: float) -> dict:
    """
    Вычисляет сдачу и распределяет ее на купюры и монеты.

    :param price: Стоимость товара.
    :param payment: Сумма оплаты.
    :return: Словарь, содержащий сдачу и разбивку на купюры и монеты.
    """
    change = round(payment - price, 2)
    if change < 0:
        return {"change": 0, "coins": {}}
    
    coins = {
        "пятидолларовая купюра": 0,
        "однодолларовая купюра": 0,
        "четверть": 0,
        "никель": 0,
        "пенни": 0,
    }
    
    coin_values = {
        "пятидолларовая купюра": 5.00,
        "однодолларовая купюра": 1.00,
        "четверть": 0.25,
        "никель": 0.05,
        "пенни": 0.01,
    }

    for coin, value in coin_values.items():
        while change >= value:
            change = round(change - value, 2)
            coins[coin] += 1
            
    return {"change": payment - price, "coins": coins}


def main():
    """
    Основная функция игры CHANGE.
    Запрашивает у пользователя стоимость товара и сумму оплаты,
    выводит рассчитанную сдачу.
    """
    try:
        while True:
            try:
                price = float(input("Введите стоимость товара: "))
                payment = float(input("Введите сумму оплаты: "))
            except ValueError:
                print("Ошибка: Пожалуйста, введите корректное число.")
                continue
            
            change_result = change_calculator(price, payment)
            print(f"Сдача: ${change_result['change']:.2f}")
            for coin, count in change_result['coins'].items():
                if count > 0:
                   print(f"{count} {coin}")
                
            play_again = input("Хотите сыграть снова? (да/нет): ").lower()
            if play_again != "да":
                print("Спасибо за игру!")
                break
    except Exception as ex:
        from src.logger.logger import logger
        logger.error(f"Произошла ошибка {ex}")


if __name__ == "__main__":
    main()
```