# Модуль `src.suppliers.amazon.login`

## Обзор

Модуль `login.py` предназначен для реализации интерфейса авторизации на сайте Amazon с использованием веб-драйвера.

## Содержание

- [Функции](#функции)
    - [`login`](#login)

## Функции

### `login`

**Описание**:
Функция осуществляет вход в аккаунт Amazon с использованием данных, предоставленных через объект `Supplier`.

**Параметры**:
- `s` (Supplier): Объект `Supplier`, содержащий необходимые данные для входа, такие как локаторы элементов и экземпляр веб-драйвера.

**Возвращает**:
- `bool`: Возвращает `True`, если вход в систему был успешным, в противном случае возвращает `False`.

**Логика работы**:
1. Извлекает локаторы для элементов формы входа из `s.locators_store['login']`.
2. Получает экземпляр веб-драйвера из `s.driver`.
3. Переводит фокус на окно веб-драйвера.
4. Открывает страницу `https://amazon.com/`.
5. Пытается кликнуть на элемент, открывающий форму входа. Если первая попытка не удалась, обновляет страницу и пробует еще раз.
6. В случае неудачи при клике на элемент открытия формы входа, записывает сообщение об ошибке в лог и продолжает выполнение.
7. Выполняет ввод email, нажатие кнопки продолжения, ввод пароля, нажатие на чекбокс "оставаться в системе", нажатие кнопки входа используя локаторы из конфига `locators_store`.
8. Проверяет, осталась ли текущая страница страницей входа, в таком случае считает логин неудачным, делает запись в лог и возвращает `None`.
9. Максимизирует окно браузера и возвращает `True`.

```python
def login(s) -> bool:
    """
    Args:
        s (Supplier): Объект `Supplier`, содержащий необходимые данные для входа, такие как локаторы элементов и экземпляр веб-драйвера.

    Returns:
        bool: Возвращает `True`, если вход в систему был успешным, в противном случае возвращает `False`.
    """
    _l : dict = s.locators_store['login']
    _d = s.driver
    _d.window_focus()
    _d.get_url('https://amazon.com/')
    if not _d.click(_l['open_login_inputs']):
        _d.refresh()
        _d.window_focus()
        if not _d.click(_l['open_login_inputs']):
            logger.debug(' Тут надо искать логин кнопку в другом месте ')
        ...
    if not _d.execute_locator(_l['email_input']):
        return
        ...
    _d.wait(.7)
    if not _d.execute_locator(_l['continue_button']):
       ...
    _d.wait(.7)
    if not _d.execute_locator(_l['password_input']):
        ...
    _d.wait(.7)
    if not _d.execute_locator(_l['keep_signed_in_checkbox']):
        ...
    _d.wait(.7)
    if not _d.execute_locator(_l['success_login_button']):
       ...
    if _d.current_url == "https://www.amazon.com/ap/signin":
        logger.error(f' Неудачный логин ')
        ...
        return
    _d.wait(1.7)
    _d.maximize_window()
    logger.info(f'Залогинился ... ')
    return True