# Модуль `src.endpoints.bots.discord`

## Обзор

Данный модуль реализует бота для платформы Discord, предоставляющего возможности взаимодействия с пользователем, включая обработку голосовых команд, обучение и тестирование машинного обучения модели, предоставление инструкций и сбор обратной связи.

## Функции

### `run_bot`

**Описание**: Функция запускает Discord бота.

**Параметры**:
- `bot_token` (str): Токен доступа к Discord боту.

**Возвращает**:
- `None`: Функция не возвращает явных значений.

**Вызывает исключения**:
- `Exception`: Возникает в случае возникновения ошибок при инициализации или работе бота.

### `on_message`

**Описание**: Обработчик сообщений, обрабатывает сообщения, полученные от пользователей Discord.

**Параметры**:
- `message` (discord.Message): Объект сообщения Discord.

**Возвращает**:
- `None`: Функция не возвращает явных значений.

**Вызывает исключения**:
- `Exception`: Возникает в случае возникновения ошибок при обработке сообщений.

### `on_ready`

**Описание**: Обработчик события готовности бота.

**Параметры**:
- `bot` (discord.Bot): Объект бота Discord.

**Возвращает**:
- `None`: Функция не возвращает явных значений.

**Вызывает исключения**:
- `Exception`: Возникает в случае возникновения ошибок при обработке события готовности.

### `on_voice_state_update`

**Описание**: Обработчик события изменения состояния в голосовом канале.

**Параметры**:
- `member` (discord.Member): Объект пользователя Discord.
- `before` (discord.VoiceState): Предыдущее состояние в голосовом канале.
- `after` (discord.VoiceState): Текущее состояние в голосовом канале.

**Возвращает**:
- `None`: Функция не возвращает явных значений.

**Вызывает исключения**:
- `Exception`: Возникает в случае возникновения ошибок при обработке события изменения состояния в голосовом канале.


### `recognizer`

**Описание**: Функция распознает речь из аудио файла.

**Параметры**:
- `audio_file_path` (str): Путь к аудио файлу.

**Возвращает**:
- str: Распознанный текст.
- Exception: При ошибке распознавания.

**Вызывает исключения**:
- `Exception`: Возникает в случае возникновения ошибок при обработке аудио.

### `text_to_speech_and_play`

**Описание**: Функция преобразует текст в речь и воспроизводит его в голосовом канале.

**Параметры**:
- `text` (str): Текст для преобразования.
- `voice` (discord.VoiceClient): Объект голосового клиента.

**Возвращает**:
- None

**Вызывает исключения**:
- `Exception`: Возникает при ошибках преобразования или воспроизведения звука.

## Модули и библиотеки

- `discord.py`: Библиотека для создания ботов Discord.
- `speech_recognition`: Для распознавания речи.
- `pydub`: Для конвертации аудио файлов.
- `gtts`: Для преобразования текста в речь.
- `requests`: Для скачивания файлов.
- `pathlib`: Для работы с путями к файлам.
- `tempfile`: Для создания временных файлов.
- `asyncio`: Для асинхронного выполнения задач.


## Запуск бота

Бот запускается с использованием токена, хранящегося в переменной `gs.credentials.discord.bot_token`.

## Заключение

Данный бот предназначен для интерактивного взаимодействия с пользователем в Discord, включая обработку голосовых команд, обучение и тестирование модели машинного обучения, предоставление инструкций и сбор обратной связи.