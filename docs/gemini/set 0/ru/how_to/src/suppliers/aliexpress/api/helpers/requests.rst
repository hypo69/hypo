Как использовать функцию api_request
========================================================================================

Описание
-------------------------
Функция `api_request` предназначена для выполнения запроса к API и обработки полученного ответа. Она обрабатывает возможные исключения при получении ответа и его десериализации, а также анализирует код ответа. Если код ответа 200, функция возвращает результат, иначе - логгирует предупреждение и возвращает None.

Шаги выполнения
-------------------------
1. Функция принимает на вход объект `request` (предположительно, объект, предоставляющий метод `getResponse()` для получения ответа), строку `response_name` (имя поля в ответе, содержащем результат) и необязательное целое число `attemps` (количество попыток).
2. Она пытается получить ответ от API, используя метод `request.getResponse()`.
3. Если возникает исключение при получении ответа, функция обрабатывает ошибку (в данном случае, она логгирует ее и возвращает None).  Это критичная ошибка, которая предотвращает дальнейшую обработку.
4. Далее, она пытается извлечь результат (`resp_result`) из полученного ответа по ключу `response_name`.
5. Результат десериализуется из JSON в объект SimpleNamespace.
6. Проверяет код ответа (`response.resp_code`).
   - Если код ответа 200, функция возвращает `response.result`.
   - В противном случае, логгирует предупреждение с описанием кода ответа и сообщения об ошибке (`response.resp_msg`) и возвращает `None`.
7. Обрабатывает возможные исключения, связанные с десериализацией,  проверкой кода ответа и другими этапами, логгируя их и возвращая `None` в случае ошибки.


Пример использования
-------------------------
.. code-block:: python

    import requests
    from types import SimpleNamespace

    # Предположим, что request - это объект, содержащий методы для запроса к API.
    class MockRequest:
        def getResponse(self):
            try:
                response_data = {'resp_result': {'resp_code': 200, 'resp_msg': 'OK', 'result': {'key': 'value'}}}
                return {'response_name': response_data}
            except Exception as e:
                return None

    request = MockRequest()

    response = api_request(request, 'response_name')
    if response:
        print(response.key) # Выведет 'value'
    else:
      print("API response failed")