# Задача No 486
## Ищущие числа

## Условия

Пусть $f(n)$ — количество чисел $k$, таких что $1 \le k \le n$, где $\frac{k^2+1}{k+1}$ является целым числом.

Например, $f(15) = 6$. Числа $k$, для которых $\frac{k^2+1}{k+1}$ целое, и не превышающие 15, суть 1, 3, 8, 10, 14 и 15.

Пусть $S(n) = \sum_{i=1}^n f(i)$.

Например, $S(100) = 683$.

Найдите $S(10^9)$.

<br>
**Примечание:** 
Обратите внимание, что если $\frac{k^2+1}{k+1}$ является целым числом, то также является целым и число $\frac{k^2-1}{k+1} = k-1$, поэтому число $\frac{k^2+1}{k+1} - (k-1) = \frac{2}{k+1}$ также является целым. Следовательно $k+1$ является делителем числа 2, то есть $k+1 = 1$ или $k+1 = 2$.
 
Исходя из этого, $k$ должно быть равно 0 или 1, но $k \geq 1$.

Мы можем проверить, что $\frac{k^2+1}{k+1} = k-1 + \frac{2}{k+1}$. Поэтому, чтобы это выражение было целым числом, $k+1$ должно быть делителем числа 2. То есть $k+1 = 1$ или $k+1 = 2$. Соответственно, $k=0$ или $k=1$. Но условие требует $k \geq 1$.

При другом подходе, можно записать $k^2+1 = (k^2-1)+2 = (k-1)(k+1)+2$.
Значит $\frac{k^2+1}{k+1} = \frac{(k-1)(k+1)+2}{k+1} = k-1+\frac{2}{k+1}$.
Чтобы выражение было целым, необходимо чтобы $\frac{2}{k+1}$ было целым.
Следовательно, $k+1$ может быть равен 1 или 2.
Из этого следует что $k$ может быть 0 или 1. Но по условию $k \geq 1$.
Разрешенные $k$: 1, 3, 8, 10, 14, 15
$\frac{1^2+1}{1+1}=1$, $\frac{3^2+1}{3+1} = 2.5$,$\frac{8^2+1}{8+1}=7\frac{2}{9}$ $\frac{10^2+1}{10+1} = 9.18$

$k=1$
$\frac{k^2+1}{k+1} = \frac{2}{2} = 1$
$k=3$
$\frac{3^2+1}{3+1} = \frac{10}{4} = 2.5$ - не целое
$k=8$
$\frac{65}{9} = 7.22$ - не целое.
$k=10$
$\frac{101}{11} = 9.18$ - не целое.
$k=14$
$\frac{197}{15} = 13.13$ - не целое
$k=15$
$\frac{226}{16} = 14.125$ - не целое

Опечатка.
$k=1$ $\frac{1^2+1}{1+1}=1$
$k=3$ $\frac{3^2+1}{3+1} = \frac{10}{4}=2.5$
$k=7$ $\frac{7^2+1}{7+1} = \frac{50}{8} = 6.25$
$k=10$ $\frac{10^2+1}{10+1} = \frac{101}{11} = 9 \frac{2}{11}$
$k=14$
$\frac{14^2+1}{14+1} = \frac{197}{15}= 13 \frac{2}{15}$
$k=15$
$\frac{15^2+1}{15+1} = \frac{226}{16} = 14 \frac{1}{8}$
Так почему 1, 3, 8, 10, 14, 15?
$k = a^2 - 1$
$\frac{k^2+1}{k+1} = \frac{(a^2-1)^2+1}{a^2} = \frac{a^4-2a^2+1+1}{a^2} = a^2-2 + \frac{2}{a^2}$
$a^2$ должно делить 2. Тогда $a^2$ равно 1.

$k+1 = 1 \rightarrow k=0$
$k+1 = 2 \rightarrow k=1$

$k^2+1 = (k+1)m$
$k^2+1 = km+m$
$k^2-km = m-1$
$k(k-m)=m-1$
$m = k - 1 + \frac{2}{k+1}$
$k+1$ делит 2.
k+1 = 1, 2
k = 0, 1
$k=1$
$\frac{1+1}{1+1} = 1$
$k = 1$
$1, 3, 8, 10, 14, 15$
k = 1
k= 3, не работает
k= 7, 50/8 не работает.
k=8, 65/9 не работает

Надо посчитать количество целых чисел $k$, которые удовлетворяют:
$\frac{k^2+1}{k+1} = x$, где $x \in Z$ и $1 \le k \le n$
Из приведенного выше:
$\frac{k^2+1}{k+1} = \frac{(k-1)(k+1)+2}{k+1} = k-1 + \frac{2}{k+1}$.
Тогда $k+1$ должно быть делителем 2, поэтому $k+1 = 1$ или $k+1=2$, то есть $k=0$ или $k=1$. Но k>0, поэтому $k=1$.

Но тогда $f(1) = 1$, $f(2) = 1$, $f(3) = 1$ и $S(100)=100$

$k=a^2-1$
$k^2 = a^4 -2a^2 + 1$
$k^2+1 = a^4 -2a^2 + 2$
$k+1 = a^2$
$\frac{a^4-2a^2+2}{a^2} = a^2-2 + \frac{2}{a^2}$
Значит a = 1, и k = 0 - не подходит.
$a^2$ = 1
$a=1$.
$k=0$

$\frac{k^2+1}{k+1} = \frac{k^2-1+2}{k+1} = k-1 + \frac{2}{k+1}$.
$k+1$ должно быть делителем 2.
$k+1 = 1$, $k=0$
$k+1=2$, $k=1$.
Только $k=1$.
Тогда $f(n)$ равно количеству единиц до $n$, то есть $f(n) = 1$, для $n \geq 1$.
$S(n) = n$.
Тогда $S(10^9) = 10^9$.
