# Модуль stubs.py

## Обзор

Модуль `stubs.py` содержит определения моделей данных, используемых для конфигурации и ответов API g4f (gpt4free). Эти модели созданы с использованием библиотеки `pydantic` и служат для валидации и типизации данных, передаваемых между различными компонентами системы. В модуле определены конфигурационные модели для чат-комплишенов (текстовых запросов) и генерации изображений, а также модели ответов от провайдеров, моделей и ошибок.

## Подробней

Этот модуль предоставляет структуры данных для работы с API g4f, обеспечивая строгую типизацию и проверку данных. Он определяет конфигурационные модели для запросов к API, такие как `ChatCompletionsConfig` и `ImageGenerationConfig`, а также модели для представления ответов от API, такие как `ProviderResponseModel`, `ModelResponseModel`, `ErrorResponseModel` и другие.

## Классы

### `ChatCompletionsConfig`

**Описание**: Конфигурационная модель для запросов на завершение чата (текстовых запросов).

**Принцип работы**:
Модель `ChatCompletionsConfig` используется для настройки параметров запроса к API для завершения чата. Она включает в себя такие параметры, как сообщения, модель, провайдер, параметры стриминга, изображения, температура, штрафы, максимальное количество токенов и другие. Модель также поддерживает использование инструментов (tools) и управление ходом разговора (conversation).

**Атрибуты**:
- `messages` (Messages): Список сообщений для чата.
- `model` (str): Имя модели для использования.
- `provider` (Optional[str]): Провайдер модели.
- `stream` (bool): Флаг, указывающий, нужно ли использовать стриминг.
- `image` (Optional[str]): Ссылка на изображение.
- `image_name` (Optional[str]): Имя изображения.
- `images` (Optional[list[tuple[str, str]]]): Список кортежей с данными изображений.
- `media` (Optional[list[tuple[str, str]]]): Список кортежей с медиаданными.
- `modalities` (Optional[list[str]]): Список модальностей (текст, аудио).
- `temperature` (Optional[float]): Температура для генерации текста.
- `presence_penalty` (Optional[float]): Штраф за присутствие.
- `frequency_penalty` (Optional[float]): Штраф за частоту.
- `top_p` (Optional[float]): Top-p для генерации текста.
- `max_tokens` (Optional[int]): Максимальное количество токенов для генерации.
- `stop` (Union[list[str], str, None]): Список стоп-слов или стоп-слово.
- `api_key` (Optional[str]): Ключ API.
- `api_base` (str): Базовый URL API.
- `web_search` (Optional[bool]): Флаг, указывающий, нужно ли использовать поиск в интернете.
- `proxy` (Optional[str]): Прокси-сервер.
- `conversation_id` (Optional[str]): Идентификатор разговора.
- `conversation` (Optional[dict]): Словарь с данными разговора.
- `return_conversation` (Optional[bool]): Флаг, указывающий, нужно ли возвращать разговор.
- `history_disabled` (Optional[bool]): Флаг, указывающий, нужно ли отключить историю.
- `timeout` (Optional[int]): Время ожидания.
- `tool_calls` (list): Список вызовов инструментов.
- `tools` (list): Список инструментов.
- `parallel_tool_calls` (bool): Флаг, указывающий, нужно ли выполнять вызовы инструментов параллельно.
- `tool_choice` (Optional[str]): Выбор инструмента.
- `reasoning_effort` (Optional[str]): Уровень усилий для рассуждений.
- `logit_bias` (Optional[dict]): Смещение логитов.
- `audio` (Optional[dict]): Параметры аудио.
- `response_format` (Optional[dict]): Формат ответа.
- `extra_data` (Optional[dict]): Дополнительные данные.

### `ImageGenerationConfig`

**Описание**: Конфигурационная модель для запросов на генерацию изображений.

**Принцип работы**:
Модель `ImageGenerationConfig` используется для настройки параметров запроса к API для генерации изображений. Она включает в себя такие параметры, как промпт, модель, провайдер, формат ответа, API-ключ, прокси, ширина, высота, количество шагов инференса и другие.

**Атрибуты**:
- `prompt` (str): Текст запроса для генерации изображения.
- `model` (Optional[str]): Имя модели для использования.
- `provider` (Optional[str]): Провайдер модели.
- `response_format` (Optional[str]): Формат ответа.
- `api_key` (Optional[str]): Ключ API.
- `proxy` (Optional[str]): Прокси-сервер.
- `width` (Optional[int]): Ширина изображения.
- `height` (Optional[int]): Высота изображения.
- `num_inference_steps` (Optional[int]): Количество шагов инференса.
- `seed` (Optional[int]): Зерно для генерации случайных чисел.
- `guidance_scale` (Optional[int]): Масштаб направляющей.
- `aspect_ratio` (Optional[str]): Соотношение сторон изображения.
- `n` (Optional[int]): Количество генерируемых изображений.
- `negative_prompt` (Optional[str]): Негативный промпт.
- `resolution` (Optional[str]): Разрешение изображения.

### `ProviderResponseModel`

**Описание**: Модель ответа от провайдера.

**Принцип работы**:
Модель `ProviderResponseModel` используется для представления ответа от провайдера. Она включает в себя такие параметры, как идентификатор, объект, время создания, URL и метка.

**Атрибуты**:
- `id` (str): Идентификатор ответа.
- `object` (str): Тип объекта (всегда "provider").
- `created` (int): Время создания ответа.
- `url` (Optional[str]): URL ответа.
- `label` (Optional[str]): Метка ответа.

### `ProviderResponseDetailModel`

**Описание**: Модель детального ответа от провайдера.

**Принцип работы**:
Модель `ProviderResponseDetailModel` наследуется от `ProviderResponseModel` и добавляет информацию о моделях, моделях изображений, моделях зрения и параметрах.

**Наследует**:
`ProviderResponseModel` -  модель ответа от провайдера.

**Атрибуты**:
- `models` (list[str]): Список моделей.
- `image_models` (list[str]): Список моделей изображений.
- `vision_models` (list[str]): Список моделей зрения.
- `params` (list[str]): Список параметров.

### `ModelResponseModel`

**Описание**: Модель ответа от модели.

**Принцип работы**:
Модель `ModelResponseModel` используется для представления ответа от модели. Она включает в себя такие параметры, как идентификатор, объект, время создания и владелец.

**Атрибуты**:
- `id` (str): Идентификатор модели.
- `object` (str): Тип объекта (всегда "model").
- `created` (int): Время создания модели.
- `owned_by` (Optional[str]): Владелец модели.

### `UploadResponseModel`

**Описание**: Модель ответа на загрузку.

**Принцип работы**:
Модель `UploadResponseModel` используется для представления ответа на загрузку. Она включает в себя такие параметры, как идентификатор корзины и URL.

**Атрибуты**:
- `bucket_id` (str): Идентификатор корзины.
- `url` (str): URL.

### `ErrorResponseModel`

**Описание**: Модель ответа об ошибке.

**Принцип работы**:
Модель `ErrorResponseModel` используется для представления ответа об ошибке. Она включает в себя объект ошибки, модель и провайдер.

**Атрибуты**:
- `error` (ErrorResponseMessageModel): Объект ошибки.
- `model` (Optional[str]): Модель, вызвавшая ошибку.
- `provider` (Optional[str]): Провайдер, вызвавший ошибку.

### `ErrorResponseMessageModel`

**Описание**: Модель сообщения об ошибке.

**Принцип работы**:
Модель `ErrorResponseMessageModel` используется для представления сообщения об ошибке. Она включает в себя сообщение об ошибке.

**Атрибуты**:
- `message` (str): Сообщение об ошибке.

### `FileResponseModel`

**Описание**: Модель ответа о файле.

**Принцип работы**:
Модель `FileResponseModel` используется для представления ответа о файле. Она включает в себя имя файла.

**Атрибуты**:
- `filename` (str): Имя файла.