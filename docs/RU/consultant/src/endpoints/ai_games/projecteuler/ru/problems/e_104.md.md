# Анализ кода модуля `e_104.md`

**Качество кода**

*   Соответствие требованиям по оформлению кода: 3/10
    *   Плюсы:
        *   Присутствует описание задачи.
    *   Минусы:
        *   Отсутствуют импорты.
        *   Нет кода на Python.
        *   Не используются reStructuredText комментарии.
        *   Отсутствуют docstring.
        *   Нет обработки ошибок.
        *   Не используются `j_loads` или `j_loads_ns`.
        *   Нет форматирования кода.

**Рекомендации по улучшению**

1.  **Добавить импорты**: Добавить необходимые импорты.
2.  **Реализовать решение**:  Написать код на Python, решающий задачу.
3.  **Использовать RST**: Все комментарии должны быть переписаны в формате reStructuredText.
4.  **Добавить docstring**: Все функции должны иметь docstring.
5.  **Обработка ошибок**: Добавить обработку исключений.
6.  **Логирование**:  Использовать `logger.error` для записи ошибок.
7.  **Форматирование**: Код должен быть отформатирован для лучшей читаемости.
8.  **Панцифровые проверки**: Код должен содержать функции для проверки пан-цифровых чисел.

**Оптимизированный код**

```python
"""
Модуль для решения задачи 104 проекта Эйлера.
=========================================================================================

Задача состоит в поиске первого числа Фибоначчи, у которого первые и последние 9 цифр
являются пан-цифровыми.

Используется рекурсивное отношение для вычисления чисел Фибоначчи и проверка на пан-цифровые
свойства первых и последних 9 цифр.

Пример использования
--------------------
Для запуска решения просто запустите этот файл. Результат будет выведен в консоль.

.. code-block:: python

    python e_104.py
"""
from src.logger.logger import logger
from typing import List


def is_pandigital(num_str: str) -> bool:
    """
    Проверяет, является ли строка пан-цифровой (содержит цифры от 1 до 9 ровно один раз).

    :param num_str: Строка для проверки.
    :return: True, если строка пан-цифровая, иначе False.
    """
    return len(num_str) == 9 and set(num_str) == set('123456789')

def get_first_digits(num: int, n: int = 9) -> str:
    """
    Извлекает первые n цифр из числа.

    :param num: Число, из которого нужно извлечь цифры.
    :param n: Количество цифр, которые нужно извлечь.
    :return: Строка, содержащая первые n цифр числа.
    """
    return str(num)[:n]

def get_last_digits(num: int, n: int = 9) -> str:
    """
    Извлекает последние n цифр из числа.

    :param num: Число, из которого нужно извлечь цифры.
    :param n: Количество цифр, которые нужно извлечь.
    :return: Строка, содержащая последние n цифр числа.
    """
    return str(num)[-n:]

def solve_problem() -> int:
    """
     Решает задачу 104 проекта Эйлера.

    :return: Индекс первого числа Фибоначчи, у которого первые и последние 9 цифр являются пан-цифровыми.
    """
    a, b = 1, 1
    for i in range(3, 1_000_000): # Установлено ограничение для избежания бесконечного цикла, можно рассмотреть возможность использования другого метода поиска
        try:
            c = a + b
            first_digits = get_first_digits(c)
            last_digits = get_last_digits(c)
            if is_pandigital(first_digits) and is_pandigital(last_digits):
                return i
            a, b = b, c
        except Exception as ex:
            logger.error(f'Ошибка при вычислении чисел Фибоначчи на итерации {i}: {ex}')
            return -1 # Код возвращает -1 в случае ошибки, что будет интерпретироваться как неудача

    return -1 # Код возвращает -1, если решение не найдено в пределах установленного лимита
if __name__ == '__main__':
    result = solve_problem()
    if result != -1:
        print(f'Индекс первого числа Фибоначчи с пан-цифровыми первыми и последними 9 цифрами: {result}')
    else:
        print('Решение не найдено')
```