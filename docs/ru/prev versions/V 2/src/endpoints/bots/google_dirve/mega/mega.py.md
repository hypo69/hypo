# Модуль `mega.py`

## Обзор

Модуль `mega.py` предоставляет функциональность для взаимодействия с API сервиса Mega.co.nz. Он включает в себя классы и методы для аутентификации пользователя, управления файлами (загрузка, скачивание) и получения публичных ссылок.

## Содержание

- [Классы](#классы)
    - [`Mega`](#mega)
- [Функции](#функции)

## Классы

### `Mega`

**Описание**:
Класс для взаимодействия с API Mega.co.nz. Позволяет выполнять аутентификацию, скачивать и загружать файлы, а также получать публичные ссылки на файлы.

**Методы**:
- `__init__`: Инициализирует объект `Mega`.
- `from_credentials`: Создает объект `Mega` с использованием email и пароля.
- `from_ephemeral`: Создает объект `Mega` с использованием эфемерного ключа.
- `api_req`: Выполняет API запрос к Mega.
- `login_user`: Выполняет вход пользователя с использованием email и пароля.
- `login_ephemeral`: Выполняет вход пользователя с использованием эфемерного ключа.
- `_login_common`: Общая логика для входа пользователя.
- `get_files`: Получает список файлов пользователя.
- `download_from_url`: Скачивает файл по публичной ссылке.
- `download_file`: Скачивает файл.
- `get_public_url`: Получает публичную ссылку на файл.
- `uploadfile`: Загружает файл.

#### `__init__`
```python
    def __init__(self):
        """
        Инициализирует объект Mega.
        """
```
**Описание**:
Инициализирует объект `Mega` с начальными значениями. Устанавливает `seqno` (порядковый номер запроса) и `sid` (идентификатор сессии) в `None`.

#### `from_credentials`
```python
    @classmethod
    def from_credentials(cls, email, password):
        """
        Args:
            email (str): Email пользователя.
            password (str): Пароль пользователя.
        
        Returns:
            Mega: Возвращает экземпляр класса Mega.
        """
```
**Описание**:
Создает объект `Mega` с использованием email и пароля для аутентификации пользователя.

**Параметры**:
- `email` (str): Email пользователя.
- `password` (str): Пароль пользователя.

**Возвращает**:
- `Mega`: Экземпляр класса `Mega`.

#### `from_ephemeral`
```python
    @classmethod
    def from_ephemeral(cls):
        """
        Returns:
            Mega: Возвращает экземпляр класса Mega.
        """
```
**Описание**:
Создает объект `Mega` с использованием эфемерного ключа для аутентификации пользователя.

**Возвращает**:
- `Mega`: Экземпляр класса `Mega`.

#### `api_req`
```python
    def api_req(self, data):
        """
        Args:
            data (dict): Данные для запроса.
        
        Returns:
             dict: Ответ API в виде словаря.

        Raises:
            MegaRequestException: Если ответ API является ошибкой.
        """
```
**Описание**:
Выполняет API-запрос к Mega.

**Параметры**:
- `data` (dict): Данные для запроса.

**Возвращает**:
- `dict`: Ответ API в виде словаря.

**Вызывает исключения**:
- `MegaRequestException`: Если ответ API является ошибкой.

#### `login_user`
```python
    def login_user(self, email, password):
        """
        Args:
            email (str): Email пользователя.
            password (str): Пароль пользователя.
        """
```
**Описание**:
Выполняет вход пользователя с использованием email и пароля.

**Параметры**:
- `email` (str): Email пользователя.
- `password` (str): Пароль пользователя.

#### `login_ephemeral`
```python
    def login_ephemeral(self):
        """
        Выполняет вход пользователя с использованием эфемерного ключа.
        """
```
**Описание**:
Выполняет вход пользователя с использованием эфемерного ключа.

#### `_login_common`
```python
    def _login_common(self, res, password):
        """
        Args:
            res (dict): Ответ от API.
            password (list): Ключ пароля.
        
        Raises:
            MegaIncorrectPasswordExcetion: Если e-mail или пароль не верны.
        """
```
**Описание**:
Общая логика для входа пользователя, обрабатывает данные ответа API и устанавливает ключи для шифрования и сессии.

**Параметры**:
- `res` (dict): Ответ от API.
- `password` (list): Ключ пароля.

**Вызывает исключения**:
- `MegaIncorrectPasswordExcetion`: Если e-mail или пароль не верны.

#### `get_files`
```python
    def get_files(self):
        """
        Returns:
            dict: Данные о файлах пользователя.
        """
```
**Описание**:
Получает список файлов пользователя.

**Возвращает**:
- `dict`: Данные о файлах пользователя.

#### `download_from_url`
```python
    def download_from_url(self, url):
        """
        Args:
            url (str): Публичная ссылка на файл.
        
        Returns:
            str: Имя загруженного файла.
        """
```
**Описание**:
Скачивает файл по публичной ссылке.

**Параметры**:
- `url` (str): Публичная ссылка на файл.

**Возвращает**:
- `str`: Имя загруженного файла.

#### `download_file`
```python
    def download_file(self, file_id, file_key, public=False, store_path=None):
        """
        Args:
            file_id (str): Идентификатор файла.
            file_key (str): Ключ файла.
            public (bool, optional): Файл публичный или нет. По умолчанию `False`.
            store_path (str, optional): Путь для сохранения файла. По умолчанию `None`.
        
        Returns:
             str: Имя загруженного файла.

        Raises:
            ValueError: Если MAC не совпадают.
        """
```
**Описание**:
Скачивает файл.

**Параметры**:
- `file_id` (str): Идентификатор файла.
- `file_key` (str): Ключ файла.
- `public` (bool, optional): Файл публичный или нет. По умолчанию `False`.
- `store_path` (str, optional): Путь для сохранения файла. По умолчанию `None`.

**Возвращает**:
- `str`: Имя загруженного файла.

**Вызывает исключения**:
- `ValueError`: Если MAC не совпадают.

#### `get_public_url`
```python
    def get_public_url(self, file_id, file_key):
        """
        Args:
            file_id (str): Идентификатор файла.
            file_key (str): Ключ файла.
        
        Returns:
             str: Публичная ссылка на файл.
        """
```
**Описание**:
Получает публичную ссылку на файл.

**Параметры**:
- `file_id` (str): Идентификатор файла.
- `file_key` (str): Ключ файла.

**Возвращает**:
- `str`: Публичная ссылка на файл.

#### `uploadfile`
```python
    def uploadfile(self, filename, dst=None):
        """
        Args:
            filename (str): Имя загружаемого файла.
            dst (str, optional): Идентификатор папки назначения. По умолчанию `None`.

        Returns:
             dict: Результат операции загрузки.
        """
```
**Описание**:
Загружает файл в облачное хранилище.

**Параметры**:
- `filename` (str): Имя загружаемого файла.
- `dst` (str, optional): Идентификатор папки назначения. По умолчанию `None`.

**Возвращает**:
- `dict`: Результат операции загрузки.

## Функции

В данном модуле нет отдельных функций, все операции выполняются через методы класса `Mega`.