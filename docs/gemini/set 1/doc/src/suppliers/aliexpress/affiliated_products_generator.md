# Модуль `hypotez/src/suppliers/aliexpress/affiliated_products_generator.py`

## Обзор

Этот модуль содержит класс `AliAffiliatedProducts`, предназначенный для сбора полной информации о продуктах с Алиэкспресс, включая аффилированные ссылки и сохраненные изображения/видео.  Он расширяет класс `AliApi`, добавляя функциональность для обработки списка идентификаторов продуктов, получения аффилированных ссылок, загрузки изображений и видео, а также сохранения данных о продуктах в файлы JSON.

## Классы

### `AliAffiliatedProducts`

**Описание**: Класс `AliAffiliatedProducts` наследуется от `AliApi` и расширяет его функциональность для работы с аффилированными продуктами.  Он предназначен для извлечения данных о продуктах, включая аффилированные ссылки и сохраненные изображения/видео, и сохранения их в файлы JSON.

**Методы:**

- `__init__`: Инициализирует экземпляр класса, принимая язык и валюту для кампании.
- `process_affiliate_products`: Обрабатывает список идентификаторов продуктов и возвращает список обработанных продуктов с аффилированными ссылками и сохраненными изображениями/видео.


## Функции

(В этом модуле нет дополнительных функций, кроме методов класса `AliAffiliatedProducts`)


## Детали методов класса `AliAffiliatedProducts`

### `__init__`

**Описание**: Инициализирует экземпляр класса `AliAffiliatedProducts`.

**Параметры**:

- `language` (str | dict, optional): Язык кампании (по умолчанию 'EN').
- `currency` (str, optional): Валюта кампании (по умолчанию 'USD').

**Возвращает**:
- `None`: Не возвращает значение.

**Вызывает исключения**:

- `None`:  Не вызывает никаких исключений.

### `process_affiliate_products`

**Описание**: Обрабатывает список идентификаторов продуктов и возвращает список обработанных продуктов с аффилированными ссылками и сохраненными изображениями/видео.

**Параметры**:

- `prod_ids` (list[str]): Список URL-адресов или идентификаторов продуктов.
- `category_root` (Path | str): Путь к корневой директории категории.

**Возвращает**:

- list[SimpleNamespace]: Список обработанных продуктов в формате SimpleNamespace с аффилированными ссылками, изображениями и видео.

**Вызывает исключения**:

- `Exception`: Если категория не найдена.


**Примечания**:

- Метод использует `ensure_https` для нормализации URL-адресов.
- Метод сохраняет изображения и видео в отдельные директории.
- Метод сохраняет данные о продуктах в файлы JSON.
- Метод содержит обширные комментарии и блок-схему, описывающие алгоритм обработки.