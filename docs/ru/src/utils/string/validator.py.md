# Модуль валидации строк

## Обзор

Модуль `validator.py` предоставляет инструменты для валидации строк на соответствие определенным критериям и форматам. Он включает в себя класс `ProductFieldsValidator` с набором статических методов для проверки различных типов данных, таких как цены, вес, артикулы и URL.

## Подробней

Этот модуль предназначен для обеспечения целостности и корректности данных, используемых в проекте `hypotez`. Валидация строк является важной частью обработки данных, так как позволяет убедиться, что данные соответствуют ожидаемым форматам и значениям. Использование этого модуля помогает предотвратить ошибки и повысить надежность системы.

## Классы

### `ProductFieldsValidator`

**Описание**: Класс `ProductFieldsValidator` предоставляет статические методы для валидации различных полей продукта, таких как цена, вес, артикул и URL.

**Принцип работы**:
Класс содержит статические методы, каждый из которых выполняет определенную проверку для конкретного поля продукта. Методы используют регулярные выражения и другие методы для проверки соответствия данных заданным критериям.

**Методы**:

- `validate_price(price: str) -> bool`: Валидирует строку цены.
- `validate_weight(weight: str) -> bool`: Валидирует строку веса.
- `validate_sku(sku: str) -> bool`: Валидирует строку артикула.
- `validate_url(url: str) -> bool`: Валидирует строку URL.
- `isint(s: str) -> bool`: Проверяет, является ли строка целым числом.

## Функции

### `validate_price`

```python
    @staticmethod
    def validate_price(price: str) -> bool:
        """
        Валидация цены
        """
        ...
```

**Назначение**: Валидация строки, представляющей цену продукта.

**Параметры**:
- `price` (str): Строка, содержащая цену продукта.

**Возвращает**:
- `bool`: `True`, если цена прошла валидацию, в противном случае `None`.

**Как работает функция**:

1. **Проверка на пустоту**: Если строка `price` пуста, функция завершается и возвращает `None`.
2. **Очистка строки цены**: Удаляет все символы, не являющиеся цифрами или разделителями, используя регулярное выражение `Ptrn.clear_price`.
3. **Замена разделителей**: Заменяет запятые на точки для приведения к стандартному формату чисел с плавающей точкой.
4. **Преобразование в число с плавающей точкой**: Пытается преобразовать очищенную строку в число с плавающей точкой. Если преобразование успешно, цена считается валидной.
5. **Обработка исключений**: Если в процессе преобразования возникает исключение, функция завершается и возвращает `None`.
6. **Возврат результата**: Если все проверки пройдены успешно, функция возвращает `True`.

**ASCII Flowchart**:

```
Проверка на пустоту цены
|
Удаление лишних символов из цены
|
Замена запятых на точки
|
Попытка преобразования в float
|
Успешно?
|
Да -> True
|
Нет -> None
```

**Примеры**:

```python
from src.utils.string.validator import ProductFieldsValidator

price1 = "123.45"
result1 = ProductFieldsValidator.validate_price(price1)
print(f"Цена '{price1}' валидна: {result1}")  # Вывод: Цена '123.45' валидна: True

price2 = "abc"
result2 = ProductFieldsValidator.validate_price(price2)
print(f"Цена '{price2}' валидна: {result2}")  # Вывод: Цена 'abc' валидна: None

price3 = ""
result3 = ProductFieldsValidator.validate_price(price3)
print(f"Цена '{price3}' валидна: {result3}")  # Вывод: Цена '' валидна: None
```

### `validate_weight`

```python
    @staticmethod
    def validate_weight(weight: str) -> bool:
        """
        Валидация веса
        """
        ...
```

**Назначение**: Валидация строки, представляющей вес продукта.

**Параметры**:
- `weight` (str): Строка, содержащая вес продукта.

**Возвращает**:
- `bool`: `True`, если вес прошел валидацию, в противном случае `None`.

**Как работает функция**:

1. **Проверка на пустоту**: Если строка `weight` пуста, функция завершается и возвращает `None`.
2. **Очистка строки веса**: Удаляет все символы, не являющиеся цифрами или разделителями, используя регулярное выражение `Ptrn.clear_number`.
3. **Замена разделителей**: Заменяет запятые на точки для приведения к стандартному формату чисел с плавающей точкой.
4. **Преобразование в число с плавающей точкой**: Пытается преобразовать очищенную строку в число с плавающей точкой. Если преобразование успешно, вес считается валидным.
5. **Обработка исключений**: Если в процессе преобразования возникает исключение, функция завершается и возвращает `None`.
6. **Возврат результата**: Если все проверки пройдены успешно, функция возвращает `True`.

**ASCII Flowchart**:

```
Проверка на пустоту веса
|
Удаление лишних символов из веса
|
Замена запятых на точки
|
Попытка преобразования в float
|
Успешно?
|
Да -> True
|
Нет -> None
```

**Примеры**:

```python
from src.utils.string.validator import ProductFieldsValidator

weight1 = "1.5"
result1 = ProductFieldsValidator.validate_weight(weight1)
print(f"Вес '{weight1}' валиден: {result1}")  # Вывод: Вес '1.5' валиден: True

weight2 = "abc"
result2 = ProductFieldsValidator.validate_weight(weight2)
print(f"Вес '{weight2}' валиден: {result2}")  # Вывод: Вес 'abc' валиден: None

weight3 = ""
result3 = ProductFieldsValidator.validate_weight(weight3)
print(f"Вес '{weight3}' валиден: {result3}")  # Вывод: Вес '' валиден: None
```

### `validate_sku`

```python
    @staticmethod
    def validate_sku(sku: str) -> bool:
        """
        Валидация артикула
        """
        ...
```

**Назначение**: Валидация строки, представляющей артикул продукта.

**Параметры**:
- `sku` (str): Строка, содержащая артикул продукта.

**Возвращает**:
- `bool`: `True`, если артикул прошел валидацию, в противном случае `None`.

**Как работает функция**:

1. **Проверка на пустоту**: Если строка `sku` пуста, функция завершается и возвращает `None`.
2. **Удаление специальных символов**: Удаляет специальные символы из строки артикула с использованием `StringFormatter.remove_special_characters`.
3. **Удаление переносов строк**: Удаляет переносы строк из строки артикула с использованием `StringFormatter.remove_line_breaks`.
4. **Удаление пробельных символов в начале и конце строки**: Удаляет пробельные символы в начале и конце строки.
5. **Проверка длины строки**: Проверяет, что длина строки артикула составляет не менее 3 символов. Если длина меньше 3, функция завершается и возвращает `None`.
6. **Возврат результата**: Если все проверки пройдены успешно, функция возвращает `True`.

**ASCII Flowchart**:

```
Проверка на пустоту артикула
|
Удаление специальных символов
|
Удаление переносов строк
|
Удаление пробельных символов
|
Длина >= 3?
|
Да -> True
|
Нет -> None
```

**Примеры**:

```python
from src.utils.string.validator import ProductFieldsValidator

sku1 = "ABC-123"
result1 = ProductFieldsValidator.validate_sku(sku1)
print(f"Артикул '{sku1}' валиден: {result1}")  # Вывод: Артикул 'ABC-123' валиден: True

sku2 = "AB"
result2 = ProductFieldsValidator.validate_sku(sku2)
print(f"Артикул '{sku2}' валиден: {result2}")  # Вывод: Артикул 'AB' валиден: None

sku3 = ""
result3 = ProductFieldsValidator.validate_sku(sku3)
print(f"Артикул '{sku3}' валиден: {result3}")  # Вывод: Артикул '' валиден: None
```

### `validate_url`

```python
    @staticmethod
    def validate_url(url: str) -> bool:
        """
        Валидация URL
        """
        ...
```

**Назначение**: Валидация строки, представляющей URL.

**Параметры**:
- `url` (str): Строка, содержащая URL.

**Возвращает**:
- `bool`: `True`, если URL прошел валидацию, в противном случае `None`.

**Как работает функция**:

1. **Проверка на пустоту**: Если строка `url` пуста, функция завершается и возвращает `None`.
2. **Удаление пробельных символов в начале и конце строки**: Удаляет пробельные символы в начале и конце строки.
3. **Проверка наличия схемы**: Если URL не начинается с `http`, добавляет `http://` в начало строки.
4. **Разбор URL**: Разбирает URL с использованием `urlparse`.
5. **Проверка наличия сетевого расположения и схемы**: Проверяет, что у разобранного URL присутствуют сетевое расположение (`netloc`) и схема (`scheme`). Если одно из условий не выполнено, функция завершается и возвращает `None`.
6. **Возврат результата**: Если все проверки пройдены успешно, функция возвращает `True`.

**ASCII Flowchart**:

```
Проверка на пустоту URL
|
Удаление пробельных символов
|
Добавление схемы "http://" (если отсутствует)
|
Разбор URL
|
Наличие netloc и scheme?
|
Да -> True
|
Нет -> None
```

**Примеры**:

```python
from src.utils.string.validator import ProductFieldsValidator

url1 = "example.com"
result1 = ProductFieldsValidator.validate_url(url1)
print(f"URL '{url1}' валиден: {result1}")  # Вывод: URL 'example.com' валиден: True

url2 = "http://example.com"
result2 = ProductFieldsValidator.validate_url(url2)
print(f"URL '{url2}' валиден: {result2}")  # Вывод: URL 'http://example.com' валиден: True

url3 = "abc"
result3 = ProductFieldsValidator.validate_url(url3)
print(f"URL '{url3}' валиден: {result3}")  # Вывод: URL 'abc' валиден: None

url4 = ""
result4 = ProductFieldsValidator.validate_url(url4)
print(f"URL '{url4}' валиден: {result4}")  # Вывод: URL '' валиден: None
```

### `isint`

```python
    @staticmethod
    def isint(s: str) -> bool:
        """
        [Function's description]
        """
        ...
```

**Назначение**: Проверка, является ли строка целым числом.

**Параметры**:
- `s` (str): Строка для проверки.

**Возвращает**:
- `bool`: `True`, если строка является целым числом, в противном случае `None`.

**Как работает функция**:

1. **Попытка преобразования в целое число**: Пытается преобразовать входную строку `s` в целое число с помощью функции `int()`.
2. **Обработка исключений**: Если в процессе преобразования возникает исключение (например, `ValueError`), функция перехватывает исключение и возвращает `None`.
3. **Возврат результата**: Если преобразование прошло успешно, функция возвращает `True`.

**ASCII Flowchart**:

```
Попытка преобразования в int
|
Успешно?
|
Да -> True
|
Нет -> None
```

**Примеры**:

```python
from src.utils.string.validator import ProductFieldsValidator

str1 = "123"
result1 = ProductFieldsValidator.isint(str1)
print(f"Строка '{str1}' является целым числом: {result1}")  # Вывод: Строка '123' является целым числом: True

str2 = "abc"
result2 = ProductFieldsValidator.isint(str2)
print(f"Строка '{str2}' является целым числом: {result2}")  # Вывод: Строка 'abc' является целым числом: None