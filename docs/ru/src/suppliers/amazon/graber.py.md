# Модуль для сбора данных с Amazon
## Обзор

Модуль `graber.py` предназначен для сбора информации о товарах с сайта `amazon.com`. Он содержит класс `Graber`, который наследуется от базового класса `Graber` (`Grbr`) и переопределяет некоторые методы для обработки специфичных полей и элементов на страницах Amazon.

## Подробней

Этот модуль является частью системы для сбора данных о товарах с различных онлайн-площадок. Он использует веб-драйвер для взаимодействия со страницей и извлечения необходимых данных. Отличительной особенностью является возможность переопределения логики обработки отдельных полей товара, если стандартные методы не подходят.  Также в коде закомментированы строки с декоратором. Это необходимо для предварительных действий перед отправкой запроса к веб-драйверу. Декоратор по умолчанию находится в родительском классе.

## Классы

### `Graber`

**Описание**: Класс `Graber` предназначен для сбора данных о товарах с сайта `amazon.com`. Он наследуется от базового класса `Graber` (`Grbr`) и переопределяет некоторые методы для обработки специфичных полей и элементов на страницах Amazon.

**Наследует**:
- `Graber` (`Grbr`) из модуля `src.suppliers.graber`.

**Атрибуты**:
- `supplier_prefix` (str): Префикс поставщика, устанавливается в значение `'amazon'`.

**Методы**:
- `__init__(driver: Driver, lang_index: int)`: Инициализирует экземпляр класса `Graber`.

### `__init__`

**Описание**: Инициализирует экземпляр класса `Graber`, устанавливает префикс поставщика и вызывает конструктор родительского класса.

```python
    def __init__(self, driver: Driver, lang_index:int):\n        """Инициализация класса сбора полей товара."""
```

**Параметры**:
- `driver` (`Driver`): Экземпляр веб-драйвера для взаимодействия с сайтом.
- `lang_index` (`int`): Индекс языка.

**Как работает функция**:

1. Устанавливает атрибут `supplier_prefix` равным `'amazon'`.
2. Вызывает конструктор родительского класса `Grbr` с установленным префиксом поставщика, драйвером и индексом языка.
3. Устанавливает глобальные настройки через `Context`, в частности, обнуляет `Context.locator_for_decorator`.

**Примеры**:

```python
from src.webdriver.driver import Driver
from src.webdriver import Firefox

driver = Driver(Firefox)
graber = Graber(driver, 0)
print(graber.supplier_prefix)  # Вывод: amazon
```
ASCII-схема работы функции:

```
Начало инициализации
  ↓
Установка supplier_prefix = 'amazon'
  ↓
Вызов Grbr.__init__(...)
  ↓
Установка Context.locator_for_decorator = None
  ↓
Конец инициализации
```

### `close_pop_up`

**Описание**: Создает декоратор для закрытия всплывающих окон перед выполнением основной логики функции.

```python
# def close_pop_up(value: Any = None) -> Callable:
#     """Создает декоратор для закрытия всплывающих окон перед выполнением основной логики функции.
```

**Параметры**:
- `value` (`Any`, optional): Дополнительное значение для декоратора. По умолчанию `None`.

**Возвращает**:
- `Callable`: Декоратор, оборачивающий функцию.

**Как работает функция**:
1.  Создает декоратор, который принимает функцию `func` в качестве аргумента.
2.  Декоратор оборачивает функцию `func` в функцию `wrapper`.
3.  Внутри `wrapper` происходит попытка выполнить локатор `Context.locator.close_pop_up` для закрытия всплывающего окна.
4.  В случае ошибки выполнения локатора, информация об ошибке логируется.
5.  После закрытия всплывающего окна вызывается основная функция `func` и возвращается ее результат.

**Примеры**:

```python
def my_function():
    print("Hello, world!")

decorated_function = close_pop_up()(my_function)
```
ASCII-схема работы функции:

```
Создание декоратора
  ↓
Определение wrapper(*args, **kwargs)
  ↓
Попытка закрытия всплывающего окна
  ↓
Вызов func(*args, **kwargs)
  ↓
Возврат результата func