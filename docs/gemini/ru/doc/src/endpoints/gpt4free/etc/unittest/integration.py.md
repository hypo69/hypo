# Модуль интеграционных тестов для gpt4free

## Обзор

Модуль содержит интеграционные тесты для проверки взаимодействия с различными провайдерами (Copilot, DDG) через API gpt4free.
Эти тесты проверяют успешность выполнения запросов к API и корректность возвращаемых данных.

## Подробней

Этот файл содержит интеграционные тесты, проверяющие интеграцию с различными провайдерами API, такими как Copilot и DDG, используя клиент gpt4free.
Он проверяет, что запросы возвращают ожидаемые ответы в формате JSON. Этот код важен для автоматизированного тестирования, чтобы убедиться,
что различные компоненты системы работают правильно вместе.

## Классы

### `TestProviderIntegration`

**Описание**: Класс для интеграционных тестов провайдеров.

**Принцип работы**:
Класс содержит тесты для синхронного выполнения запросов к API различных провайдеров.
Он создает экземпляры `Client` с указанным провайдером, отправляет запросы и проверяет, что ответы соответствуют ожидаемому формату и содержат ожидаемые данные.

**Методы**:
- `test_bing`: Тест для проверки интеграции с провайдером Copilot.
- `test_openai`: Тест для проверки интеграции с провайдером DDG.

#### `test_bing`

```python
def test_bing(self):
    """
    Тестирует интеграцию с провайдером Copilot.

    Создает клиент с провайдером Copilot, отправляет запрос и проверяет, что ответ является экземпляром ChatCompletion
    и содержит ожидаемые данные в формате JSON.
    """
    ...
```

**Как работает функция**:
1. Создается экземпляр класса `Client` с провайдером `Copilot`.
2. Отправляется запрос `chat.completions.create` с предопределенными сообщениями и указанием формата ответа как `json_object`.
3. Проверяется, что полученный ответ является экземпляром класса `ChatCompletion`.
4. Проверяется, что ответ содержит ключ `success` в JSON-формате.

**Примеры**:
```python
# Пример использования test_bing
test_case = TestProviderIntegration()
test_case.test_bing()
```

#### `test_openai`

```python
def test_openai(self):
    """
    Тестирует интеграцию с провайдером DDG.

    Создает клиент с провайдером DDG, отправляет запрос и проверяет, что ответ является экземпляром ChatCompletion
    и содержит ожидаемые данные в формате JSON.
    """
    ...
```

**Как работает функция**:
1. Создается экземпляр класса `Client` с провайдером `DDG`.
2. Отправляется запрос `chat.completions.create` с предопределенными сообщениями и указанием формата ответа как `json_object`.
3. Проверяется, что полученный ответ является экземпляром класса `ChatCompletion`.
4. Проверяется, что ответ содержит ключ `success` в JSON-формате.

**Примеры**:
```python
# Пример использования test_openai
test_case = TestProviderIntegration()
test_case.test_openai()
```

### `TestChatCompletionAsync`

**Описание**: Класс для асинхронных интеграционных тестов.

**Принцип работы**:
Класс содержит асинхронные тесты для выполнения запросов к API различных провайдеров.
Он создает экземпляры `AsyncClient` с указанным провайдером, отправляет запросы и проверяет, что ответы соответствуют ожидаемому формату и содержат ожидаемые данные.

**Методы**:
- `test_bing`: Асинхронный тест для проверки интеграции с провайдером Copilot.
- `test_openai`: Асинхронный тест для проверки интеграции с провайдером DDG.

#### `test_bing`

```python
async def test_bing(self):
    """
    Асинхронно тестирует интеграцию с провайдером Copilot.

    Создает асинхронный клиент с провайдером Copilot, отправляет запрос и проверяет, что ответ является экземпляром ChatCompletion
    и содержит ожидаемые данные в формате JSON.
    """
    ...
```

**Как работает функция**:
1. Создается экземпляр класса `AsyncClient` с провайдером `Copilot`.
2. Отправляется асинхронный запрос `chat.completions.create` с предопределенными сообщениями и указанием формата ответа как `json_object`.
3. Проверяется, что полученный ответ является экземпляром класса `ChatCompletion`.
4. Проверяется, что ответ содержит ключ `success` в JSON-формате.

**Примеры**:
```python
# Пример использования test_bing
import asyncio
test_case = TestChatCompletionAsync()
asyncio.run(test_case.test_bing())
```

#### `test_openai`

```python
async def test_openai(self):
    """
    Асинхронно тестирует интеграцию с провайдером DDG.

    Создает асинхронный клиент с провайдером DDG, отправляет запрос и проверяет, что ответ является экземпляром ChatCompletion
    и содержит ожидаемые данные в формате JSON.
    """
    ...
```

**Как работает функция**:
1. Создается экземпляр класса `AsyncClient` с провайдером `DDG`.
2. Отправляется асинхронный запрос `chat.completions.create` с предопределенными сообщениями и указанием формата ответа как `json_object`.
3. Проверяется, что полученный ответ является экземпляром класса `ChatCompletion`.
4. Проверяется, что ответ содержит ключ `success` в JSON-формате.

**Примеры**:
```python
# Пример использования test_openai
import asyncio
test_case = TestChatCompletionAsync()
asyncio.run(test_case.test_openai())
```