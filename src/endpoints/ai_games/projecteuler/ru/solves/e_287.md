## Ответ на Задачу No 287: Квадратичное разделение

### 1. Анализ задачи и решение

**Понимание задачи:**

*   Задача заключается в подсчете количества изменений значения функции `g(x,y)` при переборе `x` от `-N` до `N` для каждого фиксированного `y` от `-N` до `N`. Функция `g(x,y)` равна 1, если `x² + y² ≤ 1000`, и 0 иначе.
*   `T(N)` представляет собой сумму количества изменений `g(x,y)` для всех возможных `y` в диапазоне от `-N` до `N`.
*   Необходимо найти `T(2 000 000)`.

**Решение:**

1.  **Оптимизация:** Вместо того, чтобы напрямую вычислять `g(x,y)` для каждого `x`, можно заметить, что нас интересуют только точки, где `x² + y²` "пересекает" границу 1000. Это означает, что для каждого `y`, нам нужно найти два значения `x`, при которых `x²` примерно равно `1000 - y²`. Нас интересует целая часть x.
2.  **Поиск границ:**  Для каждого `y`, мы находим максимальное `x`, такое что `x² ≤ 1000 - y²`. Это можно сделать с помощью квадратного корня и приведения к целым числам.
3.  **Подсчет изменений:** Количество изменений `g(x,y)` вдоль линии `y=t` будет равно 2, если существует действительное `x`, такое что `x^2 = 1000 - t^2`. Если `1000 - t²` отрицательное то количество изменений равно 0. Если `1000-t^2 = 0`, то 1 изменение.
4.  **Суммирование:** Мы суммируем количество изменений для каждого значения `y` от `-N` до `N`, чтобы получить `T(N)`.

### 2. Алгоритм решения

1.  Начать
2.  Инициализировать `totalChanges` = 0
3.  Установить N = 2 000 000
4.  Для каждого `y` от `-N` до `N`:
    *   Вычислить `limit = 1000 - y²`
    *   Если `limit < 0`, установить `changes = 0`
    *   Если `limit == 0`, установить `changes = 1`
    *   Иначе
        *   Вычислить `x = floor(sqrt(limit))`
        *   Установить `changes = 2`
    *   Прибавить `changes` к `totalChanges`
5.  Вернуть `totalChanges`
6.  Конец

### 3. Реализация на Python 3.12
```python
import math

def calculate_t(n):
    """
    Calculates the total number of changes T(N).

    Args:
      n: The range limit N.

    Returns:
      The total number of changes T(N).
    """

    total_changes = 0
    for y in range(-n, n + 1):
        limit = 1000 - y * y
        if limit < 0:
            changes = 0
        elif limit == 0:
            changes = 1
        else:
            x = math.floor(math.sqrt(limit))
            changes = 2
        total_changes += changes

    return total_changes


# Пример использования
N = 2_000_000
result = calculate_t(N)
print(result)
```

### 4. Блок-схема в формате mermaid
```mermaid
flowchart TD
    Start((Начало)) --> InitializeTotalChanges((Инициализировать totalChanges = 0))
    InitializeTotalChanges --> SetN((Установить N = 2000000))
    SetN --> LoopStartY((Начать цикл: y от -N до N))
    LoopStartY --> CalculateLimit((Вычислить limit = 1000 - y²))
    CalculateLimit --> CheckLimitNegative((Проверить: limit < 0?))
    CheckLimitNegative -- Да --> SetChangesZero((Установить changes = 0))
    SetChangesZero --> AddChanges((Прибавить changes к totalChanges))
     CheckLimitNegative -- Нет --> CheckLimitZero((Проверить: limit == 0?))
    CheckLimitZero -- Да --> SetChangesOne((Установить changes = 1))
    SetChangesOne --> AddChanges
    CheckLimitZero -- Нет --> CalculateX((Вычислить x = floor(sqrt(limit))))
    CalculateX --> SetChangesTwo((Установить changes = 2))
    SetChangesTwo --> AddChanges
    AddChanges --> LoopStartY
    LoopStartY --> End((Конец))

```

**Легенда:**
*   **Начало, Конец:** Начало и конец алгоритма.
*   **Инициализировать totalChanges:** Создаем переменную для хранения результата и присваиваем ей значение 0.
*   **Установить N:** Устанавливаем значение N равным 2 000 000.
*  **Начать цикл: y от -N до N, Конец цикла:** Определяют начало и конец цикла перебора чисел y от -N до N.
*  **Вычислить limit = 1000 - y²:** Вычисляем значение предела.
*  **Проверить: limit < 0?**: Проверяем, меньше ли предел 0.
*   **Установить changes = 0:** Если предел меньше 0, то изменения равны 0.
*  **Проверить: limit == 0?**: Проверяем, равен ли предел 0.
*   **Установить changes = 1:** Если предел равен 0, то изменения равны 1.
*   **Вычислить x = floor(sqrt(limit)):** Вычисляем целую часть корня из предела.
*   **Установить changes = 2:** Если предел больше 0 то изменения равны 2
*   **Прибавить changes к totalChanges:** Добавляем изменения к общему количеству изменений.
