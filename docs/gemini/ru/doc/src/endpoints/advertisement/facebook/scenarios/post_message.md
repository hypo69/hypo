# Модуль hypotez/src/endpoints/advertisement/facebook/scenarios/post_message.py

## Обзор

Этот модуль содержит функции для публикации сообщений на Facebook. Он предоставляет инструменты для заполнения заголовка и описания сообщения, загрузки медиафайлов и последующей публикации.  Модуль использует класс `Driver` для взаимодействия с веб-сайтом Facebook.

## Оглавление

- [Функции](#функции)
    - [`post_title`](#post_title)
    - [`upload_media`](#upload_media)
    - [`update_images_captions`](#update_images_captions)
    - [`publish`](#publish)
    - [`promote_post`](#promote_post)
    - [`post_message`](#post_message)


## Функции

### `post_title`

**Описание**: Функция отправляет заголовок и описание кампании в поле сообщения.

**Параметры**:
- `d` (Driver): Экземпляр драйвера для взаимодействия с веб-страницей.
- `message` (SimpleNamespace | str): Объект `SimpleNamespace` или строка, содержащая заголовок и описание.  Если это строка, она будет отправлена в поле сообщения без форматирования.

**Возвращает**:
- `bool`: `True`, если заголовок и описание отправлены успешно, иначе `None`.


### `upload_media`

**Описание**: Загружает медиафайлы (изображения и/или видео) и обновляет подписи.

**Параметры**:
- `d` (Driver): Экземпляр драйвера.
- `media` (SimpleNamespace | List[SimpleNamespace] | str | list[str]): Медиа для загрузки.  Может быть одиночным медиа-объектом или списком таких объектов, строкой или списком строк, содержащих пути к медиафайлам.
- `no_video` (bool, optional): Флаг, указывающий, что не нужно загружать видео. По умолчанию `False`.
- `without_captions` (bool, optional): Флаг, указывающий, что не нужно добавлять подписи к медиа. По умолчанию `False`.

**Возвращает**:
- `bool`: `True`, если медиа загружено успешно, иначе `None`.

**Возможные исключения**:
- `Exception`: В случае ошибки при загрузке медиа или обновлении подписей.


### `update_images_captions`

**Описание**: Добавляет описания к загруженным медиафайлам.

**Параметры**:
- `d` (Driver): Экземпляр драйвера.
- `media` (List[SimpleNamespace]): Список объектов `SimpleNamespace`, содержащих данные для обновления.
- `textarea_list` (List[WebElement]): Список областей ввода, куда нужно добавлять подписи.

**Возможные исключения**:
- `Exception`: Возникает, если есть ошибка при обновлении подписей к медиа.


### `publish`

**Описание**: Публикует сообщение после обработки всех этапов.

**Параметры**:
- `d` (Driver): Экземпляр драйвера.
- `attempts` (int, optional): Количество попыток публикации. По умолчанию `5`.

**Возвращает**:
- `bool`: `True`, если сообщение опубликовано успешно, иначе `None`.

**Описание поведение в случае неудачи:**
Функция перехватывает ошибки и пытается закрыть всплывающие окна. Если проблема не устраняется после нескольких попыток, она возвращает `None`.


### `promote_post`

**Описание**: Управляет процессом продвижения поста с заголовком, описанием и медиафайлами.

**Параметры**:
- `d` (Driver): Экземпляр драйвера.
- `category` (SimpleNamespace): Объект, содержащий заголовок и описание поста.
- `products` (List[SimpleNamespace]): Список объектов, содержащих данные о медиа и других деталях поста.
- `no_video` (bool, optional): Флаг, указывающий, что не нужно загружать видео. По умолчанию `False`.

**Возвращает**:
- `bool`: `True`, если пост успешно продвигается, иначе `None`.


### `post_message`

**Описание**: Управляет процессом публикации поста с заголовком, описанием и медиафайлами.

**Параметры**:
- `d` (Driver): Экземпляр драйвера.
- `message` (SimpleNamespace): Объект, содержащий данные поста.
- `no_video` (bool, optional): Флаг, указывающий, что не нужно загружать видео. По умолчанию `False`.
- `images` (Optional[str | list[str]], optional): Пути к изображениям для публикации. По умолчанию `None`.
- `without_captions` (bool, optional): Флаг, указывающий, что не нужно добавлять подписи к медиа. По умолчанию `False`.

**Возвращает**:
- `bool`: `True`, если пост успешно опубликован, иначе `None`.