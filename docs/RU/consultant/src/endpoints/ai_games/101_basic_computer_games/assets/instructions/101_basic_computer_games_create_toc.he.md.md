# Анализ кода модуля 101_basic_computer_games_create_toc.he.md

**Качество кода**
8
- Плюсы
    - Инструкция четко описывает требования к формату, языку, обработке данных и структуре кода.
    - Подробные примеры документации в формате RST.
    - Указаны требования к стилю комментариев и логированию ошибок.
- Минусы
    - Отсутствует код для анализа, так как предоставлен только шаблон инструкции.
    - Инструкция содержит много повторяющегося текста.

**Рекомендации по улучшению**

1. **Структурировать инструкцию:** Разделить инструкцию на более логичные разделы, например, «Общие требования», «Требования к коду», «Формат документации», и «Примеры».
2. **Избегать повторений:** Убрать повторения в описаниях, например, требований к языку или формату кода.
3. **Предоставить примеры:** Добавить примеры кода для конкретных задач, таких как чтение файла с `j_loads`, форматирования ссылок и т.д.
4. **Добавить проверку:** Описать, как будет проверяться корректность сгенерированного `markdown`.

**Оптимизированный код**

```markdown
# ИНСТРУКЦИЯ

## Общие требования:

- **Output Language:** RU (Русский)
- **Формат ответа:** `markdown`
- **Задача:** Создание оглавления для глав книги "More Basic Computer Games".

## Требования к коду:

1. **Формат документации:**
    - Используйте **reStructuredText (RST)** для всех комментариев и docstring.
    - Всегда используйте одинарные кавычки (`'`) в Python коде.

2. **Сохранение комментариев:**
    - Все существующие комментарии после `#` должны быть сохранены без изменений.
    - Блоки кода, которые необходимо изменить, должны быть прокомментированы построчно с использованием символа `#`.

3. **Обработка данных:**
    - Используйте `j_loads` или `j_loads_ns` из `src.utils.jjson` вместо стандартного `json.load` для чтения файлов.
    - Оставляйте любые `...` в коде без изменений как точки остановки.

4. **Анализ структуры:**
    - Проверьте и добавьте отсутствующие импорты в код.
    - Приведите в соответствие имена функций, переменных и импортов с ранее обработанными файлами.

5. **Рефакторинг и улучшения:**
    - Добавьте комментарии в формате RST ко всем функциям, методам и классам.
    - Используйте `from src.logger.logger import logger` для логирования ошибок.
    - Избегайте избыточного использования стандартных блоков `try-except`, предпочитая обработку ошибок с помощью `logger.error`.

## Формат документации:

- Все комментарии к модулям, функциям, методам и переменным должны быть переписаны в формате reStructuredText (RST).
  - Описание модуля в начале файла.
  - Документация для каждой функции, метода и переменной.
  - Соблюдение стандартов оформления docstring в Python (например, для Sphinx).
  - В комментариях после `#` строки должны содержать подробное объяснение следующего за ними блока кода.

**Пример формата документации для модуля:**
```python
"""
Модуль для работы ассистента программиста
=========================================================================================

Этот модуль содержит класс :class:`CodeAssistant`, который используется для работы с различными моделями ИИ,
такими как Google Gemini и OpenAI, для выполнения задач по обработке кода.

Пример использования
--------------------

Пример использования класса `CodeAssistant`:

.. code-block:: python

    assistant = CodeAssistant(role='code_checker', lang='ru', model=['gemini'])
    assistant.process_files()
"""
```

**Пример формата документации для функций:**
```python
def example_function(param1: str, param2: int) -> str:
    """
    Выполняет примерную задачу.

    :param param1: Описание параметра 1.
    :param param2: Описание параметра 2.
    :return: Описание возвращаемого значения.
    """
    ...
```

**Пример формата стиля комментариев в коде:**
```python
@close_pop_up()
async def specification(self, value: Any = None):
    """Fetch and set specification.

    Args:
        value (Any): это значение можно передать в словаре kwargs через ключ {specification = `value`} при определении класса.
        Если `value` был передан, его значение подставляется в поле `ProductFields.specification`.
    """
    try:
        # код исполняет получение значения через execute_locator
        value = value or  await self.driver.execute_locator(self.locator.specification) or ''
    except Exception as ex:
        logger.error('Ошибка получения значения в поле `specification`', ex)
        ...
        return

    # Проверка валидности результата
    if not value:
        logger.debug(f'Невалидный результат {value=}\\nлокатор {self.locator.specification}')
        ...
        return

    # Если значение - список, код преобразовывает его в строку с разделителем `\\n`
    if isinstance(value, list):
        value = '\\n'.join(map(str, value))

    # Код записывает результат в поле `specification` объекта `ProductFields`
    self.fields.specification = value
    return True
```

## Задачи:

- **Входные данные:** Текст книги "More Basic Computer Games".
- **Задача:** Создать оглавление для глав книги.
- **Формат:** Для каждого игры выдать:
  1.  Имя игры.
  2.  Краткое описание игры.
  3.  Ссылка на Github в формате: `https://github.com/hypo69/hypo/blob/master/src/endpoints/ai_games/101_basic_computer_games/he/<имя_игры>/<имя_файла>.py`

## Пример формата результата:
```markdown
1.  Имя игры 1
    Краткое описание игры 1
    [Ссылка на Github](https://github.com/hypo69/hypo/blob/master/src/endpoints/ai_games/101_basic_computer_games/he/GAME1/game1.py)

2.  Имя игры 2
    Краткое описание игры 2
    [Ссылка на Github](https://github.com/hypo69/hypo/blob/master/src/endpoints/ai_games/101_basic_computer_games/he/GAME2/game2.py)
```
```