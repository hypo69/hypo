# Модуль для работы с XML
===========================

Модуль содержит функции для очистки, форматирования и сохранения XML-данных.
Он включает функции для удаления пустых CDATA-секций, лишних пробелов и сохранения XML в файл с отступами для улучшения читаемости.

## Обзор

Модуль `src.utils.xml` предоставляет инструменты для работы с XML-документами, включая очистку от пустых элементов и форматирование для удобства чтения.
Он используется для обработки XML-данных, хранящихся в строках, и сохранения их в файлы.

## Подробнее

Этот модуль предоставляет функции для очистки XML-строк от пустых элементов и лишних пробелов, а также для сохранения XML в файл с корректным форматированием.
Он помогает в автоматизации обработки XML-данных, делая их более удобными для анализа и хранения.

## Функции

### `clean_empty_cdata`

```python
def clean_empty_cdata(xml_string: str) -> str:
    """ Функция очищает пустые секции CDATA и лишние пробелы в XML-строке.

    Args:
        xml_string (str): XML-контент в виде строки.

    Returns:
        str: Очищенный и отформатированный XML-контент.
    """
```

**Назначение**: Очистка XML-строки от пустых элементов и лишних пробелов.

**Параметры**:
- `xml_string` (str): XML-контент в виде строки.

**Возвращает**:
- `str`: Очищенный и отформатированный XML-контент.

**Как работает функция**:

1. Преобразует XML-строку в объект ElementTree.
2. Рекурсивно удаляет пустые элементы из дерева XML.
3. Преобразует очищенное дерево обратно в строку.
4. Удаляет лишние пробелы между тегами.

```
XML-строка --> Преобразование в ElementTree --> Удаление пустых элементов (рекурсивно) -->
Преобразование обратно в XML-строку --> Удаление лишних пробелов --> Очищенная XML-строка
```

**Примеры**:

```python
xml_data = "<root><item>Value</item><item attr=\"test\">Another</item><empty/></root>"
cleaned_xml = clean_empty_cdata(xml_data)
print(cleaned_xml)
# Вывод: <root><item>Value</item><item attr="test">Another</item></root>
```

### `save_xml`

```python
def save_xml(xml_string: str, file_path: str) -> None:
    """ Функция сохраняет очищенные XML-данные из строки в файл с отступами.

    Args:
        xml_string (str): XML-контент в виде строки.
        file_path (str): Путь к выходному файлу.

    Returns:
        None
    """
```

**Назначение**: Сохранение XML-строки в файл с отступами для улучшения читаемости.

**Параметры**:
- `xml_string` (str): XML-контент в виде строки.
- `file_path` (str): Путь к файлу, в который будет сохранен XML.

**Как работает функция**:

1. Очищает XML-строку с помощью `clean_empty_cdata`.
2. Парсит очищенную XML-строку в объект ElementTree.
3. Преобразует дерево XML в строку с отступами с использованием `minidom`.
4. Записывает отформатированную XML-строку в файл.

```
XML-строка --> Очистка XML (clean_empty_cdata) --> Парсинг XML в ElementTree -->
Преобразование в строку с отступами (minidom) --> Запись в файл
```

**Примеры**:

```python
xml_data = "<root><item>Value</item><item attr=\"test\">Another</item></root>"
save_xml(xml_data, "output.xml")
# В файле output.xml будет сохранен отформатированный XML-контент
```
```python
xml_data = "<root><item>Value</item><item attr=\"test\">Another</item><empty/></root>"
save_xml(xml_data, "output.xml")
# В файле output.xml будет сохранен отформатированный XML-контент без пустого элемента <empty/>
```
```python
xml_data = '<root><item>Value</item><item attr="test">Another</item><empty></empty></root>'
save_xml(xml_data, "output.xml")