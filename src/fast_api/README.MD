
# FastAPI Server Manager CLI

Этот проект предоставляет инструмент командной строки (CLI) для управления экземплярами FastAPI сервера. Он использует шаблон Singleton для управления экземплярами сервера, позволяя запускать и останавливать серверы на разных портах через CLI.

## Особенности

- **Singleton Pattern:** Обеспечивает наличие только одного экземпляра FastAPI сервера, управляемого через CLI.
- **Управление серверами:** Запуск и остановка FastAPI серверов на указанных портах.
- **CLI Interface:** Удобный интерфейс командной строки с использованием `typer`.
- **Настраиваемые опции:** Возможность указания порта и хоста для запуска серверов через CLI.
- **Асинхронное управление:** Использует `asyncio` для асинхронного запуска и остановки серверов.

## Требования

- Python 3.7+
- Установленные зависимости:
    - `typer`
    - `uvicorn`
    - `fastapi`
    - `pydantic`

## Установка

1.  Клонируйте репозиторий (если применимо) или скопируйте код в файл `main.py`.
2.  Установите зависимости:

    ```bash
    pip install typer uvicorn fastapi pydantic
    ```

## Использование

Запустите CLI, используя Python:

```bash
python main.py <command> [options]
```

### Команды

-   **`start-server`:** Запускает FastAPI сервер.
    -   `--port`: (Необязательно) Порт для запуска сервера. По умолчанию: 8000.
    -   `--host`: (Необязательно) Адрес хоста для сервера. По умолчанию: 0.0.0.0.

    Пример:

    ```bash
    python main.py start-server --port 8080
    python main.py start-server --port 8081 --host 127.0.0.1
    ```

-   **`stop-server`:** Останавливает FastAPI сервер.
    -   `--port`: (Обязательно) Порт сервера для остановки.

    Пример:

    ```bash
    python main.py stop-server --port 8080
    ```

-   **`stop-all-servers`:** Останавливает все запущенные FastAPI серверы.

     Пример:
    ```bash
     python main.py stop-all-servers
    ```
-   **`--help`:** Выводит справку по командам.

    Пример:

    ```bash
    python main.py --help
    python main.py start-server --help
    ```

## Пример

1.  Запустите сервер на порту 8080:

    ```bash
    python main.py start-server --port 8080
    ```

2.  Запустите сервер на порту 8081 на адресе 127.0.0.1:

     ```bash
     python main.py start-server --port 8081 --host 127.0.0.1
     ```

3.  Остановите сервер на порту 8080:

    ```bash
    python main.py stop-server --port 8080
    ```
4.  Остановите все запущенные серверы:
    ```bash
    python main.py stop-all-servers
    ```

## Архитектура

-   `FastApiServer`: Класс Singleton, представляющий собой FastAPI приложение, и управляющий запуском серверов.
-   `main.py`: Содержит CLI команды, а также тестовые endpoint'ы `/hello` и `/post`.
-   `typer`: Библиотека, используемая для создания интерфейса командной строки.
-   `uvicorn`: ASGI веб-сервер для запуска FastAPI приложения.

## Зависимости

-   `fastapi`: веб-фреймворк для создания API.
-   `typer`: библиотека для создания интерфейсов командной строки.
-   `uvicorn`: ASGI веб-сервер.
-   `pydantic`: библиотека для валидации типов.

## Лицензия
[LICENCE]()
