# Модуль MusicMath

## Содержание

- [Обзор](#обзор)
- [Термины](#термины)
    - [Звук](#звук)
    - [Нота](#нота)
    - [Интервал](#интервал)
    - [Полутон](#полутон)
    - [Тон](#тон)
    - [Октава](#октава)
    - [Гамма](#гамма)
    - [Мажорная гамма](#мажорная-гамма)
    - [Минорная гамма](#минорная-гамма)
- [Калькулятор](#калькулятор)
    - [Функциональность](#функциональность)
- [Функции](#функции)
    - [`calculate_frequency`](#calculate_frequency)
    - [`calculate_interval_ratio`](#calculate_interval_ratio)
    - [`calculate_tempo_duration`](#calculate_tempo_duration)
    - [`calculate_note_duration`](#calculate_note_duration)
    - [`calculate_rhythm_pattern`](#calculate_rhythm_pattern)
    - [`calculate_note_number`](#calculate_note_number)
    - [`generate_scale_frequencies`](#generate_scale_frequencies)
    - [`calculate_tuning_deviation`](#calculate_tuning_deviation)
    - [`get_note_name`](#get_note_name)
    - [`get_note_info_from_freq`](#get_note_info_from_freq)
    - [`tune_instrument`](#tune_instrument)
    - [`note_name_to_number`](#note_name_to_number)
    - [`find_nearest_notes`](#find_nearest_notes)
    - [`print_musical_examples`](#print_musical_examples)
- [Использование](#использование)

## Обзор

Модуль `MusicMath` предоставляет набор функций для исследования и демонстрации математических концепций, лежащих в основе музыки. Он позволяет вычислять частоты нот, интервальные отношения, длительность нот, а также анализировать различные музыкальные параметры.

## Термины

В этом примере будут использоваться термины из музыки.

### Звук

Звук — это колебание воздуха, характеризующееся частотой, измеряемой в герцах (Гц). Чем выше частота, тем выше звук.
Простыми словами: Звук — это то, что мы слышим, когда что-то вибрирует (например, струна гитары или голосовые связки). Чем быстрее вибрация, тем выше звук.

### Нота

Нота — это символ, обозначающий конкретный звук определённой высоты. В музыке используются ноты с названиями: C (до), D (ре), E (ми), F (фа), G (соль), A (ля), B (си).
Простыми словами: Нота — это "имя" звука. Например, нота A4 — это звук с частотой 440 Гц.

### Интервал

Интервал — это расстояние между двумя нотами, выраженное отношением их частот. Например, октава — это интервал с соотношением частот 2:1, квинта — 3:2, кварта — 4:3.
Простыми словами: Интервал — это "промежуток" между двумя нотами. Например, если вы играете ноту C (до) и затем ноту G (соль), интервал между ними называется квинтой.

### Полутон

Полутон — это наименьший интервал в западной музыкальной системе. Например, расстояние между нотами C (до) и C# (до-диез) — это полутон.
Простыми словами: Полутон — это "маленький шаг" между нотами. Например, на гитаре один лад — это полутон.
В восточных культурах используют микротональные системы, где интервалы меньше полутона. Это когда между нотами есть ещё более мелкие шаги,
которые создают уникальное звучание, непривычное для западного уха.

### Тон

Тон — это интервал, равный двум полутонам. Например, расстояние между нотами C (до) и D (ре) — это тон.
Простыми словами: Тон — это "большой шаг" между нотами. Например, на гитаре два лада — это тон.

### Октава

Октава — это интервал между двумя нотами, где частота верхней ноты ровно в два раза больше частоты нижней. Например, нота A4 имеет частоту 440 Гц, а нота A5 (на октаву выше) — 880 Гц.
Простыми словами: Октава — это "расстояние" между двумя нотами с одинаковыми названиями, но разной высотой. Например, если вы поете ноту C (до) низким голосом, а потом ту же ноту C, но высоким голосом, то между ними будет октава.

### Гамма

Гамма — это последовательность нот, выстроенных в восходящем или нисходящем порядке. В западной музыке наиболее распространена диатоническая гамма, состоящая из 7 нот с комбинациями целых тонов и полутонов.
Простыми словами: Гамма — это "лестница" из нот, которая помогает создавать мелодии. Например, мажорная гамма звучит весело и ярко, а минорная — грустно и задумчиво.

### Мажорная гамма

Мажорная гамма строится по интервалам: тон-тон-полутон-тон-тон-тон-полутон. Например, гамма C мажор: C, D, E, F, G, A, B, C.
Простыми словами: Мажорная гамма — это последовательность нот, которая звучит радостно и светло.

### Минорная гамма

Минорная гамма строится по интервалам: тон-полутон-тон-тон-полутон-тон-тон. Например, гамма A минор: A, B, C, D, E, F, G, A.
Простыми словами: Минорная гамма — это последовательность нот, которая звучит грустно и меланхолично.

## Калькулятор

`MusicMath` предоставляет набор функций для исследования и демонстрации математических концепций, лежащих в основе музыки. Он позволяет вычислять частоты нот, интервальные отношения, длительность нот, а также анализировать различные музыкальные параметры.

### Функциональность

Модуль `MusicMath` включает в себя следующие функции:

*   **`calculate_frequency(note_number, concert_a_freq=440.0)`**: Вычисляет частоту ноты в герцах на основе её номера в хроматической гамме, где A4 имеет номер 0.
*   **`calculate_interval_ratio(note1_number, note2_number)`**: Вычисляет отношение частот между двумя нотами и возвращает его в виде простой дроби.
*  **`calculate_tempo_duration(bpm, beat_length, beats)`**: Вычисляет общую продолжительность фрагмента в секундах.
*   **`calculate_note_duration(tempo, note_value)`**: Вычисляет длительность ноты в секундах, исходя из темпа и длительности ноты относительно целой ноты.
*   **`calculate_rhythm_pattern(bar_length, note_values)`**: Вычисляет общую продолжительность ритмического паттерна в секундах, основываясь на длительности такта и значениях нот в паттерне.
*   **`calculate_note_number(frequency, concert_a_freq=440.0)`**: Определяет номер ноты в хроматической гамме по её частоте.
*   **`generate_scale_frequencies(root_note_number, scale_pattern, concert_a_freq=440.0)`**: Генерирует частоты нот заданной гаммы, используя её шаблон и начальную ноту.
*   **`calculate_tuning_deviation(target_frequency, actual_frequency)`**: Вычисляет отклонение фактической частоты от целевой в процентах.
*   **`get_note_name(note_number)`**: Возвращает название ноты (например, "A4", "C#5") по её номеру в хроматической гамме.
*   **`get_note_info_from_freq(freq)`**: Выводит информацию о ноте по её частоте, включая имя ноты и ее номер.
*   **`tune_instrument(target_freq, actual_freq)`**: Выводит информацию о том, насколько инструмент отклоняется от целевой частоты.
*   **`note_name_to_number(note_name)`**: Преобразует название ноты (например, "A4") в её номер относительно A4 (A4 = 0).
*   **`find_nearest_notes(frequency, concert_a_freq=440.0)`**: Находит две ближайшие ноты (сверху и снизу) к заданной частоте.

## Функции

### `calculate_frequency`

**Описание**: Вычисляет частоту ноты, зная её номер в хроматической гамме.

**Параметры**:

-   `note_number` (int): Номер ноты относительно A4 (A4 = 0).
-   `concert_a_freq` (float, optional): Частота ноты A4. По умолчанию: `440.0`.

**Возвращает**:

-   `float`: Частота ноты в герцах.

### `calculate_interval_ratio`

**Описание**: Вычисляет отношение частот между двумя нотами, зная их номера.

**Параметры**:

-   `note1_number` (int): Номер первой ноты.
-   `note2_number` (int): Номер второй ноты.

**Возвращает**:

-   `str`: Отношение частот в виде простой дроби.

### `calculate_tempo_duration`

**Описание**: Вычисляет общую продолжительность в секундах музыкального фрагмента.

**Параметры**:

-   `bpm` (int): Темп в ударах в минуту.
-   `beat_length` (float): Продолжительность одного удара в секундах.
-   `beats` (int): Количество ударов в музыкальном фрагменте.

**Возвращает**:

-   `float`: Общая продолжительность фрагмента в секундах.

### `calculate_note_duration`

**Описание**: Вычисляет длительность ноты в секундах.

**Параметры**:

-   `tempo` (int): Темп в ударах в минуту.
-   `note_value` (float): Длительность ноты относительно целой ноты (1.0 = целая, 0.5 = половинная, 0.25 = четвертная и т.д.).

**Возвращает**:

-   `float`: Длительность ноты в секундах.

### `calculate_rhythm_pattern`

**Описание**: Рассчитывает общую продолжительность ритмического паттерна в секундах.

**Параметры**:

-   `bar_length` (float): Длительность такта в количестве целых нот.
-   `note_values` (list): Список длительностей нот (относительно целой ноты).

**Возвращает**:

-   `float`: Общая длительность ритмического паттерна в секундах.

### `calculate_note_number`

**Описание**: Вычисляет номер ноты в хроматической гамме на основе частоты.

**Параметры**:

-   `frequency` (float): Частота ноты в герцах.
-   `concert_a_freq` (float, optional): Частота ноты A4. По умолчанию: `440.0`.

**Возвращает**:

-   `int`: Номер ноты относительно A4 (A4 = 0).

### `generate_scale_frequencies`

**Описание**: Генерирует частоты нот заданной гаммы.

**Параметры**:

-   `root_note_number` (int): Номер корневой ноты.
-   `scale_pattern` (list): Шаблон гаммы (последовательность полутонов).
-   `concert_a_freq` (float, optional): Частота ноты A4. По умолчанию: `440.0`.

**Возвращает**:

-   `list`: Список частот нот в гамме.

### `calculate_tuning_deviation`

**Описание**: Вычисляет отклонение частоты от целевой в процентах.

**Параметры**:

-   `target_frequency` (float): Целевая частота.
-   `actual_frequency` (float): Фактическая частота.

**Возвращает**:

-   `float`: Процент отклонения.

### `get_note_name`

**Описание**: Возвращает название ноты по её номеру в хроматической гамме.

**Параметры**:

-   `note_number` (int): Номер ноты относительно A4 (A4 = 0).

**Возвращает**:

-   `str`: Название ноты (например, "A4", "C#5", "Bb3").

### `get_note_info_from_freq`

**Описание**: Выводит информацию о ноте по её частоте.

**Параметры**:

-   `freq` (float): Частота ноты в герцах.

**Возвращает**:
    -   `None`: Выводит информацию о ноте в консоль.

### `tune_instrument`

**Описание**: Выводит информацию о том, насколько инструмент отклоняется от целевой частоты.

**Параметры**:

-   `target_freq` (float): Целевая частота.
-   `actual_freq` (float): Фактическая частота.

**Возвращает**:
    -   `None`: Выводит информацию о настройке инструмента в консоль.

### `note_name_to_number`

**Описание**: Преобразует название ноты (например, "A4") в её номер относительно A4 (A4 = 0).

**Параметры**:

-   `note_name` (str): Название ноты (например, "A4", "C#5", "Bb3").

**Возвращает**:

-   `int`: Номер ноты относительно A4 (A4 = 0), или `None`, если ввод некорректен.

### `find_nearest_notes`

**Описание**: Находит две ближайшие ноты (сверху и снизу) к заданной частоте.

**Параметры**:

-   `frequency` (float): Частота ноты в герцах.
-  `concert_a_freq` (float, optional): Частота ноты A4. Defaults to 440.0.

**Возвращает**:

- `tuple`: кортеж (имя нижней ноты, имя верхней ноты).

### `print_musical_examples`

**Описание**: Выводит примеры использования функций.

**Параметры**:

-   `None`

**Возвращает**:

-   `None`: Выводит примеры в консоль.

## Использование

Для использования модуля `MusicMath` скопируйте код в файл `music_math.py` и импортируйте модуль в свой проект:

```python
import music_math

# Пример использования функции calculate_frequency
frequency = music_math.calculate_frequency(3) # частота C5
print(f"Частота ноты C5: {frequency:.2f} Hz")