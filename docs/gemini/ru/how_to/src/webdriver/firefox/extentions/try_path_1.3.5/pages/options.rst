Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код JavaScript управляет отображением настроек расширения. Он получает значения атрибутов, стилей и размеров всплывающего окна из хранилища расширения, отображает их в форме, позволяет пользователю изменить эти значения, и сохраняет изменённые данные в хранилище.  Код также обеспечивает проверку введенных пользователем данных на валидность.  При успешном сохранении уведомляет пользователя об успехе, при ошибке – о неудаче.  При нажатии кнопки "Показать значения по умолчанию" восстанавливает значения атрибутов и стилей до заводских настроек.

Шаги выполнения
-------------------------
1. **Получение данных из хранилища расширения:**
   Код отправляет запрос в хранилище расширения (`browser.storage.sync.set`) для получения текущих значений атрибутов, стилей и размеров всплывающего окна.  Используется `browser.runtime.sendMessage` для получения из хранилища, используя `Promise`.

2. **Отображение данных в форме:**
   Полученные значения атрибутов, стилей и размеров всплывающего окна устанавливаются в соответствующие поля формы (например, `elementAttr.value = res.attributes.element;`).

3. **Проверка валидности входных данных:**
   Функции `isValidAttrName`, `isValidAttrNames`, `isValidStyleLength` проверяют правильность введённых атрибутов и стилей (проверяют корректность формата, например, `px` для размеров).  Если данные невалидны, выводится сообщение об ошибке (`message.textContent = "There is a invalid attribute.";`).

4. **Сохранение изменённых данных в хранилище расширения:**
   Если данные валидны, они сохраняются в хранилище расширения.  Код формирует новый объект, содержащий изменённые значения атрибутов, стилей и размеров.  Запись в хранилище происходит с использованием `browser.storage.sync.set`.

5. **Обработка успешного/неуспешного сохранения:**
   Если сохранение прошло успешно, выводится соответствующее сообщение (`message.textContent = "Success..."`). Если произошла ошибка, выводится сообщение об ошибке (`message.textContent = "Failure. " + err.message;`).

6. **Восстановление значений по умолчанию:**
   Кнопка "Показать значения по умолчанию" вызывает функцию `loadDefaultCss`, которая загружает значения CSS по умолчанию и устанавливает их в соответствующие поля.

Пример использования
-------------------------
.. code-block:: javascript
    // Пример использования в другом коде для изменения значения элемента
    document.getElementById("element-attribute").value = "newValue";
    // ... (Другие действия с формой)