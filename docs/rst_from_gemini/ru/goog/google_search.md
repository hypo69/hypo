```markdown
# Файл: hypotez/src/goog/google_search.py

## Модуль: src.goog

Этот модуль содержит класс `GoogleHtmlParser` для парсинга HTML-страниц результатов поиска Google. Он позволяет извлекать различные типы данных, включая органические результаты, фрагменты с выделенными ответами, карточки знаний и другие скроллируемые секции.

### Класс `GoogleHtmlParser`

Класс `GoogleHtmlParser` предназначен для парсинга HTML-кода, полученного с Google Search. Он обрабатывает как мобильные, так и десктопные версии страниц.

#### Атрибуты:

* `tree (html.Element)`: Дерево HTML-документа, полученное из строки HTML.
* `user_agent (str)`: Тип пользователя (агента), используемый для запроса HTML (по умолчанию 'desktop'). Допустимые значения: 'mobile', 'desktop'.


#### Методы:

* `__init__(self, html_str: str, user_agent: str = 'desktop') -> None`: Инициализирует парсер. Принимает строку HTML и тип пользователя (агента). Создает дерево HTML-документа и сохраняет `user_agent`. Валидирует `user_agent`.
* `_clean(self, content: str) -> str`: Очищает строку от лишних пробелов и символов. Удаляет лишние пробелы и приводит к нормальному виду.
* `_normalize_dict_key(self, content: str) -> str`: Нормализует строку для использования в качестве ключа словаря. Заменяет пробелы на подчеркивания, двоеточия удаляет, переводит в нижний регистр. Важно для создания корректных ключей словаря.
* `_get_estimated_results(self) -> int`: Получает количество найденных результатов. Извлекает информацию о количестве найденных результатов из HTML-кода.
* `_get_organic(self) -> list`: Получает органические результаты поиска. Возвращает список словарей, каждый из которых содержит информацию об одном органическом результате (URL, заголовок, сниппет и т.д.).
* `_get_featured_snippet(self) -> dict | None`: Получает фрагмент с выделенным ответом (featured snippet). Возвращает словарь с данными или `None`, если фрагмент отсутствует.
* `_get_knowledge_card(self) -> dict | None`: Получает карточку знаний. Возвращает словарь с данными карточки или `None`, если карточка отсутствует. Обрабатывает структуру карточки с разными полями, в том числе "more_info".
* `_get_scrolling_sections(self) -> list`: Получает данные из скроллируемых секций. Возвращает список словарей, каждый из которых описывает одну секцию, включая её заголовок и данные.
* `get_data(self) -> dict`: Возвращает словарь со всей собранной информацией. Объединяет результаты из всех функций сбора данных в единый словарь.


#### Замечания:

* Используется библиотека `lxml` для парсинга HTML.
* Код обрабатывает различные структуры данных, встречающиеся на страницах Google Search.
* Использование метода `text_content()` предпочтительнее `text` для извлечения текста из узлов HTML.
* `user_agent` помогает в обработке разных версий Google Search.
* Методы `_clean` и `_normalize_dict_key` важны для подготовки данных к дальнейшему использованию.
* Все методы, начинающиеся с `_`, предназначены для внутреннего использования.


Этот комментарий предоставляет более полное понимание функциональности и структуры кода.
```