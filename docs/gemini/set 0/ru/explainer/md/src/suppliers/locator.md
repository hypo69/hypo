# Field Locators on the `HTML` Page

### Example Locator:

```json
  "close_banner": {
    "attribute": null, 
    "by": "XPATH",
    "selector": "//button[@id = 'closeXButton']",
    "if_list": "first",
    "use_mouse": false,
    "mandatory": false,
    "event": "click()",
    "locator_description": "Closes the pop-up window. If it doesn’t appear, it’s not critical (`mandatory`:`false`)."
  },
  "additional_images_urls": {
    "attribute": "src",
    "by": "XPATH",
    "selector": "//ol[contains(@class, 'flex-control-thumbs')]//img",
    "if_list": "all",
    "use_mouse": false,
    "mandatory": false,
    "event": null,
    "locator_description": "Retrieves a list of `URL`s for additional images."
  },
  "id_supplier": {
    "attribute": "innerText",
    "by": "XPATH",
    "selector": "//span[@class = 'ltr sku-copy']",
    "if_list": "first",
    "use_mouse": false,
    "mandatory": true,
    "event": null,
    "locator_description": "SKU for Morlevi."
  },
  "default_image_url": {
    "attribute": null,
    "by": "XPATH",
    "selector": "//a[@id = 'mainpic']//img",
    "if_list": "first",
    "use_mouse": false,
    "event": "screenshot()",
    "mandatory": true,
    "locator_description": "Attention! In Morlevi, the image is captured via a screenshot and returned as a PNG (`bytes`)."
  }
```

### <algorithm>

**Алгоритм работы локейторов:**

1. **Получение данных:** Локейтор представляет собой словарь, содержащий информацию о распознавании элементов на странице.
2. **Локализация:** Используя `by` (например, `XPATH`) и `selector` (например, `//button[@id = 'closeXButton']`), веб-драйвер локализует элемент на странице.
3. **Обработка списка (if_list):** Если найдено несколько элементов, то `if_list` определяет, какой из них нужно использовать (`first`, `all`, `last` и т.д.).
4. **Выполнение события (event):** Если `event` задан (например, `click()`), веб-драйвер выполняет указанное действие на найденном элементе.
5. **Извлечение атрибута (attribute):** Если `attribute` задан (например, `innerText`), веб-драйвер извлекает значение указанного атрибута у найденного элемента. Если `attribute` равен `null`, то возвращается сам элемент.
6. **Обработка ошибок (mandatory):** Если `mandatory` равен `true` и элемент не найден, то генерируется ошибка.
7. **Возврат результата:**  Веб-драйвер возвращает извлеченное значение или сам элемент.

**Примеры:**

* **`close_banner`:** Локализуется кнопка `closeXButton`, выполняется клик и затем результат не возвращается.
* **`additional_images_urls`:** Локализуются все `<img>` элементы внутри `<ol class="flex-control-thumbs">`, возвращаются значения `src`.
* **`id_supplier`:** Локализуется `span` с классом `ltr sku-copy`, возвращается `innerText`.

### <mermaid>

```mermaid
graph LR
    A[Локейтор] --> B{Получение данных};
    B --> C[Локализация (XPATH, CSS)];
    C --> D{Обработка списка (if_list)};
    D -- first --> E[Выполнение события (event)];
    D -- all --> F[Извлечение всех атрибутов];
    E --> G[Извлечение атрибута];
    F --> G;
    G --> H[Возврат результата];
    subgraph Обработка ошибок
        D -- mandatory=true --> I[Проверка на наличие элемента];
        I -- найден --> G;
        I -- не найден --> J[Ошибка];
    end
```

### <explanation>

**Импорты:**

Нет явных импортов, код описывает формат данных для локейторов.  Он скорее всего используется в другом коде, где происходит обращение к этим локейторам (вероятнее всего, это взаимодействие с веб-драйвером).


**Классы:**

Нет классов в данном фрагменте.  Описание локейторов используется, по всей видимости, в классе, который содержит логику обработки локейторов (например, для поиска элементов на веб-странице).


**Функции:**

Нет функций. Данные представлены в виде набора данных (словари).


**Переменные:**

Переменные представляют собой значения словарей с различными строковыми значениями (например, `attribute`, `by`, `selector`).


**Возможные ошибки/улучшения:**

* **Отсутствие связи с кодом:**  Фрагмент кода не содержит детальной информации о том, как он используется в коде.  Необходимо увидеть его контекст, чтобы оценить использование локейторов.  Проверить, правильно ли формируются `XPATH` выражения для локализации элементов.
* **Непонятно, что представляют данные:**  Необходимо понимать, что представляют значения в словаре (какой элемент веб-страницы, например).


**Цепочка взаимосвязей:**

Этот фрагмент, скорее всего, используется в компонентах проекта, ответственных за поиск элементов на веб-странице.  Он находится в папке `hypotez/src/suppliers/`, что может указывать на связь с модулем, отвечающим за работу с поставщиками данных.  Вероятнее всего, этот файл используется в модуле `locator` в `product` пакете, для поиска необходимых данных о продуктах на веб-сайте.

**Дополнительное замечание:**

Этот файл описывает формат JSON для локейторов веб-элементов.  Это позволит веб-драйверу определить, как найти и взаимодействовать с соответствующими элементами страницы.  При необходимости, для корректной работы нужно обеспечить соответствие между значениями `XPATH`, `by` и структурой страницы.