# Модуль создания Flask приложения

## Обзор

Модуль содержит функцию `create_app`, которая создает и конфигурирует Flask приложение. Он определяет расположение шаблонов в зависимости от того, запущен ли код в замороженном состоянии (например, как исполняемый файл) или в обычном режиме разработки.

## Подробней

Этот модуль необходим для инициализации Flask приложения, которое используется для веб-интерфейса `gpt4free`. Он обеспечивает гибкость в определении местоположения шаблонов, что позволяет приложению работать как в режиме разработки, так и в виде исполняемого файла.

## Функции

### `create_app`

```python
def create_app() -> Flask:
    """ Функция создает и конфигурирует Flask приложение.

    Args:
        None

    Returns:
        Flask: Сконфигурированное Flask приложение.

    Raises:
        None

    Example:
        >>> app = create_app()
    """
```

**Назначение**: Создание и конфигурация Flask приложения.

**Параметры**:
- Отсутствуют.

**Возвращает**:
- `Flask`: Сконфигурированное Flask приложение.

**Вызывает исключения**:
- Отсутствуют.

**Как работает функция**:

1. **Определение режима работы**: Функция проверяет, запущен ли код в "замороженном" состоянии (например, как исполняемый файл, созданный с помощью PyInstaller).
2. **Определение пути к шаблонам**:
   - Если код запущен в "замороженном" состоянии, путь к шаблонам устанавливается как `os.path.join(sys._MEIPASS, "client")`. `sys._MEIPASS` содержит путь к временной папке, в которой распакованы файлы исполняемого файла.
   - Если код запущен в обычном режиме разработки, путь к шаблонам устанавливается как `"../client"`.
3. **Создание Flask приложения**: Создается экземпляр Flask приложения с указанием имени приложения, пути к шаблонам и пути к статическим файлам (css, js, images).
4. **Включение автоматической перезагрузки шаблонов**: Конфигурация `app.config["TEMPLATES_AUTO_RELOAD"] = True` включает автоматическую перезагрузку шаблонов в режиме отладки.

**ASCII Flowchart**:

```
Определение режима работы (заморожен или нет)
↓
Да → Определение пути к шаблонам (sys._MEIPASS/client)
Нет → Определение пути к шаблонам (../client)
↓
Создание Flask приложения с указанием путей
↓
Включение автоматической перезагрузки шаблонов
↓
Возврат сконфигурированного Flask приложения
```

**Примеры**:

```python
from flask import Flask
app = create_app()
print(type(app)) # <class 'flask.app.Flask'>
```
```python
from flask import Flask
app = create_app()

@app.route('/')
def index():
    return "Hello, Flask!"

if __name__ == '__main__':
    app.run(debug=True)