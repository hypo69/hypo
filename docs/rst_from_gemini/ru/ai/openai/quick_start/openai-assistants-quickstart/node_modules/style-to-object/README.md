## style-to-object

[![NPM](https://nodei.co/npm/style-to-object.png)](https://nodei.co/npm/style-to-object/)

[![NPM version](https://badgen.net/npm/v/style-to-object)](https://www.npmjs.com/package/style-to-object)
[![Bundlephobia minified + gzip](https://badgen.net/bundlephobia/minzip/style-to-object)](https://bundlephobia.com/package/style-to-object)
[![build](https://github.com/remarkablemark/style-to-object/actions/workflows/build.yml/badge.svg)](https://github.com/remarkablemark/style-to-object/actions/workflows/build.yml)
[![codecov](https://codecov.io/gh/remarkablemark/style-to-object/branch/master/graph/badge.svg?token=XWxph9dpa4)](https://codecov.io/gh/remarkablemark/style-to-object)
[![NPM downloads](https://badgen.net/npm/dm/style-to-object)](https://www.npmjs.com/package/style-to-object)

Парсит строку CSS inline-стилей в JavaScript объект:

```javascript
import parse from 'style-to-object';

parse('color: #C0FFEE; background: #BADA55;');
```

Результат:

```javascript
{ color: '#C0FFEE', background: '#BADA55' }
```

[JSFiddle](https://jsfiddle.net/remarkablemark/ykz2meot/) | [Replit](https://replit.com/@remarkablemark/style-to-object) | [Примеры](https://github.com/remarkablemark/style-to-object/tree/master/examples)

## Установка

[NPM](https://www.npmjs.com/package/style-to-object):

```bash
npm install style-to-object --save
```

[Yarn](https://yarn.fyi/style-to-object):

```bash
yarn add style-to-object
```

[CDN](https://unpkg.com/style-to-object/):

```html
<script src="https://unpkg.com/style-to-object@latest/dist/style-to-object.min.js"></script>
<script>
  window.StyleToObject(/* строка */);
</script>
```

## Использование

Импортируйте с помощью ES Modules:

```javascript
import parse from 'style-to-object';
```

Используйте с CommonJS:

```javascript
const parse = require('style-to-object').default;
```

Парсинг одного объявления:

```javascript
parse('line-height: 42');
```

Результат:

```javascript
{ 'line-height': '42' }
```

Парсинг нескольких объявлений:

```javascript
parse(`
  border-color: #ACE;
  z-index: 1337;
`);
```

Результат:

```javascript
{ 'border-color': '#ACE', 'z-index': '1337' }
```

Парсинг неизвестных объявлений:

```javascript
parse('answer: 42;');
```

Результат:

```javascript
{ 'answer': '42' }
```

Неверные объявления/аргументы:

```javascript
parse(`
  top: ;
  right: 1em;
`); // { right: '1em' }

parse();        // null
parse(null);    // null
parse(1);       // null
parse(true);    // null
parse('top:');  // null
parse(':12px'); // null
parse(':');     // null
parse(';');     // null

parse('top'); // выбросит ошибку
parse('/*');  // выбросит ошибку
```

### Итератор

Если вторым аргументом является функция, парсер вернёт `null`:

```javascript
parse('color: #f00', () => {}); // null
```

Но функция будет итерироваться по каждому объявлению:

```javascript
parse('color: #f00', (name, value, declaration) => {
  console.log(name);        // 'color'
  console.log(value);       // '#f00'
  console.log(declaration); // { type: 'declaration', property: 'color', value: '#f00' }
});
```

Это позволяет легко настроить вывод:

```javascript
const style = `
  color: red;
  background: blue;
`;
const output = [];

function iterator(name, value) {
  output.push([name, value]);
}

parse(style, iterator);
console.log(output); // [['color', 'red'], ['background', 'blue']]
```

## Миграция

### v1

Переход на TypeScript. Итератор исключает `Comment`. CommonJS требует ключа `.default`:

```javascript
const parse = require('style-to-object').default;
```

## Выпуск

Автоматизированные выпуск и публикация с помощью [Release Please](https://github.com/googleapis/release-please).

## Благодарности

- [inline-style-parser](https://github.com/remarkablemark/inline-style-parser)
- [Авторы](https://github.com/remarkablemark/style-to-object/graphs/contributors)

## Лицензия

[MIT](https://github.com/remarkablemark/style-to-object/blob/master/LICENSE)
