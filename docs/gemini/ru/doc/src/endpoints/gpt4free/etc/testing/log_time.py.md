# Модуль для логирования времени выполнения

## Обзор

Модуль содержит асинхронные и синхронные функции для измерения времени выполнения других функций. Он предоставляет декораторы `log_time_async`, `log_time_yield` и `log_time`, которые могут быть использованы для логирования времени выполнения как асинхронных, так и синхронных методов.

## Подробнее

Этот модуль предоставляет удобные инструменты для профилирования времени выполнения различных частей кода. Функции логирования принимают метод (функцию) в качестве аргумента и измеряют время его выполнения. Результат выполнения метода возвращается вместе с информацией о времени выполнения. Модуль полезен для выявления узких мест в производительности и оптимизации кода.

## Функции

### `log_time_async`

```python
async def log_time_async(method: callable, **kwargs):
    """Измеряет время выполнения асинхронного метода.

    Args:
        method (callable): Асинхронный метод, время выполнения которого необходимо измерить.
        **kwargs: Произвольные ключевые аргументы, передаваемые в метод.

    Returns:
        str: Результат выполнения метода, объединенный со временем выполнения в секундах. Если результат пустой, возвращает только время выполнения.

    Как работает функция:
    1.  Записывает время начала выполнения метода.
    2.  Выполняет асинхронный метод с переданными аргументами.
    3.  Вычисляет время выполнения метода.
    4.  Форматирует время выполнения в строку с указанием секунд.
    5.  Если результат выполнения метода не пустой, возвращает строку, объединяющую результат и время выполнения. В противном случае возвращает только время выполнения.
    Внутри функции происходят следующие действия и преобразования:
    A.  `start_time`: Запись времени начала выполнения.
    |
    B.  `method_execution`: Выполнение асинхронного метода.
    |
    C.  `execution_time`: Вычисление времени выполнения.
    |
    D.  `format_time`: Форматирование времени выполнения в строку.
    |
    E.  `return_result`: Возврат результата выполнения, объединенного со временем выполнения, или только времени выполнения.
    
    Примеры:
    ```python
    async def my_async_function():
        await asyncio.sleep(1)
        return "Async task completed"

    async def main():
        result = await log_time_async(my_async_function)
        print(result)  # Вывод: Async task completed 1.01 secs (время может незначительно отличаться)

    if __name__ == "__main__":
        import asyncio
        asyncio.run(main())
    ```
    """
```

### `log_time_yield`

```python
def log_time_yield(method: callable, **kwargs):
    """Измеряет время выполнения метода, использующего `yield from`.

    Args:
        method (callable): Метод, использующий `yield from`, время выполнения которого необходимо измерить.
        **kwargs: Произвольные ключевые аргументы, передаваемые в метод.

    Yields:
        str: Значения, генерируемые методом, а также время выполнения в секундах.

    Как работает функция:
    1.  Записывает время начала выполнения метода.
    2.  Выполняет метод, используя `yield from`.
    3.  Вычисляет время выполнения метода.
    4.  Генерирует строку с указанием времени выполнения в секундах.

    Внутри функции происходят следующие действия и преобразования:
    A.  `start_time`: Запись времени начала выполнения.
    |
    B.  `method_execution`: Выполнение метода с использованием `yield from`.
    |
    C.  `execution_time`: Вычисление времени выполнения.
    |
    D.  `format_time`: Форматирование времени выполнения в строку.
    |
    E.  `yield_result`: Генерация строки с временем выполнения.

    Примеры:
    ```python
    def my_generator_function():
        yield "First value"
        yield "Second value"

    def logged_generator():
        yield from log_time_yield(my_generator_function)

    for value in logged_generator():
        print(value)
    # Вывод:
    # First value
    # Second value
    #  0.0 secs (время может незначительно отличаться)
    ```
    """
```

### `log_time`

```python
def log_time(method: callable, **kwargs):
    """Измеряет время выполнения синхронного метода.

    Args:
        method (callable): Синхронный метод, время выполнения которого необходимо измерить.
        **kwargs: Произвольные ключевые аргументы, передаваемые в метод.

    Returns:
        str: Результат выполнения метода, объединенный со временем выполнения в секундах. Если результат пустой, возвращает только время выполнения.

    Как работает функция:
    1.  Записывает время начала выполнения метода.
    2.  Выполняет синхронный метод с переданными аргументами.
    3.  Вычисляет время выполнения метода.
    4.  Форматирует время выполнения в строку с указанием секунд.
    5.  Если результат выполнения метода не пустой, возвращает строку, объединяющую результат и время выполнения. В противном случае возвращает только время выполнения.

    Внутри функции происходят следующие действия и преобразования:
    A.  `start_time`: Запись времени начала выполнения.
    |
    B.  `method_execution`: Выполнение синхронного метода.
    |
    C.  `execution_time`: Вычисление времени выполнения.
    |
    D.  `format_time`: Форматирование времени выполнения в строку.
    |
    E.  `return_result`: Возврат результата выполнения, объединенного со временем выполнения, или только времени выполнения.

    Примеры:
    ```python
    def my_function():
        time.sleep(1)
        return "Task completed"

    result = log_time(my_function)
    print(result)  # Вывод: Task completed 1.01 secs (время может незначительно отличаться)
    ```
    """