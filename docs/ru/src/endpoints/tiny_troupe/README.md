# TinyTroupe: LLM-powered multiagent persona simulation

## Обзор

TinyTroupe - это экспериментальная Python-библиотека, предназначенная для симуляции людей с определенными личностями, интересами и целями. Она позволяет создавать искусственных агентов (`TinyPerson`), которые могут взаимодействовать друг с другом и с пользователем в смоделированной среде (`TinyWorld`). Основное внимание уделяется пониманию человеческого поведения и получению бизнес-инсайтов, а не прямой поддержке пользователей (как это делают AI-ассистенты).

## Подробнее

TinyTroupe использует возможности больших языковых моделей (LLM), таких как GPT-4, для генерации реалистичного поведения агентов. Это позволяет исследовать широкий спектр убедительных взаимодействий и потребительских типов с настраиваемыми персонами в заданных условиях.

### Примеры использования:

- **Реклама:** Оценка цифровой рекламы (например, Bing Ads) с помощью симулированной аудитории перед затратами на рекламу.
- **Тестирование программного обеспечения:** Предоставление тестовых входных данных для систем (например, поисковых систем, чат-ботов) и оценка результатов.
- **Обучение и разведочные данные:** Генерация реалистичных синтетических данных для обучения моделей или анализа возможностей.
- **Управление продуктами и проектами:** Получение обратной связи по предложениям проектов или продуктов от лица определенных персон (например, врачей, юристов).
- **Генерация идей:** Симуляция фокус-групп и получение обратной связи по продукту.

## Содержание

- [Последние новости](#latest-news)
- [Примеры](#examples)
- [Необходимые условия](#pre-requisites)
- [Установка](#installation)
- [Принципы](#principles)
- [Структура проекта](#project-structure)
- [Использование библиотеки](#using-the-library)
- [Участие](#contributing)
- [Благодарности](#acknowledgements)
- [Цитирование TinyTroupe](#how-to-cite-tinytroupe)
- [Правовая оговорка](#legal-disclaimer)
- [Товарные знаки](#trademarks)

## Последние новости

**[2025-01-29] Выпуск 0.4.0 с различными улучшениями:**

- Углубленные спецификации персон, включающие черты характера, предпочтения, убеждения и т.д.
- Возможность определения `TinyPerson` через JSON-файлы и загрузки с помощью `TinyPerson.load_specification()`.
- Введение концепции *фрагментов* для повторного использования элементов персоны между различными агентами.
- Введение логических `Proposition` на основе LLM для мониторинга поведения агентов.
- Введение `Intervention` для указания изменений в симуляции на основе событий.
- Подмодули теперь находятся в собственных папках для лучшей организации и роста.

## Примеры

### Пример 1: Интервью с клиентом

Симуляция интервью между бизнес-консультантом и банкиром для выявления потребностей клиента и разработки проектной идеи.

### Пример 2: Оценка рекламы для ТВ

Оценка различных вариантов онлайн-рекламы для выбора наилучшего. Анализ предпочтений агентов и автоматизированное вычисление общей предпочтительности.

### Пример 3: Генерация идей для продукта

Симуляция фокус-группы для генерации новых AI-функций для Microsoft Word. Извлечение результатов в машиночитаемом формате для дальнейшего использования.

## Необходимые условия

- Python 3.10 или выше.
- Доступ к Azure OpenAI Service или Open AI GPT-4 API.
- Настройка переменных окружения `AZURE_OPENAI_KEY`, `AZURE_OPENAI_ENDPOINT` или `OPENAI_API_KEY`.
- Наличие файла `config.ini` с пользовательскими параметрами API, модели и логирования.
- Использование фильтров контента для обеспечения безопасности и предотвращения генерации вредоносного контента.

## Установка

1. Установите Conda (если еще не установлена).
2. Создайте новое окружение Python: `conda create -n tinytroupe python=3.10`.
3. Активируйте окружение: `conda activate tinytroupe`.
4. Установите API keys.
5. Установите библиотеку из репозитория: `pip install git+https://github.com/microsoft/TinyTroupe.git@main`.

### Запуск примеров после установки

1. Клонируйте репозиторий: `git clone https://github.com/microsoft/tinytroupe`.
2. Перейдите в папку: `cd tinytroupe`.
3. Запустите примеры из папки `examples/`.

### Локальная разработка

1. Клонируйте репозиторий: `git clone https://github.com/microsoft/tinytroupe`.
2. Перейдите в папку: `cd tinytroupe`.
3. Установите библиотеку в режиме редактирования: `pip install -e .`.

## Принципы

1. **Программный**: Агенты и среды определяются программно (на Python и JSON), что обеспечивает гибкость использования.
2. **Аналитический**: Ориентирован на улучшение понимания людей, пользователей и общества.
3. **На основе персон**: Агенты являются архетипическими представлениями людей.
4. **Мультиагентный**: Поддерживает взаимодействие между агентами в заданных условиях.
5. **Утилиты**: Предоставляет механизмы для спецификаций, симуляций, извлечений, отчетов, валидаций и т.д.
6. **Ориентирован на эксперименты**: Симуляции определяются, запускаются, анализируются и уточняются итеративно.

### Ассистенты vs. Симуляторы

TinyTroupe предназначен для симуляции и понимания людей, а не для оказания помощи.

## Структура проекта

- `/tinytroupe`: Python-библиотека.
- `/tests`: Unit-тесты.
- `/examples`: Примеры использования.
- `/data`: Данные, используемые примерами или библиотекой.
- `/docs`: Документация.

## Использование библиотеки

TinyTroupe предоставляет две ключевые абстракции:

- `TinyPerson`: Агенты с личностью, которые получают стимулы и действуют на них.
- `TinyWorld`: Среда, в которой существуют и взаимодействуют агенты.

### TinyPerson

`TinyPerson` - это симулированный человек с определенными чертами характера, интересами и целями.

#### Фрагменты

`TinyPerson` можно дополнить с помощью **фрагментов** - подспецификаций, которые можно добавлять к основной спецификации.

#### TinyPersonFactory

`TinyPersonFactory` - это класс, который позволяет генерировать спецификации новых агентов с помощью LLM.

### TinyWorld

`TinyWorld` - это базовый класс для сред.

### Утилиты

TinyTroupe предоставляет ряд утилит для создания симуляций и извлечения ценности из них:

- `TinyPersonFactory`: Генерация новых `TinyPerson` с помощью LLM.
- `TinyTool`: Симулированные инструменты, которые могут использоваться `TinyPerson`.
- `TinyStory`: Создание и управление историей, рассказываемой через симуляции.
- `TinyPersonValidator`: Валидация поведения `TinyPerson`.
- `ResultsExtractor` и `ResultsReducer`: Извлечение и уменьшение результатов взаимодействия между агентами.

### Кэширование

TinyTroupe предоставляет механизмы кэширования для снижения затрат на вызовы LLM API.

#### Кэширование состояния симуляции

Модуль `tinytroupe.control` предоставляет методы для управления состоянием симуляции:

- `control.begin("<CACHE_FILE_NAME>.cache.json")`: Начинает запись изменений состояния симуляции.
- `control.checkpoint()`: Сохраняет состояние симуляции.
- `control.end()`: Завершает запись состояния симуляции.

#### Кэширование LLM API calls

Кэширование LLM API calls можно включить в файле `config.ini` или с помощью `openai_utils.force_api_cache()`.

### Config.ini

Файл `config.ini` содержит параметры для настройки библиотеки, такие как параметры модели и уровень логирования.

## Участие

Проект приветствует вклад и предложения.

## Благодарности

TinyTroupe началась как внутренний хакатон-проект Microsoft.

## Цитирование TinyTroupe

В настоящее время разрабатывается вводная статья, которая станет официальной академической ссылкой на TinyTroupe.

## Правовая оговорка

TinyTroupe предназначена только для исследований и моделирования.

**ЗАПРЕЩЕННОЕ ИСПОЛЬЗОВАНИЕ:**

TinyTroupe не предназначена для моделирования деликатных (например, насильственных или сексуальных) ситуаций. Выходные данные не должны использоваться для преднамеренного обмана, введения в заблуждение или нанесения вреда людям.

## Товарные знаки

Проект может содержать товарные знаки или логотипы проектов, продуктов или услуг.