# Модуль `hypotez/src/utils/convertors/html.py`

## Обзор

Этот модуль предоставляет функции для конвертации HTML-кода в различные форматы, включая escape-последовательности, словари и объекты `SimpleNamespace`. Также реализована функция для конвертации HTML в PDF.

## Классы

### `HTMLToDictParser`

**Описание**: Класс, унаследованный от `HTMLParser`, предназначен для парсинга HTML-строки и преобразования её в словарь, где теги являются ключами, а содержимое - значениями.

**Методы**:
- `__init__`: Инициализирует объект парсера.
- `handle_starttag`: Обрабатывает открывающие теги, устанавливая текущий тег.
- `handle_endtag`: Обрабатывает закрывающие теги, сбрасывая текущий тег.
- `handle_data`: Обрабатывает текстовые данные, добавляя их в словарь, если текущий тег задан.


## Функции

### `html2escape`

**Описание**: Преобразует HTML-код в escape-последовательности.

**Параметры**:
- `input_str` (str): Входная HTML-строка.

**Возвращает**:
- str: Преобразованная строка в escape-последовательности.

**Примеры**:
```python
html = "<p>Hello, world!</p>"
result = html2escape(html)
print(result)  # Вывод: &lt;p&gt;Hello, world!&lt;/p&gt;
```

### `escape2html`

**Описание**: Преобразует escape-последовательности обратно в HTML-код.

**Параметры**:
- `input_str` (str): Входная строка со escape-последовательностями.

**Возвращает**:
- str: Преобразованная строка в HTML-код.

**Примеры**:
```python
escaped = "&lt;p&gt;Hello, world!&lt;/p&gt;"
result = escape2html(escaped)
print(result)  # Вывод: <p>Hello, world!</p>
```


### `html2dict`

**Описание**: Преобразует HTML-код в словарь, где теги являются ключами, а содержимое - значениями.

**Параметры**:
- `html_str` (str): Входная HTML-строка.

**Возвращает**:
- dict: Словарь, содержащий теги и их содержимое.

**Примеры**:
```python
html = "<p>Hello</p><a href='link'>World</a>"
result = html2dict(html)
print(result)  # Вывод: {'p': 'Hello', 'a': 'World'}
```

### `html2ns`

**Описание**: Преобразует HTML-код в объект `SimpleNamespace`, где теги являются атрибутами, а содержимое - значениями.

**Параметры**:
- `html_str` (str): Входная HTML-строка.

**Возвращает**:
- `SimpleNamespace`: Объект `SimpleNamespace` с тегами как атрибутами и их содержимым.

**Примеры**:
```python
html = "<p>Hello</p><a href='link'>World</a>"
result = html2ns(html)
print(result.p)  # Вывод: Hello
print(result.a)  # Вывод: World
```

### `html2pdf`

**Описание**: Преобразует HTML-код в PDF-файл с использованием WeasyPrint.

**Параметры**:
- `html_str` (str): Входная HTML-строка.
- `pdf_file` (str | Path): Путь к выходному PDF-файлу.

**Возвращает**:
- bool | None: `True` при успешной конвертации, `None` при ошибке.

**Обрабатываемые исключения**:
- `Exception`: При ошибке генерации PDF-файла.


**Примечания**:  Функция `html2pdf` обрабатывает исключения и печатает сообщение об ошибке.  
```