# Анализ кода модуля `fipowr.py`

**Качество кода**

-  **Соответствие требованиям к формату кода (1-10):** 5/10
    - **Преимущества:**
        - Код функционален и выполняет поставленную задачу.
        - Использует понятные имена переменных и функций.
        -  Разделение кода на логические блоки.
    - **Недостатки:**
        -  Отсутствует reStructuredText (RST) для комментариев и docstring.
        -  Нет импорта `logger` для обработки ошибок.
        -  Используется стандартный `input` и `print` вместо механизмов логирования.
        -  Нет обработки ошибок, кроме ValueError.
        -  Не используются `j_loads` или `j_loads_ns` для загрузки данных (хотя нет операций с файлами).
        -  Нет docstring для функций.

**Рекомендации по улучшению**

1. **Добавить reStructuredText (RST) для комментариев и docstring:** Необходимо переписать все комментарии и добавить docstring для функций, используя формат RST для соблюдения требований.
2. **Импортировать и использовать `logger`:** Заменить стандартные `print` на `logger.info`, `logger.error` для логирования информации и ошибок.
3. **Обработка ошибок:** Добавить обработку возможных ошибок внутри `try-except` с помощью `logger.error` и избегать чрезмерного использования `try-except` блоков.
4. **Переименовать переменные:** Использовать имена переменных с нижним регистром и подчеркиванием (например, `number_of_guesses`).
5. **Добавить проверки на валидность вводимых данных:** Можно добавить проверку на вводимое число на соответствие диапазону.
6.  **Добавить описание модуля:** Описать модуль в начале файла.

**Улучшенный код**

```python
"""
Модуль для игры в угадывание числа, где загаданное число возводится в степень числа Фибоначчи.
=========================================================================================

Модуль включает функцию :func:`fibonacci` для расчета чисел Фибоначчи и логику игры в цикле.

Пример использования
--------------------

.. code-block:: python

   import random
   
   # Создание экземпляра игры
   # Запуск игры, где пользователь пытается угадать число
"""
import random  # Импорт модуля random для генерации случайных чисел
from src.logger.logger import logger # Импорт логгера для записи сообщений #

# Функция для вычисления числа Фибоначчи
def fibonacci(n: int) -> int:
    """
    Вычисляет n-е число Фибоначчи.

    :param n: Номер числа Фибоначчи для расчета.
    :type n: int
    :return: Значение n-го числа Фибоначчи.
    :rtype: int
    
    :raises TypeError: Если n не является целым числом.
    :raises ValueError: Если n меньше 0.
    
    Примеры:
    
    >>> fibonacci(0)
    0
    >>> fibonacci(1)
    1
    >>> fibonacci(5)
    5
    >>> fibonacci(10)
    55
    """
    if not isinstance(n, int): # Проверка, что n - целое число
        logger.error(f"Ошибка типа: n должно быть целым числом, получено {type(n)}") # Логирование ошибки типа
        raise TypeError("n должно быть целым числом") # Вызов исключения TypeError
    if n < 0: # Проверка, что n не меньше 0
        logger.error(f"Ошибка значения: n должно быть неотрицательным числом, получено {n}") # Логирование ошибки значения
        raise ValueError("n должно быть неотрицательным числом") # Вызов исключения ValueError
    if n <= 0: # Проверка, если n меньше или равно 0
        return 0 # Возврат 0
    elif n == 1: # Проверка, если n равно 1
        return 1 # Возврат 1
    else: # Иначе
        a, b = 0, 1 # Инициализация переменных a и b
        for _ in range(2, n + 1): # Цикл для расчета чисел Фибоначчи
            a, b = b, a + b # Обновление значений a и b
        return b # Возврат b

# Инициализация счетчика попыток
number_of_guesses = 0 # Инициализируем счетчик попыток
# Генерируем случайное число от 1 до 100
target_number = random.randint(1, 100) # Генерируем случайное число от 1 до 100

# Основной игровой цикл
while True: # Бесконечный цикл
    # Увеличиваем количество попыток
    number_of_guesses += 1 # Увеличиваем счетчик попыток на 1
    # Вычисляем число Фибоначчи для текущей попытки
    fibonacci_number = fibonacci(number_of_guesses) # Вычисляем число Фибоначчи для текущей попытки
    # Возводим загаданное число в степень числа Фибоначчи
    powered_number = target_number ** fibonacci_number # Возводим загаданное число в степень числа Фибоначчи

    # Запрашиваем ввод числа у пользователя
    try:
        user_guess = int(input(f"Попытка {number_of_guesses}: Введите число: ")) # Запрашиваем ввод числа у пользователя
    except ValueError as ex: # Обрабатываем ошибку, если ввод не является целым числом
        logger.error(f"Ошибка ввода: введено некорректное значение. {ex}") # Логируем ошибку
        print("Пожалуйста, введите целое число.") # Выводим сообщение об ошибке
        continue # Переходим к следующей итерации цикла

    # Проверяем, угадано ли число
    if user_guess == powered_number: # Проверяем, угадано ли число
        logger.info(f"Поздравляю! Вы угадали число за {number_of_guesses} попыток!") # Логируем сообщение об успехе
        print(f"ПОЗДРАВЛЯЮ! Вы угадали число за {number_of_guesses} попыток!") # Выводим сообщение об успехе
        break  # Завершаем цикл, если число угадано
    else:
         logger.info("Попробуйте ещё раз!") # Логируем сообщение о неудаче
         print("Попробуйте ещё раз!") # Сообщаем, что нужно попробовать еще раз
```