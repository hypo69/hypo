Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код представляет собой класс `GoogleHtmlParser`, предназначенный для парсинга HTML страниц результатов поиска Google. Он обрабатывает как мобильные, так и десктопные версии HTML и извлекает различные типы данных, такие как органические результаты, карточки знаний, featured snippet и данные из скроллируемых виджетов.  Класс предоставляет методы для парсинга, очистки и нормализации данных.

Шаги выполнения
-------------------------
1. **Инициализация парсера:** Создается экземпляр класса `GoogleHtmlParser`, передавая ему строку HTML Google Search и опционально, тип User Agent (может быть 'mobile' или 'desktop'). Это создает дерево документа `tree` для дальнейшей обработки.

2. **Очистка данных:** Метод `_clean` очищает строки от лишних пробелов и символов.

3. **Нормализация ключей словаря:** Метод `_normalize_dict_key` преобразует строки в корректные ключи словаря, заменяя пробелы на подчеркивания, удаляя двоеточия и переводя в нижний регистр.

4. **Получение количества результатов:** Метод `_get_estimated_results` извлекает количество найденных результатов поиска с десктопной страницы Google.

5. **Получение органических результатов:** Метод `_get_organic` извлекает данные органических результатов поиска, включая URL, заголовок, snippet и rich snippet.

6. **Получение featured snippet:** Метод `_get_featured_snippet` обрабатывает и возвращает данные featured snippet, если он найден на странице.

7. **Получение карточки знаний:** Метод `_get_knowledge_card` извлекает данные карточки знаний (knowledge card), включая заголовок, подзаголовок, описание и дополнительные данные.

8. **Получение данных из скроллируемых виджетов:** Метод `_get_scrolling_sections` извлекает данные из скроллируемых виджетов, например, топовых историй, твитов, возвращая список словарей с данными.

9. **Получение итоговых данных:** Метод `get_data` объединяет результаты из всех предыдущих методов в один словарь `data`, содержащий  количество результатов, featured snippet, карточку знаний, органические результаты, и данные из скроллируемых виджетов.  Метод `get_data` выбирает данные в зависимости от типа User Agent ('desktop').

Пример использования
-------------------------
.. code-block:: python

    import requests
    from lxml import html
    from hypotez.src.goog.google_search import GoogleHtmlParser

    # Запрос HTML-страницы
    url = "https://www.google.com/search?q=python"
    headers = {"User-Agent": "Mozilla/5.0"}
    response = requests.get(url, headers=headers)
    response.raise_for_status()  # Проверка на ошибки

    # Парсинг HTML
    parser = GoogleHtmlParser(response.text, user_agent='desktop')
    search_results = parser.get_data()

    # Вывод результатов
    print(search_results)