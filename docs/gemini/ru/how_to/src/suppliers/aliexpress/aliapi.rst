Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код определяет класс `AliApi`, который расширяет базовый класс `AliexpressApi`.  Он предназначен для работы с API AliExpress, включая получение подробной информации о продуктах по их ID и генерацию аффилиатных ссылок.  Метод `retrieve_product_details_as_dict` извлекает данные о продуктах и преобразует их из объекта `SimpleNamespace` в список словарей.

Шаги выполнения
-------------------------
1. **Импортирование необходимых библиотек:**  Код импортирует модули `re`, `json`, `asyncio`, `pathlib`, `typing`, `types`, `requests`,  и другие, необходимые для работы с API, базой данных и обработкой данных.

2. **Определение класса `AliApi`:**  Класс `AliApi` наследуется от класса `AliexpressApi`.  В конструкторе класса `__init__` он инициализирует необходимые параметры для доступа к API AliExpress (ключ API, секрет, язык, валюта и т.д.)

3. **Метод `retrieve_product_details_as_dict`:** Этот метод принимает список идентификаторов продуктов (`product_ids`).

4. **Обращение к API:** Метод `retrieve_product_details` (наследник `AliexpressApi`) отправляет запрос к API AliExpress для получения данных о продуктах по предоставленным ID.

5. **Преобразование данных:**  Полученные данные находятся в формате `SimpleNamespace`. Метод преобразует список объектов `SimpleNamespace` в список словарей (`prod_details_dict`), что делает данные более удобными для обработки и использования.

6. **Возврат данных:**  Метод возвращает список словарей с данными о продуктах.

7. **Метод `get_affiliate_links`:** Этот метод используется для получения аффилиатных ссылок на продукты. Он принимает список ссылок и тип ссылки, и возвращает список объектов `SimpleNamespace` содержащий полученные ссылки.

Пример использования
-------------------------
.. code-block:: python

    from hypotez.src.suppliers.aliexpress.aliapi import AliApi
    import asyncio

    async def example():
        # Создаем экземпляр класса AliApi
        api = AliApi(language='ru', currency='rub')

        # Список идентификаторов продуктов
        product_ids = [123, 456, 789]

        # Получаем данные о продуктах
        product_details = await api.retrieve_product_details_as_dict(product_ids)

        # Выводим данные в консоль (пример)
        for product in product_details:
            print(product)


    if __name__ == "__main__":
        asyncio.run(example())