# Модуль миграции базы данных: initial_revision

## Обзор

Этот модуль содержит скрипт миграции базы данных, созданный с использованием Alembic. Он определяет структуру таблиц базы данных для бота Telegram, управляющего цифровым рынком. Модуль создает таблицы `categories`, `users`, `products` и `purchases`, а также определяет связи между ними.

## Подробней

Этот скрипт миграции используется для автоматического обновления схемы базы данных. Он содержит две основные функции: `upgrade` и `downgrade`. Функция `upgrade` выполняет изменения для обновления базы данных до новой версии, в то время как функция `downgrade` выполняет обратные изменения для возврата к предыдущей версии.

## Функции

### `upgrade`

**Назначение**: Обновляет схему базы данных, создавая таблицы `categories`, `users`, `products` и `purchases`.

**Параметры**:
- Нет параметров.

**Возвращает**:
- Нет возвращаемого значения.

**Вызывает исключения**:
- Не вызывает исключений напрямую.

**Как работает функция**:

Функция `upgrade` использует операции Alembic (`op`) для создания таблиц в базе данных.  Для каждой таблицы определяются столбцы с их типами данных, ограничениями и значениями по умолчанию. Также устанавливаются внешние ключи для связывания таблиц `products` и `purchases` с другими таблицами.

**ASCII flowchart**:

```
Начало
  ↓
Создание таблицы "categories"
  ↓
Создание таблицы "users"
  ↓
Создание таблицы "products"
  ↓
Создание таблицы "purchases"
  ↓
Конец
```

**Примеры**:

```python
# Пример использования функции upgrade (обычно вызывается Alembic автоматически)
upgrade()
```

### `downgrade`

**Назначение**: Откатывает схему базы данных, удаляя таблицы `purchases`, `products`, `users` и `categories`.

**Параметры**:
- Нет параметров.

**Возвращает**:
- Нет возвращаемого значения.

**Вызывает исключения**:
- Не вызывает исключений напрямую.

**Как работает функция**:

Функция `downgrade` использует операции Alembic (`op`) для удаления таблиц из базы данных в обратном порядке их создания функцией `upgrade`.

**ASCII flowchart**:

```
Начало
  ↓
Удаление таблицы "purchases"
  ↓
Удаление таблицы "products"
  ↓
Удаление таблицы "users"
  ↓
Удаление таблицы "categories"
  ↓
Конец
```

**Примеры**:

```python
# Пример использования функции downgrade (обычно вызывается Alembic автоматически)
downgrade()
```