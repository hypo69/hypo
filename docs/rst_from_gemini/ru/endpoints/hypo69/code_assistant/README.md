```markdown
# Code Assistant: Обучение модели коду проекта

## Описание

`Code Assistant` — инструмент для взаимодействия с моделями **Gemini** и **OpenAI** для обработки исходного кода. Он выполняет задачи, такие как создание документации, проверка кода, и генерация тестов на основе кода из указанных файлов.  Инструмент предназначен для работы с русскоязычным кодом, но может быть адаптирован для других языков.

## Основные возможности

- **Чтение исходных файлов**: Чтение кода из файлов с расширениями `.py` и `README.md` из указанных директорий.  Поддерживает UTF-8 кодировку для обработки файлов с кириллицей.
- **Обработка с помощью моделей**: Отправка кода в модели для выполнения задач, таких как создание документации,  проверка кода на ошибки (стилистические, логические) и рекомендации по улучшению.
- **Генерация результатов**: Ответы моделей сохраняются в указанные директории,  структурировано по ролям, моделям и языкам, что позволяет легко управлять результатами и анализировать их.

## Структура проекта

- **Модели**: Используются модели **Gemini** и **OpenAI** для обработки запросов.  Требуется настройка API-ключей для доступа.
- **Промпты**: Программа читает промпты (направляющие инструкции для моделей) из файлов в директории `src/ai/prompts/developer/`.  Важно, что файлы промптов  должны соответствовать роли и языку.  Например, `doc_creator_ru.md` для создания документации на русском языке.
- **Файлы**: Обрабатываются файлы с расширениями `.py` и `README.md` в указанных стартовых директориях.  Поддержка UTF-8 кодировки важна для корректного отображения русских символов.

## Пример использования

### Запуск с настройками из JSON:

```bash
python assistant.py --settings settings.json
```

### Запуск с явным указанием параметров:

```bash
python assistant.py --role doc_creator --lang ru --models gemini openai --start_dirs /path/to/dir1 /path/to/dir2
```

### Примеры использования для различных ролей и языков (важно):

```bash
# Создание документации на русском языке для файлов в директории /path/to/dir
python assistant.py --role doc_creator --lang ru --models gemini openai --start_dirs /path/to/dir

# Проверка кода на ошибки на английском языке
python assistant.py --role code_checker --lang en --models gemini --start_dirs /path/to/dir

# Использование только модели OpenAI для создания документации на английском
python assistant.py --role doc_creator --lang en --models openai --start_dirs /path/to/dir
```

## Параметры командной строки (расширенное описание)

- `--settings`: Путь к JSON файлу с настройками.  Рекомендуется использовать этот параметр для удобства настройки и организации конфигурации.
- `--role`: Роль модели для выполнения задачи (например, `doc_creator`, `code_checker`, `test_generator`).  Важно: каждый роль должна иметь соответствующие промпты.
- `--lang`: Язык выполнения задачи (например, `ru` или `en`).  Убедитесь, что промпты соответствуют выбранному языку.
- `--models`: Список моделей для инициализации (например, `gemini`, `openai`).  Можно использовать несколько моделей одновременно.
- `--start_dirs`: Список директорий для обработки.  Укажите все необходимые директории, содержащие файлы для обработки.
- `--exclude_file_patterns`: Список регулярных выражений для исключения файлов. (Подробное описание в разделе исключений)
- `--exclude_dirs`: Список директорий для исключения.
- `--exclude_files`: Список файлов для исключения.


## Логика работы

1. **Чтение файлов**: Поиск файлов с расширениями `.py` и `README.md` в указанных стартовых директориях.
2. **Загрузка промптов**: Загрузка файлов промптов для каждой роли и языка из директории `src/ai/prompts/developer/`. Проверка корректности промптов.
3. **Обработка запросов**: Формирование запросов на основе загруженных файлов и промптов. Важно: передача контекста (например, имя файла, путь к файлу) для повышения качества результата.
4. **Сохранение ответов**: Ответы от моделей сохраняются в директории, соответствующей роли, модели и языку.  Убедитесь, что сохранение происходит в правильный каталог.

## Исключения (расширение)

- Настройка исключений для файлов и директорий с помощью параметров: `--exclude_file_patterns`, `--exclude_dirs`, `--exclude_files`. Эти параметры позволяют игнорировать определенные файлы и директории при обработке.
- *Подробное описание использования регулярных выражений в `--exclude_file_patterns`.*

## Логирование

Логи сохраняются с помощью библиотеки `logger` и содержат информацию о процессе обработки файлов и полученных ответах.


## Зависимости

- **Gemini API**: Требуется API-ключ для работы с моделью Gemini.
- **OpenAI API**: Требуется API-ключ для работы с моделью OpenAI.
- **[Библиотеки для работы с JSON, регулярными выражениями, файлами]**:  Укажите необходимые библиотеки.


Этот обновленный README более подробный, структурированный и ориентирован на практическое использование. Он добавляет важные моменты, которые часто упускаются, например, UTF-8, проверку промптов, использование API-ключей, и использование регулярных выражений для исключений.
```