# Модуль `src.suppliers.cdata.graber`

## Обзор

Модуль `src.suppliers.cdata.graber` предназначен для сбора значений полей на странице товара веб-сайта `cdata.co.il`. Он расширяет функциональность класса `Graber`, предоставляя специализированные методы для извлечения информации о товарах с данного сайта. В случае, если стандартные методы обработки полей, предоставляемые родительским классом, не подходят, они перегружаются в этом классе для обеспечения корректной обработки.

## Подробнее

Этот модуль является частью проекта `hypotez` и отвечает за сбор данных о товарах с сайта `cdata.co.il`. Он использует веб-драйвер для взаимодействия с веб-страницами и извлечения необходимой информации. Перед отправкой запроса к веб-драйверу можно выполнить предварительные действия через декоратор. Декоратор по умолчанию находится в родительском классе. Для того, чтобы декоратор сработал надо передать значение в `Context.locator`. Если требуется реализовать свой декоратор, необходимо раскомментировать соответствующие строки и переопределить его поведение.

## Классы

### `Graber`

**Описание**:
Класс `Graber` предназначен для операций захвата данных с сайта `cdata.co.il`. Он наследуется от класса `Graber` (`Grbr`) и предоставляет специализированные методы для извлечения информации о товарах с данного сайта.

**Как работает класс**:
1.  При инициализации класса устанавливается префикс поставщика (`supplier_prefix`) в значение `'cdata'`.
2.  Вызывается конструктор родительского класса `Graber` (`Grbr`) с указанием префикса поставщика, драйвера и индекса языка.
3.  Устанавливаются глобальные настройки через объект `Context`, в частности, `Context.locator_for_decorator` устанавливается в `None`, что означает, что декоратор `@close_pop_up` не будет выполнен, если не будет установлено другое значение.

**Методы**:

*   `__init__(self, driver: Driver, lang_index: int)`: Инициализирует экземпляр класса `Graber`.

    **Параметры**:

    *   `driver` (`Driver`): Экземпляр веб-драйвера для взаимодействия с веб-страницами.
    *   `lang_index` (`int`): Индекс языка, используемый для локализации.

    **Как работает метод**:

    1.  Устанавливает атрибут `supplier_prefix` в значение `'cdata'`.
    2.  Вызывает конструктор родительского класса `Graber` (`Grbr`) с указанием префикса поставщика, драйвера и индекса языка.
    3.  Устанавливает атрибут `Context.locator_for_decorator` в `None`.

## Функции

В данном коде также представлен шаблон декоратора `close_pop_up`, который предназначен для закрытия всплывающих окон перед выполнением основной логики функции.

### `close_pop_up(value: Any = None)`

```python
def close_pop_up(value: Any = None):
    """Создает декоратор для закрытия всплывающих окон перед выполнением основной логики функции.

    Args:
        value (Any): Дополнительное значение для декоратора.

    Returns:
        Callable: Декоратор, оборачивающий функцию.
    """
```

**Назначение**:
Декоратор `close_pop_up` предназначен для закрытия всплывающих окон перед выполнением основной логики функции. Он принимает необязательное значение `value`, которое может быть использовано для настройки поведения декоратора.

**Параметры**:

*   `value` (`Any`, optional): Дополнительное значение для декоратора. По умолчанию `None`.

**Возвращает**:

*   `Callable`: Декоратор, который оборачивает функцию.

**Как работает функция**:

1.  Функция `close_pop_up` принимает необязательный параметр `value`.
2.  Она определяет внутреннюю функцию `decorator`, которая принимает функцию `func` в качестве аргумента.
3.  Внутри `decorator` определяется асинхронная функция `wrapper`, которая выполняет следующие действия:
    *   Пытается выполнить локатор для закрытия всплывающего окна с помощью `Context.driver.execute_locator(Context.locator.close_pop_up)`.
    *   Если выполнение локатора завершается с ошибкой `ExecuteLocatorException`, то в лог записывается сообщение об ошибке с уровнем `DEBUG`.
    *   Вызывает оборачиваемую функцию `func` с переданными аргументами и возвращает результат.
4.  Функция `decorator` возвращает функцию `wrapper`.
5.  Функция `close_pop_up` возвращает функцию `decorator`.

**Пример использования**:

```python
@close_pop_up()
async def my_function():
    """Некоторая функция."""
    ...