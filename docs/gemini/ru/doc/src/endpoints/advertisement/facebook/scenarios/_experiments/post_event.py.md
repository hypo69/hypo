# Модуль `post_event.py`

## Обзор

Модуль предназначен для автоматизации процесса публикации информации о мероприятиях в группах Facebook. Он получает данные о мероприятиях из JSON файлов, расположенных в Google Drive, и использует `FacebookPromoter` для отправки этих данных в соответствующие группы Facebook.

## Подробней

Этот модуль является частью системы автоматизации маркетинга в Facebook. Он упрощает процесс публикации объявлений о мероприятиях, автоматизируя загрузку данных о мероприятиях и их отправку в целевые группы Facebook. Он выполняет следующие основные шаги:
1.  Собирает имена директорий с мероприятиями.
2.  Загружает список групп из JSON-файлов.
3.  Для каждого мероприятия загружает данные из JSON-файла и отправляет их в группы Facebook с помощью `FacebookPromoter`.

## Функции

### `post_events`

```python
def post_events():
    """Обрабатывает и отправляет мероприятия на Facebook.

    Функция получает данные о мероприятиях из указанной директории, загружает детали мероприятий из JSON-файлов
    и отправляет их на Facebook. Мероприятия хранятся в структуре директорий под папкой `facebook/events`.

    Raises:
        FileNotFoundError: Если JSON-файл с информацией о мероприятии отсутствует.
    """
    ...
```

**Назначение**: Обрабатывает и отправляет информацию о мероприятиях в группы Facebook.

**Как работает функция**:

1.  Инициализация драйвера Chrome: Создается экземпляр драйвера Chrome для управления браузером.
2.  Получение списка директорий мероприятий: Функция извлекает список директорий, представляющих мероприятия, из директории `'aliexpress/events'` в Google Drive.
3.  Получение списка файлов групп Facebook: Функция получает список файлов, содержащих информацию о группах Facebook, из директории `'facebook/groups'` в Google Drive.
4.  Инициализация `FacebookPromoter`: Создается экземпляр класса `FacebookPromoter`, который используется для публикации мероприятий в группах Facebook. Ему передаются драйвер и список файлов групп.
5.  Цикл обработки мероприятий: Для каждой директории мероприятия выполняется следующая последовательность действий:
    *   Загрузка данных о мероприятии: Загружаются данные о мероприятии из JSON-файла, расположенного в директории мероприятия.
    *   Публикация мероприятия: Вызывается метод `process_groups` объекта `promoter` для публикации мероприятия в соответствующих группах Facebook.

```ascii
Начало
  ↓
Инициализация драйвера Chrome
  ↓
Получение списка директорий мероприятий
  ↓
Получение списка файлов групп Facebook
  ↓
Инициализация FacebookPromoter
  ↓
Цикл по директориям мероприятий
  ├──> Загрузка данных о мероприятии из JSON
  └──> Публикация мероприятия через FacebookPromoter
  ↓
Конец
```

**Примеры**:

```python
post_events()
```

### `post_to_my_group`

```python
def post_to_my_group(event):
    """"""
    ...
```

**Назначение**: Отправляет информацию о мероприятии в указанную группу Facebook.

**Как работает функция**:

1.  Загрузка данных о группах: Функция загружает данные о группах Facebook из JSON-файла `'my_managed_groups.json'`, расположенного в директории `'facebook/groups'` в Google Drive.
2.  Инициализация драйвера Chrome: Создается экземпляр драйвера Chrome для управления браузером.
3.  Цикл по группам: Для каждой группы выполняется следующая последовательность действий:
    *   Получение URL группы: Извлекается URL группы из данных о группе.
    *   Переход по URL: Драйвер переходит по URL группы в браузере.
    *   Публикация мероприятия: Вызывается функция `post_event` для публикации мероприятия в текущей группе.

```ascii
Начало
  ↓
Загрузка данных о группах из JSON
  ↓
Инициализация драйвера Chrome
  ↓
Цикл по группам
  ├──> Получение URL группы
  ├──> Переход по URL в браузере
  └──> Публикация мероприятия через post_event
  ↓
Конец
```

**Примеры**:

```python
event = j_loads_ns(gs.path.google_drive / 'aliexpress' / 'events'  / 'sep_11_2024_over60_pricedown' / 'sep_11_2024_over60_pricedown.json')
post_to_my_group(event)