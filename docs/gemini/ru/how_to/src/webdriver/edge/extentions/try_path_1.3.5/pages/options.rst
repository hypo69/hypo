Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код JavaScript отвечает за загрузку и сохранение настроек расширения. Он получает значения атрибутов, CSS-стилей и размеров всплывающего окна из настроек расширения и заполняет поля формы.  Также код валидирует вводимые значения на корректность.  При сохранении настроек он отправляет их в хранилище браузера, а при нажатии на кнопку "Показать стандартные значения" устанавливает значения по умолчанию.

Шаги выполнения
-------------------------
1. **Загрузка данных:** Код получает данные настроек из хранилища расширения с помощью `browser.storage.sync.get()`. Он ожидает ответ с ключом `attributes` содержащий атрибуты, `css` – стили, `popupCss` – CSS для всплывающего окна.
2. **Заполнение полей формы:** Полученные данные (`res`) используются для заполнения элементов формы (`elementAttr`, `contextAttr`, `style`, `popupBodyWidth`, `popupBodyHeight` и т.д.).
3. **Обработка события сохранения:** При клике на кнопку "Сохранить" код выполняет следующие шаги:
    - Считывает значения из полей формы.
    - Проверяет корректность атрибутов и стилей.  Если значения некорректны, выводится сообщение об ошибке.
    - Сохраняет данные в хранилище браузера с помощью `browser.storage.sync.set()`.
    - Выводит сообщение о успешном сохранении или об ошибке.
4. **Обработка события "Показать стандартные значения":** При клике на кнопку "Показать стандартные значения":
    - Устанавливает значения атрибутов и стилей в поля формы на значения по умолчанию (`defaultAttributes`, `defaultPopupBodyStyles`).
    - Загружает стандартный CSS в `style` с помощью `loadDefaultCss()`.

Пример использования
-------------------------
.. code-block:: javascript
    
    // Предполагается, что форма уже создана с id 'element-attribute', 'context-attribute' и т.д.
    // и кнопка 'save' с id 'save'.
    // Добавлены значения для примера, замени их реальными значениями
    document.getElementById("element-attribute").value = "testValue";
    document.getElementById("context-attribute").value = "anotherValue";
    document.getElementById("save").click();