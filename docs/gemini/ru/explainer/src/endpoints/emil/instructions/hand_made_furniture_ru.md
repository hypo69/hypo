## ИНСТРУКЦИЯ:

Анализ предоставленного кода подробно и объяснение его функциональности. Ответ включает три раздела:

1.  **<алгоритм>**: Описание рабочего процесса в виде пошаговой блок-схемы, включая примеры для каждого логического блока, и иллюстрация потока данных между функциями, классами или методами.
2.  **<mermaid>**: Код для диаграммы в формате `mermaid`, анализ и объяснение всех зависимостей, которые импортируются при создании диаграммы. Убеждение, что все имена переменных, используемые в диаграмме `mermaid`, имеют осмысленные и описательные имена. Имена переменных вроде `A`, `B`, `C`, и т.д., не допускаются. Если в коде есть импорт `import header`, добавление блока `mermaid` flowchart, объясняющий `header.py`
    ```mermaid
    flowchart TD
        Start --> Header[<code>header.py</code><br> Determine Project Root]

        Header --> import[Import Global Settings: <br><code>from src import gs</code>]
    ```
3.  **<объяснение>**: Предоставление подробных объяснений:
    *   **Импорты**: Их назначение и взаимосвязь с другими пакетами `src`.
    *   **Классы**: Их роль, атрибуты, методы и взаимодействие с другими компонентами проекта.
    *   **Функции**: Их аргументы, возвращаемые значения, назначение и примеры.
    *   **Переменные**: Их типы и использование.
    *   Выделение потенциальных ошибок или областей для улучшения.

Дополнительно, построение цепочки взаимосвязей с другими частями проекта (если применимо).

Это обеспечивает всесторонний и структурированный анализ кода.

## Формат ответа: `.md` (markdown)

**КОНЕЦ ИНСТРУКЦИИ**

### <алгоритм>

1.  **Начало**: Получение на вход текста с описанием требований к описанию мебели.
2.  **Анализ требований**:
    *   Идентификация роли: Специалист по описанию мебели.
    *   Определение приоритета описания: От крупных объектов к мелким.
    *   Исключение описания стен, если на них ничего нет.
    *   Объединение описания мебели одного цвета/оттенка в одно предложение.
    *   Формирование описания в формате "портрета интерьера".
    *   Исключение описания упаковочных материалов (пленка, матрасы) при описании мебели.
3.  **Формирование ответа**:
    *   Создание JSON-объекта с полями:
        *   `id_category_default`: Идентификатор категории товара (определяется из списка).
        *   `category_name`: Название категории товара.
        *   `description`: Описание мебели на фотографии.
    *   Описание должно соответствовать примерам:
        *   Описание мебели без повторений слов и словосочетаний.
        *   Исключение лишних деталей (пол, матрасы, пленка).
        *   Фокус на характеристиках и стиле мебели, а не на фоне.
4.  **Примеры**:
    *   **Пример 1:**
        *   **Вход:** Фотография кухонного острова.
        *   **Выход:**
            ```json
            {
              "id_category_default": "<id_кухонной_мебели>",
              "category_name": "Кухонная мебель",
              "description": "Современный кухонный остров с черной отделкой и стеклянными дверцами. Остров имеет гладкую поверхность и встроенные полки. В интерьере также присутствуют подвесные светильники различных цветов, создающие уютную атмосферу"
            }
            ```
    *   **Пример 2:**
        *   **Вход:** Фотография комода.
        *   **Выход:**
            ```json
            {
                "id_category_default": "<id_комода>",
                "category_name": "Комод",
                "description": "Комод с двумя выдвижными ящиками и верхней стеклянной поверхностью. Корпус выполнен с рифленой текстурой в светлом цвете, а ручки ящиков черного цвета, что создает контраст и придает мебели стильный современный вид, идеально подходящий для современного интерьера, добавляя ему лаконичности и визуальной лёгкости."
            }
            ```
    *   **Пример 3:**
        *   **Вход:** Фотография кровати.
        *   **Выход:**
            ```json
            {
              "id_category_default": "<id_кровати>",
              "category_name": "Кровать",
              "description": "Белая кровать с деревянным каркасом и изголовьем с изогнутыми линиями, создающими элегантный силуэт. В нижней части кровати расположены два выдвижных ящика для хранения, обеспечивающие дополнительное пространство и функциональность."
            }
            ```
5.  **Конец**: Возвращение JSON-объекта с описанием мебели.

### <mermaid>

```mermaid
flowchart TD
    Start --> Input[Ввод: Текст с требованиями]
    Input --> Analyze[Анализ требований]
    Analyze --> Format[Формирование ответа в JSON]
    Format --> Output[Вывод: JSON с описанием]
    Output --> End
    
    subgraph Analysis
    Analyze --> IdentifyRole[Определение роли: Специалист по описанию мебели]
    IdentifyRole --> DefinePriority[Определение приоритета описания (от крупных к мелким)]
    DefinePriority --> ExcludeWalls[Исключение описания пустых стен]
    ExcludeWalls --> MergeColors[Объединение описания мебели одного цвета]
    MergeColors --> CreatePortrait[Формирование "портрета интерьера"]
    CreatePortrait --> ExcludeCoverings[Исключение описания упаковочных материалов и матрасов]
    end
    
    subgraph Formatting
    Format --> CreateJSON[Создание JSON объекта]
    CreateJSON --> SetID[Установка поля: id_category_default]
    SetID --> SetCategoryName[Установка поля: category_name]
    SetCategoryName --> SetDescription[Установка поля: description]
     end
    
    subgraph OutputJSON
    Output --> ReturnJSON[Возврат JSON-объекта]
    end

```

**Объяснение:**

*   `Start`: Начало процесса.
*   `Input`: Ввод текста с требованиями к описанию мебели.
*   `Analyze`: Блок анализа требований, включает подпроцессы:
    *   `IdentifyRole`: Определение роли как специалиста по описанию мебели.
    *   `DefinePriority`: Определение порядка описания от крупных объектов к мелким.
    *   `ExcludeWalls`: Исключение описания пустых стен.
    *   `MergeColors`: Объединение описания мебели одного цвета.
    *   `CreatePortrait`: Формирование описания в формате "портрета интерьера".
    *   `ExcludeCoverings`: Исключение описания упаковочных материалов (пленка) и матрасов.
*   `Format`: Блок формирования JSON ответа, включает подпроцессы:
    *   `CreateJSON`: Создание JSON объекта.
    *   `SetID`: Установка `id_category_default`.
    *   `SetCategoryName`: Установка `category_name`.
    *   `SetDescription`: Установка `description`.
*   `Output`: Блок вывода JSON ответа.
    * `ReturnJSON`: Возврат JSON-объекта.
*   `End`: Конец процесса.

В этой диаграмме, зависимости и поток данных представлены логически, и каждая переменная имеет осмысленное имя, описывающее её роль в процессе.

### <объяснение>

**Общее описание**:

Код представляет собой набор инструкций для "специалиста по описанию мебели", который на основе изображения должен создать текстовое описание мебели в определенном формате. Инструкция описывает требования к этому описанию, а не сам код.

**Импорты**:

В данном фрагменте кода нет импортов, так как это, по сути, инструкции, а не исполняемый код.

**Классы**:

Классы в данном фрагменте не используются.

**Функции**:

Функции в данном фрагменте не используются.

**Переменные**:

В контексте инструкций переменные не используются. Однако, в сгенерированном JSON ответе есть переменные:
*   `id_category_default`:  Строка, представляющая идентификатор категории товара.
*   `category_name`: Строка, представляющая имя категории товара.
*   `description`: Строка, представляющая описание мебели.

**Детальное объяснение**:

*   **Роль**: Описание явно устанавливает роль "специалиста по описанию мебели". Это определяет контекст задачи.
*   **Приоритет**:  Требование описывать объекты от крупных к меньшим задает порядок обработки изображения.
*   **Исключения**: Явное исключение описания пустых стен, матрасов и защитной пленки делает описание более релевантным и точным.
*   **Объединение**: Инструкция не перечислять цвета для каждой единицы мебели, если они одного цвета, улучшает читаемость и лаконичность описания.
*   **Формат JSON**:  Применение JSON-формата делает описание структурированным и легко обрабатываемым.
*   **Примеры**:  Предоставленные примеры для `description` демонстрируют ожидаемый формат и стиль описания, что помогает избежать ошибок.
*   **Стиль описания**: Инструкция не использовать избитые словесные обороты и слова `что` делает текст более профессиональным и приятным для чтения.

**Потенциальные ошибки и области для улучшения**:

*   **Зависимость от категорий**: Описание зависит от существующего списка категорий, который не представлен в данном фрагменте.
*   **Обработка нюансов**: Описание не обрабатывает сложных ситуаций, таких как сочетание цветов, текстур и материалов.
*   **Автоматизация**:  Данная инструкция предназначена для ручной работы. Для автоматизации потребуется дополнительный код и возможно модели машинного обучения для распознавания объектов и составления описания.
*   **Конкретика**: Примеры могут быть расширены для различных видов мебели, чтобы охватить больше сценариев.

**Взаимосвязи с другими частями проекта**:

Эта инструкция является частью более крупной системы, которая, вероятно, включает:

*   Система обработки изображений для выделения мебели.
*   Базу данных с категориями мебели.
*   Систему для хранения и использования сгенерированных описаний.

Этот документ предназначен для человека или системы, которая отвечает за анализ изображения и формирование описания.