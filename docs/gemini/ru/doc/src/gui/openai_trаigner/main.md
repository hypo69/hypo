# Модуль `hypotez/src/gui/openai_trаigner/main.py`

## Обзор

Этот модуль предоставляет интерфейс пользователя для взаимодействия с различными моделями OpenAI, используя веб-браузер. Он реализует окно приложения, которое можно минимизировать в системный трей, а также предоставляет возможность выбора браузера по умолчанию.

## Классы

### `AssistantMainWindow`

**Описание**: Основной класс, представляющий главное окно приложения. Он отвечает за отображение веб-браузера, управление системным треем и меню для выбора URL и моделей.

**Методы**

- `__init__(self)`:
    **Описание**: Инициализирует главное окно приложения.
    **Параметры**:
    - `self` (объект `AssistantMainWindow`): текущий экземпляр класса.

    **Действия**:
    - Настраивает окно (размеры, флаги).
    - Запрашивает выбор браузера по умолчанию.
    - Создает профиль браузера.
    - Создает веб-браузер и устанавливает профиль.
    - Создает и настраивает элементы верхней панели (ввод URL, кнопки загрузки, минимизации, полноэкранного режима, закрытия).
    - Создает и настраивает системный трей, контекстное меню для него.
    - Создает меню для выбора URL Google-сервисов и моделей OpenAI.
    - Создает кнопки для вызова меню.
    - Устанавливает layout для главного окна.
    - Показывает главное окно и системный трей.

- `ask_for_browser(self)`:
    **Описание**: Запрашивает выбор браузера у пользователя.
    **Параметры**:
    - `self` (объект `AssistantMainWindow`): текущий экземпляр класса.

    **Возвращает**:
    - `str`: Выбранное название браузера (например, "Chrome", "Firefox"). Возвращает `None`, если пользователь отказался от выбора.

- `load_url(self, url: str = None)`:
    **Описание**: Загружает указанный URL в веб-браузер.
    **Параметры**:
    - `self` (объект `AssistantMainWindow`): текущий экземпляр класса.
    - `url` (str, optional): URL для загрузки. Если `None`, берет URL из поля ввода.

    **Действия**:
    - Добавляет префикс "http://" к URL, если он его не содержит.
    - Загружает URL в веб-браузер.


- `hide_to_tray(self)`:
    **Описание**: Скрывает главное окно приложения и показывает только иконку в системном трее.
    **Параметры**:
    - `self` (объект `AssistantMainWindow`): текущий экземпляр класса.

- `quit_app(self)`:
    **Описание**: Закрывает приложение.
    **Параметры**:
    - `self` (объект `AssistantMainWindow`): текущий экземпляр класса.


- `closeEvent(self, event)`:
    **Описание**: Переопределенный обработчик события закрытия окна. Скрывает окно в трее, игнорирует стандартное поведение закрытия.


## Функции

### `__main__`

**Описание**: Главный блок приложения.

**Действия**:
- Создает приложение `QApplication`.
- Устанавливает флаг `setQuitOnLastWindowClosed(False)`, чтобы приложение не закрывалось при закрытии последнего окна.
- Создает экземпляр класса `AssistantMainWindow`.
- Показывает главное окно.
- Запускает главный цикл приложения `sys.exit(app.exec())`.