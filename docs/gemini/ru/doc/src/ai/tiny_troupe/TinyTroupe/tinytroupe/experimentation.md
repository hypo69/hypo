# Модуль `experimentation`

## Обзор

Этот модуль предоставляет классы для рандомизации данных и проведения интервенций.  `ABRandomizer` используется для рандомизации выборок, а `Intervention` — для моделирования воздействия на агентов и окружения.

## Классы

### `ABRandomizer`

**Описание**: Класс `ABRandomizer` служит для рандомизации и последующего дерандомизации выбора между двумя вариантами (например, в A/B тестировании). Сохраняет соответствие между исходными и рандомизированными вариантами.  Поддерживает также варианты, которые не требуют рандомизации.

**Методы**

#### `__init__`

**Описание**: Инициализирует экземпляр класса.

**Параметры**:

- `real_name_1` (str): Имя первого варианта в исходных данных.
- `real_name_2` (str): Имя второго варианта в исходных данных.
- `blind_name_a` (str): Имя первого варианта для пользователя (скрытое от него).
- `blind_name_b` (str): Имя второго варианта для пользователя (скрытое от него).
- `passtrough_name` (list): Список имен, которые не рандомизируются и возвращаются без изменений.
- `random_seed` (int): Зерно генератора случайных чисел для воспроизводимости.

#### `randomize`

**Описание**: Рандомизирует выбор между `a` и `b` для заданного индекса `i` и сохраняет результат для последующей дерандомизации.

**Параметры**:

- `i` (int): Индекс элемента.
- `a` (str): Первый вариант.
- `b` (str): Второй вариант.

**Возвращает**:
- tuple[str, str]: Рандомизированные варианты `a` и `b`.


#### `derandomize`

**Описание**: Дерандомизирует выбор для заданного индекса `i` на основании сохраненного рандомизированного соответствия.

**Параметры**:

- `i` (int): Индекс элемента.
- `a` (str): Первый вариант.
- `b` (str): Второй вариант.

**Возвращает**:
- tuple[str, str]: Дерандомизированные варианты `a` и `b`.

**Вызывает исключения**:

- `Exception`: Если для данного индекса `i` нет сохраненной информации о рандомизации.


#### `derandomize_name`

**Описание**: Преобразует рандомизированное имя варианта (`blind_name`) в исходное.

**Параметры**:

- `i` (int): Индекс элемента.
- `blind_name` (str): Рандомизированное имя варианта, выбранное пользователем.

**Возвращает**:
- str: Исходное имя варианта.

**Вызывает исключения**:

- `Exception`: Если переданное `blind_name` не соответствует ни одному из известных рандомизированных вариантов или не входит в список `passtrough_name`.



### `Intervention`

**Описание**: Класс для моделирования воздействия на агентов и окружение.  В настоящий момент находится в стадии разработки.

**Методы**

#### `__init__`

**Описание**: Инициализирует экземпляр класса.

**Параметры**:

- `agent` (TinyPerson, optional): Агент, на котором нужно произвести воздействие.
- `agents` (list, optional): Список агентов, на которых нужно произвести воздействие.
- `environment` (TinyWorld, optional): Окружение, на котором нужно произвести воздействие.
- `environments` (list, optional): Список окружений, на которых нужно произвести воздействие.

**Вызывает исключения**:

- `Exception`: Если одновременно указаны как `agent`, так и `agents`, или `environment` и `environments`.
- `Exception`: Если ни один из параметров не указан.

#### `check_precondition`

**Описание**: Проверяет выполнение условия для проведения интервенции.

**Возвращает**:
- bool: Результат проверки условия.

**Вызывает исключения**:

- `NotImplementedError`: Метод не реализован.


#### `apply`

**Описание**: Применяет интервенцию.


**Вызывает исключения**:

- `NotImplementedError`: Метод не реализован.


#### `set_textual_precondition`

**Описание**: Устанавливает текстовое условие для интервенции, которое будет интерпретироваться языковой моделью.

**Параметры**:

- `text` (str): Текст условия.


#### `set_functional_precondition`

**Описание**: Устанавливает функциональное условие для интервенции, которое будет вычисляться кодом.

**Параметры**:

- `func` (function): Функция условия. Должна принимать в качестве аргументов `agent`, `agents`, `environment`, `environments`.


#### `set_effect`

**Описание**: Устанавливает эффект интервенции.

**Параметры**:

- `effect_func` (function): Функция, описывающая эффект интервенции.