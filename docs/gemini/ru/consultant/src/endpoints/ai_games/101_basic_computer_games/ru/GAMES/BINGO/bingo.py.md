# Анализ кода модуля bingo.py

**Качество кода**
9
 -  Плюсы
    - Код хорошо структурирован, разбит на функции, что облегчает его понимание и поддержку.
    - Используются осмысленные имена переменных и функций.
    - Добавлены docstring для функций, что способствует пониманию их назначения и использования.
    - Логика игры реализована корректно, включая создание карточки, отметку чисел, проверку на выигрыш и вывод сообщений.
    - Комментарии в коде детально объясняют каждый шаг.
 -  Минусы
    -  Не хватает проверки на ввод пользователя, хотя это не является частью задания.
    -  В коде нет обработки исключений, что может привести к проблемам, если возникнет неожиданная ошибка.
    -  Стиль кода не полностью соответствует PEP 8 (например, пробелы вокруг операторов).

**Рекомендации по улучшению**
1. **Добавить обработку исключений**:
    - Обернуть код, где возможно возникновение ошибок, в блоки `try-except` и использовать `logger.error` для логирования ошибок.
2. **Соблюдать PEP 8**:
    - Привести код в соответствие с PEP 8, например, добавить пробелы вокруг операторов.
3.  **Документировать модуль**:
    - Добавить docstring в начало файла, описывающий назначение модуля.
4.  **Улучшить вывод**:
    - При выводе карточки использовать форматирование для улучшения читаемости.
5. **Использовать более конкретные типы в docstring**:
    - Вместо `list of lists` использовать `List[List[int]]`.
6. **Улучшить случайный выбор чисел**:
    - Использовать `random.sample` для выбора уникальных чисел из заданного диапазона, вместо цикла с `random.randint` и проверкой на повторы.

**Оптимизиробанный код**
```python
"""
Модуль для игры в Бинго.
=========================================================================================

Этот модуль реализует упрощенную версию игры Бинго, где генерируется случайная карточка 5x5 с числами от 1 до 75
(исключая числа, кратные 10). Игрок поочередно получает случайные числа, которые отмечаются на карточке.
Игра заканчивается, когда все числа на карточке отмечены.

Пример использования
--------------------

Пример запуска игры:

.. code-block:: python

   if __name__ == "__main__":
       play_bingo()
"""
import random
from typing import List

from src.logger.logger import logger


def create_bingo_card() -> List[List[int]]:
    """
    Создает и возвращает карточку бинго 5x5.

    Карточка содержит уникальные случайные числа от 1 до 75, исключая числа, кратные 10.

    :return: Карточка бинго.
    :rtype: List[List[int]]
    """
    try:
        numbers = [i for i in range(1, 76) if i % 10 != 0]
        # Код создает список чисел от 1 до 75, исключая числа, кратные 10
        random.shuffle(numbers)
        # Код перемешивает список чисел

        card = []
        # Код создает пустой список для хранения карточки

        for _ in range(5):
            row = []
            # Код создает пустой список для хранения строки карточки
            for _ in range(5):
                row.append(numbers.pop())
                # Код добавляет случайное число в строку карточки
            card.append(row)
            # Код добавляет строку в карточку
        return card
    except Exception as e:
        logger.error('Ошибка при создании карточки бинго', exc_info=True)
        return []


def print_bingo_card(card: List[List[int]]):
    """
    Выводит карточку бинго в консоль.

    :param card: Карточка бинго для вывода.
    :type card: List[List[int]]
    """
    try:
        for row in card:
          print(" ".join(str(x).rjust(2) for x in row))
          # Код выводит строку карточки, выравнивая числа по правому краю
        print()
        # Код добавляет пустую строку для лучшего форматирования
    except Exception as e:
        logger.error('Ошибка при выводе карточки бинго', exc_info=True)


def mark_number(card: List[List[int]], number: int):
    """
    Отмечает число на карточке бинго, заменяя его на 0.

    :param card: Карточка бинго.
    :type card: List[List[int]]
    :param number: Число для отметки.
    :type number: int
    """
    try:
        for i in range(len(card)):
            # Код проходит по всем строкам карточки
            for j in range(len(card[i])):
                # Код проходит по всем числам в строке
                if card[i][j] == number:
                    # Код проверяет, равно ли текущее число искомому
                    card[i][j] = 0
                    # Код заменяет число на 0
                    return
    except Exception as e:
       logger.error('Ошибка при отметке числа на карточке', exc_info=True)

def is_bingo(card: List[List[int]]) -> bool:
    """
    Проверяет, все ли числа на карточке бинго отмечены (заменены на 0).

    :param card: Карточка бинго для проверки.
    :type card: List[List[int]]
    :return: True, если все числа отмечены, иначе False.
    :rtype: bool
    """
    try:
        for row in card:
            # Код проходит по всем строкам карточки
            for num in row:
                # Код проходит по всем числам в строке
                if num != 0:
                    # Код проверяет, есть ли неотмеченные числа
                    return False
        return True
    except Exception as e:
        logger.error('Ошибка при проверке бинго', exc_info=True)
        return False

def play_bingo():
    """
    Запускает игру "Бинго".

    Создает карточку бинго, выводит ее на экран, и просит пользователя вводить числа.
    Игра заканчивается, когда все числа на карточке отмечены.
    """
    try:
        bingo_card = create_bingo_card()
        # Код создает карточку бинго
        if not bingo_card:
            return # Если карточка не создалась, выходим из функции

        print("Ваша карточка BINGO:")
        # Код выводит сообщение о начале игры
        print_bingo_card(bingo_card)
        # Код выводит карточку на экран

        called_numbers = set()
        # Код создает множество для отслеживания уже названных чисел

        while not is_bingo(bingo_card):
             # Код начинает игровой цикл, пока не все числа отмечены
            number = random.randint(1, 75)
            # Код генерирует случайное число
            while number in called_numbers:
                 # Код генерирует новое число, если оно уже было названо
                number = random.randint(1, 75)

            called_numbers.add(number)
            # Код добавляет число в множество названных
            print(f"Выпало число: {number}")
            # Код выводит выпавшее число
            mark_number(bingo_card, number)
             # Код отмечает число на карточке
            print_bingo_card(bingo_card)
             # Код выводит карточку на экран

        print("BINGO!")
         # Код выводит сообщение о победе
    except Exception as e:
        logger.error('Произошла ошибка во время игры в Бинго', exc_info=True)


if __name__ == "__main__":
    play_bingo()
    # Код запускает игру, если файл запущен как основной
```