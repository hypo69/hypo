# Анализ кода модуля bull.py

**Качество кода**
9
-  Плюсы
    - Код хорошо структурирован и логически понятен.
    - Присутствуют docstring для функций, объясняющие их назначение, параметры и возвращаемые значения.
    - Используются информативные имена переменных, что улучшает читаемость кода.
    - Алгоритм игры реализован корректно, включая генерацию случайного числа, проверку ввода пользователя и вычисление количества быков и коров.
    - Логика игры чётко разделена на функции, что способствует модульности кода.
-  Минусы
    -  Отсутствует обработка исключений.
    -  Не используется логирование.
    -  В комментариях используется смесь русского и английского языка.
    -  Комментарии не соответствуют формату reStructuredText.

**Рекомендации по улучшению**

1.  **Документация:**
    - Переписать все комментарии и docstring в формате reStructuredText (RST).
    - Включить подробное описание модуля в начале файла.
    - Добавить более детальные описания параметров и возвращаемых значений функций.

2.  **Обработка ошибок:**
    -  Использовать блок `try-except` для обработки возможных ошибок при вводе данных пользователем.
    -  Добавить логирование ошибок с помощью `logger.error`.

3.  **Логирование:**
    -  Использовать `from src.logger.logger import logger` для логирования важных событий, таких как начало игры, ввод пользователя, результаты проверки и победа.
    -  Логировать некорректные вводы пользователя и другие ошибки.

4.  **Рефакторинг:**
    -  Переименовать переменные и функции в соответствии с ранее обработанными файлами, если это необходимо.
    -  Удалить избыточные комментарии.
    -  Использовать константы для магических чисел (например, `4` для длины числа).

**Оптимизированный код**

```python
"""
Модуль игры "Быки и Коровы"
===========================

Этот модуль реализует игру "Быки и Коровы", в которой компьютер генерирует случайное четырехзначное число,
а игрок пытается его угадать. После каждой попытки игроку сообщается количество "быков" (правильная цифра на правильном месте)
и "коров" (правильная цифра на неправильном месте).

.. code-block:: python

    from src.logger.logger import logger
    import random

    game = BullsAndCows()
    game.play()

"""
import random
from src.logger.logger import logger

NUMBER_LENGTH = 4  #: Длина загадываемого числа.

def generate_target_number() -> str:
    """
    Генерирует случайное четырехзначное число с уникальными цифрами.

    :return: Случайное четырехзначное число в виде строки.
    :rtype: str
    """
    digits = list(range(10))
    random.shuffle(digits)
    target_number = "".join(map(str, digits[1:NUMBER_LENGTH]))
    return str(digits[0]) + target_number


def check_guess(target: str, guess: str) -> tuple[int, int]:
    """
    Проверяет предположение игрока и возвращает количество "быков" и "коров".

    :param target: Загаданное число.
    :type target: str
    :param guess: Предположение игрока.
    :type guess: str
    :return: Кортеж с количеством быков и коров.
    :rtype: tuple[int, int]
    """
    bulls = 0
    cows = 0
    for i in range(NUMBER_LENGTH):
        if guess[i] == target[i]:
            bulls += 1  # Увеличение счетчика быков, если цифра и позиция совпадают.
        elif guess[i] in target:
            cows += 1  # Увеличение счетчика коров, если цифра присутствует в числе, но не на той позиции.
    return bulls, cows


def is_valid_guess(guess: str) -> bool:
    """
    Проверяет, является ли ввод пользователя корректным (четыре уникальные цифры).

    :param guess: Ввод пользователя.
    :type guess: str
    :return: True, если ввод корректный, иначе False.
    :rtype: bool
    """
    return len(guess) == NUMBER_LENGTH and guess.isdigit() and len(set(guess)) == NUMBER_LENGTH

class BullsAndCows:
    """
    Класс, представляющий игру "Быки и Коровы".
    """
    def __init__(self):
        """
        Инициализирует игру, генерируя случайное число и устанавливая количество попыток в 0.
        """
        self.target_number = generate_target_number() # Генерирует загаданное число
        self.number_of_guesses = 0 # Счетчик попыток

    def play(self):
        """
        Запускает игровой процесс.
        """
        logger.info('Начало игры "Быки и Коровы"') # Логирование начала игры
        while True:
            self.number_of_guesses += 1
            try:
                user_guess = input("Введите четырехзначное число: ") # Получение ввода от пользователя
                logger.debug(f'Попытка #{self.number_of_guesses}, ввод пользователя: {user_guess}') # Логирование ввода пользователя

                if not is_valid_guess(user_guess): # Проверка корректности ввода
                    print("Некорректный ввод! Пожалуйста, введите четырехзначное число с уникальными цифрами.")
                    logger.warning(f'Некорректный ввод пользователя: {user_guess}') # Логирование некорректного ввода
                    continue

                bulls, cows = check_guess(self.target_number, user_guess) # Проверка ввода и получение быков и коров
                print(f"Быки: {bulls}, Коровы: {cows}")
                logger.debug(f'Результат: быки={bulls}, коровы={cows}') # Логирование результатов проверки

                if bulls == NUMBER_LENGTH: # Проверка на победу
                    print(f"Поздравляю! Вы угадали число за {self.number_of_guesses} попыток!")
                    logger.info(f'Победа! Число угадано за {self.number_of_guesses} попыток.') # Логирование победы
                    break
            except Exception as e:
                 logger.error('Возникла ошибка во время игры', exc_info=e) # Логирование ошибки
                 print('Произошла ошибка во время игры, пожалуйста, попробуйте еще раз') # Сообщение пользователю об ошибке
                 break


if __name__ == '__main__':
    game = BullsAndCows()
    game.play()
```