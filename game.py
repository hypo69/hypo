import random

def rock_paper_scissors():
    """
    Игра "Камень, ножницы, бумага".

    Пользователь вводит свой выбор, программа сравнивает его с выбором компьютера.
    Победитель определяется по правилам игры.
    """
    # Словарь возможных вариантов выбора
    # Ключи - это сокращения (например, "к" для "камень"), а значения - полные названия
    choices = {
        'к': 'камень',
        'н': 'ножницы',
        'б': 'бумага',
        'камень': 'камень',
        'ножницы': 'ножницы',
        'бумага': 'бумага',
    }

    # Правила игры: какое значение побеждает другое
    # Например, "камень" побеждает "ножницы", "ножницы" побеждают "бумагу", а "бумага" побеждает "камень"
    rules = {
        'камень': 'ножницы',
        'ножницы': 'бумага',
        'бумага': 'камень',
    }

    # Печать приветствия и инструкций для пользователя
    print('Игра "Камень, ножницы, бумага"')
    print('Введите ваш выбор: камень (к), ножницы (н), бумага (б)')

    # Главный цикл игры, позволяет играть несколько раз
    while True:
        # Получение ввода от пользователя
        user_input = input('Ваш выбор: ').strip().lower()  # Убираем лишние пробелы и приводим к нижнему регистру
        user_choice = choices.get(user_input)  # Находим полный вариант на основе ввода

        # Проверяем, корректно ли введен выбор пользователя
        if not user_choice:
            # Если введенное значение не найдено в словаре, выводим сообщение об ошибке
            print('Неверный ввод. Попробуйте еще раз (камень, ножницы, бумага, к, н, б).')
            continue  # Возвращаемся в начало цикла

        # Генерируем случайный выбор компьютера
        computer_choice = random.choice(list(rules.keys()))  # Компьютер выбирает случайное значение из ключей правил
        print(f'Ваш выбор: {user_choice}')  # Печатаем выбор пользователя
        print(f'Выбор компьютера: {computer_choice}')  # Печатаем выбор компьютера

        # Логика определения победителя
        if user_choice == computer_choice:
            # Если выборы совпадают, это ничья
            print('Ничья!')
        elif rules[user_choice] == computer_choice:
            # Если выбор пользователя побеждает выбор компьютера, пользователь выигрывает
            print('Вы выиграли!')
        else:
            # Во всех остальных случаях выигрывает компьютер
            print('Компьютер выиграл!')

        # Предложение сыграть ещё раз
        play_again = input('Хотите сыграть еще раз? (да/нет): ').strip().lower()  # Убираем пробелы и приводим к нижнему регистру
        if play_again not in {'да', 'д'}:
            # Если пользователь вводит не "да" или "д", игра завершается
            print('Спасибо за игру!')
            break  # Прерываем цикл и выходим из программы

# Точка входа в программу
if __name__ == '__main__':
    rock_paper_scissors()  # Запуск функции игры
