# Модуль mocks.py

## Обзор

Модуль содержит моки (заглушки) для различных провайдеров, используемых в проекте `hypotez`. Эти моки применяются в юнит-тестах для имитации поведения реальных провайдеров, таких как асинхронные и генераторные провайдеры, а также для эмуляции различных сценариев, включая ошибки и исключения.

## Подробней

Этот модуль предоставляет набор классов, которые наследуются от базовых классов провайдеров (`AbstractProvider`, `AsyncProvider`, `AsyncGeneratorProvider`) и переопределяют их методы для возврата предопределенных значений или вызова исключений. Это позволяет тестировать различные аспекты системы, не полагаясь на внешние сервисы и их доступность. Моки позволяют изолировать тестируемые компоненты и упростить проверку корректности их работы в различных ситуациях.

## Классы

### `ProviderMock`

**Описание**: Мок для обычного (синхронного) провайдера.

**Принцип работы**:
Этот класс наследуется от `AbstractProvider` и переопределяет метод `create_completion` для возврата статической строки "Mock" в виде генератора. Используется для имитации успешного ответа от провайдера.

**Методы**:

- `create_completion`:
    ```python
    @classmethod
    def create_completion(
        cls, model, messages, stream, **kwargs
    ):
        """
        Генерирует последовательность, содержащую строку "Mock".

        Args:
            model: Модель для генерации (не используется).
            messages: Сообщения для генерации (не используются).
            stream: Флаг стриминга (не используется).
            **kwargs: Дополнительные аргументы (не используются).

        Yields:
            str: Строка "Mock".
        """
    ...
    ```

### `AsyncProviderMock`

**Описание**: Мок для асинхронного провайдера.

**Принцип работы**:
Этот класс наследуется от `AsyncProvider` и переопределяет метод `create_async` для возврата статической строки "Mock" в виде корутины. Используется для имитации успешного асинхронного ответа от провайдера.

**Методы**:

- `create_async`:
    ```python
    @classmethod
    async def create_async(
        cls, model, messages, **kwargs
    ):
        """
        Асинхронно возвращает строку "Mock".

        Args:
            model: Модель для генерации (не используется).
            messages: Сообщения для генерации (не используются).
            **kwargs: Дополнительные аргументы (не используются).

        Returns:
            str: Строка "Mock".
        """
    ...
    ```

### `AsyncGeneratorProviderMock`

**Описание**: Мок для асинхронного провайдера-генератора.

**Принцип работы**:
Этот класс наследуется от `AsyncGeneratorProvider` и переопределяет метод `create_async_generator` для возврата статической строки "Mock" в виде асинхронного генератора. Используется для имитации успешного ответа от асинхронного провайдера, возвращающего результаты по частям.

**Методы**:

- `create_async_generator`:
    ```python
    @classmethod
    async def create_async_generator(
        cls, model, messages, stream, **kwargs
    ):
        """
        Асинхронно генерирует последовательность, содержащую строку "Mock".

        Args:
            model: Модель для генерации (не используется).
            messages: Сообщения для генерации (не используются).
            stream: Флаг стриминга (не используется).
            **kwargs: Дополнительные аргументы (не используются).

        Yields:
            str: Строка "Mock".
        """
    ...
    ```

### `ModelProviderMock`

**Описание**: Мок провайдера, возвращающего имя модели.

**Принцип работы**:
Этот класс наследуется от `AbstractProvider` и переопределяет метод `create_completion` для возврата имени модели, переданного в качестве аргумента. Используется для проверки, что модель правильно передается в провайдер.

**Методы**:

- `create_completion`:
    ```python
    @classmethod
    def create_completion(
        cls, model, messages, stream, **kwargs
    ):
        """
        Генерирует последовательность, содержащую имя модели.

        Args:
            model: Модель для генерации.
            messages: Сообщения для генерации (не используются).
            stream: Флаг стриминга (не используется).
            **kwargs: Дополнительные аргументы (не используются).

        Yields:
            str: Имя модели.
        """
    ...
    ```

### `YieldProviderMock`

**Описание**: Мок асинхронного провайдера-генератора, возвращающего содержимое сообщений.

**Принцип работы**:
Этот класс наследуется от `AsyncGeneratorProvider` и переопределяет метод `create_async_generator` для возврата содержимого каждого сообщения из списка `messages`. Используется для имитации провайдера, возвращающего ответы на основе входных сообщений.

**Методы**:

- `create_async_generator`:
    ```python
    @classmethod
    async def create_async_generator(
        cls, model, messages, stream, **kwargs
    ):
        """
        Асинхронно генерирует последовательность, содержащую содержимое каждого сообщения.

        Args:
            model: Модель для генерации (не используется).
            messages: Список сообщений, каждое из которых является словарем с ключом "content".
            stream: Флаг стриминга (не используется).
            **kwargs: Дополнительные аргументы (не используются).

        Yields:
            str: Содержимое каждого сообщения.
        """
    ...
    ```

### `YieldImageResponseProviderMock`

**Описание**: Мок асинхронного провайдера-генератора, возвращающего `ImageResponse`.

**Принцип работы**:
Этот класс наследуется от `AsyncGeneratorProvider` и переопределяет метод `create_async_generator` для возврата объекта `ImageResponse`, содержащего prompt и пустую строку. Используется для имитации провайдера, генерирующего изображения.

**Методы**:

- `create_async_generator`:
    ```python
    @classmethod
    async def create_async_generator(
        cls, model, messages, stream, prompt: str, **kwargs
    ):
        """
        Асинхронно генерирует последовательность, содержащую объект ImageResponse.

        Args:
            model: Модель для генерации (не используется).
            messages: Сообщения для генерации (не используются).
            stream: Флаг стриминга (не используется).
            prompt (str): Промпт для генерации изображения.
            **kwargs: Дополнительные аргументы (не используются).

        Yields:
            ImageResponse: Объект ImageResponse с промптом и пустой строкой.
        """
    ...
    ```

### `MissingAuthProviderMock`

**Описание**: Мок провайдера, вызывающего исключение `MissingAuthError`.

**Принцип работы**:
Этот класс наследуется от `AbstractProvider` и переопределяет метод `create_completion` для вызова исключения `MissingAuthError`. Используется для имитации ситуации, когда для работы с провайдером требуется аутентификация, но она не предоставлена.

**Методы**:

- `create_completion`:
    ```python
    @classmethod
    def create_completion(
        cls, model, messages, stream, **kwargs
    ):
        """
        Вызывает исключение MissingAuthError.

        Args:
            model: Модель для генерации (не используется).
            messages: Сообщения для генерации (не используются).
            stream: Флаг стриминга (не используется).
            **kwargs: Дополнительные аргументы (не используются).

        Raises:
            MissingAuthError: Всегда вызывается.
        """
    ...
    ```

### `RaiseExceptionProviderMock`

**Описание**: Мок провайдера, вызывающего исключение `RuntimeError`.

**Принцип работы**:
Этот класс наследуется от `AbstractProvider` и переопределяет метод `create_completion` для вызова исключения `RuntimeError`. Используется для имитации ситуации, когда во время работы провайдера происходит необработанная ошибка.

**Методы**:

- `create_completion`:
    ```python
    @classmethod
    def create_completion(
        cls, model, messages, stream, **kwargs
    ):
        """
        Вызывает исключение RuntimeError.

        Args:
            model: Модель для генерации (не используется).
            messages: Сообщения для генерации (не используются).
            stream: Флаг стриминга (не используется).
            **kwargs: Дополнительные аргументы (не используются).

        Raises:
            RuntimeError: Всегда вызывается.
        """
    ...
    ```

### `AsyncRaiseExceptionProviderMock`

**Описание**: Мок асинхронного провайдера-генератора, вызывающего исключение `RuntimeError`.

**Принцип работы**:
Этот класс наследуется от `AsyncGeneratorProvider` и переопределяет метод `create_async_generator` для вызова исключения `RuntimeError`. Используется для имитации ситуации, когда во время работы асинхронного провайдера происходит необработанная ошибка.

**Методы**:

- `create_async_generator`:
    ```python
    @classmethod
    async def create_async_generator(
        cls, model, messages, stream, **kwargs
    ):
        """
        Асинхронно вызывает исключение RuntimeError.

        Args:
            model: Модель для генерации (не используется).
            messages: Сообщения для генерации (не используются).
            stream: Флаг стриминга (не используется).
            **kwargs: Дополнительные аргументы (не используются).

        Raises:
            RuntimeError: Всегда вызывается.
        """
    ...
    ```

### `YieldNoneProviderMock`

**Описание**: Мок асинхронного провайдера-генератора, возвращающего `None`.

**Принцип работы**:
Этот класс наследуется от `AsyncGeneratorProvider` и переопределяет метод `create_async_generator` для возврата значения `None`. Используется для имитации ситуации, когда провайдер не возвращает никаких данных.

**Методы**:

- `create_async_generator`:
    ```python
    @classmethod
    async def create_async_generator(
        cls, model, messages, stream, **kwargs
    ):
        """
        Асинхронно генерирует последовательность, содержащую None.

        Args:
            model: Модель для генерации (не используется).
            messages: Сообщения для генерации (не используются).
            stream: Флаг стриминга (не используется).
            **kwargs: Дополнительные аргументы (не используются).

        Yields:
            None: Всегда возвращает None.
        """
    ...
    ```