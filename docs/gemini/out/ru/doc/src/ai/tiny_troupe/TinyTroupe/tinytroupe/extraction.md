# Модуль extraction

## Обзор

Этот модуль предоставляет инструменты для извлечения структурированных данных из элементов TinyTroupe, таких как агенты и миры. Он включает механизмы для сокращения извлеченных данных до более компактной формы и экспорта артефактов из элементов TinyTroupe.  Модуль демонстрирует разницу между агентами-симуляциями и помощниками на основе ИИ, которые не предназначены для интроспекции таким образом.

## Классы

### `ResultsExtractor`

**Описание**: Класс для извлечения результатов из агентов и миров.

**Методы**

#### `extract_results_from_agent`

**Описание**: Извлекает результаты из объекта `TinyPerson`.

**Параметры**
- `tinyperson` (TinyPerson): Экземпляр `TinyPerson`, для которого извлекаются результаты.
- `extraction_objective` (str): Цель извлечения.
- `situation` (str): Ситуация, которую нужно учитывать.
- `fields` (list, optional): Список полей для извлечения. Если `None`, экстрактор сам определит названия. По умолчанию `None`.
- `verbose` (bool, optional): Выводить ли отладочные сообщения. По умолчанию `False`.

**Возвращает**
- `dict | None`: Результаты извлечения в виде словаря или `None`, если произошла ошибка.

#### `extract_results_from_world`

**Описание**: Извлекает результаты из объекта `TinyWorld`.

**Параметры**
- `tinyworld` (TinyWorld): Экземпляр `TinyWorld`, для которого извлекаются результаты.
- `extraction_objective` (str): Цель извлечения.
- `situation` (str): Ситуация, которую нужно учитывать.
- `fields` (list, optional): Список полей для извлечения. Если `None`, экстрактор сам определит названия. По умолчанию `None`.
- `verbose` (bool, optional): Выводить ли отладочные сообщения. По умолчанию `False`.

**Возвращает**
- `dict | None`: Результаты извлечения в виде словаря или `None`, если произошла ошибка.

#### `save_as_json`

**Описание**: Сохраняет последние результаты извлечения в файл JSON.

**Параметры**
- `filename` (str): Имя файла для сохранения.
- `verbose` (bool, optional): Выводить ли отладочные сообщения. По умолчанию `False`.


### `ResultsReducer`

**Описание**: Класс для сокращения результатов извлечения.

**Методы**

#### `add_reduction_rule`

**Описание**: Добавляет правило сокращения.

**Параметры**
- `trigger` (str): Триггер для правила (например, тип стимула).
- `func` (callable): Функция, которая будет применена к данным при срабатывании триггера.

**Вызывает исключения**
- `Exception`: Если правило с данным триггером уже существует.

#### `reduce_agent`

**Описание**: Применяет правила сокращения к данным агента.

**Параметры**
- `agent` (TinyPerson): Объект агента.

**Возвращает**
- `list`: Список сокращенных результатов.

#### `reduce_agent_to_dataframe`

**Описание**: Преобразует результаты сокращения в DataFrame.

**Параметры**
- `agent` (TinyPerson): Объект агента.
- `column_names` (list, optional): Список имен столбцов для DataFrame.

**Возвращает**
- `pd.DataFrame`: DataFrame с результатами сокращения.


### `ArtifactExporter`

**Описание**: Класс для экспорта артефактов.

**Методы**

#### `export`

**Описание**: Экспортирует артефакты в различные форматы (JSON, TXT, DOCX).

**Параметры**
- `artifact_name` (str): Имя артефакта.
- `artifact_data` (Union[dict, str]): Данные для экспорта.
- `content_type` (str): Тип содержимого.
- `content_format` (str, optional): Формат содержимого. По умолчанию `None`.
- `target_format` (str): Формат для экспорта (json, txt, docx и т.д.).
- `verbose` (bool, optional): Выводить ли отладочные сообщения. По умолчанию `False`.

**Вызывает исключения**
- `ValueError`: Если данные не являются строкой или словарем.
- `ValueError`: Для неподдерживаемых форматов.

#### `_export_as_txt`

#### `_export_as_json`

#### `_export_as_docx`

**Описание**: Вспомогательные методы для экспорта данных в разные форматы.


### `Normalizer`

**Описание**: Класс для нормализации текстовых элементов.

**Методы**

#### `__init__`

**Описание**: Инициализирует объект.

**Параметры**
- `elements` (list): Список элементов для нормализации.
- `n` (int): Количество нормализованных элементов для вывода.
- `verbose` (bool, optional): Выводить ли отладочные сообщения. По умолчанию `False`.


#### `normalize`

**Описание**: Нормализует элемент или список элементов.

**Параметры**
- `element_or_elements` (Union[str, List[str]]): Элемент или список элементов для нормализации.


**Возвращает**
- `str` или `list`: Нормализованный элемент или список элементов.


## Функции

(Здесь будут описаны все функции модуля, если они есть)

```