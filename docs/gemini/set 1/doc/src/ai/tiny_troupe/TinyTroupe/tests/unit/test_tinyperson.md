# Модуль `test_tinyperson.py`

## Обзор

Этот модуль содержит набор тестов для проверки работы класса `TinyPerson` из пакета `tinytroupe`. Тесты покрывают различные аспекты поведения агента, включая обработку входящих сообщений, выполнение действий, взаимодействие с другими агентами и сохранение/загрузку состояния.

## Функции

### `test_act`

**Описание**: Тестирует функцию `agent.listen_and_act`. Проверяет, что агент выполняет действия после получения входящих данных, возвращает список действий, содержащий как минимум одно действие типа "TALK" и завершается действием "DONE".

**Параметры**:
- `setup`:  (Объект) Объект, предоставляющий необходимые ресурсы для выполнения теста.


**Вызывает исключения**:
- `AssertionError`: Возникает, если количество действий меньше 1, отсутствует действие "TALK" или действие "DONE" в конце.


### `test_listen`

**Описание**: Тестирует функцию `agent.listen`. Проверяет, что агент обрабатывает входящее сообщение, сохраняет его в списке текущих сообщений и обновляет эпизодическую память.

**Параметры**:
- `setup`:  (Объект) Объект, предоставляющий необходимые ресурсы для выполнения теста.


**Вызывает исключения**:
- `AssertionError`: Возникает, если список текущих сообщений пуст, последнее сообщение не имеет роли "user" или не содержит стимул типа "CONVERSATION" с корректным содержанием.


### `test_define`

**Описание**: Тестирует функцию `agent.define`. Проверяет, что агент может определить новое значение в конфигурации и обновить соответствующую часть запроса.

**Параметры**:
- `setup`:  (Объект) Объект, предоставляющий необходимые ресурсы для выполнения теста.


**Вызывает исключения**:
- `AssertionError`: Возникает, если значение конфигурации не соответствует ожидаемому, или запрос не обновлен.


### `test_define_several`

**Описание**: Тестирует функцию `agent.define_several`. Проверяет, что агент может определить несколько значений для группы в конфигурации.

**Параметры**:
- `setup`:  (Объект) Объект, предоставляющий необходимые ресурсы для выполнения теста.


**Вызывает исключения**:
- `AssertionError`: Возникает, если определенные значения не найдены в конфигурации.


### `test_socialize`

**Описание**: Тестирует функцию взаимодействия с другим агентом (`agent.make_agent_accessible`, `agent.listen`, `agent.act`). Проверяет, что агент может взаимодействовать с другим агентом, возвращает список действий, содержащий как минимум одно действие типа "TALK" и упоминает имя другого агента.

**Параметры**:
- `setup`:  (Объект) Объект, предоставляющий необходимые ресурсы для выполнения теста.

**Вызывает исключения**:
- `AssertionError`: Возникает, если список действий пуст, отсутствует действие "TALK" или отсутствует упоминание имени другого агента в содержании действия.


### `test_see`

**Описание**: Тестирует функцию восприятия визуального стимула (`agent.see`). Проверяет, что агент обрабатывает визуальное сообщение, выполняет действие типа "THINK" и упоминает содержащиеся в сообщении ключевые слова.

**Параметры**:
- `setup`:  (Объект) Объект, предоставляющий необходимые ресурсы для выполнения теста.

**Вызывает исключения**:
- `AssertionError`: Возникает, если список действий пуст, отсутствует действие "THINK" или отсутствует упоминание ключевых слов в содержании действия.


### `test_think`

**Описание**: Тестирует функцию `agent.think`. Проверяет, что агент может обрабатывать внутренний мыслительный процесс, выполняет действие типа "TALK" и упоминает ключевые слова, связанные с мыслями.

**Параметры**:
- `setup`:  (Объект) Объект, предоставляющий необходимые ресурсы для выполнения теста.

**Вызывает исключения**:
- `AssertionError`: Возникает, если список действий пуст, отсутствует действие "TALK" или отсутствует упоминание ключевых слов в содержании действия.


### `test_internalize_goal`

**Описание**: Тестирует функцию `agent.internalize_goal`. Проверяет, что агент может определить цель, выполняет действие типа "SEARCH" и упоминает ключевые слова, связанные с целью.

**Параметры**:
- `setup`:  (Объект) Объект, предоставляющий необходимые ресурсы для выполнения теста.

**Вызывает исключения**:
- `AssertionError`: Возникает, если список действий пуст, отсутствует действие "SEARCH" или отсутствует упоминание ключевых слов в содержании действия.


### `test_move_to`

**Описание**: Тестирует функцию перемещения агента в новое местоположение (`agent.move_to`). Проверяет, что агент обновляет свою текущую локацию и контекст.

**Параметры**:
- `setup`:  (Объект) Объект, предоставляющий необходимые ресурсы для выполнения теста.


**Вызывает исключения**:
- `AssertionError`: Возникает, если текущая локация или контекст не соответствуют ожидаемым значениям.


### `test_change_context`

**Описание**: Тестирует функцию изменения контекста агента (`agent.change_context`). Проверяет, что агент обновляет свой текущий контекст.

**Параметры**:
- `setup`:  (Объект) Объект, предоставляющий необходимые ресурсы для выполнения теста.


**Вызывает исключения**:
- `AssertionError`: Возникает, если текущий контекст не соответствует ожидаемым значениям.


### `test_save_spec`

**Описание**: Тестирует функцию сохранения спецификации агента (`agent.save_spec`) и последующей загрузки (`TinyPerson.load_spec`). Проверяет сохранение и загрузку объекта агента.

**Параметры**:
- `setup`:  (Объект) Объект, предоставляющий необходимые ресурсы для выполнения теста.


**Вызывает исключения**:
- `AssertionError`: Возникает, если файл не был сохранен, загруженный агент имеет неверное имя или конфигурация загруженного агента отличается от оригинальной (кроме имени).