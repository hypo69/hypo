# Модуль Discord-бота

## Обзор

Данный модуль реализует Discord-бота, обеспечивающего взаимодействие с пользователем, включая обработку голосовых команд, обучение и тестирование модели машинного обучения, предоставление инструкций и обратной связи.  Бот поддерживает инициализацию, обработку сообщений, распознавание речи, преобразование текста в речь, а также взаимодействие с голосовыми каналами.

## Оглавление

* [Основные функции и команды бота](#Основные-функции-и-команды-бота)
* [Обработка сообщений](#Обработка-сообщений)
* [Распознавание речи](#Распознавание-речи)
* [Текст в речь](#Текст-в-речь)
* [Логирование](#Логирование)
* [Основные модули и библиотеки](#Основные-модули-и-библиотеки)
* [Запуск бота](#Запуск-бота)
* [Заключение](#Заключение)


## Основные функции и команды бота

Этот раздел описывает основные функции и команды, предоставляемые ботом.

### `!hi`

**Описание**: Отправляет приветственное сообщение.

### `!join`

**Описание**: Подключает бота к голосовому каналу, в котором находится пользователь.


### `!leave`

**Описание**: Отключает бота от голосового канала.


### `!train`

**Описание**: Обучает модель на предоставленных данных. Можно передать данные в виде файла или текста.

**Параметры**:

* `data` (str | Path): Данные для обучения модели. Может быть строкой или путем к файлу.
* `model_name` (str, optional): Имя модели для обучения. По умолчанию `None`.


### `!test`

**Описание**: Тестирует модель на предоставленных данных.


### `!archive`

**Описание**: Архивирует файлы в указанной директории.


### `!select_dataset`

**Описание**: Выбирает датасет для обучения модели.

**Параметры**:

* `dataset_name` (str): Название датасета для выбора.


### `!instruction`

**Описание**: Отправляет инструкции из внешнего файла.

**Параметры**:

* `file_path` (str): Путь к файлу с инструкциями.

### `!correct`

**Описание**: Позволяет пользователю исправить предыдущее сообщение бота.


### `!feedback`

**Описание**: Позволяет пользователю отправить обратную связь о работе бота.

**Параметры**:

* `feedback_text` (str): Текст обратной связи.


### `!getfile`

**Описание**: Отправляет файл из указанного пути.


## Обработка сообщений

Бот обрабатывает входящие сообщения, игнорируя свои собственные. Если пользователь отправляет аудиофайл, бот распознаёт речь и отправляет текст в ответ. Если пользователь находится в голосовом канале, бот преобразует текст в речь и воспроизводит его.

## Распознавание речи

Функция `recognizer` скачивает аудиофайл, конвертирует его в WAV и распознает речь с помощью Google Speech Recognition.


## Текст в речь

Функция `text_to_speech_and_play` преобразует текст в речь с помощью библиотеки `gTTS` и воспроизводит его в голосовом канале.

## Логирование

Используется модуль `logger` для логирования событий и ошибок.

## Основные модули и библиотеки

- `discord.py`: Библиотека для создания Discord-ботов.
- `speech_recognition`: Для распознавания речи.
- `pydub`: Для конвертации аудиофайлов.
- `gtts`: Для преобразования текста в речь.
- `requests`: Для скачивания файлов.
- `pathlib`: Для работы с путями файлов.
- `tempfile`: Для создания временных файлов.
- `asyncio`: Для асинхронного выполнения задач.


## Запуск бота

Бот запускается с использованием токена, хранящегося в переменной `gs.credentials.discord.bot_token`.

## Заключение

Этот модуль предоставляет функционал для создания интерактивного Discord-бота, позволяющего взаимодействовать с пользователями, обрабатывать голосовые команды, и осуществлять различные действия, включая обучение и тестирование моделей машинного обучения.