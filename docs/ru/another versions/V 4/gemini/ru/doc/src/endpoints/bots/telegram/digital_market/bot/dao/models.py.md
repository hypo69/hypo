# Модуль `models.py`

## Обзор

Модуль `models.py` содержит определения классов моделей базы данных, используемых в Telegram-боте для цифрового рынка. Он включает модели для пользователей, категорий, продуктов и покупок, а также устанавливает связи между ними с использованием SQLAlchemy ORM.

## Подробней

Этот модуль определяет структуру таблиц базы данных, необходимых для функционирования бота. Он использует SQLAlchemy для определения моделей, что позволяет взаимодействовать с базой данных на объектно-ориентированном уровне. Каждая модель представляет собой таблицу в базе данных и определяет её структуру и связи с другими таблицами.

## Классы

### `User`

**Описание**: Модель пользователя Telegram-бота.

**Атрибуты**:
- `telegram_id` (int): Уникальный идентификатор пользователя в Telegram.
- `username` (str | None): Имя пользователя в Telegram (может быть `None`).
- `first_name` (str | None): Имя пользователя (может быть `None`).
- `last_name` (str | None): Фамилия пользователя (может быть `None`).
- `purchases` (List['Purchase']): Список покупок, связанных с пользователем.

**Методы**:
- `__repr__`: Возвращает строковое представление объекта `User`.

**Примеры**:

```python
# Пример создания экземпляра класса User
user = User(telegram_id=123456789, username='testuser', first_name='Test', last_name='User')
print(user)
```

### `Category`

**Описание**: Модель категории продуктов.

**Атрибуты**:
- `category_name` (str): Название категории.
- `products` (List["Product"]): Список продуктов, связанных с категорией.

**Методы**:
- `__repr__`: Возвращает строковое представление объекта `Category`.

**Примеры**:

```python
# Пример создания экземпляра класса Category
category = Category(category_name='Electronics')
print(category)
```

### `Product`

**Описание**: Модель продукта.

**Атрибуты**:
- `name` (str): Название продукта.
- `description` (str): Описание продукта.
- `price` (int): Цена продукта.
- `file_id` (str | None): Идентификатор файла, связанного с продуктом (может быть `None`).
- `category_id` (int): Идентификатор категории, к которой принадлежит продукт.
- `hidden_content` (str): Скрытое содержимое продукта.
- `category` (Category): Категория, к которой принадлежит продукт.
- `purchases` (List['Purchase']): Список покупок, связанных с продуктом.

**Методы**:
- `__repr__`: Возвращает строковое представление объекта `Product`.

**Примеры**:

```python
# Пример создания экземпляра класса Product
product = Product(name='Example Product', description='This is an example product', price=100, category_id=1, hidden_content='hidden')
print(product)
```

### `Purchase`

**Описание**: Модель покупки.

**Атрибуты**:
- `user_id` (int): Идентификатор пользователя, совершившего покупку.
- `product_id` (int): Идентификатор приобретенного продукта.
- `price` (int): Цена покупки.
- `payment_type` (str): Тип платежа.
- `payment_id` (str): Уникальный идентификатор платежа.
- `user` (User): Пользователь, совершивший покупку.
- `product` (Product): Приобретенный продукт.

**Методы**:
- `__repr__`: Возвращает строковое представление объекта `Purchase`.

**Примеры**:

```python
# Пример создания экземпляра класса Purchase
purchase = Purchase(user_id=1, product_id=1, price=100, payment_type='card', payment_id='unique_payment_id')
print(purchase)
```