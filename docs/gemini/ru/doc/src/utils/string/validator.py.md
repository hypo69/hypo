# Модуль валидации строк

## Обзор

Модуль `validator.py` предоставляет инструменты для валидации строк на соответствие определенным критериям и форматам. Он включает в себя класс `ProductFieldsValidator` с набором статических методов для проверки различных типов данных, таких как цены, вес, артикулы и URL-адреса. Валидация может включать проверку наличия определенных символов, длины строки, соответствия регулярным выражениям и другие проверки.

## Подробней

Модуль предназначен для обеспечения надежной проверки данных, введенных пользователем или полученных из внешних источников, чтобы гарантировать их соответствие ожидаемым форматам и требованиям. Класс `ProductFieldsValidator` содержит статические методы, которые можно использовать для валидации полей продукта, таких как цена, вес, артикул и URL.

## Классы

### `ProductFieldsValidator`

**Описание**: Класс `ProductFieldsValidator` предоставляет статические методы для валидации различных полей продукта, таких как цена, вес, артикул и URL-адрес.

**Принцип работы**: Класс содержит набор статических методов, каждый из которых выполняет определенную проверку на соответствие заданным критериям. Методы используют регулярные выражения и другие техники для проверки форматов и значений строк.

**Методы**:

- `validate_price(price: str) -> bool`: Валидирует строку, представляющую цену.
- `validate_weight(weight: str) -> bool`: Валидирует строку, представляющую вес.
- `validate_sku(sku: str) -> bool`: Валидирует строку, представляющую артикул (SKU).
- `validate_url(url: str) -> bool`: Валидирует строку, представляющую URL-адрес.
- `isint(s: str) -> bool`: Проверяет, является ли строка целым числом.

## Функции

### `validate_price`

```python
    @staticmethod
    def validate_price(price: str) -> bool:
        """
        Валидация цены
        """
        ...
```

**Назначение**: Валидирует строку, представляющую цену, приводя её к числовому формату.

**Параметры**:

- `price` (str): Строка, представляющая цену.

**Возвращает**:

- `bool`: `True`, если строка успешно преобразована и представляет собой допустимую цену, иначе `None`.

**Как работает функция**:

1.  **Проверка на пустоту**: Проверяет, является ли строка `price` пустой. Если да, возвращает `None`.
2.  **Очистка строки**: Использует регулярное выражение `Ptrn.clear_price` для удаления всех символов, кроме цифр и разделителей.
3.  **Замена разделителя**: Заменяет запятую на точку для соответствия формату чисел с плавающей точкой.
4.  **Преобразование в число**: Пытается преобразовать строку в число с плавающей точкой.
5.  **Обработка исключений**: Если преобразование не удалось, возвращает `None`.
6.  **Возврат результата**: Если преобразование прошло успешно, возвращает `True`.

**ASCII flowchart**:

```
Проверка на пустоту (price)
│
├─── Да: Возврат None
│
└─── Нет: Очистка строки (Ptrn.clear_price)
    │
    Замена запятой на точку
    │
    Попытка преобразования в float
    │
    ├─── Успешно: Возврат True
    │
    └─── Ошибка: Возврат None
```

**Примеры**:

```python
price1 = "123,45"
result1 = ProductFieldsValidator.validate_price(price1)
print(f"Результат валидации '{price1}': {result1}")  # Вывод: Результат валидации '123,45': True

price2 = "abc"
result2 = ProductFieldsValidator.validate_price(price2)
print(f"Результат валидации '{price2}': {result2}")  # Вывод: Результат валидации 'abc': None

price3 = ""
result3 = ProductFieldsValidator.validate_price(price3)
print(f"Результат валидации '{price3}': {result3}")  # Вывод: Результат валидации '': None
```

### `validate_weight`

```python
    @staticmethod
    def validate_weight(weight: str) -> bool:
        """
        Валидация веса
        """
        ...
```

**Назначение**: Валидирует строку, представляющую вес, приводя её к числовому формату.

**Параметры**:

-   `weight` (str): Строка, представляющая вес.

**Возвращает**:

-   `bool`: `True`, если строка успешно преобразована и представляет собой допустимый вес, иначе `None`.

**Как работает функция**:

1.  **Проверка на пустоту**: Проверяет, является ли строка `weight` пустой. Если да, возвращает `None`.
2.  **Очистка строки**: Использует регулярное выражение `Ptrn.clear_number` для удаления всех символов, кроме цифр и разделителей.
3.  **Замена разделителя**: Заменяет запятую на точку для соответствия формату чисел с плавающей точкой.
4.  **Преобразование в число**: Пытается преобразовать строку в число с плавающей точкой.
5.  **Обработка исключений**: Если преобразование не удалось, возвращает `None`.
6.  **Возврат результата**: Если преобразование прошло успешно, возвращает `True`.

**ASCII flowchart**:

```
Проверка на пустоту (weight)
│
├─── Да: Возврат None
│
└─── Нет: Очистка строки (Ptrn.clear_number)
    │
    Замена запятой на точку
    │
    Попытка преобразования в float
    │
    ├─── Успешно: Возврат True
    │
    └─── Ошибка: Возврат None
```

**Примеры**:

```python
weight1 = "123,45"
result1 = ProductFieldsValidator.validate_weight(weight1)
print(f"Результат валидации '{weight1}': {result1}")  # Вывод: Результат валидации '123,45': True

weight2 = "abc"
result2 = ProductFieldsValidator.validate_weight(weight2)
print(f"Результат валидации '{weight2}': {result2}")  # Вывод: Результат валидации 'abc': None

weight3 = ""
result3 = ProductFieldsValidator.validate_weight(weight3)
print(f"Результат валидации '{weight3}': {result3}")  # Вывод: Результат валидации '': None
```

### `validate_sku`

```python
    @staticmethod
    def validate_sku(sku: str) -> bool:
        """
        Валидация артикула
        """
        ...
```

**Назначение**: Валидирует строку, представляющую артикул (SKU), проверяя её длину и специальные символы.

**Параметры**:

-   `sku` (str): Строка, представляющая артикул.

**Возвращает**:

-   `bool`: `True`, если строка соответствует требованиям к артикулу, иначе `None`.

**Как работает функция**:

1.  **Проверка на пустоту**: Проверяет, является ли строка `sku` пустой. Если да, возвращает `None`.
2.  **Удаление специальных символов**: Использует `StringFormatter.remove_special_characters` для удаления специальных символов из строки.
3.  **Удаление переносов строк**: Использует `StringFormatter.remove_line_breaks` для удаления переносов строк из строки.
4.  **Удаление пробелов в начале и конце строки**: Удаляет пробелы в начале и конце строки.
5.  **Проверка длины**: Проверяет, что длина строки больше 3 символов.
6.  **Возврат результата**: Если все проверки пройдены успешно, возвращает `True`, иначе `None`.

**ASCII flowchart**:

```
Проверка на пустоту (sku)
│
├─── Да: Возврат None
│
└─── Нет: Удаление специальных символов
    │
    Удаление переносов строк
    │
    Удаление пробелов в начале и конце строки
    │
    Проверка длины (> 3)
    │
    ├─── Да: Возврат True
    │
    └─── Нет: Возврат None
```

**Примеры**:

```python
sku1 = "ABC-123"
result1 = ProductFieldsValidator.validate_sku(sku1)
print(f"Результат валидации '{sku1}': {result1}")  # Вывод: Результат валидации 'ABC-123': True

sku2 = "AB"
result2 = ProductFieldsValidator.validate_sku(sku2)
print(f"Результат валидации '{sku2}': {result2}")  # Вывод: Результат валидации 'AB': None

sku3 = ""
result3 = ProductFieldsValidator.validate_sku(sku3)
print(f"Результат валидации '{sku3}': {result3}")  # Вывод: Результат валидации '': None
```

### `validate_url`

```python
    @staticmethod
    def validate_url(url: str) -> bool:
        """
        Валидация URL
        """
        ...
```

**Назначение**: Валидирует строку, представляющую URL-адрес, проверяя его формат и структуру.

**Параметры**:

-   `url` (str): Строка, представляющая URL-адрес.

**Возвращает**:

-   `bool`: `True`, если строка соответствует требованиям к URL-адресу, иначе `None`.

**Как работает функция**:

1.  **Проверка на пустоту**: Проверяет, является ли строка `url` пустой. Если да, возвращает `None`.
2.  **Удаление пробелов в начале и конце строки**: Удаляет пробелы в начале и конце строки.
3.  **Добавление префикса "http://"**: Если URL не начинается с "http", добавляет "http://".
4.  **Разбор URL**: Использует `urlparse` для разбора URL-адреса.
5.  **Проверка структуры**: Проверяет наличие `netloc` (доменное имя) и `scheme` (протокол).
6.  **Возврат результата**: Если все проверки пройдены успешно, возвращает `True`, иначе `None`.

**ASCII flowchart**:

```
Проверка на пустоту (url)
│
├─── Да: Возврат None
│
└─── Нет: Удаление пробелов в начале и конце строки
    │
    Добавление префикса "http://" (если отсутствует)
    │
    Разбор URL (urlparse)
    │
    Проверка наличия netloc и scheme
    │
    ├─── Да: Возврат True
    │
    └─── Нет: Возврат None
```

**Примеры**:

```python
url1 = "example.com"
result1 = ProductFieldsValidator.validate_url(url1)
print(f"Результат валидации '{url1}': {result1}")  # Вывод: Результат валидации 'example.com': True

url2 = "http://example.com"
result2 = ProductFieldsValidator.validate_url(url2)
print(f"Результат валидации '{url2}': {result2}")  # Вывод: Результат валидации 'http://example.com': True

url3 = "invalid url"
result3 = ProductFieldsValidator.validate_url(url3)
print(f"Результат валидации '{url3}': {result3}")  # Вывод: Результат валидации 'invalid url': None

url4 = ""
result4 = ProductFieldsValidator.validate_url(url4)
print(f"Результат валидации '{url4}': {result4}")  # Вывод: Результат валидации '': None
```

### `isint`

```python
    @staticmethod
    def isint(s: str) -> bool:
        """
         [Function\'s description]\n
        Parameters : \n
            @param s : str  :  [description]\n
        Returns : \n
            @return bool  :  [description]\n
        """
        try:
            s = int(s)
            return True
        except Exception as ex:
            return
```

**Назначение**: Проверяет, может ли строка быть преобразована в целое число.

**Параметры**:

-   `s` (str): Строка для проверки.

**Возвращает**:

-   `bool`: `True`, если строка может быть преобразована в целое число, иначе `None`.

**Как работает функция**:

1.  **Попытка преобразования**: Пытается преобразовать строку `s` в целое число с помощью `int(s)`.
2.  **Обработка исключений**: Если преобразование не удалось (например, строка содержит нечисловые символы), перехватывает исключение `Exception` и возвращает `None`.
3.  **Возврат результата**: Если преобразование прошло успешно, возвращает `True`.

**ASCII flowchart**:

```
Попытка преобразования s в int
│
├─── Успешно: Возврат True
│
└─── Ошибка: Возврат None
```

**Примеры**:

```python
string1 = "123"
result1 = ProductFieldsValidator.isint(string1)
print(f"Результат проверки '{string1}': {result1}")  # Вывод: Результат проверки '123': True

string2 = "abc"
result2 = ProductFieldsValidator.isint(string2)
print(f"Результат проверки '{string2}': {result2}")  # Вывод: Результат проверки 'abc': None