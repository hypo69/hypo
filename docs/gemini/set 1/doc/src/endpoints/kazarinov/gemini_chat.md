# Модуль hypotez/src/endpoints/kazarinov/gemini_chat.py

## Обзор

Этот модуль содержит класс `KazarinovAI`, предназначенный для обработки задач обучения и диалогового взаимодействия с моделью Google Generative AI (Gemini) для проекта Kazarinov. Модуль предоставляет функции для обучения модели на наборах данных, получения ответов на вопросы и проведения диалогов. Он использует библиотеки для работы с файлами, JSON, выводом информации и логгированием.

## Классы

### `KazarinovAI`

**Описание**: Класс `KazarinovAI` управляет процессом обучения и генерацией диалогов для проекта Kazarinov, используя Google Generative AI.

**Атрибуты**:

- `api_key`: API ключ для доступа к Gemini. Получен из `gs.credentials.gemini.kazarinov`.
- `base_path`: Базовый путь к файлам с системными инструкциями и обучающими данными. Рассчитывается на основе `gs.path.google_drive / 'kazarinov'`.
- `system_instruction_list`: Список системных инструкций, полученных из файлов в `base_path`.
- `history_file`: Путь к файлу истории диалога (строка).
- `gemini_1`, `gemini_2`: Экземпляры класса `GoogleGenerativeAI` для работы с моделью Gemini.
- `timestamp`: Текущая временная метка.

**Методы**:

#### `__init__(self, system_instruction=None, generation_config={"response_mime_type": "text/plain"})`

**Описание**: Инициализирует экземпляр класса `KazarinovAI`.

**Параметры**:

- `system_instruction` (str, необязательно): Системная инструкция для модели. По умолчанию `None`.
- `generation_config` (dict | list[dict], необязательно): Параметры генерации. По умолчанию `{"response_mime_type": "text/plain"}`.

#### `train(self, train_files)`

**Описание**: Обучает модель с помощью списка обучающих файлов. Данные передаются частями заданного размера.

**Параметры**:

- `train_files` (list | str): Список или имя файла(ов) для обучения.


#### `question_answer(self)`

**Описание**: Обрабатывает процесс ответа на вопросы, используя предоставленные обучающие файлы.

**Параметры**:
- `train_files` (list | str): Список или имя файла(ов) с вопросами.

#### `dialog(self)`

**Описание**: Проводит диалог, используя предварительно определенные вопросы, перемешанные из разных языков.

#### `ask(self, q: str, no_log: bool = False, with_pretrain: bool = True) -> bool`

**Описание**: Задает вопрос модели.

**Параметры**:

- `q` (str): Вопрос для модели.
- `no_log` (bool, необязательно): Флаг, запрещающий логирование. По умолчанию `False`.
- `with_pretrain` (bool, необязательно): Флаг, определяющий использование предварительной подготовки. По умолчанию `True`.


### `chat()`

**Описание**: Инициализирует сеанс чата с ИИ-ассистентом Kazarinov.

**Описание**: Функция `chat()` запускает диалоговый сеанс с моделью Kazarinov, читая системные инструкции из файлов и обрабатывая ввод пользователя до завершения сеанса.

**Возможные исключения**:

- `Exception`: Возникает, если есть проблемы при чтении файлов системных инструкций.


## Функции

(Нет дополнительных функций кроме класса `KazarinovAI`)

## Модули

- `header`
- `time`
- `json`
- `random`
- `typing`
- `pathlib`
- `gs`
- `src.ai.openai`
- `src.ai.gemini`
- `src.utils.file`
- `src.utils.jjson`
- `src.utils.printer`
- `src.logger.logger`