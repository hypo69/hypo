# Модуль для логирования времени выполнения функций

## Обзор

Модуль содержит функции для измерения и логирования времени выполнения других функций. Он предоставляет обертки `log_time_async`, `log_time_yield` и `log_time`, которые позволяют измерить время выполнения переданной функции и добавить информацию о времени выполнения к результату функции (если результат есть).

## Подробнее

Этот модуль предоставляет удобные инструменты для профилирования времени выполнения различных частей кода. Он может быть использован для выявления узких мест в производительности и оптимизации кода. Модуль содержит три основные функции: `log_time_async` для асинхронных функций, `log_time_yield` для функций-генераторов и `log_time` для обычных синхронных функций.

## Функции

### `log_time_async`

```python
async def log_time_async(method: callable, **kwargs):
    """
    Измеряет время выполнения асинхронной функции и добавляет информацию о времени выполнения к результату.

    Args:
        method (callable): Асинхронная функция, время выполнения которой необходимо измерить.
        **kwargs: Произвольные именованные аргументы, которые передаются в функцию `method`.

    Returns:
        str: Результат выполнения функции `method` с добавленной информацией о времени выполнения в секундах.
             Если результат выполнения функции `method` равен `None`, возвращается только строка с информацией о времени выполнения.

    Как работает функция:
    1.  Запускает таймер `start`.
    2.  Вызывает асинхронную функцию `method` с переданными аргументами.
    3.  Останавливает таймер и вычисляет время выполнения.
    4.  Форматирует строку с информацией о времени выполнения.
    5.  Возвращает результат выполнения функции `method` с добавленной информацией о времени выполнения, если результат не равен `None`.
        В противном случае возвращает только строку с информацией о времени выполнения.

    ```
     Начало -> Измерение времени -> Вызов асинхронной функции
       |                        |
       ↓                        ↓
     Запуск таймера      Выполнение асинхронной функции `method`
       |                        |
       ↓                        ↓
     Остановка таймера   Получение результата
       |                        |
       ↓                        ↓
     Вычисление времени -> Форматирование -> Возврат результата + время
    ```

    Примеры:
    ```python
    async def my_async_function():
        await asyncio.sleep(1)
        return "Async result"

    async def main():
        result = await log_time_async(my_async_function)
        print(result)  # Вывод: Async result 1.01 secs (время может незначительно отличаться)

    asyncio.run(main())
    ```
    """
    ...
```

### `log_time_yield`

```python
def log_time_yield(method: callable, **kwargs):
    """
    Измеряет время выполнения функции-генератора и добавляет информацию о времени выполнения к результату.

    Args:
        method (callable): Функция-генератор, время выполнения которой необходимо измерить.
        **kwargs: Произвольные именованные аргументы, которые передаются в функцию `method`.

    Yields:
        str: Результат выполнения функции `method` с добавленной информацией о времени выполнения в секундах.

    Как работает функция:

    1.  Запускает таймер `start`.
    2.  Вызывает функцию-генератор `method` с переданными аргументами.
    3.  Итерируется по результатам генератора, возвращая каждый результат.
    4.  После завершения генератора останавливает таймер и вычисляет время выполнения.
    5.  Добавляет информацию о времени выполнения к последнему результату.

    ```
    Начало -> Измерение времени -> Вызов функции-генератора
       |                        |
       ↓                        ↓
    Запуск таймера      Выполнение функции-генератора `method`
       |                        |
       ↓                        ↓
    Итерация по результатам генератора -> Возврат результата
       |
       ↓
    Остановка таймера -> Вычисление времени -> Добавление времени к результату
    ```
    Примеры:
    ```python
    def my_generator():
        yield "Generator step 1"
        yield "Generator step 2"
        yield "Generator step 3"

    for result in log_time_yield(my_generator):
        print(result)
    # Вывод:
    # Generator step 1
    # Generator step 2
    # Generator step 3 0.0 secs (время может незначительно отличаться)
    ```
    """
    ...
```

### `log_time`

```python
def log_time(method: callable, **kwargs):
    """
    Измеряет время выполнения функции и добавляет информацию о времени выполнения к результату.

    Args:
        method (callable): Функция, время выполнения которой необходимо измерить.
        **kwargs: Произвольные именованные аргументы, которые передаются в функцию `method`.

    Returns:
        str: Результат выполнения функции `method` с добавленной информацией о времени выполнения в секундах.
             Если результат выполнения функции `method` равен `None`, возвращается только строка с информацией о времени выполнения.

    Как работает функция:

    1.  Запускает таймер `start`.
    2.  Вызывает функцию `method` с переданными аргументами.
    3.  Останавливает таймер и вычисляет время выполнения.
    4.  Форматирует строку с информацией о времени выполнения.
    5.  Возвращает результат выполнения функции `method` с добавленной информацией о времени выполнения, если результат не равен `None`.
        В противном случае возвращает только строку с информацией о времени выполнения.
    ```
     Начало -> Измерение времени -> Вызов функции
       |                        |
       ↓                        ↓
     Запуск таймера      Выполнение функции `method`
       |                        |
       ↓                        ↓
     Остановка таймера   Получение результата
       |                        |
       ↓                        ↓
     Вычисление времени -> Форматирование -> Возврат результата + время
    ```
    Примеры:
    ```python
    def my_function():
        time.sleep(1)
        return "Some result"

    result = log_time(my_function)
    print(result)  # Вывод: Some result 1.01 secs (время может незначительно отличаться)
    ```
    """
    ...