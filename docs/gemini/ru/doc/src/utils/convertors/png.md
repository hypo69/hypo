# Модуль hypotez/src/utils/convertors/png.py

## Обзор

Модуль `src.utils.convertors.png` предоставляет инструменты для преобразования и обработки текстовых данных в PNG-изображения с использованием библиотеки Pillow. Он позволяет генерировать изображения с заданным текстом, шрифтом, размерами и другими параметрами.  Модуль включает класс `TextToImageGenerator` для создания изображений из текстовых строк и функцию `webp2png` для преобразования WEBP-изображений в PNG.


## Классы

### `TextToImageGenerator`

**Описание**: Класс `TextToImageGenerator` предназначен для генерации PNG-изображений из текстовых строк.  Он предоставляет методы для определения пути вывода, вычисления позиции текста, создания изображения, проверки строк, определения уже существующих файлов и, собственно, генерации изображений.

**Методы**:

#### `__init__`

**Описание**: Инициализирует класс `TextToImageGenerator` со стандартными настройками: папку вывода, размеры холста, отступы, цвета фона и текста, а также уровень ведения логов.


#### `generate_images`

**Описание**: Генерирует PNG-изображения из списка строк.

**Параметры**:

- `lines` (List[str]): Список строк, из которых будут созданы изображения.
- `output_dir` (str | Path, optional): Директория для сохранения выходных изображений. По умолчанию `"./output"`.
- `font` (str | ImageFont.ImageFont, optional): Шрифт для использования в тексте. По умолчанию `"sans-serif"`.
- `canvas_size` (Tuple[int, int], optional): Размеры холста в пикселях. По умолчанию `(1024, 1024)`.
- `padding` (float, optional): Процент от размера холста, используемый в качестве пустой границы. По умолчанию `0.10`.
- `background_color` (str, optional): Цвет фона изображений. По умолчанию `"white"`.
- `text_color` (str, optional): Цвет текста. По умолчанию `"black"`.
- `log_level` (int | str | bool, optional): Уровень подробности ведения логов. По умолчанию `"WARNING"`.
- `clobber` (bool, optional): Если `True`, перезаписывает существующие файлы. По умолчанию `False`.

**Возвращает**:

- List[Path]: Список путей к сгенерированным PNG-изображениям.


#### `generate_png`

**Описание**: Создает PNG-изображение с указанным текстом, шрифтом и цветами.

**Параметры**:

- `text` (str): Текст для отображения на изображении.
- `canvas_size` (Tuple[int, int]): Размер холста в пикселях.
- `padding` (float): Процент отступа от края холста.
- `background_color` (str): Цвет фона изображения.
- `text_color` (str): Цвет текста.
- `font` (str | ImageFont.ImageFont): Шрифт для использования в тексте.

**Возвращает**:

- Image: Сгенерированное PNG-изображение.


#### `center_text_position`

**Описание**: Вычисляет позицию для центрирования текста на холсте.

**Параметры**:

- `draw` (ImageDraw.Draw): Объект для рисования на изображении.
- `text` (str): Текст для центрирования.
- `font` (ImageFont.ImageFont): Шрифт для текста.
- `canvas_size` (Tuple[int, int]): Размер холста в пикселях.

**Возвращает**:

- Tuple[int, int]: Координаты для центрирования текста.


#### `overlay_images`

**Описание**: Накладывает одно PNG-изображение поверх другого в указанной позиции.

**Параметры**:

- `background_path` (str | Path): Путь к фоновому PNG-изображению.
- `overlay_path` (str | Path): Путь к накладываемому PNG-изображению.
- `position` (tuple[int, int], optional): Координаты (x, y), где будет расположено накладываемое изображение. По умолчанию (0, 0).
- `alpha` (float, optional): Уровень прозрачности накладываемого изображения (0.0 - 1.0). По умолчанию 1.0.

**Возвращает**:

- Image: Результирующее изображение с наложенным слоем.


## Функции

### `webp2png`

**Описание**: Преобразует изображение WEBP в формат PNG.

**Параметры**:

- `webp_path` (str): Путь к входному изображению WEBP.
- `png_path` (str): Путь для сохранения преобразованного PNG-изображения.

**Возвращает**:

- bool: `True`, если преобразование выполнено успешно, иначе `None`.


## Примеры использования


```python
# Пример использования generate_images
generator = TextToImageGenerator()
lines = ["Текст 1", "Текст 2"]
images = generator.generate_images(lines, output_dir="./output_images")
print(images)

# Пример использования webp2png
success = webp2png("input.webp", "output.png")
if success:
    print("Преобразование выполнено успешно.")
```
```