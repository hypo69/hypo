```markdown
# collect_hierarhy.py

## Описание

Этот скрипт рекурсивно обходит директорию `src`, собирает иерархию файлов, исключая определенные директории и файлы, и сохраняет ее в формате JSON.  Скрипт копирует найденные файлы в директорию `project_structure`, сохраняя исходную иерархию.  Поддерживаются только файлы с расширениями `.py`, `.json`, `.md`, `.dot`, и `.mer`.


## Функции

* **`collect_and_copy_files(directory: Path, target_directory: Path) -> dict`**:
    * Рекурсивно обходит директорию `directory`.
    * Для каждой вложенной директории, если она не входит в исключения (`['profiles', '__pycache__', '_experiments']`, имена начинающиеся с '___', имена содержащие '*'),  вызывает себя рекурсивно.
    * Для каждого файла, если расширение файла  входит в разрешенные  (`'.py', '.json', '.md', '.dot', '.mer'`), а имя файла не начинается с '___', не содержит '*' , '(' , ')', то добавляет имя файла в `hierarchy` и копирует его в `target_directory`.
    * Возвращает словарь `hierarchy` - структуру вложенных словарей, представляющую иерархию файлов.

* **`main()`**:
    * Устанавливает `src_directory` как путь к директории `src/utils` с использованием значения `header.__root__`.
    * Создает директорию `project_structure` в `src_directory`.
    * Вызывает `collect_and_copy_files()` для сбора иерархии и копирования файлов.
    * Сохраняет собранную иерархию в файл `file_hierarchy.json` в директории `project_structure` используя функцию `j_dumps`.

## Использование

1. Убедитесь, что у вас установлен модуль `header`.
2. Убедитесь, что модуль `jjson` (скорее всего `jjson.py`) импортируется как `from src.utils.jjson import j_dumps`.
3. Запустите скрипт из командной строки.
4. Результат –  JSON-файл `file_hierarchy.json` в директории `src/utils/prod` содержащий структуру иерархии файлов из `src/utils` и копии этих файлов в директорию `src/utils/prod`.

##  Исключения

Скрипт игнорирует следующие директории:

* `profiles`
* `__pycache__`
* `_experiments`
* директории, начинающиеся с `___`
* имена директорий содержащие `*`

Скрипт игнорирует следующие типы файлов:

* файлы, начинающиеся с `___`
* файлы содержащие `*`, `(`, или `)` в имени

##  Важно

*  Файл `header.py` должен содержать атрибут `__root__`, определяющий корневой каталог проекта.
*  Модуль `jjson` (`src/utils/jjson.py`) должен быть корректным и доступным.
*  Проверьте корректность работы функции `j_dumps`.
```