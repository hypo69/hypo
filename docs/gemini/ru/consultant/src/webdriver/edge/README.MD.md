# Анализ кода модуля `src.webdriver.edge`

**Качество кода**
7
 -  Плюсы
    -   Документ содержит подробное описание модуля и его функциональности.
    -   Приведены примеры использования и конфигурации, что облегчает понимание работы модуля.
    -   Описаны основные особенности, такие как централизованная конфигурация, работа с профилями и логирование.
    -   Присутствует описание структуры файла конфигурации `edge.json`.
 -  Минусы
    -  Отсутствует полноценное RST форматирование.
    -  Необходимо добавить более подробные примеры использования, а также примеры обработки ошибок.
    -  Файл `README.MD` содержит информацию, которая, скорее, должна быть в докстрингах классов и функций.

**Рекомендации по улучшению**

1.  **Форматирование**: Перевести текст в формат `reStructuredText (RST)` для корректного отображения в документации.
2.  **Содержание**: Перенести описание модуля и его функциональности в docstring класса `Edge`, примеры использования оставить в `README.MD`
3.  **Примеры кода**: Добавить примеры кода для демонстрации работы с разными профилями и пользовательскими опциями.
4.  **Управление ошибками**: Описать, как обрабатываются ошибки при инициализации и выполнении операций.
5.  **Логирование**: Уточнить, какие именно данные логируются и где можно найти логи.
6.  **Singleton Pattern**: Расширить описание реализации singleton pattern.

**Оптимизиробанный код**
```markdown
.. module:: src.webdriver.edge
   :synopsis: Модуль для управления Edge WebDriver с использованием Selenium.
   :platform: Windows, Linux, macOS

Модуль обеспечивает пользовательскую реализацию Edge WebDriver с помощью Selenium, интегрируя параметры конфигурации, определенные в файле `edge.json`. 
Это позволяет гибко и автоматически взаимодействовать с браузером.

Основные характеристики
------------------------

*   **Централизованная конфигурация**: Конфигурация управляется через файл `edge.json`.
*   **Поддержка нескольких профилей**: Позволяет настраивать различные параметры для тестирования.
*   **Расширенное логирование**: Предоставляет детальные логи для инициализации, ошибок конфигурации и ошибок WebDriver.
*   **Передача пользовательских опций**: Поддерживает передачу пользовательских опций во время инициализации WebDriver.

Требования
----------

Перед использованием этого WebDriver убедитесь, что установлены следующие зависимости:

*   Python 3.x
*   Selenium
*   Fake User Agent
*   Бинарный файл Edge WebDriver (например, `msedgedriver`)

Установите необходимые зависимости Python:

.. code-block:: bash

   pip install selenium fake_useragent

Убедитесь, что бинарный файл `msedgedriver` доступен в системной переменной `PATH` или укажите его путь в конфигурации.

Конфигурация
------------

Конфигурация для Edge WebDriver хранится в файле `edge.json`. Ниже приведен пример структуры файла конфигурации и его описание:

Пример конфигурации (`edge.json`)
--------------------------------

.. code-block:: json

   {
     "options": [
       "--disable-dev-shm-usage",
       "--remote-debugging-port=0"
     ],
     "profiles": {
       "os": "%LOCALAPPDATA%\\\\Microsoft\\\\Edge\\\\User Data\\\\Default",
       "internal": "webdriver\\\\edge\\\\profiles\\\\default"
     },
     "executable_path": {
       "default": "webdrivers\\\\edge\\\\123.0.2420.97\\\\msedgedriver.exe"
     },
     "headers": {
       "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36 Edg/96.0.1054.62",
       "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
       "Accept-Charset": "ISO-8859-1,utf-8;q=0.7,*;q=0.3",
       "Accept-Encoding": "none",
       "Accept-Language": "en-US,en;q=0.8",
       "Connection": "keep-alive"
     }
   }

Описание полей конфигурации
--------------------------

1.  `options`
    
    Список аргументов командной строки, передаваемых Edge.
    
    *   `--disable-dev-shm-usage`: Отключает использование `/dev/shm` в Docker-контейнерах.
    *   `--remote-debugging-port=0`: Устанавливает порт для удаленной отладки.
2.  `profiles`
    
    Пути к каталогам данных пользователя Edge для разных сред:
    
    *   `os`: Путь к каталогу данных пользователя по умолчанию (для Windows).
    *   `internal`: Внутренний путь для профиля WebDriver по умолчанию.
3.  `executable_path`
    
    Путь к бинарному файлу Edge WebDriver:
    
    *   `default`: Путь к бинарному файлу `msedgedriver.exe`.
4.  `headers`
    
    Пользовательские HTTP-заголовки, используемые в запросах браузера:
    
    *   `User-Agent`: Строка user-agent для браузера.
    *   `Accept`: Типы данных, которые браузер готов принимать.
    *   `Accept-Charset`: Кодировка, поддерживаемая браузером.
    *   `Accept-Encoding`: Метод кодирования (установлено на `none`).
    *   `Accept-Language`: Предпочитаемые языки.
    *   `Connection`: Тип соединения (например, `keep-alive`).

Использование
-------------

Для использования `Edge` WebDriver в проекте, импортируйте и инициализируйте его:

.. code-block:: python

   from src.webdriver.edge import Edge
   
   # Инициализация Edge WebDriver с настройками user-agent и пользовательскими опциями
   browser = Edge(user_agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64)", options=["--headless", "--disable-gpu"])
   
   # Открытие веб-сайта
   browser.get("https://www.example.com")
   
   # Закрытие браузера
   browser.quit()

Класс `Edge` автоматически загружает настройки из файла `edge.json` и использует их для конфигурации WebDriver. Вы можете указать пользовательский user-agent и передать дополнительные параметры.

Singleton Pattern
-----------------

`Edge` WebDriver использует шаблон Singleton. Это означает, что будет создан только один экземпляр WebDriver. Если экземпляр уже существует, будет использован тот же экземпляр, и откроется новое окно.

Логирование и отладка
---------------------

Класс WebDriver использует `logger` из `src.logger` для логирования ошибок, предупреждений и информации. Все проблемы, обнаруженные при инициализации, настройке или выполнении, будут зарегистрированы.

Примеры логов
-------------

*   **Ошибка при инициализации WebDriver**: `Error initializing Edge WebDriver: <детали ошибки>`
*   **Проблемы конфигурации**: `Error in edge.json file: <детали проблемы>`

Лицензия
--------

Этот проект лицензирован в соответствии с лицензией MIT. Смотрите файл [LICENSE](../../LICENSE) для деталей.
```