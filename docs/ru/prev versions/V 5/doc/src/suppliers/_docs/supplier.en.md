# Документация модуля Supplier

## Обзор

Модуль `Supplier` предоставляет базовый класс для управления поставщиками данных в приложении. Он обеспечивает основу для взаимодействия с различными источниками данных, такими как Amazon, AliExpress, Walmart и другие. Этот класс обрабатывает инициализацию специфичных для поставщика настроек, управляет сценариями для сбора данных и предоставляет методы для входа в систему и выполнения сценариев.

## Подробней

Класс `Supplier` служит основой для создания классов, специфичных для каждого поставщика данных. Он предоставляет общую структуру и функциональность, которая может быть расширена и настроена для конкретных нужд каждого поставщика. Класс `Supplier` централизует управление поставщиками, включая конфигурацию, вход в систему и выполнение сценариев сбора данных.

## Классы

### `Supplier`

**Описание**: Базовый класс для управления поставщиками данных.

**Как работает класс**:
Класс `Supplier` предоставляет структуру для взаимодействия с различными поставщиками данных, такими как Amazon и AliExpress. Он инициализирует атрибуты на основе префикса поставщика, загружает конфигурации, обрабатывает вход в систему и выполняет сценарии сбора данных.

**Атрибуты**:
- `supplier_id`: Уникальный идентификатор поставщика.
- `supplier_prefix`: Префикс поставщика, например, `aliexpress` или `amazon`.
- `supplier_settings`: Настройки поставщика, загруженные из файла конфигурации.
- `locale`: Код локализации (например, `en` для английского, `ru` для русского).
- `price_rule`: Правило для расчета цен (например, добавление НДС или применение скидок).
- `related_modules`: Модуль, содержащий специфичные для поставщика функции.
- `scenario_files`: Список файлов сценариев для выполнения.
- `current_scenario`: Текущий выполняемый сценарий.
- `login_data`: Учетные данные для входа на сайт поставщика (если требуется).
- `locators`: Локаторы для веб-элементов на сайте поставщика.
- `driver`: Веб-драйвер для взаимодействия с сайтом поставщика.
- `parsing_method`: Метод для разбора данных (например, `webdriver`, `api`, `xls`, `csv`).

**Методы**:

- `__init__`: Конструктор, который инициализирует атрибуты на основе префикса поставщика и других параметров.
- `_payload`: Загружает специфичные для поставщика конфигурации, локаторы и инициализирует веб-драйвер.
- `login`: Обрабатывает процесс входа в систему для сайта поставщика, если требуется аутентификация.
- `run_scenario_files`: Выполняет один или несколько файлов сценариев.
- `run_scenarios`: Выполняет один или несколько сценариев.

### `__init__`

```python
def __init__(self, supplier_prefix: str, locale: str = 'en', webdriver: str | Driver | bool = 'default', *attrs, **kwargs)
```

**Описание**: Инициализирует экземпляр класса `Supplier`.

**Как работает функция**:
Метод `__init__` инициализирует основные атрибуты класса `Supplier`, такие как префикс поставщика, локаль и веб-драйвер. Он также вызывает метод `_payload` для загрузки конфигураций и настройки веб-драйвера.

**Параметры**:
- `supplier_prefix` (str): Префикс поставщика (например, 'aliexpress').
- `locale` (str, optional): Код локализации. По умолчанию 'en'.
- `webdriver` (str | Driver | bool, optional): Веб-драйвер. По умолчанию 'default'.
- `*attrs`: Дополнительные атрибуты.
- `**kwargs`: Дополнительные именованные аргументы.

### `_payload`

```python
def _payload(self, webdriver: str | Driver | bool, *attrs, **kwargs) -> bool
```

**Описание**: Загружает конфигурации и инициализирует веб-драйвер.

**Как работает функция**:
Метод `_payload` загружает специфичные для поставщика конфигурации, такие как настройки, локаторы, и инициализирует веб-драйвер для взаимодействия с сайтом поставщика.

**Параметры**:
- `webdriver` (str | Driver | bool): Веб-драйвер.
- `*attrs`: Дополнительные атрибуты.
- `**kwargs`: Дополнительные именованные аргументы.

**Возвращает**:
- `bool`: `True`, если загрузка конфигураций и инициализация веб-драйвера прошли успешно.

### `login`

```python
def login(self) -> bool
```

**Описание**: Выполняет вход в систему на сайт поставщика.

**Как работает функция**:
Метод `login` обрабатывает процесс аутентификации на сайте поставщика, используя учетные данные, хранящиеся в атрибуте `login_data`.

**Возвращает**:
- `bool`: `True`, если вход в систему выполнен успешно.

### `run_scenario_files`

```python
def run_scenario_files(self, scenario_files: str | List[str] = None) -> bool
```

**Описание**: Выполняет сценарии из указанных файлов.

**Как работает функция**:
Метод `run_scenario_files` выполняет сценарии, определенные в указанных файлах. Он проходит по списку файлов сценариев и выполняет каждый сценарий.

**Параметры**:
- `scenario_files` (str | List[str], optional): Список файлов сценариев. По умолчанию `None`.

**Возвращает**:
- `bool`: `True`, если все сценарии выполнены успешно.

### `run_scenarios`

```python
def run_scenarios(self, scenarios: dict | list[dict]) -> bool
```

**Описание**: Выполняет указанные сценарии.

**Как работает функция**:
Метод `run_scenarios` выполняет сценарии, переданные в виде словаря или списка словарей. Каждый сценарий представляет собой набор действий, которые необходимо выполнить.

**Параметры**:
- `scenarios` (dict | list[dict]): Список сценариев для выполнения.

**Возвращает**:
- `bool`: `True`, если все сценарии выполнены успешно.