# Модуль hypotez/src/webdriver/executor.py

## Обзор

Модуль `executor` предназначен для выполнения действий над веб-элементами на основе предоставленных конфигураций (локаторов). Локаторы представляют собой словари, содержащие информацию о том, как найти и взаимодействовать с элементами на веб-странице.  Модуль предоставляет функциональность для:

1. **Парсинга и обработки локаторов**: Преобразование словарей локаторов в объекты `SimpleNamespace` для гибкого управления данными.
2. **Взаимодействия с веб-элементами**: Выполнение различных действий над веб-элементами, включая клики, отправку сообщений, выполнение событий и извлечение атрибутов.
3. **Обработки ошибок**: Поддержка продолжения выполнения при возникновении ошибок для обработки веб-страниц с нестабильными элементами или требующими специфического подхода.
4. **Поддержки множественных типов локаторов**: Обработка как одиночных, так и множественных локаторов, позволяющая идентифицировать и взаимодействовать с одним или несколькими веб-элементами одновременно.


## Классы

### `ExecuteLocator`

**Описание**: Класс `ExecuteLocator` предназначен для управления взаимодействием с веб-элементами с использованием Selenium. Хранит драйвер, цепочку действий, отображение типов локаторов и режим работы.

**Атрибуты**:

- `driver`: Драйвер Selenium (объект).
- `actions`: Цепочка действий (ActionChains).
- `by_mapping`: Словарь соответствий между строковыми обозначениями типов локаторов (XPATH, ID и т.д.) и соответствующими значениями из `By`.
- `mode`: Режим работы (`debug` или `dev`).

**Методы**:

- `__post_init__`: Инициализация цепочки действий `actions` при наличии драйвера.
- `execute_locator`: Выполняет действия над веб-элементом на основе предоставленного локатора. Поддерживает обработку событий, получения атрибутов и получения самих веб-элементов.
- `evaluate_locator`: Оценивает и обрабатывает атрибуты локатора, обрабатывая как одиночные атрибуты, так и списки атрибутов.
- `get_attribute_by_locator`: Извлекает атрибуты элемента или списка элементов, найденных по локатору. Поддерживает извлечение атрибутов из списка элементов и обработку строки локатора, представляющей собой словарь.
- `get_webelement_by_locator`: Извлекает веб-элемент или список элементов по локатору с указанным таймаутом и условием ожидания.
- `get_webelement_as_screenshot`: Делает скриншот найденного веб-элемента.
- `execute_event`: Выполняет события, ассоциированные с локатором (например, клик, отправка сообщений, пауза).
- `send_message`: Отправляет сообщение веб-элементу.


## Функции

### `_parse_locator`

**Описание**: Вспомогательная функция для парсинга и выполнения инструкций локатора.

**Параметры**:
- `locator`: Данные локатора (словарь или `SimpleNamespace`).
- `message`: Опциональное сообщение для отправки.

**Возвращает**: Результат выполнения инструкций локатора.


### `_evaluate`

**Описание**: Вспомогательная функция для обработки атрибутов локатора.

**Параметры**:
- `attr`: Атрибут для обработки.

**Возвращает**: Обработанный атрибут.


### `_parse_dict_string`

**Описание**: Парсит строку, представляющую словарь атрибутов.

**Параметры**:
- `attr_string`: Строка с данными локатора в формате `{key1:value1, key2:value2}`.

**Возвращает**: Словарь атрибутов или `None` при ошибке.


### `_get_attributes_from_dict`

**Описание**: Извлекает значения атрибутов для каждого ключа в заданном словаре.

**Параметры**:
- `element`: Веб-элемент для извлечения атрибутов.
- `attr_dict`: Словарь атрибутов для извлечения.

**Возвращает**: Словарь с атрибутами и их значениями.


### `_parse_elements_list`

**Описание**: Вспомогательная функция для фильтрации списка веб-элементов.

**Параметры**:
- `web_elements`: Список веб-элементов.
- `locator`: Локатор данных.

**Возвращает**: Отфильтрованный список веб-элементов.

```