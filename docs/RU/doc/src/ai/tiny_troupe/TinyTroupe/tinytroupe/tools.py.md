# Модуль `tools.py`

## Обзор

Модуль `tools.py` предоставляет инструменты, которые агенты могут использовать для выполнения специализированных задач. Он содержит базовый класс `TinyTool` и производные от него классы, такие как `TinyCalendar` и `TinyWordProcessor`, которые расширяют функциональность агентов.

## Содержание

- [Классы](#классы)
    - [TinyTool](#TinyTool)
    - [TinyCalendar](#TinyCalendar)
    - [TinyWordProcessor](#TinyWordProcessor)
- [Импорты](#импорты)

## Импорты

Модуль импортирует следующие библиотеки:
- `textwrap`: Для работы с текстом.
- `json`: Для работы с JSON.
- `copy`: Для создания копий объектов.
- `logging`: Для логирования.
- `tinytroupe.utils`: Собственные утилиты.
- `tinytroupe.extraction.ArtifactExporter`: Экспортер артефактов.
- `tinytroupe.enrichment.TinyEnricher`: Инструмент для обогащения текста.
- `tinytroupe.utils.JsonSerializableRegistry`: Реестр для сериализуемых в JSON объектов.

## Классы

### `TinyTool`

**Описание**:
Базовый класс для всех инструментов, которые могут использовать агенты.

**Методы**:
- `__init__(self, name, description, owner=None, real_world_side_effects=False, exporter=None, enricher=None)`:
    - **Описание**: Инициализирует новый инструмент.
    - **Параметры**:
        - `name` (str): Название инструмента.
        - `description` (str): Краткое описание инструмента.
        - `owner` (str, optional): Агент, владеющий инструментом. По умолчанию `None`, что означает, что инструмент может использовать любой агент.
        - `real_world_side_effects` (bool, optional): Указывает, имеет ли инструмент побочные эффекты в реальном мире. По умолчанию `False`.
        - `exporter` (ArtifactExporter, optional): Экспортер для сохранения результатов работы инструмента. По умолчанию `None`.
        - `enricher` (TinyEnricher, optional): Инструмент для обогащения результатов работы инструмента. По умолчанию `None`.
- `_process_action(self, agent, action: dict) -> bool`:
    - **Описание**: Абстрактный метод, который должен быть реализован в подклассах для обработки действий.
    - **Параметры**:
        - `agent`: Агент, выполняющий действие.
        - `action` (dict): Словарь, содержащий информацию о действии.
    - **Возвращает**:
        - `bool`: Указывает, было ли действие успешно выполнено.
    - **Вызывает исключения**:
        - `NotImplementedError`: Если метод не реализован в подклассе.
- `_protect_real_world(self)`:
    - **Описание**: Выводит предупреждение, если инструмент имеет реальные побочные эффекты.
- `_enforce_ownership(self, agent)`:
    - **Описание**: Проверяет, имеет ли агент право использовать инструмент.
    - **Параметры**:
        - `agent`: Агент, пытающийся использовать инструмент.
    - **Вызывает исключения**:
        - `ValueError`: Если агент не владеет инструментом.
- `set_owner(self, owner)`:
    - **Описание**: Устанавливает владельца инструмента.
    - **Параметры**:
        - `owner`: Новый владелец инструмента.
- `actions_definitions_prompt(self) -> str`:
    - **Описание**: Абстрактный метод, который должен быть реализован в подклассах для предоставления текстового описания действий, которые инструмент может выполнять.
    - **Возвращает**:
        - `str`: Строка, описывающая действия инструмента.
    - **Вызывает исключения**:
        - `NotImplementedError`: Если метод не реализован в подклассе.
- `actions_constraints_prompt(self) -> str`:
    - **Описание**: Абстрактный метод, который должен быть реализован в подклассах для предоставления текстового описания ограничений на действия, которые инструмент может выполнять.
    - **Возвращает**:
        - `str`: Строка, описывающая ограничения на действия инструмента.
    - **Вызывает исключения**:
        - `NotImplementedError`: Если метод не реализован в подклассе.
- `process_action(self, agent, action: dict) -> bool`:
    - **Описание**: Обрабатывает действие, выполняемое агентом, с учетом защиты от реальных побочных эффектов и проверки владения.
    - **Параметры**:
        - `agent`: Агент, выполняющий действие.
        - `action` (dict): Словарь, содержащий информацию о действии.
    - **Возвращает**:
        - `bool`: Указывает, было ли действие успешно выполнено.

### `TinyCalendar`

**Описание**:
Инструмент для работы с календарем, позволяющий агентам отслеживать встречи и события.

**Методы**:
- `__init__(self, owner=None)`:
    - **Описание**: Инициализирует календарь.
    - **Параметры**:
        - `owner` (str, optional): Владелец инструмента. По умолчанию `None`.
- `add_event(self, date, title, description=None, owner=None, mandatory_attendees=None, optional_attendees=None, start_time=None, end_time=None)`:
    - **Описание**: Добавляет событие в календарь.
    - **Параметры**:
        - `date` (str): Дата события.
        - `title` (str): Название события.
        - `description` (str, optional): Описание события. По умолчанию `None`.
        - `owner` (str, optional): Владелец события. По умолчанию `None`.
        - `mandatory_attendees` (list, optional): Список обязательных участников. По умолчанию `None`.
        - `optional_attendees` (list, optional): Список опциональных участников. По умолчанию `None`.
        - `start_time` (str, optional): Время начала события. По умолчанию `None`.
        - `end_time` (str, optional): Время окончания события. По умолчанию `None`.
- `find_events(self, year, month, day, hour=None, minute=None)`:
    - **Описание**: Находит события в календаре по дате и времени.
    - **Параметры**:
        - `year` (int): Год.
        - `month` (int): Месяц.
        - `day` (int): День.
        - `hour` (int, optional): Час. По умолчанию `None`.
        - `minute` (int, optional): Минута. По умолчанию `None`.
- `_process_action(self, agent, action) -> bool`:
    - **Описание**: Обрабатывает действие агента, связанное с календарем.
    - **Параметры**:
        - `agent`: Агент, выполняющий действие.
        - `action` (dict): Словарь, содержащий информацию о действии.
    - **Возвращает**:
        - `bool`: Указывает, было ли действие успешно выполнено.
- `actions_definitions_prompt(self) -> str`:
    - **Описание**: Возвращает текстовое описание действий, которые инструмент может выполнять.
    - **Возвращает**:
        - `str`: Строка, описывающая действия инструмента.
- `actions_constraints_prompt(self) -> str`:
    - **Описание**: Возвращает текстовое описание ограничений на действия, которые инструмент может выполнять.
    - **Возвращает**:
        - `str`: Строка, описывающая ограничения на действия инструмента.

### `TinyWordProcessor`

**Описание**:
Инструмент для обработки текста, позволяющий агентам создавать документы.

**Методы**:
- `__init__(self, owner=None, exporter=None, enricher=None)`:
    - **Описание**: Инициализирует текстовый процессор.
    - **Параметры**:
        - `owner` (str, optional): Владелец инструмента. По умолчанию `None`.
        - `exporter` (ArtifactExporter, optional): Экспортер для сохранения результатов работы инструмента. По умолчанию `None`.
        - `enricher` (TinyEnricher, optional): Инструмент для обогащения результатов работы инструмента. По умолчанию `None`.
- `write_document(self, title, content, author=None)`:
    - **Описание**: Создает документ.
    - **Параметры**:
        - `title` (str): Заголовок документа.
        - `content` (str): Содержание документа.
        - `author` (str, optional): Автор документа. По умолчанию `None`.
- `_process_action(self, agent, action) -> bool`:
    - **Описание**: Обрабатывает действие агента, связанное с текстовым процессором.
    - **Параметры**:
        - `agent`: Агент, выполняющий действие.
        - `action` (dict): Словарь, содержащий информацию о действии.
    - **Возвращает**:
        - `bool`: Указывает, было ли действие успешно выполнено.
    - **Вызывает исключения**:
        - `json.JSONDecodeError`: Если не удалось распарсить JSON контент.
- `actions_definitions_prompt(self) -> str`:
    - **Описание**: Возвращает текстовое описание действий, которые инструмент может выполнять.
    - **Возвращает**:
        - `str`: Строка, описывающая действия инструмента.
- `actions_constraints_prompt(self) -> str`:
    - **Описание**: Возвращает текстовое описание ограничений на действия, которые инструмент может выполнять.
    - **Возвращает**:
        - `str`: Строка, описывающая ограничения на действия инструмента.