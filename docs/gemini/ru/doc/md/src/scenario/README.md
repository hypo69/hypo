# Модуль `src.scenario`

## Обзор

Модуль `src.scenario` предназначен для автоматизации взаимодействия с поставщиками с помощью сценариев, описанных в JSON-файлах. Его основная задача — адаптация процесса извлечения и обработки данных о продуктах с веб-сайтов поставщиков и синхронизация этой информации с базой данных вашей системы.

## Функции модуля

1. **Чтение сценариев**: Модуль загружает сценарии из JSON-файлов, содержащих информацию о различных категориях продуктов и их URL-адресах на веб-сайте поставщика.

2. **Взаимодействие с веб-сайтами**: Используя URL-адреса, указанные в сценариях, модуль переходит на страницы продуктов и извлекает необходимые данные.

3. **Обработка данных**: Модуль обрабатывает извлеченные данные о продуктах, преобразует их в требуемый формат и сохраняет в базе данных вашей системы (например, PrestaShop).

4. **Ведение журнала выполнения**: Модуль ведет журнал выполнения сценариев, записывая подробности выполнения и результаты, что помогает отслеживать успехи и выявлять ошибки.

## Основные компоненты модуля

### `run_scenario_files(s, scenario_files_list)`

**Описание**: Выполняет список файлов сценариев последовательно. Вызывает `run_scenario_file` для обработки каждого файла сценария.

**Параметры**:
- `s` (объект `Supplier`): Экземпляр класса `Supplier`.
- `scenario_files_list` (Список строк): Список путей к файлам сценариев.

**Возвращает**: `bool`: `True`, если все сценарии выполнены успешно, иначе `False`.

### `run_scenario_file(s, scenario_file)`

**Описание**: Загружает сценарии из указанного файла и вызывает `run_scenario` для каждого сценария в файле.

**Параметры**:
- `s` (объект `Supplier`): Экземпляр класса `Supplier`.
- `scenario_file` (строка): Путь к файлу сценария.

**Возвращает**: `bool`: `True`, если файл сценария был обработан успешно, иначе `False`.

### `run_scenario(s, scenario)`

**Описание**: Обрабатывает отдельный сценарий. Переходит по URL, указанному в сценарии, извлекает данные о продукте и сохраняет их в базе данных.

**Параметры**:
- `s` (объект `Supplier`): Экземпляр класса `Supplier`.
- `scenario` (словарь): Словарь, представляющий сценарий.

**Возвращает**: `bool`: `True`, если сценарий выполнен успешно, иначе `False`.

### `dump_journal(s, journal)`

**Описание**: Сохраняет журнал выполнения сценариев в файл для последующего анализа.

**Параметры**:
- `s` (объект `Supplier`): Экземпляр класса `Supplier`.
- `journal` (словарь): Словарь, содержащий данные журнала.

**Возвращает**: `None`.

### `main()`

**Описание**: Основная функция для запуска модуля.

**Параметры**:
- Нет.

**Возвращает**: `None`.


## Пример сценария

Пример JSON-сценария описывает, как взаимодействовать с определенными категориями продуктов на веб-сайте. Он включает:
- **URL страницы**: Для навигации и извлечения данных.
- **Название категории**: Для идентификации категории.
- **`presta_categories`**: Идентификаторы категорий в базе данных PrestaShop, где будут сохранены продукты.


```json
{
    "scenarios": {
        "минерал+לחויותלפניםמינרליםותמציותצמחים": {
            "url": "https://hbdeadsea.co.il/product-category/facial/moisture-face/",
            "name": "минерал+לחויותלפניםמינרליםותמציותצמחים",
            "presta_categories": {
                "default_category": 11245,
                "additional_categories": [11288]
            }
        }
    }
}
```

#### Поля сценария

- `"scenario_name"`: Название сценария.
- `"url"`: Целевой адрес - ссылка на категорию, раздел или отдельный продукт.
- `"name"`: Название категории - совпадает с именем сценария.
- `"presta_categories"`:
    - `"default_category"`: ID категории по умолчанию в PrestaShop, где продукты из этого сценария будут категоризированы.
    - `"additional_categories"`: Список дополнительных ID категорий в PrestaShop для дальнейшей категоризации.

Этот раздел описывает структуру сценария и как он используется для извлечения и обработки данных.

## Функциональность

Модуль автоматизирует сбор и обработку данных о продуктах, упрощая интеграцию с разными поставщиками и системами управления продуктами.  Подробное описание работы и компонентов внутри модуля приведено ниже.

(Далее следует остальная документация, адаптированная под структуру и требования, заданные в запросе)