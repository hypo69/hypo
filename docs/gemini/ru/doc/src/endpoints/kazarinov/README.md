# Модуль KazarinovTelegramBot

## Обзор

Этот модуль реализует бота для Telegram, обрабатывающего ссылки, полученные из различных источников, и выполняющего сценарий Mexiron для каждой валидной ссылки.

## Классы

### `BotHandler`

**Описание**: Класс `BotHandler` отвечает за обработку входящих сообщений, содержащих ссылки. Он парсит ссылки, проверяет их валидность и, при успешной проверке, запускает сценарий Mexiron.

**Методы**:

- `handle_message(message):` Обрабатывает входящее сообщение.
  ```python
  def handle_message(message: str) -> None:
      """
      Обрабатывает входящее сообщение.

      Args:
          message (str): Сообщение от пользователя.

      Returns:
          None
          
      Raises:
          ValueError: Если сообщение не содержит ссылки.
          Exception: В случае других ошибок.
      """
  ```


## Функции

(Нет функций в представленном фрагменте кода)

## Алгоритм работы (Диаграмма состояний)

```mermaid
flowchart TD
    A[Start] --> B{URL is from OneTab?}\
    B --Yes--> C[Get data from OneTab]\
    B --No--> D[Reply - Try again]\
    C --Data valid?-- Yes --> G[Run Mexiron scenario]\
    C --Data valid?-- No --> F[Reply Incorrect data]\
    G --Scenario successful?-- Yes --> I[Reply Done! I will send the link to WhatsApp]\
    G --Scenario successful?-- No --> J[Reply Error running scenario]\
    F --> K[Return]\
    I --> K[Return]\
    D --> K[Return]\
    J --> K[Return]\
    
```

**Описание диаграммы:**

Диаграмма описывает последовательность действий бота при получении ссылки. Бот проверяет, является ли URL полученным из OneTab, получает данные из OneTab, проверяет валидность данных. Если данные валидны, запускает сценарий Mexiron. В случае успеха, отправляет сообщение об успешном выполнении и ссылку для WhatsApp. В противном случае, выдает соответствующее сообщение об ошибке.


## Поддерживаемые ссылки

Следующие сайты используются как источники ссылок:

* https://one-tab.co.il
* https://morlevi.co.il
* https://grandavance.co.il
* https://ivory.co.il
* https://ksp.co.il


## Необходимые инструменты

Для корректной работы бота требуется:

* Библиотека для работы с Telegram API.
* Возможность взаимодействия со службой OneTab.
* Библиотека для запуска сценария Mexiron.


## Замечания

* Подробное описание алгоритма обработки ошибок и возможных вариантов обработки невалидных данных должно быть дополнено.
* Должен быть предоставлен код реализации методов класса `BotHandler`.
* Должна быть описана работа с Mexiron, включая формат входных и выходных данных.