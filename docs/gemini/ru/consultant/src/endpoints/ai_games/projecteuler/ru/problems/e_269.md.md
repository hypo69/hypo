# Анализ кода модуля e_269.md

**Качество кода**
9
 -  Плюсы
     - Код представляет собой описание математической задачи, а не программный код, что соответствует условию задачи.
     - Используется Markdown для форматирования текста.
 -  Минусы
    - Отсутствует программный код для решения задачи.

**Рекомендации по улучшению**

1.  **Добавить программный код:** Необходимо добавить код на Python, который решает поставленную задачу, реализуя алгоритм подсчета многочленов с целыми корнями.
2.  **Добавить описание:** Включить в описание не только условие задачи, но и основные подходы к её решению и ограничения.
3.  **Улучшить форматирование:** Привести математические выражения к более читаемому виду.
4.  **Добавить тесты:** Добавить автоматические тесты, чтобы проверить код и его корректность.
5.  **Добавить пояснения**: Добавить пояснения к коду в формате RST

**Оптимизированный код**
```markdown
# Задача No 269
## Многочлены с целыми корнями
## Условия
Многочлен с целыми коэффициентами
$$
a_n x^n + a_{n-1} x^{n-1} + \dots + a_1 x + a_0
$$
имеет целые корни тогда и только тогда, когда $a_0$ делится на каждый из этих корней.

Пусть $P(n)$ будет количеством многочленов вида
$$
x^4 + a_3 x^3 + a_2 x^2 + a_1 x + a_0
$$
где $a_i$ – целые числа, $-n \le a_i \le n$, которые имеют хотя бы один целый корень.

Известно, что $P(10) = 1469$, и $P(100) = 1672793$.

Найдите $P(10^6)$.

## Описание решения
:
Для решения задачи, необходимо проанализировать все возможные целые корни многочлена вида $x^4 + a_3 x^3 + a_2 x^2 + a_1 x + a_0$ в диапазоне от $-n$ до $n$.

1. **Общий подход:**
   - Если $r$ является целым корнем, то $a_0$ должно делиться на $r$.
   - Для многочлена четвертой степени мы проверяем корни от $-n$ до $n$
   - Для каждого корня $r$ мы должны удостоверится, что $a_0$ делится на $r$.
2. **Уточнение для корней:**
   - Рассмотрим корень $r$.
   - Подставив корень в многочлен, мы получим уравнение: $r^4 + a_3 r^3 + a_2 r^2 + a_1 r + a_0 = 0$.
   - Отсюда $a_0 = -(r^4 + a_3 r^3 + a_2 r^2 + a_1 r)$.
   - Так как все $a_i$ ограничены диапазоном $-n \le a_i \le n$, мы должны перебрать $a_1, a_2, a_3$ в этом диапазоне, чтобы найти все валидные решения.
3. **Ограничения:**
   - Коэффициенты $a_i$ должны быть в диапазоне $[-n, n]$.
   - Поскольку корень $r$ может быть в диапазоне $[-n, n]$, мы можем ограничить поиск $r$ в этом же диапазоне.

## Python код

```python
"""
Модуль для решения задачи 269 Project Euler.
===============================================================================
Этот модуль вычисляет количество многочленов вида x^4 + a_3 x^3 + a_2 x^2 + a_1 x + a_0,
где a_i целые числа, -n <= a_i <= n, которые имеют хотя бы один целый корень.
"""
from typing import Set
from src.logger.logger import logger

def count_polynomials_with_int_roots(n: int) -> int:
    """
    Вычисляет количество многочленов вида x^4 + a_3 x^3 + a_2 x^2 + a_1 x + a_0
    с целыми коэффициентами в диапазоне [-n, n], которые имеют хотя бы один целый корень.

    :param n: Максимальное значение абсолютного значения коэффициентов.
    :return: Количество многочленов с целыми корнями.
    """
    count: int = 0  # Инициализация счетчика многочленов
    seen: Set[int] = set()  # Инициализация множества для хранения уникальных многочленов

    # Проход по всем возможным целым корням
    for r in range(-n, n + 1):
        # Если корень равен 0, пропускаем
        if r == 0:
            continue

        # Перебор всех возможных коэффициентов
        for a3 in range(-n, n + 1):
            for a2 in range(-n, n + 1):
                for a1 in range(-n, n + 1):
                    a0 = -(r**4 + a3 * r**3 + a2 * r**2 + a1 * r)
                    # Проверка, что a0 находится в заданном диапазоне
                    if -n <= a0 <= n:
                        # Создание кортежа для представления многочлена и добавление его в множество
                        polynomial_tuple: tuple = (a3, a2, a1, a0)
                        polynomial_hash = hash(polynomial_tuple)
                        if polynomial_hash not in seen:
                            seen.add(polynomial_hash)
                            count += 1
    return count
# Вычисление значения P(10), P(100) и P(10^6)
if __name__ == '__main__':
    n10 = count_polynomials_with_int_roots(10)
    logger.info(f"P(10) = {n10}")

    n100 = count_polynomials_with_int_roots(100)
    logger.info(f"P(100) = {n100}")

    n1000000 = count_polynomials_with_int_roots(1000000)
    logger.info(f"P(10^6) = {n1000000}")
```
```
```