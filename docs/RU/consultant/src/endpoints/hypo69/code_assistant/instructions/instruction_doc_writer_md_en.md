# Анализ кода модуля instruction_doc_writer_md_en.md

**Качество кода**
 9
- Плюсы
    - Инструкция четко определяет требования к формату документации, включая использование Markdown, заголовки, списки и ссылки.
    - Приведены примеры формата документации для функций и классов, что упрощает понимание ожидаемого результата.
    - Инструкция подробно описывает структуру файла документации, включая оглавление, заголовки и разделы.
    - Есть требование по использованию `ex` вместо `e` в обработке исключений, что соответствует лучшим практикам.
- Минусы
    - Инструкция не упоминает использование `j_loads` или `j_loads_ns` из `src.utils.jjson`, а также логирования ошибок с помощью `from src.logger.logger import logger`, что необходимо для соответствия с другими инструкциями.
    - Необходимы уточнения по генерации примеров кода, особенно в части RST.
    - Инструкция не определяет формат кода для вставки в документацию.

**Рекомендации по улучшению**
1.  Добавить требование использовать `j_loads` или `j_loads_ns` для чтения файлов.
2.  Добавить требование по использованию  `from src.logger.logger import logger` для логирования ошибок.
3.  Уточнить, что при генерации примеров кода необходимо использовать формат `RST`.
4.  Добавить требование о форматировании кода, используемого в документации. (например, с помощью ```python`).
5.  Добавить требование о добавлении описания модуля в начале файла.
6.  Добавить пример использования `j_loads` и `logger.error`.
7.  Указать про то, как обрабатывать код для вставки в markdown (например с помощью ```python).

**Оптимизированный код**
```markdown
# ИНСТРУКЦИЯ

Для каждого входного файла Python создайте документацию разработчика в формате `Markdown` для последующего использования.
Документация должна соответствовать следующим требованиям:

1. **Формат документации**:
    - Используйте стандарт `Markdown (.md)`.
    - Каждый файл должен начинаться с заголовка и краткого описания его содержимого.
    - Для всех классов и функций используйте следующий формат комментариев:
    ```python
    def function(param: str, param1: Optional[str | dict | str] = None) -> dict | None:
        """
        Args:
            param (str): Описание параметра `param`.
            param1 (Optional[str | dict | str], optional): Описание параметра `param1`. По умолчанию `None`.

        Returns:
            dict | None: Описание возвращаемого значения. Возвращает словарь или `None`.

        Raises:
            SomeError: Описание ситуации, в которой возникает исключение `SomeError`.
        """
    ```
    - Используйте `ex` вместо `e` в блоках обработки исключений.
    - Всегда используйте одинарные кавычки (`'`) в Python коде. Например: `a = 'A1'`; `['a','b',..]`; `{'a':q,'b':'c'}`
    - Двойные кавычки только в операциях вывода. Например `print("Hello, world!")`; `input("Name")`; `logger.error("Error")`
    - Используйте `j_loads` или `j_loads_ns` из `src.utils.jjson` вместо стандартного `json.load` для чтения файлов.
    - `logger` всегда импортируется из `sr.logger`. Example `from src.logger import logger`
    - Оставляйте любые `...` в коде без изменений как точки остановки.

2. **Оглавление (TOC)**:
    - Включите раздел оглавления в начало каждого файла документации.
    - Структура должна включать ссылки на все основные разделы документации модуля.

3. **Форматирование документации**:
    - Используйте правильный синтаксис Markdown для всех заголовков, списков и ссылок.
    - При документировании классов, функций и методов включайте структурированные разделы с описаниями, деталями параметров, возвращаемыми значениями и возникающими исключениями. Пример:
    ```markdown
    ## Функции

    ### `имя_функции`

    **Описание**: Краткое описание функции.

    **Параметры**:
    - `param` (str): Описание параметра `param`.
    - `param1` (Optional[str | dict | str], optional): Описание параметра `param1`. По умолчанию `None`.

    **Возвращает**:
    - `dict | None`: Описание возвращаемого значения.

    **Вызывает**:
    - `SomeError`: Описание ситуации, в которой возникает исключение `SomeError`.
    ```
    - Код, используемый в документации, должен быть оформлен как код `RST` внутри блоков кода `Markdown`
    ```markdown
        .. code-block:: python

            def example_function(param: str) -> bool:
                ...
                return True
    ```

4. **Заголовки разделов**:
    - Используйте заголовки уровня 1 (`#`), уровня 2 (`##`), уровня 3 (`###`) и уровня 4 (`####`) последовательно по всему файлу.

5. **Пример файла**:
    ```markdown
    # Имя модуля

    ## Обзор

    Краткое описание назначения модуля.

    ## Классы

    ### `ИмяКласса`

    **Описание**: Краткое описание класса.

    **Методы**:
    - `имя_метода`: Краткое описание метода.

    ## Функции

    ### `имя_функции`

    **Описание**: Краткое описание функции.

    **Параметры**:
    - `param` (str): Описание параметра `param`.
    - `param1` (Optional[str | dict | str], optional): Описание параметра `param1`. По умолчанию `None`.

    **Возвращает**:
    - `dict | None`: Описание возвращаемого значения.

    **Вызывает**:
    - `SomeError`: Описание ситуации, в которой возникает исключение `SomeError`.
    ```
6. **Дополнительные требования**:
    - Описание модуля в начале файла.
    - Документацию для каждой функции, метода и переменной.
    - Соблюдение стандартов оформления docstring в Python (для Sphinx).
    - В комментариях после `#` строки должны содержать подробное объяснение следующего за ними блока кода.

     Пример формата документации для модуля:

     ```python
     """
     Модуль для работы ассистента программиста
     =========================================================================================

     Этот модуль содержит класс :class:`CodeAssistant`, который используется для работы с различными моделями ИИ,
     такими как Google Gemini и OpenAI, для выполнения задач по обработке кода.

     Пример использования
     --------------------

     Пример использования класса `CodeAssistant`:

     .. code-block:: python

         assistant = CodeAssistant(role='code_checker', lang='ru', model=['gemini'])
         assistant.process_files()
     """
     ```

     Пример формата документации для функций:
     Пример 1.
    ```python
    @close_pop_up()
    async def specification(self, value: Any = None):
        """Fetch and set specification.

        Args:
            value (Any): это значение можно передать в словаре kwargs через ключ {specification = `value`} при определении класса.
            Если `value` был передан, его значение подставляется в поле `ProductFields.specification`.
        """
        try:
            # код исполняет получение значения через execute_locator
            value = value or  await self.driver.execute_locator(self.locator.specification) or ''
        except Exception as ex:
            logger.error('Ошибка получения значения в поле `specification`', ex)
            ...
            return

        # Проверка валидности результата
        if not value:
            logger.debug(f'Невалидный результат {value=}\\nлокатор {self.locator.specification}')
            ...
            return

        # Если значение - список, код преобразовывает его в строку с разделителем `\n`
        if isinstance(value, list):
            value = '\n'.join(map(str, value))

        # Код записывает результат в поле `specification` объекта `ProductFields`
        self.fields.specification = value
        return True

    ```
    Пример 2.
    ```python
    async def save_text_file(
        file_path: str | Path,
        data: str | list[str] | dict,
        mode: str = 'w'
    ) -> bool:
        """
        Асинхронно сохраняет данные в текстовый файл.

        Args:
            file_path (str | Path): Путь к файлу для сохранения.
            data (str | list[str] | dict): Данные для записи.
            mode (str, optional): Режим записи файла ('w' для записи, 'a' для добавления).
        Returns:
            bool: True, если файл успешно сохранен, False в противном случае.
        Raises:
            Exception: При возникновении ошибки при записи в файл.

        Example:
            >>> from pathlib import Path
            >>> file_path = Path('example.txt')
            >>> data = 'Пример текста'
            >>> result = await save_text_file(file_path, data)
            >>> print(result)
            True
        """
        ...
        rest of code
    ```


Сгенерируйте соответствующую документацию для каждого входного файла Python в формате `Markdown`.
## Формат ответа: `.md` (markdown)
# КОНЕЦ ИНСТРУКЦИИ
```