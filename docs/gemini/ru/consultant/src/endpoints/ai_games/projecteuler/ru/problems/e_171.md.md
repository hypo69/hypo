# Анализ кода модуля e_171.md

**Качество кода**
8
- Плюсы
    - Код предоставляет четкое описание задачи Project Euler №171.
    - Описание задачи хорошо структурировано и легко читается.
- Минусы
    - Отсутствует какой-либо код, который можно было бы анализировать, что делает невозможным выявление потенциальных проблем или областей для улучшения в коде.
    - Нет импортов, функций и, следовательно, нет docstring.

**Рекомендации по улучшению**

1.  **Добавить программный код**: Необходимо добавить код для решения задачи, чтобы можно было оценить его эффективность и предложить улучшения. Код должен быть написан на языке Python, включая необходимые импорты.

2.  **Реализация решения**:  Нужно реализовать алгоритм для поиска чисел, сумма квадратов цифр которых является точным квадратом. Этот алгоритм может включать в себя:
    -   Генерацию чисел или перебор в заданном диапазоне.
    -   Вычисление `f(n)` для каждого числа.
    -   Проверку, является ли результат точным квадратом.
    -   Суммирование подходящих чисел.

3.  **Оптимизация**:  Рассмотреть возможные оптимизации для уменьшения времени выполнения, особенно учитывая большой диапазон чисел (до 10^20).
    -  Можно использовать мемоизацию для сохранения уже вычисленных значений `f(n)`.

4.  **Документация**:  Добавить комментарии в формате reStructuredText (RST) ко всем функциям, методам и классам, когда они будут добавлены.  Использовать `logger` для логирования ошибок.

**Оптимизированный код**
```markdown
# Задача No 171
## Суммы квадратов цифр

## Условия
Для положительного целого числа n определим функцию f(n) как сумму квадратов его цифр в десятичной записи.

Например, f(3) = 3<sup>2</sup> = 9, f(25) = 2<sup>2</sup> + 5<sup>2</sup> = 29 и f(442) = 4<sup>2</sup> + 4<sup>2</sup> + 2<sup>2</sup> = 36.

Найдите сумму всех целых чисел n, 0 < n < 10<sup>20</sup>, таких, что f(n) является точным квадратом.

## Пример
Примеров в условии задачи нет.

```
```python
"""
Модуль для решения задачи 171 Project Euler.
=========================================================================================

Этот модуль содержит функции для решения задачи о поиске суммы чисел, 
сумма квадратов цифр которых является точным квадратом.

Пример использования
--------------------

.. code-block:: python

    from src.logger.logger import logger
    result = main()
    print(f"Сумма чисел, удовлетворяющих условию: {result}")
"""
from math import sqrt
from src.utils.jjson import j_loads_ns
from src.logger.logger import logger

def sum_of_squares(n: int) -> int:
    """
    Вычисляет сумму квадратов цифр числа.

    :param n: Целое число, для которого вычисляется сумма квадратов цифр.
    :return: Сумма квадратов цифр числа.
    """
    s = 0
    while n:
        s += (n % 10) ** 2
        n //= 10
    return s

def is_perfect_square(n: int) -> bool:
    """
    Проверяет, является ли число точным квадратом.

    :param n: Целое число, которое проверяется на точность квадрата.
    :return: True, если число является точным квадратом, иначе False.
    """
    if n < 0:
        return False
    root = sqrt(n)
    return int(root) ** 2 == n

def find_sum_of_numbers(limit: int) -> int:
    """
    Находит сумму всех чисел до заданного лимита, сумма квадратов цифр которых является точным квадратом.

    :param limit: Максимальное значение числа (не включительно).
    :return: Сумма подходящих чисел.
    """
    total_sum = 0
    try:
        #  Итерируемся по числам в заданном диапазоне.
        for i in range(1, limit):
           #  Вычисляется сумма квадратов цифр.
            sum_sq = sum_of_squares(i)
            #  Код проверяет, является ли сумма квадратов точным квадратом.
            if is_perfect_square(sum_sq):
                #  Код добавляет число к общей сумме, если условие выполнено.
                total_sum += i
    except Exception as ex:
         logger.error(f'Ошибка в функции `find_sum_of_numbers`: {ex}')
         return 0 #  Возвращает ноль при возникновении ошибки.
    return total_sum

def main() -> int:
    """
    Основная функция для запуска решения задачи.

    :return: Сумма чисел, удовлетворяющих условию задачи.
    """
    limit = 10**6 # устанавливаем лимит для отладки, для полного решения надо 10**20
    result = find_sum_of_numbers(limit)
    return result

if __name__ == '__main__':
    #  Код исполняет запуск основной функции и выводит результат.
    result = main()
    print(f"Сумма чисел, удовлетворяющих условию: {result}")
```