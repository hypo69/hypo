# `run.py`

## Обзор

Этот файл является точкой входа для Telegram-бота, использующего aiogram. Он инициализирует бота, диспетчер, подключает промежуточное ПО для троттлинга, и запускает бота в режиме поллинга.

## Оглавление

1. [Обзор](#обзор)
2. [Импорты](#импорты)
3. [Глобальные переменные](#глобальные-переменные)
4. [Функции](#функции)
    - [`main`](#main)
5. [Точка входа](#точка-входа)

## Импорты

Импортируются необходимые библиотеки:

- `asyncio`: для асинхронного программирования.
- `betterlogging as logging`: для улучшения вывода логов.
- `os`: для работы с операционной системой, например, для чтения переменных окружения.
- `aiogram`: библиотека для создания Telegram-ботов.
- `dotenv`: для загрузки переменных окружения из файла `.env`.
- `apps.hendlers.router`: роутер для обработки сообщений от бота.
- `middlewares.throttling.ThrottlingMiddleware`: промежуточное ПО для ограничения частоты запросов.

## Глобальные переменные

- `dp`: экземпляр `Dispatcher` из `aiogram`, используется для регистрации обработчиков и запуска бота.

## Функции

### `main`

**Описание**:
Асинхронная функция, которая инициализирует бота, подключает промежуточное ПО, подключает роутер и запускает бота в режиме поллинга.

**Параметры**:
- Нет

**Возвращает**:
- `None`

**Вызывает исключения**:
- Нет

```python
async def main() -> None:
    """
    Args:
        None

    Returns:
         None: Запускает бота в режиме поллинга.

    Raises:
        None
    """
    bot = Bot(os.getenv('TOKEN'),)
    dp.message.middleware(ThrottlingMiddleware())
    dp.include_router(router)
    await dp.start_polling(bot)
```

## Точка входа

Этот блок кода запускает основную функцию `main`, если скрипт запускается напрямую.
Настраивается логгирование и запускается асинхронная функция `main` через `asyncio.run()`.

```python
if __name__ == "__main__":
    logging.basic_colorized_config(
        level=logging.INFO,
        format='%(asctime)s - [%(levelname)s] - %(name)s - '
               '(%(filename)s).%(funcName)s(%(lineno)d) - %(message)s',
        datefmt='%H:%M:%S'
    )
    asyncio.run(main())
```