# Модуль управления категориями Aliexpress

## Обзор

Модуль предназначен для управления категориями товаров на платформе Aliexpress. Он предоставляет функциональность для получения ссылок на товары в категории, обновления категорий на основе данных с сайта и операций с базой данных.

## Подробнее

Этот модуль играет важную роль в проекте, обеспечивая взаимодействие с платформой Aliexpress для управления категориями товаров. Он автоматизирует процессы получения списка товаров, обновления категорий и операций с базой данных, что упрощает работу с данными о товарах и категориях.

## Содержание

- [Функции модуля](#функции-модуля)
  - [get_list_products_in_category(s)](#get_list_products_in_categorys)
  - [get_prod_urls_from_pagination(s)](#get_prod_urls_from_paginations)
  - [update_categories_in_scenario_file(s, scenario_filename)](#update_categories_in_scenario_files-scenario_filename)
  - [get_list_categories_from_site(s, scenario_file, brand='')](#get_list_categories_from_sites-scenario_file-brand)
- [Класс DBAdaptor](#класс-dbadaptor)
  - [Методы](#методы)
    - [select(cat_id, parent_id, project_cat_id)](#selectcat_id-parent_id-project_cat_id)
    - [insert()](#insert)
    - [update()](#update)
    - [delete()](#delete)

## Функции модуля

### `get_list_products_in_category(s)`

Считывает URL товаров со страницы категории. Если есть несколько страниц с товарами, функция будет перелистывать все страницы.

**Как работает функция**:
Функция принимает экземпляр поставщика `s` и считывает URL товаров со страницы категории. Если категория содержит несколько страниц с товарами, функция автоматически перелистывает все страницы, собирая URL товаров с каждой из них.

**Аргументы**:

- `s` (`Supplier`): Экземпляр поставщика.

**Возвращает**:

- `list[str]`: Список URL продуктов в категории.

**Примеры**:

```python
# Пример использования функции get_list_products_in_category
products = get_list_products_in_category(supplier)
```

### `get_prod_urls_from_pagination(s)`

Собирает ссылки на товары с страницы категории с перелистыванием страниц.

**Как работает функция**:
Функция принимает экземпляр поставщика `s` и собирает ссылки на товары с текущей страницы категории. Если на странице есть пагинация, функция переходит на следующую страницу и продолжает сбор ссылок, пока не достигнет последней страницы.

**Аргументы**:

- `s` (`Supplier`): Экземпляр поставщика.

**Возвращает**:

- `list[str]`: Список ссылок на товары.

**Примеры**:

```python
# Пример использования функции get_prod_urls_from_pagination
product_urls = get_prod_urls_from_pagination(supplier)
```

### `update_categories_in_scenario_file(s, scenario_filename)`

Проверяет изменения категорий на сайте и обновляет файл сценария.

**Как работает функция**:
Функция принимает экземпляр поставщика `s` и имя файла сценария `scenario_filename`. Она проверяет, есть ли изменения в категориях на сайте, и если есть, обновляет соответствующий файл сценария.

**Аргументы**:

- `s` (`Supplier`): Экземпляр поставщика.
- `scenario_filename` (`str`): Имя файла сценария для обновления.

**Возвращает**:

- `bool`: `True`, если обновление прошло успешно.

**Примеры**:

```python
# Пример использования функции update_categories_in_scenario_file
updated = update_categories_in_scenario_file(supplier, "scenario_file.json")
```

### `get_list_categories_from_site(s, scenario_file, brand='')`

Получает список категорий с сайта на основе файла сценария.

**Как работает функция**:
Функция принимает экземпляр поставщика `s`, имя файла сценария `scenario_file` и опциональное имя бренда `brand`. Она извлекает список категорий с сайта на основе данных, указанных в файле сценария.

**Аргументы**:

- `s` (`Supplier`): Экземпляр поставщика.
- `scenario_file` (`str`): Имя файла сценария.
- `brand` (`str`, `optional`): Опциональное имя бренда.

**Возвращает**:

- `list[str]`: Список категорий.

**Примеры**:

```python
# Пример использования функции get_list_categories_from_site
categories = get_list_categories_from_site(supplier, "scenario_file.json", brand="ExampleBrand")
```

## Класс `DBAdaptor`

Предоставляет методы для выполнения операций с базой данных, таких как `SELECT`, `INSERT`, `UPDATE` и `DELETE`.

**Как работает класс**:
Класс `DBAdaptor` предоставляет интерфейс для взаимодействия с базой данных, упрощая выполнение основных операций CRUD (Create, Read, Update, Delete) для работы с категориями.

### Методы

#### `select(cat_id, parent_id, project_cat_id)`

Выбирает записи из базы данных.

**Как работает функция**:
Метод `select` выполняет выборку записей из базы данных на основе заданных критериев, таких как `cat_id`, `parent_id` и `project_cat_id`.

**Аргументы**:

- `cat_id`: Идентификатор категории.
- `parent_id`: Идентификатор родительской категории.
- `project_cat_id`: Идентификатор категории проекта.

**Примеры**:

```python
db = DBAdaptor()
db.select(cat_id=123)
```

#### `insert()`

Вставляет новые записи в базу данных.

**Как работает функция**:
Метод `insert` добавляет новые записи в базу данных. Параметры для вставки определяются атрибутами экземпляра класса.

**Примеры**:

```python
db = DBAdaptor()
db.insert()
```

#### `update()`

Обновляет записи в базе данных.

**Как работает функция**:
Метод `update` обновляет существующие записи в базе данных. Критерии обновления и новые значения определяются атрибутами экземпляра класса.

**Примеры**:

```python
db = DBAdaptor()
db.update()
```

#### `delete()`

Удаляет записи из базы данных.

**Как работает функция**:
Метод `delete` удаляет записи из базы данных на основе заданных критериев, таких как `cat_id`.

**Примеры**:

```python
db = DBAdaptor()
db.delete()
```