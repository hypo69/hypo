# translate_product_fields.py

```markdown
## Файл `hypotez/src/translators/translate_product_fields.py`

Этот файл содержит функции для управления переводами полей товаров. Он служит связующим звеном между словарем полей товара, таблицей переводов и переводчиками.

**Описание функций:**

* **`get_translations_from_presta_translations_table(product_reference, credentials, i18n)`:**
    * **Цель:** Получает переводы полей товара из таблицы переводов Престашоп.
    * **Входные параметры:**
        * `product_reference`: Идентификатор товара.
        * `credentials`: Данные для подключения к базе данных переводов Престашоп.
        * `i18n` (необязательно): Код языка перевода (например, `en_EN`, `ru-RU`).
    * **Действия:**
        1. Получает данные подключения к базе переводов (`credentials`).
        2. Создаёт условие поиска в базе (`search_filter`) по `product_reference`.
        3. Использует `ProductTranslationsManager` для выборки записей из базы данных, соответствующих условию поиска.
        4. Возвращает список словарей с переводами.  Возвращает пустой список, если ничего не найдено.
    * **Возвращаемое значение:** Список словарей с переводами.

* **`insert_new_translation_to_presta_translations_table(record, credentials)`:**
    * **Цель:** Добавляет новую запись перевода в таблицу переводов Престашоп.
    * **Входные параметры:**
        * `record`: Словарь с данными для новой записи перевода.
        * `credentials`: Данные для подключения к базе данных переводов Престашоп.
    * **Действия:**
        1. Использует `ProductTranslationsManager` для добавления новой записи.
    * **Возвращаемое значение:**  Нет (функция изменяет базу данных напрямую).

* **`translate_record(record, from_locale, to_locale)`:**
    * **Цель:** Переводит поля товара.
    * **Входные параметры:**
        * `record`: Словарь с полями товара для перевода.
        * `from_locale`: Исходный язык (например, `fr_FR`).
        * `to_locale`: Целевой язык (например, `en_EN`).
    * **Действия:**
        1. Использует функцию `translate` из модуля `src.ai` для выполнения перевода.
        2. Обрабатывает результат перевода.  (необходимо заполнить недостающий код `...`)
        3. Возвращает словарь с переведёнными полями.
    * **Возвращаемое значение:** Словарь с переведенными полями товара.


**Важные замечания:**

* Файл импортирует необходимые модули из других частей приложения (например, `ProductTranslationsManager`, `translate`, `gs`, `record`, `PrestaShop`).
* Недостающая часть кода (`...`) в функции `translate_record` требует реализации логики обработки результата перевода, например, проверки на ошибки и преобразования данных.
* Функции используют менеджер базы данных `ProductTranslationsManager` для взаимодействия с таблицей переводов.
* Файл содержит много комментариев, описывающих функции и их поведение.
* Параметры `credentials` должны содержать необходимые данные для аутентификации и подключения к базе данных переводов Престашоп.
*  `i18n` параметр в `get_translations_from_presta_translations_table` не используется, но его наличие предполагает возможность в дальнейшем фильтровать переводы по языку.
*  Необходимо доработать функцию `translate_record` добавив в неё обработку результатов.


```