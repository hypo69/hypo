# Модуль для отправки рекламных объявлений в группы Facebook

## Обзор

Модуль `start_posting.py` предназначен для автоматической публикации рекламных объявлений в группы Facebook. Он использует веб-драйвер для взаимодействия с сайтом Facebook и выполняет заданные рекламные кампании.

## Подробней

Этот модуль является частью проекта `hypotez` и отвечает за автоматизацию процесса размещения рекламы в группах Facebook. Он использует драйвер веб-браузера для эмуляции действий пользователя на сайте Facebook, таких как вход в систему и публикация объявлений в группах. Модуль предназначен для работы в фоновом режиме и периодического выполнения рекламных кампаний.

## Функции

### `FacebookPromoter`

```python
promoter:FacebookPromoter = FacebookPromoter(d, group_file_paths=filenames, no_video = True)
```

**Назначение**: Создание экземпляра класса `FacebookPromoter` для управления рекламными кампаниями в Facebook.

**Как работает функция**:
Функция инициализирует объект `FacebookPromoter`, передавая ему драйвер веб-браузера, список файлов с информацией о группах и флаг, указывающий на необходимость исключения видео из рекламных материалов.

**Параметры**:
- `d` (Driver): Объект драйвера веб-браузера, используемый для взаимодействия с сайтом Facebook.
- `group_file_paths` (list[str]): Список путей к файлам, содержащим информацию о группах Facebook, в которых будет размещаться реклама.
- `no_video` (bool): Флаг, указывающий на необходимость исключения видео из рекламных материалов. По умолчанию `True`.

**Возвращает**:
- `FacebookPromoter`: Созданный экземпляр класса `FacebookPromoter`.

### Цикл `while True`

```python
try:
    while True:
        
        promoter.run_campaigns(campaigns = copy.copy(campaigns), group_file_paths = filenames)
        print(f"Going sleep {time.localtime}")
        time.sleep(180)
        ...

        
except KeyboardInterrupt:
    logger.info("Campaign promotion interrupted.")
```

**Назначение**: Бесконечный цикл для запуска рекламных кампаний с заданным интервалом.

**Как работает функция**:
Бесконечный цикл запускает рекламные кампании, используя метод `run_campaigns` объекта `promoter`. После запуска кампании скрипт засыпает на 180 секунд, а затем цикл повторяется. Цикл прерывается при возникновении исключения `KeyboardInterrupt` (например, при нажатии Ctrl+C), после чего в лог записывается сообщение о прерывании кампании.

Внутри цикла происходят следующие действия и преобразования:

A -> B -> C

Где:

A: `promoter.run_campaigns(campaigns = copy.copy(campaigns), group_file_paths = filenames)` - запуск рекламных кампаний с использованием списка кампаний и списка файлов с информацией о группах.
B: `print(f"Going sleep {time.localtime}")` - вывод в консоль сообщения о переходе в режим ожидания с указанием текущего времени.
C: `time.sleep(180)` - приостановка выполнения скрипта на 180 секунд.

**Параметры**:
- `campaigns` (list): Список рекламных кампаний для запуска.
- `group_file_paths` (list[str]): Список путей к файлам, содержащим информацию о группах Facebook.

**Вызывает исключения**:
- `KeyboardInterrupt`: Возникает при прерывании выполнения скрипта пользователем (например, при нажатии Ctrl+C).