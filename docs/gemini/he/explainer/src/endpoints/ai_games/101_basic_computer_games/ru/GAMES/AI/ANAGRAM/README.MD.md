## <algorithm>

1. **התחלה:**
   - התוכנית מתחילה את פעולתה.
   
2. **הגדרת מפתח API:**
    - המשתמש מתבקש להזין את מפתח ה-API של Google Gemini.
    - לדוגמה: `AIzaSyCprZ9Tr-rB_xFau5zgWsKPM_6W-FmUntk` או מפתח אישי אחר.

3. **קלט אותיות:**
   - המשתמש מתבקש להזין אותיות.
   - דוגמה: "сон", "апельсин", "12345абвг".
   
4. **ניקוי הקלט:**
    - הקלט עובר ניקוי, הסרת כל התווים שאינם אותיות קיריליות (רוסיות).
    - דוגמה: הקלט "12345абвг" הופך ל-"абвг".
    
5. **בדיקת קלט ריק:**
   - בודקים אם הקלט ריק לאחר הניקוי.
   - אם ריק, התוכנית חוזרת לשלב 3 (קלט אותיות).
    
6. **יצירת הפקודה (prompt):**
   - יצירת פקודה למודל Gemini, המבקשת למצוא אנאגרמה מהאותיות שסופקו.
   - דוגמה: אם הקלט הוא "сон", הפקודה למודל תכלול את המילים "сон".
    
7. **שליחת שאילתה ל-Gemini:**
    - המערכת שולחת את הפקודה למודל Gemini.
    - דוגמה: השאילתה שנשלחת ל-API של Google Gemini.
   
8. **קבלת תשובה מ-Gemini:**
    - המערכת מקבלת תשובה מהמודל.
    - דוגמה: המודל מחזיר את האנאגרמה "нос".
    
9. **הצגת התוצאה:**
    - התוכנית מציגה את האנאגרמה או הודעה "Нет анаграмм" אם לא נמצאה אנאגרמה.
    - דוגמה: עבור "сон" מוצג "нос", עבור "апельсин" מוצג "спаниель".
    
10. **חזרה לשלב 3:**
    - התוכנית חוזרת לשלב 3 כדי לקבל קלט אותיות חדש.

## <mermaid>

```mermaid
flowchart TD
    Start[התחלה] --> InputAPIKey[קבל מפתח API];
    InputAPIKey --> InputLetters[קבל אותיות מהמשתמש];
    InputLetters --> CleanInput[נקה קלט (הסר תווים שאינם קיריליים)];
    CleanInput --> CheckEmptyInput{האם הקלט ריק?};
    CheckEmptyInput -- כן --> InputLetters;
    CheckEmptyInput -- לא --> GeneratePrompt[צור פקודה ל-Gemini];
    GeneratePrompt --> SendToGemini[שלח פקודה ל-Gemini];
    SendToGemini --> ReceiveFromGemini[קבל תשובה מ-Gemini];
    ReceiveFromGemini --> DisplayResult[הצג תוצאה (אנאגרמה או "אין אנאגרמה")];
    DisplayResult --> InputLetters;
```

## <explanation>

**ייבואים (Imports):**

*   `import google.generativeai as genai`: מייבא את הספריה `google.generativeai` ונותן לה את הכינוי `genai`. ספריה זו מאפשרת אינטראקציה עם מודלים של Google Gemini, כגון שליחת בקשות וקבלת תגובות. היא מספקת את הכלים הדרושים להפעלת מודלים של AI לצורך יצירת טקסט או עיבוד שפה טבעית. אין תלות ישירה בחבילות `src`.
*   `import re`: מייבא את הספרייה `re` (Regular Expression). הספרייה מאפשרת עבודה עם ביטויים רגולריים, שמשמשים לחיפוש, התאמה ומניפולציה של מחרוזות טקסט. כאן משתמשים בה כדי לסנן תווים שאינם אותיות קיריליות. אין תלות ישירה בחבילות `src`.

**מחלקות (Classes):**

*   `GoogleGenerativeAI`:
    *   **תפקיד:** מחלקה זו מכילה את כל הלוגיקה הדרושה לאינטראקציה עם מודל Gemini. היא מכסה את הגדרת המודל, יצירת פקודות ושליחתם ל-API של גוגל. 
    *   **מאפיינים:**
        *  `api_key`: מפתח API המשמש לאימות מול Google Gemini.
        *  `model`: מופע של המודל `genai.GenerativeModel` של Google Gemini.
        * `system_instruction`: הנחיה מערכתית (system prompt) מוגדרת מראש, שמסבירה ל-Gemini את המטרה - מציאת אנאגרמות.
    *   **שיטות:**
        *   `__init__(self, api_key)`: אתחול המחלקה. מקבלת את מפתח ה-API, מאתחלת את המודל, ומגדירה את ה-prompt המערכתי.
        *   `generate_anagram(self, q)`: מקבלת מחרוזת (אותיות), שולחת אותה ל-Gemini כפקודה ומחזירה את האנאגרמה או הודעת שגיאה.

**פונקציות (Functions):**

*  אין פונקציות עצמאיות בקוד הזה. הלוגיקה מתבצעת בתוך שיטות המחלקה `GoogleGenerativeAI`.

**משתנים (Variables):**

*   `api_key`: משתנה מסוג מחרוזת המכיל את מפתח ה-API של Google Gemini, משמש לאימות גישה לשירות.
*   `q`: משתנה מסוג מחרוזת המכיל את האותיות שהמשתמש הזין. הוא עובר ניקוי ומשמש כקלט למודל Gemini.
*   `system_instruction`: משתנה מסוג מחרוזת המכיל את הנחיה המערכתית (system prompt) עבור מודל Gemini. הוא מסביר למודל מה המטרה שלו (למצוא אנאגרמה).
*   `model`: משתנה מסוג `genai.GenerativeModel` המייצג את מודל ה-Gemini.
*  `result`: משתנה מסוג מחרוזת המכיל את התשובה שהתקבלה מהמודל Gemini, שהיא האנאגרמה או הודעה "Нет анаграмм".

**בעיות אפשריות ותחומים לשיפור:**

*   **טיפול בשגיאות API:** הקוד מטפל בשגיאות כלליות באמצעות `try...except`. ייתכן וצריך טיפול ספציפי יותר בשגיאות API, כמו שגיאות אימות, שגיאות חיבור או שגיאות קצב בקשה.
*   **תגובות ריקות:** אם המודל מחזיר תגובה ריקה, הקוד לא מטפל בכך ספציפית ויחזיר אותה.
*   **יעילות:** אם יש צורך להשתמש במודל פעמים רבות, כדאי לשקול שימוש ב-cache כדי לחסוך זמן ומשאבים.
*   **הנחיה (prompt) למודל:** ניתן להגדיר הנחייה (prompt) טובה יותר שתאפשר למודל לייצר אנאגרמות בצורה יעילה ומדויקת יותר.
*   **קריאות הקוד:** ייתכן ורצוי לפרק חלק מהלוגיקה לפונקציות קטנות יותר, דבר שיכול לשפר את קריאות הקוד.

**שרשרת קשרים עם חלקים אחרים בפרויקט:**
* לקוד זה אין קשר ישיר לחלקים אחרים בפרויקט, מכיוון שהוא סקריפט עצמאי המתמקד ביישום משימת חיפוש אנאגרמות באמצעות Google Gemini.