# Модуль для отправки мероприятий в группы Facebook

## Обзор

Модуль `src.endpoints.advertisement.facebook.start_event` предназначен для автоматической отправки мероприятий в различные группы Facebook. Он использует веб-драйвер для взаимодействия с Facebook и загружает данные о группах из JSON-файлов.

## Подробней

Этот модуль является частью системы автоматизации маркетинга `hypotez`. Он позволяет автоматически публиковать информацию о мероприятиях в группах Facebook, используя данные, хранящиеся в JSON-файлах. Это упрощает процесс продвижения мероприятий и экономит время маркетологов.

## Классы

### `FacebookPromoter`

**Описание**: Класс `FacebookPromoter` отвечает за продвижение мероприятий в Facebook.

**Как работает класс**:
1.  Инициализируется с драйвером веб-браузера и списком путей к файлам JSON, содержащим информацию о группах.
2.  Предоставляет метод `run_events` для запуска процесса публикации мероприятий в указанных группах.
3.  Внутри себя использует веб-драйвер для навигации по Facebook и выполнения действий по публикации.

## Функции

### `run_events`

```python
def run_events(events_names: list, group_file_paths: list[str]):
    """Запускает цикл продвижения мероприятий в группах Facebook.

    Args:
        events_names (list): Список названий мероприятий для публикации.
        group_file_paths (list[str]): Список путей к JSON-файлам с данными о группах.

    Raises:
        Exception: Если происходит ошибка во время выполнения.

    Example:
        >>> promoter.run_events(events_names=["event1", "event2"], group_file_paths=["groups1.json", "groups2.json"])
    """
```

**Назначение**: Функция `run_events` запускает цикл продвижения мероприятий в группах Facebook.

**Как работает функция**:

1.  Итерируется по списку файлов групп, пытаясь открыть каждый файл для чтения.
2.  Для каждого файла группы извлекает данные о группах, используя функцию `j_loads`.
3.  Проверяет, является ли группа управляемой. Если нет, продолжает выполнение.
4.  Итерируется по списку названий событий, выбирая случайное название события.
5.  Вызывает функцию `post_event_to_group` для публикации события в текущей группе.
6.  После успешной публикации засыпает на случайное время.

**Параметры**:

*   `events_names` (list): Список названий мероприятий для публикации.
*   `group_file_paths` (list[str]): Список путей к JSON-файлам с данными о группах.

**Возвращает**:

*   `None`: Функция ничего не возвращает.

**Вызывает исключения**:

*   `Exception`: Если происходит ошибка во время выполнения.

### Основной блок try-except

```python
try:
    while True:
        logger.debug(f"waikig up {time.strftime('%H:%M:%S')}",None,False)
        promoter.run_events(events_names = events_names, group_file_paths = filenames)
        logger.debug(f"going to sleep at {time.strftime('%H:%M:%S')}",None,False)
        time.sleep(7200)

except KeyboardInterrupt:
    logger.info("Campaign promotion interrupted.")
```

**Назначение**: Главный цикл программы, который запускает продвижение мероприятий в Facebook.

**Как работает функция**:

1.  Запускает бесконечный цикл, в котором происходит продвижение мероприятий.
2.  В начале каждой итерации цикла логирует время начала работы.
3.  Вызывает метод `run_events` объекта `promoter` для публикации событий в группах.
4.  После публикации логирует время ухода в спящий режим.
5.  Засыпает на 7200 секунд (2 часа).
6.  Если пользователь прерывает выполнение программы с помощью `KeyboardInterrupt`, логирует сообщение о прерывании продвижения.

**Параметры**:

*   `events_names` (list): Список названий мероприятий для публикации.
*   `group_file_paths` (list[str]): Список путей к JSON-файлам с данными о группах.

**Возвращает**:

*   `None`: Функция ничего не возвращает.

**Вызывает исключения**:

*   `KeyboardInterrupt`: Если пользователь прерывает выполнение программы.