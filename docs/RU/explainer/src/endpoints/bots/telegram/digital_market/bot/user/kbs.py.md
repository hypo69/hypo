## –ò–ù–°–¢–†–£–ö–¶–ò–Ø:

–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥ –ø–æ–¥—Ä–æ–±–Ω–æ –∏ –æ–±—ä—è—Å–Ω–∏ –µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å. –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å —Ç—Ä–∏ —Ä–∞–∑–¥–µ–ª–∞:

1. **<–∞–ª–≥–æ—Ä–∏—Ç–º>**: –û–ø–∏—à–∏ —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å –≤ –≤–∏–¥–µ –ø–æ—à–∞–≥–æ–≤–æ–π –±–ª–æ–∫-—Å—Ö–µ–º—ã, –≤–∫–ª—é—á–∞—è –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –±–ª–æ–∫–∞, –∏ –ø—Ä–æ–∏–ª–ª—é—Å—Ç—Ä–∏—Ä—É–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏, –∫–ª–∞—Å—Å–∞–º–∏ –∏–ª–∏ –º–µ—Ç–æ–¥–∞–º–∏.
2.  **<mermaid>**: –ù–∞–ø–∏—à–∏ –∫–æ–¥ –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ `mermaid`, –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∏ –æ–±—ä—è—Å–Ω–∏ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏,
    –∫–æ—Ç–æ—Ä—ã–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–∏–∞–≥—Ä–∞–º–º—ã.
    **–í–ê–ñ–ù–û!** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ –¥–∏–∞–≥—Ä–∞–º–º–µ `mermaid`,
    –∏–º–µ—é—Ç –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –∏ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞. –ò–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤—Ä–æ–¥–µ `A`, `B`, `C`, –∏ —Ç.–¥., –Ω–µ –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è!

    **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –ï—Å–ª–∏ –≤ –∫–æ–¥–µ –µ—Å—Ç—å –∏–º–ø–æ—Ä—Ç `import header`, –¥–æ–±–∞–≤—å—Ç–µ –±–ª–æ–∫ `mermaid` flowchart, –æ–±—ä—è—Å–Ω—è—é—â–∏–π `header.py`:
    ```mermaid
    flowchart TD
        Start --> Header[<code>header.py</code><br> Determine Project Root]

        Header --> import[Import Global Settings: <br><code>from src import gs</code>]
    ```

3.  **<–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ>**: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è:
    - **–ò–º–ø–æ—Ä—Ç—ã**: –ò—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ –≤–∑–∞–∏–º–æ—Å–≤—è–∑—å —Å –¥—Ä—É–≥–∏–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏ `src.`.
    - **–ö–ª–∞—Å—Å—ã**: –ò—Ö —Ä–æ–ª—å, –∞—Ç—Ä–∏–±—É—Ç—ã, –º–µ—Ç–æ–¥—ã –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞.
    - **–§—É–Ω–∫—Ü–∏–∏**: –ò—Ö –∞—Ä–≥—É–º–µ–Ω—Ç—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ –ø—Ä–∏–º–µ—Ä—ã.
    - **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**: –ò—Ö —Ç–∏–ø—ã –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ.
    - –í—ã–¥–µ–ª–∏—Ç–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏–ª–∏ –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è.

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ, –ø–æ—Å—Ç—Ä–æ–π—Ç–µ —Ü–µ–ø–æ—á–∫—É –≤–∑–∞–∏–º–æ—Å–≤—è–∑–µ–π —Å –¥—Ä—É–≥–∏–º–∏ —á–∞—Å—Ç—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ).

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—Å–µ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞.
## –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞: `.md` (markdown)
**–ö–û–ù–ï–¶ –ò–ù–°–¢–†–£–ö–¶–ò–ò**

## <–∞–ª–≥–æ—Ä–∏—Ç–º>

**1. `main_user_kb(user_id: int)`**

   *   **–ù–∞—á–∞–ª–æ:** –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `user_id` (—Ü–µ–ª–æ–µ —á–∏—Å–ª–æ) –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç.
   *   **–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è `InlineKeyboardBuilder` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã.
   *   **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫:** –î–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫–Ω–æ–ø–∫–∏ "üë§ –ú–æ–∏ –ø–æ–∫—É–ø–∫–∏", "üõç –ö–∞—Ç–∞–ª–æ–≥", "‚ÑπÔ∏è –û –º–∞–≥–∞–∑–∏–Ω–µ" –∏ "üåü –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∞–≤—Ç–æ—Ä–∞ üåü" —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ callback_data –∏–ª–∏ URL.
   *   **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ `user_id` –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ `settings.ADMIN_IDS`. –ï—Å–ª–∏ –¥–∞, —Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "‚öôÔ∏è –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å".
     *   _–ü—Ä–∏–º–µ—Ä:_ –ï—Å–ª–∏ `user_id` —Ä–∞–≤–µ–Ω 12345, –∏ 12345 –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ `settings.ADMIN_IDS`, —Ç–æ –∫–Ω–æ–ø–∫–∞ "‚öôÔ∏è –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å" –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞.
   *   **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è:** –ö–Ω–æ–ø–∫–∏ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –≤ –æ–¥–∏–Ω —Å—Ç–æ–ª–±–µ—Ü —Å –ø–æ–º–æ—â—å—é `kb.adjust(1)`.
   *   **–í–æ–∑–≤—Ä–∞—Ç:** –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤—É—é `InlineKeyboardMarkup`.
   *   **–ö–æ–Ω–µ—Ü.**

**2. `catalog_kb(catalog_data: List[Category])`**

   *   **–ù–∞—á–∞–ª–æ:** –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ `Category` –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç.
   *   **–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è `InlineKeyboardBuilder`.
   *   **–ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:** –ü—Ä–æ—Ö–æ–¥–∏—Ç—Å—è –ø–æ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ `catalog_data` –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫—É —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ callback_data –≤ –≤–∏–¥–µ `category_{category.id}`.
     *   _–ü—Ä–∏–º–µ—Ä:_ –ï—Å–ª–∏ –µ—Å—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Å `category.category_name = "–û–¥–µ–∂–¥–∞"` –∏ `category.id = 1`, —Ç–æ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–û–¥–µ–∂–¥–∞" —Å `callback_data = "category_1"`.
   *   **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "–ù–∞ –≥–ª–∞–≤–Ω—É—é":** –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é" —Å `callback_data="home"`.
   *   **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è:** –ö–Ω–æ–ø–∫–∏ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –≤ –¥–≤–∞ —Å—Ç–æ–ª–±—Ü–∞ —Å –ø–æ–º–æ—â—å—é `kb.adjust(2)`.
   *   **–í–æ–∑–≤—Ä–∞—Ç:** –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤—É—é `InlineKeyboardMarkup`.
   *   **–ö–æ–Ω–µ—Ü.**

**3. `purchases_kb()`**

   *   **–ù–∞—á–∞–ª–æ:** –§—É–Ω–∫—Ü–∏—è –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤.
   *   **–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è `InlineKeyboardBuilder`.
   *   **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫:** –î–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫–Ω–æ–ø–∫–∏ "üóë –°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∫—É–ø–∫–∏" –∏ "üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é" —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ `callback_data`.
   *   **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è:** –ö–Ω–æ–ø–∫–∏ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –≤ –æ–¥–∏–Ω —Å—Ç–æ–ª–±–µ—Ü —Å –ø–æ–º–æ—â—å—é `kb.adjust(1)`.
   *   **–í–æ–∑–≤—Ä–∞—Ç:** –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤—É—é `InlineKeyboardMarkup`.
   *   **–ö–æ–Ω–µ—Ü.**

**4. `product_kb(product_id, price, stars_price)`**

   *   **–ù–∞—á–∞–ª–æ:** –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `product_id` (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–¥—É–∫—Ç–∞), `price` (—Ü–µ–Ω–∞) –∏ `stars_price` (—Ü–µ–Ω–∞ –≤ –∑–≤–µ–∑–¥–∞—Ö) –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç—ã.
   *   **–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è `InlineKeyboardBuilder`.
   *   **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –æ–ø–ª–∞—Ç—ã:** –î–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫–Ω–æ–ø–∫–∏ –¥–ª—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –Æ–ö–∞—Å—Å–∞, Robocassa –∏ –∑–≤–µ–∑–¥–∞–º–∏, –∫–∞–∂–¥–∞—è —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º `callback_data`.
     *   _–ü—Ä–∏–º–µ—Ä:_ –ï—Å–ª–∏ `product_id = 12`, `price = 100`, `stars_price = 50`, —Ç–æ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –∫–Ω–æ–ø–∫–∏ —Å `callback_data`  `buy_yukassa_12_100`, `buy_robocassa_12_100` –∏ `buy_stars_12_50`.
   *   **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:** –î–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫–Ω–æ–ø–∫–∏ "üõç –ù–∞–∑–∞–¥" –∏ "üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é" —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ `callback_data`.
   *   **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è:** –ö–Ω–æ–ø–∫–∏ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –≤ –¥–≤–∞ —Å—Ç–æ–ª–±—Ü–∞ —Å –ø–æ–º–æ—â—å—é `kb.adjust(2)`.
   *   **–í–æ–∑–≤—Ä–∞—Ç:** –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤—É—é `InlineKeyboardMarkup`.
   *   **–ö–æ–Ω–µ—Ü.**

**5. `get_product_buy_youkassa(price)`**

   *   **–ù–∞—á–∞–ª–æ:** –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `price` –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç.
   *   **–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã:** –°–æ–∑–¥–∞–µ—Ç—Å—è `InlineKeyboardMarkup` –Ω–∞–ø—Ä—è–º—É—é, —Å –∫–Ω–æ–ø–∫–æ–π –¥–ª—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –Æ–ö–∞—Å—Å–∞.
     *   _–ü—Ä–∏–º–µ—Ä:_ –ï—Å–ª–∏ `price = 200`, —Ç–æ –∫–Ω–æ–ø–∫–∞ –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Ç–µ–∫—Å—Ç "–û–ø–ª–∞—Ç–∏—Ç—å 200‚ÇΩ" –∏ `pay=True`.
   *   **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –æ—Ç–º–µ–Ω—ã:** –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∏—Ç—å" —Å `callback_data = "home"`.
   *   **–í–æ–∑–≤—Ä–∞—Ç:** –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤—É—é `InlineKeyboardMarkup`.
   *   **–ö–æ–Ω–µ—Ü.**

**6. `get_product_buy_robocassa(price: int, payment_link: str)`**

   *   **–ù–∞—á–∞–ª–æ:** –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `price` –∏ `payment_link` –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç—ã.
   *   **–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã:** –°–æ–∑–¥–∞–µ—Ç—Å—è `InlineKeyboardMarkup` –Ω–∞–ø—Ä—è–º—É—é, —Å –∫–Ω–æ–ø–∫–æ–π –¥–ª—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ Robocassa.
     *   _–ü—Ä–∏–º–µ—Ä:_ –ï—Å–ª–∏ `price = 300` –∏ `payment_link = "https://example.com/payment"`, —Ç–æ –∫–Ω–æ–ø–∫–∞ –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Ç–µ–∫—Å—Ç "–û–ø–ª–∞—Ç–∏—Ç—å 300‚ÇΩ" –∏ `web_app` —Å–æ —Å—Å—ã–ª–∫–æ–π.
   *   **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –æ—Ç–º–µ–Ω—ã:** –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∏—Ç—å" —Å `callback_data = "home"`.
   *   **–í–æ–∑–≤—Ä–∞—Ç:** –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤—É—é `InlineKeyboardMarkup`.
   *   **–ö–æ–Ω–µ—Ü.**

**7. `get_product_buy_stars(price)`**

   *   **–ù–∞—á–∞–ª–æ:** –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `price` –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç.
   *   **–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã:** –°–æ–∑–¥–∞–µ—Ç—Å—è `InlineKeyboardMarkup` –Ω–∞–ø—Ä—è–º—É—é, —Å –∫–Ω–æ–ø–∫–æ–π –¥–ª—è –æ–ø–ª–∞—Ç—ã –∑–≤–µ–∑–¥–∞–º–∏.
     *   _–ü—Ä–∏–º–µ—Ä:_ –ï—Å–ª–∏ `price = 40`, —Ç–æ –∫–Ω–æ–ø–∫–∞ –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Ç–µ–∫—Å—Ç "–û–ø–ª–∞—Ç–∏—Ç—å 40 ‚≠ê" –∏ `pay=True`.
   *   **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –æ—Ç–º–µ–Ω—ã:** –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∏—Ç—å" —Å `callback_data = "home"`.
   *   **–í–æ–∑–≤—Ä–∞—Ç:** –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤—É—é `InlineKeyboardMarkup`.
   *   **–ö–æ–Ω–µ—Ü.**

## <mermaid>

```mermaid
flowchart TD
    subgraph –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
        StartMainUserKb(–ù–∞—á–∞–ª–æ main_user_kb) --> CreateMainKeyboard(–°–æ–∑–¥–∞–Ω–∏–µ InlineKeyboardBuilder)
        CreateMainKeyboard --> AddMainButtons(–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫)
        AddMainButtons --> CheckAdmin[–ü—Ä–æ–≤–µ—Ä–∫–∞ user_id –Ω–∞ –∞–¥–º–∏–Ω–∞]
        CheckAdmin -- Is Admin --> AddAdminButton(–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏)
        CheckAdmin -- Not Admin --> AdjustMainLayout(–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è)
        AddAdminButton --> AdjustMainLayout
        AdjustMainLayout --> ReturnMainKeyboard(–í–æ–∑–≤—Ä–∞—Ç InlineKeyboardMarkup)
        ReturnMainKeyboard --> EndMainUserKb(–ö–æ–Ω–µ—Ü main_user_kb)

        StartCatalogKb(–ù–∞—á–∞–ª–æ catalog_kb) --> CreateCatalogKeyboard(–°–æ–∑–¥–∞–Ω–∏–µ InlineKeyboardBuilder)
        CreateCatalogKeyboard --> IterateCategories(–ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º)
        IterateCategories --> AddCategoryButton(–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
        AddCategoryButton --> IterateCategories
        IterateCategories -- End Iteration --> AddHomeButtonCatalog(–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "–ù–∞ –≥–ª–∞–≤–Ω—É—é")
        AddHomeButtonCatalog --> AdjustCatalogLayout(–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è)
        AdjustCatalogLayout --> ReturnCatalogKeyboard(–í–æ–∑–≤—Ä–∞—Ç InlineKeyboardMarkup)
        ReturnCatalogKeyboard --> EndCatalogKb(–ö–æ–Ω–µ—Ü catalog_kb)

        StartPurchasesKb(–ù–∞—á–∞–ª–æ purchases_kb) --> CreatePurchasesKeyboard(–°–æ–∑–¥–∞–Ω–∏–µ InlineKeyboardBuilder)
        CreatePurchasesKeyboard --> AddPurchasesButtons(–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –ø–æ–∫—É–ø–æ–∫)
        AddPurchasesButtons --> AdjustPurchasesLayout(–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è)
        AdjustPurchasesLayout --> ReturnPurchasesKeyboard(–í–æ–∑–≤—Ä–∞—Ç InlineKeyboardMarkup)
        ReturnPurchasesKeyboard --> EndPurchasesKb(–ö–æ–Ω–µ—Ü purchases_kb)

        StartProductKb(–ù–∞—á–∞–ª–æ product_kb) --> CreateProductKeyboard(–°–æ–∑–¥–∞–Ω–∏–µ InlineKeyboardBuilder)
        CreateProductKeyboard --> AddPaymentButtons(–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –æ–ø–ª–∞—Ç—ã)
        AddPaymentButtons --> AddNavigationButtons(–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏)
        AddNavigationButtons --> AdjustProductLayout(–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è)
        AdjustProductLayout --> ReturnProductKeyboard(–í–æ–∑–≤—Ä–∞—Ç InlineKeyboardMarkup)
        ReturnProductKeyboard --> EndProductKb(–ö–æ–Ω–µ—Ü product_kb)

        StartYoukassaKb(–ù–∞—á–∞–ª–æ get_product_buy_youkassa) --> CreateYoukassaKeyboard(–°–æ–∑–¥–∞–Ω–∏–µ InlineKeyboardMarkup)
        CreateYoukassaKeyboard --> AddYoukassaPayButton(–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –æ–ø–ª–∞—Ç—ã –Æ–ö–∞—Å—Å–∞)
        AddYoukassaPayButton --> AddYoukassaCancelButton(–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –æ—Ç–º–µ–Ω—ã)
        AddYoukassaCancelButton --> ReturnYoukassaKeyboard(–í–æ–∑–≤—Ä–∞—Ç InlineKeyboardMarkup)
        ReturnYoukassaKeyboard --> EndYoukassaKb(–ö–æ–Ω–µ—Ü get_product_buy_youkassa)

         StartRobocassaKb(–ù–∞—á–∞–ª–æ get_product_buy_robocassa) --> CreateRobocassaKeyboard(–°–æ–∑–¥–∞–Ω–∏–µ InlineKeyboardMarkup)
        CreateRobocassaKeyboard --> AddRobocassaPayButton(–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –æ–ø–ª–∞—Ç—ã Robocassa)
        AddRobocassaPayButton --> AddRobocassaCancelButton(–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –æ—Ç–º–µ–Ω—ã)
        AddRobocassaCancelButton --> ReturnRobocassaKeyboard(–í–æ–∑–≤—Ä–∞—Ç InlineKeyboardMarkup)
        ReturnRobocassaKeyboard --> EndRobocassaKb(–ö–æ–Ω–µ—Ü get_product_buy_robocassa)

        StartStarsKb(–ù–∞—á–∞–ª–æ get_product_buy_stars) --> CreateStarsKeyboard(–°–æ–∑–¥–∞–Ω–∏–µ InlineKeyboardMarkup)
        CreateStarsKeyboard --> AddStarsPayButton(–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –æ–ø–ª–∞—Ç—ã –∑–≤–µ–∑–¥–∞–º–∏)
        AddStarsPayButton --> AddStarsCancelButton(–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –æ—Ç–º–µ–Ω—ã)
        AddStarsCancelButton --> ReturnStarsKeyboard(–í–æ–∑–≤—Ä–∞—Ç InlineKeyboardMarkup)
         ReturnStarsKeyboard --> EndStarsKb(–ö–æ–Ω–µ—Ü get_product_buy_stars)

    end
    subgraph –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
        import_typing(from typing import List)
        import_aiogram_types(from aiogram.types import InlineKeyboardMarkup, ReplyKeyboardMarkup, InlineKeyboardButton, WebAppInfo)
        import_aiogram_keyboard(from aiogram.utils.keyboard import InlineKeyboardBuilder, ReplyKeyboardBuilder)
         import_payment_link(from bot.app.utils import generate_payment_link)
        import_settings(from bot.config import settings)
        import_category(from bot.dao.models import Category)
        import_typing --> StartMainUserKb
        import_aiogram_types --> StartMainUserKb
        import_aiogram_keyboard --> StartMainUserKb
        import_settings --> StartMainUserKb
        import_typing --> StartCatalogKb
        import_aiogram_types --> StartCatalogKb
         import_aiogram_keyboard --> StartCatalogKb
        import_category --> StartCatalogKb
        import_aiogram_types --> StartPurchasesKb
        import_aiogram_keyboard --> StartPurchasesKb
        import_aiogram_types --> StartProductKb
        import_aiogram_keyboard --> StartProductKb
        import_aiogram_types --> StartYoukassaKb
        import_aiogram_types --> StartRobocassaKb
        import_aiogram_types --> StartStarsKb


    end
```

**–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π `mermaid`:**

*   **`import_typing(from typing import List)`**: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `List` –¥–ª—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤, —á—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–ª—è –∫–∞—Ç–∞–ª–æ–≥–∞.
*   **`import_aiogram_types(...)`**: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ç–∏–ø—ã –∏–∑ `aiogram`, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫, –∫–ª–∞–≤–∏–∞—Ç—É—Ä –∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ `InlineKeyboardMarkup`, `ReplyKeyboardMarkup`, `InlineKeyboardButton` –∏ `WebAppInfo`.
*   **`import_aiogram_keyboard(...)`**: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `InlineKeyboardBuilder` –∏ `ReplyKeyboardBuilder` –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä.
*  **`import_payment_link(from bot.app.utils import generate_payment_link)`**: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `generate_payment_link` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Å—ã–ª–æ–∫ –¥–ª—è –æ–ø–ª–∞—Ç—ã.
*   **`import_settings(from bot.config import settings)`**: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞, –≤–∫–ª—é—á–∞—è —Å–ø–∏—Å–æ–∫ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (`ADMIN_IDS`).
*   **`import_category(from bot.dao.models import Category)`**: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–æ–¥–µ–ª—å `Category` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ —Ç–æ–≤–∞—Ä–æ–≤.
*   –°—Ç—Ä–µ–ª–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –∏–º–ø–æ—Ä—Ç–∞–º–∏ –∏ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö.

## <–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ>

**–ò–º–ø–æ—Ä—Ç—ã:**

*   `from typing import List`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `List` –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ —Å–ø–∏—Å–∫–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–ø–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–æ–≤–∞—Ä–æ–≤.
*   `from aiogram.types import InlineKeyboardMarkup, ReplyKeyboardMarkup, InlineKeyboardButton, WebAppInfo`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∫–ª–∞—Å—Å—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–ª–∞–π–Ω- –∏ –æ–±—ã—á–Ω—ã—Ö –∫–ª–∞–≤–∏–∞—Ç—É—Ä, –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫, –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `aiogram`.
    *   `InlineKeyboardMarkup`: –ö–ª–∞—Å—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã—Ö –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º.
    *   `ReplyKeyboardMarkup`: –ö–ª–∞—Å—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ã—á–Ω—ã—Ö –∫–ª–∞–≤–∏–∞—Ç—É—Ä, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã—Ö –≤ –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ —á–∞—Ç–∞.
    *   `InlineKeyboardButton`: –ö–ª–∞—Å—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫ –≤–Ω—É—Ç—Ä–∏ –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã.
    *   `WebAppInfo`: –ö–ª–∞—Å—Å –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –≤ –∫–Ω–æ–ø–∫–∞—Ö.
*   `from aiogram.utils.keyboard import InlineKeyboardBuilder, ReplyKeyboardBuilder`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∫–ª–∞—Å—Å—ã-—Å—Ç—Ä–æ–∏—Ç–µ–ª–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä, —É–ø—Ä–æ—â–∞—è –ø—Ä–æ—Ü–µ—Å—Å –∏—Ö —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è.
    *   `InlineKeyboardBuilder`: –ü–æ–º–æ–≥–∞–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –±–æ–ª–µ–µ –≥–∏–±–∫–æ.
    *   `ReplyKeyboardBuilder`: –ü–æ–º–æ–≥–∞–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—ã—á–Ω—ã–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –±–æ–ª–µ–µ –≥–∏–±–∫–æ.
*  `from bot.app.utils import generate_payment_link`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å—Å—ã–ª–æ–∫. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Å—ã–ª–æ–∫ –¥–ª—è –æ–ø–ª–∞—Ç—ã Robocassa.
*   `from bot.config import settings`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞, –≤–∫–ª—é—á–∞—è —Å–ø–∏—Å–æ–∫ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ —Ñ–∞–π–ª `settings.py`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞.
*   `from bot.dao.models import Category`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö `Category` –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–æ–≤–∞—Ä–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—É—é —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

**–§—É–Ω–∫—Ü–∏–∏:**

1.  **`main_user_kb(user_id: int) -> InlineKeyboardMarkup`**:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**:
        *   `user_id`: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ü–µ–ª–æ–µ —á–∏—Å–ª–æ).
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: `InlineKeyboardMarkup` ‚Äì –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –§–æ—Ä–º–∏—Ä—É–µ—Ç –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∫–Ω–æ–ø–∫–∞–º–∏ "–ú–æ–∏ –ø–æ–∫—É–ø–∫–∏", "–ö–∞—Ç–∞–ª–æ–≥", "–û –º–∞–≥–∞–∑–∏–Ω–µ", "–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∞–≤—Ç–æ—Ä–∞". –î–æ–±–∞–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫—É "–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å" –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.
    *   **–ü—Ä–∏–º–µ—Ä:** –ï—Å–ª–∏ `user_id=12345` –∏ `settings.ADMIN_IDS = [12345, 67890]`, —Ç–æ –≤–µ—Ä–Ω—ë—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–æ–π "–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å".
2.  **`catalog_kb(catalog_data: List[Category]) -> InlineKeyboardMarkup`**:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**:
        *   `catalog_data`: –°–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ `Category`, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤.
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: `InlineKeyboardMarkup` ‚Äì –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ `catalog_data` –∏ –∫–Ω–æ–ø–∫–æ–π "–ù–∞ –≥–ª–∞–≤–Ω—É—é".
    *   **–ü—Ä–∏–º–µ—Ä:** –ï—Å–ª–∏ `catalog_data` —Å–æ–¥–µ—Ä–∂–∏—Ç `[Category(id=1, category_name='–û–¥–µ–∂–¥–∞'), Category(id=2, category_name='–û–±—É–≤—å')]`, —Ç–æ –≤–µ—Ä–Ω—ë—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏ "–û–¥–µ–∂–¥–∞" –∏ "–û–±—É–≤—å".
3.  **`purchases_kb() -> InlineKeyboardMarkup`**:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**: –ù–µ—Ç.
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: `InlineKeyboardMarkup` ‚Äì –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–∫—É–ø–∫–∞–º–∏.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –§–æ—Ä–º–∏—Ä—É–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∫—É–ø–∫–∏" –∏ "–ù–∞ –≥–ª–∞–≤–Ω—É—é".
    *   **–ü—Ä–∏–º–µ—Ä:** –í–µ—Ä–Ω—ë—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ–∫—É–ø–æ–∫ –∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞ –≥–ª–∞–≤–Ω—É—é.
4.  **`product_kb(product_id, price, stars_price) -> InlineKeyboardMarkup`**:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**:
        *   `product_id`: ID –ø—Ä–æ–¥—É–∫—Ç–∞.
        *   `price`: –¶–µ–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∞.
        *   `stars_price`: –¶–µ–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∞ –≤ –∑–≤–µ–∑–¥–∞—Ö.
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: `InlineKeyboardMarkup` ‚Äì –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã —Ç–æ–≤–∞—Ä–∞.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ –¥–ª—è –æ–ø–ª–∞—Ç—ã –ø—Ä–æ–¥—É–∫—Ç–∞ —á–µ—Ä–µ–∑ –Æ–ö–∞—Å—Å–∞, Robocassa –∏ –∑–≤–µ–∑–¥–∞–º–∏, –∞ —Ç–∞–∫–∂–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –∫–∞—Ç–∞–ª–æ–≥ –∏ –Ω–∞ –≥–ª–∞–≤–Ω—É—é.
    *   **–ü—Ä–∏–º–µ—Ä:** –ï—Å–ª–∏ `product_id=5`, `price=100`, `stars_price=50`, —Ç–æ –≤–µ—Ä–Ω—ë—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏ –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –Æ–ö–∞—Å—Å–∞, Robocassa –∏ –∑–≤–µ–∑–¥–∞–º–∏, —Å —Ü–µ–Ω–∞–º–∏.
5.  **`get_product_buy_youkassa(price) -> InlineKeyboardMarkup`**:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**:
        *   `price`: –¶–µ–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∞.
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: `InlineKeyboardMarkup` ‚Äì –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –∫–Ω–æ–ø–∫–æ–π –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –Æ–ö–∞—Å—Å–∞.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–æ–π –¥–ª—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –Æ–ö–∞—Å—Å–∞ –∏ –∫–Ω–æ–ø–∫–æ–π "–û—Ç–º–µ–Ω–∏—Ç—å". –ö–Ω–æ–ø–∫–∞ –æ–ø–ª–∞—Ç—ã –∏–º–µ–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `pay=True`.
    *   **–ü—Ä–∏–º–µ—Ä:** –ï—Å–ª–∏ `price = 150`, —Ç–æ –≤–µ—Ä–Ω–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–æ–π "–û–ø–ª–∞—Ç–∏—Ç—å 150‚ÇΩ".
6.  **`get_product_buy_robocassa(price: int, payment_link: str) -> InlineKeyboardMarkup`**:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**:
        *   `price`: –¶–µ–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∞.
        *  `payment_link`: –°—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É –≤ Robocassa
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: `InlineKeyboardMarkup` ‚Äì –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –∫–Ω–æ–ø–∫–æ–π –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ Robocassa.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–æ–π –¥–ª—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ Robocassa –∏—Å–ø–æ–ª—å–∑—É—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∏ –∫–Ω–æ–ø–∫–æ–π "–û—Ç–º–µ–Ω–∏—Ç—å". –ö–Ω–æ–ø–∫–∞ –æ–ø–ª–∞—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `web_app` –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ –ø–ª–∞—Ç–µ–∂–Ω—ã–π —à–ª—é–∑.
    *   **–ü—Ä–∏–º–µ—Ä:** –ï—Å–ª–∏ `price = 200` –∏ `payment_link = "https://example.com/payment"`, —Ç–æ –≤–µ—Ä–Ω–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–æ–π "–û–ø–ª–∞—Ç–∏—Ç—å 200‚ÇΩ" –∏ `web_app`, –≤–µ–¥—É—â–µ–π –ø–æ —Å—Å—ã–ª–∫–µ.
7.  **`get_product_buy_stars(price) -> InlineKeyboardMarkup`**:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**:
        *   `price`: –¶–µ–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∞ –≤ –∑–≤–µ–∑–¥–∞—Ö.
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: `InlineKeyboardMarkup` ‚Äì –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –∫–Ω–æ–ø–∫–æ–π –æ–ø–ª–∞—Ç—ã –∑–≤–µ–∑–¥–∞–º–∏.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–æ–π –¥–ª—è –æ–ø–ª–∞—Ç—ã –∑–≤–µ–∑–¥–∞–º–∏ –∏ –∫–Ω–æ–ø–∫–æ–π "–û—Ç–º–µ–Ω–∏—Ç—å". –ö–Ω–æ–ø–∫–∞ –æ–ø–ª–∞—Ç—ã –∏–º–µ–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `pay=True`.
    *   **–ü—Ä–∏–º–µ—Ä:** –ï—Å–ª–∏ `price = 75`, —Ç–æ –≤–µ—Ä–Ω–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–æ–π "–û–ø–ª–∞—Ç–∏—Ç—å 75 ‚≠ê".

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

*   `kb`: –û–±—ä–µ–∫—Ç `InlineKeyboardBuilder` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä.
*   `settings.ADMIN_IDS`: –°–ø–∏—Å–æ–∫ —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤. –û–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ —Ñ–∞–π–ª–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫.
*   `catalog_data`: –°–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ —Ç–∏–ø–∞ `Category`, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤.
*   `product_id`, `price`, `stars_price`: –¶–µ–ª—ã–µ —á–∏—Å–ª–∞, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–¥—É–∫—Ç–∞, –µ–≥–æ —Ü–µ–Ω—É –∏ —Ü–µ–Ω—É –≤ –∑–≤–µ–∑–¥–∞—Ö, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.
* `payment_link`: –°—Ç—Ä–æ–∫–∞, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∞—è —Å–æ–±–æ–π —Å—Å—ã–ª–∫—É –¥–ª—è –æ–ø–ª–∞—Ç—ã Robocassa.

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è:**

*   **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**  –ö–æ–¥ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —è–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –æ—à–∏–±–∫–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Å—ã–ª–æ–∫ –Ω–∞ –æ–ø–ª–∞—Ç—É, –∏–ª–∏ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫–∏ `try...except` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π.
*   **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**  –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ –∏ –æ—Ç–ª–∞–¥–∫–∏.
*   **–í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã:** –î–ª—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ Robocassa –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `payment_link`, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∏–∑–≤–Ω–µ, –Ω—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å—Å—ã–ª–∫–∞ –≤–∞–ª–∏–¥–Ω–∞—è –∏ –Ω–µ –∏—Å—Ç–µ–∫–∞–µ—Ç.
*   **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è:** –ú–æ–∂–Ω–æ –±—ã–ª–æ –±—ã —Å–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å/—Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫, —á—Ç–æ–±—ã –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –∫–æ–¥ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –∫–Ω–æ–ø–æ–∫ –æ—Ç–º–µ–Ω—ã –∏–ª–∏ –Ω–∞ –≥–ª–∞–≤–Ω—É—é.

**–í–∑–∞–∏–º–æ—Å–≤—è–∑—å —Å –¥—Ä—É–≥–∏–º–∏ —á–∞—Å—Ç—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞:**

*   –≠—Ç–æ—Ç –º–æ–¥—É–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä –≤ Telegram-–±–æ—Ç–µ, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —á–µ—Ä–µ–∑ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã.
*   –§—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `bot.config.settings`, —Ç–∞–∫–∏–µ –∫–∞–∫ —Å–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.
*   –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `bot.dao.models.Category`, –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞—è —Å–≤—è–∑—å —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.
*   –î–ª—è Robocassa –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `bot.app.utils.generate_payment_link`.

–í —Ü–µ–ª–æ–º, –∫–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–≤–æ—é —Ñ—É–Ω–∫—Ü–∏—é –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä –¥–ª—è Telegram-–±–æ—Ç–∞, –Ω–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –µ–≥–æ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∏ –≥–∏–±–∫–æ—Å—Ç—å —Å –ø–æ–º–æ—â—å—é –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —á–∞—Å—Ç–µ–π.