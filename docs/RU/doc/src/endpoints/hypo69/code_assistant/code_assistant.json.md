# Документация для `code_assistant.json`

## Обзор

Файл `code_assistant.json` представляет собой конфигурационный файл в формате JSON, используемый для настройки процесса генерации документации и проверки кода. Он определяет различные параметры, такие как используемые модели, языки, каталоги, форматы файлов, а также правила включения и исключения файлов для обработки.

## Оглавление

- [Структура JSON](#структура-json)
- [Описание полей](#описание-полей)
    - [Общие настройки](#общие-настройки)
    - [Настройки исключений](#настройки-исключений)
    - [Настройки включения](#настройки-включения)
    - [Настройки удаления и известных префиксов](#настройки-удаления-и-известных-префиксов)
    - [Настройки других префиксов](#настройки-других-префиксов)
    - [Настройки выходных директорий](#настройки-выходных-директорий)
    - [Настройки argparse](#настройки-argparse)
- [Пример использования](#пример-использования)

## Структура JSON

Файл имеет следующую структуру:

```json
{
  "role": "doc_writer_md",
  "lang": "EN",
  "model": [ "gemini" ],
  "start_dirs": [],
  "gemini_generation_config": {
    "response_mime_type": "text/plain"
  },
  "gemini_model_name": "gemini-2.0-flash-exp",
  "openai_model_name": "gpt-4o-mini",
  "openai_assistant_id": "<OpenAI Assistant ID>",
  "exclude_dirs": [],
  "exclude_files": [],
  "exclude_file_patterns": [],
  "include_files": [],
  "remove_prefixes": [],
  "known_prefixes": [],
  "other_prefixes": [],
  "output_directory": {},
  "argparse": {}
}
```

## Описание полей

### Общие настройки

- `role` (str): Роль текущего конфигурационного файла, в данном случае - `doc_writer_md` (генерация документации в формате Markdown).
- `lang` (str): Язык, используемый для документации (в данном случае - `EN`).
- `model` (list): Список используемых моделей (в данном случае - `gemini`).
- `start_dirs` (list): Список начальных директорий, которые будут обрабатываться. В текущем примере список пуст.
- `gemini_generation_config` (dict): Конфигурация для генерации Gemini.
    - `response_mime_type` (str): MIME тип ответа, в данном случае `text/plain`.
- `gemini_model_name` (str): Название используемой модели Gemini, в данном случае `gemini-2.0-flash-exp`.
- `openai_model_name` (str): Название используемой модели OpenAI, в данном случае `gpt-4o-mini`.
- `openai_assistant_id` (str): Идентификатор ассистента OpenAI.

### Настройки исключений

- `exclude_dirs` (list): Список директорий, которые следует исключить из обработки.
  - `.ipynb_checkpoints`: Директория для чекпоинтов Jupyter Notebook.
  - `resources`, `profiles`, `sdk`, `skd`, `quickstart`, `quick_start`, `_experiments`, `db`, `node_modules`, `__pycache__`, `.git`, `.venv`, `.vs`, `.vscode`, `docs`, `images`, `exe`, `pytest`, `emil-design.com`, `openai-assistants-quickstart`: Различные директории, содержащие ресурсы, вспомогательные файлы или код, не требующий обработки.
- `exclude_files` (list): Список файлов, которые следует исключить из обработки.
  - `version.py`, `__init__.py`, `header.py`: Файлы с информацией о версии, инициализации или заголовками.
  - `*.png`, `*.jpg`, `*.jpeg`, `*.svg`: Графические файлы.
- `exclude_file_patterns` (list): Список регулярных выражений для исключения файлов на основе их имени.
    - `".*\\\\(.*\\\\).*"`, `"___{3,}.*"`, `"___.*"`, `".*___.*\\\\..*"`, `".*___.*"`: Различные паттерны для исключения файлов с определенными именами или структурами.

### Настройки включения

- `include_files` (list): Список шаблонов имен файлов, которые нужно включить в обработку.
  - `*.py`, `*.js`, `*.mjs`, `*.htm*`, `*.php`, `*.txt`, `*.md`, `*.rst`, `*.mmd`, `*.yaml`, `*.yml`, `*.ini`, `*.cfg`, `*.json`, `Makefile`, `LICENSE*`, `CHANGELOG*`, `CONTRIBUTING*`, `CODE_OF_CONDUCT*`, `conf.py`: Различные типы файлов с кодом, документацией, конфигурациями и т.д.

### Настройки удаления и известных префиксов

- `remove_prefixes` (list): Список префиксов, которые нужно удалить из содержимого файлов.
  - `"```md"`, `"```md\\n"`, `"```markdown"`, `"```markdown\\n"`, `"```"`, `"```\\n"`: Различные варианты префиксов для блочного кода.
- `known_prefixes` (list): Список известных префиксов.
  - `" --------------------------- DEPRECTAED KEY --------------"`, `"```md"`, `"```md\\n"`, `"```markdown"`, `"```markdown\\n"`, `"```"`, `"```\\n"`: Префиксы, которые могут встречаться в файлах.

### Настройки других префиксов

- `other_prefixes` (list): Список других префиксов, которые могут быть найдены в файлах.
   - `"```rst"`, `"```rst\\n"`, `"```plaintext"`, `"```html"`, `"```MD"`, `"```MD\\n"`, `"```MARKDOWN"`, `"```MARKDOWN\\n"`, `"```RST"`, `"```PALINTEXT"`, `"```HTML"`: Различные типы префиксов для блочного кода в разных форматах.

### Настройки выходных директорий

- `output_directory` (dict): Словарь, определяющий структуру выходных каталогов.
  - `code_checker_md`: Каталог для сгенерированных Markdown файлов проверки кода (`<model>/<lang>/consultant/src`).
  - `code_explainer_md`: Каталог для Markdown файлов объяснения кода (`<model>/<lang>/explainer/src`).
  - `code_explainer_html`: Каталог для HTML файлов объяснения кода (`<model>/<lang>explainer/html/src`).
  - `pytest`: Каталог для файлов pytest (`../pytest/<model>/src`).
  - `doc_writer_rst`: Каталог для сгенерированных RST файлов документации (`<model>/<lang>/doc/rst/src`).
  - `doc_writer_md`: Каталог для сгенерированных Markdown файлов документации (`<model>/<lang>/doc/src`).
  - `doc_writer_html`: Каталог для HTML файлов документации (`<model>/<lang>/doc/html/src`).
  - `how_to_writer`: Каталог для файлов инструкций (`<model>/<lang>/how_to/src`).

### Настройки argparse

- `argparse` (dict): Конфигурация для аргументов командной строки.
  - `roles` (list): Список возможных ролей, используемых в аргументах.
   - `"code_checker_md"`, `"code_explainer_md"`, `"doc_writer_md"`, `"pytest"`, `"how_to_writer_md"`, `"doc_writer_rst"`: Различные роли, которые можно использовать для обработки кода.
  - `exclude-roles` (list): Список ролей, которые нужно исключить из аргументов.
   - `"code_explainer_html"`, `"doc_writer_html"`: Роли, которые не нужно включать.
  - `languages` (list): Список поддерживаемых языков.
   - `"ru"`, `"en"`: Русский и английский языки.
  - `model` (dict): Конфигурация модели.
    - `default` (list): Список моделей по умолчанию.
     - `["gemini"]`: Gemini по умолчанию.
    - `choices` (list): Список доступных моделей.
     - `["gemini", "openai"]`: Gemini и OpenAI.
  - `start_dirs` (dict): Конфигурация начальных директорий.
    - `default` (list): Список директорий по умолчанию.
     - `["<path_to_src>"]`: Путь к исходной директории.

## Пример использования

Этот файл конфигурации предназначен для использования в инструментах генерации документации и проверки кода. Он позволяет настраивать процесс обработки файлов, указывая, какие типы файлов и каталогов следует включать или исключать, а также какие модели и языки использовать.

Например, при запуске инструмента с ролью `doc_writer_md`, языком `ru`, моделью `gemini`, будут обработаны все файлы, соответствующие указанным шаблонам, исключая указанные директории и файлы, сгенерированная документация будет сохранена в директории `gemini/ru/doc/src`.