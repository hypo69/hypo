# Анализ кода модуля `how_to_writer_ru.md`

## Качество кода:

- **Соответствие стандартам**: 7
- **Плюсы**:
    - Четкая структура инструкций для модели.
    - Подробное описание ожидаемого формата документации (RST).
    - Примеры использования и оформления документации.
- **Минусы**:
    - Промпт написан от первого лица, что может быть не совсем стандартно для инструкций.
    - Отсутствие конкретных указаний на использование `j_loads` или `j_loads_ns`.
    - Недостаточное внимание к аспектам логирования и обработки ошибок.
    - Используются общие фразы, такие как "получение данных", вместо более точных формулировок.

## Рекомендации по улучшению:

1.  **Переформулировать промпт в третьем лице**: Промпт должен быть написан от лица системы, а не от первого лица.

2.  **Добавить инструкции по обработке JSON**: Указать необходимость использования `j_loads` или `j_loads_ns` вместо стандартного `json.load`.

3.  **Улучшить описание логирования**: Добавить инструкцию об обязательном импорте `logger` из `src.logger` и использовании его для ошибок.

4.  **Уточнить формулировки**: Избегать общих формулировок вроде "получаем" и использовать более точные: "проверяем", "выполняем запрос", "обрабатываем данные".

5.  **Указать форматирование**: Обозначить использование одинарных кавычек для строк и двойных для операций вывода.

6.  **Добавить пример с обработкой ошибок**: Привести пример, как нужно описывать блоки кода, обрабатывающие ошибки с использованием `logger.error`.

7.  **Добавить требование сохранять маркеры**: Обязательно указать на сохранение `...` в коде как маркеров.

## Оптимизированный код:

```markdown
### **Инструкция: Генерация `how to` документации для блоков кода**

---

#### **Основные требования**

1.  **Анализ кода**:
    - Система анализирует текущий блок кода и все ранее загруженные блоки кода в проекте.
    - На основе анализа формируется пошаговая инструкция, описывающая действия, необходимые для исполнения данного блока кода.

2.  **Формат документации**:
    - Для каждого блока кода система должна создать подробную инструкцию в формате reStructuredText (RST).
    - Документация должна следовать структуре:
        - **Описание**: Объяснение, что делает блок кода, какую задачу решает или какую проверку выполняет.
        - **Шаги выполнения**: Последовательность действий, необходимых для исполнения кода, с подробным описанием каждого шага.
        - **Пример использования**: Пример того, как код можно использовать в проекте, включая вызовы функций или методов.
    - Пример структуры RST:

```rst
Как использовать блок кода
=========================================================================================

Описание
-------------------------
Этот блок кода выполняет [описание действий блока кода, например, "проверку на валидность ввода данных"].

Шаги выполнения
-------------------------
1. [Первый шаг выполнения, например, "Проверка типа данных"].
2. [Второй шаг выполнения, например, "Обработка данных с использованием метода `process_data()`."].
3. [Третий шаг выполнения, например, "Если данные прошли проверку, они используются для запроса"].
4. [И так далее...]

Пример использования
-------------------------
Пример того, как можно использовать данный блок кода в проекте:

.. code-block:: python

    <пример_кода_с_использованием>
```

3.  **Содержание документации**:
    - Если блок кода выполняет проверку, то необходимо описать, как она работает и какие данные проверяются.
    - При наличии вызовов других функций или методов нужно указать, какие именно функции вызываются и с какими параметрами.
    - Необходимо использовать точные формулировки, избегая общих терминов вроде "получаем" или "делаем". Вместо этого, описывать конкретные действия: "код проверяет", "код отправляет запрос", "код обрабатывает данные".
    - При использовании JSON, всегда применяйте `j_loads` или `j_loads_ns` из `src.utils.jjson` вместо стандартного `json.load`.
    - Если в коде есть `...`, он должен быть сохранён как маркер без изменений.
    - Для логирования ошибок используйте `logger` из `src.logger`:
       ```python
       from src.logger import logger
       ```
4.  **Пример документации**:

    - Пример для блока кода, проверяющего переменную:

```rst
Как использовать блок кода
=========================================================================================

Описание
-------------------------
Этот блок кода выполняет проверку на валидность значения переменной `value` перед дальнейшей обработкой.

Шаги выполнения
-------------------------
1.  Проверяем, имеет ли переменная `value` значение, если значение не задано или None, то код прерывает выполнение.
2.  Если значение валидно, оно передается в следующую функцию для дальнейшей обработки.

Пример использования
-------------------------
Пример того, как можно использовать данный блок кода:

.. code-block:: python

    value = get_value()
    if value:
        process_value(value)
    else:
        logger.error('Невалидное значение')
```

5.  **Форматирование**:
    - Используйте одинарные кавычки (`'`) для строк в Python-коде.
    - Используйте двойные кавычки (`"`) только для операций вывода.

6.  **Логирование**:
    - Все ошибки должны быть залогированы с помощью `logger.error`.

---

**Этот промпт обеспечивает создание подробной документации для каждого блока кода на основе его анализа. Система будет генерировать документацию, которая объяснит последовательность действий для исполнения кода, а также приведет примеры использования.**
```