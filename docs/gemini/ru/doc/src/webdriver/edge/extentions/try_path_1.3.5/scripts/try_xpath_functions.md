# Модуль try_xpath_functions.js

## Обзор

Этот модуль предоставляет функции для выполнения XPath выражений, выбора элементов с помощью `querySelector` и `querySelectorAll`, работы с результатами и манипулирования элементами DOM.

## Функции

### `execExpr`

**Описание**: Выполняет заданное выражение (XPath, `querySelector`, или `querySelectorAll`) в контексте.

**Параметры**:

- `expr` (строка): XPath выражение или CSS селектор.
- `method` (строка): Метод выполнения (`evaluate`, `querySelector`, `querySelectorAll`).
- `opts` (словарь, необязательно): Опции выполнения.
    - `context` (узел DOM, необязательно): Контекст для выполнения выражения. По умолчанию `document`.
    - `resolver` (функция или строка, необязательно): Функция для разрешения префиксов в XPath выражении или строка с JSON-объектом для разрешения.
    - `document` (объект Document, необязательно): Документ, который использовать для выполнения. По умолчанию текущий документ.
    - `resultType` (целое число, необязательно): Тип результата XPath выражения. По умолчанию `xpathResult.ANY_TYPE`.

**Возвращает**:

- словарь: Содержит результат выполнения, включающий массив `items`, метод `method` и тип результата `resultType`.

**Вызывает исключения**:

- `Error`: Возникает в случае несоответствия типа контекста ожидаемому (`Node`, `Attr`) для разных методов.


### `resToArr`

**Описание**: Преобразует результат XPath запроса в массив.

**Параметры**:

- `res` (объект): Результат XPath выражения.
- `type` (целое число, необязательно): Тип результата. Если не указан, берется из `res.resultType`.


**Возвращает**:

- массив: Преобразованный результат в массив узлов (или значения для других типов).

**Вызывает исключения**:

- `Error`: Возникает при недопустимом типе результата `type`.


### `makeResolver`

**Описание**: Создает функцию-разрешитель префиксов XPath.

**Параметры**:

- `obj` (функция или строка): Объект для разрешения или строка JSON-объекта.


**Возвращает**:

- функция: Функция-разрешитель.

**Вызывает исключения**:

- `Error`: Возникает при некорректном формате JSON-строки или при некорректном разрешителе.


### `isValidDict`

**Описание**: Проверяет, является ли объект валидным словарем (объект, все значения которого - строки).

**Параметры**:

- `obj` (объект): Проверяемый объект.


**Возвращает**:

- `true`/`false`: Результат проверки.

**Вызывает исключения**:

- Нет.


### `objToMap`

**Описание**: Преобразует объект в Map.


**Параметры**:

- `obj` (объект): Объект для преобразования.


**Возвращает**:

- Map: Преобразованный объект в Map.

**Вызывает исключения**:

- Нет.


### `isDocOrElem`

**Описание**: Проверяет, является ли объект документом или элементом.

**Параметры**:

- `obj` (объект): Проверяемый объект.


**Возвращает**:

- `true`/`false`: Результат проверки.


### `listToArr`

**Описание**: Преобразует список в массив.


**Параметры**:

- `list` (список): Список для преобразования.


**Возвращает**:

- массив: Преобразованный список в массив.

**Вызывает исключения**:

- Нет.


### `getItemDetail`

**Описание**: Возвращает подробную информацию об элементе.

**Параметры**:

- `item` (элемент DOM): Элемент для получения информации.


**Возвращает**:

- объект: Словарь с информацией об элементе.

**Вызывает исключения**:

- Нет.


### `getItemDetails`

**Описание**: Возвращает подробную информацию о множестве элементов.

**Параметры**:

- `items` (массив элементов): Массив элементов для получения информации.


**Возвращает**:

- массив: Массив словарей с информацией об элементах.

**Вызывает исключения**:

- Нет.


(и так далее для остальных функций)