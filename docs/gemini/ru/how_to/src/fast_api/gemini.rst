Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код определяет Flask-приложение, которое обрабатывает запросы на получение ответа от модели Google Generative AI. Он принимает запрос (prompt) в формате JSON, отправляет его на модель и возвращает полученный ответ в формате JSON.  Код обрабатывает случай, когда запрос отсутствует, а также возможные исключения при взаимодействии с моделью.

Шаги выполнения
-------------------------
1. **Импортирование необходимых библиотек:** Код импортирует `Flask`, `request`, `jsonify` из Flask для создания веб-приложения, `GoogleGenerativeAI` для взаимодействия с моделью.
2. **Инициализация Flask-приложения и модели:** Создается экземпляр Flask-приложения `app` и экземпляр класса `GoogleGenerativeAI` под именем `ai_model`.
3. **Определение маршрута `/ask`:**  Определяется маршрут `/ask` с методом POST, который обрабатывает запросы.
4. **Получение данных запроса:** Извлекается JSON-данные из запроса, содержащие поле `prompt`.
5. **Проверка на наличие запроса:** Проверяется, существует ли поле `prompt` в полученных данных.  Если нет, возвращается ошибка 400 с сообщением "No prompt provided".
6. **Обработка запроса:** В блоке `try...except` осуществляется запрос к модели `ai_model.ask(prompt)`.  Результат запроса записывается в переменную `reply`.
7. **Возврат ответа:** Возвращается ответ в формате JSON с полем `reply`. Если произошла ошибка, возвращается ошибка 500 с сообщением об ошибке.
8. **Запуск сервера:**  Если скрипт запускается как главная программа (`if __name__ == '__main__':`), приложение запускается в отладочном режиме (`debug=True`).

Пример использования
-------------------------
.. code-block:: python

    import requests
    import json

    # Данные для запроса
    data = {
        "prompt": "Напишите стихотворение о лете."
    }

    # Отправка запроса
    response = requests.post("http://127.0.0.1:5000/ask", json=data)

    # Обработка ответа
    if response.status_code == 200:
        result = response.json()
        print(result.get("reply"))
    else:
        print(f"Ошибка: {response.status_code}, {response.text}")