Как использовать класс Supplier
========================================================================================

Описание
-------------------------
Класс `Supplier` предназначен для выполнения сценариев для различных поставщиков. Он загружает конфигурацию поставщика, выполняет вход на сайт и запускает сценарии.  Класс использует Pydantic для валидации данных и `j_loads_ns` для загрузки настроек из JSON-файла.

Шаги выполнения
-------------------------
1. **Инициализация объекта `Supplier`**: Создаётся экземпляр класса `Supplier` с необходимыми параметрами, включая `supplier_prefix` (префикс поставщика). Важно, чтобы `supplier_prefix` был корректным, иначе будет сгенерирована ошибка.
2. **Вызов метода `_payload`**: Этот метод загружает параметры поставщика из файла `supplier_prefix_settings.json` в директории `src/suppliers`.  Файл должен быть валидным JSON-форматом, содержащим поля `price_rule`, `locale`, `scenario_files`, `locators`.  Файл ищется по пути `gs.path.src / 'suppliers' / f'{self.supplier_prefix}_settings.json'`.
3. **Обработка ошибок при загрузке:** Если файл не найден или в нём обнаружены ошибки, метод возвращает `False`, а соответствующее сообщение об ошибке записывается в лог.
4. **Выполнение входа:** Вызов метода `login` запускает процедуру входа на сайт поставщика, используя модуль, связанный с конкретным поставщиком (`related_modules`).
5. **Выполнение сценариев (run_scenario_files/run_scenarios):**  Методы `run_scenario_files` и `run_scenarios` позволяют выполнять сценарии, которые могут быть указаны в виде списка файлов или списка словарей. Если в `run_scenario_files` не указан `scenario_files`, используется значение из `self.scenario_files`.


Пример использования
-------------------------
.. code-block:: python

    from hypotez.src.suppliers.supplier import Supplier
    import hypotez.src.gs as gs

    # Предполагается, что gs.path.src корректный путь
    # И что существует файл 'example_settings.json' в 'src/suppliers/'
    # С правильной структурой.
    supplier = Supplier(supplier_prefix='example')

    try:
        if supplier._payload():
            if supplier.login():
                if supplier.run_scenario_files():
                    print("Сценарии успешно выполнены.")
                else:
                    print("Ошибка при выполнении сценариев.")
            else:
                print("Ошибка входа.")
        else:
            print("Ошибка загрузки настроек.")
    except Exception as e:
        print(f"Возникла ошибка: {e}")