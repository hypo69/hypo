# Модуль `hypotez/src/suppliers/aliexpress/alirequests.py`

## Обзор

Этот модуль предоставляет класс `AliRequests` для работы с API AliExpress. Он позволяет делать GET-запросы, загружать куки из файлов, обновлять сессию и получать короткие аффилированные ссылки. Модуль использует библиотеку `requests` для взаимодействия с сервером.

## Оглавление

- [Модуль `AliRequests`](#модуль-alirequests)
    - [Класс `AliRequests`](#класс-alirequests)
        - [`__init__`](#инициализация-класса-alirequests)
        - [`_load_webdriver_cookies_file`](#загрузка-куки-из-файла)
        - [`_refresh_session_cookies`](#обновление-куки-сессии)
        - [`_handle_session_id`](#обработка-sessionid)
        - [`make_get_request`](#создание-get-запроса)
        - [`short_affiliate_link`](#создание-короткий-аффилиатной-ссылка)


## Классы

### `AliRequests`

**Описание**: Класс для работы с API AliExpress, позволяющий загружать куки, обновлять сессию и делать GET-запросы.

**Методы**:

#### `__init__`

**Описание**: Инициализирует объект `AliRequests`.

**Параметры**:
- `webdriver_for_cookies` (str, по умолчанию 'chrome'): Имя вебдрайвера, из которого необходимо загрузить куки.

**Возвращает**:
- `None`

#### `_load_webdriver_cookies_file`

**Описание**: Загружает куки из файла, связанного с вебдрайвером.

**Параметры**:
- `webdriver_for_cookies` (str, по умолчанию 'chrome'): Имя вебдрайвера, из которого необходимо загрузить куки.

**Возвращает**:
- bool: `True`, если куки успешно загружены, `False` - в противном случае.

**Возможные исключения**:
- `FileNotFoundError`, `ValueError`: Если файл с куками не найден или некорректен.
- `Exception`: Общее исключение при ошибках загрузки куки.


#### `_refresh_session_cookies`

**Описание**: Обновляет куки сессии.

**Возвращает**:
- `None`

**Возможные исключения**:
- `requests.RequestException`: Если произошла ошибка при обновлении сессии.
- `Exception`: Общее исключение при ошибках обновления сессии.

#### `_handle_session_id`

**Описание**: Обрабатывает JSESSIONID в куках ответа.

**Параметры**:
- `response_cookies`: Куки ответа.

**Возвращает**:
- `None`

**Возможные исключения**:
- `Exception`: Общее исключение при ошибках обработки JSESSIONID.


#### `make_get_request`

**Описание**: Делает GET-запрос с заданными куками.

**Параметры**:
- `url` (str): URL для запроса.
- `cookies` (List[dict], optional): Список кук для запроса. По умолчанию `None`.
- `headers` (dict, optional): Дополнительные заголовки для запроса. По умолчанию `None`.

**Возвращает**:
- requests.Response: Объект ответа при успехе, `False` - в противном случае.

**Возможные исключения**:
- `requests.RequestException`: Если произошла ошибка при выполнении запроса.
- `Exception`: Общее исключение при ошибках выполнения запроса.


#### `short_affiliate_link`

**Описание**: Получает короткий аффилиатный URL.

**Параметры**:
- `link_url` (str): URL для сокращения.

**Возвращает**:
- requests.Response: Объект ответа при успехе, `False` - в противном случае.

**Возможные исключения**:
- `requests.RequestException`: Если произошла ошибка при выполнении запроса.
- `Exception`: Общее исключение при ошибках выполнения запроса.