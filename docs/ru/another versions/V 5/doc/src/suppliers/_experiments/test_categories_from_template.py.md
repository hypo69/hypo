# Модуль test_categories_from_template

## Обзор

Модуль `test_categories_from_template.py` содержит класс `TestBuildtemplates`, который используется для тестирования функциональности создания шаблонов категорий. В частности, проверяется корректность обработки директорий с JSON-файлами и их содержимым. Модуль использует библиотеки `unittest`, `tempfile` и `os` для организации тестовой среды и выполнения проверок.

## Подробней

Этот модуль предоставляет набор тестов для функции `buid_templates`, которая, предположительно, строит шаблоны на основе JSON-файлов, находящихся в указанной директории. Тесты охватывают сценарии с существующими и несуществующими директориями, а также проверяют, что функция корректно обрабатывает данные из JSON-файлов. Данный файл, по-видимому, является частью более старой версии проекта, поскольку в коде указано `@deprecated`.

## Классы

### `TestBuildtemplates`

**Описание**: Класс `TestBuildtemplates` наследуется от `unittest.TestCase` и содержит методы для тестирования функции `buid_templates`.

**Как работает класс**:
Класс содержит два тестовых метода:
1. `test_build_templates_with_existing_directory`: Создает временную директорию, добавляет в неё JSON-файлы (включая файл во вложенной директории), вызывает функцию `buid_templates` и сравнивает полученный результат с ожидаемым.
2. `test_build_templates_with_non_existing_directory`: Пытается вызвать функцию `buid_templates` с несуществующей директорией и проверяет, что возникает исключение `FileNotFoundError`.

**Методы**:
- `test_build_templates_with_existing_directory`: Тестирует функцию `buid_templates` с существующей директорией.
- `test_build_templates_with_non_existing_directory`: Тестирует функцию `buid_templates` с несуществующей директорией.

#### `test_build_templates_with_existing_directory`

**Описание**: Метод `test_build_templates_with_existing_directory` создает временную директорию, добавляет в неё JSON-файлы, вызывает функцию `buid_templates` и сравнивает результат с ожидаемым.

**Как работает функция**:
1. Создается временная директория с помощью `tempfile.TemporaryDirectory()`.
2. Внутри директории создаются два JSON-файла: `file1.json` в корне временной директории и `file2.json` во вложенной директории `subdir`.
3. JSON-файлы содержат данные в формате `{"category1": {"template1": "some content"}, "category2": {"template2": "some content"}}`.
4. Вызывается функция `buid_templates` с путем к временной директории.
5. Результат, возвращаемый функцией `buid_templates`, сравнивается с ожидаемым результатом `{"category1": {"template1": "some content"}, "category2": {"template2": "some content"}}` с использованием метода `self.assertEqual`.

**Параметры**:
- Нет явных параметров, метод использует переменные окружения, созданные внутри метода.

**Возвращает**:
- Ничего, метод проверяет утверждения (`assert`).

**Вызывает исключения**:
- Не вызывает исключений напрямую, но может их пробросить, если `buid_templates` вызывает исключение.

#### `test_build_templates_with_non_existing_directory`

**Описание**: Метод `test_build_templates_with_non_existing_directory` пытается вызвать функцию `buid_templates` с несуществующей директорией и проверяет, что возникает исключение `FileNotFoundError`.

**Как работает функция**:
1. Используется контекстный менеджер `self.assertRaises(FileNotFoundError)` для проверки того, что при вызове `buid_templates` с несуществующим путем будет выброшено исключение `FileNotFoundError`.
2. Вызывается функция `buid_templates` с путем `'/non/existing/path/'`, который, как предполагается, не существует.

**Параметры**:
- Нет явных параметров, метод использует жестко заданный путь к несуществующей директории.

**Возвращает**:
- Ничего, метод проверяет утверждения (`assert`).

**Вызывает исключения**:
- Ожидает вызов исключения `FileNotFoundError`.

## Функции

### `buid_templates`

```python
def buid_templates(directory_path: str) -> dict:
    """
    Args:
        directory_path (str): Путь к директории с JSON файлами.

    Returns:
        dict: Словарь шаблонов, построенных на основе JSON файлов.

    Raises:
        FileNotFoundError: Если указанная директория не существует.
    """
    ...
```

**Описание**: Функция `buid_templates` строит шаблоны на основе JSON-файлов, находящихся в указанной директории.

**Как работает функция**:
1. Проверяет, существует ли указанная директория. Если нет, вызывает исключение `FileNotFoundError`.
2. Обходит все файлы в директории и её поддиректориях.
3. Если файл имеет расширение `.json`, он открывается и его содержимое считывается как JSON.
4. Полученные данные объединяются в общий словарь шаблонов.

**Параметры**:
- `directory_path` (str): Путь к директории, содержащей JSON-файлы.

**Возвращает**:
- `dict`: Словарь, содержащий шаблоны, построенные на основе содержимого JSON-файлов.

**Вызывает исключения**:
- `FileNotFoundError`: Если указанная директория не существует.

**Примеры**:

```python
# Пример вызова функции с существующей директорией
result = buid_templates('/path/to/existing/directory')
print(result)  # Вывод: {'category1': {'template1': 'some content'}, 'category2': {'template2': 'some content'}}

# Пример вызова функции с несуществующей директорией
try:
    buid_templates('/non/existing/path')
except FileNotFoundError as e:
    print(e)  # Вывод: [Errno 2] No such file or directory: '/non/existing/path'
```