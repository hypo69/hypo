# Модуль rev_ai

## Обзор

Модуль предназначен для работы с API сервиса rev.ai для обработки аудио файлов. Он предоставляет инструменты для осуществления транскрипции, анализа и обработки аудио-данных.

## Подробней

Этот модуль предоставляет класс `RevAI`, который позволяет взаимодействовать с API rev.ai для обработки аудиофайлов. Он включает функциональность для отправки аудиофайлов на обработку и получения результатов. Модуль использует библиотеку `requests` для отправки HTTP-запросов и модуль `logger` для логирования ошибок и информации о процессе обработки.

## Классы

### `RevAI`

**Описание**:
Класс `RevAI` предназначен для взаимодействия с API сервиса rev.ai. Он позволяет отправлять аудиофайлы на обработку и получать результаты.

**Как работает класс**:
Класс инициализируется с API-ключом, который используется для аутентификации при взаимодействии с API rev.ai.  Метод `process_audio_file` принимает путь к аудиофайлу, проверяет его существование, отправляет файл на обработку в API rev.ai и возвращает результат в формате словаря. В случае возникновения ошибок в процессе обработки, информация об ошибке записывается в лог.

**Методы**:

- `__init__`: Инициализирует объект `RevAI` с API-ключом и базовым URL.
- `process_audio_file`: Обрабатывает аудио файл, используя API rev.ai.

**Параметры**:

- `api_key` (str): API ключ для доступа к сервису rev.ai.
- `audio_file_path` (str): Путь к аудио файлу.

**Примеры**:

```python
from src.ai.revai import RevAI

revai_instance = RevAI(api_key='YOUR_API_KEY')  # Замените 'YOUR_API_KEY' на ваш реальный API ключ
result = revai_instance.process_audio_file('path/to/audio.wav')
if result:
    print(f'Результат обработки: {result}')
else:
    print('Обработка не удалась.')
```

## Функции

### `__init__`

```python
def __init__(self, api_key: str):
    """
    Инициализирует объект RevAI с указанным API ключом.

    :param api_key: API ключ для доступа к сервису rev.ai.
    """
```

**Описание**:
Инициализирует объект `RevAI` с указанным API ключом.

**Как работает функция**:
Функция `__init__` является конструктором класса `RevAI`. Она принимает API ключ в качестве аргумента и сохраняет его в атрибуте `api_key`. Также инициализируется базовый URL и заголовки для последующих запросов к API.

**Параметры**:

- `api_key` (str): API ключ для доступа к сервису rev.ai.

**Примеры**:

```python
revai_instance = RevAI(api_key='YOUR_API_KEY')
```

### `process_audio_file`

```python
def process_audio_file(self, audio_file_path: str) -> dict:
    """
    Обрабатывает аудио файл, используя API rev.ai.

    :param audio_file_path: Путь к аудио файлу.
    :return: Результат обработки аудио файла в формате словаря.
    """
```

**Описание**:
Обрабатывает аудио файл, используя API rev.ai.

**Как работает функция**:
Функция `process_audio_file` принимает путь к аудиофайлу в качестве аргумента. Сначала проверяется существование файла. Если файл не найден, функция записывает сообщение об ошибке в лог и возвращает `None`. Далее, функция пытается отправить запрос к API rev.ai для обработки файла. В случае успеха, ответ от API преобразуется в словарь и возвращается. Если в процессе обработки возникают ошибки (например, проблемы с сетью или неверные параметры), информация об ошибке записывается в лог, и функция возвращает `None`.

**Параметры**:

- `audio_file_path` (str): Путь к аудио файлу.

**Возвращает**:

- `dict`: Результат обработки аудио файла в формате словаря.

**Вызывает исключения**:

- `requests.exceptions.RequestException`: Возникает при проблемах с отправкой запроса к API.
- `Exception`: Возникает при общей ошибке в процессе обработки файла.

**Примеры**:

```python
from src.ai.revai import RevAI
from src.logger.logger import logger
import os

# Укажите путь к вашему аудиофайлу
audio_file_path = 'path/to/audio.wav'

# Проверьте, существует ли файл
if not os.path.exists(audio_file_path):
    logger.error(f"Файл {audio_file_path} не найден.")
else:
    # Создайте экземпляр класса RevAI с вашим API-ключом
    revai_instance = RevAI(api_key='YOUR_API_KEY')  # Замените 'YOUR_API_KEY' на ваш реальный API ключ

    # Обработайте аудиофайл
    result = revai_instance.process_audio_file(audio_file_path)

    # Выведите результат или сообщение об ошибке
    if result:
        print(f'Результат обработки: {result}')
    else:
        print('Обработка не удалась.')