Как использовать модуль executor
========================================================================================

Описание
-------------------------
Модуль `executor` предоставляет функции для выполнения сценариев, обработки файлов сценариев, работы с продуктами и взаимодействия с API PrestaShop.  Этот документ содержит примеры использования функций модуля, включая запуск сценариев из файлов, отдельных сценариев, вставку данных о продуктах и добавление купонов в PrestaShop.

Шаги выполнения
-------------------------
Модуль предоставляет несколько функций для выполнения различных задач:

1. **Запуск списка файлов сценариев (`run_scenario_files`):**
   - Принимает на вход экземпляр класса `Supplier` и список путей к файлам сценариев.
   - Выполняет сценарии из переданных файлов последовательно.
   - Возвращает булевое значение: `True`, если все сценарии выполнены успешно, `False` - в случае ошибок.

2. **Запуск одного файла сценария (`run_scenario_file`):**
   - Принимает на вход экземпляр класса `Supplier` и путь к файлу сценария.
   - Выполняет сценарий из указанного файла.
   - Возвращает булевое значение: `True`, если сценарий выполнен успешно, `False` - в случае ошибок.

3. **Запуск одного сценария (`run_scenario`):**
   - Принимает на вход экземпляр класса `Supplier` и словарь со сценарием.
   - Выполняет переданный сценарий.
   - Возвращает булевое значение: `True`, если сценарий выполнен успешно, `False` - в случае ошибок.  Словарь сценария должен содержать, как минимум, поле `url` (адрес страницы для обработки).

4. **Вставка данных о продукте в PrestaShop (`insert_grabbed_data`):**
   - Принимает на вход объект `ProductFields` с данными о продукте.
   - Вставляет данные продукта в базу данных PrestaShop.

5. **Добавление купона в PrestaShop (`add_coupon`):**
   - Принимает на вход словарь с данными для аутентификации в API PrestaShop, ссылку на продукт, код купона, начальную и конечную дату действия купона.
   - Добавляет купон в PrestaShop.

6. **Асинхронная вставка данных о продукте в PrestaShop (`execute_PrestaShop_insert_async`):**
   - Принимает на вход объект `ProductFields` с данными о продукте.
   - Вставляет данные о продукте в базу данных PrestaShop асинхронно.

7. **Синхронная вставка данных о продукте в PrestaShop (`execute_PrestaShop_insert`):**
   - Принимает на вход объект `ProductFields` с данными о продукте.
   - Вставляет данные о продукте в базу данных PrestaShop синхронно.
   - Возвращает булевое значение: `True`, если сценарий выполнен успешно, `False` - в случае ошибок.


Пример использования
-------------------------
.. code-block:: python

    from pathlib import Path
    from src.scenario.executor import run_scenario_files, run_scenario, insert_grabbed_data, add_coupon, execute_PrestaShop_insert_async, execute_PrestaShop_insert
    from src.product import ProductFields
    from src.utils import j_loads  # Подключите необходимые модули

    # ... (Пример создания экземпляра MockSupplier и других необходимых объектов) ...

    # Пример запуска списка файлов сценариев:
    scenario_files = [Path('scenarios/scenario1.json'), Path('scenarios/scenario2.json')]
    run_scenario_files(supplier, scenario_files)


    # Пример вставки данных о продукте:
    product_fields = ProductFields(
        presta_fields_dict={'reference': 'REF123', ... },
        assist_fields_dict={'images_urls': [...], ...}
    )
    insert_grabbed_data(product_fields)


    # Пример добавления купона:
    credentials = {'api_domain': 'https://example.com/api', 'api_key': 'YOUR_API_KEY'}
    add_coupon(credentials, 'REF123', 'SUMMER2024', '2024-07-01', '2024-07-31')

    # Пример асинхронной вставки:
    await execute_PrestaShop_insert_async(product_fields)

    # Пример синхронной вставки:
    execute_PrestaShop_insert(product_fields)