# Анализ кода модуля Banner (Печать баннера)

**Качество кода**
- Соответствие требованиям к формату кода (1-10): 
  - **Преимущества:**
    -  Текст хорошо структурирован и понятен, что способствует лёгкому восприятию.
    -  Присутствует подробное описание игры "Banner" и её правил.
    -  Включает пример диалога, демонстрирующий работу программы.
  - **Недостатки:**
    -  Отсутствует фактический код Python, который можно анализировать и улучшать.
    -  Вместо реального кода присутствуют только инструкции для модели ИИ, что не позволяет оценить качество кода.
    -  Нет примеров использования reStructuredText (RST) и docstring, что противоречит инструкциям.
    -  Нет обработки ошибок и журналирования, что является важным аспектом в реальном программном обеспечении.
    -  Отсутствует импорт необходимых модулей и функций.

**Рекомендации по улучшению**

1.  **Реализация кода на Python:**
    - Необходимо предоставить реальный код на Python, реализующий логику игры "Banner".
    - Код должен включать функции для инициализации, ввода данных, преобразования текста в баннер и вывода результата.

2.  **Использование reStructuredText (RST) и docstring:**
    -  Документировать код с использованием RST для всех функций, классов и модулей.
    -  Добавить docstring для пояснения назначения функций, их параметров и возвращаемых значений.

3.  **Обработка ошибок:**
    -  Внедрить обработку ошибок с использованием `try-except` и логированием с помощью `src.logger.logger`.
    -  Избегать использования стандартных блоков `try-except`, заменяя их логированием ошибок.

4.  **Обработка ввода:**
    -  Реализовать проверку ввода игрока для обеспечения корректности данных.
    -  Обрабатывать ошибки ввода и предоставлять понятные сообщения об ошибках.

5.  **Структура кода:**
    - Разделить код на отдельные функции для лучшей читаемости и переиспользования.
    - Придерживаться соглашений о стиле кода Python (PEP8).

6.  **Импорт модулей:**
    -  Добавить все необходимые импорты в начале файла.

7.  **Примеры кода:**
    -  Включить примеры использования функций и классов с использованием `reStructuredText` и `docstring`.

**Улучшенный код**

```python
"""
Модуль для создания текстовых баннеров.
=========================================================================================

Этот модуль позволяет пользователю вводить текст и отображать его в виде большого баннера,
состоящего из символов. Модуль использует предопределенные матрицы символов для представления
каждой буквы и цифры.

Пример использования
--------------------

.. code-block:: python

    from src.logger.logger import logger
    from src.utils.jjson import j_loads_ns

    banner_generator = BannerGenerator()
    banner_generator.run()
"""
import json # импорт для json.loads, будет заменен на src.utils.jjson.j_loads_ns
from typing import List, Dict, Any # импорт для аннотации типов
from src.logger.logger import logger # импорт логгера

class BannerGenerator:
    """
    Класс для создания текстовых баннеров.
    
    :ivar char_map: Словарь, содержащий матрицы символов для каждой буквы и цифры.
    """
    def __init__(self):
        """
        Инициализирует объект BannerGenerator, загружая карту символов.
        """
        self.char_map: Dict[str, List[str]] = self._load_char_map() # загрузка матрицы символов

    def _load_char_map(self) -> Dict[str, List[str]]:
        """
        Загружает карту символов из JSON файла.

        :return: Словарь, содержащий матрицы символов для каждой буквы и цифры.
        :raises FileNotFoundError: Если файл char_map.json не найден.
        :raises json.JSONDecodeError: Если файл char_map.json имеет неверный формат.
        """
        try:
            # Загрузка данных из JSON файла с использованием j_loads_ns #
            with open('char_map.json', 'r', encoding='utf-8') as f: # открытие файла
              char_map = json.load(f) # загрузка json данных
            return char_map
        except FileNotFoundError as e:
            logger.error(f'Файл char_map.json не найден: {e}') # логирование ошибки
            return {} # возвращение пустого словаря
        except json.JSONDecodeError as e:
            logger.error(f'Ошибка декодирования JSON: {e}') # логирование ошибки
            return {} # возвращение пустого словаря

    def _validate_input(self, text: str) -> bool:
      """
      Проверяет, состоит ли строка только из букв и цифр.

      :param text: Текст для проверки.
      :return: True, если строка корректна, иначе False.
      """
      if not text.isalnum():
          logger.error('Ввод должен содержать только буквы и цифры.') # логирование ошибки
          return False
      return True
        
    def _create_banner(self, text: str) -> str:
        """
        Создает баннер из текста.

        :param text: Текст для преобразования в баннер.
        :return: Строка, представляющая баннер.
        """
        if not self.char_map:
            logger.error('Карта символов не загружена.') # логирование ошибки
            return '' # возвращает пустую строку, если карта символов не загружена
            
        banner_lines: List[str] = ['' for _ in range(5)] # инициализация списка строк
        for char in text.upper(): # итерирование по символам в верхнем регистре
            if char in self.char_map:
                char_lines = self.char_map[char] # получение матрицы символов для символа
                for i, line in enumerate(char_lines): # добавление каждой строки символа в соответсвующую строку баннера
                    banner_lines[i] += line + '  ' # добавляем 2 пробела после каждого символа
            else:
                logger.error(f'Символ "{char}" не найден в карте символов.')  # логирование ошибки, если символ не найден
                for i in range(5): # если символ не найден, заменяем его пробелами
                   banner_lines[i] += '     '
        return '\n'.join(banner_lines) # объединение всех строк баннера в одну строку с разделителем '\n'

    def run(self):
        """
        Запускает игру "Banner".
        """
        while True:
            text = input('Введите сообщение для создания баннера: ') # запрос у пользователя ввода
            if not self._validate_input(text):
                continue
            
            banner = self._create_banner(text) # создание баннера
            print(banner) # вывод баннера

            another = input('Хотите создать еще один баннер? (да/нет): ').lower() # запрос еще раз
            if another != 'да': # проверка, что пользователь хочет завершить игру
               print('Спасибо за игру!')
               break # завершение цикла


if __name__ == '__main__':
    banner_generator = BannerGenerator() # инициализация объекта
    banner_generator.run() # запуск игры
```