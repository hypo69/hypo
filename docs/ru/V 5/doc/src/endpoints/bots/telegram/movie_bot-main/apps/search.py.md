# Модуль для поиска фильмов и сериалов на Kinopoisk

## Обзор

Модуль `search.py` предназначен для поиска информации о фильмах и сериалах на сайте Kinopoisk с использованием поисковой системы Google. Он использует библиотеки `requests` для выполнения HTTP-запросов, `BeautifulSoup` для парсинга HTML-ответов и модуль `useragent` для получения случайного User-Agent.

## Подробней

Модуль предоставляет функцию `search_query`, которая выполняет поиск по заданному запросу и типу контента (фильм или сериал) на сайте Kinopoisk через поисковую систему Google. Результаты поиска парсятся, и возвращается словарь с информацией о найденном фильме или сериале.

## Функции

### `search_query`

```python
def search_query(query: str, type_movie: str = 'series') -> dict | None:
    """
    Args:
        query (str): Поисковой запрос.
        type_movie (str, optional): Тип контента ('series' или 'movie'). По умолчанию 'series'.

    Returns:
        dict | None: Словарь с информацией о фильме/сериале (ссылка, заголовок, описание) или `None`, если ничего не найдено.

    Raises:
        Не вызывает исключений напрямую, но может возникнуть исключение при выполнении HTTP-запроса или парсинге HTML.

    Example:
        >>> search_query('теория большого взрыва')
        {'link': 'https://w2.kpfr.wiki/series/...', 'title': '...', 'description': '...'}
    """
```

**Как работает функция**:
1. Формирует поисковой запрос для Google, используя переданные `query` и `type_movie`.
2. Отправляет GET-запрос к Google с использованием случайного User-Agent для имитации запроса от браузера.
3. Парсит HTML-ответ с помощью `BeautifulSoup`.
4. Находит блоки результатов поиска.
5. Итерируется по блокам результатов, извлекая ссылку, заголовок и описание.
6. Проверяет, что ссылка ведет на страницу Kinopoisk и содержит числовой идентификатор фильма/сериала.
7. Формирует словарь с извлеченной информацией и возвращает его.
8. Если ничего не найдено, возвращает `None`.

**Параметры**:
- `query` (str): Поисковой запрос, например, название фильма или сериала.
- `type_movie` (str, optional): Тип контента, который нужно искать. Может принимать значения `'series'` (сериалы) или `'movie'` (фильмы). По умолчанию `'series'`.

**Возвращает**:
- `dict | None`: Словарь, содержащий информацию о найденном фильме или сериале, если найден. Ключи словаря:
    - `'link'` (str): Ссылка на страницу фильма или сериала на сайте `w2.kpfr.wiki`.
    - `'title'` (str): Заголовок найденного результата (название фильма или сериала).
    - `'description'` (str): Краткое описание фильма или сериала.
- `None`: Возвращается, если по заданному запросу ничего не найдено.

**Примеры**:
```python
from apps.search import search_query

result = search_query('Игра престолов', type_movie='series')
if result:
    print(f"Название: {result['title']}")
    print(f"Описание: {result['description']}")
    print(f"Ссылка: {result['link']}")
else:
    print("Ничего не найдено")
```

```python
from apps.search import search_query

result = search_query('Дюна', type_movie='movie')
if result:
    print(f"Название: {result['title']}")
    print(f"Описание: {result['description']}")
    print(f"Ссылка: {result['link']}")
else:
    print("Ничего не найдено")
```