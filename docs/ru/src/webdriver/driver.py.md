# src.webdriver.driver

## Обзор

Модуль `src.webdriver.driver` предназначен для работы с веб-драйверами Selenium. Класс `Driver` предоставляет унифицированный интерфейс для взаимодействия с различными веб-драйверами, такими как Chrome, Firefox и Edge. Он включает в себя методы для инициализации драйвера, навигации по URL, прокрутки страниц, работы с куки и обработки исключений.

## Оглавление

- [Классы](#классы)
    - [`Driver`](#driver)
- [Функции](#функции)
    - [`__init__`](#__init__)
    - [`__init_subclass__`](#__init_subclass__)
    - [`__getattr__`](#__getattr__)
    - [`scroll`](#scroll)
    - [`locale`](#locale)
    - [`get_url`](#get_url)
    - [`window_open`](#window_open)
    - [`wait`](#wait)
    - [`_save_cookies_localy`](#_save_cookies_localy)
    - [`fetch_html`](#fetch_html)
    
## Классы

### `Driver`

**Описание**: Класс `Driver` обеспечивает унифицированный интерфейс для взаимодействия с Selenium WebDriver. Он предоставляет удобные методы для работы с веб-драйверами, такими как Chrome, Firefox и Edge.

**Атрибуты**:
- `driver` (`selenium.webdriver`): Экземпляр Selenium WebDriver.

**Методы**:
- [`__init__`](#__init__): Инициализирует экземпляр класса `Driver`.
- [`__init_subclass__`](#__init_subclass__): Автоматически вызывается при создании подкласса `Driver`.
- [`__getattr__`](#__getattr__): Прокси для доступа к атрибутам драйвера.
- [`scroll`](#scroll): Прокручивает страницу в указанном направлении.
- [`locale`](#locale): Определяет язык страницы на основе мета-тегов или JavaScript.
- [`get_url`](#get_url): Переходит по указанному URL и сохраняет куки.
- [`window_open`](#window_open): Открывает новую вкладку в текущем окне браузера и переключается на неё.
- [`wait`](#wait): Ожидает указанное количество времени.
- [`_save_cookies_localy`](#_save_cookies_localy): Сохраняет текущие куки веб-драйвера в локальный файл.
- [`fetch_html`](#fetch_html): Извлекает HTML-контент из файла или веб-страницы.

## Функции

### `__init__`

**Описание**: Инициализирует экземпляр класса `Driver`.

**Параметры**:
- `webdriver_cls` (type): Класс WebDriver, например `Chrome` или `Firefox`.
- `*args`: Позиционные аргументы для драйвера.
- `**kwargs`: Ключевые аргументы для драйвера.

**Пример**:
```python
from selenium.webdriver import Chrome
driver = Driver(Chrome, executable_path='/path/to/chromedriver')
```

**Вызывает исключения**:
- `TypeError`: Если `webdriver_cls` не является допустимым классом WebDriver.

### `__init_subclass__`

**Описание**: Автоматически вызывается при создании подкласса `Driver`.

**Параметры**:
- `cls`: Класс, для которого вызывается метод.
- `browser_name` (str, optional): Имя браузера.
- `**kwargs`: Дополнительные аргументы.

**Вызывает исключения**:
- `ValueError`: Если `browser_name` не указан.

### `__getattr__`

**Описание**: Прокси для доступа к атрибутам драйвера.

**Параметры**:
- `item` (str): Имя атрибута.

**Пример**:
```python
driver.current_url
```

### `scroll`

**Описание**: Прокручивает страницу в указанном направлении.

**Параметры**:
- `scrolls` (int, optional): Количество прокруток. По умолчанию 1.
- `frame_size` (int, optional): Размер прокрутки в пикселях. По умолчанию 600.
- `direction` (str, optional): Направление прокрутки ('both', 'down', 'up'). По умолчанию 'both'.
- `delay` (float, optional): Задержка между прокрутками в секундах. По умолчанию 0.3.

**Возвращает**:
- `bool`: `True`, если прокрутка успешна, `False` в противном случае.

**Пример**:
```python
driver.scroll(scrolls=3, direction='down')
```

### `locale`

**Описание**: Определяет язык страницы на основе мета-тегов или JavaScript.

**Возвращает**:
- `Optional[str]`: Код языка, если найден, иначе `None`.

**Пример**:
```python
lang = driver.locale
print(lang)  # 'en' или None
```

### `get_url`

**Описание**: Переходит по указанному URL и сохраняет текущий URL, предыдущий URL и куки.

**Параметры**:
- `url` (str): URL для перехода.

**Возвращает**:
- `bool`: `True`, если переход успешен и текущий URL совпадает с ожидаемым, `False` в противном случае.

**Вызывает исключения**:
- `WebDriverException`: Если возникает ошибка с WebDriver.
- `InvalidArgumentException`: Если URL некорректен.
- `Exception`: Для любых других ошибок при переходе.

### `window_open`

**Описание**: Открывает новую вкладку в текущем окне браузера и переключается на неё.

**Параметры**:
- `url` (Optional[str], optional): URL для открытия в новой вкладке. По умолчанию `None`.

### `wait`

**Описание**: Ожидает указанное количество времени.

**Параметры**:
- `delay` (float, optional): Время задержки в секундах. По умолчанию 0.3.

**Возвращает**:
- `None`

### `_save_cookies_localy`

**Описание**: Сохраняет текущие куки веб-драйвера в локальный файл.

**Возвращает**:
- `None`

**Вызывает исключения**:
- `Exception`: Если возникает ошибка при сохранении куки.

### `fetch_html`

**Описание**: Извлекает HTML-контент из файла или веб-страницы.

**Параметры**:
- `url` (str): Путь к файлу или URL для извлечения HTML-контента.

**Возвращает**:
- `Optional[bool]`: Возвращает `True`, если контент успешно получен, иначе `None`.

**Вызывает исключения**:
- `Exception`: Если возникает ошибка при извлечении контента.