Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код реализует перевод полей товара на языки клиентской базы данных. Он принимает словарь `presta_fields_dict`, содержащий данные о товаре с мультиязычными полями, схему языков клиента `client_langs_schema`, и язык страницы `page_lang`.  Функция обновляет идентификаторы языков в словаре `presta_fields_dict` на соответствующие идентификаторы из `client_langs_schema`,  если язык страницы совпадает с языком в схеме.  Если перевода нет в базе, создается запись.  В основной функции `translate_presta_fields_dict` выполняется поиск перевода для каждого поля товара в базе данных и обновляет словарь.

Шаги выполнения
-------------------------
1. **Получение данных**: Функция принимает на вход `presta_fields_dict`, `client_langs_schema`, и `page_lang`.
2. **Переупорядочивание ключей**: Вызывается функция `rearrange_language_keys`, которая ищет идентификатор языка из схемы `client_langs_schema` соответствующий языку страницы `page_lang`.
3. **Проверка перевода в базе**: Функция проверяет наличие перевода в таблице переводов (`get_translations_from_presta_translations_table`) для текущего товара.
4. **Добавление перевода**: Если перевода в базе нет, то создается новая запись перевода (`insert_new_translation_to_presta_translations_table`).
5. **Итерация по переведенным записям**: Если переводы есть в базе, выполняется цикл по каждому переводу и клиентскому языку.
6. **Поиск соответствия**: Внутри цикла происходит проверка, совпадает ли `iso_code` клиента с языком в переведенной записи.
7. **Обновление словаря**: Если совпадение найдено, значение поля в словаре обновляется с использованием идентификатора языка клиента.
8. **Обработка ошибок**: Вложенный блок `try...except` обрабатывает возможные ошибки во время поиска перевода и выводит сообщение об ошибке в журнал (`logger.error`).
9. **Возврат результата**: Функция возвращает обновленный словарь `presta_fields_dict`.


Пример использования
-------------------------
.. code-block:: python

    import json

    # Пример данных
    presta_fields_dict = {'reference': '123', 'name': {'language': [{'attrs': {'id': '2'}, 'value': 'Product Name'}]}, 'description': {'language': [{'attrs': {'id': '2'}, 'value': 'Description'}]}}
    client_langs_schema = [{'id': 1, 'locale': 'ru-RU', 'iso_code': 'ru'}, {'id': 2, 'locale': 'en-US', 'iso_code': 'en'}]
    page_lang = 'en-US'

    # Пример использования функции
    translated_dict = translate_presta_fields_dict(presta_fields_dict, client_langs_schema, page_lang)
    print(json.dumps(translated_dict, indent=2))