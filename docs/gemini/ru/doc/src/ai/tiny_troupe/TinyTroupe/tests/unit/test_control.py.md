# Документация модуля `test_control.py`

## Обзор

Этот модуль содержит набор модульных тестов для проверки функциональности управления симуляциями в `tinytroupe`. Тесты проверяют корректность запуска, сохранения состояния и завершения симуляций с различными типами агентов и сред.

## Оглавление

1. [Функции](#Функции)
    - [`test_begin_checkpoint_end_with_agent_only`](#test_begin_checkpoint_end_with_agent_only)
    - [`test_begin_checkpoint_end_with_world`](#test_begin_checkpoint_end_with_world)
    - [`test_begin_checkpoint_end_with_factory`](#test_begin_checkpoint_end_with_factory)
    - [`aux_simulation_to_repeat`](#aux_simulation_to_repeat)

## Функции

### `test_begin_checkpoint_end_with_agent_only`

**Описание**:
Тестирует запуск, создание чекпоинта и завершение симуляции с использованием только агентов. Проверяет, что состояние симуляции корректно сохраняется и восстанавливается.

**Параметры**:
- `setup` (fixture): Фикстура pytest для настройки тестовой среды.

**Возвращает**:
- `None`

**Вызывает исключения**:
- `AssertionError`: Возникает, если состояние симуляции не соответствует ожидаемому.

### `test_begin_checkpoint_end_with_world`

**Описание**:
Тестирует запуск, создание чекпоинта и завершение симуляции с использованием `TinyWorld`. Проверяет, что состояние симуляции и мира корректно сохраняется и восстанавливается.

**Параметры**:
- `setup` (fixture): Фикстура pytest для настройки тестовой среды.

**Возвращает**:
- `None`

**Вызывает исключения**:
- `AssertionError`: Возникает, если состояние симуляции не соответствует ожидаемому.

### `test_begin_checkpoint_end_with_factory`

**Описание**:
Тестирует запуск, создание чекпоинта и завершение симуляции с использованием `TinyPersonFactory`. Проверяет, что состояние симуляции и созданных агентов корректно сохраняется и восстанавливается между итерациями симуляции.

**Параметры**:
- `setup` (fixture): Фикстура pytest для настройки тестовой среды.

**Возвращает**:
- `None`

**Вызывает исключения**:
- `AssertionError`: Возникает, если состояние симуляции не соответствует ожидаемому или если атрибуты агентов не совпадают между симуляциями.

### `aux_simulation_to_repeat`

**Описание**:
Вспомогательная функция для теста `test_begin_checkpoint_end_with_factory`. Выполняет итерацию симуляции с использованием `TinyPersonFactory` и возвращает созданного агента.

**Параметры**:
- `iteration` (int): Номер итерации симуляции.
- `verbose` (bool, optional): Флаг для включения детального логирования. По умолчанию `False`.

**Возвращает**:
- `TinyPerson`: Созданный агент.

**Вызывает исключения**:
- `AssertionError`: Возникает, если состояние симуляции не соответствует ожидаемому.