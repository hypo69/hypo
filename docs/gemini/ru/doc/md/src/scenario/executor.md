# Модуль `hypotez/src/scenario/executor.py`

## Обзор

Модуль `executor.py` содержит функции для выполнения сценариев, загрузки их из файлов, обработки процесса извлечения информации о продуктах и её вставки в PrestaShop.

## Функции

### `dump_journal`

**Описание**: Сохраняет данные журнала в файл JSON.

**Параметры**:
- `s` (объект): Экземпляр поставщика.
- `journal` (словарь): Словарь, содержащий данные журнала.

**Возвращает**:
-  Не имеет возвращаемого значения.


### `run_scenario_files`

**Описание**: Выполняет список файлов сценариев.

**Параметры**:
- `s` (объект): Экземпляр поставщика.
- `scenario_files_list` (список или путь к файлу): Список путей к файлам сценариев или путь к одному файлу.

**Возвращает**:
- `bool`: `True`, если все сценарии выполнены успешно, `False` в противном случае.

**Возможные исключения**:
- `TypeError`: Если `scenario_files_list` не является списком или объектом `Path`.


### `run_scenario_file`

**Описание**: Загружает и выполняет сценарии из файла.

**Параметры**:
- `s` (объект): Экземпляр поставщика.
- `scenario_file` (объект `Path`): Путь к файлу сценария.

**Возвращает**:
- `bool`: `True`, если сценарий выполнен успешно, `False` в противном случае.

**Возможные исключения**:
- `FileNotFoundError`: Если файл не найден.
- `json.JSONDecodeError`: Если файл не является валидным JSON.
- Другие исключения:  При возникновении любой другой ошибки во время обработки файла.



### `run_scenarios`

**Описание**: Выполняет список сценариев (НЕ ФАЙЛОВ).

**Параметры**:
- `s` (объект): Экземпляр поставщика.
- `scenarios` (список или словарь): Список или единственный сценарий в виде словаря.

**Возвращает**:
- Список или словарь результатов выполнения сценариев, или `False` в случае ошибки.


**Описание параметров**:
- `scenarios`: Принимает список сценариев или один сценарий в виде словаря. Функция `run_scenario(s, scenario)` используется для выполнения сценариев.

**Возвращает**:
- Результат выполнения сценариев в виде списка или словаря, в зависимости от типа входных данных, или `False` в случае ошибки.

**Замечания**:
- Необходимо проверить случай, когда не указаны сценарии.


### `run_scenario`

**Описание**: Функция для выполнения полученного сценария.

**Параметры**:
- `supplier` (объект): Экземпляр поставщика.
- `scenario` (словарь): Словарь, содержащий детали сценария.
- `scenario_name` (строка): Имя сценария.


**Возвращает**:
- Результат выполнения сценария.

**Замечания**:
- Требуется проверить необходимость параметра `scenario_name`.


### `insert_grabbed_data`

**Описание**: Вставляет полученные данные о продуктах в PrestaShop.

**Параметры**:
- `product_fields` (объект `ProductFields`): Объект, содержащий информацию о продукте.

**Возвращает**:
- Не имеет возвращаемого значения.


**Замечания**:
- Необходимо перенести эту логику в другой файл. В класс `PrestaShop`.


### `execute_PrestaShop_insert_async`

**Описание**: Асинхронная функция для вставки продукта в PrestaShop.

**Параметры**:
- `f` (объект `ProductFields`): Объект, содержащий информацию о продукте.
- `coupon_code` (строка, необязательно): Купонный код.
- `start_date` (строка, необязательно): Дата начала акции.
- `end_date` (строка, необязательно): Дата окончания акции.

**Возвращает**:
- `bool`: `True`, если вставка прошла успешно, `False` в противном случае.

**Замечания**:
- Использует `execute_PrestaShop_insert`.


### `execute_PrestaShop_insert`

**Описание**: Вставляет продукт в PrestaShop.

**Параметры**:
- `f` (объект `ProductFields`): Объект, содержащий информацию о продукте.
- `coupon_code` (строка, необязательно): Купонный код.
- `start_date` (строка, необязательно): Дата начала акции.
- `end_date` (строка, необязательно): Дата окончания акции.


**Возвращает**:
- `bool`: `True`, если вставка прошла успешно, `False` в противном случае.

**Возможные исключения**:
- `Exception`:  При возникновении любой ошибки во время вставки.