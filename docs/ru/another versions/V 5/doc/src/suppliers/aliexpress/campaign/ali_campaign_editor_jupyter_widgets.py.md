# Модуль `ali_campaign_editor_jupyter_widgets`

## Обзор

Модуль `ali_campaign_editor_jupyter_widgets.py` предоставляет набор Jupyter widgets для управления кампаниями AliExpress. Он включает в себя виджеты для выбора кампаний, категорий и языков, а также для выполнения таких действий, как инициализация редактора кампаний, сохранение кампаний и отображение продуктов.

## Подробней

Этот модуль предназначен для использования в Jupyter notebook, чтобы упростить взаимодействие с кампаниями AliExpress. Он предоставляет графический интерфейс для выбора кампаний, категорий и языков, а также для выполнения различных действий, связанных с управлением кампаниями, таких как сохранение изменений и отображение списка продуктов.

## Классы

### `JupyterCampaignEditorWidgets`

**Описание**: Класс `JupyterCampaignEditorWidgets` предоставляет виджеты для редактирования кампаний AliExpress в Jupyter Notebook.

**Как работает класс**:
Класс `JupyterCampaignEditorWidgets` инициализирует и отображает набор виджетов Jupyter для взаимодействия с редактором кампаний AliExpress. Он включает выпадающие списки для выбора кампании, категории и языка, а также кнопки для инициализации редактора, сохранения кампании, отображения продуктов и открытия Google Sheets. Класс также содержит методы обратного вызова, которые реагируют на изменения в виджетах и выполняют соответствующие действия, такие как обновление списка категорий на основе выбранной кампании или сохранение кампании.
- `language` (str): Язык кампании.
- `currency` (str): Валюта кампании.
- `campaign_name` (str): Название кампании.
- `category_name` (str): Название категории.
- `category` (SimpleNamespace): Объект, представляющий категорию.
- `campaign_editor` (AliCampaignEditor): Редактор кампании AliExpress.
- `products` (list[SimpleNamespace]): Список продуктов кампании.

**Методы**:

- `__init__`: Инициализирует виджеты и настраивает редактор кампаний.
- `initialize_campaign_editor`: Инициализирует редактор кампаний на основе выбранной кампании и категории.
- `update_category_dropdown`: Обновляет выпадающий список категорий на основе выбранной кампании.
- `on_campaign_name_change`: Обрабатывает изменения в выпадающем списке названий кампаний.
- `on_category_change`: Обрабатывает изменения в выпадающем списке категорий.
- `on_language_change`: Обрабатывает изменения в выпадающем списке языков.
- `save_campaign`: Сохраняет кампанию и ее категории.
- `show_products`: Отображает продукты в выбранной категории.
- `open_spreadsheet`: Открывает Google Spreadsheet в браузере.
- `setup_callbacks`: Настраивает обратные вызовы для виджетов.
- `display_widgets`: Отображает виджеты для взаимодействия в Jupyter notebook.

#### `__init__`

```python
    def __init__(self):
        """Initialize the widgets and set up the campaign editor.

        Sets up the widgets for selecting campaigns, categories, and languages. Also sets up
        default values and callbacks for the widgets.
        """
        ...
```

**Описание**: Инициализирует виджеты и настраивает редактор кампаний.

**Как работает функция**:
Метод инициализирует виджеты Jupyter, используемые для выбора кампании, категории и языка. Он также настраивает пути к директориям кампаний и создает выпадающие списки для выбора кампании, категории и языка. Кроме того, метод создает кнопки для инициализации редактора кампаний, сохранения кампании, отображения продуктов и открытия Google Spreadsheet. В заключение, метод устанавливает обратные вызовы для обработки изменений в виджетах и инициализирует редактор кампаний с значениями по умолчанию.

**Параметры**:
- Отсутствуют.

**Возвращает**:
- Отсутствует.

**Вызывает исключения**:
- `FileNotFoundError`: Если директория кампаний не существует.

#### `initialize_campaign_editor`

```python
    def initialize_campaign_editor(self, _):
        """Initialize the campaign editor.

        Args:
            _: Unused argument, required for button callback.

        Sets up the campaign editor based on the selected campaign and category.
        """
        ...
```

**Описание**: Инициализирует редактор кампаний на основе выбранной кампании и категории.

**Как работает функция**:
Метод инициализирует редактор кампаний AliExpress на основе выбранных значений кампании, категории и языка. Он извлекает выбранные значения из выпадающих списков, обновляет список категорий, создает экземпляр `AliCampaignEditor` и получает информацию о категории и продуктах, если категория выбрана. Если название кампании не выбрано, регистрируется предупреждение.

**Параметры**:
- `_`: Неиспользуемый аргумент, необходимый для обратного вызова кнопки.

**Возвращает**:
- Отсутствует.

**Вызывает исключения**:
- Отсутствуют.

#### `update_category_dropdown`

```python
    def update_category_dropdown(self, campaign_name: str):
        """Update the category dropdown based on the selected campaign.

        Args:
            campaign_name (str): The name of the campaign.

        Example:
            >>> self.update_category_dropdown("SummerSale")
        """
        ...
```

**Описание**: Обновляет выпадающий список категорий на основе выбранной кампании.

**Как работает функция**:
Метод обновляет выпадающий список категорий на основе выбранного названия кампании. Он создает путь к директории категорий кампании, получает список названий категорий из этой директории и устанавливает их в качестве опций для выпадающего списка категорий.

**Параметры**:
- `campaign_name` (str): Название кампании.

**Возвращает**:
- Отсутствует.

**Вызывает исключения**:
- Отсутствуют.

#### `on_campaign_name_change`

```python
    def on_campaign_name_change(self, change: dict[str, str]):
        """Handle changes in the campaign name dropdown.

        Args:
            change (dict[str, str]): The change dictionary containing the new value.

        Example:
            >>> self.on_campaign_name_change({\'new\': \'SummerSale\'})
        """
        ...
```

**Описание**: Обрабатывает изменения в выпадающем списке названий кампаний.

**Как работает функция**:
Метод вызывается при изменении значения в выпадающем списке названий кампаний. Он получает новое название кампании из словаря `change`, обновляет список категорий на основе выбранной кампании и повторно инициализирует редактор кампаний с новым названием кампании.

**Параметры**:
- `change` (dict[str, str]): Словарь изменений, содержащий новое значение.

**Возвращает**:
- Отсутствует.

**Вызывает исключения**:
- Отсутствуют.

#### `on_category_change`

```python
    def on_category_change(self, change: dict[str, str]):
        """Handle changes in the category dropdown.

        Args:
            change (dict[str, str]): The change dictionary containing the new value.

        Example:
            >>> self.on_category_change({\'new\': \'Electronics\'})
        """
        ...
```

**Описание**: Обрабатывает изменения в выпадающем списке категорий.

**Как работает функция**:
Метод вызывается при изменении значения в выпадающем списке категорий. Он получает новое название категории из словаря `change`, и повторно инициализирует редактор кампаний с новой категорией.

**Параметры**:
- `change` (dict[str, str]): Словарь изменений, содержащий новое значение.

**Возвращает**:
- Отсутствует.

**Вызывает исключения**:
- Отсутствуют.

#### `on_language_change`

```python
    def on_language_change(self, change: dict[str, str]):
        """Handle changes in the language dropdown.

        Args:
            change (dict[str, str]): The change dictionary containing the new value.

        Example:
            >>> self.on_language_change({\'new\': \'EN USD\'})
        """
        ...
```

**Описание**: Обрабатывает изменения в выпадающем списке языков.

**Как работает функция**:
Метод вызывается при изменении значения в выпадающем списке языков. Он получает новый язык и валюту из словаря `change`, и повторно инициализирует редактор кампаний с новым языком и валютой.

**Параметры**:
- `change` (dict[str, str]): Словарь изменений, содержащий новое значение.

**Возвращает**:
- Отсутствует.

**Вызывает исключения**:
- Отсутствуют.

#### `save_campaign`

```python
    def save_campaign(self, _):
        """Save the campaign and its categories.

        Args:
            _: Unused argument, required for button callback.

        Example:
            >>> self.save_campaign(None)
        """
        ...
```

**Описание**: Сохраняет кампанию и ее категории.

**Как работает функция**:
Метод сохраняет кампанию и ее категории. Он получает название кампании, название категории и язык из соответствующих выпадающих списков. Если название кампании и язык выбраны, он создает экземпляр `AliCampaignEditor` и вызывает метод `save_categories_from_worksheet` для сохранения категорий из электронной таблицы. Если возникает ошибка при сохранении кампании, она регистрируется. Если название кампании или язык не выбраны, регистрируется предупреждение.

**Параметры**:
- `_`: Неиспользуемый аргумент, необходимый для обратного вызова кнопки.

**Возвращает**:
- Отсутствует.

**Вызывает исключения**:
- Отсутствуют.

#### `show_products`

```python
    def show_products(self, _):
        """Display the products in the selected category.

        Args:
            _: Unused argument, required for button callback.

        Example:
            >>> self.show_products(None)
        """
        ...
```

**Описание**: Отображает продукты в выбранной категории.

**Как работает функция**:
Метод отображает продукты в выбранной категории. Он получает название кампании и название категории из соответствующих выпадающих списков. Затем он создает экземпляр `AliCampaignEditor` и вызывает метод `set_products_worksheet` для отображения продуктов в электронной таблице. Если возникает ошибка при отображении продуктов, она регистрируется.

**Параметры**:
- `_`: Неиспользуемый аргумент, необходимый для обратного вызова кнопки.

**Возвращает**:
- Отсутствует.

**Вызывает исключения**:
- Отсутствуют.

#### `open_spreadsheet`

```python
    def open_spreadsheet(self, _):
        """Open the Google Spreadsheet in a browser.

        Args:
            _: Unused argument, required for button callback.

        Example:
            >>> self.open_spreadsheet(None)
        """
        ...
```

**Описание**: Открывает Google Spreadsheet в браузере.

**Как работает функция**:
Метод открывает Google Spreadsheet в браузере. Он проверяет, инициализирован ли редактор кампаний, и если да, то формирует URL-адрес электронной таблицы и открывает его в браузере. Если редактор кампаний не инициализирован, выводится сообщение с запросом на предварительную инициализацию редактора кампаний.

**Параметры**:
- `_`: Неиспользуемый аргумент, необходимый для обратного вызова кнопки.

**Возвращает**:
- Отсутствует.

**Вызывает исключения**:
- Отсутствуют.

#### `setup_callbacks`

```python
    def setup_callbacks(self):
        """Set up callbacks for the widgets."""
        ...
```

**Описание**: Настраивает обратные вызовы для виджетов.

**Как работает функция**:
Метод устанавливает обратные вызовы для виджетов. Он связывает методы `on_campaign_name_change`, `on_category_change` и `on_language_change` с событиями изменения значения в выпадающих списках названий кампаний, категорий и языков соответственно. Кроме того, он связывает методы `initialize_campaign_editor`, `save_campaign`, `show_products` и `open_spreadsheet` с событиями нажатия на кнопки инициализации, сохранения, отображения продуктов и открытия электронной таблицы соответственно.

**Параметры**:
- Отсутствуют.

**Возвращает**:
- Отсутствует.

**Вызывает исключения**:
- Отсутствуют.

#### `display_widgets`

```python
    def display_widgets(self):
        """Display the widgets for interaction in the Jupyter notebook.

        Initializes the campaign editor automatically with the first campaign selected.

        Example:
            >>> self.display_widgets()
        """
        ...
```

**Описание**: Отображает виджеты для взаимодействия в Jupyter notebook.

**Как работает функция**:
Метод отображает виджеты для взаимодействия в Jupyter notebook. Он отображает выпадающие списки для выбора кампании, категории и языка, а также кнопки для инициализации, сохранения, отображения продуктов и открытия электронной таблицы. Кроме того, он автоматически инициализирует редактор кампаний с первой выбранной кампанией.

**Параметры**:
- Отсутствуют.

**Возвращает**:
- Отсутствует.

**Вызывает исключения**:
- Отсутствуют.

## Функции

В данном модуле не обнаружено отдельных функций вне класса `JupyterCampaignEditorWidgets`.