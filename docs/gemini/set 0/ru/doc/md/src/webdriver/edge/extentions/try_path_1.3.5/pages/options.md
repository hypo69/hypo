# Модуль options.js

## Обзор

Данный модуль отвечает за обработку пользовательских настроек для расширения `try_path_1.3.5`. Он позволяет пользователю настроить атрибуты, используемые расширением, а также стиль всплывающего окна.

## Переменные

### `defaultAttributes`

**Описание**: Объект, содержащий значения по умолчанию для атрибутов.

**Значения**:

```javascript
{
    "element": "data-tryxpath-element",
    "context": "data-tryxpath-context",
    "focused": "data-tryxpath-focused",
    "focusedAncestor": "data-tryxpath-focused-ancestor",
    "frame": "data-tryxpath-frame",
    "frameAncestor": "data-tryxpath-frame-ancestor"
}
```

### `defaultPopupBodyStyles`

**Описание**: Объект, содержащий значения по умолчанию для стилей тела всплывающего окна.

**Значения**:

```javascript
{
    "width": "367px",
    "height": "auto"
}
```

## Функции

### `isValidAttrName(name)`

**Описание**: Проверяет, является ли имя атрибута валидным.

**Параметры**:

- `name` (string): Имя атрибута.

**Возвращает**:

- boolean: `true`, если имя атрибута валидное, иначе `false`.

**Обрабатывает исключения**:

- `e`: Возникает, если имя атрибута не валидное.


### `isValidAttrNames(names)`

**Описание**: Проверяет, являются ли имена всех атрибутов в объекте валидными.

**Параметры**:

- `names` (object): Объект, содержащий имена атрибутов.

**Возвращает**:

- boolean: `true`, если все имена атрибутов валидны, иначе `false`.


### `isValidStyleLength(len)`

**Описание**: Проверяет, является ли строка длины стилей валидной.

**Параметры**:

- `len` (string): Строка длины стилей.

**Возвращает**:

- boolean: `true`, если длина стилей валидна, иначе `false`.


### `loadDefaultCss()`

**Описание**: Загружает CSS по умолчанию из файла.

**Возвращает**:

- Promise<string>: Promise, который разрешается с текстом загруженного CSS или отклоняется с ошибкой.

**Обрабатывает исключения**:

- `fu.onError`: При возникновении ошибки во время загрузки CSS.


### `extractBodyStyles(css)`

**Описание**: Извлекает стили ширины и высоты тела всплывающего окна из CSS.

**Параметры**:

- `css` (string): CSS-код.

**Возвращает**:

- object: Объект со стилями ширины и высоты.

**Обрабатывает исключения**:

- Нет.


### `createPopupCss(bodyStyles)`

**Описание**: Создает CSS для тела всплывающего окна на основе переданных стилей.

**Параметры**:

- `bodyStyles` (object): Объект со стилями ширины и высоты.

**Возвращает**:

- string: CSS-код для тела всплывающего окна.


## Обработчики событий

### `window.addEventListener("load", ...)`

**Описание**: Обработчик события загрузки окна. Инициализирует элементы, добавляет слушатели событий и загружает настройки из хранилища.

**Обрабатывает исключения**:

- `fu.onError`: При возникновении ошибки во время загрузки настроек.


### `document.getElementById("save").addEventListener("click", ...)`

**Описание**: Обработчик клика по кнопке "Сохранить". Сохраняет настройки в хранилище.

**Обрабатывает исключения**:

- `err`: При возникновении ошибки во время сохранения настроек.


### `document.getElementById("show-default").addEventListener("click", ...)`

**Описание**: Обработчик клика по кнопке "Показать по умолчанию". Устанавливает значения атрибутов и стилей по умолчанию.

**Обрабатывает исключения**:

- `fu.onError`: При возникновении ошибки при загрузке CSS по умолчанию.