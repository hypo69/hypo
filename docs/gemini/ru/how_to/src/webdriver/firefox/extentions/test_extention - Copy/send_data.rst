Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код JavaScript собирает информацию о загруженной веб-странице (заголовок, URL, содержимое) и отправляет эти данные на сервер по POST-запросу с использованием API Fetch.  Код обрабатывает успешный ответ от сервера, выводя его в консоль, и обрабатывает ошибки, выводимые в консоль.


Шаги выполнения
-------------------------
1. **Собирает информацию о странице:**  Получает заголовок страницы (`document.title`), URL страницы (`window.location.href`) и HTML-код тела страницы (`document.body.innerHTML`).
2. **Формирует объект данных:** Создает JavaScript-объект (`data`), содержащий собранную информацию (заголовок, URL, содержимое).
3. **Отправляет POST-запрос:**  Использует функцию `fetch` для отправки POST-запроса на сервер по адресу `http://127.0.0.1/hypotez.online/api/`.  Запрос содержит данные (`data`) в формате JSON.
4. **Обрабатывает ответ:** Обрабатывает ответ от сервера с помощью `then`-блоков.
    -  Если ответ не успешный (`!response.ok`), выбрасывает ошибку.
    -  В случае успеха, преобразует ответ в JSON (`response.json()`) и выводит его в консоль (`console.log('Response:', json)`).
5. **Обрабатывает ошибки:** Обрабатывает возможные ошибки с помощью `catch`-блока и выводит сообщение об ошибке в консоль (`console.error('Error:', error)`).
6. **Добавляет обработчик события:**  Добавляет обработчик события `load` к объекту `window`.  При загрузке страницы выполняется функция `onPageLoad`.


Пример использования
-------------------------
.. code-block:: javascript

    // Создаем обработчик события для загрузки страницы
    function onPageLoad() {
        // Собираем информацию о странице
        var title = document.title;
        var url = window.location.href;
        var body = document.body.innerHTML;

        // Формируем объект с данными для отправки
        var data = {
            title: title,
            url: url,
            body: body
        };

        // Отправляем данные на указанный адрес
        fetch('http://127.0.0.1/hypotez.online/api/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(json => {
            console.log('Response:', json);
        })
        .catch(error => {
            console.error('Error:', error);
        });
    }

    // Добавляем обработчик события для загрузки страницы
    window.addEventListener('load', onPageLoad);