# Документация для файла popup.js

## Обзор

Файл `popup.js` содержит JavaScript код для веб-расширения, взаимодействующего с сервером FastAPI для получения ответа от модели. Код реализует интерфейс для ввода пользователя и отправки запросов на сервер для получения ответа.

## Оглавление

- [Обзор](#обзор)
- [Функции](#функции)
    - [`loadAssistants`](#loadassistants)
    - [`sendMessage`](#sendMessage)


## Функции

### `loadAssistants`

**Описание**: Функция загружает список доступных ассистентов с сервера.

**Параметры**:
Нет

**Возвращает**:
- Нет. Обновляет `$scope.assistants` в Angular контроллере.

**Вызывает исключения**:
- `Error`: Возникает при ошибке получения данных с сервера.  Ошибка обрабатывается и выводится в консоль.


### `sendMessage`

**Описание**: Функция отправляет сообщение модели на сервер.

**Параметры**:
- Нет. Использует данные из Angular `$scope`.

**Возвращает**:
- Нет. Обновляет `$scope.response` в Angular контроллере.

**Вызывает исключения**:
- `Error`: Возникает при ошибке отправки или получения ответа от сервера. Ошибка обрабатывается, и в `$scope.response` записывается сообщение об ошибке.


## Дополнительные замечания

- В коде используется AngularJS для управления представлением.
- Обращение к серверу выполняется через HTTP запросы (POST и GET) с использованием `$http`.
- Функция `loadAssistants` запрашивает список ассистентов с сервера по адресу `http://localhost:8000/assistants`.
- Функция `sendMessage` отправляет сообщение на сервер по адресу `http://localhost:8000/ask` с дополнительными параметрами, такими как система инструкция и ID ассистента.
- Необходимо добавить соответствующий `endpoint` на стороне сервера FastAPI для обработки этих запросов.
-  Код предполагает, что `$scope`, `$http`, и `angular` доступны в контексте.