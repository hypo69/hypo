# Модуль locator

## Обзор

Данный модуль содержит описание локейторов для взаимодействия с веб-элементами на странице. Локейторы представляют собой конфигурационные объекты, которые описывают, как найти и взаимодействовать с веб-элементами. Они передаются классу `ExecuteLocator` для выполнения различных действий, таких как клики, отправка сообщений, извлечение атрибутов и т.д.  Документация описывает различные примеры локейторов и их ключи, а также их взаимодействие с `executor`.


## Локейторы

### `close_banner`

**Описание**: Закрывает баннер (поп-ап окно), если он появляется на странице. Если баннер не отображается, действие выполняется без ошибок (mandatory: false).

**Ключи**:
- `attribute`: Не используется в этом случае.
- `by`: Тип локейтора (`XPATH`).
- `selector`: Выражение для поиска элемента (`//button[@id = 'closeXButton']`).
- `if_list`: Если найдено несколько элементов, используется первый (`first`).
- `use_mouse`: Не использовать мышь (`false`).
- `mandatory`: Необязательное действие (`false`).
- `timeout`: Таймаут поиска элемента (`0`).
- `timeout_for_event`: Условие ожидания (`presence_of_element_located`).
- `event`: Действие (`click()`).
- `locator_description`: Описание локейтора.

**Взаимодействие с `executor`**:
- `executor` найдет элемент по XPATH и выполнит клик по нему.
- Если элемент не найден, `executor` продолжит выполнение, так как действие не является обязательным (`mandatory: false`).


### `id_manufacturer`

**Описание**: Возвращает значение, заданное в `attribute`.

**Ключи**:
- `attribute`: Значение атрибута (`11290`).
- `by`: Тип локейтора (`VALUE`).
- `selector`: Не используется в этом случае.
- `if_list`: Если найдено несколько элементов, используется первый (`first`).
- `use_mouse`: Не использовать мышь (`false`).
- `mandatory`: Обязательное действие (`true`).
- `timeout`: Таймаут поиска элемента (`0`).
- `timeout_for_event`: Условие ожидания (`presence_of_element_located`).
- `event`: Нет действия (`null`).
- `locator_description`: Описание локейтора.

**Взаимодействие с `executor`**:
- `executor` вернет значение, заданное в `attribute` (`11290`).
- Так как `by` установлено в `VALUE`, `executor` не будет искать элемент на странице.


### `additional_images_urls`

**Описание**: Извлекает URL дополнительных изображений.

**Ключи**:
- `attribute`: Атрибут для извлечения (`src`).
- `by`: Тип локейтора (`XPATH`).
- `selector`: Выражение для поиска элементов (`//ol[contains(@class, 'flex-control-thumbs')]//img`).
- `if_list`: Если найдено несколько элементов, используется первый (`first`).
- `use_mouse`: Не использовать мышь (`false`).
- `mandatory`: Необязательное действие (`false`).
- `timeout`: Таймаут поиска элемента (`0`).
- `timeout_for_event`: Условие ожидания (`presence_of_element_located`).
- `event`: Нет действия (`null`).


**Взаимодействие с `executor`**:
- `executor` найдет элементы по XPATH и извлечет значение атрибута `src` для каждого элемента.
- Если элементы не найдены, `executor` продолжит выполнение, так как действие не является обязательным (`mandatory: false`).


### `default_image_url`

**Описание**: Снимает скриншот основного изображения. Важно! В Morlevi изображение получается через скриншот и возвращается как png (`bytes`).

**Ключи**:
- `attribute`: Не используется.
- `by`: Тип локейтора (`XPATH`).
- `selector`: Выражение для поиска элемента (`//a[@id = 'mainpic']//img`).
- `if_list`: Если найдено несколько элементов, используется первый (`first`).
- `use_mouse`: Не использовать мышь (`false`).
- `timeout`: Таймаут поиска элемента (`0`).
- `timeout_for_event`: Условие ожидания (`presence_of_element_located`).
- `event`: Действие (`screenshot()`).
- `mandatory`: Обязательное действие (`true`).
- `locator_description`: Описание локейтора.


**Взаимодействие с `executor`**:
- `executor` найдет элемент по XPATH и сделает скриншот элемента.
- Если элемент не найден, `executor` сгенерирует ошибку, так как действие является обязательным (`mandatory: true`).


### `id_supplier`

**Описание**: Извлекает текст внутри элемента, содержащего SKU.

**Ключи**:
- `attribute`: Атрибут для извлечения (`innerText`).
- `by`: Тип локейтора (`XPATH`).
- `selector`: Выражение для поиска элемента (`//span[@class = 'ltr sku-copy']`).
- `if_list`: Если найдено несколько элементов, используется первый (`first`).
- `use_mouse`: Не использовать мышь (`false`).
- `mandatory`: Обязательное действие (`true`).
- `timeout`: Таймаут поиска элемента (`0`).
- `timeout_for_event`: Условие ожидания (`presence_of_element_located`).
- `event`: Нет действия (`null`).
- `locator_description`: Описание локейтора.

**Взаимодействие с `executor`**:
- `executor` найдет элемент по XPATH и извлечет текст внутри элемента (`innerText`).
- Если элемент не найден, `executor` сгенерирует ошибку, так как действие является обязательным (`mandatory: true`).


## Взаимодействие с `executor`

`executor` использует локейторы для выполнения различных действий на веб-странице. Основные шаги взаимодействия:

1. **Парсинг локейтора**: Преобразует локейтор в объект `SimpleNamespace`, если необходимо.
2. **Поиск элемента**: Использует тип локейтора (`by`) и селектор (`selector`) для поиска элемента на странице.
3. **Выполнение события**: Если ключ `event` указан, выполняет соответствующее действие (например, клик, скриншот).
4. **Извлечение атрибута**: Если ключ `attribute` указан, извлекает значение атрибута из найденного элемента.
5. **Обработка ошибок**: Если элемент не найден и действие не является обязательным (`mandatory: false`), выполнение продолжается. Если действие является обязательным, генерируется ошибка.


Таким образом, локейторы предоставляют гибкий и мощный инструмент для автоматизации взаимодействия с веб-элементами, а `executor` обеспечивает их выполнение с учетом всех параметров и условий.