# Модуль show_all_results.js

## Обзор

Этот JavaScript-модуль отвечает за отображение результатов поиска, полученных от расширения `tryxpath`. Он отображает информацию о поиске, включая детали контекста и основных результатов в виде таблиц. Модуль также предоставляет возможность экспорта информации в текстовый файл в формате, удобном для чтения.

## Функции

### `showAllResults`

**Описание**: Функция отображает результаты поиска в веб-странице.

**Параметры**:
- `results` (объект): Объект, содержащий результаты поиска. Должен содержать поля `message`, `title`, `href`, `frameId`, `context` и `main`.


**Возвращает**:
-  Не имеет возвращаемого значения.


**Обрабатывает исключения**:
- `fu.onError`: Обрабатывает возможные ошибки при обновлении таблиц.


### `makeTextDownloadUrl`

**Описание**: Создает URL для скачивания текстового файла.

**Параметры**:
- `text` (строка): Текст, который нужно сохранить в файле.

**Возвращает**:
- `string`: URL для скачивания файла.


### `makeInfoText`

**Описание**: Создает текстовое представление результатов поиска в формате, удобном для экспорта.

**Параметры**:
- `results` (объект): Объект, содержащий результаты поиска.

**Возвращает**:
- `string`: Текст результатов поиска.


### `makeConvertedInfoText`

**Описание**: Создает текстовое представление результатов поиска с JSON-представлением параметров.

**Параметры**:
- `results` (объект): Объект, содержащий результаты поиска.

**Возвращает**:
- `string`: Текст результатов поиска с JSON-представлениями.


## Обработчики событий

### `window.addEventListener("load", ...)`

**Описание**: Обработчик события загрузки страницы. Выполняется после загрузки страницы.

**Действия**:
- Запрашивает результаты от расширения (`browser.runtime.sendMessage`).
- Если результаты получены:
    - Сохраняет ID вкладки и фрейма.
    - Устанавливает `href` для кнопок экспорта, создавая URL для скачивания файлов с текстовыми результатами.
    - Вызывает `showAllResults` для отображения результатов.
- Обрабатывает ошибки с помощью `fu.onError`.
- Добавляет обработчик клика для кнопок в таблице с контекстными данными для фокусировки элемента.
- Добавляет обработчик клика для кнопок в таблице с основными результатами для фокусировки элемента.

**Обрабатывает исключения**:
- `fu.onError`: Обрабатывает возможные ошибки при обмене сообщениями с расширением.