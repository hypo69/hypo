# Название модуля: Интерактивное обучение математике: "10-центовый компьютер"

## Обзор

Данный документ представляет собой руководство по интерактивным математическим играм "Ввод-Вывод" и "10-центовый компьютер", реализованным с использованием Google Gemini и Python. Игры предназначены для обучения математическим концепциям и двоичной системе счисления в игровой форме.

## Содержание

- [Обзор](#обзор)
- [Игра "Ввод-Вывод"](#игра-ввод-вывод)
    - [Концепция](#концепция)
    - [Механика](#механика)
    - [Примеры](#примеры)
- [10-центовый компьютер](#10-центовый-компьютер)
    - [Концепция](#концепция-1)
    - [Механика](#механика-1)
    - [Использование](#использование)
    - [Двоичные числа для 10-центового компьютера](#двоичные-числа-для-10-центового-компьютера)
- [Реализация с использованием Google Gemini](#реализация-с-использованием-google-gemini)
    - [Код для `GoogleGenerativeAI`](#код-для-googlegenerativeai)
    - [Реализация игр с использованием класса `GoogleGenerativeAI`](#реализация-игр-с-использованием-класса-googlegenerativeai)
- [Разбор кода](#разбор-кода)
    - [Импорт библиотеки](#импорт-библиотеки)
    - [Класс `GoogleGenerativeAI`](#класс-googlegenerativeai)
    - [Системные инструкции](#системные-инструкции)
    - [Инициализация экземпляров](#инициализация-экземпляров)
    - [Примеры использования](#примеры-использования)
- [Заключение](#заключение)

## Игра "Ввод-Вывод"

### Концепция

Игра "Ввод-Вывод" представляет собой интерактивную задачу, где "магическая машина" преобразует входные числа в выходные по определенному правилу. Ученики должны определить это правило на основе предоставленных данных.

### Механика

1. На доске или проекторе создаются два столбца: "Ввод" и "Вывод".
2. Учитель вводит число в столбец "Ввод".
3. "Машина" обрабатывает число и выводит результат в столбец "Вывод".
4. Ученики пытаются угадать правило преобразования, наблюдая за результатами.

### Примеры

**1. Простое правило**

| Ввод |  Машина = ? | Вывод |
|------|-------------|-------|
| 4    |             | 7     |
| 0    |             | 3     |
|   |             |   |
|   |  Ответ: т.м. = +3 |   |

**2. Более сложное правило**
| Ввод |  Машина = ? | Вывод |
|------|-------------|-------|
| 4   |              | 11     |
| 7   |              | 17     |
| 10  |              | 23     |
|   |  Ответ: т.м. = 2x + 3 |   |

**3. Алгебраическое правило**
| Ввод |  Машина = ? | Вывод |
|------|-------------|-------|
| 9    |             | 4     |
| 25   |             | 6     |
| 4    |             | 3     |
|   |  Ответ: т.м. = √x + 1|   |

## "10-центовый компьютер"

### Концепция

"10-центовый компьютер" – это простая модель для изучения двоичной системы счисления. Она имитирует работу компьютера на основе двоичного кода, используя простую конструкцию с карточной коробкой и прозрачной пленкой.

### Механика

1. **Создание:** На картонной коробке вырезаются четыре отверстия, закрытые прозрачной пленкой и пронумерованные 1, 2, 4 и 8 справа налево.
2. **Двоичное представление:** Открытые отверстия представляют "1", закрытые - "0".
3. **Обучение:** Дети учатся сопоставлять двоичные комбинации с их десятичными эквивалентами.

### Использование

Учитель открывает или закрывает разные отверстия, демонстрируя разные двоичные числа и показывая на доске их десятичные эквиваленты.

### Двоичные числа для 10-центового компьютера

Представление двоичных чисел:

| Двоичное представление | Десятичное число | Двоичное представление | Десятичное число |
|----------------------|------------------|-----------------------|-------------------|
| `o o o o`             | 0                | `# o o o`              | 8                 |
| `# o o o`             | 1                | `# # o o`              | 9                 |
| `o # o o`             | 2                | `o # # o`             | 10                |
| `# # o o`            | 3                | `# # # o`            | 11                |
| `o o # o`           | 4                | `o o # #`             | 12                |
| `# o # o`            | 5                | `# o # #`            | 13                |
| `o # # o`           | 6                | `o # # #`            | 14                |
| `# # # o`            | 7                | `# # # #`            | 15                |

## Реализация с использованием Google Gemini

### Код для `GoogleGenerativeAI`

```python
import google.generativeai as genai

class GoogleGenerativeAI:
    """
    Класс для взаимодействия с моделями Google Generative AI.
    """

    MODELS = [
        'gemini-1.5-flash-8b',
        'gemini-2-13b',
        'gemini-3-20b'
    ]

    def __init__(self, api_key: str, system_instruction: str, model_name: str = 'gemini-2-13b'):
        """
        Инициализация модели GoogleGenerativeAI.

        Args:
            api_key (str): Ключ API для доступа к Gemini.
            system_instruction (str): Инструкция для модели (системный промпт).
            model_name (str, optional): Название используемой модели Gemini. По умолчанию 'gemini-2-13b'.
        """
        self.api_key = api_key
        self.model_name = model_name
        genai.configure(api_key=self.api_key)
        self.model = genai.GenerativeModel(model_name=self.model_name, system_instruction=system_instruction)

    def ask(self, q: str) -> str:
        """
        Отправка запроса модели и получение ответа.

        Args:
            q (str): Текст запроса.

        Returns:
            str: Ответ модели или сообщение об ошибке.
        """
        try:
            response = self.model.generate_content(q)
            return response.text
        except Exception as ex:
            return f'Error: {str(ex)}'
```

### Реализация игр с использованием класса `GoogleGenerativeAI`

```python
# Системные инструкции
system_instruction_input_output = """
Вы - игровой движок для математической игры "Ввод-Вывод". Ваша задача - преобразовать число, которое поступает в "Ввод" в соответствии с заданным правилом (скрытой "машиной") и выдать результат в "Вывод".

Вы должны придерживаться следующих правил:
-   Начинайте с простых правил (например, сложение или вычитание с целым числом).
-   По мере того, как пользователь справляется, вы можете постепенно переходить к более сложным правилам (умножение, деление, корень, комбинации операций и т.д).
-   Если пользователь запрашивает конкретное правило, вы должны его использовать.
-   В конце каждого ответа вы должны кратко указывать тип операции, которую вы использовали (например "машина +3" или "машина 2x+1").

**Формат ввода/вывода:**
-   Пользователь: `Ввод: <число>`
-   Вы: `Вывод: <результат>, машина:<описание операции>`

**Примеры:**

Пользователь: `Ввод: 5`
Вы: `Вывод: 8, машина +3`

Пользователь: `Ввод: 10`
Вы: `Вывод: 21, машина 2x+1`

Пользователь: `Ввод: 9`
Вы: `Вывод: 3, машина квадратный корень`

Пользователь: `Задайте машину x * 2`
Вы: `Окей, машина: x*2`

**Начните игру с любым простым правилом.**
"""

system_instruction_binary = """
Вы - симулятор "10-центового компьютера" для обучения детей двоичной системе счисления. Ваша задача - представлять числа в двоичной форме с помощью 4 "лампочек" (0 - лампа выключена, 1 - лампа включена). 

Ваши лампочки обозначают 1, 2, 4 и 8 в двоичной системе (справа налево).

Вы должны следовать следующим правилам:
-   Когда пользователь указывает десятичное число, вы показываете, какие "лампочки" нужно включить (1) и выключить (0), чтобы это число отобразить.
-   Когда пользователь указывает, какие "лампочки" включены, вы говорите, какое десятичное число они представляют.
-   Вы должны использовать формат `0000` для двоичного представления, где крайний правый бит - 1, затем 2, 4 и 8 соответственно.
-   Если пользователь просит объяснить, что вы сделали - объясните.

**Формат ввода/вывода:**
-   Пользователь: `Десятичное: <число>`
-   Вы: `Двоичное: <двоичное представление>, объяснение:<что вы сделали>`
-   Пользователь: `Лампочки: <двоичное представление>`
-   Вы: `Десятичное: <число>, объяснение:<что вы сделали>`

**Примеры:**
Пользователь: `Десятичное: 5`
Вы: `Двоичное: 0101, объяснение: Включены лампочки 1 и 4, 1+4=5`

Пользователь: `Лампочки: 1010`
Вы: `Десятичное: 10, объяснение: Включены лампочки 2 и 8, 2+8=10`

Пользователь: `Объясните как 7`
Вы: `Двоичное: 1110, объяснение: Включены лампочки 1,2 и 4. 1+2+4 = 7`

**Начните симуляцию с любого простого числа.**
"""

# Замените "YOUR_API_KEY" на свой API-ключ
api_key = "YOUR_API_KEY"

# Инициализация игры "Ввод-Вывод"
input_output_game = GoogleGenerativeAI(api_key=api_key, system_instruction=system_instruction_input_output)

# Инициализация "10-центового компьютера"
binary_computer = GoogleGenerativeAI(api_key=api_key, system_instruction=system_instruction_binary)

# Примеры использования:
print("Игра Ввод-Вывод:")
print(input_output_game.ask("Ввод: 7"))
print(input_output_game.ask("Ввод: 12"))
print(input_output_game.ask("Задайте машину x / 2"))
print(input_output_game.ask("Ввод: 12"))

print("\n10-центовый компьютер:")
print(binary_computer.ask("Десятичное: 6"))
print(binary_computer.ask("Лампочки: 0111"))
print(binary_computer.ask("Объясните как 13"))
```

## Разбор кода

### Импорт библиотеки
```python
import google.generativeai as genai
```
Импортируется библиотека `google.generativeai` для взаимодействия с моделями Gemini.

### Класс `GoogleGenerativeAI`
**Описание**: Класс для взаимодействия с моделями Google Generative AI.

#### `__init__`
**Описание**: Инициализирует класс с API-ключом, системной инструкцией и названием модели. Конфигурирует библиотеку и создает экземпляр модели Gemini.
```python
def __init__(self, api_key: str, system_instruction: str, model_name: str = 'gemini-2-13b'):
    """
    Инициализация модели GoogleGenerativeAI.

    Args:
        api_key (str): Ключ API для доступа к Gemini.
        system_instruction (str): Инструкция для модели (системный промпт).
        model_name (str, optional): Название используемой модели Gemini. По умолчанию 'gemini-2-13b'.
    """
    self.api_key = api_key
    self.model_name = model_name
    genai.configure(api_key=self.api_key)
    self.model = genai.GenerativeModel(model_name=self.model_name, system_instruction=system_instruction)
```
**Параметры**:
- `api_key` (str): Ключ API для доступа к Gemini.
- `system_instruction` (str): Инструкция для модели (системный промпт).
- `model_name` (str, optional): Название используемой модели Gemini. По умолчанию `'gemini-2-13b'`.

#### `ask`
**Описание**: Принимает запрос, отправляет его модели и возвращает текстовый ответ. Обрабатывает возможные ошибки.
```python
def ask(self, q: str) -> str:
    """
    Отправка запроса модели и получение ответа.

    Args:
        q (str): Текст запроса.

    Returns:
        str: Ответ модели или сообщение об ошибке.
    """
    try:
        response = self.model.generate_content(q)
        return response.text
    except Exception as ex:
        return f'Error: {str(ex)}'
```
**Параметры**:
- `q` (str): Текст запроса.

**Возвращает**:
- `str`: Ответ модели или сообщение об ошибке.

**Вызывает исключения**:
- `Exception`: Возникает в случае ошибки при отправке запроса или получении ответа.

### Системные инструкции

*   `system_instruction_input_output`: Описывает правила и формат игры "Ввод-Вывод".
*   `system_instruction_binary`: Описывает правила и формат для "10-центового компьютера".

### Инициализация экземпляров

*   Создаются экземпляры класса `GoogleGenerativeAI` для каждой игры, передавая соответствующие инструкции.
*   Внимание: необходимо заменить `"YOUR_API_KEY"` на ваш фактический API-ключ Google Gemini.

### Примеры использования

*   Вызовы метода `ask` демонстрируют, как можно отправлять запросы модели и получать ответы в рамках обеих игр.
*   Результаты вызова `ask` печатаются в консоль.

## Заключение

Данный документ демонстрирует, как можно использовать Google Gemini и Python для создания интерактивных обучающих игр по математике. Реализация "Ввод-Вывод" и "10-центового компьютера" открывает новые возможности для интерактивного и эффективного обучения.