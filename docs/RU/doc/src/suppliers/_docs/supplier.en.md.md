# Модуль `Supplier`

## Обзор

Класс `Supplier` является базовым классом для управления поставщиками данных в вашем приложении. Он предоставляет основу для взаимодействия с различными источниками данных, такими как Amazon, AliExpress, Walmart и другие. Этот класс обрабатывает инициализацию настроек поставщика, управляет сценариями сбора данных и предоставляет методы для входа в систему и выполнения сценариев.

## Оглавление

1. [Класс `Supplier`](#класс-supplier)
    - [Обзор класса](#обзор-класса)
    - [Атрибуты класса](#атрибуты-класса)
    - [Методы класса](#методы-класса)
        - [`__init__`](#__init__)
        - [`_payload`](#_payload)
        - [`login`](#login)
        - [`run_scenario_files`](#run_scenario_files)
        - [`run_scenarios`](#run_scenarios)
    - [Пример использования](#пример-использования)

## Класс `Supplier`

### Обзор класса

Класс `Supplier` служит базовым классом для управления поставщиками данных. Он предоставляет структуру для взаимодействия с различными источниками данных, обрабатывает конфигурацию поставщика, управляет сценариями сбора данных и предоставляет методы для входа в систему и выполнения сценариев.

### Атрибуты класса

- `supplier_id`: Уникальный идентификатор поставщика.
- `supplier_prefix`: Префикс поставщика, например, `aliexpress` или `amazon`.
- `supplier_settings`: Настройки поставщика, загруженные из файла конфигурации.
- `locale`: Код локализации (например, `en` для английского, `ru` для русского).
- `price_rule`: Правило расчета цен (например, добавление НДС или применение скидок).
- `related_modules`: Модуль, содержащий функции, специфичные для поставщика.
- `scenario_files`: Список файлов сценариев для выполнения.
- `current_scenario`: Текущий выполняемый сценарий.
- `login_data`: Учетные данные для входа на сайт поставщика (если требуется).
- `locators`: Локаторы для веб-элементов на сайте поставщика.
- `driver`: Веб-драйвер для взаимодействия с сайтом поставщика.
- `parsing_method`: Метод для разбора данных (например, `webdriver`, `api`, `xls`, `csv`).

### Методы класса

#### `__init__`

**Описание**: Конструктор, который инициализирует атрибуты на основе префикса поставщика и других параметров.

```python
def __init__(self, supplier_prefix: str, locale: str = 'en', webdriver: str | Driver | bool = 'default', *attrs, **kwargs) -> None:
    """
    Args:
        supplier_prefix (str): Префикс поставщика (например, 'aliexpress' или 'amazon').
        locale (str, optional): Код локализации. По умолчанию 'en'.
        webdriver (str | Driver | bool, optional): Веб-драйвер для использования. По умолчанию 'default'.
        *attrs: Дополнительные атрибуты.
        **kwargs: Дополнительные именованные аргументы.

    Returns:
        None:
    """
```

#### `_payload`

**Описание**: Загружает специфичные для поставщика конфигурации, локаторы и инициализирует веб-драйвер.

```python
def _payload(self, webdriver: str | Driver | bool, *attrs, **kwargs) -> bool:
    """
    Args:
        webdriver (str | Driver | bool): Веб-драйвер для использования.
        *attrs: Дополнительные атрибуты.
        **kwargs: Дополнительные именованные аргументы.

    Returns:
        bool: Возвращает `True` после загрузки конфигураций и инициализации веб-драйвера.

    Raises:
         FileNotFoundError: Если файл конфигурации не найден
         Exception: Если произошла ошибка при загрузке конфигурации
    """
```

#### `login`

**Описание**: Выполняет процесс входа на сайт поставщика, если требуется аутентификация.

```python
def login(self) -> bool:
    """
    Args:
        None:

    Returns:
        bool: Возвращает `True`, если вход выполнен успешно, в противном случае - `False`.

    Raises:
         Exception: Если произошла ошибка при выполнении входа
    """
```

#### `run_scenario_files`

**Описание**: Выполняет один или несколько файлов сценариев.

```python
def run_scenario_files(self, scenario_files: str | List[str] = None) -> bool:
    """
    Args:
        scenario_files (str | List[str], optional): Список файлов сценариев для выполнения. По умолчанию `None`.

    Returns:
        bool: Возвращает `True`, если все сценарии выполнены успешно.

    Raises:
          Exception: Если произошла ошибка во время выполнения сценария
    """
```

#### `run_scenarios`

**Описание**: Выполняет один или несколько сценариев.

```python
def run_scenarios(self, scenarios: dict | list[dict]) -> bool:
    """
    Args:
        scenarios (dict | list[dict]): Список сценариев для выполнения.

    Returns:
        bool: Возвращает `True`, если все сценарии выполнены успешно.

     Raises:
          Exception: Если произошла ошибка во время выполнения сценария
    """
```

### Пример использования

```python
# Создание объекта Supplier для 'aliexpress'
supplier = Supplier(supplier_prefix='aliexpress', locale='en', webdriver='chrome')

# Выполнение входа на сайт поставщика
supplier.login()

# Выполнение файлов сценариев
supplier.run_scenario_files(['example_scenario.json'])

# Или выполнение конкретных сценариев
supplier.run_scenarios([{'action': 'scrape', 'target': 'product_list'}])
```

## Заключение

Класс `Supplier` предоставляет структурированный способ взаимодействия с поставщиками данных, управляя конфигурациями, выполняя входы в систему и выполняя сценарии сбора данных. Он служит основой, которую можно расширить для конкретных поставщиков путем наследования от этого базового класса и добавления или переопределения необходимой функциональности.