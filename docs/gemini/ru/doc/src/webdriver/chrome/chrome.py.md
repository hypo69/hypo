# Модуль `src.webdriver.chrome`

## Обзор

Модуль `src.webdriver.chrome` представляет собой пользовательскую реализацию Chrome WebDriver с использованием Selenium. Он интегрирует настройки конфигурации, определенные в файле `chrome.json`, такие как user-agent и настройки профиля браузера, для обеспечения гибкого и автоматизированного взаимодействия с браузером.

Основные характеристики:
- Централизованная конфигурация через JSON-файлы.
- Поддержка нескольких профилей браузера.
- Расширенное ведение журнала и обработка ошибок.
- Возможность передачи пользовательских параметров во время инициализации.

## Оглавление
1.  [Классы](#Классы)
    - [`Chrome`](#Chrome)
2.  [Функции](#Функции)
    - [`normalize_path`](#normalize_path)
    - [`_payload`](#_payload)

## Классы

### `Chrome`

**Описание**: Класс для управления Chrome WebDriver.

Этот класс расширяет Selenium Chrome WebDriver и предоставляет паттерн одиночки и пользовательские настройки.

**Атрибуты:**
- `_instance` (Chrome): Единственный экземпляр Chrome WebDriver.
- `driver_name` (str): Имя драйвера ('chrome').
- `config` (SimpleNamespace): Настройки конфигурации, загруженные из JSON-файла.

**Методы:**
- `__new__`: Гарантирует создание единственного экземпляра Chrome WebDriver. Если экземпляр уже существует, вызывается `window_open()`.
- `__init__`: Инициализирует Chrome WebDriver с указанными параметрами и профилем.
- `_payload`: Загружает исполнитель для локаторов и сценариев JavaScript.

#### `__new__`
```python
def __new__(cls, *args, **kwargs) -> Chrome
```
**Описание**: Обеспечивает создание только одного экземпляра класса `Chrome`.

Если экземпляр класса еще не создан, он создается. В противном случае открывается новое окно браузера.

**Возвращает**:
- `Chrome`: Синглтон экземпляр класса `Chrome`.

#### `__init__`
```python
def __init__(self, user_agent: Optional[str] = None, options: Optional[List[str]] = None, *args, **kwargs) -> None
```

**Описание**: Инициализирует Chrome WebDriver с заданными опциями и профилем.

**Параметры**:
- `user_agent` (Optional[str], optional): Строка user-agent. Если не задан, генерируется случайный. По умолчанию `None`.
- `options` (Optional[List[str]], optional): Список опций Chrome для передачи при инициализации. По умолчанию `None`.

#### `_payload`
```python
def _payload(self) -> None
```
**Описание**: Загружает исполнитель для локаторов и сценариев JavaScript.

Этот метод инициализирует и назначает необходимые исполнители для взаимодействия с веб-элементами и выполнения JavaScript в WebDriver.

## Функции

### `normalize_path`
```python
def normalize_path(path: str) -> str
```
**Описание**: Заменяет плейсхолдеры в пути на фактические пути среды.

**Параметры**:
- `path` (str): Строка пути с плейсхолдерами, такими как `%APPDATA%` или `%LOCALAPPDATA%`.

**Возвращает**:
- `str`: Нормализованный путь с подставленными переменными окружения.

### `_payload`
```python
def _payload(self) -> None
```
**Описание**: Загружает исполнитель для локаторов и сценариев JavaScript.

Этот метод инициализирует и назначает необходимые исполнители для взаимодействия с веб-элементами и выполнения JavaScript в WebDriver.