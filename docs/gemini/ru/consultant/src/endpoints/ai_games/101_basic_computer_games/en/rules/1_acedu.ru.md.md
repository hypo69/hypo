# Анализ кода модуля `1_acedu.ru.md`

**Качество кода**
8
- Плюсы
    - Четкое и логичное описание правил игры.
    - Подробное описание входных и выходных данных.
    - Пошаговая инструкция для реализации игры.
- Минусы
    - Отсутствует код, только текстовое описание.
    - Нет примера использования.
    - Нет описания возможных ошибок и исключений.

**Рекомендации по улучшению**
1.  **Добавить программный код**: Необходимо добавить реализацию игры на Python, следуя описанной пошаговой инструкции.
2.  **Использовать RST для документации**: Описание игры и ее правил нужно переписать в формате reStructuredText, чтобы его можно было использовать для генерации документации.
3.  **Обработка ошибок**: В коде нужно предусмотреть обработку ошибок, таких как неверный ввод пользователя.
4.  **Логирование**: Добавить логирование для отслеживания хода игры и возможных ошибок.
5.  **Примеры использования**: Добавить примеры запуска игры и взаимодействия с пользователем.

**Оптимизированный код**
```markdown
# Анализ кода модуля `1_acedu.ru.md`

**Качество кода**
8
- Плюсы
    - Четкое и логичное описание правил игры.
    - Подробное описание входных и выходных данных.
    - Пошаговая инструкция для реализации игры.
- Минусы
    - Отсутствует код, только текстовое описание.
    - Нет примера использования.
    - Нет описания возможных ошибок и исключений.

**Рекомендации по улучшению**
1.  **Добавить программный код**: Необходимо добавить реализацию игры на Python, следуя описанной пошаговой инструкции.
2.  **Использовать RST для документации**: Описание игры и ее правил нужно переписать в формате reStructuredText, чтобы его можно было использовать для генерации документации.
3.  **Обработка ошибок**: В коде нужно предусмотреть обработку ошибок, таких как неверный ввод пользователя.
4.  **Логирование**: Добавить логирование для отслеживания хода игры и возможных ошибок.
5.  **Примеры использования**: Добавить примеры запуска игры и взаимодействия с пользователем.

**Оптимизированный код**
```python
"""
Модуль содержит реализацию карточной игры Acey-Ducey.
=========================================================================================

Этот модуль позволяет пользователю играть в карточную игру Acey-Ducey,
где игрок делает ставки на то, что третья карта будет между двумя первыми.

Пример использования
--------------------

Пример запуска игры:

.. code-block:: python

    game = AceyDucey()
    game.play()
"""

import random
from src.logger.logger import logger # Добавлен импорт логгера

class AceyDucey:
    """
    Класс, представляющий карточную игру Acey-Ducey.

    :ivar int initial_capital: Начальный капитал игрока.
    :ivar int current_capital: Текущий капитал игрока.
    """
    def __init__(self, initial_capital: int = 100):
        """
        Инициализирует игру с заданным начальным капиталом.

        :param initial_capital: Начальный капитал игрока (по умолчанию 100).
        """
        self.initial_capital = initial_capital
        self.current_capital = initial_capital

    def _generate_card(self) -> int:
        """
        Генерирует случайную карту в диапазоне от 2 до 14.

        :return: Случайное значение карты.
        """
        return random.randint(2, 14)

    def _display_cards(self, card1: int, card2: int) -> None:
         """
        Выводит на экран две карты.

        :param card1: Первая карта.
        :param card2: Вторая карта.
        """
         card_names = {11: 'Валет', 12: 'Дама', 13: 'Король', 14: 'Туз'}

         display_card1 = card_names.get(card1, str(card1))
         display_card2 = card_names.get(card2, str(card2))

         print(f"Первая карта: {display_card1}")
         print(f"Вторая карта: {display_card2}")

    def _get_bet(self) -> int:
         """
        Запрашивает у игрока ставку и валидирует ее.

        :return: Размер ставки.
         """
         while True:
             try:
                bet = int(input(f"Ваш текущий капитал: {self.current_capital}. Какую ставку вы хотите сделать? (0 для пропуска раунда): "))
                if bet < 0:
                    print("Ставка не может быть отрицательной.")
                    continue
                if bet > self.current_capital:
                    print("Ставка не может превышать текущий капитал.")
                    continue
                return bet
             except ValueError:
                 print("Неверный ввод. Пожалуйста, введите число.")
                 logger.error('Неверный ввод ставки', exc_info=True) # Логирование ошибки

    def _check_result(self, card1: int, card2: int, card3: int, bet: int) -> bool:
         """
        Проверяет, выиграл ли игрок, и обновляет капитал.

        :param card1: Первая карта.
        :param card2: Вторая карта.
        :param card3: Третья карта.
        :param bet: Размер ставки.
        :return: True, если игрок выиграл, False в противном случае.
         """
         if card1 > card2:
           card1, card2 = card2, card1 # Если первая карта больше второй, они меняются местами
         if card1 < card3 < card2: # Проверка, что третья карта находится между первой и второй
            print("Вы выиграли!")
            self.current_capital += bet
            return True
         else:
            print("Вы проиграли.")
            self.current_capital -= bet
            return False

    def play(self) -> None:
         """
         Запускает основной игровой цикл Acey-Ducey.
         """
         print("Добро пожаловать в игру Acey-Ducey!\n")
         print("Правила игры:\n")
         print("1. Компьютер выкладывает две карты.\n")
         print("2. Вы делаете ставку, если хотите.\n")
         print("3. Выигрываете, если третья карта между двумя первыми.\n")
         print("Начнем игру\n")

         while self.current_capital > 0:
            card1 = self._generate_card() # Генерация первой карты
            card2 = self._generate_card() # Генерация второй карты
            while card1 == card2: # Если карты одинаковы, генерируется новая вторая карта
                 card2 = self._generate_card()
            self._display_cards(card1, card2) # Вывод карт на экран
            bet = self._get_bet() # Запрос ставки у игрока
            if bet == 0:
                print("Вы пропустили раунд.\n")
                continue

            card3 = self._generate_card()  # Генерация третьей карты
            print(f"Третья карта: {card3}")
            self._check_result(card1, card2, card3, bet) # Проверка результата раунда
            print(f"Ваш текущий капитал: {self.current_capital}\n")

            if self.current_capital <= 0:
                print("Вы проиграли все деньги. Игра окончена!")
                break
            if input("Хотите сыграть еще раз? (да/нет): ").lower() != 'да':
                print("Спасибо за игру!")
                break

if __name__ == '__main__':
    game = AceyDucey()
    game.play()
```