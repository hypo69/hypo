# Модуль для работы с URL строками
## Обзор

Модуль `src.utils.string.url` предназначен для работы с URL строками. Он включает в себя функции для извлечения параметров запроса из URL, проверки валидности URL и сокращения длинных URL с использованием сервиса TinyURL.

## Подробней

Модуль предоставляет следующие возможности:

- Извлечение параметров запроса из URL в виде словаря.
- Проверка, является ли строка валидным URL.
- Сокращение длинных URL с использованием сервиса TinyURL.

Этот модуль полезен для обработки URL в различных приложениях, где требуется манипулировать URL строками, проверять их валидность или сокращать их длину.

## Функции

### `extract_url_params`

```python
def extract_url_params(url: str) -> dict | None:
    """ Извлекает параметры из строки URL.

    Args:
        url (str): Строка URL для парсинга.

    Returns:
        dict | None: Словарь параметров запроса и их значений или `None`, если URL не содержит параметров.
    """
    ...
```

**Назначение**: Извлекает параметры запроса из URL-адреса и возвращает их в виде словаря.

**Параметры**:
- `url` (str): URL-адрес, из которого нужно извлечь параметры.

**Возвращает**:
- `dict | None`: Словарь, содержащий параметры запроса и их значения. Если URL не содержит параметров, возвращает `None`.

**Как работает функция**:

1.  **Парсинг URL**: Использует `urlparse` для разбора URL-адреса.
2.  **Извлечение параметров**: Извлекает параметры запроса из распарсенного URL.
3.  **Преобразование значений**: Если параметр имеет только одно значение, преобразует его из списка в строку.

```
URL -> Разбор URL (urlparse)
↓
Извлечение параметров запроса (parse_qs)
↓
Преобразование значений параметров (из списка в строку, если параметр имеет одно значение)
↓
Возврат словаря параметров
```

**Примеры**:

```python
url_with_params = "https://example.com?param1=value1&param2=value2"
url_without_params = "https://example.com"

params_with = extract_url_params(url_with_params)
print(params_with)  # {'param1': 'value1', 'param2': 'value2'}

params_without = extract_url_params(url_without_params)
print(params_without)  # None
```

### `is_url`

```python
def is_url(text: str) -> bool:
    """ Проверяет, является ли переданный текст валидным URL с использованием библиотеки validators.

    Args:
        text (str): Строка для проверки.

    Returns:
        bool: `True` если строка является валидным URL, иначе `False`.
    """
    ...
```

**Назначение**: Проверяет, является ли переданная строка валидным URL.

**Параметры**:
- `text` (str): Строка, которую необходимо проверить.

**Возвращает**:
- `bool`: `True`, если строка является валидным URL, и `False` в противном случае.

**Как работает функция**:

1.  **Валидация URL**: Использует функцию `validators.url` для проверки, является ли переданная строка валидным URL.

```
Строка -> Валидация URL (validators.url)
↓
Возврат True, если строка - валидный URL, иначе False
```

**Примеры**:

```python
valid_url = "https://example.com"
invalid_url = "not a url"

is_valid_url = is_url(valid_url)
print(is_valid_url)  # True

is_invalid_url = is_url(invalid_url)
print(is_invalid_url)  # False
```

### `url_shortener`

```python
def url_shortener(long_url: str) -> str | None:
    """ Сокращает длинный URL с использованием сервиса TinyURL.

    Args:
        long_url (str): Длинный URL для сокращения.

    Returns:
        str | None: Сокращённый URL или `None`, если произошла ошибка.
    """
    ...
```

**Назначение**: Сокращает длинный URL с использованием сервиса TinyURL.

**Параметры**:
- `long_url` (str): Длинный URL, который необходимо сократить.

**Возвращает**:
- `str | None`: Сокращенный URL или `None`, если произошла ошибка.

**Как работает функция**:

1.  **Формирование URL для TinyURL API**: Создает URL для запроса к API TinyURL.
2.  **Выполнение HTTP-запроса**: Отправляет GET-запрос к API TinyURL.
3.  **Обработка ответа**: Если запрос успешен (код ответа 200), возвращает сокращенный URL из ответа. В случае ошибки возвращает `None`.

```
Длинный URL -> Формирование URL для TinyURL API
↓
Выполнение HTTP-запроса (requests.get)
↓
Проверка статуса ответа
│
├── Успех (200) -> Возврат сокращенного URL
│
└── Ошибка -> Возврат None
```

**Примеры**:

```python
long_url = "https://example.com/very/long/url/to/shorten"

short_url = url_shortener(long_url)
print(short_url)  # Например: http://tinyurl.com/y7 например