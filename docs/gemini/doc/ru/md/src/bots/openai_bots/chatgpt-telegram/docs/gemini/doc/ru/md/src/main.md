# Модуль `main.js`

## Обзор

Этот модуль представляет собой основной файл для бота Telegram, использующего OpenAI API для обработки голосовых и текстовых сообщений. Он обрабатывает получение голосовых сообщений, конвертацию их в текст с помощью сервиса OpenAI, отправляет запросы в чат OpenAI и отправляет ответы пользователю.

## Импорты

- `Telegraf`: Библиотека для создания ботов Telegram.
- `message`: Фильтр для работы с сообщениями в Telegram.
- `code`: Функция для форматирования кода в сообщении Telegram.
- `config`: Модуль для загрузки конфигурационных данных.
- `ogg`: Модуль для обработки аудиофайлов (конвертация OGG в MP3).
- `openai`: Модуль для взаимодействия с API OpenAI.
- `removeFile`: Модуль для удаления временных файлов.


## Команды

### `start`

**Описание**: Обрабатывает команду `/start`.

**Параметры**:
- `ctx` (object): Контекст Telegram-сообщения.

**Возвращает**:
- `None`: Не возвращает значение.

**Вызывает исключения**:
- `Error`: Общие ошибки при обработке.

### Обработка голосовых сообщений (`voice`)

**Описание**: Обрабатывает голосовые сообщения от пользователей.

**Параметры**:
- `ctx` (object): Контекст Telegram-сообщения.

**Возвращает**:
- `None`: Не возвращает значение.

**Вызывает исключения**:
- `Error`: Общие ошибки при обработке.

**Детали**:
- Получает ссылку на аудиофайл.
- Преобразует аудио в OGG-формат.
- Преобразует OGG в MP3-формат.
- Удаляет временный OGG-файл.
- Использует OpenAI для транскрипции MP3 в текст.
- Отправляет запрос в чат OpenAI.
- Отправляет ответ пользователя от OpenAI.

## Обработка текстовых сообщений (`text`)

**Описание**: Обрабатывает текстовые сообщения от пользователей.

**Параметры**:
- `ctx` (object): Контекст Telegram-сообщения.

**Возвращает**:
- `None`: Не возвращает значение.

**Вызывает исключения**:
- `Error`: Общие ошибки при обработке.

**Детали**:
- Вызывает функцию `processTextToChat` для обработки текстового сообщения.

## Функции

### `processTextToChat`

**Описание**: (Предполагается, что эта функция определена в другом файле и импортирована) Обработка текстового сообщения и отправка его в чат OpenAI.

**Параметры**:
- `ctx` (object): Контекст Telegram-сообщения.
- `text` (str): Текстовое сообщение от пользователя.

**Возвращает**:
- `None`: Не возвращает значение.

**Вызывает исключения**:
- `Error`: Общие ошибки при обработке.

## Запуск бота

Бот запускается с помощью `bot.launch()`.  Обработка сигналов `SIGINT` и `SIGTERM` обеспечивает корректное завершение при соответствующих событиях.