Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код предназначен для автоматического выполнения Jupyter ноутбуков. Он перебирает все .ipynb файлы в указанной папке, выполняет их с заданным временем ожидания, а затем сохраняет результаты. При этом, он обрабатывает возможные исключения во время выполнения. Код также включает обработку путей, что позволяет запускать ноутбуки из различных локаций.

Шаги выполнения
-------------------------
1. **Импортирует необходимые библиотеки:** `os`, `nbformat`, `ExecutePreprocessor` из `nbconvert`, `pytest`, и `sys`.
2. **Добавляет пути к проекту в `sys.path`:** Это необходимо для импорта пакетов из родительских директорий.
3. **Определяет константы:** `NOTEBOOK_FOLDER` задаёт директорию с Jupyter ноутбуками, `TIMEOUT` - таймаут выполнения ноутбука (в секундах), `KERNEL_NAME` - имя ядра.
4. **Функция `get_notebooks(folder)`:**  Получает список путей к .ipynb файлам в заданной папке, исключая файлы, которые уже были выполнены или имеют суффикс ".local."
5. **Декоратор `@pytest.mark.parametrize`:**  Используется для параметризации теста. Принимает каждый путь из списка, полученного функцией `get_notebooks`.
6. **Функция `test_notebook_execution(notebook_path)`:**
    - Открывает Jupyter ноутбук.
    - Выводит сообщение об имени выполняемого ноутбука и ядре.
    - Создаёт экземпляр `ExecutePreprocessor` с указанным таймаутом и именем ядра.
    - **Обрабатывает исключения:** Если при выполнении ноутбука возникает ошибка, она ловится, сообщение об ошибке передаётся в `pytest.fail` для отметки теста как неудачного.
    - **Сохраняет результаты:** Создаёт копию выполненного ноутбука, добавляя суффикс ".executed.local.ipynb", сохраняя выполненный ноутбук в указанную папку.
    - Выводит сообщение об успешном выполнении или возникшей ошибке.

Пример использования
-------------------------
.. code-block:: python

    import os
    import nbformat
    from nbconvert.preprocessors import ExecutePreprocessor
    import pytest
    import sys

    # ... (Остальной код, как в примере)

    # Пример запуска тестов
    # (Должен быть файл test_jupyter_examples.py)
    pytest.main(["-v", "test_jupyter_examples.py"])