```markdown
# Form-Data [![NPM Module](https://img.shields.io/npm/v/form-data.svg)](https://www.npmjs.com/package/form-data) [![Join the chat at https://gitter.im/form-data/form-data](http://form-data.github.io/images/gitterbadge.svg)](https://gitter.im/form-data/form-data)

Библиотека для создания потоков данных типа `"multipart/form-data"`. Может использоваться для отправки форм и файлов на другие веб-приложения.

API этой библиотеки вдохновлен [интерфейсом FormData в XMLHttpRequest-2][xhr2-fd].

[xhr2-fd]: http://dev.w3.org/2006/webapi/XMLHttpRequest-2/Overview.html#the-formdata-interface

[![Linux Build](https://img.shields.io/travis/form-data/form-data/v4.0.0.svg?label=linux:6.x-12.x)](https://travis-ci.org/form-data/form-data)
[![MacOS Build](https://img.shields.io/travis/form-data/form-data/v4.0.0.svg?label=macos:6.x-12.x)](https://travis-ci.org/form-data/form-data)
[![Windows Build](https://img.shields.io/travis/form-data/form-data/v4.0.0.svg?label=windows:6.x-12.x)](https://travis-ci.org/form-data/form-data)

[![Coverage Status](https://img.shields.io/coveralls/form-data/form-data/v4.0.0.svg?label=code+coverage)](https://coveralls.io/github/form-data/form-data?branch=master)
[![Dependency Status](https://img.shields.io/david/form-data/form-data.svg)](https://david-dm.org/form-data/form-data)

## Установка

```
npm install --save form-data
```

## Использование

В этом примере создается форма с тремя полями, содержащими строку,
буфер и поток файла.

```javascript
const FormData = require('form-data');
const fs = require('fs');

const form = new FormData();
form.append('my_field', 'my value');
form.append('my_buffer', Buffer.from([1, 2, 3])); // Используйте Buffer.from()
form.append('my_file', fs.createReadStream('/путь/к/файлу.jpg'));
```

Также можно использовать поток HTTP-ответа:

```javascript
const FormData = require('form-data');
const http = require('http');

const form = new FormData();

http.get('http://nodejs.org/images/logo.png', (response) => {
  form.append('my_field', 'my value');
  form.append('my_buffer', Buffer.from([1, 2, 3])); // Используйте Buffer.from()
  form.append('my_logo', response);
});
```

Или поток из библиотеки [request](https://github.com/request/request):

```javascript
const FormData = require('form-data');
const request = require('request'); // Убедитесь, что request установлен

const form = new FormData();

form.append('my_field', 'my value');
form.append('my_buffer', Buffer.from([1, 2, 3])); // Используйте Buffer.from()
form.append('my_logo', request('http://nodejs.org/images/logo.png'));
```

Для отправки этой формы на веб-приложение вызовите метод `submit(url, [callback])`:

```javascript
form.submit('http://example.org/', (err, res) => {
  if (err) {
    console.error('Ошибка отправки:', err);
    return;
  }
  // res – объект ответа (http.IncomingMessage)
  res.resume();
  console.log('Отправлено!');
});
```

Для более продвинутых манипуляций с запросом метод `submit()` возвращает объект `http.ClientRequest`, или вы можете выбрать один из альтернативных методов отправки.

### Дополнительные параметры

Вы можете указать дополнительные параметры, такие как `maxDataSize`:

```javascript
const FormData = require('form-data');

const form = new FormData({ maxDataSize: 20971520 });
form.append('my_field', 'my value');
form.append('my_buffer', /* что-то большое */);
```

Список доступных параметров можно найти в [combined-stream](https://github.com/felixge/node-combined-stream/blob/master/lib/combined_stream.js#L7-L15)

### Альтернативные методы отправки

Вы можете использовать интерфейс HTTP-клиента Node.js:

```javascript
const http = require('http');

const request = http.request({
  method: 'POST',
  host: 'example.org',
  path: '/upload',
  headers: form.getHeaders()
});

form.pipe(request);

request.on('response', (res) => {
  console.log(res.statusCode);
});
```

Или, если вы предпочитаете, чтобы заголовок `'Content-Length'` был задан за вас:

```javascript
form.submit('example.org/upload', (err, res) => {
  console.log(res.statusCode);
});
```

... (остальные примеры с незначительными правками и комментариями)

## Примечания

- Метод `getLengthSync()` НЕ вычисляет длину потоков. Используйте параметр `knownLength` в качестве обходного решения.
- `getLength(cb)` вернет ошибку в качестве первого параметра колбэка, если длина потока не может быть вычислена.
- `submit` не добавит `content-length`, если длина формы неизвестна или не может быть вычислена.
- С версии `2.x` FormData отказался от поддержки `node@0.10.x`.
- С версии `3.x` FormData отказался от поддержки `node@4.x`.


```
```