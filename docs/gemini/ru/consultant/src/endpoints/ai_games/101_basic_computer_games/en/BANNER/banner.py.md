# Анализ кода модуля `banner.py`

**Качество кода**
8
-  Плюсы
    - Код хорошо структурирован и логически разделен на блоки.
    - Имеется подробное описание правил игры и алгоритма в начале файла.
    - Используются информативные сообщения для пользователя во время игры.
    - Код содержит основную игровую логику.
    - Код соответствует большинству инструкций по использованию `locals()`.
-  Минусы
    - В коде не используются `j_loads` или `j_loads_ns`.
    - Отсутствуют необходимые импорты для работы с `logger`.
    - Отсутствует документация в формате reStructuredText (RST) для функций, переменных и классов.
    - Присутствуют избыточные блоки `try-except`, которые можно заменить на логирование ошибок.
    - Использование `locals()` для получения цен может быть заменено на более явное хранение цен в словаре.
    - Присутствуют `print` вместо `logger.debug/info/error` для логирования.

**Рекомендации по улучшению**

1.  **Импорт `logger`:** Добавить импорт `from src.logger.logger import logger` для логирования.
2.  **Заменить `print` на `logger`:** Заменить все `print` на `logger.debug`, `logger.info` и `logger.error` соответственно.
3.  **Документация RST:** Добавить документацию в формате RST для модуля, переменных и основного цикла.
4.  **Обработка ошибок:** Заменить блоки `try-except` на логирование ошибок с помощью `logger.error`.
5.  **Хранение цен:**  Использовать словарь для хранения цен на мех в разных городах вместо динамического доступа через `locals()`.
6.  **Использовать `j_loads`:**  В данном коде не требуется, но в случае работы с файлами использовать `j_loads` или `j_loads_ns`.
7.  **Унифицировать код:**  Привести в соответствие имена переменных с ранее обработанными файлами.
8.  **Убрать лишние комментарии**: Убрать лишние комментарии, которые не несут смысловой нагрузки.

**Оптимизированный код**

```python
"""
Модуль для экономической симуляции "Меховые Торговцы".
=====================================================

Игра "Меховые Торговцы" представляет собой экономическую симуляцию,
где игрок выступает в роли торговца мехом, перемещающегося между тремя городами (А, Б и С)
с целью получения максимальной прибыли.

:Игра:
    - Игрок начинает с 1000 долларами и 10 единицами меха.
    - Игрок перемещается между городами А, Б и С.
    - В каждом городе цены на мех устанавливаются случайно от 100 до 500 долларов.
    - Игрок может покупать, продавать или перемещаться в другой город.
    - Перемещение в другой город стоит 10% от текущих денег.
    - Игра продолжается 10 ходов.
    - В конце игры подсчитывается общий капитал.
"""
import random
from src.logger.logger import logger

# Инициализация начальных значений
player_money = 1000  #: Начальное количество денег игрока.
player_fur = 10    #: Начальное количество меха у игрока.
current_city = 'A'  #: Текущий город игрока (A, B или C).
turn_number = 1    #: Номер текущего хода.

#: Словарь для хранения цен на мех в каждом городе.
prices = {
    'A': 0,
    'B': 0,
    'C': 0
}


while turn_number <= 10:
    """
    Основной игровой цикл.

    Выполняется 10 ходов, в каждом из которых игрок может купить, продать, переместиться
    или ждать.

    :param turn_number: номер текущего хода
    """
    # Генерируются случайные цены для каждого города
    prices['A'] = random.randint(100, 500)
    prices['B'] = random.randint(100, 500)
    prices['C'] = random.randint(100, 500)

    logger.info(f"\n--- Ход {turn_number} ---")
    logger.info(f"Цены на мех: A={prices['A']}, B={prices['B']}, C={prices['C']}")
    logger.info(f"Деньги: {player_money}, Мех: {player_fur}, Город: {current_city}")

    action = input("Действие (купить/buy, продать/sell, переместиться/move, ждать/wait): ").lower()

    if action in ("купить", "buy"):
        try:
            amount = int(input("Сколько меха купить? "))
            if player_money >= amount * prices[current_city]:
                 player_money -= amount * prices[current_city]
                 player_fur += amount
                 logger.info("Покупка совершена.")
            else:
                logger.info("Недостаточно денег.")
        except ValueError:
            logger.error("Некорректный ввод.")

    elif action in ("продать", "sell"):
        try:
            amount = int(input("Сколько меха продать? "))
            if player_fur >= amount:
                player_money += amount * prices[current_city]
                player_fur -= amount
                logger.info("Продажа совершена.")
            else:
                 logger.info("Недостаточно меха.")
        except ValueError:
            logger.error("Некорректный ввод.")

    elif action in ("переместиться", "move"):
        city = input("В какой город переместиться (A, B, C)? ").upper()
        if city in ('A', 'B', 'C') and city != current_city:
            cost = player_money * 0.1
            player_money -= cost
            current_city = city
            logger.info(f"Перемещение в {current_city}. Стоимость: {cost}")
        else:
            logger.info("Некорректный город или вы уже в нем находитесь.")

    elif action in ("ждать", "wait"):
        logger.info("Ожидание...")
    else:
        logger.info("Неверное действие.")

    turn_number += 1

# Подсчитывается и выводится итоговый капитал
final_capital = player_money + (player_fur * prices[current_city])
logger.info("\n--- Итого ---")
logger.info(f"Общий капитал: {final_capital}")
```