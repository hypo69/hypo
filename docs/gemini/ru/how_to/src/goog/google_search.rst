Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код представляет класс `GoogleHtmlParser`, предназначенный для парсинга HTML-страниц результатов поиска Google.  Класс обрабатывает как мобильную, так и десктопную версию HTML, извлекая различные типы результатов, включая органические результаты, featured snippet, карточки знаний и скроллируемые секции. Он предоставляет методы для очистки строк, нормализации ключей словарей и извлечения нужной информации.

Шаги выполнения
-------------------------
1. **Инициализация парсера:** Создается экземпляр класса `GoogleHtmlParser` с помощью конструктора `__init__`.  В качестве аргументов передаются строка HTML (`html_str`) и, опционально, `user_agent` (может быть 'mobile' или 'desktop', по умолчанию 'desktop').  Этот шаг создаёт объект, готовый работать с предоставленным HTML.

2. **Очистка строк:** Метод `_clean` удаляет лишние пробелы и символы из входной строки.

3. **Нормализация ключей словарей:** Метод `_normalize_dict_key` преобразует строку в формат, подходящий для использования в качестве ключа словаря (замена пробелов на подчеркивания, удаление двоеточий, перевод в нижний регистр).

4. **Получение количества результатов:** Метод `_get_estimated_results` извлекает общее количество результатов поиска из HTML страницы.

5. **Получение органических результатов:** Метод `_get_organic`  итеративно проходит по div элементам с классом "g" и извлекает URL, заголовок, сниппет и rich snippet для каждого результата поиска, формируя список словарей.

6. **Получение featured snippet:** Метод `_get_featured_snippet` ищет и возвращает информацию о featured snippet, включая заголовок и URL, если он существует.

7. **Получение карточки знаний:** Метод `_get_knowledge_card`  выполняет поиск и извлечение данных из карточки знаний, включая заголовок, подзаголовок, описание и дополнительные данные (more_info), если карточка найдена.

8. **Получение скроллируемых секций:** Метод `_get_scrolling_sections` анализирует скроллируемые виджеты, возвращая список словарей с заголовками секций и данными в них.

9. **Получение итоговых данных:** Метод `get_data` объединяет информацию из вышеперечисленных методов, формируя итоговый словарь данных с поисковой страницы.


Пример использования
-------------------------
.. code-block:: python

    import requests
    from lxml import html

    # Пример запроса к Google Search (замените на ваш запрос):
    search_query = "python programming"
    url = f"https://www.google.com/search?q={search_query}"

    try:
        response = requests.get(url)
        response.raise_for_status()  # Проверяет статус ответа

        html_content = response.text
        parser = GoogleHtmlParser(html_content)
        data = parser.get_data()

        if data:
            print(data)  # Выводит итоговый словарь данных
    except requests.exceptions.RequestException as e:
        print(f"Ошибка при запросе: {e}")
    except Exception as e:
        print(f"Ошибка: {e}")