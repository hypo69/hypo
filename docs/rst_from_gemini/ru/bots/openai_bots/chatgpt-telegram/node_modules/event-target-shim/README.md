```markdown
# event-target-shim

[![npm version](https://img.shields.io/npm/v/event-target-shim.svg)](https://www.npmjs.com/package/event-target-shim)
[![Downloads/month](https://img.shields.io/npm/dm/event-target-shim.svg)](http://www.npmtrends.com/event-target-shim)
[![Build Status](https://travis-ci.org/mysticatea/event-target-shim.svg?branch=master)](https://travis-ci.org/mysticatea/event-target-shim)
[![Coverage Status](https://codecov.io/gh/mysticatea/event-target-shim/branch/master/graph/badge.svg)](https://codecov.io/gh/mysticatea/event-target-shim)
[![Dependency Status](https://david-dm.org/mysticatea/event-target-shim.svg)](https://david-dm.org/mysticatea/event-target-shim)

An implementation of the [WHATWG EventTarget interface](https://dom.spec.whatwg.org/#interface-eventtarget), plus extensions for defining event attributes.

This shim provides a `EventTarget` constructor that you can inherit from to create custom event-handling objects. It also offers a utility for defining event attributes like `onclick` directly on your objects.


## Installation

Use npm:

```bash
npm install event-target-shim
```

Or download from the [`dist` directory](./dist):

- `dist/event-target-shim.mjs` (ES Modules)
- `dist/event-target-shim.js` (CommonJS)
- `dist/event-target-shim.umd.js` (UMD, bundled for IE11 compatibility)


## Usage

```javascript
import { EventTarget, defineEventAttribute } from "event-target-shim";
// or
const { EventTarget, defineEventAttribute } = require("event-target-shim");
// or (UMD)
const { EventTarget, defineEventAttribute } = window.EventTargetShim;
```


### EventTarget

#### `eventTarget.addEventListener(type, callback, options)`

Registers an event listener.

- `type`: The event type (string).
- `callback`: The listener function.
- `options`:  `boolean` or `{ capture?: boolean, passive?: boolean, once?: boolean }`.  A boolean `options` is equivalent to `{ capture: options }`.

#### `eventTarget.removeEventListener(type, callback, options)`

Unregisters an event listener.

- `type`: The event type (string).
- `callback`: The listener function.
- `options`:  `boolean` or `{ capture?: boolean }`. A boolean `options` is equivalent to `{ capture: options }`.


#### `eventTarget.dispatchEvent(event)`

Dispatches an event.

- `event`: An `Event` object or an object with a `type` property and optional other properties.  Listeners receive the event as an `Event` object.

### `defineEventAttribute(proto, type)`

Defines an event attribute (e.g., `onclick`) on a prototype.

- `proto`: The prototype object.
- `type`: The event type (string).


## Examples

### ES2015+ (using `EventTargetShim`)

```javascript
import { EventTarget, defineEventAttribute } from "event-target-shim";

class MyEventTarget extends EventTarget {
  constructor() {
    super();
  }
}

defineEventAttribute(MyEventTarget.prototype, 'customEvent');

const target = new MyEventTarget();
target.addEventListener('customEvent', (event) => {
  console.log('customEvent fired!', event);
});
target.customEvent = (event) => {
    console.log('customEvent callback!')
};

target.dispatchEvent(new CustomEvent('customEvent', { detail: 'some data' }));
```


### TypeScript Example (type safety)


```typescript
import { EventTarget, defineEventAttribute } from "event-target-shim";

class MyEventTarget extends EventTarget<{ customEvent: CustomEvent }, { oncustomEvent: CustomEvent }> {
  constructor() {
    super();
  }
}

defineEventAttribute(MyEventTarget.prototype, 'customEvent');

const target = new MyEventTarget();

target.addEventListener('customEvent', (event) => {
  console.log('customEvent fired!', event.detail);
});

// Type safety ensures that the oncustomEvent and the customEvent listener are invoked only with the correct event objects.
target.customEvent = (event) => {
  console.log('customEvent callback!', event.detail);
};

target.dispatchEvent(new CustomEvent('customEvent', { detail: 'some data' }));
```


## Changelog

See the [GitHub releases](https://github.com/mysticatea/event-target-shim/releases) for details.


## Contributing

Contributions are welcome! Please use GitHub issues and pull requests.


```
```