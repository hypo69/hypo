# Модуль `gemini_simplechat.main`

## Обзор

Модуль `gemini_simplechat.main` предоставляет простой чат на основе модели Gemini от Google. Он включает в себя FastAPI приложение с настроенными CORS, эндпоинт для обработки чат-запросов и возможность запуска локального сервера.

## Подорбней

Этот модуль является основным компонентом для создания чат-интерфейса с использованием Google Gemini AI. Он обрабатывает входящие сообщения через HTTP POST запрос к эндпоинту `/api/chat`, передает их в модель Gemini AI для получения ответа и возвращает ответ клиенту. Модуль также предоставляет статический HTML файл для корневого маршрута, который может служить пользовательским интерфейсом для чата.

## Классы

### `ChatRequest`

**Описание**: Модель запроса чата, используемая для валидации входящих сообщений.

**Параметры**:
- `message` (str): Текст сообщения от пользователя.

## Функции

### `root`

```python
async def root() -> HTMLResponse:
    """
    Args:
        None

    Returns:
        HTMLResponse: HTML контент главной страницы.

    Raises:
        HTTPException: Если не удается прочитать шаблон HTML.

    Example:
        Примеры вызовов:
        Для запуска необходимо выполнить HTTP GET запрос к корню приложения.
    """
```

**Описание**: Обрабатывает GET-запросы к корневому пути ("/").

**Возвращает**:
- `HTMLResponse`: HTML-контент, прочитанный из файла, указанного в `gs.fast_api.index_path`.

**Вызывает исключения**:
- `HTTPException`: Если возникает ошибка при чтении HTML-шаблона, возвращает HTTP статус код 500.

### `chat`

```python
async def chat(request: ChatRequest) -> dict:
    """
    Args:
        request (ChatRequest): Объект запроса, содержащий сообщение пользователя.

    Returns:
        dict: Словарь, содержащий ответ от модели Gemini.

    Raises:
        HTTPException: Если возникает ошибка во время взаимодействия с моделью Gemini.

    Example:
        Примеры вызовов:
        Для запуска необходимо выполнить HTTP POST запрос к эндпоинту /api/chat с JSON payload содержащим message.
    """
```

**Описание**: Обрабатывает POST-запросы к пути ("/api/chat").

**Параметры**:
- `request` (ChatRequest): Объект запроса, содержащий сообщение пользователя.

**Возвращает**:
- `dict`: Словарь, содержащий ответ от модели Gemini.

**Вызывает исключения**:
- `HTTPException`: Если возникает ошибка во время взаимодействия с моделью Gemini, возвращает HTTP статус код 500.