# Модуль `driver.py`

## Обзор

Модуль `driver.py` представляет собой базовый класс для работы с веб-драйверами, инкапсулирующий общие методы и атрибуты для различных веб-драйверов (например, Chrome, Firefox, Edge). Он предоставляет функциональность для взаимодействия с веб-страницей, выполнения JavaScript и управления куки.

## Оглавление

- [Класс `DriverBase`](#класс-driverbase)
    - [Атрибуты класса](#атрибуты-класса)
    - [Методы класса](#методы-класса)
- [Класс `DriverMeta`](#класс-drivermeta)
    - [Метод `__call__`](#метод-__call__)
- [Класс `Driver`](#класс-driver)
- [Примеры использования](#примеры-использования)
    - [Открытие веб-страницы](#открытие-веб-страницы)
    - [Прокрутка страницы](#прокрутка-страницы)
    - [Определение языка страницы](#определение-языка-страницы)
    - [Сохранение куки](#сохранение-куки)
    - [Обновление страницы](#обновление-страницы)

## Классы

### `DriverBase`

**Описание**:
Базовый класс для веб-драйвера с общими атрибутами и методами. Этот класс содержит методы и атрибуты, общие для всех реализаций веб-драйверов, включая функциональность для взаимодействия со страницей, выполнения JavaScript и управления куки.

#### Атрибуты класса:
- `previous_url` (str): URL предыдущей страницы.
- `referrer` (str): Реферер страницы.
- `page_lang` (str): Язык страницы.

#### Методы класса:

- `driver_payload()`
  
  **Описание**: Инициализирует методы JavaScript и `ExecuteLocator` для выполнения команд на странице.

- `scroll(scrolls: int, frame_size: int, direction: str, delay: float) -> None`
  
  **Описание**: Прокручивает страницу в указанном направлении.
    
    **Параметры**:
    - `scrolls` (int): Количество прокруток.
    - `frame_size` (int): Размер фрейма прокрутки.
    - `direction` (str): Направление прокрутки (`'forward'` или `'backward'`).
    - `delay` (float): Задержка между прокрутками.

- `locale() -> str`

  **Описание**: Определяет язык страницы.

  **Возвращает**:
    - `str`: Язык страницы.
  
- `get_url(url: str) -> None`

  **Описание**: Переходит по указанному URL и проверяет успешность перехода.

    **Параметры**:
    - `url` (str): URL для перехода.

  **Вызывает исключения**:
    - `WebDriverException`: Если не удалось перейти по URL.

- `extract_domain(url: str) -> str`

  **Описание**: Извлекает доменное имя из URL.

    **Параметры**:
    - `url` (str): URL для извлечения домена.

    **Возвращает**:
    - `str`: Доменное имя.

- `_save_cookies_localy(to_file: Union[str, Path]) -> None`

  **Описание**: Сохраняет куки в файл.

    **Параметры**:
    - `to_file` (Union[str, Path]): Путь к файлу для сохранения куки.

- `page_refresh() -> None`

  **Описание**: Обновляет текущую страницу.

- `window_focus() -> None`

  **Описание**: Восстанавливает фокус на странице.

- `wait(interval: float) -> None`

  **Описание**: Делает паузу на указанное время.
    
    **Параметры**:
    - `interval` (float): Время паузы в секундах.

- `delete_driver_logs() -> None`

  **Описание**: Удаляет временные файлы и логи WebDriver.

### `DriverMeta`

**Описание**:
Метакласс, который создает новый класс `Driver`, унаследованный от `DriverBase` и указанного класса веб-драйвера.

#### Метод `__call__`

**Описание**:
Создает класс `Driver`, который наследует функциональность `DriverBase` и заданного веб-драйвера. Инициализирует новый драйвер с помощью `driver_payload()`.

    **Параметры**:
    - `cls` (Type): Метакласс `DriverMeta`.
    - `webdriver_cls` (Type): Класс веб-драйвера (например, `Chrome`, `Firefox`, `Edge`).
    - `*args`: Позиционные аргументы.
    - `**kwargs`: Именованные аргументы.

    **Возвращает**:
      - `Type`: Динамически созданный класс `Driver`.

### `Driver`

**Описание**:
Динамически созданный класс веб-драйвера, который наследует от `DriverBase` и указанного класса веб-драйвера.

## Примеры использования

### Открытие веб-страницы

```python
d.get_url("https://example.com")
```

### Прокрутка страницы

```python
d.scroll(scrolls=3, frame_size=500, direction='forward', delay=0.5)
```

### Определение языка страницы

```python
language = d.locale()
```

### Сохранение куки

```python
d._save_cookies_localy('cookies.pkl')
```

### Обновление страницы

```python
d.page_refresh()
```