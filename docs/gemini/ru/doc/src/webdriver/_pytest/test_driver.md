# Модуль `hypotez/src/webdriver/_pytest/test_driver.py`

## Обзор

Данный модуль содержит тесты для класса `DriverBase`, проверяющие функциональность методов, связанных с управлением веб-драйвером. Тесты используют `pytest` и `unittest.mock` для имитации поведения зависимых компонентов и изоляции тестируемого кода.

## Тестовые классы

### `TestDriverBase`

**Описание:** Класс содержит тесты для методов класса `DriverBase`.

## Тесты

### `test_driver_payload`

**Описание:** Тестирует метод `driver_payload` класса `DriverBase`.  Проверяет корректное взаимодействие с `JavaScript` и `ExecuteLocator`, используя `unittest.mock` для подмены зависимых объектов.

**Используемые фикстуры:**

- `driver_base`: экземпляр класса `DriverBase` для тестирования.

**Утверждения:**

- Проверяются значения атрибутов `driver_base`, полученных из имитированных объектов.


### `test_scroll`

**Описание:** Тестирует метод `scroll` класса `DriverBase`.  Проверяет корректное выполнение скриптов для прокрутки.

**Используемые фикстуры:**

- `driver_base`: экземпляр класса `DriverBase` для тестирования.


**Утверждения:**

- Проверяется выполнение скриптов прокрутки вверх, вниз и в обе стороны.


### `test_locale`

**Описание:** Тестирует свойство `locale` класса `DriverBase`. Проверяет получение значения языка из мета-тега HTML или из `get_page_lang` при его отсутствии.

**Используемые фикстуры:**

- `driver_base`: экземпляр класса `DriverBase` для тестирования.

**Утверждения:**

- Проверка корректного получения значения языка при наличии мета-тега.
- Проверка корректного получения значения языка при отсутствии мета-тега и использовании `get_page_lang`.


### `test_get_url`

**Описание:** Тестирует метод `get_url` класса `DriverBase`.  Проверяет корректную загрузку новой страницы и сохранение предыдущей.

**Используемые фикстуры:**

- `driver_base`: экземпляр класса `DriverBase` для тестирования.

**Утверждения:**

- Проверяется корректное выполнение метода `get` с передаваемым URL.
- Проверка сохранения предыдущего URL в атрибуте `previous_url`.
- Проверка вызова метода `_save_cookies_localy`.


### `test_extract_domain`

**Описание:** Тестирует метод `extract_domain` класса `DriverBase`.  Проверяет корректное извлечение домена из URL.

**Используемые фикстуры:**

- `driver_base`: экземпляр класса `DriverBase` для тестирования.

**Утверждения:**

- Проверка корректного извлечения домена из различных URL.


### `test_save_cookies_localy`

**Описание:** Тестирует метод `_save_cookies_localy` класса `DriverBase`. Проверяет корректное сохранение куки в файл.

**Используемые фикстуры:**

- `driver_base`: экземпляр класса `DriverBase` для тестирования.

**Утверждения:**

- Проверка вызова функций `get_cookies`, `open`, и `dump` с ожидаемыми аргументами.


### `test_page_refresh`

**Описание:** Тестирует метод `page_refresh` класса `DriverBase`. Проверяет корректное обновление текущей страницы.

**Используемые фикстуры:**

- `driver_base`: экземпляр класса `DriverBase` для тестирования.

**Утверждения:**

- Проверка корректного вызова метода `get_url` с текущим URL.


### `test_wait`

**Описание:** Тестирует метод `wait` класса `DriverBase`. Проверяет корректное ожидание определенного времени.

**Используемые фикстуры:**

- `driver_base`: экземпляр класса `DriverBase` для тестирования.

**Утверждения:**

- Проверка вызова функции `time.sleep` с заданным временем ожидания.


### `test_delete_driver_logs`

**Описание:** Тестирует метод `delete_driver_logs` класса `DriverBase`. Проверяет корректное удаление файлов логов.

**Используемые фикстуры:**

- `driver_base`: экземпляр класса `DriverBase` для тестирования.

**Утверждения:**

- Проверка корректного вызова функции `unlink` для файлов логов.