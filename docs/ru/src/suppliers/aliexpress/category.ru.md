# Модуль управления категориями Aliexpress

## Обзор

Модуль предоставляет функциональность для работы с категориями товаров на платформе Aliexpress. Он включает функции для получения ссылок на товары в категории, обновления категорий на основе данных с сайта и операций с базой данных.

## Подробнее

Модуль предназначен для управления категориями товаров на Aliexpress. Он включает в себя следующие ключевые функции:

- Получение списка товаров из категории.
- Обновление категорий в сценарии на основе данных с сайта.
- Операции с базой данных для работы с категориями.

## Функции

### `get_list_products_in_category(s: Supplier) -> list`

Считывает URL товаров со страницы категории. Если есть несколько страниц с товарами, функция будет перелистывать все страницы.

**Параметры:**

- `s` (Supplier): Экземпляр поставщика.

**Возвращает:**

- `list`: Список URL продуктов в категории.

**Как работает функция:**

1. Функция принимает экземпляр поставщика (`Supplier`).
2. Происходит считывание URL товаров со страницы категории.
3. Если товаров несколько страниц, происходит перелистывание всех страниц.
4. Возвращается список URL продуктов в категории.

**Примеры:**

```python
# Пример использования функции get_list_products_in_category
products = get_list_products_in_category(supplier)
```

### `get_prod_urls_from_pagination(s: Supplier) -> list`

Собирает ссылки на товары с страницы категории с перелистыванием страниц.

**Параметры:**

- `s` (Supplier): Экземпляр поставщика.

**Возвращает:**

- `list`: Список ссылок на товары.

**Как работает функция:**

1. Функция принимает экземпляр поставщика (`Supplier`).
2. Происходит сбор ссылок на товары со страницы категории с перелистыванием страниц.
3. Возвращается список ссылок на товары.

**Примеры:**

```python
# Пример использования функции get_prod_urls_from_pagination
product_urls = get_prod_urls_from_pagination(supplier)
```

### `update_categories_in_scenario_file(s: Supplier, scenario_filename: str) -> bool`

Проверяет изменения категорий на сайте и обновляет файл сценария.

**Параметры:**

- `s` (Supplier): Экземпляр поставщика.
- `scenario_filename` (str): Имя файла сценария для обновления.

**Возвращает:**

- `bool`: `True`, если обновление прошло успешно.

**Как работает функция:**

1. Функция принимает экземпляр поставщика (`Supplier`) и имя файла сценария (`scenario_filename`).
2. Происходит проверка изменений категорий на сайте.
3. Файл сценария обновляется в соответствии с изменениями.
4. Возвращается `True`, если обновление прошло успешно.

**Примеры:**

```python
# Пример использования функции update_categories_in_scenario_file
updated = update_categories_in_scenario_file(supplier, "scenario_file.json")
```

### `get_list_categories_from_site(s: Supplier, scenario_file: str, brand: str = '') -> list`

Получает список категорий с сайта на основе файла сценария.

**Параметры:**

- `s` (Supplier): Экземпляр поставщика.
- `scenario_file` (str): Имя файла сценария.
- `brand` (str, optional): Опциональное имя бренда.

**Возвращает:**

- `list`: Список категорий.

**Как работает функция:**

1. Функция принимает экземпляр поставщика (`Supplier`), имя файла сценария (`scenario_file`) и опциональное имя бренда (`brand`).
2. Происходит получение списка категорий с сайта на основе файла сценария.
3. Возвращается список категорий.

**Примеры:**

```python
# Пример использования функции get_list_categories_from_site
categories = get_list_categories_from_site(supplier, "scenario_file.json", "SomeBrand")
```

## Классы

### `DBAdaptor`

Предоставляет методы для выполнения операций с базой данных, таких как `SELECT`, `INSERT`, `UPDATE` и `DELETE`.

**Методы:**

- `select(cat_id: int, parent_id: int, project_cat_id: int) -> None`: Выбирает записи из базы данных.
- `insert() -> None`: Вставляет новые записи в базу данных.
- `update() -> None`: Обновляет записи в базе данных.
- `delete() -> None`: Удаляет записи из базы данных.

**Принцип работы:**

Класс `DBAdaptor` предоставляет интерфейс для выполнения основных операций с базой данных. Методы класса позволяют выбирать, вставлять, обновлять и удалять записи. Для использования класса необходимо создать его экземпляр и вызывать соответствующие методы.

**Примеры:**

```python
# Пример использования DBAdaptor для операций с базой данных
db = DBAdaptor()
db.select(cat_id=123, parent_id=456, project_cat_id=789)
db.insert()
db.update()
db.delete()
```

## Установка

Для работы с модулем необходимо установить зависимые пакеты, такие как `requests`, а также настроить соединение с базой данных через `gs.db_translations_credentials`.

### Зависимости:

- `requests`
- `src.utils.jjson`
- `src.db.manager_categories.suppliers_categories`

## Логирование

В модуле используется логирование через `src.logger`, которое помогает отслеживать ошибки и события в процессе выполнения.

## Автор

Модуль разработан для внутреннего использования в проекте.