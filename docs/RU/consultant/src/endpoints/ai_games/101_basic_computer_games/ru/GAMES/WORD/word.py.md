# Анализ кода модуля `word.py`

**Качество кода**
9
-  Плюсы
    - Код хорошо структурирован и легко читается.
    - Используются осмысленные имена переменных и функций.
    - Присутствует обработка исключений для ввода пользователя.
    - Код соответствует предоставленному алгоритму и блок-схеме.
    - Присутствуют подробные комментарии, объясняющие логику кода.
-  Минусы
    - Отсутствует docstring в начале файла для описания модуля.
    - Отсутствуют docstring для функций, что затрудняет понимание их назначения и параметров.
    - Логирование ошибок отсутствует.

**Рекомендации по улучшению**
1.  Добавить docstring в начале файла для описания модуля в формате RST.
2.  Добавить docstring для функции `fibonacci` в формате RST, описывающую ее назначение, параметры и возвращаемое значение.
3.  Использовать `from src.logger.logger import logger` для логирования ошибок ввода вместо `print`.
4.  Улучшить форматирование вывода сообщений для пользователя, используя f-строки.
5.  Переписать комментарии в формате reStructuredText.

**Оптимизированный код**
```python
"""
Модуль для игры "Фибоначчи в степени"
=========================================================================================

Эта игра представляет собой математическую головоломку, где компьютер загадывает случайное число,
а игрок пытается его угадать, возводя загаданное число в степень числа Фибоначчи,
соответствующего номеру попытки.

Пример использования
--------------------

.. code-block:: python

    python word.py
"""

import random
from src.logger.logger import logger

def fibonacci(n: int) -> int:
    """
    Вычисляет n-е число Фибоначчи.

    :param n: Номер числа Фибоначчи для вычисления.
    :return: n-е число Фибоначчи.
    :raises TypeError: Если n не является целым числом.
    :raises ValueError: Если n отрицательное число.

    Пример:
        >>> fibonacci(5)
        5
    """
    if not isinstance(n, int):
        raise TypeError("n должно быть целым числом")
    if n < 0:
        raise ValueError("n должно быть неотрицательным")
    if n <= 0:
        return 0
    elif n == 1:
        return 1
    else:
        a, b = 0, 1
        for _ in range(2, n + 1):
            a, b = b, a + b
        return b

# Инициализация счетчика попыток
numberOfGuesses = 0
# Генерирует случайное число от 1 до 100
targetNumber = random.randint(1, 100)

# Основной игровой цикл
while True:
    # Увеличивает количество попыток
    numberOfGuesses += 1
    # Вычисляет число Фибоначчи для текущей попытки
    fibonacciNumber = fibonacci(numberOfGuesses)
    # Возводит загаданное число в степень числа Фибоначчи
    poweredNumber = targetNumber ** fibonacciNumber

    # Запрашивает ввод числа у пользователя
    try:
        userGuess = int(input(f"Попытка {numberOfGuesses}: Введите число: "))
    except ValueError:
        # Логирование ошибки ввода
        logger.error("Ошибка ввода: Пожалуйста, введите целое число.")
        print("Пожалуйста, введите целое число.")
        continue

    # Проверяет, угадано ли число
    if userGuess == poweredNumber:
        print(f"ПОЗДРАВЛЯЮ! Вы угадали число за {numberOfGuesses} попыток!")
        break  # Завершает цикл, если число угадано
    else:
        print("Попробуйте ещё раз!")  # Сообщает, что нужно попробовать еще раз

"""
Объяснение кода:
1.  **Импорт модуля `random` и `logger`**::
   -  `import random`: Импортирует модуль `random`, который используется для генерации случайного числа.
   - `from src.logger.logger import logger`: Импортирует модуль `logger` для логирования ошибок.
2.  **Функция `fibonacci(n)`**::
    -   Определяет функцию `fibonacci(n)`, которая вычисляет n-е число Фибоначчи.
    -   Использует итеративный подход для расчета чисел Фибоначчи.
    -   Добавлен docstring для функции в формате reStructuredText.
    -   Добавлена проверка типов для входного значения n
3.  **Инициализация переменных**::
    -   `numberOfGuesses = 0`: Инициализирует переменную `numberOfGuesses` для подсчета попыток игрока.
    -   `targetNumber = random.randint(1, 100)`: Генерирует случайное целое число в диапазоне от 1 до 100 и сохраняет его в `targetNumber`.
4. **Основной цикл `while True:`**::
    - Бесконечный цикл, который продолжается до тех пор, пока игрок не угадает число (будет выполнена команда `break`).
    - `numberOfGuesses += 1`: Увеличивает счетчик попыток на 1 при каждом новом витке цикла.
    - `fibonacciNumber = fibonacci(numberOfGuesses)`: Вызывает функцию `fibonacci` для получения числа Фибоначчи, соответствующего текущей попытке.
    - `poweredNumber = targetNumber ** fibonacciNumber`: Вычисляет загаданное число в степени числа Фибоначчи.
    - **Ввод данных**::
       - `try...except ValueError`: Блок try-except обрабатывает возможные ошибки ввода. Если пользователь введет не целое число, то будет выведено сообщение об ошибке и ошибка будет записана в лог.
       - `userGuess = int(input(f"Попытка {numberOfGuesses}: Введите число: "))`: Запрашивает у пользователя число и преобразует его в целое число, сохраняя результат в `userGuess`.
    - **Условие победы**::
      -  `if userGuess == poweredNumber:`: Проверяет, равно ли введенное число вычисленному значению.
      -  `print(f"ПОЗДРАВЛЯЮ! Вы угадали число за {numberOfGuesses} попыток!")`: Выводит сообщение о победе и количестве попыток.
      - `break`: Завершает цикл (игру), если число угадано.
    -  **Подсказка**::
       - `else:`: Если число не угадано, выводится сообщение "Попробуйте еще раз!".

"""
```