# Анализ кода модуля e_27

**Качество кода**
9
- Плюсы
    - Код содержит подробное описание задачи Project Euler на русском языке.
    - Структура файла соответствует заданному формату.
- Минусы
    - Отсутствует код решения задачи.
    - Не хватает импортов и функций для проверки чисел на простоту.
    - Нет docstring и комментариев в формате reStructuredText.
    - Не используются логирование ошибок.
    - Нет обработки ошибок.
    - Не используется `j_loads` или `j_loads_ns`.

**Рекомендации по улучшению**
1.  Добавить необходимые импорты (например, `from src.utils.jjson import j_loads_ns`, `from src.logger.logger import logger`, `math`, `typing`).
2.  Реализовать функцию для проверки числа на простоту.
3.  Реализовать функцию, которая находит коэффициенты `a` и `b`, для которых квадратичное уравнение `n² + an + b` генерирует максимальное количество простых чисел.
4.  Добавить docstring в формате reStructuredText для всех функций и модулей.
5.  Использовать `logger.error` для логирования ошибок.
6.  Избегать `try-except` блоков, используя `logger.error`.
7.  Заменить все комментарии `#` на комментарии в стиле reStructuredText
8.  Использовать `j_loads_ns` из `src.utils.jjson` для чтения файлов.

**Оптимизированный код**

```python
"""
Модуль для решения задачи Project Euler #27 - Квадратичные простые числа.
=========================================================================

Этот модуль содержит функции для нахождения коэффициентов a и b,
которые максимизируют количество простых чисел, генерируемых квадратичной формулой n² + an + b.

Пример использования
--------------------

Для вычисления коэффициентов, используйте функцию find_max_primes_quadratic.

.. code-block:: python

    max_a, max_b, max_count = find_max_primes_quadratic()
    print(f"Максимальное количество простых чисел: {max_count}")
    print(f"Коэффициенты a: {max_a}, b: {max_b}")
    print(f"Произведение a * b: {max_a * max_b}")
"""
from src.utils.jjson import j_loads_ns
from src.logger.logger import logger
import math
from typing import Tuple

def is_prime(n: int) -> bool:
    """
    Проверяет, является ли число простым.

    :param n: Число для проверки.
    :return: True, если число простое, False в противном случае.
    """
    if n <= 1:
        return False
    if n <= 3:
        return True
    if n % 2 == 0 or n % 3 == 0:
        return False
    i = 5
    while i * i <= n:
        if n % i == 0 or n % (i + 2) == 0:
            return False
        i += 6
    return True

def count_primes_quadratic(a: int, b: int) -> int:
    """
    Считает количество простых чисел, сгенерированных квадратичной формулой n² + an + b,
    начиная с n = 0.

    :param a: Коэффициент a.
    :param b: Коэффициент b.
    :return: Количество простых чисел.
    """
    n = 0
    while True:
        value = n * n + a * n + b
        if value <= 0 or not is_prime(value):
            break
        n += 1
    return n


def find_max_primes_quadratic() -> Tuple[int, int, int]:
    """
    Находит коэффициенты a и b, которые максимизируют количество простых чисел,
    генерируемых квадратичной формулой n² + an + b, где |a| < 1000 и |b| <= 1000.

    :return: Кортеж (max_a, max_b, max_count), где
        max_a: Коэффициент a, дающий максимальное количество простых чисел.
        max_b: Коэффициент b, дающий максимальное количество простых чисел.
        max_count: Максимальное количество простых чисел.
    """
    max_count = 0
    max_a = 0
    max_b = 0
    for a in range(-999, 1000):
        for b in range(-1000, 1001):
            try:
                count = count_primes_quadratic(a, b)
                if count > max_count:
                    max_count = count
                    max_a = a
                    max_b = b
            except Exception as ex:
                 logger.error(f'Ошибка при вычислении простых чисел для a={a}, b={b}: {ex}')
                 continue
    return max_a, max_b, max_count
# Задача No 27
# Квадратичные простые числа
# Условия
# Эйлер открыл замечательную квадратичную формулу:
#
# n² + n + 41
#
# Оказалось, что эта формула производит 40 простых чисел для последовательных целых значений *n* от 0 до 39. Однако, при *n* = 40,  40² + 40 + 41 = 40(40 + 1) + 41, что делится на 41, и, конечно, при *n* = 41,  41² + 41 + 41 очевидно делится на 41.
#
# Более того, формула n² − 79n + 1601 производит 80 простых чисел для последовательных целых чисел *n* от 0 до 79. Произведение коэффициентов, −79 и 1601, равно −126479.
#
# Рассмотрим квадратичные выражения вида:
#
# n² + *an* + *b*, где |*a*| < 1000 и |*b*| ≤ 1000
#
# где |*n*| – это абсолютное значение *n*.
#
# Найдите произведение коэффициентов, *a* и *b*, для квадратичного выражения, которое генерирует максимальное количество простых чисел для последовательных значений *n*, начиная с *n* = 0.
#
# <br>
# **Пример:**
# В тексте задачи есть пример, демонстрирующий, что формула n² + n + 41  генерирует 40 простых чисел для n = 0, 1, ... 39, а формула n² − 79n + 1601 генерирует 80 простых чисел для n = 0, 1, ... 79.
```