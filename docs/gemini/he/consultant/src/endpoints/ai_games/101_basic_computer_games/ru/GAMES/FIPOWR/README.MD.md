# Анализ кода модуля `FIPOWR`

**Качество кода**
-   Соответствие требованиям к формату кода (1-10): 7
    -   Преимущества:
        -   Код игры логически структурирован и понятен.
        -   Присутствует функция `fibonacci` для расчета чисел Фибоначчи.
        -   Используется цикл `while` для реализации игрового процесса.
        -   Присутствует обработка исключений для ввода пользователя.
        -   Наличие комментариев, поясняющих основные блоки кода.
    -   Недостатки:
        -   Использование `while True` и `break` для управления циклом может быть менее явным.
        -   Отсутствуют docstring для модуля и функций.
        -   Комментарии в конце не отформатированы в RST.
        -   Не используется `logger` для вывода сообщений.

**Рекомендации по улучшению**

1.  **Добавить docstring:** Добавить docstring для модуля и функции `fibonacci`.
2.  **Использовать logger:**  Заменить `print` на `logger.info` и `logger.error` для сообщений.
3.  **Обработка исключений:** Использовать `logger.error` для обработки исключений при вводе данных.
4.  **Форматирование комментариев:** Комментарии в конце файла должны быть отформатированы в reStructuredText (RST).
5.  **Улучшить цикл `while`:** Можно переписать цикл `while` для более явного управления.

**Улучшенный код**
```python
"""
Модуль, реализующий игру "Фибоначчи в степени".
=========================================================================================

В этой игре компьютер загадывает случайное число от 1 до 100, а игрок должен угадать это число,
возведенное в степень числа Фибоначчи, соответствующего номеру попытки.

Пример использования
--------------------

.. code-block:: python

    import random

    # Инициализация счетчика попыток
    numberOfGuesses = 0
    # Генерируем случайное число от 1 до 100
    targetNumber = random.randint(1, 100)

    # Основной игровой цикл
    while True:
        # Увеличиваем количество попыток
        numberOfGuesses += 1
        # Вычисляем число Фибоначчи для текущей попытки
        fibonacciNumber = fibonacci(numberOfGuesses)
        # Возводим загаданное число в степень числа Фибоначчи
        poweredNumber = targetNumber ** fibonacciNumber
        # Запрашиваем ввод числа у пользователя
        try:
            userGuess = int(input(f"Попытка {numberOfGuesses}: Введите число: "))
        except ValueError:
             print("Пожалуйста, введите целое число.")
             continue

        # Проверяем, угадано ли число
        if userGuess == poweredNumber:
            print(f"ПОЗДРАВЛЯЮ! Вы угадали число за {numberOfGuesses} попыток!")
            break  # Завершаем цикл, если число угадано
        else:
             print("Попробуйте ещё раз!") # Сообщаем, что нужно попробовать еще раз
"""

import random # Импортирует модуль random, который используется для генерации случайного числа.
from src.logger.logger import logger #  Импортирует logger для логирования.

def fibonacci(n: int) -> int:
    """
    Вычисляет n-е число Фибоначчи.

    :param n: Положительное целое число, для которого нужно вычислить число Фибоначчи.
    :type n: int
    :return: n-е число Фибоначчи.
    :rtype: int

    :Example:
    >>> fibonacci(5)
    5
    >>> fibonacci(10)
    55
    """
    if n <= 0:
        return 0
    elif n == 1:
        return 1
    else:
        a, b = 0, 1
        for _ in range(2, n + 1):
            a, b = b, a + b
        return b

# Инициализация счетчика попыток
numberOfGuesses = 0  #  Инициализирует переменную для подсчета количества попыток.
# Генерируем случайное число от 1 до 100
targetNumber = random.randint(1, 100)  #  Генерирует случайное целое число от 1 до 100.

# Основной игровой цикл
while True: #  Бесконечный цикл, пока игрок не угадает число.
    # Увеличиваем количество попыток
    numberOfGuesses += 1 # Увеличивает счетчик попыток на 1.
    # Вычисляем число Фибоначчи для текущей попытки
    fibonacciNumber = fibonacci(numberOfGuesses) # Вызывает функцию fibonacci для получения числа Фибоначчи.
    # Возводим загаданное число в степень числа Фибоначчи
    poweredNumber = targetNumber ** fibonacciNumber # Вычисляет загаданное число в степени числа Фибоначчи.

    # Запрашиваем ввод числа у пользователя
    try: # Обработка исключений при вводе данных.
        userGuess = int(input(f"Попытка {numberOfGuesses}: Введите число: ")) # Запрашивает у пользователя число.
    except ValueError as ex: #  Обрабатывает ошибку, если пользователь вводит не число.
        logger.error("Ошибка ввода: пожалуйста, введите целое число.", exc_info=ex) #  Логирует ошибку ввода.
        print("Пожалуйста, введите целое число.") # Выводит сообщение об ошибке для пользователя.
        continue # Продолжает цикл с новой итерации.

    # Проверяем, угадано ли число
    if userGuess == poweredNumber: # Проверка на равенство числа пользователя и вычисленного числа.
        print(f"ПОЗДРАВЛЯЮ! Вы угадали число за {numberOfGuesses} попыток!") # Выводит сообщение о победе.
        break  # Завершаем цикл, если число угадано
    else: # Если число не угадано.
         print("Попробуйте ещё раз!") # Сообщает игроку, что нужно попробовать ещё раз.
```