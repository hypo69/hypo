# Модуль для замера времени выполнения функций `log_time.py`

## Обзор

Модуль содержит функции для замера времени выполнения других функций. Он предоставляет три способа замера времени: для асинхронных функций (`log_time_async`), функций с использованием `yield from` (`log_time_yield`) и обычных синхронных функций (`log_time`).

## Подробней

Этот модуль предоставляет удобные инструменты для профилирования производительности различных типов функций, позволяя разработчикам легко определять узкие места в коде и оптимизировать его. Функции `log_time_async`, `log_time_yield` и `log_time` принимают функцию в качестве аргумента, измеряют время ее выполнения и возвращают результат вместе с информацией о времени выполнения.

## Функции

### `log_time_async`

```python
async def log_time_async(method: callable, **kwargs) -> str:
    """Измеряет время выполнения асинхронной функции.

    Args:
        method (callable): Асинхронная функция, время выполнения которой необходимо измерить.
        **kwargs: Произвольные аргументы, передаваемые в функцию `method`.

    Returns:
        str: Результат выполнения функции `method`, дополненный информацией о времени выполнения в секундах. Если функция `method` возвращает `None`, возвращается только строка с временем выполнения.

    Как работает функция:
    1. Записывает время начала выполнения функции `method`.
    2. Вызывает асинхронную функцию `method` с переданными аргументами.
    3. Записывает время окончания выполнения функции.
    4. Вычисляет время выполнения в секундах.
    5. Форматирует строку с временем выполнения.
    6. Если функция `method` вернула результат, возвращает строку, содержащую результат и время выполнения, иначе возвращает только строку с временем выполнения.

    ASCII flowchart:
    Начало --> Запись времени начала
             --> Вызов асинхронной функции `method` с аргументами
             --> Запись времени окончания
             --> Вычисление времени выполнения
             --> Форматирование строки с временем выполнения
             --> Проверка результата выполнения функции `method`
             |   True --> Возврат результата и времени выполнения
             |   False --> Возврат только времени выполнения
             Конец

    Примеры:
        >>> async def my_async_function():
        ...     await asyncio.sleep(1)
        ...     return "Async Done"
        >>> asyncio.run(log_time_async(my_async_function))
        'Async Done 1.01 secs'

        >>> async def my_async_function_without_result():
        ...     await asyncio.sleep(0.5)
        >>> asyncio.run(log_time_async(my_async_function_without_result))
        '0.51 secs'
    """
    ...
```

### `log_time_yield`

```python
def log_time_yield(method: callable, **kwargs) -> str:
    """Измеряет время выполнения функции, использующей `yield from`.

    Args:
        method (callable): Функция, использующая `yield from`, время выполнения которой необходимо измерить.
        **kwargs: Произвольные аргументы, передаваемые в функцию `method`.

    Yields:
        str: Результат выполнения функции `method`, дополненный информацией о времени выполнения в секундах.

    Как работает функция:
    1. Записывает время начала выполнения функции `method`.
    2. Вызывает функцию `method` с переданными аргументами, используя `yield from`.
    3. После завершения `method` записывает время окончания выполнения.
    4. Вычисляет время выполнения в секундах.
    5. Форматирует строку с временем выполнения.
    6. Передает строку с временем выполнения через `yield`.

    ASCII flowchart:
    Начало --> Запись времени начала
             --> Вызов функции `method` с `yield from` и аргументами
             --> Запись времени окончания
             --> Вычисление времени выполнения
             --> Форматирование строки с временем выполнения
             --> Передача времени выполнения через `yield`
             Конец

    Примеры:
        >>> def my_yield_function():
        ...     yield from [1, 2, 3]
        >>> def timed_yield_function():
        ...     yield from log_time_yield(my_yield_function)
        >>> list(timed_yield_function())
        [1, 2, 3, ' 0.0 secs']
    """
    ...
```

### `log_time`

```python
def log_time(method: callable, **kwargs) -> str:
    """Измеряет время выполнения обычной синхронной функции.

    Args:
        method (callable): Синхронная функция, время выполнения которой необходимо измерить.
        **kwargs: Произвольные аргументы, передаваемые в функцию `method`.

    Returns:
        str: Результат выполнения функции `method`, дополненный информацией о времени выполнения в секундах. Если функция `method` возвращает `None`, возвращается только строка с временем выполнения.

    Как работает функция:
    1. Записывает время начала выполнения функции `method`.
    2. Вызывает функцию `method` с переданными аргументами.
    3. Записывает время окончания выполнения функции.
    4. Вычисляет время выполнения в секундах.
    5. Форматирует строку с временем выполнения.
    6. Если функция `method` вернула результат, возвращает строку, содержащую результат и время выполнения, иначе возвращает только строку с временем выполнения.

    ASCII flowchart:
    Начало --> Запись времени начала
             --> Вызов функции `method` с аргументами
             --> Запись времени окончания
             --> Вычисление времени выполнения
             --> Форматирование строки с временем выполнения
             --> Проверка результата выполнения функции `method`
             |   True --> Возврат результата и времени выполнения
             |   False --> Возврат только времени выполнения
             Конец

    Примеры:
        >>> def my_function():
        ...     time.sleep(1)
        ...     return "Done"
        >>> log_time(my_function)
        'Done 1.01 secs'

        >>> def my_function_without_result():
        ...     time.sleep(0.5)
        >>> log_time(my_function_without_result)
        '0.51 secs'
    """
    ...