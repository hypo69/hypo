# Модуль `popup.js`

## Обзор

Этот JavaScript-файл реализует интерфейс расширения браузера для работы с XPath-выражениями. Он предоставляет пользователю возможность ввода XPath-выражений, выбора контекста и отображения результатов в всплывающем окне.

## Описание функций

### `sendToActiveTab`

**Описание**: Отправляет сообщение активной вкладке.

**Параметры**:

- `msg` (object): Сообщение для отправки.
- `opts` (object, optional): Дополнительные параметры (например, `frameId`). По умолчанию пустой объект.

**Возвращает**:
- Promise: Обещание, разрешаемое результатом отправки сообщения.

**Вызывает исключения**:
- `Ошибка`: Возникает при возникновении ошибок при отправке сообщения.


### `sendToSpecifiedFrame`

**Описание**: Отправляет сообщение определенному фрейму.

**Параметры**:

- `msg` (object): Сообщение для отправки.


**Возвращает**:
- Promise: Обещание, которое разрешается, если сообщение успешно отправлено, либо отклоняется с ошибкой.

**Вызывает исключения**:
- `Ошибка`: Возникает, если фрейм не найден или при возникновении ошибок при взаимодействии с фреймом.


### `collectPopupState`

**Описание**: Собирает текущее состояние всплывающего окна.

**Возвращает**:
- object: Объект, содержащий текущее состояние.


### `changeContextVisible`

**Описание**: Изменяет видимость блока контекста.

**Параметры**:
- Нет

**Возвращает**:
- Нет


### `changeResolverVisible`

**Описание**: Изменяет видимость блока решателя.

**Параметры**:
- Нет

**Возвращает**:
- Нет


### `changeFrameIdVisible`

**Описание**: Изменяет видимость блока идентификаторов фреймов.

**Параметры**:
- Нет

**Возвращает**:
- Нет


### `changeFrameDesignationVisible`

**Описание**: Изменяет видимость блока назначения фрейма.

**Параметры**:
- Нет

**Возвращает**:
- Нет


### `changeHelpVisible`

**Описание**: Изменяет видимость блока справки.

**Параметры**:
- Нет

**Возвращает**:
- Нет


### `makeExecuteMessage`

**Описание**: Создает сообщение для выполнения XPath-выражения.

**Возвращает**:
- object: Объект, содержащий данные для выполнения XPath.


### `getSpecifiedFrameId`

**Описание**: Возвращает идентификатор выбранного фрейма.

**Возвращает**:
- number: Идентификатор фрейма.


### `execContentScript`

**Описание**: Выполняет скрипты в содержимом страницы.


**Возвращает**:
- Promise: Обещание, которое разрешается после выполнения скриптов.


### `sendExecute`

**Описание**: Отправляет сообщение для выполнения XPath-запроса.

**Параметры**:
- Нет

**Возвращает**:
- Нет


### `handleExprEnter`

**Описание**: Обработчик события ввода нажатия Enter.

**Параметры**:
- `event` (object): Объект события.

**Возвращает**:
- Нет


### `showDetailsPage`

**Описание**: Отображает страницу с результатами.

**Параметры**:
- `index` (number): Индекс страницы результатов.

**Возвращает**:
- Нет

**Вызывает исключения**:
- `Ошибка`: Возникает при ошибках при работе с результатами.

### `showError`

**Описание**: Отображает сообщение об ошибке.

**Параметры**:
- `message` (string): Сообщение об ошибке.
- `frameId` (number | string): Идентификатор фрейма, связанный с ошибкой.

**Возвращает**:
- Нет


### `genericListener`

**Описание**: Общий обработчик сообщений из контента страницы.


**Параметры**:
- `message` (object): Сообщение.
- `sender` (object): Отправитель сообщения.
- `sendResponse` (function): Функция для отправки ответа.

**Возвращает**:
- boolean: Указывает, обрабатывает ли функция сообщение.



## Классы


Не содержат классов.

##  Обработка исключений


В коде используется `catch(e => ...)` для обработки исключений, замененный на `catch(ex => ...)` в соответствии с инструкцией.


## Дополнительная информация

В коде используются  функции `fu.updateDetailsTable`, `fu.onError`, `fu.emptyChildNodes` из других модулей.  Эти функции, как предполагается, реализованы в других частях проекта.