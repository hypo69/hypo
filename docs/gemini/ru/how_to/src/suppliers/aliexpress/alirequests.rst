Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код определяет класс `AliRequests`, предназначенный для работы с API AliExpress. Он загружает куки с вебдрайвера, обновляет сессию и выполняет запросы GET, обрабатывая куки и JSESSIONID.  Класс позволяет получать короткие аффилированные ссылки.

Шаги выполнения
-------------------------
1. **Инициализация класса:**
   - Создается экземпляр класса `AliRequests`, который принимает необязательный параметр `webdriver_for_cookies` для указания типа вебдрайвера (например, 'chrome').  Этот параметр используется для загрузки куки из файла.
   - Объект класса `AliRequests` инициализирует `RequestsCookieJar` для хранения куки, `session` для сессии запросов и `headers` для определения user-agent.
2. **Загрузка куки из файла:**
   - Метод `_load_webdriver_cookies_file` загружает куки из файла, определяемого путем `gs.dir_cookies`,  `aliexpress.com`, именем вебдрайвера (например, 'chrome') и именем файла 'cookie'.
   - Файл должен содержать данные в формате, поддерживаемом `pickle`.
   - Если куки загружены успешно, логгер сообщает об этом.
3. **Обновление сессии куки:**
   - Метод `_refresh_session_cookies` обновляет сессию куки, делая запрос на  `https://portals.aliexpress.com` для получения актуальных куки, включая `JSESSIONID`.
   - Если запрос успешен, функция `_handle_session_id` обновляет `session_id` и добавляет его в `cookies_jar`.
   - Если `JSESSIONID` не найден, генерируется предупреждение.
4. **Выполнение GET запроса:**
   - Метод `make_get_request` выполняет запрос GET на переданную URL.
   - Если запрос успешен, функция `_handle_session_id` обрабатывает куки и обновляет сессию.
   - Возвращает объект `requests.Response` при успешном выполнении, `False` в противном случае.
5. **Сокращение аффилированной ссылки:**
   - Метод `short_affiliate_link` создает URL для получения короткой аффилированной ссылки, добавляя параметры `trackId` и `targetUrl`.
   - Вызывает метод `make_get_request` для выполнения запроса.
   - Возвращает результат запроса.


Пример использования
-------------------------
.. code-block:: python

    from hypotez.src.suppliers.aliexpress.alirequests import AliRequests
    from pathlib import Path

    # Предполагается, что gs.dir_cookies и путь к файлу куки настроены.
    aliexpress_requests = AliRequests('chrome')

    if aliexpress_requests:
        url_to_shorten = "https://www.example.com"
        response = aliexpress_requests.short_affiliate_link(url_to_shorten)

        if response:
            short_link = response.url
            print(f"Укороченная ссылка: {short_link}")
        else:
            print("Ошибка при получении короткой ссылки.")