# Модуль `requests.py`

## Обзор

Модуль `requests.py` предоставляет вспомогательную функцию `api_request` для выполнения запросов к API AliExpress. Функция обрабатывает запросы, преобразует ответы в удобный формат и возвращает результаты.
## Подробней

Этот модуль предназначен для упрощения взаимодействия с API AliExpress. Он включает в себя обработку исключений, преобразование ответов и ведение журнала операций. Функция `api_request` играет центральную роль в обеспечении надежной связи с API, обработки ошибок и возврата полезных данных.
## Функции

### `api_request`

```python
def api_request(request, response_name, attemps:int = 1):\n
    """ 
    Args:
        request:
        response_name:
        attemps (int, optional):  Defaults to 1.

    Returns:
        

    Raises:
        
    """
    ...
```

**Описание**: Функция `api_request` выполняет запрос к API и обрабатывает ответ.

**Как работает функция**:
1. **Выполнение запроса**: Пытается получить ответ от API с помощью метода `getResponse()` объекта `request`. Если возникает исключение, функция обрабатывает его и возвращает `None`.
2. **Обработка ответа**: Извлекает данные из ответа, используя `response_name` для доступа к нужной части JSON-структуры. Преобразует JSON в пространство имен с помощью `SimpleNamespace` для удобного доступа к данным через атрибуты.
3. **Проверка кода ответа**: Проверяет поле `resp_code` в ответе. Если код равен 200, возвращает результат (`response.result`). В противном случае регистрирует предупреждение и возвращает `None`.
4. **Обработка исключений**: Если в процессе обработки возникают исключения, функция регистрирует ошибку с использованием `logger.error` и возвращает `None`.

**Параметры**:

- `request`: Объект запроса, содержащий метод `getResponse()` для получения ответа от API.
- `response_name` (str): Ключ для извлечения данных из JSON-ответа.
- `attemps` (int, optional): Количество попыток выполнения запроса. По умолчанию `1`.

**Возвращает**:

- Результат из поля `result` ответа, если код ответа равен 200. В противном случае возвращает `None`.

**Вызывает исключения**:

- `ApiRequestException`: Возникает при проблемах с отправкой запроса.
- `ApiRequestResponseException`: Возникает при проблемах с обработкой ответа.

**Примеры**:

```python
# Пример вызова функции api_request
# response = api_request(request_object, 'item_detail')
```
```python
# response = api_request(request_object, 'item_detail', attemps = 3)