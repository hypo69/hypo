## ИНСТРУКЦИЯ:

Анализируй предоставленный код подробно и объясни его функциональность. Ответ должен включать три раздела:

1.  **<алгоритм>**: Опиши рабочий процесс в виде пошаговой блок-схемы, включая примеры для каждого логического блока, и проиллюстрируй поток данных между функциями, классами или методами.
2.  **<mermaid>**: Напиши код для диаграммы в формате `mermaid`, проанализируй и объясни все зависимости,
    которые импортируются при создании диаграммы.
    **ВАЖНО!** Убедитесь, что все имена переменных, используемые в диаграмме `mermaid`,
    имеют осмысленные и описательные имена. Имена переменных вроде `A`, `B`, `C`, и т.д., не допускаются!

    **Дополнительно**: Если в коде есть импорт `import header`, добавьте блок `mermaid` flowchart, объясняющий `header.py`:
    ```mermaid
    flowchart TD
        Start --> Header[<code>header.py</code><br> Determine Project Root]

        Header --> import[Import Global Settings: <br><code>from src import gs</code>]
    ```

3.  **<объяснение>**: Предоставьте подробные объяснения:
    *   **Импорты**: Их назначение и взаимосвязь с другими пакетами `src.`.
    *   **Классы**: Их роль, атрибуты, методы и взаимодействие с другими компонентами проекта.
    *   **Функции**: Их аргументы, возвращаемые значения, назначение и примеры.
    *   **Переменные**: Их типы и использование.
    *   Выделите потенциальные ошибки или области для улучшения.

Дополнительно, постройте цепочку взаимосвязей с другими частями проекта (если применимо).

Это обеспечивает всесторонний и структурированный анализ кода.
## Формат ответа: `.md` (markdown)
**КОНЕЦ ИНСТРУКЦИИ**

## <алгоритм>

1. **Получение входных данных (JSON):**
   - На вход подаются данные в формате JSON, содержащие информацию о компьютерных компонентах.
   - Пример:
     ```json
     [
       {
         "product_id": "123",
         "product_title": "מעבד Intel i9-14900K",
         "product_description": "מעבד חזק במיוחד למשחקים ועבודה",
         "specification": "14 ליבות, 24 תהליכונים",
         "image_local_saved_path": "/images/cpu.jpg"
       },
        {
          "product_id": "456",
          "product_title": "כרטיס מסך NVIDIA RTX 4060 Ti",
          "product_description": "כרטיס מסך חזק למשחקים",
          "specification": "8GB GDDR6",
          "image_local_saved_path": "/images/gpu.jpg"
        }
     ]
     ```

2. **Трансляция данных:**
   - Все полученные данные на иврите (Hebrew) транслируются на целевой язык (определяется из инструкций к модели).
   - Пример:
     - Исходный текст (иврит): `"product_title": "מעבד Intel i9-14900K"`
     - Перевод на английский: `"product_title": "Intel i9-14900K Processor"`

3. **Определение типа сборки:**
   - На основе характеристик компонентов определяется тип сборки компьютера (например, игровая, рабочая станция и т.д.).
   - Пример:
     - Компоненты: процессор Intel i9-14900K, видеокарта NVIDIA RTX 4060 Ti.
     - Вывод: Сборка - "gaming" (игровая), вероятность 0.8.

4. **Генерация названия и описания сборки:**
    - На основе типа сборки и характеристик компонентов генерируется название и подробное описание сборки.
    - Пример:
      - Название: "High-Performance Gaming PC"
      - Описание: "This gaming PC is equipped with a powerful Intel i9-14900K processor and an NVIDIA RTX 4060 Ti graphics card to deliver excellent gaming performance."

5. **Формирование выходных данных (JSON):**
   - Подготовленные данные (переведенные названия, описания компонентов, название и описание сборки, вероятности типов сборок) форматируются в JSON структуру, согласно заданному шаблону.
   - Пример:
     ```json
     {
       "en": {
         "build_types": {
           "gaming": 0.8,
           "workstation": 0.2
         },
         "title": "High-Performance Gaming PC",
         "description": "This gaming PC is equipped with a powerful Intel i9-14900K processor and an NVIDIA RTX 4060 Ti graphics card to deliver excellent gaming performance.",
         "products": [
           {
             "product_id": "123",
             "product_title": "Intel i9-14900K Processor",
             "product_description": "A very powerful processor for gaming and work.",
             "specification": "14 cores, 24 threads",
             "image_local_saved_path": "/images/cpu.jpg"
           },
           {
             "product_id": "456",
             "product_title": "NVIDIA RTX 4060 Ti Graphics Card",
             "product_description": "A powerful graphics card for gaming",
             "specification": "8GB GDDR6",
             "image_local_saved_path": "/images/gpu.jpg"
           }
         ]
       }
     }
     ```

6. **Возврат результата:**
    - Выходные данные (JSON) возвращаются в соответствии с форматом, указанным в инструкциях.

## <mermaid>
```mermaid
flowchart TD
    A[Начало: Входные данные (JSON)] --> B(Трансляция данных с иврита на целевой язык);
    B --> C{Определение типа сборки};
    C -- gaming --> D[Генерация названия и описания сборки];
    C -- workstation --> D
    D --> E[Формирование выходных данных (JSON)];
    E --> F[Возврат результата (JSON)];

    style A fill:#f9f,stroke:#333,stroke-width:2px
    style F fill:#ccf,stroke:#333,stroke-width:2px
```
**Объяснение:**
*   `A` - Начало процесса. Принимает входные JSON-данные о компонентах компьютера.
*   `B` - Производит перевод всех данных с иврита на целевой язык, указанный в инструкции.
*   `C` - На основе характеристик компонентов определяет тип сборки (игровой, рабочей станции и т.д.).
*   `D` - Генерирует название и описание сборки, используя информацию о типе и компонентах сборки.
*   `E` - Формирует JSON-структуру в соответствии с заданным форматом, включая переведённые данные, тип сборки, название и описание сборки.
*   `F` - Возвращает итоговый JSON-ответ.

## <объяснение>
Этот код представляет собой инструкцию (prompt) для модели искусственного интеллекта, такой как Gemini, для сборки компьютера. Он не является исполняемым кодом Python.
Давайте подробно рассмотрим его структуру и функциональность:

**Импорты**:
В данном коде отсутствуют явные импорты Python, так как это не код Python, а инструкция для модели ИИ. Однако, имплицитно можно предположить использование библиотек для работы с JSON (как минимум) и библиотек для перевода текста.

**Классы**:
В данной инструкции классы не используются. Все операции выполняются в рамках описания процесса.

**Функции**:
В данной инструкции функции не используются. Но можно представить этот процесс как вызов одной общей функции, которая принимает на вход JSON с описанием компонентов и на выходе выдает JSON с готовой сборкой.

**Переменные**:
В данном коде переменные явно не используются, однако в ходе выполнения процесса подразумевается работа со следующими переменными:
-   `input_data` - JSON данные с описанием компонентов.
-   `target_language` - Язык для перевода.
-   `translated_data` - JSON данные после перевода.
-   `build_type` - тип сборки (игровая, рабочая и т.д.) и его вероятность.
-   `build_title` - Заголовок сборки.
-   `build_description` - Описание сборки.
-   `output_data` - JSON данные с описанием сборки и переведенными компонентами.

**Объяснение:**

1.  **Роль и задача:**
    -   Модель ИИ выступает в роли "помощника по сборке компьютеров".
    -   Основная задача: обработать данные о компьютерных компонентах на иврите, перевести их на целевой язык и сформировать описание сборки, классифицируя ее по типу (например, игровая, рабочая станция).
2.  **Входные данные:**
    -   Данные поступают в формате JSON.
    -   Каждый компонент представлен JSON-объектом с ключами: `product_id`, `product_title`, `product_description`, `specification`, `image_local_saved_path`.
    -   `product_id` и `image_local_saved_path` переносятся в выходные данные без изменений.
3.  **Выходные данные:**
    -   Выходные данные также в формате JSON.
    -   Структура:
        -   `language_code`: Код целевого языка (например, "en" для английского).
        -   `build_types`: Вероятностное распределение типов сборки (например, `"gaming": 0.8, "workstation": 0.2`).
        -   `title`: Заголовок сборки на целевом языке.
        -   `description`: Описание сборки на целевом языке.
        -   `products`: Массив объектов, каждый из которых представляет собой компонент с переведенными полями `product_title`, `product_description`, `specification` (если применимо).
4.  **Ключевые инструкции:**
    -   **Перевод:** Все данные на иврите должны быть переведены на целевой язык.
    -   **Классификация сборки:** Модель должна определять тип сборки на основе компонентов.
    -   **Форматирование:** Выходной JSON должен соответствовать строго заданной структуре.
    -   **Обработка неполных данных:** Модель должна заполнять недостающую информацию, если возможно, или оставлять поля пустыми.
    -   **Уточнение терминологии:** Следует избегать использования терминов "cheap" или "average", заменяя их более точными синонимами.
5.  **Дополнительные инструкции:**
    -   **Цена:** Если есть несколько компонентов одного типа (например, несколько мониторов), необходимо создать список цен с выделением уникальных характеристик.
    -   **Вероятность:** Распределение вероятностей типов сборки.
    -   **Подкатегории:** Указание подкатегорий сборки (например, "Competitive gaming" или "Creative workstation").
    -   **Предпочтения пользователя:** Учет пользовательских предпочтений (производительность, бюджет и т.д.).

**Потенциальные ошибки и области для улучшения:**

*   **Обработка ошибок:** Инструкция не описывает обработку потенциальных ошибок при переводе, поиске информации или формировании JSON.
*   **Зависимость от интернет-поиска:** Модель полагается на поиск в интернете для получения недостающей информации, что может быть нестабильно.
*   **Оценка качества перевода:** Не определено, как оценивать качество перевода и его соответствие контексту.
*   **Разрешение конфликтов:** Не описано, как разрешать конфликты при определении типа сборки, если есть компоненты, которые могут указывать на разные типы.
*   **Общая абстракция:** Можно сделать эту инструкцию более абстрактной, добавив обобщённый подход по определению типа сборки на основе входных данных.

**Взаимосвязь с другими частями проекта:**
Эта инструкция, вероятно, является частью большей системы по сборке компьютеров, где другие компоненты занимаются:
    -   Получением данных о компонентах из различных источников.
    -   Сохранением изображений компонентов.
    -   Отображением итоговой сборки пользователю.
    -   Обновлением информации о компонентах.

В итоге, эта инструкция является подробным заданием для модели ИИ, описывающим все этапы процесса сборки компьютера, начиная с обработки данных и заканчивая формированием итогового JSON. Она обеспечивает необходимую гибкость и точность, но нуждается в дополнительном уточнении в части обработки ошибок и нестандартных ситуаций.