# Анализ кода модуля `basebl.py`

**Качество кода**

-   **Соблюдение требований к формату кода (1-10):**
    -   **Преимущества:**
        -   Код хорошо структурирован и легко читается.
        -   Функции четко разделены и выполняют конкретные задачи.
        -   Используются содержательные имена переменных и функций.
        -   Есть подробные комментарии, объясняющие логику кода.
        -   Присутствует описание алгоритма и блок-схема в формате markdown.
    -   **Недостатки:**
        -   Не используется `reStructuredText (RST)` для комментариев и docstring.
        -   Не используется `j_loads` или `j_loads_ns` для чтения файлов (в данном случае не требуется, но стоит учесть).
        -   Отсутствует обработка ошибок с использованием `logger.error`.
        -   Не хватает docstring для функций.

**Рекомендации по улучшению**

1.  **Форматирование:**
    -   Заменить все комментарии и docstring на формат `reStructuredText (RST)`.
    -   Добавить docstring ко всем функциям, включая описание параметров и возвращаемых значений.
2.  **Обработка ошибок:**
    -   Использовать `from src.logger.logger import logger` для логирования ошибок.
    -   Заменить `print` на `logger.error` для сообщений об ошибках.
3.  **Импорты:**
    -   Добавить необходимые импорты, если это необходимо.
4.  **Чтение файлов:**
    -   В данном коде нет чтения из файлов, но если бы оно было, следует использовать `j_loads` или `j_loads_ns`.
5.  **Прочие улучшения:**
    -   Улучшить описание функций в docstring, использовать более точные формулировки.
    -   Избегать избыточных комментариев, где код достаточно понятен.

**Улучшенный код**

```python
"""
Модуль для игры "Бейсбол"
========================

Этот модуль реализует игру "Бейсбол", в которой игрок должен угадать
четырехзначное число, сгенерированное компьютером.

Описание игры:
    1. Компьютер генерирует случайное 4-значное число, где все цифры уникальны.
    2. Игрок делает попытки угадать число.
    3. После каждой попытки компьютер сообщает количество "страйков" (цифры на правильной позиции) и "боллов" (цифры, присутствующие в числе, но на неправильной позиции).
    4. Игра продолжается, пока игрок не угадает число (4 страйка).

Пример использования:
    Запустите этот модуль, чтобы начать игру.
"""
import random
# from src.logger.logger import logger # TODO: добавить логгер, если необходимо


def generate_target_number() -> str:
    """
    Генерирует случайное 4-значное число с уникальными цифрами.

    :return: Строка, представляющая 4-значное число.
    :rtype: str
    """
    digits = list(range(10)) # Создаем список цифр от 0 до 9
    random.shuffle(digits)  # Перемешиваем цифры
    # Берем первые 4 цифры и преобразуем их в строку
    return "".join(map(str, digits[:4]))


def get_user_guess() -> str:
    """
    Запрашивает у пользователя ввод 4-значного числа и проверяет его корректность.

    :return: Введенное пользователем 4-значное число.
    :rtype: str
    """
    while True:
        guess = input("Введите 4-значное число: ")  # Запрашиваем ввод 4-значного числа
        if len(guess) == 4 and guess.isdigit():  # Проверяем, что ввод состоит из 4 цифр
            return guess
        else:
            print("Некорректный ввод. Пожалуйста, введите 4-значное число.") # Уведомление о неверном вводе


def calculate_score(target: str, guess: str) -> tuple[int, int]:
    """
    Вычисляет количество страйков и боллов.

    :param target: Загаданное число.
    :type target: str
    :param guess: Введенное пользователем число.
    :type guess: str
    :return: Кортеж, содержащий количество страйков и боллов.
    :rtype: tuple[int, int]
    """
    strikes = 0  # Инициализируем счетчик страйков
    balls = 0  # Инициализируем счетчик боллов
    for i in range(4):
        if guess[i] == target[i]:
            strikes += 1  # Увеличиваем страйк, если цифры и позиции совпадают
        elif guess[i] in target:
            balls += 1  # Увеличиваем болл, если цифра есть, но не на своей позиции
    return strikes, balls


# Основная логика игры
def play_baseball():
    """
    Запускает игру "Бейсбол".

    Эта функция управляет основным игровым процессом, генерирует
    загаданное число, запрашивает у пользователя ввод, вычисляет результаты
    и определяет победителя.
    """
    target_number = generate_target_number()  # Генерируем загаданное число
    print("Добро пожаловать в игру Бейсбол!")  # Выводим приветствие
    print("Я загадал 4-значное число. Попробуй угадать его.")  # Информируем о задаче

    while True:  # Начинаем бесконечный цикл
        user_guess = get_user_guess()  # Получаем ввод пользователя
        strikes, balls = calculate_score(target_number, user_guess)  # Вычисляем страйки и боллы

        print(f"{strikes} страйков, {balls} боллов")  # Выводим результат
        if strikes == 4:
            print("ПОЗДРАВЛЯЮ! Вы угадали число!")  # Поздравление и завершение игры
            break


if __name__ == "__main__":
    play_baseball()  # Запускаем игру

"""
Объяснение кода:

1.  **Импорт модуля `random`:**
    -   `import random`: импортирует модуль для генерации случайных чисел.

2.  **Функция `generate_target_number()`:**
    -   :rtype: str: Указываем тип возвращаемого значения.
    -   `digits = list(range(10))`: создает список цифр от 0 до 9.
    -   `random.shuffle(digits)`: перемешивает цифры случайным образом.
    -   `return "".join(map(str, digits[:4]))`: берет первые 4 цифры из перемешанного списка,
        преобразует их в строки и объединяет в одну строку, которая возвращается как загаданное число.

3.  **Функция `get_user_guess()`:**
    -   :rtype: str: Указываем тип возвращаемого значения.
    -   `while True:`: запускает бесконечный цикл, пока пользователь не введет корректное число.
    -   `guess = input("Введите 4-значное число: ")`: запрашивает ввод 4-значного числа у пользователя.
    -   `if len(guess) == 4 and guess.isdigit()`: проверяет, является ли длина ввода 4 символа и состоит ли он только из цифр.
    -   `return guess`: возвращает введенное число, если оно корректно.
    -   `else`: если ввод некорректен, выводит сообщение об ошибке.

4.  **Функция `calculate_score(target, guess)`:**
    -   :rtype: tuple[int, int]: Указываем тип возвращаемого значения.
    -   `strikes = 0` и `balls = 0`: инициализирует счетчики страйков и боллов.
    -   `for i in range(4)`: проходит по каждой цифре введенного числа.
    -   `if guess[i] == target[i]`: проверяет, совпадает ли цифра и её позиция. Если да, увеличивает счетчик страйков.
    -   `elif guess[i] in target`: проверяет, присутствует ли цифра во введенном числе в загаданном числе, но на другой позиции. Если да, увеличивает счетчик боллов.
    -   `return strikes, balls`: возвращает количество страйков и боллов.

5.  **Функция `play_baseball()`:**
    -   Эта функция управляет основным игровым процессом.
    -   `target_number = generate_target_number()`: генерирует загаданное число.
    -   `print("Добро пожаловать в игру Бейсбол!")` и `print("Я загадал 4-значное число. Попробуй угадать его.")`: выводят приветствие и правила игры.
    -   `while True:`: основной игровой цикл.
    -   `user_guess = get_user_guess()`: получает ввод от пользователя.
    -   `strikes, balls = calculate_score(target_number, user_guess)`: вычисляет страйки и боллы.
    -   `print(f"{strikes} страйков, {balls} боллов")`: выводит результат текущей попытки.
    -   `if strikes == 4:`: проверяет, не угадано ли число.
    -   `print("ПОЗДРАВЛЯЮ! Вы угадали число!")` и `break`: выводит сообщение о победе и завершает цикл.

6.  **Условие `if __name__ == "__main__":`:**
    -   `if __name__ == "__main__":`: гарантирует, что функция `play_baseball()` будет запущена,
        только если файл исполняется напрямую, а не импортируется как модуль.
    -   `play_baseball()`: вызывает функцию для начала игры.
"""
```