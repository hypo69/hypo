# Модуль gemini_simplechat.main

## Обзор

Модуль `gemini_simplechat.main` предоставляет простой чат, использующий модель Google Gemini для обработки сообщений. Он включает в себя API на базе FastAPI для обработки запросов чата и возврата ответов. Модуль содержит конфигурацию CORS для обеспечения взаимодействия с различными доменами, а также использует модуль `src.logger` для логирования ошибок.

## Подорбней

Этот модуль является частью проекта `hypotez` и предназначен для обеспечения функциональности чата с использованием AI-модели Google Gemini. Он разворачивает FastAPI приложение, которое обрабатывает POST запросы к `/api/chat`, передавая сообщения в модель Gemini и возвращая ответы. Файл `index.html` обслуживается по корневому пути `/` для предоставления пользовательского интерфейса.

## Классы

### `ChatRequest`

**Описание**: Класс BaseModel для представления запроса чата.

**Параметры**:
- `message` (str): Сообщение пользователя.

## Функции

### `root`

```python
async def root() -> HTMLResponse:
    """
    Args:
        
    Returns:
        HTMLResponse: Возвращает HTMLResponse с содержимым файла index.html.
    Raises:
        HTTPException:  Если возникает ошибка при чтении файла index.html.
    """
```

**Описание**: Обрабатывает GET-запросы к корневому пути `/` и возвращает HTML-страницу.

**Возвращает**:
- `HTMLResponse`: HTML-страница, содержащая пользовательский интерфейс чата.

**Вызывает исключения**:
- `HTTPException`: Если не удается прочитать файл шаблона HTML, возвращается HTTP-ошибка 500.

**Примеры**:
```python
# Пример вызова:
# GET /
```

### `chat`

```python
async def chat(request: ChatRequest) -> dict:
    """
    Args:
        request (ChatRequest): Объект ChatRequest, содержащий сообщение пользователя.
    Returns:
        dict: Возвращает словарь с ответом от модели Gemini.
    Raises:
        HTTPException: Если возникает ошибка при взаимодействии с моделью Gemini.
    """
```

**Описание**: Обрабатывает POST-запросы к `/api/chat`, передает сообщение пользователя в модель Google Gemini и возвращает ответ.

**Параметры**:
- `request` (ChatRequest): Запрос, содержащий сообщение пользователя.

**Возвращает**:
- `dict`: Словарь, содержащий ответ от модели Gemini.

**Вызывает исключения**:
- `HTTPException`: Если возникает ошибка при обработке сообщения моделью, возвращается HTTP-ошибка 500.

**Примеры**:
```python
# Пример вызова:
# POST /api/chat с JSON {"message": "Hello"}