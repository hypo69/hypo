# Модуль pricelist_generator

## Обзор

Этот модуль предоставляет класс `ReportGenerator` для генерации HTML и PDF отчетов на основе данных из JSON-файлов.  Класс использует Jinja2 для рендеринга шаблонов HTML и pdfkit для преобразования HTML в PDF.  Он также включает в себя методы для загрузки данных, генерации HTML, сохранения HTML в файл, генерации PDF и управления логгированием.

## Оглавление

* [Генератор отчетов](#генератор-отчетов)
* [Функция `main`](#функция-main)


## Генератор отчетов

### `ReportGenerator`

**Описание**: Класс `ReportGenerator` отвечает за генерацию HTML и PDF отчетов.  Он использует шаблон HTML, загружает данные и рендерит шаблон с данными.

**Атрибуты**:

- `template_path` (str): Путь к шаблону HTML-отчета. По умолчанию устанавливается по пути `gs.path.endpoints / 'kazarinov' / 'react' / 'templates' / 'template.html'`.
- `env` (jinja2.Environment): Объект для работы с шаблонами Jinja2.

**Методы**:

#### `generate_html(self, data: dict) -> str`

**Описание**: Генерирует HTML-контент на основе шаблона и переданных данных.

**Параметры**:

- `data` (dict): Словарь данных для заполнения шаблона.

**Возвращает**:

- str: сгенерированный HTML-контент.


#### `create_report(self, data: dict, html_file: str | Path, pdf_file: str | Path) -> None`

**Описание**: Выполняет полный цикл генерации отчета: генерирует HTML, сохраняет его в файл и преобразует в PDF.

**Параметры**:

- `data` (dict): Словарь данных для отчета.
- `html_file` (str | Path): Путь к файлу, в который будет сохранен HTML.
- `pdf_file` (str | Path): Путь к файлу, в который будет сохранен PDF.


## Функция `main`

### `main(mexiron: str, lang: str) -> bool`

**Описание**: Функция `main` запускает процесс генерации отчета. Она загружает данные из JSON, генерирует HTML и PDF отчеты, сохраняет их в указанные файлы.

**Параметры**:

- `mexiron` (str): Идентификатор мехирона.
- `lang` (str): Язык отчета.

**Возвращает**:

- bool: `True`, если генерация прошла успешно, иначе `False`.


## Обработка ошибок

В методе `create_report` при ошибке сохранения PDF, выводится сообщение об ошибке в лог с помощью `logger.error()`.  В коде есть места, где не обрабатываются потенциальные ошибки, которые могут произойти во время работы с файлами.  Необходимо добавить обработку исключений (try/except блоки) для улучшения надежности.

## Примечания

- Модуль использует библиотеки `jinja2`, `pdfkit`, `pathlib`, и другие, которые должны быть установлены.
- Пути к файлам (`gs.path`) должны быть корректно определены в используемых конфигурационных файлах.
- Логирование (`logger`) должно быть настроенным для записи ошибок и других сообщений в файл.