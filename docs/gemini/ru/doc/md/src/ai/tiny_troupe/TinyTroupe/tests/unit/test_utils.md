# Модуль `test_utils`

## Обзор

Данный модуль содержит тесты для функций `name_or_empty`, `extract_json` и `repeat_on_error` из модуля `tinytroupe.utils`.  Тесты проверяют правильность работы функций в различных сценариях, включая корректное извлечение JSON из текста, обработку `None` и различных ситуаций при повторных попытках выполнения функции с обработкой исключений.

## Оглавление

- [Функции](#функции)
    - [`test_extract_json`](#test_extract_json)
    - [`test_name_or_empty`](#test_name_or_empty)
    - [`test_repeat_on_error`](#test_repeat_on_error)


## Функции

### `test_extract_json`

**Описание**: Функция тестирует корректность работы функции `extract_json`. Она проверяет извлечение JSON из строки текста с разными сценариями: корректный JSON, JSON массив, JSON с экранированными символами, некорректный JSON и отсутствие JSON в строке.

**Параметры**:
- `text` (str): Входная строка, из которой нужно извлечь JSON.

**Возвращает**:
- `None`: Функция не возвращает значение.  Проверка корректности происходит через `assert`.

**Вызывает исключения**:
- Нет.


### `test_name_or_empty`

**Описание**: Функция тестирует функцию `name_or_empty`, проверяя её поведение при работе с именованными сущностями и `None`.

**Параметры**:
- `entity`:  Экземпляр класса, предполагается, что у него есть атрибут `name`.

**Возвращает**:
- `None`: Функция не возвращает значение. Проверка корректности происходит через `assert`.

**Вызывает исключения**:
- Нет.


### `test_repeat_on_error`

**Описание**: Функция тестирует функцию `repeat_on_error`, проверяющую повторные попытки выполнения функции при возникновении исключения.

**Параметры**:
- `retries` (int): Количество попыток повтора выполнения функции.
- `exceptions` (list): Список типов исключений, которые должны быть перехвачены.
- `dummy_function` (MagicMock): Мок-функция, которая может вызывать исключение при вызове.

**Возвращает**:
- `None`: Функция не возвращает значение. Проверка корректности происходит через `assert` и `pytest.raises`.

**Вызывает исключения**:
- `DummyException`: При ошибке, обработанной функцией `repeat_on_error`.
- `RuntimeError`: При ошибке, не обработанной функцией `repeat_on_error`.

**Примечания**:  Тест проверяет, что функция повторно выполняется заданное количество раз при возникновении ожидаемого исключения и не выполняется повторно при возникновении исключения, не относящегося к списку `exceptions`.