# Модуль logger

## Обзор

Данный модуль предоставляет класс `Logger` для централизованного логгирования в консоль, файлы и JSON-формате.  Реализован паттерн Singleton для единственного экземпляра логгера.  Поддерживаются различные уровни логгирования (INFO, DEBUG, ERROR, CRITICAL) и возможность перенаправления логов в отдельные файлы для разных типов событий.  Логгирование дополнительно поддерживает форматирование сообщений, включая цвет и информацию об исключениях.


## Оглавление

* [SingletonMeta](#singletonmeta)
* [JsonFormatter](#jsonformatter)
* [Logger](#logger)
    * [__init__](#init)
    * [_configure_logger](#configure_logger)
    * [initialize_loggers](#initializeloggerrs)
    * [_format_message](#format_message)
    * [_ex_full_info](#ex_full_info)
    * [log](#log)
    * [info](#info)
    * [success](#success)
    * [warning](#warning)
    * [debug](#debug)
    * [error](#error)
    * [critical](#critical)


## Классы

### `SingletonMeta`

**Описание**: Метакласс, реализующий паттерн Singleton для класса `Logger`. Гарантирует, что существует только один экземпляр класса `Logger`.

**Атрибуты**:
- `_instances`: Словарь, хранящий экземпляры класса `Logger`.
- `_lock`: Объект блокировки для потокобезопасности.


### `JsonFormatter`

**Описание**:  Пользовательский класс для форматирования логов в формате JSON.


**Методы**:

#### `format`

**Описание**: Форматирует запись лога в JSON-строку.

**Параметры**:
- `record` (logging.LogRecord): Запись лога.

**Возвращает**:
- `str`: Форматированная запись лога в JSON-формате.


### `Logger`

**Описание**: Класс для логгирования, использующий паттерн Singleton.  Позволяет конфигурировать и использовать логгеры для консоли, файлов (INFO, DEBUG, ERROR) и JSON-логов.


**Атрибуты**:
- `logger_console`: Логгер для консоли.
- `logger_file_info`: Логгер для файла INFO.
- `logger_file_debug`: Логгер для файла DEBUG.
- `logger_file_errors`: Логгер для файла ERROR/CRITICAL.
- `logger_file_json`: Логгер для файла JSON.
- `_initialized`: Флаг, указывающий, инициализирован ли логгер.


**Методы**:

#### `__init__`

**Описание**: Инициализирует экземпляр класса `Logger`.


**Атрибуты**:
- Не принимает аргументов.


#### `_configure_logger`

**Описание**: Конфигурирует и возвращает логгер для файла.

**Параметры**:
- `name` (str): Имя логгера.
- `log_path` (str): Путь к файлу лога.
- `level` (Optional[int]): Уровень логгирования. По умолчанию `logging.DEBUG`.
- `formatter` (Optional[logging.Formatter]): Пользовательский форматтер. По умолчанию `None`.
- `mode` (Optional[str]): Режим открытия файла. По умолчанию `'a'` (добавление).

**Возвращает**:
- `logging.Logger`: Конфигурированный экземпляр логгера.


#### `initialize_loggers`

**Описание**: Инициализирует логгеры для консоли, INFO, DEBUG, ERROR и JSON-логов.

**Параметры**:
- `info_log_path` (Optional[str]): Путь к файлу для INFO логов.
- `debug_log_path` (Optional[str]): Путь к файлу для DEBUG логов.
- `errors_log_path` (Optional[str]): Путь к файлу для ERROR/CRITICAL логов.
- `json_log_path` (Optional[str]): Путь к файлу для JSON логов.

**Возвращает**:
- Не возвращает значения.


#### `_format_message`

**Описание**: Форматирует сообщение с опциональным применением цвета и информацией об исключении.

**Параметры**:
- `message` (str): Сообщение для логгирования.
- `ex` (Optional[str]): Информация об исключении.
- `color` (Optional[str | tuple]): Цвет для форматирования сообщения.

**Возвращает**:
- `str`: Форматированное сообщение.


#### `_ex_full_info`

**Описание**: Возвращает полную информацию об исключении, включая функцию, файл и строку, где оно произошло.

**Параметры**:
- `ex` (Optional[str]): Информация об исключении.

**Возвращает**:
- `str`: Информация об исключении.


#### `log`

**Описание**: Общий метод для логгирования сообщений на заданном уровне.

**Параметры**:
- `level` (int): Уровень лога (logging.INFO, logging.DEBUG и т.д.).
- `message` (str): Сообщение для логгирования.
- `ex` (Optional[str]): Информация об исключении.
- `exc_info` (bool): Указывает, нужно ли включать информацию об исключении в лог.
- `color` (Optional[str | tuple]): Цвет для сообщения.

**Возвращает**:
- Не возвращает значение.


#### `info`, `success`, `warning`, `debug`, `error`, `critical`

**Описание**: Методы для логгирования сообщений с различными уровнями.  Форматирование и цвета соответствуют указанным значениям.

**Параметры**:
- `message` (str): Сообщение для логгирования.
- `ex` (Optional[str]): Информация об исключении.
- `exc_info` (bool): Указывает, нужно ли включать информацию об исключении в лог.
- `colors` (Optional[tuple]): Цвет для форматирования.

**Возвращает**:
- Не возвращает значение.