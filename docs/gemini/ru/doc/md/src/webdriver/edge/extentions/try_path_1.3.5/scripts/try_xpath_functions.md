# Модуль try_xpath_functions.js

## Обзор

Данный JavaScript-модуль предоставляет набор функций для работы с XPath, querySelector и querySelectorAll в браузере. Он позволяет вычислять значения XPath, получать элементы с помощью CSS-селекторов, обрабатывать результаты и возвращать их в удобном формате.

## Функции

### `execExpr`

**Описание**: Выполняет указанное выражение (XPath или CSS-селектор) в заданном контексте.

**Параметры**:
- `expr` (string): XPath выражение или CSS-селектор для выполнения.
- `method` (string): Метод выполнения выражения ("evaluate", "querySelector", "querySelectorAll").
- `opts` (object, optional): Опции для выполнения.
    - `context` (object, optional): Контекст выполнения выражения (документ или элемент). По умолчанию - `document`.
    - `resolver` (function | string | object, optional): Функция-резолвер для XPath.  Может быть строкой JSON для парсинга или объектом.  Если значение null, используется null. По умолчанию - `null`.
    - `document` (object, optional): Объект DOM документа. По умолчанию - `document`.
    - `resultType` (string, optional): Тип результата для XPath выражения, если используется метод `evaluate`.  По умолчанию - `xpathResult.ANY_TYPE`.

**Возвращает**:
- `object`: Объект с результатами выполнения:
    - `items`: Массив результатов.
    - `method`: Метод, используемый для выполнения.
    - `resultType`: Тип результата XPath (если применён `evaluate`).


**Вызывает исключения**:
- `Error`: Если контекст не является `Node` или `Attr` для метода `evaluate`, или не является `Document` или `Element` для методов `querySelector` и `querySelectorAll`.
- `Error`: В случае некорректного значения `resolver`.


### `resToArr`

**Описание**: Преобразует результат выполнения XPath выражения в массив.

**Параметры**:
- `res` (object): Результат выполнения XPath выражения.
- `type` (int, optional): Тип результата. Если не указан, берется тип из `res`.

**Возвращает**:
- `array`: Массив узлов или значений.

**Вызывает исключения**:
- `Error`: Если тип результата не поддерживается.


### `makeResolver`

**Описание**: Создает функцию-резолвер для XPath выражений.

**Параметры**:
- `obj` (function | string | object): Резолвер (функция, строка JSON или объект).

**Возвращает**:
- `function`: Функция-резолвер.

**Вызывает исключения**:
- `Error`: Если переданное значение не является валидным резолвером.


### `isValidDict`

**Описание**: Проверяет, является ли переданный объект валидным словарем, содержащим только строковые значения.

**Параметры**:
- `obj` (object): Проверяемый объект.

**Возвращает**:
- `boolean`: `true`, если объект является валидным словарем, `false` в противном случае.


### `objToMap`

**Описание**: Преобразует объект в Map.

**Параметры**:
- `obj` (object): Объект для преобразования.

**Возвращает**:
- `Map`: Map, содержащий пары ключ-значение из переданного объекта.


### `isDocOrElem`

**Описание**: Проверяет, является ли объект документом или элементом.

**Параметры**:
- `obj` (object): Объект для проверки.

**Возвращает**:
- `boolean`: `true`, если объект является документом или элементом, `false` в противном случае.


### `listToArr`

**Описание**: Преобразует список в массив.

**Параметры**:
- `list` (list): Список для преобразования.

**Возвращает**:
- `array`: Массив, содержащий элементы из переданного списка.



**(И так далее для остальных функций.)**