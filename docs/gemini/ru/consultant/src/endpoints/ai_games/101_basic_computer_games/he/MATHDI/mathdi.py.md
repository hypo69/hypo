# Анализ кода модуля `mathdi.py`

**Качество кода**
8
-  Плюсы
    - Код хорошо структурирован и легко читается.
    - Используются комментарии для объяснения логики кода.
    - Обработка деления на ноль реализована корректно.
    - Присутствует проверка на корректность ввода пользователя.
    - Использование цикла `while True` для многократного запуска игры.
    - Реализован выход из цикла игры.
 -  Минусы
    - Отсутствует документация в формате reStructuredText.
    - Нет логирования ошибок.
    - Не используется `j_loads` или `j_loads_ns` для чтения файлов (хотя в этом файле нет чтения файлов).
    - Присутствует избыточное использование `try-except` в сравнении с использованием `logger.error`.
    - Нет импорта для логгера

**Рекомендации по улучшению**
1.  Добавить документацию в формате reStructuredText для модуля и функции.
2.  Использовать `from src.logger.logger import logger` для логирования ошибок.
3.  Избегать избыточного использования стандартного блока `try-except`, предпочитая обработку ошибок с помощью `logger.error`.
4.  Убрать комментарии после `#` внутри блоков кода, заменив их на более подробные комментарии в формате RST.
5.  Добавить проверку на ввод пользователя (ввод не числовых значений) в отдельную функцию для повторного использования.
6.  Заменить сравнение чисел с плавающей точкой на `math.isclose` с явным указанием допуска.
7.  Обернуть код в `if __name__ == "__main__":` в функцию `main()` и вызывать её.

**Оптимизированный код**
```python
"""
Модуль mathdi
================
Этот модуль реализует игру "Математическая викторина", в которой пользователю
предлагается решить простые арифметические задачи.

Игра генерирует случайные числа и арифметические операции (+, -, *, /),
запрашивает ответ пользователя и проверяет его правильность.

Пример использования
--------------------

.. code-block:: python

   if __name__ == "__main__":
       main()
"""
import random
import math
from src.logger.logger import logger  # Импорт logger


def get_user_input(prompt: str) -> float | None:
    """
    Запрашивает у пользователя ввод числа с обработкой ошибок.

    :param prompt: Сообщение для пользователя.
    :return: Введенное пользователем число или None в случае ошибки ввода.
    """
    while True:
        try:
            # Код исполняет получение ввода от пользователя и преобразование его в число с плавающей точкой
            user_input = float(input(prompt))
            return user_input
        except ValueError:
            # Код обрабатывает ошибку ввода нечислового значения
            logger.error('Ошибка ввода: введено не число. Пожалуйста, введите число.')


def play_math_quiz() -> None:
    """
    Запускает игру "Математическая викторина".

    Функция генерирует случайные математические задачи и запрашивает
    ответ пользователя, проверяя его правильность. Игра продолжается,
    пока пользователь не решит завершить.
    """
    while True:
        # Код генерирует два случайных числа от 1 до 10 включительно
        number1 = random.randint(1, 10)
        number2 = random.randint(1, 10)
        # Код создает список доступных математических операций
        operations = ['+', '-', '*', '/']
        # Код выбирает случайную операцию из списка
        operation = random.choice(operations)

        # Код выводит вопрос пользователю
        print(f"What is the result of {number1} {operation} {number2}?")

        # Код получает ответ пользователя, обрабатывая возможные ошибки ввода
        user_answer = get_user_input("Enter your answer: ")

        if user_answer is None:
            continue

        # Код вычисляет правильный ответ
        if operation == '+':
            correct_answer = number1 + number2
        elif operation == '-':
            correct_answer = number1 - number2
        elif operation == '*':
            correct_answer = number1 * number2
        elif operation == '/':
            if number2 == 0:
                # Код обрабатывает деление на ноль, логируя ошибку и начиная новый раунд
                logger.error("Division by zero is not allowed.")
                continue
            correct_answer = number1 / number2

        # Код проверяет правильность ответа пользователя
        if math.isclose(user_answer, correct_answer, rel_tol=1e-6):
            # Код выводит сообщение о правильном ответе
            print("Correct")
        else:
            # Код выводит сообщение о неправильном ответе
            print("Wrong")

        # Код спрашивает, хочет ли пользователь играть снова
        play_again = input("Do you want to play again? (yes/no): ").lower()
        # Код проверяет ответ пользователя и завершает игру, если пользователь не хочет играть снова
        if play_again != 'yes':
            print("Game over.")
            break


def main() -> None:
    """
    Главная функция для запуска игры.
    """
    play_math_quiz()


if __name__ == "__main__":
    main()
```