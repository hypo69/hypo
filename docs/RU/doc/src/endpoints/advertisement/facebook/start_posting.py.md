# Модуль `src.endpoints.advertisement.facebook.start_posting`

## Обзор

Модуль предназначен для автоматизированной отправки рекламных объявлений в группы Facebook. Он использует WebDriver для управления браузером и выполняет рекламные кампании на основе заданных параметров и файлов конфигурации.

## Оглавление

1. [Обзор](#обзор)
2. [Импорты](#импорты)
3. [Глобальные переменные](#глобальные-переменные)
4. [Основная логика](#основная-логика)

## Импорты

В данном модуле используются следующие импорты:

- `math.log`:  Импортируется функция `log` из модуля `math`.
- `header`: Импортируется модуль `header`.
- `time`: Импортируется модуль `time` для работы со временем.
- `copy`: Импортируется модуль `copy` для создания копий объектов.
- `src.webdriver.driver.Driver`, `src.webdriver.driver.Chrome`: Импортируются классы `Driver` и `Chrome` из модуля `src.webdriver.driver` для управления браузером.
- `src.endpoints.advertisement.facebook.FacebookPromoter`: Импортируется класс `FacebookPromoter` из модуля `src.endpoints.advertisement.facebook` для управления рекламными кампаниями.
- `src.logger.logger.logger`: Импортируется объект `logger` из модуля `src.logger.logger` для логирования.

## Глобальные переменные

- `d` (Driver): Объект драйвера для управления браузером (Chrome).
- `filenames` (list[str]): Список имен файлов, содержащих информацию о группах для публикации.
- `excluded_filenames` (list[str]): Список имен файлов, которые следует исключить из обработки.
- `campaigns` (list): Список названий рекламных кампаний.
- `promoter` (FacebookPromoter): Объект класса `FacebookPromoter`, используемый для управления рекламными кампаниями в Facebook.

## Основная логика

Основная логика работы модуля заключается в бесконечном цикле, в котором происходит следующее:
1.  Инициализация драйвера браузера и переход на страницу Facebook.
2.  Создание экземпляра класса `FacebookPromoter` с заданными параметрами.
3.  Запуск рекламных кампаний в бесконечном цикле с заданными группами, рекламными кампаниями и другими параметрами.
4.  При возникновении прерывания с клавиатуры (`KeyboardInterrupt`) цикл останавливается и выводится сообщение о прерывании.

### `try...except KeyboardInterrupt`
  
   **Описание**: Блок try...except для перехвата исключения `KeyboardInterrupt`.
  
   **Вызывает исключения**:
   - `KeyboardInterrupt`: Вызывается при прерывании выполнения программы с клавиатуры.

   ```python
    try:
        while True:
            promoter.run_campaigns(campaigns = copy.copy(campaigns), group_file_paths = filenames)
            print(f"Going sleep {time.localtime()}")
            time.sleep(180)
            ...
    except KeyboardInterrupt:
        logger.info("Campaign promotion interrupted.")
   ```
   
   **Описание**: Основной цикл программы, который запускает рекламные кампании и делает паузу. При прерывании с клавиатуры, выводит сообщение в лог.