# Модуль `hypotez/src/suppliers/aliexpress/api/helpers/requests.py`

## Обзор

Модуль `requests` содержит вспомогательные функции для работы с API запросами, в частности для AliExpress. Он обрабатывает запросы, парсит ответы и возвращает данные в удобном формате. Модуль также содержит логирование для отслеживания ошибок и предупреждений.

## Функции

### `api_request`

**Описание**: Функция выполняет API запрос, обрабатывает ответ и возвращает результат. Она поддерживает переподключения при ошибках и обработку кодов ответов.

**Параметры**:

- `request` (объект): Объект, представляющий API запрос (например, `requests.Session`). Необходимо, чтобы у объекта был метод `getResponse()`, возвращающий ответ.
- `response_name` (str): Имя поля в ответе, содержащее результат.
- `attemps` (int, опционально): Максимальное количество попыток выполнения запроса. По умолчанию равно 1.

**Возвращает**:

- `dict | None`: Результат запроса в формате словаря или `None` в случае ошибки.

**Вызывает исключения**:

- `ApiRequestException`: Возникает при ошибках выполнения запроса (например, сетевые ошибки).
- `ApiRequestResponseException`: Возникает при ошибках обработки ответа (например, некорректный формат ответа).


**Детали реализации**:

Функция `api_request` пытается получить ответ от API. При ошибке, она выводит сообщение в лог, и возвращает `None`. 

Далее функция пытается извлечь данные из ответа, в формате словаря. Если этот процесс завершается ошибкой,  функция пишет сообщение об ошибке в лог и возвращает `None`.

После успешного извлечения данных, функция проверяет код ответа (resp_code). Если код 200, она возвращает поле `result`. В противном случае, функция выводит предупреждение в лог и возвращает `None`.  В любой другой ситуации функция выводит сообщение об ошибке в лог и возвращает `None`.