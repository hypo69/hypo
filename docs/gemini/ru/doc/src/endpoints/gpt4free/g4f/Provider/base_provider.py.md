# Документация модуля `base_provider.py`

## Обзор

Модуль `base_provider.py` предоставляет базовые классы и интерфейсы для реализации различных провайдеров, используемых для взаимодействия с моделями генерации текста, такими как GPT-4. Он определяет основные абстракции для обработки запросов, получения ответов и управления параметрами.

## Подробней

Этот модуль является основой для создания новых провайдеров в проекте `hypotez`. Он предоставляет абстрактные классы и методы, которые должны быть реализованы в дочерних классах для поддержки конкретных API и моделей.

## Содержание

- [Классы](#Классы)
    - [AbstractProvider](#AbstractProvider)
        - [Методы](#Методы-AbstractProvider)
            - [__init__](#__init__)
            - [base_url](#base_url)
            - [supports_stream](#supports_stream)
            - [model](#model)
            - [params](#params)
            - [\_\_str\_\_](#__str__)
            - [\_\_repr\_\_](#__repr__)
            - [create_completion](#create_completion)
            - [conversation](#conversation)

## Классы

### `AbstractProvider`

**Описание**: Абстрактный базовый класс для всех провайдеров. Определяет интерфейс, который должны реализовывать все провайдеры для обеспечения единообразного взаимодействия с системой.

**Принцип работы**:
Класс `AbstractProvider` предоставляет общую структуру для провайдеров, включая методы для настройки параметров запроса, указания поддерживаемых моделей и создания завершений. Он содержит абстрактные методы, которые должны быть реализованы в подклассах, чтобы адаптировать провайдер к конкретному API.

#### Методы

- `__init__`: Инициализирует экземпляр класса `AbstractProvider`.
- `base_url`: Возвращает базовый URL для API провайдера.
- `supports_stream`: Возвращает `True`, если провайдер поддерживает потоковую передачу данных, иначе `False`.
- `model`: Возвращает идентификатор модели, используемой провайдером.
- `params`: Возвращает словарь параметров, используемых для настройки запроса к API.
- `__str__`: Возвращает строковое представление объекта провайдера.
- `__repr__`: Возвращает строковое представление объекта провайдера для отладки.
- `create_completion`: Абстрактный метод для создания завершения на основе предоставленного запроса. Должен быть реализован в подклассах.
- `conversation`: Метод для ведения диалога с использованием провайдера.
```python
    def __init__(self):
        """
        Инициализирует экземпляр класса `AbstractProvider`.
        """
        ...
```
```python
    @property
    def base_url(self):
        """
        Возвращает базовый URL для API провайдера.
        """
        ...
```
```python
    @property
    def supports_stream(self) -> bool:
        """
        Возвращает `True`, если провайдер поддерживает потоковую передачу данных, иначе `False`.
        """
        ...
```
```python
    @property
    def model(self) -> bool:
        """
        Возвращает идентификатор модели, используемой провайдером.
        """
        ...
```

```python
    @property
    def params(self) -> dict:
        """
        Возвращает словарь параметров, используемых для настройки запроса к API.
        """
        ...
```
```python
    def __str__(self):
        """
        Возвращает строковое представление объекта провайдера.
        """
        ...
```
```python
    def __repr__(self):
        """
        Возвращает строковое представление объекта провайдера для отладки.
        """
        ...
```
```python
    @abstractmethod
    def create_completion(
        self,
        prompt: str,
        stream: bool,
        **kwargs
    ) -> str | Generator[str, None, None]:
        """
        Абстрактный метод для создания завершения на основе предоставленного запроса. Должен быть реализован в подклассах.

        Args:
            prompt (str): Текст запроса.
            stream (bool): Флаг, указывающий, следует ли использовать потоковую передачу.
            **kwargs: Дополнительные аргументы.

        Returns:
            str | Generator[str, None, None]: Завершенный текст или генератор для потоковой передачи.

        Raises:
            NotImplementedError: Если метод не реализован в подклассе.
        """
        ...
```

```python
    def conversation(
        self,
        messages: list[dict[str, str]],
        stream: bool = False,
        **kwargs
    ) -> BaseConversation:
        """
        Метод для ведения диалога с использованием провайдера.

        Args:
            messages (list[dict[str, str]]): Список сообщений в формате [{"role": "user", "content": "text"}].
            stream (bool): Флаг, указывающий, следует ли использовать потоковую передачу. По умолчанию `False`.
            **kwargs: Дополнительные аргументы.

        Returns:
            BaseConversation: Объект `BaseConversation`, содержащий информацию о диалоге.

        Raises:
            NotImplementedError: Если метод не реализован в подклассе.
        """
        ...