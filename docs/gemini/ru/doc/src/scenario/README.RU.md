# Модуль `src.scenario`

## Обзор

Модуль `src.scenario` предназначен для автоматизации взаимодействия с поставщиками, используя сценарии, описанные в JSON-файлах. Он адаптирует процесс извлечения и обработки данных о продуктах с веб-сайтов поставщиков и синхронизирует эту информацию с базой данных системы (например, PrestaShop).

## Функции

### `run_scenario_files`

**Описание**: Выполняет сценарии, указанные в списке файлов.

**Параметры**:

- `s (object)`: Объект, содержащий необходимые ресурсы (например, базу данных).
- `scenario_files_list (list):` Список путей к файлам сценариев.

**Возвращает**:
- `None`

**Вызывает исключения**:
- `FileNotFoundError`: Если указанный файл не найден.
- `JSONDecodeError`: Если содержимое файла не является валидным JSON.
- `Exception`: Общие ошибки при выполнении сценариев.


### `run_scenario_file`

**Описание**: Выполняет сценарии из указанного файла.

**Параметры**:

- `s (object)`: Объект, содержащий необходимые ресурсы (например, базу данных).
- `scenario_file (str)`: Путь к файлу сценария.

**Возвращает**:
- `None`

**Вызывает исключения**:
- `FileNotFoundError`: Если указанный файл не найден.
- `JSONDecodeError`: Если содержимое файла не является валидным JSON.
- `Exception`: Общие ошибки при выполнении сценариев.


### `run_scenario`

**Описание**: Обрабатывает отдельный сценарий.

**Параметры**:

- `s (object)`: Объект, содержащий необходимые ресурсы (например, базу данных).
- `scenario (dict)`: Словарь, описывающий сценарий.

**Возвращает**:
- `None`

**Вызывает исключения**:
- `Exception`: Общие ошибки при выполнении сценария.


### `dump_journal`

**Описание**: Сохраняет журнал выполнения сценариев в файл.

**Параметры**:

- `s (object)`: Объект, содержащий необходимые ресурсы (например, базу данных).
- `journal (list)`: Список журнальных записей.

**Возвращает**:
- `None`

**Вызывает исключения**:
- `Exception`: Общие ошибки при записи в файл.


### `main`

**Описание**: Основная функция для запуска модуля.

**Параметры**:
- `None`

**Возвращает**:
- `None`

**Вызывает исключения**:
- `Exception`: Общие ошибки при запуске.



## Пример сценария (JSON)

```json
{
    "scenarios": {
        "category_name": {
            "url": "https://example.com/category",
            "name": "category_name",
            "presta_categories": {
                "default_category": 123,
                "additional_categories": [456, 789]
            }
        }
    }
}
```

## Как это работает

Модуль читает сценарии из JSON-файлов, содержит URL-адреса, названия категорий и соответствия категорий в базе данных PrestaShop. Затем он запрашивает данные с указанных URL-адресов, обрабатывает их и сохраняет в базе данных.  Журнал выполнения помогает отслеживать успешность и ошибки в процессе.