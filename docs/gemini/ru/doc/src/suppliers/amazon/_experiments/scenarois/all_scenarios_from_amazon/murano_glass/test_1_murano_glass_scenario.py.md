# Модуль для тестирования сценария "Муранское стекло" на Amazon

## Обзор

Модуль `test_1_murano_glass_scenario.py` предназначен для тестирования сценария, связанного с муранским стеклом, на платформе Amazon. Он включает в себя функции для извлечения информации о товаре, проверки его наличия в базе данных PrestaShop и загрузки изображений.

## Подробнее

Модуль является частью более крупного проекта `hypotez` и используется для автоматизации процессов, связанных с сбором данных о товарах с Amazon и их интеграцией в PrestaShop. Он содержит сценарий для обработки товаров категории "Муранское стекло".

## Функции

### `start_supplier`

```python
def start_supplier(supplier_prefix: str) -> Supplier:
    """
    Инициализирует поставщика с указанным префиксом.

    Args:
        supplier_prefix (str): Префикс поставщика.

    Returns:
        Supplier: Объект поставщика.
    """
    ...
```

**Назначение**:
Функция `start_supplier` инициализирует объект поставщика с заданным префиксом. Этот объект используется для управления всеми операциями, связанными с конкретным поставщиком (в данном случае, Amazon).

**Как работает функция**:

1.  Функция принимает префикс поставщика в качестве аргумента.
2.  Создает и возвращает объект `Supplier` с указанным префиксом.

### Проверка наличия товара в PrestaShop

```python
product_id = Product.check_if_product_in_presta_db(product_reference)
print(f' Если товар в бд получу id_product, иначе False. Получил: {product_id}')
```

**Назначение**:
Этот код проверяет, существует ли товар с определенным `product_reference` в базе данных PrestaShop.

**Как работает функция**:

1.  Вызывается метод `check_if_product_in_presta_db` класса `Product`, который принимает `product_reference` в качестве аргумента.
2.  Метод возвращает `id_product`, если товар найден в базе данных, или `False`, если товар не найден.
3.  Результат выводится в консоль.

### Загрузка изображения товара в PrestaShop

```python
Product.upload_image2presta(image_url = default_image_url, product_id = product_id)
```

**Назначение**:
Этот код загружает изображение товара в PrestaShop.

**Как работает функция**:

1.  Вызывается метод `upload_image2presta` класса `Product`, который принимает URL изображения (`image_url`) и ID товара (`product_id`) в качестве аргументов.
2.  Метод загружает изображение по указанному URL и связывает его с товаром в PrestaShop.

### `grab_product_page`

```python
def grab_product_page(s: Supplier) -> ProductFields:
    """
    Извлекает информацию о товаре со страницы товара.

    Args:
        s (Supplier): Объект поставщика.

    Returns:
        ProductFields: Объект, содержащий извлеченные поля товара.
    """
    ...
```

**Назначение**:
Функция `grab_product_page` извлекает информацию о товаре со страницы товара на Amazon.

**Как работает функция**:

1.  Функция принимает объект поставщика `s` в качестве аргумента.
2.  Вызывает метод для извлечения информации о товаре со страницы.
3.  Возвращает объект `ProductFields`, содержащий извлеченные поля товара.

### `add`

```python
def add(product_dict: dict) -> dict:
    """
    Добавляет товар в PrestaShop.

    Args:
        product_dict (dict): Словарь с данными о товаре.

    Returns:
        dict: Результат добавления товара.
    """
    ...
```

**Назначение**:
Функция `add` добавляет товар в PrestaShop, используя данные, переданные в словаре `product_dict`.

**Как работает функция**:

1.  Функция принимает словарь `product_dict`, содержащий данные о товаре.
2.  Вызывает метод для добавления товара в PrestaShop.
3.  Возвращает результат добавления товара.

### Преобразование имени продукта

```python
res_product_name = ''
for n in product_name:
    res_product_name += n
product_dict['product']['name'] = res_product_name.strip("\'").strip('\"').strip('\\n')
```

**Назначение**:
Этот код преобразует имя продукта, полученное с Amazon, для корректного отображения в PrestaShop.

**Как работает функция**:

1.  Инициализируется пустая строка `res_product_name`.
2.  Проходится по каждому символу `n` в `product_name` и добавляет его в `res_product_name`.
3.  Удаляются символы `'`, `"` и `\n` из начала и конца строки `res_product_name`.
4.  Обновляется значение имени продукта в словаре `product_dict`.