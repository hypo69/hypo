Как использовать функцию validate_person
========================================================================================

Описание
-------------------------
Функция `validate_person` проверяет экземпляр класса `TinyPerson` с помощью LLM (Large Language Model) OpenAI.  Она задаёт серию вопросов `TinyPerson` и использует ответы для оценки соответствия ожиданиям, заданным параметром `expectations`.  Функция возвращает оценку уверенности (от 0.0 до 1.0) и обоснование этой оценки. В случае неудачи возвращает `None`.

Шаги выполнения
-------------------------
1. **Инициализация переменных**: Создаётся пустой список `current_messages` для хранения сообщений в диалоге.  Определяется максимальная длина отображаемого контента `max_content_length`.
2. **Формирование начального запроса**: Из файла `prompts/check_person.mustache` загружается шаблон запроса к LLM.  Шаблон параметризуется данными из `expectations`, если они заданы.  Генерируется запрос-система.  Создаётся пользовательский запрос к LLM,  содержащий инструкции для проведения интервью и, опционально, спецификацию агента (`person.generate_agent_specification()`) или мини-биографию (`person.minibio()`).
3. **Отправка запроса LLM**:  Создаются сообщения `current_messages` и отправляются в LLM.
4. **Диалог с LLM**: Происходит цикл, пока LLM не вернёт сообщение с маркером окончания (`termination_mark`).
   - LLM генерирует вопрос.
   - Вопрос передаётся `TinyPerson` для ответа.
   - Ответ `TinyPerson` добавляется в `current_messages`.
   - Запрашивается следующий ответ от LLM.
5. **Обработка ответа LLM**: После цикла, если ответ от LLM получен, из него извлекается JSON с оценкой и обоснованием.
6. **Возврат результатов**: Возвращаются вычисленная оценка (`score`) и её обоснование (`justification`) или `None`, если процесс проверки не завершён.


Пример использования
-------------------------
.. code-block:: python

    from tinytroupe import TinyPerson
    from tinytroupe.validation import TinyPersonValidator

    # Предположим, что person - это экземпляр TinyPerson
    person = TinyPerson(...)  # Добавьте инициализацию
    expectations = "Проверьте, насколько хорошо человек знает тему."
    
    confidence_score, justification = TinyPersonValidator.validate_person(person, expectations)
    
    if confidence_score is not None:
        print(f"Оценка: {confidence_score:.2f}")
        print(f"Обоснование: {justification}")
    else:
        print("Ошибка проверки.")