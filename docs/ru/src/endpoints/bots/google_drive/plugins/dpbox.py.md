# Модуль для генерации прямой ссылки на скачивание с Dropbox
==========================================================

Модуль содержит функцию `DPBOX`, которая преобразует ссылку на Dropbox в прямую ссылку для скачивания файла.

## Обзор

Модуль `dpbox.py` предназначен для обработки ссылок Dropbox и преобразования их в прямые ссылки для скачивания. Это полезно, когда нужно автоматизировать процесс скачивания файлов с Dropbox, избегая необходимости переходить на страницу Dropbox и нажимать кнопку скачивания вручную.

## Подробней

Этот модуль содержит одну функцию, `DPBOX`, которая принимает URL Dropbox в качестве входных данных и возвращает прямую ссылку для скачивания файла. Функция обрабатывает различные форматы ссылок Dropbox, чтобы обеспечить правильное преобразование в прямую ссылку. Модуль важен, поскольку он позволяет пользователям получать прямые ссылки для скачивания файлов с Dropbox, что может быть полезно для автоматизации скачивания файлов или для обмена ссылками, которые сразу же запускают загрузку файла.

## Функции

### `DPBOX`

```python
def DPBOX(url: str) -> str:
    """Преобразует URL Dropbox в прямую ссылку для скачивания.

    Args:
        url (str): URL Dropbox, который необходимо преобразовать.

    Returns:
        str: Прямая ссылка для скачивания файла с Dropbox.

    Example:
        >>> DPBOX('https://www.dropbox.com/s/example/file.pdf?dl=0')
        'https://dl.dropbox.com/s/example/file.pdf?dl=1'
    """
```

**Как работает функция**:

Функция `DPBOX` принимает URL Dropbox и преобразует его в прямую ссылку для скачивания. Она выполняет следующие действия:

1.  **Проверка наличия `dl.dropbox.com` в URL**: Если `dl.dropbox.com` уже есть в URL, функция проверяет наличие параметров `?dl=0` или `?dl=1`. Если `?dl=0` присутствует, заменяет его на `?dl=1`. Если параметров нет, добавляет `?dl=1` в конец URL.

2.  **Проверка наличия `www.dropbox.com` в URL**: Если `www.dropbox.com` присутствует в URL, функция заменяет его на `dl.dropbox.com`. Затем проверяет наличие параметров `?dl=0` или `?dl=1` и, если необходимо, заменяет или добавляет параметр `?dl=1`.

3.  **Обработка других случаев**: Если URL не содержит ни `dl.dropbox.com`, ни `www.dropbox.com`, функция проверяет наличие параметров `?dl=0` или `?dl=1` и, если необходимо, заменяет или добавляет параметр `?dl=1`.

```ascii
    Начало
     │
     ├── "dl.dropbox.com" in url?
     │   ├── Да: Проверка "?dl=0" или "?dl=1"
     │   │   ├── "?dl=0" in url?
     │   │   │   ├── Да: Замена "?dl=0" на "?dl=1"
     │   │   │   └── Нет: DPLINK = url
     │   │   └── Добавление "?dl=1", если отсутствует
     │   │
     │   └── Нет: "www.dropbox.com" in url?
     │       ├── Да: Замена "www.dropbox.com" на "dl.dropbox.com"
     │       │   ├── Проверка "?dl=0" или "?dl=1"
     │       │   │   ├── "?dl=0" in url?
     │       │   │   │   ├── Да: Замена "?dl=0" на "?dl=1"
     │       │   │   │   └── Нет: DPLINK = DPLINK
     │       │   │   └── Добавление "?dl=1", если отсутствует
     │       │   └── Нет: Добавление "?dl=1", если отсутствует
     │       │
     │       └── Нет: Добавление "?dl=1", если отсутствует
     │
     └── Возврат DPLINK
```

**Примеры**:

```python
DPBOX("https://www.dropbox.com/s/example/file.pdf?dl=0")
# 'https://dl.dropbox.com/s/example/file.pdf?dl=1'

DPBOX("https://www.dropbox.com/s/example/file.pdf")
# 'https://dl.dropbox.com/s/example/file.pdf?dl=1'

DPBOX("https://dl.dropbox.com/s/example/file.pdf?dl=0")
# 'https://dl.dropbox.com/s/example/file.pdf?dl=1'

DPBOX("https://dl.dropbox.com/s/example/file.pdf")
# 'https://dl.dropbox.com/s/example/file.pdf?dl=1'