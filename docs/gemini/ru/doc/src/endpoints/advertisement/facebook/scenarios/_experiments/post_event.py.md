# Модуль `post_event.py`

## Обзор

Модуль `post_event.py` предназначен для автоматизации процесса публикации информации о мероприятиях на платформе Facebook. Он включает функциональность для получения данных о мероприятиях из локальных файлов, обработки этих данных и отправки соответствующих публикаций в группы Facebook. Модуль использует веб-драйвер для взаимодействия с Facebook и предполагает, что структура директорий с данными о мероприятиях и группах Facebook организована определенным образом.

## Подробнее

Модуль является частью системы автоматизации маркетинговых кампаний в Facebook. Он предназначен для упрощения и ускорения процесса публикации информации о мероприятиях, что особенно полезно при большом количестве мероприятий и групп.

## Функции

### `post_events`

```python
def post_events():
    """Обрабатывает и отправляет мероприятия на Facebook.

    Функция получает данные о мероприятиях из указанной директории, загружает детали мероприятий из JSON-файлов
    и отправляет их на Facebook. Мероприятия хранятся в структуре директорий под папкой `facebook/events`.

    Raises:
        FileNotFoundError: Если JSON-файл с информацией о мероприятии отсутствует.
    """
    ...
```

**Назначение**: Функция `post_events` автоматизирует процесс публикации информации о мероприятиях в Facebook.

**Как работает функция**:

1.  Инициализирует веб-драйвер Chrome для управления браузером.
2.  Определяет директории с данными о мероприятиях, расположенные в структуре директорий Google Drive, используя функцию `get_directory_names` из модуля `src.utils.file`.
3.  Получает список файлов, содержащих информацию о группах Facebook, используя функцию `get_filenames` из модуля `src.utils.file`.
4.  Создает экземпляр класса `FacebookPromoter` для управления публикациями в Facebook.
5.  Для каждого файла директории, содержащего информацию о мероприятии, загружает данные о мероприятии из JSON-файла с использованием функции `j_loads_ns` из модуля `src.utils.jjson`.
6.  Публикует мероприятие в группах Facebook с использованием метода `process_groups` класса `FacebookPromoter`.

**ASCII схема работы функции**:

```
Начало
     ↓
Инициализация веб-драйвера (Chrome)
     ↓
Получение списка директорий мероприятий
     ↓
Получение списка файлов групп Facebook
     ↓
Создание экземпляра FacebookPromoter
     ↓
Для каждой директории мероприятия:
     ↓
Загрузка данных о мероприятии из JSON
     ↓
Публикация мероприятия в группах Facebook
     ↓
Конец
```

**Примеры**:

```python
post_events()
```

### `post_to_my_group`

```python
def post_to_my_group(event):
    """"""
    ...
```

**Назначение**: Функция `post_to_my_group` публикует информацию о мероприятии в указанной группе Facebook.

**Как работает функция**:

1.  Загружает информацию о группах Facebook из JSON-файла `my_managed_groups.json` с использованием функции `j_loads_ns`.
2.  Инициализирует веб-драйвер Chrome для управления браузером.
3.  Перебирает группы Facebook, информацию о которых загрузила ранее.
4.  Формирует URL для публикации мероприятия в группе, используя функцию `get_event_url`.
5.  Переходит по сформированному URL с использованием веб-драйвера.
6.  Публикует мероприятие в группе с использованием функции `post_event`.

**ASCII схема работы функции**:

```
Начало
     ↓
Загрузка информации о группах Facebook из JSON
     ↓
Инициализация веб-драйвера (Chrome)
     ↓
Для каждой группы Facebook:
     ↓
Формирование URL для публикации мероприятия
     ↓
Переход по URL с использованием веб-драйвера
     ↓
Публикация мероприятия в группе
     ↓
Конец
```

**Примеры**:

```python
event = j_loads_ns(gs.path.google_drive / 'aliexpress' / 'events'  / 'sep_11_2024_over60_pricedown' / 'sep_11_2024_over60_pricedown.json')
post_to_my_group(event)