# Анализ кода модуля `e_116.md`

**Качество кода**
8
- Плюсы
    - Код представляет собой описание задачи Project Euler, что соответствует заданию.
    - Текст задачи хорошо структурирован, что упрощает понимание.
- Минусы
    - Отсутствует исполняемый код.
    - Нет комментариев, форматированных под reStructuredText.
    - Необходимо добавить код, решающий поставленную задачу.

**Рекомендации по улучшению**

1.  **Добавить исполняемый код:** Необходимо предоставить реализацию на Python, которая решает поставленную задачу.
2.  **Форматирование комментариев:** Все комментарии и описания должны быть переформатированы в reStructuredText (RST).
3.  **Логирование:** Добавить логирование для отслеживания ошибок и процесса выполнения.
4.  **Документирование кода:** Добавить docstring к функциям и классам с использованием стандарта RST.
5.  **Импорты:** Добавить необходимые импорты, если это необходимо.
6.  **Обработка ошибок:** Использовать logger.error для обработки ошибок, избегая стандартных `try-except` блоков.
7.  **Рефакторинг:** Упростить код, где это возможно, делая его более читаемым и поддерживаемым.

**Оптимизированный код**

```python
"""
Решение задачи 116 Project Euler - Подсчет способов размещения плиток.
===================================================================

Этот модуль содержит функции для решения задачи Project Euler #116,
которая касается подсчета количества способов размещения плиток
различных размеров на линии из черных квадратов.

Функция `count_ways` вычисляет количество способов размещения плиток
заданного размера, а функция `count_ways_multi` вычисляет количество
способов размещения плиток разных размеров.

Пример использования
--------------------

Для расчета количества способов заполнения линии из 50 черных квадратов
красными плитками размером 2:

.. code-block:: python

    ways_red = count_ways(50, 2)
    print(f"Количество способов с красными плитками: {ways_red}")

Для расчета количества способов заполнения линии из 50 черных квадратов
красными плитками размером 2, зелеными размером 3 и синими размером 4:

.. code-block:: python

    ways_multi = count_ways_multi(50, [2, 3, 4])
    print(f"Количество способов с красными, зелеными и синими плитками: {ways_multi}")
"""

from src.logger.logger import logger # Импорт логгера

def count_ways(length: int, tile_size: int) -> int:
    """
    Вычисляет количество способов заполнения строки черных квадратов
    плитками заданного размера.

    :param length: Длина строки черных квадратов.
    :param tile_size: Размер плитки.
    :return: Количество способов заполнения.
    """
    if length < 0 or tile_size <= 0: # Проверка на некорректные значения
        logger.error(f"Некорректные значения: length={length}, tile_size={tile_size}")
        return 0
    
    if length == 0:  # Если длина 0, то существует 1 способ ничего не делать
        return 1
    
    dp = [0] * (length + 1) # Инициализация массива для динамического программирования
    dp[0] = 1  # Базовое значение - пустая строка имеет 1 способ

    for i in range(1, length + 1): # Код выполняет итерацию по всем позициям в строке
        dp[i] = dp[i - 1] # Рассматривается вариант без использования плитки в текущей позиции
        if i >= tile_size:  # Код проверяет возможность размещения плитки
            dp[i] += dp[i - tile_size] # Подсчитывает количество способов, если плитка размещена

    return dp[length] - 1  # Код возвращает количество способов минус способ без плиток


def count_ways_multi(length: int, tile_sizes: list[int]) -> int:
    """
    Вычисляет количество способов заполнения строки черных квадратов
    плитками разных размеров.

    :param length: Длина строки черных квадратов.
    :param tile_sizes: Список размеров плиток.
    :return: Количество способов заполнения.
    """
    if length < 0: # Проверка на некорректные значения длины
        logger.error(f"Некорректное значение длины: length={length}")
        return 0
    
    dp = [0] * (length + 1) # Инициализация массива для динамического программирования
    dp[0] = 1 # Базовое значение - пустая строка имеет 1 способ

    for i in range(1, length + 1): # Код выполняет итерацию по всем позициям в строке
        dp[i] = dp[i - 1] # Рассматривается вариант без использования плитки в текущей позиции
        for size in tile_sizes: # Перебираем все возможные размеры плиток
            if i >= size: # Код проверяет возможность размещения плитки
                dp[i] += dp[i - size] # Подсчитывает количество способов, если плитка размещена

    return dp[length] - 1 # Код возвращает количество способов минус способ без плиток

if __name__ == '__main__':
    # Код для проверки работы функций
    length = 50  # Длина строки
    
    # Рассчитываем количество способов с красными плитками размером 2
    ways_red = count_ways(length, 2) # Код вызывает функцию count_ways с длинной 50 и размером плитки 2
    print(f"Количество способов с красными плитками: {ways_red}")
    
    # Рассчитываем количество способов с плитками размером 2, 3 и 4
    ways_multi = count_ways_multi(length, [2, 3, 4]) # Код вызывает функцию count_ways_multi с длинной 50 и размерами плиток 2, 3, 4
    print(f"Количество способов с красными, зелеными и синими плитками: {ways_multi}")
```