# Документация модуля `src.endpoints.advertisement.facebook.post_message_async`

## Обзор

Этот модуль содержит функции для автоматизации процесса публикации сообщений на Facebook, включая отправку заголовка и описания, загрузку медиафайлов и управление процессом продвижения поста. Скрипт предназначен для взаимодействия со страницей Facebook через веб-драйвер.

## Подробней

Этот модуль является частью системы автоматизации маркетинговых кампаний в Facebook. Он предоставляет набор функций, которые позволяют программно публиковать контент на странице Facebook, включая заголовок, описание и медиафайлы. Основная цель - автоматизировать рутинные задачи, связанные с ведением рекламных кампаний, такие как загрузка контента и обновление подписей к изображениям. Расположение файла `hypotez/src/endpoints/advertisement/facebook/scenarios/post_message_async.ru.md` указывает на то, что этот модуль является частью более широкой системы, предназначенной для управления рекламными кампаниями в Facebook.

## Содержание

- [Функции](#Функции)
    - [`post_title`](#post_title)
    - [`upload_media`](#upload_media)
    - [`update_images_captions`](#update_images_captions)
    - [`promote_post`](#promote_post)

## Функции

### `post_title`

```python
def post_title(d: Driver, category: SimpleNamespace) -> bool:
    """
    Отправляет заголовок и описание кампании в поле сообщения на Facebook.

    Args:
        d (Driver): Экземпляр `Driver` для взаимодействия с веб-страницей.
        category (SimpleNamespace): Категория, содержащая заголовок и описание для отправки.

    Returns:
        bool: `True`, если заголовок и описание были успешно отправлены, иначе `None`.
    """
    ...
```

**Как работает функция**:

Функция `post_title` отправляет заголовок и описание кампании в поле сообщения на Facebook. Она использует экземпляр `Driver` для взаимодействия с веб-страницей и объект `SimpleNamespace` `category`, содержащий заголовок и описание.

Внутри функции происходят следующие действия:
A.  Получение заголовка и описания из объекта `category`.
B.  Поиск поля для ввода текста на странице Facebook.
C.  Ввод заголовка и описания в найденное поле.
D.  Проверка успешности отправки сообщения.
E.  Возврат `True`, если отправка прошла успешно, иначе `None`.

**Параметры**:

- `d` (Driver): Экземпляр `Driver`, представляющий веб-драйвер для взаимодействия с браузером. Используется для поиска элементов на странице и ввода текста.
- `category` (SimpleNamespace): Объект, содержащий атрибуты `title` (заголовок кампании) и `description` (описание кампании). Эти атрибуты используются для заполнения поля сообщения на Facebook.

**Возвращает**:

- `bool`: Возвращает `True`, если заголовок и описание были успешно отправлены, иначе `None`.

### `upload_media`

```python
def upload_media(d: Driver, products: List[SimpleNamespace], no_video: bool = False) -> bool:
    """
    Загружает медиафайлы на пост Facebook.

    Args:
        d (Driver): Экземпляр `Driver` для взаимодействия с веб-страницей.
        products (List[SimpleNamespace]): Список продуктов, содержащих пути к медиафайлам.
        no_video (bool, optional): Флаг, указывающий, следует ли пропустить загрузку видео. По умолчанию `False`.

    Returns:
        bool: `True`, если медиафайлы были успешно загружены, иначе `None`.
    """
    ...
```

**Как работает функция**:

Функция `upload_media` загружает медиафайлы (изображения и видео) на пост Facebook. Она принимает экземпляр `Driver` для взаимодействия с веб-страницей, список продуктов (`products`), содержащих пути к медиафайлам, и флаг `no_video`, указывающий, следует ли пропустить загрузку видео.

Внутри функции происходят следующие действия:
A.  Перебор списка продуктов.
B.  Для каждого продукта проверяется наличие пути к изображению и видео.
C.  Медиафайлы загружаются на страницу Facebook с использованием методов веб-драйвера.
D.  Если `no_video` установлен в `True`, загрузка видео пропускается.
E.  Проверяется успешность загрузки каждого файла.
F.  Возвращает `True`, если все медиафайлы были успешно загружены, иначе `None`.

**Параметры**:

- `d` (Driver): Экземпляр `Driver`, представляющий веб-драйвер для управления браузером.
- `products` (List[SimpleNamespace]): Список объектов `SimpleNamespace`, каждый из которых содержит информацию о продукте, включая пути к медиафайлам (например, `local_image_path`, `local_video_path`).
- `no_video` (bool, optional): Флаг, указывающий, следует ли пропускать загрузку видео. По умолчанию `False`. Если `True`, загрузка видео будет пропущена.

**Возвращает**:

- `bool`: Возвращает `True`, если медиафайлы были успешно загружены, иначе `None`.

### `update_images_captions`

```python
def update_images_captions(d: Driver, products: List[SimpleNamespace], textarea_list: List[WebElement]) -> None:
    """
    Асинхронно добавляет описания к загруженным медиафайлам.

    Args:
        d (Driver): Экземпляр `Driver` для взаимодействия с веб-страницей.
        products (List[SimpleNamespace]): Список продуктов с деталями для обновления.
        textarea_list (List[WebElement]): Список текстовых полей, куда добавляются подписи.
    """
    ...
```

**Как работает функция**:

Функция `update_images_captions` добавляет описания к загруженным медиафайлам на Facebook. Она принимает экземпляр `Driver` для взаимодействия с веб-страницей, список продуктов (`products`) с деталями для обновления, и список текстовых полей (`textarea_list`), куда добавляются подписи.

Внутри функции происходят следующие действия:
A.  Перебор списка продуктов.
B.  Для каждого продукта извлекается описание.
C.  Описание добавляется в соответствующее текстовое поле (`textarea_list`).
D.  Выполняются асинхронные операции для обновления подписей.

**Параметры**:

- `d` (Driver): Экземпляр `Driver`, представляющий веб-драйвер для управления браузером.
- `products` (List[SimpleNamespace]): Список объектов `SimpleNamespace`, каждый из которых содержит информацию о продукте, включая описание для добавления к медиафайлу.
- `textarea_list` (List[WebElement]): Список веб-элементов (`WebElement`), представляющих текстовые поля, в которые добавляются подписи.

**Возвращает**:

- `None`: Функция ничего не возвращает.

### `promote_post`

```python
def promote_post(d: Driver, category: SimpleNamespace, products: List[SimpleNamespace], no_video: bool = False) -> bool:
    """
    Управляет процессом продвижения поста с заголовком, описанием и медиафайлами.

    Args:
        d (Driver): Экземпляр `Driver` для взаимодействия с веб-страницей.
        category (SimpleNamespace): Детали категории, используемые для заголовка и описания поста.
        products (List[SimpleNamespace]): Список продуктов, содержащих медиа и детали для публикации.
        no_video (bool, optional): Флаг, указывающий, следует ли пропустить загрузку видео. По умолчанию `False`.

    Returns:
        bool: `True`, если пост был успешно продвинут, иначе `None`.
    """
    ...
```

**Как работает функция**:

Функция `promote_post` управляет процессом продвижения поста на Facebook, включая отправку заголовка и описания, загрузку медиафайлов и обновление подписей. Она принимает экземпляр `Driver` для взаимодействия с веб-страницей, детали категории (`category`) для заголовка и описания, список продуктов (`products`), содержащих медиа и детали для публикации, и флаг `no_video`, указывающий, следует ли пропустить загрузку видео.

Внутри функции происходят следующие действия:
A.  Вызов функции `post_title` для отправки заголовка и описания.
B.  Вызов функции `upload_media` для загрузки медиафайлов.
C.  Вызов функции `update_images_captions` для обновления подписей к изображениям.
D.  Завершение процесса продвижения поста.
E.  Возвращает `True`, если пост был успешно продвинут, иначе `None`.

**Параметры**:

- `d` (Driver): Экземпляр `Driver`, представляющий веб-драйвер для управления браузером.
- `category` (SimpleNamespace): Объект, содержащий детали категории, используемые для заголовка и описания поста.
- `products` (List[SimpleNamespace]): Список объектов `SimpleNamespace`, каждый из которых содержит информацию о продукте, включая медиафайлы и описания.
- `no_video` (bool, optional): Флаг, указывающий, следует ли пропускать загрузку видео. По умолчанию `False`.

**Возвращает**:

- `bool`: Возвращает `True`, если пост был успешно продвинут, иначе `None`.