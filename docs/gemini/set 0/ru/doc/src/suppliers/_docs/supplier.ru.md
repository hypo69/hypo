# Класс `Supplier`

## Обзор

Класс `Supplier` служит основой для работы с поставщиками данных (например, Amazon, AliExpress, Walmart). Он предоставляет общие методы и атрибуты, которые могут быть переопределены для работы с конкретными поставщиками.

## Оглавление

- [Класс `Supplier`](#класс-supplier)
    - [Обзор](#обзор)
    - [Атрибуты](#атрибуты)
    - [Методы](#методы)
    - [Как это работает](#как-это-работает)
    - [Пример использования](#пример-использования)
    - [Визуальное представление](#визуальное-представление)
    - [Заключение](#заключение)


## Атрибуты

### `supplier_id`

Уникальный идентификатор поставщика.

### `supplier_prefix`

Префикс для поставщика (например, `aliexpress`, `amazon`).

### `supplier_settings`

Настройки для поставщика, загруженные из файла конфигурации.

### `locale`

Код локализации (например, `en`, `ru`).

### `price_rule`

Правило для расчета цены (например, добавление НДС или скидки).

### `related_modules`

Модуль, содержащий специфические для поставщика функции.

### `scenario_files`

Список файлов сценариев, которые должны быть выполнены.

### `current_scenario`

Текущий сценарий выполнения.

### `login_data`

Данные для входа на сайт поставщика (если требуется).

### `locators`

Локаторы для веб-элементов на страницах сайта поставщика.

### `driver`

Веб-драйвер для взаимодействия с сайтом поставщика.

### `parsing_method`

Метод парсинга данных (например, `webdriver`, `api`, `xls`, `csv`).


## Методы

### `__init__`

Конструктор класса. Инициализирует атрибуты на основе префикса поставщика и других параметров.

```python
def __init__(self, supplier_prefix: str, locale: str = 'en', webdriver: str | 'Driver' | bool = 'default', *attrs, **kwargs):
    """
    Args:
        supplier_prefix (str): Префикс поставщика.
        locale (str, optional): Код локализации. По умолчанию 'en'.
        webdriver (str | Driver | bool, optional): Тип веб-драйвера. По умолчанию 'default'.
    """
    # Инициализация префикса поставщика, локали и веб-драйвера
```

### `_payload`

Загружает настройки поставщика, конфигурационные файлы и инициализирует веб-драйвер.

```python
def _payload(self, webdriver: str | 'Driver' | bool, *attrs, **kwargs) -> bool:
    """
    Args:
        webdriver (str | Driver | bool): Тип веб-драйвера.
        *attrs: Дополнительные атрибуты.
        **kwargs: Дополнительные аргументы.

    Returns:
        bool: Успешность загрузки.

    Raises:
        Exception: Возникает при ошибке загрузки.
    """
    # Загрузка конфигурационных файлов и инициализация веб-драйвера
```

### `login`

Метод для выполнения входа на сайт поставщика (если требуется).

```python
def login(self) -> bool:
    """
    Returns:
        bool: Успешность входа.
    """
    # Выполнение входа на сайт
```

### `run_scenario_files`

Запускает выполнение файлов сценариев.

```python
def run_scenario_files(self, scenario_files: str | list[str] = None) -> bool:
    """
    Args:
        scenario_files (str | list[str], optional): Файлы сценариев. По умолчанию None.

    Returns:
        bool: Успешность выполнения.
    """
    # Выполнение сценариев из файлов
```

### `run_scenarios`

Запускает один или несколько сценариев.

```python
def run_scenarios(self, scenarios: dict | list[dict]) -> bool:
    """
    Args:
        scenarios (dict | list[dict]): Сценарии для выполнения.

    Returns:
        bool: Успешность выполнения.
    """
    # Выполнение заданных сценариев
```


## Как это работает

1. **Инициализация**: При создании объекта `Supplier`, конструктор `__init__` загружает настройки поставщика и инициализирует необходимые компоненты.
2. **Загрузка конфигурации**: Метод `_payload` загружает конфигурации для данного поставщика, включая локаторы для страниц и сценарии выполнения.
3. **Вход на сайт**: Метод `login` используется для выполнения процесса входа на сайт поставщика, если это требуется.
4. **Выполнение сценариев**: Методы `run_scenario_files` и `run_scenarios` запускают сценарии, которые определяют действия для выполнения (например, сбор данных).


## Пример использования

```python
# Создаем объект для поставщика 'aliexpress'
supplier = Supplier(supplier_prefix='aliexpress', locale='en', webdriver='chrome')

# Выполняем вход на сайт поставщика
supplier.login()

# Запускаем сценарии из файлов
supplier.run_scenario_files(['example_scenario.json'])

# Или запускаем сценарии по определенным условиям
supplier.run_scenarios([{'action': 'scrape', 'target': 'product_list'}])
```


## Визуальное представление

Класс `Supplier` представляет собой основу для создания классов для работы с различными поставщиками данных. Он определяет общие свойства и методы, которые могут быть переопределены в конкретных реализациях.


## Заключение

Класс `Supplier` — обобщенная модель для работы с данными различных поставщиков, инкапсулирующая общую логику взаимодействия с сайтом, настройку драйвера, управление сценарием и парсинг данных.  Конкретные реализации поставщиков будут наследовать этот класс и добавлять свою специфическую логику.