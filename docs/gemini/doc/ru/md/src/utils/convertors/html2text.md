# Модуль `hypotez/src/utils/convertors/html2text.py`

## Обзор

Модуль `html2text` преобразует HTML-код в эквивалентный текст в формате Markdown. Поддерживает различные опции форматирования, такие как перенос длинных строк, отображение ссылок и изображений, обработку списков, блоков цитат и т.д.  Модуль включает в себя функции для работы с HTML-сущностями, стилями, а также для обработки специфических элементов HTML, встречающихся в документах Google Docs.

## Параметры

* `MODE` (str, необязательно): Режим работы модуля. По умолчанию 'dev'.
* `UNICODE_SNOB` (int, необязательно): Если 1, использует символы Юникода вместо их ASCII-заменителей. По умолчанию 0.
* `LINKS_EACH_PARAGRAPH` (int, необязательно): Если 1, ссылки выводятся после каждого абзаца, а не в конце. По умолчанию 0.
* `BODY_WIDTH` (int, необязательно): Ширина переноса длинных строк в символах. 0 для отключения переноса. По умолчанию 78.
* `SKIP_INTERNAL_LINKS` (bool, необязательно): Если True, игнорирует внутренние ссылки (href="#local-anchor"). По умолчанию True.
* `INLINE_LINKS` (bool, необязательно): Если True, ссылки и изображения отображаются встроеным образом. По умолчанию True.
* `GOOGLE_LIST_INDENT` (int, необязательно): Количество пикселей, на которое Google отступает вложенные списки. По умолчанию 36.
* `IGNORE_ANCHORS` (bool, необязательно): Если True, игнорирует ссылки. По умолчанию False.
* `IGNORE_IMAGES` (bool, необязательно): Если True, игнорирует изображения. По умолчанию False.

## Функции

### `has_key`

**Описание**: Проверяет, существует ли ключ в словаре или объекте с методом `has_key()`.

**Параметры**:
- `x` (object): Объект, в котором ищется ключ.
- `y` (object): Ключ, который ищется.

**Возвращает**:
- `bool`: True, если ключ найден, иначе False.

### `name2cp`

**Описание**: Преобразует имя HTML-сущности в ее соответствующий код символа.

**Параметры**:
- `k` (str): Имя HTML-сущности.

**Возвращает**:
- `int`: Код символа.

### `charref`

**Описание**: Преобразует числовое представление HTML-сущности в символ.

**Параметры**:
- `name` (str): Числовое представление HTML-сущности (например, &#32;).

**Возвращает**:
- `str`: Символ, соответствующий коду.

### `entityref`

**Описание**: Преобразует имя HTML-сущности в соответствующий символ.

**Параметры**:
- `c` (str): Имя HTML-сущности.

**Возвращает**:
- `str`: Символ, соответствующий имени.

### `replaceEntities`

**Описание**: Заменяет HTML-сущности в строке на соответствующие символы.

**Параметры**:
- `s` (str): Строка с HTML-сущностями.

**Возвращает**:
- `str`: Строка без HTML-сущностей.

### `unescape`

**Описание**: Декодирует HTML-сущности в строке.

**Параметры**:
- `s` (str): Строка с HTML-сущностями.

**Возвращает**:
- `str`: Строка без HTML-сущностей.

### `onlywhite`

**Описание**: Проверяет, состоит ли строка только из пробельных символов.

**Параметры**:
- `line` (str): Строка, которую необходимо проверить.

**Возвращает**:
- `bool`: True, если строка состоит только из пробельных символов, иначе False.

### `optwrap`

**Описание**: Переносит длинные строки текста по заданной ширине.

**Параметры**:
- `text` (str): Текст, который нужно переносить.

**Возвращает**:
- `str`: Перенос длинных строк текста.

### `hn`

**Описание**: Определяет уровень заголовка по тегу.

**Параметры**:
- `tag` (str): Тег HTML-элемента.

**Возвращает**:
- `int`: Уровень заголовка (1-9), или 0 если не заголовок.

### `dumb_property_dict`

**Описание**: Создает словарь из списка строк вида "свойство:значение".

**Параметры**:
- `style` (str): Строка со стилями.

**Возвращает**:
- `dict`: Словарь свойств.


... (и так далее для всех остальных функций)

## Классы

### `_html2text`

**Описание**: Класс для парсинга HTML-кода и преобразования в Markdown.

**Атрибуты**:
- `out`: Функция для вывода данных.
- `outtextlist`: Список строк вывода.
- `outtext`: Текст вывода.
- `quiet`: Флаг для отключения вывода.
- `p_p`: Количество переносов строки для печати.
- `outcount`: Счетчик вывода.
- `start`: Флаг начала парсинга.
- `space`: Флаг для обработки пробелов.
- `a`: Список ссылок.
- `astack`: Стек ссылок.
- `acount`: Счетчик ссылок.
- `list`: Стек списков.
- `blockquote`: Уровень цитаты.
- `pre`: Флаг для блоков preformatted текста.
- `startpre`: Флаг для начала блока preformatted текста.
- `code`: Флаг для кода.
- `br_toggle`: Флаг для обработки переносов строки.
- `lastWasNL`: Флаг для обработки последней символа.
- `lastWasList`: Флаг для обработки последнего элемента списка.
- `style`: Уровень обработки стилей.
- `style_def`: Словарь стилей.
- `tag_stack`: Стек обработанных тегов.
- `emphasis`: Уровень выделения текста.
- `drop_white_space`: Флаг для пропуска пробелов.
- `inheader`: Флаг для обработки заголовков.
- `abbr_title`: Текущее определение сокращения.
- `abbr_data`: Последний внутренний HTML (для определения сокращения).
- `abbr_list`: Стек сокращений.
- `baseurl`: Базовый URL.

**Методы**:
- `feed`: Обрабатывает фрагмент HTML-кода.
- `outtextf`: Функция для добавления текста в выходной буфер.
- `close`: Закрывает обработку HTML-документа.
- `handle_charref`: Обрабатывает HTML-сущности с числовым значением.
- `handle_entityref`: Обрабатывает HTML-сущности с именем.
- `handle_starttag`: Обрабатывает открывающие теги HTML.
- `handle_endtag`: Обрабатывает закрывающие теги HTML.
- ... (и так далее для всех остальных методов)


```