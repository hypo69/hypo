# HMRABI

## סקירה כללית

משחק "חמורבי" הוא משחק טקסטואלי כלכלי בו השחקן מנהל עיר עתיקה, ומנסה לשרוד ולשגשג בתנאים של משאבים מוגבלים. השחקן מקבל החלטות על קנייה ומכירה של אדמה, חלוקת יבול, זריעה, ועוקב אחר רמת הרעב ומספר האוכלוסייה. המשחק מסתיים אם אוכלוסיית העיר מתה מרעב, או לאחר 10 שנים.

## תוכן עניינים

- [סקירה כללית](#סקירה-כללית)
- [משתנים](#משתנים)
- [לולאה ראשית](#לולאה-ראשית)
- [פונקציות](#פונקציות)

## משתנים

המשתנים העיקריים בשימוש במשחק:

- `year`: (int) השנה הנוכחית.
- `population`: (int) מספר התושבים בעיר.
- `grain`: (int) כמות התבואה הזמינה.
- `land`: (int) כמות השטח בבעלות העיר.

## לולאה ראשית

המשחק מופעל בתוך לולאת `while` שרצה עד שמספר השנה מגיע ל-10 או עד שאוכלוסיית העיר נכחדת. בכל איטרציה של הלולאה:

1.  מוצג מצב המשחק הנוכחי (שנה, אוכלוסייה, תבואה, אדמה).
2.  מחושב מחיר אקראי לאדמה.
3.  השחקן מתבקש לקנות או למכור אדמה.
4.  השחקן מתבקש להזין כמה תבואה להשתמש לזריעה.
5.  מחושב יבול אקראי.
6.  מחושב נזק ממכרסמים (חולדות).
7.  השחקן מתבקש להזין כמה תבואה להקצות להאכלת התושבים.
8.  אם יש מספיק תבואה, האוכלוסייה גדלה, אחרת האוכלוסייה קטנה בהתאם לכמות הרעב.

## פונקציות

אין פונקציות נפרדות מוגדרות בתוכנית זו, כל הלוגיקה של המשחק נמצאת בתוך הלולאה הראשית.

```python
import random

# Инициализация переменных
year = 0          # текущий год
population = 100  # начальное население
grain = 2800      # начальное количество зерна
land = 1000       # начальная площадь земли

print("Добро пожаловать в игру Хаммурапи!")

# Основной игровой цикл, который выполняется пока не пройдет 10 лет или пока все население не вымрет.
while year < 10 and population > 0:
    print(f"\nГод {year + 1}")
    print(f"Население: {population}")
    print(f"Зерно: {grain} бушелей")
    print(f"Земля: {land} акров")

    # Вычисляем случайную цену земли от 15 до 25 бушелей за акр
    land_price = random.randint(15, 25)
    print(f"Цена земли: {land_price} бушелей за акр")

    # Спрашиваем у игрока сколько земли купить или продать.
    while True:
        try:
            land_trade = int(input("Сколько земли купить (+) или продать (-)? "))
            break
        except ValueError:
            print("Пожалуйста, введите целое число.")
    
    # Проверяем, достаточно ли зерна для покупки или земли для продажи. Если нет, просим ввести данные еще раз.
    while True:
        if land_trade > 0 and grain < land_trade * land_price:
            print("Недостаточно зерна для покупки земли.")
            try:
                land_trade = int(input("Сколько земли купить (+) или продать (-)? "))
            except ValueError:
                print("Пожалуйста, введите целое число.")
                continue
            
        elif land_trade < 0 and land < abs(land_trade):
            print("Недостаточно земли для продажи.")
            try:
                land_trade = int(input("Сколько земли купить (+) или продать (-)? "))
            except ValueError:
                print("Пожалуйста, введите целое число.")
                continue
        else:
            break

    # Обновляем количество земли и зерна
    land += land_trade
    grain -= land_trade * land_price
    
    # Спрашиваем сколько зерна посеять
    while True:
        try:
            grain_to_plant = int(input("Сколько зерна использовать для посева? "))
            break
        except ValueError:
            print("Пожалуйста, введите целое число.")
    
    # Проверяем, достаточно ли зерна для посева. Если нет, просим ввести данные еще раз.
    while True:
        if grain < grain_to_plant:
            print("Недостаточно зерна для посева.")
            try:
                grain_to_plant = int(input("Сколько зерна использовать для посева? "))
            except ValueError:
                print("Пожалуйста, введите целое число.")
                continue
        else:
            break
    
    # Вычисляем случайный урожай от 1 до 8 бушелей на акр
    yield_per_acre = random.randint(1, 8)
    harvest = grain_to_plant * yield_per_acre
    grain += harvest
    
    # Вычисляем количество зерна съеденное крысами, от 0 до 10% от всего зерна.
    rats_damage = int(random.random() * 0.1 * grain)
    grain -= rats_damage
    print(f"Крысы съели {rats_damage} бушелей зерна.")

    # Спрашиваем, сколько зерна отдать на пропитание.
    while True:
        try:
            grain_to_feed = int(input("Сколько зерна отдать на пропитание? "))
            break
        except ValueError:
           print("Пожалуйста, введите целое число.")

    # Проверяем, хватит ли зерна на пропитание.
    if grain_to_feed >= population:
        population = min(1000, int(population * 1.1))  # Увеличиваем популяцию на 10%, но не более 1000.
        grain -= grain_to_feed
        print("Все сыты, население растёт!")
    else:
        starved = int(population * (1 - grain_to_feed / population )) # Рассчитываем число умерших от голода, пропорционально недостатку зерна.
        population -= starved
        grain -= grain_to_feed
        print(f"{starved} человек умерло от голода.")
        if population <= 0:
            print("Вы проиграли, все население вымерло от голода!")

    year += 1 # увеличиваем год на 1

if year == 10:
    print("Игра окончена. Прошло 10 лет.")