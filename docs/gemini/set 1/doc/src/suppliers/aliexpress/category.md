# Модуль hypotez/src/suppliers/aliexpress/category.py

## Обзор

Модуль `hypotez/src/suppliers/aliexpress/category.py` предоставляет функции для работы с категориями на сайте AliExpress.  Он содержит функции для получения списков URL товаров в категории, обновления файла сценария с категориями, и взаимодействие с базой данных для работы с категориями.

## Оглавление

- [Функции](#функции)
- [Класс DBAdaptor](#класс-dbadaptor)


## Функции

### `get_list_products_in_category`

**Описание**: Получает список URL товаров в заданной категории. Листает все страницы с товарами в категории, если таковые имеются.

**Параметры**:
- `s` (`Supplier`): Экземпляр класса поставщика, содержащий драйвер и локаторы.

**Возвращает**:
- `list[str, str]`: Список URL товаров в категории. Возвращает пустой список, если в категории нет товаров.


### `get_prod_urls_from_pagination`

**Описание**: Функция собирает ссылки на товары со страницы категории,  переходя по страницам, если таковые имеются.

**Параметры**:
- `s` (`Supplier`): Экземпляр класса поставщика, содержащий драйвер и локаторы.

**Возвращает**:
- `list[str]`: Список URL товаров.


### `update_categories_in_scenario_file`

**Описание**: Функция для сравнения категорий в файле сценария с категориями на сайте AliExpress и обновления файла, если есть изменения.

**Параметры**:
- `s` (`Supplier`): Экземпляр класса поставщика.
- `scenario_filename` (str): Имя файла сценария.

**Возвращает**:
- bool: True, если обновление выполнено успешно.


### `get_list_categories_from_site`

**Описание**: Функция для получения списка категорий с сайта.

**Параметры**:
- `s` (`Supplier`): Экземпляр класса поставщика.
- `scenario_file` (str): Имя файла сценария.
- `brand` (str, optional): Фильтр по бренду.

**Возвращает**:
- `list`: Список категорий.


## Класс DBAdaptor

### `DBAdaptor`

**Описание**: Класс, содержащий методы для взаимодействия с базой данных, выполняя запросы `SELECT`, `INSERT`, `UPDATE` и `DELETE`.


**Методы**:

- `select`: Выполняет запрос `SELECT` для получения данных из таблицы `AliexpressCategory`.
  - `cat_id` (int, optional): ID категории.
  - `parent_id` (int, optional): ID родительской категории.
  - `project_cat_id` (int, optional): ID категории проекта.

- `insert`: Выполняет запрос `INSERT` для добавления новой записи в таблицу `AliexpressCategory`.

- `update`: Выполняет запрос `UPDATE` для обновления записи в таблице `AliexpressCategory`.

- `delete`: Выполняет запрос `DELETE` для удаления записи из таблицы `AliexpressCategory`.


**Примечания**:
- В методах `select`, `insert`, `update` и `delete` используется `CategoryManager` для взаимодействия с базой данных.
- Примеры использования методов содержат псевдокод запросов.
- Документация внутри функций содержит подробные комментарии и пояснения.


**Замечания по коду**:

- Необходимо указать типы данных для параметров и возвращаемых значений.
- Необходимо исправить блоки обработки исключений (`ex` вместо `e`).
- В функции `update_categories_in_scenario_file` необходимо более тщательно проверить корректность работы с JSON данными и предотвратить потенциальные ошибки.