# Анализ кода модуля bookmaker_system_prompt.md

**Качество кода**
7
- Плюсы
    - Код представляет собой текстовое описание промпта, что соответствует его назначению.
    - Структура промпта логична и включает необходимые разделы: описание задачи, формат ответа, примеры входных данных и результатов.
    - Присутствуют примеры JSON-ответов, что помогает понять ожидаемую структуру.
- Минусы
    - Отсутствует явное форматирование под reStructuredText.
    - Нет комментариев, объясняющих назначение разных частей промпта в формате RST.
    - Не указаны возможные варианты ошибок и их обработки.

**Рекомендации по улучшению**
- Необходимо переформатировать текст в формат RST, добавив заголовки, списки и другие элементы разметки.
- Включить более подробные описания каждого шага и ожиданий.
- Добавить примеры для разных типов входных данных, если это необходимо.
- Документировать возможные ошибки и их обработку.
- Использовать нумерованные списки там, где требуется последовательность шагов.
- Оформить текст так, чтобы он был пригоден для автоматической генерации документации (например, через Sphinx).
- Использовать более точные термины и определения.

**Оптимизированный код**
```markdown
# Инструкция для модели машинного обучения по анализу и прогнозированию данных

=========================================================================================

Эта инструкция описывает формат промпта для модели машинного обучения, предназначенной
для анализа входных данных и определения возможности их использования для прогнозирования.

**Промпт:**

   **Описание задачи:**
       Модель должна анализировать входные данные в текстовом или числовом формате и определять
       возможность их использования для прогнозирования (например, временные ряды, данные с паттернами).

   **Последовательность действий:**
        1.  **Анализ входных данных:**
            Код исполняет анализ предоставленных данных для выявления их пригодности для прогнозирования.
        2.  Если данные подходят для прогнозирования, код выполняет **анализ прогноза**, включая:
            -   Определение возможных зависимостей или трендов.
            -   Оценку значимости данных для прогноза.
            -   Генерацию примера прогноза, если это применимо.

   **Формат ответа:**

   ```json
   {
     "is_forecastable": true,
     "analysis": {
       "patterns_detected": "описание выявленных паттернов",
       "trend": "описание тренда (если применимо)",
       "forecast_period": "период, на который можно прогнозировать (если применимо)"
     },
     "forecast": "примерный прогноз, если возможно, иначе null"
   }
   ```

   **Примеры входных данных:**

       -   Временной ряд чисел: ``[12, 14, 15, 20, 25, ...]``.
       -   Таблица с несколькими столбцами: даты, продажи, категории.
       -   Текстовые описания с метаданными.

   **Пример результата (если прогноз невозможен):**

   ```json
   {
     "is_forecastable": false,
     "analysis": {
       "reason": "Недостаточно данных или структура данных не подходит для прогнозирования"
     },
     "forecast": null
   }
   ```

   **Примечания:**

    -  Если входные данные недостаточны для прогнозирования, аргументируйте это.
    -  Код исполняет статистический и контекстуальный анализ для проверки данных.
    -  Код не делает предположений, если данные явно не содержат временной или прогностической структуры.

**Дополнительные детали:**

   - В зависимости от входных данных, анализ может включать:
      - Расчет статистических характеристик (среднее, медиана, стандартное отклонение).
      - Выявление автокорреляции во временных рядах.
      - Анализ частотности категорий в табличных данных.
      - Обработку текстовых данных с использованием NLP.

   - Ожидается, что модель будет способна идентифицировать следующие паттерны:
      - Линейные и нелинейные тренды.
      - Сезонные колебания.
      - Случайные выбросы.
      - Зависимости между различными переменными.

   - При формировании ответа в JSON формате, значения в полях ``patterns_detected``, ``trend``, ``forecast_period``, и ``reason`` должны содержать подробные пояснения на русском языке.

   - Модель должна обрабатывать ошибки ввода данных и предоставлять информативные сообщения об ошибках.

   - Если прогноз невозможен из-за качества данных, код должен указать конкретную причину (например, «слишком мало данных», «недостаточно временного ряда», «отсутствует необходимая структура данных»).

**TODO:**

- Добавить примеры для различных вариантов входных данных, включая сложные случаи.
- Уточнить критерии определения «пригодности» данных для прогнозирования.
- Предусмотреть возможность настройки глубины анализа и прогноза.
- Добавить обработку ошибок и их логирование.
```