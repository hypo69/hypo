# Модуль для отправки мероприятий в группы Facebook

## Обзор

Модуль `src.endpoints.advertisement.facebook.start_event` предназначен для автоматической отправки мероприятий в группы Facebook с использованием веб-драйвера. Он использует класс `FacebookPromoter` для управления процессом продвижения мероприятий и позволяет настраивать параметры продвижения, такие как список групп, в которые будут отправляться мероприятия, и имена мероприятий.

## Подробней

Этот модуль является отправной точкой для запуска процесса автоматического продвижения мероприятий в Facebook. Он инициализирует веб-драйвер, загружает конфигурации групп и событий, а затем запускает цикл, в котором мероприятия отправляются в группы через заданные интервалы времени. Модуль также обрабатывает прерывания с клавиатуры, позволяя остановить процесс продвижения.

## Функции

### `FacebookPromoter`

```python
promoter:FacebookPromoter = FacebookPromoter(d, group_file_paths=filenames, no_video = True)
```

**Назначение**: Создает экземпляр класса `FacebookPromoter`, который отвечает за выполнение задач продвижения мероприятий в Facebook.

**Параметры**:

-   `d` (Driver): Экземпляр веб-драйвера, используемый для взаимодействия с Facebook.
-   `group_file_paths` (list[str]): Список путей к файлам, содержащим информацию о группах Facebook, в которые будут отправляться мероприятия.
-   `no_video` (bool): Флаг, указывающий, следует ли исключать видео из продвигаемых материалов.

**Как работает функция**:

1.  Создается экземпляр класса `FacebookPromoter` с переданными параметрами.
2.  Этот экземпляр будет использоваться для запуска и управления процессом продвижения мероприятий.

```
A -- Создание промоутера
```

**Примеры**:

```python
promoter:FacebookPromoter = FacebookPromoter(d, group_file_paths=filenames, no_video = True)
```

### `promoter.run_events`

```python
promoter.run_events(events_names = events_names, group_file_paths = filenames)
```

**Назначение**: Запускает процесс отправки мероприятий в группы Facebook.

**Параметры**:

-   `events_names` (list): Список имен мероприятий, которые будут отправлены в группы.
-   `group_file_paths` (list[str]): Список путей к файлам, содержащим информацию о группах Facebook, в которые будут отправляться мероприятия.

**Как работает функция**:

1.  Функция `run_events` класса `FacebookPromoter` вызывается с параметрами `events_names` и `group_file_paths`.
2.  Внутри этой функции происходит итерация по списку мероприятий и групп, и для каждой комбинации выполняется отправка мероприятия в группу.
3.  Функция использует веб-драйвер для автоматизации действий в Facebook, таких как вход в систему, переход в группу и публикация мероприятия.

```
A -- Запуск событий
```

**Примеры**:

```python
promoter.run_events(events_names = events_names, group_file_paths = filenames)
```

### time.sleep

```python
time.sleep(7200)
```

**Назначение**: Приостанавливает выполнение программы на заданное количество секунд (в данном случае, 7200 секунд, что равно 2 часам).

**Параметры**:

-   `7200` (int): Количество секунд, на которое нужно приостановить выполнение программы.

**Как работает функция**:

1.  Функция `sleep` из модуля `time` приостанавливает выполнение текущего потока на указанное количество секунд.
2.  Это позволяет контролировать частоту отправки мероприятий и избегать перегрузки системы.

```
A -- Приостановка работы
```

**Примеры**:

```python
time.sleep(7200)
```

### Исключение KeyboardInterrupt

```python
except KeyboardInterrupt:
    logger.info("Campaign promotion interrupted.")
```

**Назначение**: Обрабатывает прерывание с клавиатуры (например, нажатие Ctrl+C), позволяя безопасно остановить процесс продвижения мероприятий.

**Как работает функция**:

1.  Если во время выполнения цикла происходит прерывание с клавиатуры, возбуждается исключение `KeyboardInterrupt`.
2.  Блок `except` перехватывает это исключение и выполняет код, который останавливает процесс продвижения.
3.  В данном случае, в лог записывается сообщение о том, что продвижение кампании было прервано.

```
A -- Запуск событий
|
-- C -- Прерывание с клавиатуры
|
D -- Логирование о прерывании
```

**Примеры**:

```python
except KeyboardInterrupt:
    logger.info("Campaign promotion interrupted.")