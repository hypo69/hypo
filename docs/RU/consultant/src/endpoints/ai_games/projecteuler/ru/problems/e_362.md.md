# Анализ кода модуля e_362.md

**Качество кода**
8
- Плюсы
    - Код представляет собой описание задачи, что соответствует требованиям.
    - Описание задачи достаточно четкое и понятное.
- Минусы
    - Отсутствует реализация решения задачи.
    - Нет docstring, описания переменных и функций в стиле reStructuredText.
    - Не используются логирование ошибок.
    - Нет примера кода.

**Рекомендации по улучшению**
1. Необходимо добавить реализацию решения задачи на Python.
2. Добавить docstring в стиле reStructuredText для описания модуля, функций и переменных.
3. Использовать логирование для обработки ошибок.
4. Включить пример кода, демонстрирующий решение задачи.
5. Необходимо добавить импорты.
6. Использовать `j_loads` или `j_loads_ns` из `src.utils.jjson` для чтения файлов, если это требуется.
7. Комментировать каждый блок кода с использованием `#`, поясняя его назначение.

**Оптимизированный код**
```python
"""
Модуль для решения задачи 362 проекта Эйлер.
=========================================================================================

Этот модуль содержит решение задачи Project Euler 362, которая заключается в нахождении
количества целых чисел от 1 до n, у которых количество делителей является квадратом.

Пример использования
--------------------

.. code-block:: python

    result = solve_problem_362(10**15)
    print(f"Количество чисел с квадратным количеством делителей: {result}")
"""

from math import isqrt
from src.logger.logger import logger  # Импортируем логгер
# from src.utils.jjson import j_loads, j_loads_ns # TODO импортировать, если требуется работа с json

def is_perfect_square(n: int) -> bool:
    """
    Проверяет, является ли число полным квадратом.

    :param n: Число для проверки.
    :return: True, если число является полным квадратом, иначе False.
    """
    if n < 0:
        return False
    root = isqrt(n)
    return root * root == n

def count_divisors(n: int) -> int:
    """
    Подсчитывает количество делителей числа.

    :param n: Число, для которого необходимо подсчитать делители.
    :return: Количество делителей числа.
    """
    count = 0
    for i in range(1, isqrt(n) + 1):
        if n % i == 0:
            count += 2
            if i * i == n:
                count -= 1
    return count

def solve_problem_362(limit: int) -> int:
    """
    Решает задачу Project Euler 362.

    Находит количество целых чисел m, таких что 1 <= m <= limit, у которых d(m) является полным квадратом.

    :param limit: Верхняя граница для поиска чисел.
    :return: Количество чисел с квадратным количеством делителей.
    """
    count = 0
    for m in range(1, limit + 1):
        try:
            # код исполняет подсчет делителей числа m
            divisor_count = count_divisors(m)
            # код исполняет проверку, является ли количество делителей квадратом
            if is_perfect_square(divisor_count):
                 count += 1
        except Exception as e:
            logger.error(f"Произошла ошибка при вычислении для m = {m}: {e}")
            continue  # Продолжаем проверку других чисел, при возникновении ошибки для текущего
    return count


if __name__ == "__main__":
    # Код исполняет вызов функции solve_problem_362 с предельным значением 10^15 и выводит результат
    result = solve_problem_362(10**15)
    print(f"Количество чисел с квадратным количеством делителей: {result}")

# TODO добавить пример использования с json
#     try:
#         data = j_loads_ns({"test":"test"})
#         print(f"{data=}")
#     except Exception as ex:
#         logger.error(f"Ошибка чтения json {ex}")
```