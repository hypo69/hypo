# Обработчики бота

## Обзор

Модуль обрабатывает команды, переданные телеграм-боту, такие как работа с ссылками OneTab и выполнение связанных сценариев.

## Содержание

- [Классы](#классы)
    - [`BotHandler`](#bot_handler)
- [Функции](#функции)
    - [`handle_message`](#handle_message)
    - [`handle_url`](#handle_url)
    - [`handle_next_command`](#handle_next_command)
    - [`fetch_target_urls_onetab`](#fetch_target_urls_onetab)

## Классы

### `BotHandler`

**Описание**: Исполнитель команд, полученных ботом.

**Методы**:
- `__init__`: Инициализирует обработчик событий телеграм-бота.
- `handle_message`:  Обрабатывает текстовые сообщения с URL-маршрутизацией.
- `handle_url`: Обрабатывает URL, присланные пользователем.
- `handle_next_command`: Обрабатывает команду '--next' и её аналоги.
- `fetch_target_urls_onetab`: Извлекает целевые URL с указанного URL OneTab.

#### `__init__`

**Описание**: Инициализация обработчика событий телеграм-бота.

**Параметры**:
- `webdriver_name` (Optional[str], optional): Название веб-драйвера для запуска. По умолчанию `None`.

#### `handle_message`

**Описание**: Обрабатывает текстовые сообщения с URL-маршрутизацией.

**Параметры**:
- `update` (Update): Объект обновления из телеграма.
- `context` (CallbackContext): Контекст выполнения.

**Возвращает**:
- `None`: Функция ничего не возвращает.

#### `handle_url`

**Описание**: Обработка URL, присланного пользователем.

**Параметры**:
- `update` (Update): Объект обновления из телеграма.
- `context` (CallbackContext): Контекст выполнения.

**Возвращает**:
- `Any`: Возвращает `True` если сценарий завершился удачно, в противном случае ничего не возвращает.

#### `handle_next_command`

**Описание**: Обработка команды `‘--next’` и её аналогов.

**Параметры**:
- `update` (Update): Объект обновления из телеграма.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Вызывает исключения**:
- `Exception`: Возникает при ошибке чтения вопросов.

#### `fetch_target_urls_onetab`

**Описание**: Извлечение целевых URL с указанного URL OneTab.

Выполняется GET-запрос к указанному URL, парсится HTML-контент и извлекаются ссылки из тегов `<a>` с классом `tabLink`.

**Параметры**:
- `one_tab_url` (str): URL страницы OneTab.

**Возвращает**:
- `list[str] | bool`: Список целевых URL или `None` при ошибке.

**Вызывает исключения**:
- `requests.exceptions.RequestException`: Возникает при ошибке выполнения запроса.
## Функции
### `handle_message`

**Описание**: Обрабатывает текстовые сообщения с URL-маршрутизацией.

**Параметры**:
- `update` (Update): Объект обновления из телеграма.
- `context` (CallbackContext): Контекст выполнения.

**Возвращает**:
- `None`: Функция ничего не возвращает.

### `handle_url`

**Описание**: Обработка URL, присланного пользователем.

**Параметры**:
- `update` (Update): Объект обновления из телеграма.
- `context` (CallbackContext): Контекст выполнения.

**Возвращает**:
- `Any`: Возвращает `True` если сценарий завершился удачно, в противном случае ничего не возвращает.

### `handle_next_command`

**Описание**: Обработка команды `'--next'` и её аналогов.

**Параметры**:
- `update` (Update): Объект обновления из телеграма.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Вызывает исключения**:
- `Exception`: Возникает при ошибке чтения вопросов.

### `fetch_target_urls_onetab`

**Описание**: Извлечение целевых URL с указанного URL OneTab.

Выполняется GET-запрос к указанному URL, парсится HTML-контент и извлекаются ссылки из тегов `<a>` с классом `tabLink`.

**Параметры**:
- `one_tab_url` (str): URL страницы OneTab.

**Возвращает**:
- `list[str] | None`: Список целевых URL или `None` при ошибке.

**Вызывает исключения**:
- `requests.exceptions.RequestException`: Возникает при ошибке выполнения запроса.