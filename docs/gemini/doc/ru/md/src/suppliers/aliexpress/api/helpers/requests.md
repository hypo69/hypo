# Модуль hypotez/src/suppliers/aliexpress/api/helpers/requests.py

## Обзор

Данный модуль содержит вспомогательные функции для выполнения запросов к API AliExpress. Он предоставляет функцию `api_request`, которая обрабатывает запросы, сериализует и десериализует данные, а также обрабатывает возможные ошибки.

## Функции

### `api_request`

**Описание**: Выполняет запрос к API, обрабатывает ответ и возвращает результат, или `None` при ошибке.

**Параметры**:

- `request`: Объект, представляющий запрос к API (предполагается, что имеет метод `getResponse()`).
- `response_name`: Название ключа в ответе, содержащем результат запроса.
- `attemps` (int, optional): Количество попыток запроса. По умолчанию 1.

**Возвращает**:

- `dict | None`: Результат запроса в виде словаря или `None`, если произошла ошибка. Возвращаемый словарь является экземпляром `SimpleNamespace`.

**Вызывает исключения**:

- `ApiRequestException`: Если произошла ошибка при получении ответа.
- `ApiRequestResponseException`: Если произошла ошибка при обработке ответа.

**Детали реализации**:

Функция `api_request` пытается получить ответ от API. Если произойдет ошибка при получении ответа, она записывает сообщение об ошибке в лог с использованием `logger.critical` и возвращает `None`.
Далее она пытается извлечь результат из ответа. Если произойдет ошибка при парсинге, она записывает сообщение об ошибке в лог с использованием `logger.critical` и возвращает `None`.
Если код ответа равен 200, она возвращает результат. В противном случае записывает предупреждение в лог с использованием `logger.warning` и возвращает `None`.
Если произойдет любая другая ошибка, записывает сообщение об ошибке в лог с использованием `logger.error` и возвращает `None`.


```