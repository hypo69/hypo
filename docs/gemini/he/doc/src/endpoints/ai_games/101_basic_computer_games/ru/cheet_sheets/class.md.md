# Классы в Python

## Обзор

Этот документ описывает основы использования классов в Python, включая их структуру, создание объектов, типы методов, наследование, полиморфизм и инкапсуляцию. Классы являются фундаментальным элементом объектно-ориентированного программирования (ООП) в Python, позволяя структурировать код и улучшать его повторное использование.

## Содержание

- [Структура класса](#структура-класса)
- [Создание объекта класса](#создание-объекта-класса)
- [Типы методов](#типы-методов)
- [Наследование](#наследование)
- [Полиморфизм](#полиморфизм)
- [Инкапсуляция](#инкапсуляция)
- [Прочие особенности классов](#прочие-особенности-классов)

## Структура класса

Класс - это шаблон для создания объектов. Он определяет, какие атрибуты (данные) и методы (функции) будут иметь объекты этого класса.

```python
class ClassName:
    # Атрибуты класса
    def __init__(self, param1, param2):
        # Конструктор (инициализатор) класса
        self.param1 = param1
        self.param2 = param2

    # Методы класса
    def method(self):
        return f'{self.param1} и {self.param2}'
```

### `__init__` (Конструктор)

**Описание**:
Конструктор `__init__` является специальным методом, который автоматически вызывается при создании нового объекта. Он используется для инициализации атрибутов объекта.

**Параметры**:

- `self`: Ссылка на текущий экземпляр класса. Передается автоматически при вызове метода экземпляра.
- `param1`: Первый параметр конструктора.
- `param2`: Второй параметр конструктора.

**Возвращает**:
- `None`: Конструктор не возвращает значение.

**Атрибуты класса**:
Атрибуты - это переменные, которые принадлежат объектам этого класса. Они определяются внутри конструктора (`__init__`) и могут быть доступны через ссылку на объект (например, `self.param1`).

**Методы класса**:
Методы - это функции, которые могут манипулировать атрибутами объекта. Методы могут использовать данные объекта, изменять их или выполнять другие операции.

### `method`

**Описание**:
Метод `method` возвращает строку, которая формируется из атрибутов `param1` и `param2` текущего объекта.

**Параметры**:
- `self`: Ссылка на текущий экземпляр класса.

**Возвращает**:
- `str`: Строка, содержащая значения атрибутов объекта.

## Создание объекта класса

Когда класс определен, можно создавать объекты этого класса. Объекты являются экземплярами класса.

```python
class Car:
    def __init__(self, make, model, year):
        self.make = make
        self.model = model
        self.year = year

    def description(self):
        return f'{self.year} {self.make} {self.model}'

# Создание объекта
my_car = Car('Toyota', 'Corolla', 2020)
print(my_car.description())  # Вывод: 2020 Toyota Corolla
```

### `Car.__init__`

**Описание**:
Конструктор класса `Car` для создания экземпляров автомобилей. Инициализирует атрибуты `make`, `model`, и `year`.

**Параметры**:
- `self`: Ссылка на текущий экземпляр класса.
- `make` (str): Марка автомобиля.
- `model` (str): Модель автомобиля.
- `year` (int): Год выпуска автомобиля.

**Возвращает**:
- `None`: Конструктор не возвращает значение.

### `Car.description`

**Описание**:
Метод `description` возвращает строку с описанием автомобиля.

**Параметры**:
- `self`: Ссылка на текущий экземпляр класса.

**Возвращает**:
- `str`: Строка вида "год марка модель".

## Типы методов

В Python существуют три типа методов в классах: методы экземпляра, методы класса и статические методы.

### Методы экземпляра

Это обычные методы, которые действуют на экземпляры класса. Они принимают ссылку на объект как первый параметр (`self`).

```python
def method(self):
    pass
```

**Описание**:
Метод экземпляра, который действует на экземпляр класса и может манипулировать его атрибутами.

**Параметры**:
- `self`: Ссылка на текущий экземпляр класса.

**Возвращает**:
- `None`: Метод ничего не возвращает.

### Методы класса

Методы, которые принимают сам класс как первый параметр. Для определения таких методов используется декоратор `@classmethod`. Они могут изменять состояние самого класса, а не отдельных его экземпляров.

```python
class MyClass:
    @classmethod
    def class_method(cls):
        pass
```

**Описание**:
Метод класса, который работает с самим классом и его атрибутами, а не с отдельными экземплярами.

**Параметры**:
- `cls`: Ссылка на сам класс.

**Возвращает**:
- `None`: Метод ничего не возвращает.

### Статические методы

Это методы, которые не используют `self` или `cls` (то есть они не имеют доступа ни к экземпляру, ни к классу). Статические методы объявляются с помощью декоратора `@staticmethod`. Они могут быть полезны, когда метод не зависит от состояния объекта или класса, но связан с логикой, принадлежащей классу.

```python
class MyClass:
    @staticmethod
    def static_method():
        pass
```

**Описание**:
Статический метод, который не зависит от экземпляра класса или самого класса.

**Параметры**:
- Нет параметров, связанных с классом или экземпляром.

**Возвращает**:
- `None`: Метод ничего не возвращает.

## Наследование

Наследование позволяет классу наследовать свойства и поведение другого класса. Это способствует повторному использованию кода и упрощает его организацию.

```python
class Animal:
    def speak(self):
        return 'Голос животного'

class Dog(Animal):  # Класс Dog наследует от класса Animal
    def speak(self):
        return 'Гав'

# Создание объектов
dog = Dog()
print(dog.speak())  # Вывод: Гав
```

### `Animal.speak`

**Описание**:
Метод базового класса `Animal`, который возвращает обобщенный звук животного.

**Параметры**:
- `self`: Ссылка на текущий экземпляр класса.

**Возвращает**:
- `str`: Строка "Голос животного".

### `Dog.speak`

**Описание**:
Метод класса `Dog`, который переопределяет метод `speak` базового класса `Animal` и возвращает звук собаки.

**Параметры**:
- `self`: Ссылка на текущий экземпляр класса.

**Возвращает**:
- `str`: Строка "Гав".

## Полиморфизм

Полиморфизм позволяет объектам разных классов использовать одинаковые методы с разной реализацией. В Python это возможно благодаря наследованию и переопределению методов.

```python
class Cat(Animal):
    def speak(self):
        return 'Мяу'

# Создание объектов
cat = Cat()
print(cat.speak())  # Вывод: Мяу
```

### `Cat.speak`

**Описание**:
Метод класса `Cat`, который переопределяет метод `speak` базового класса `Animal` и возвращает звук кошки.

**Параметры**:
- `self`: Ссылка на текущий экземпляр класса.

**Возвращает**:
- `str`: Строка "Мяу".

## Инкапсуляция

Инкапсуляция позволяет скрывать внутренние детали реализации и предоставлять доступ к данным через публичные методы. Это помогает предотвратить неправильное использование данных.

```python
class Car:
    def __init__(self, make, model):
        self._make = make  # Защищённый атрибут
        self._model = model

    def get_make(self):
        return self._make

    def set_make(self, make):
        self._make = make

# Создание объекта
my_car = Car('Toyota', 'Corolla')
print(my_car.get_make())  # Вывод: Toyota
my_car.set_make('Honda')
print(my_car.get_make())  # Вывод: Honda
```

### `Car.__init__`

**Описание**:
Конструктор класса `Car`, который инициализирует защищенные атрибуты `_make` и `_model`.

**Параметры**:
- `self`: Ссылка на текущий экземпляр класса.
- `make` (str): Марка автомобиля.
- `model` (str): Модель автомобиля.

**Возвращает**:
- `None`: Конструктор не возвращает значение.

### `Car.get_make`

**Описание**:
Метод для получения значения защищенного атрибута `_make`.

**Параметры**:
- `self`: Ссылка на текущий экземпляр класса.

**Возвращает**:
- `str`: Марка автомобиля.

### `Car.set_make`

**Описание**:
Метод для установки нового значения защищенного атрибута `_make`.

**Параметры**:
- `self`: Ссылка на текущий экземпляр класса.
- `make` (str): Новая марка автомобиля.

**Возвращает**:
- `None`: Метод не возвращает значение.

## Прочие особенности классов

### `__del__` (Деструктор)

Специальный метод, который вызывается, когда объект уничтожается (например, при выходе из области видимости). Он может быть использован для очистки ресурсов.

```python
class MyClass:
    def __del__(self):
        print("Объект уничтожен")

obj = MyClass()
del obj  # Объект будет уничтожен и вызовется метод __del__
```

**Описание**:
Деструктор класса `MyClass`, который выводится при уничтожении объекта.

**Параметры**:
- `self`: Ссылка на текущий экземпляр класса.

**Возвращает**:
- `None`: Деструктор не возвращает значение.

### Магические методы

Специальные методы с двумя подчеркиваниями (например, `__init__`, `__str__`, `__repr__`, `__eq__`). Они позволяют переопределять стандартное поведение операций, таких как создание объектов, сравнение, вывод объектов в строковом виде и т.д.

```python
class Point:
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def __repr__(self):
        return f'Point({self.x}, {self.y})'

p = Point(3, 4)
print(p)  # Вывод: Point(3, 4)
```

#### `Point.__init__`

**Описание**:
Конструктор класса `Point`, который инициализирует координаты точки `x` и `y`.

**Параметры**:
- `self`: Ссылка на текущий экземпляр класса.
- `x` (int): Координата x точки.
- `y` (int): Координата y точки.

**Возвращает**:
- `None`: Конструктор не возвращает значение.

#### `Point.__repr__`

**Описание**:
Метод, который определяет строковое представление объекта `Point`.

**Параметры**:
- `self`: Ссылка на текущий экземпляр класса.

**Возвращает**:
- `str`: Строковое представление точки в формате `Point(x, y)`.

---

[К оглавлению](https://github.com/hypo69/101_python_computer_games_ru/blob/master/cheat_sheets#readme)