# Модуль `csv`

## Обзор

Модуль `csv` предоставляет утилиты для преобразования данных между форматами CSV (Comma Separated Values) и JSON. Он включает функции для чтения данных из CSV-файлов и преобразования их в словари или объекты `SimpleNamespace`, а также для сохранения данных из CSV в JSON-файл.

## Подробнее

Этот модуль предназначен для облегчения обработки данных, хранящихся в формате CSV, и их интеграции с другими частями системы, которые могут требовать формат JSON. Модуль использует стандартные библиотеки `json` и `csv`, а также модуль `logger` для логирования ошибок и исключений.

## Функции

### `csv2dict`

```python
def csv2dict(csv_file: str | Path, *args, **kwargs) -> dict | None:
    """
    Преобразует данные из CSV-файла в словарь.

    Args:
        csv_file (str | Path): Путь к CSV-файлу для чтения.
        *args: Произвольные позиционные аргументы, передаваемые в `read_csv_as_dict`.
        **kwargs: Произвольные именованные аргументы, передаваемые в `read_csv_as_dict`.

    Returns:
        dict | None: Словарь, содержащий данные из CSV, преобразованные в формат JSON, или `None`, если преобразование не удалось.

    Raises:
        Exception: Если не удается прочитать CSV-файл.

    Example:
        >>> data = csv2dict('data.csv')
        >>> print(data)
        {'ключ1': 'значение1', 'ключ2': 'значение2'}
    """
    ...
```

**Как работает функция**:
Функция `csv2dict` принимает путь к CSV-файлу и использует функцию `read_csv_as_dict` для чтения данных из файла и преобразования их в словарь. Функция возвращает полученный словарь или `None`, если происходит ошибка при чтении файла. Аргументы `*args` и `**kwargs` передаются непосредственно в функцию `read_csv_as_dict`, что позволяет настраивать процесс чтения CSV.

**Параметры**:
- `csv_file` (str | Path): Путь к CSV-файлу, который требуется преобразовать в словарь.

**Возвращает**:
- `dict | None`: Словарь с данными из CSV-файла или `None` в случае ошибки.

**Вызывает исключения**:
- `Exception`: Вызывается, если не удается прочитать CSV-файл.

### `csv2ns`

```python
def csv2ns(csv_file: str | Path, *args, **kwargs) -> SimpleNamespace | None:
    """
    Преобразует данные из CSV-файла в объекты SimpleNamespace.

    Args:
        csv_file (str | Path): Путь к CSV-файлу для чтения.
        *args: Произвольные позиционные аргументы, передаваемые в `read_csv_as_ns`.
        **kwargs: Произвольные именованные аргументы, передаваемые в `read_csv_as_ns`.

    Returns:
        SimpleNamespace | None: Объект SimpleNamespace, содержащий данные из CSV, или `None`, если преобразование не удалось.

    Raises:
        Exception: Если не удается прочитать CSV-файл.
    
    Example:
        >>> data = csv2ns('data.csv')
        >>> print(data)
        SimpleNamespace(ключ1='значение1', ключ2='значение2')
    """
    ...
```

**Как работает функция**:
Функция `csv2ns` принимает путь к CSV-файлу и использует функцию `read_csv_as_ns` для чтения данных из файла и преобразования их в объекты `SimpleNamespace`. Функция возвращает полученный объект `SimpleNamespace` или `None`, если происходит ошибка при чтении файла. Аргументы `*args` и `**kwargs` передаются непосредственно в функцию `read_csv_as_ns`, что позволяет настраивать процесс чтения CSV.

**Параметры**:
- `csv_file` (str | Path): Путь к CSV-файлу, который требуется преобразовать в объекты `SimpleNamespace`.

**Возвращает**:
- `SimpleNamespace | None`: Объект `SimpleNamespace` с данными из CSV-файла или `None` в случае ошибки.

**Вызывает исключения**:
- `Exception`: Вызывается, если не удается прочитать CSV-файл.

### `csv_to_json`

```python
def csv_to_json(
    csv_file_path: str | Path,
    json_file_path: str | Path,
    exc_info: bool = True
) -> List[Dict[str, str]] | None:
    """
    Преобразует CSV-файл в формат JSON и сохраняет его в JSON-файл.

    Args:
        csv_file_path (str | Path): Путь к CSV-файлу для чтения.
        json_file_path (str | Path): Путь к JSON-файлу для сохранения.
        exc_info (bool, optional): Если True, включает информацию об отслеживании в журнал. По умолчанию True.

    Returns:
        List[Dict[str, str]] | None: Данные JSON в виде списка словарей или None, если преобразование не удалось.

    Example:
        >>> json_data = csv_to_json('dialogue_log.csv', 'dialogue_log.json')
        >>> print(json_data)
        [{'role': 'user', 'content': 'Hello'}, {'role': 'assistant', 'content': 'Hi there!'}]
    """
    ...
```

**Как работает функция**:
Функция `csv_to_json` преобразует CSV-файл в JSON-формат и сохраняет результат в указанный JSON-файл. Сначала функция пытается прочитать данные из CSV-файла с помощью функции `read_csv_file`. Если данные успешно прочитаны, они записываются в JSON-файл с использованием стандартной библиотеки `json`. В случае возникновения исключений в процессе чтения или записи, функция логирует ошибку с использованием модуля `logger` и возвращает `None`.

**Параметры**:
- `csv_file_path` (str | Path): Путь к CSV-файлу, который необходимо преобразовать в JSON.
- `json_file_path` (str | Path): Путь к JSON-файлу, в который будут сохранены преобразованные данные.
- `exc_info` (bool, optional): Флаг, определяющий, следует ли включать информацию об исключении в логи. По умолчанию `True`.

**Возвращает**:
- `List[Dict[str, str]] | None`: Список словарей, представляющий данные в формате JSON, или `None` в случае ошибки.

**Вызывает исключения**:
- `Exception`: Обрабатывается внутри функции и логируется, если происходит ошибка при чтении CSV или записи JSON.