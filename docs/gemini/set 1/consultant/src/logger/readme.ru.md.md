# Анализ кода модуля src.logger

**Качество кода: 8/10**
-  Плюсы
    -   Хорошее и подробное описание модуля, классов, методов и параметров в reStructuredText (RST) формате.
    -   Четкое описание уровней логирования, форматов сообщений и параметров конфигурации.
    -   Приведены примеры использования, которые помогают понять работу логгера.
-  Минусы
    -   В тексте присутствуют избыточные слова "получаем", "делаем".
    -   Отсутствует нумерация в перечислениях.
    -   В примерах кода не хватает `import` для `logging` и `colorama`.
    -   Не указан import для `Optional` из модуля `typing`.

**Рекомендации по улучшению**
1.  Избегать использования слов "получаем", "делаем" в комментариях, заменяя их на конкретные действия, такие как "код выполняет...", "проверка...", "отправка...".
2.  Добавить нумерацию для списков.
3.  Добавить `import` в примерах кода.
4.  Указать импорт для `Optional` из `typing`.
5.  В документации по функциям и методам использовать более точные формулировки.
6.  Пересмотреть использование множественных вложенных уровней заголовков, для лучшей читаемости.

**Оптимизированный код**
```markdown
.. module:: src.logger

<TABLE>
<TR>
<TD>
<A HREF = 'https://github.com/hypo69/hypo/blob/master/README.MD'>[Root ↑]</A>
</TD>
<TD>
<A HREF = 'https://github.com/hypo69/hypo/blob/master/src/README.MD'>src</A> /
</TD>
<TD>
<A HREF = 'https://github.com/hypo69/hypo/blob/master/src/logger/README.MD'>English</A>
</TD>
</TABLE>

Документация для модуля ``src.logger``
=====================================================================================

Модуль ``src.logger`` предоставляет гибкую систему логирования, поддерживающую логирование в консоль, файлы и в формате JSON.
Он использует шаблон проектирования Singleton, чтобы обеспечить использование единственного экземпляра логгера во всем приложении.
Логгер поддерживает различные уровни логирования (например, ``INFO``, ``ERROR``, ``DEBUG``) и включает цветное отображение для вывода в консоль.
Также доступны настройки форматов вывода и управление логированием в различные файлы.

---

### Классы:

1.  **SingletonMeta**: Метакласс, реализующий шаблон Singleton для логгера.
2.  **JsonFormatter**: Кастомный форматтер для вывода логов в формате JSON.
3.  **Logger**: Основной класс логгера, поддерживающий логирование в консоль, файлы и в формате JSON.

---

### Функции:

#### ``__init__``
    Инициализирует экземпляр класса Logger с плейсхолдерами для различных типов логгеров (консоль, файлы и JSON).

#### ``_configure_logger(name: str, log_path: str, level: Optional[int] = logging.DEBUG, formatter: Optional[logging.Formatter] = None, mode: Optional[str] = 'a') -> logging.Logger``
    Настраивает и возвращает экземпляр логгера.

    :param name: Имя логгера.
    :param log_path: Путь к файлу логов.
    :param level: Уровень логирования, например, ``logging.DEBUG``. Значение по умолчанию — ``logging.DEBUG``.
    :param formatter: Кастомный форматтер (опционально).
    :param mode: Режим работы с файлом, например, ``'a'`` для добавления (значение по умолчанию).
    :return: Настроенный экземпляр ``logging.Logger``.

#### ``initialize_loggers(info_log_path: Optional[str] = '', debug_log_path: Optional[str] = '', errors_log_path: Optional[str] = '', json_log_path: Optional[str] = '')``
    Инициализирует логгеры для логирования в консоль и файлы (информация, отладка, ошибки и JSON).

    :param info_log_path: Путь к файлу логов информации (опционально).
    :param debug_log_path: Путь к файлу логов отладки (опционально).
    :param errors_log_path: Путь к файлу логов ошибок (опционально).
    :param json_log_path: Путь к файлу логов в формате JSON (опционально).

#### ``log(level, message, ex=None, exc_info=False, color=None)``
    Логирует сообщение на указанном уровне (например, ``INFO``, ``DEBUG``, ``ERROR``) с возможным исключением и цветовым форматированием.

    :param level: Уровень логирования (например, ``logging.INFO``, ``logging.DEBUG``).
    :param message: Логируемое сообщение.
    :param ex: Исключение для логирования (опционально).
    :param exc_info: Включать информацию об исключении (значение по умолчанию — ``False``).
    :param color: Кортеж цветов текста и фона для консольного вывода (опционально).

#### Другие методы:
    - ``info``: Логирует информационное сообщение.
    - ``success``: Логирует сообщение об успешной операции.
    - ``warning``: Логирует предупреждение.
    - ``debug``: Логирует сообщение для отладки.
    - ``error``: Логирует сообщение об ошибке.
    - ``critical``: Логирует критическое сообщение.

---

### Параметры логгера
    Класс ``Logger`` принимает несколько опциональных параметров для настройки поведения логирования.

-   **Уровень**: Контролирует, какие сообщения будут записаны. Основные уровни:

    1.  ``logging.DEBUG``: Подробная информация для диагностики.
    2.  ``logging.INFO``: Общая информация, например, успешные операции.
    3.  ``logging.WARNING``: Предупреждения, не требующие немедленного действия.
    4.  ``logging.ERROR``: Сообщения об ошибках.
    5.  ``logging.CRITICAL``: Критические ошибки, требующие немедленного внимания.

-   **Форматтер**: Определяет формат сообщений. По умолчанию используется ``'%(asctime)s - %(levelname)s - %(message)s'``.
    Можно задать кастомный форматтер, например для JSON.

-   **Цвета**: Задают цвет текста и фона в консоли. Цвета указываются кортежем:

    - **Цвет текста**: Например, ``colorama.Fore.RED``.
    - **Цвет фона**: Например, ``colorama.Back.WHITE``.

---

### Конфигурация для логирования в файл (``config``)
Для записи сообщений в файл можно указать пути в конфигурации.

.. code-block:: python

    config = {
        'info_log_path': 'logs/info.log',
        'debug_log_path': 'logs/debug.log',
        'errors_log_path': 'logs/errors.log',
        'json_log_path': 'logs/log.json'
    }

---

### Примеры использования

#### 1. Инициализация логгера:
.. code-block:: python
    
    import logging
    import colorama
    from typing import Optional

    logger: Logger = Logger()
    config = {
        'info_log_path': 'logs/info.log',
        'debug_log_path': 'logs/debug.log',
        'errors_log_path': 'logs/errors.log',
        'json_log_path': 'logs/log.json'
    }
    logger.initialize_loggers(**config)

#### 2. Логирование сообщений:
.. code-block:: python
    
    logger.info('Это информационное сообщение')
    logger.success('Это сообщение об успешной операции')
    logger.warning('Это предупреждение')
    logger.debug('Это сообщение для отладки')
    logger.error('Это сообщение об ошибке')
    logger.critical('Это критическое сообщение')

#### 3. Настройка цветов:
.. code-block:: python
    
    logger.info('Это сообщение будет зеленым', colors=(colorama.Fore.GREEN, colorama.Back.BLACK))
    logger.error('Это сообщение с красным фоном', colors=(colorama.Fore.WHITE, colorama.Back.RED))

---

Модуль ``src.logger`` предоставляет полноценную систему логирования для Python-приложений.
Вы можете настроить логирование в консоль и файлы с различными форматами и цветами, управлять уровнями логирования и обрабатывать исключения.
Конфигурация логирования в файлы задается через словарь ``config``, что позволяет легко изменять настройки.
```