# Модуль `src.scenario`

## Обзор

Модуль `src.scenario` предназначен для автоматизации взаимодействия с поставщиками, используя сценарии, описанные в JSON-файлах. Он адаптирует процесс извлечения и обработки данных о продуктах с веб-сайтов поставщиков и синхронизирует эту информацию с базой данных вашей системы (например, PrestaShop).

## Функции

### `run_scenario_files(scenario_files_list)`

**Описание**:  Функция выполняет сценарии, указанные в списке файлов.

**Параметры**:
- `scenario_files_list` (list): Список путей к файлам со сценариями.

**Возвращает**:
- `None`


**Примечание**: Функция обрабатывает ошибки при чтении и работе со сценариями.

### `run_scenario_file(scenario_file)`

**Описание**: Функция загружает сценарии из указанного файла и выполняет их по очереди.

**Параметры**:
- `scenario_file` (str): Путь к файлу со сценариями.

**Возвращает**:
- `None`

**Примечание**: Возможные исключения обрабатываются внутри функции.


### `run_scenario(scenario)`

**Описание**: Функция обрабатывает отдельный сценарий.

**Параметры**:
- `scenario` (dict): Словарь со сценарием.

**Возвращает**:
- `None`

**Примечание**: Функция извлекает данные из указанного URL и сохраняет их в базе данных.

**Возможные исключения**:
- `IOError`: При ошибке при чтении данных с сайта.
- `ValueError`: Если сценарий имеет неправильный формат.
- `Exception`: Для других необработанных ошибок.


### `dump_journal(journal)`

**Описание**: Функция сохраняет журнал выполнения сценариев в файл.

**Параметры**:
- `journal` (list): Список записей журнала.

**Возвращает**:
- `None`

**Примечание**: Функция записывает детали выполнения сценариев и результаты в файл.


### `main()`

**Описание**:  Основная функция для запуска модуля.

**Возвращает**:
- `None`

**Примечание**: Функция принимает список файлов сценариев, выполняет их и сохраняет журнал.


## Примеры

### Структура JSON-сценария

```json
{
  "scenarios": {
    "category_name": {
      "url": "https://example.com/category",
      "name": "category_name",
      "presta_categories": {
        "default_category": 123,
        "additional_categories": [456, 789]
      }
    }
  }
}
```


## Как использовать

1. Подготовьте список файлов сценариев (`scenario_files_list`).
2. Вызовите функцию `run_scenario_files(scenario_files_list)`.
3. Проверьте журнал выполнения в созданном файле.


```python
# Пример использования (неполный)
from scenario import run_scenario_files

scenario_files_list = ["scenario_file1.json", "scenario_file2.json"]

run_scenario_files(scenario_files_list)
```


```python
# Пример вызова функции run_scenario
# ... (Инициализация и получение scenario)

# ... (Обработка)
try:
   # ... (Логика обработки сценария)
except IOError as ex:
   print(f"Ошибка ввода-вывода: {ex}")
except ValueError as ex:
   print(f"Ошибка формата сценария: {ex}")
except Exception as ex:
   print(f"Непредвиденная ошибка: {ex}")


```

```python
# ... (rest of your scenario module)
```