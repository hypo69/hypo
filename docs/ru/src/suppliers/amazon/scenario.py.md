# Модуль `src.suppliers.amazon.scenario`

## Обзор

Модуль `src.suppliers.amazon.scenario` предназначен для сбора данных о товарах со страниц категорий поставщика Amazon с использованием веб-драйвера. Он содержит функции для получения списка категорий с сайта продавца и списка товаров в каждой категории. Модуль также обрабатывает URL страниц товаров и передает данные классу `Product` для дальнейшей обработки.

## Подробней

Этот модуль является частью процесса сбора данных о товарах с сайта Amazon и предназначен для автоматизации этого процесса. Он включает в себя функции для навигации по сайту, извлечения информации о товарах и обработки полученных данных. Модуль адаптирован для работы с Amazon и может быть расширен для поддержки других поставщиков.

## Функции

### `get_list_products_in_category`

```python
def get_list_products_in_category(s) -> list[str,str,None]:
    """
    Возвращает список URL товаров со страницы категории.

    Args:
        s: Supplier - Инстанс класса Supplier.

    Returns:
        list[str, str, None]: Список URL товаров или None.

    Raises:
        None

    Как работает функция:
    1. Функция принимает инстанс класса `Supplier` в качестве аргумента.
    2. Извлекает локаторы для категории из инстанса `Supplier`.
    3. Проверяет наличие локаторов и, если их нет, логирует ошибку и возвращает `None`.
    4. Выполняет скроллинг страницы.
    5. Извлекает ссылки на товары с использованием локатора `product_links`.
    6. Если ссылки не найдены, логирует предупреждение и возвращает `None`.
    7. Преобразует результат в список, если он представлен в виде строки.
    8. Логирует количество найденных товаров.
    9. Возвращает список URL товаров.

    Внутри функции происходят следующие действия и преобразования:
    A: Извлечение локаторов для категории.
    |
    -- B: Проверка наличия локаторов.
    |
    C: Скроллинг страницы.
    |
    D: Извлечение ссылок на товары.
    |
    E: Проверка наличия ссылок.
    |
    F: Преобразование результата в список.
    |
    G: Логирование количества найденных товаров.

    Где:
    - A: `locator_extraction` - Извлечение локаторов для категории.
    - B: `locator_validation` - Проверка наличия локаторов.
    - C: `page_scrolling` - Скроллинг страницы.
    - D: `links_extraction` - Извлечение ссылок на товары.
    - E: `links_validation` - Проверка наличия ссылок.
    - F: `result_conversion` - Преобразование результата в список.
    - G: `logging_quantity` - Логирование количества найденных товаров.
    """
    d = s.driver
    l: dict = s.locators['category']
    if not l:
        """ Много проверок, потому, что код можно запускать от лица разных ихполнителей: Supplier, Product, Scenario """
        logger.error(f"А где локаторы? {l}")
        return
    d.scroll()

    #TODO: Нет листалки

    list_products_in_category = d.execute_locator(l['product_links'])
    """ Собираю ссылки на товары.  """
    if not list_products_in_category:
        logger.warning('Нет ссылок на товары')
        return
    
    list_products_in_category = [list_products_in_category] if isinstance(list_products_in_category, str) else list_products_in_category


    logger.info(f""" Найдено {len(list_products_in_category)} товаров """)
    
    #""" Проверяю наличие товара в базе данных магазина """
    #for asin in list_products_in_category:
    #    _asin = asin.split(f\'\'\'/\'\'\')[-2]\
    #    _sku = f\'\'\'{s.supplier_id}_{_asin}\'\'\'
    #    if PrestaShopProduct.check(_sku) == False:
    #        """ Синтаксис для того, чтобы помнить,\
    #        что я проверяю ОТСУТСТВИЕ товара в базе данных
    #        """
    #        continue
    #    else:
    #        """ Товар в базе данных """
    #        continue
            #TODO: Логику 


    return list_products_in_category