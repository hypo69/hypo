# ИНСТРУКЦИЯ по созданию документации в формате reStructuredText (rst) для Sphinx

Эта инструкция описывает, как генерировать документацию в формате `reStructuredText (rst)` для файлов на Python, которая будет совместима с Sphinx.

**1. Формат документации:**

* Используйте стандарт `reStructuredText (.rst)`.
* Каждый файл должен начинаться с заголовка и краткого описания его содержимого.
* Для классов и функций используйте следующую структуру комментариев:

```python
def function(param: str, param1: Optional[str | dict | str] = None) -> dict | None:
    """
    Args:
        param (str): Описание параметра `param`.
        param1 (Optional[str | dict | str], optional): Описание параметра `param1`. По умолчанию `None`.

    Returns:
        dict | None: Описание возвращаемого значения. Возвращает словарь или `None`.

    Raises:
        SomeError: Описание ситуации, в которой возникает исключение `SomeError`.
    """
    # Здесь реализация функции
```

* Используйте `ex` вместо `e` в блоках обработки исключений.


**2. Оглавление (TOC):**

* В главном файле `index.rst` используйте директиву `.. toctree::` для создания списка ссылок на другие файлы документации модулей.  Например:

```rst
.. toctree::
   :maxdepth: 2

   module1
   module2
   module3
```

*  Каждый файл модуля должен содержать директиву `.. automodule::` для автоматической генерации документации.

**3. Форматирование документации:**

* Используйте заголовки первого уровня (`=`), второго уровня (`-`), третьего уровня (`~`), и четвёртого уровня (`^`) в соответствии с  `reStructuredText` синтаксисом.
* Для документирования классов, функций и методов используйте директивы Sphinx `autoclass`, `autofunction` в файлах `.rst`.
* Пример файла `module.rst`:

```rst
Модуль Модуль1
=============

.. automodule:: module_name
   :members:
   :undoc-members:
   :show-inheritance:


Функции
-------

.. autofunction:: module_name.function_name

.. autoclass:: module_name.ClassName
   :members:
```

**4. Создание файла `conf.py`:**

Файл `conf.py` необходим для настройки Sphinx. Вам нужно будет указать пути к вашим файлам `rst`.  Пример:

```python
# conf.py

import os
import sys
sys.path.insert(0, os.path.abspath('.'))

project = 'Модуль1'
copyright = '2023, Автор'
extensions = ['sphinx.ext.autodoc', 'sphinx.ext.napoleon'] # Для обработки docstrings
```

**5. Сборка документации:**

Используйте команду `sphinx-build` для создания HTML-документации.

```bash
sphinx-build -b html . _build
```

Этот процесс создаст HTML-версию вашей документации в каталоге `_build/html`.


**Важно:**

*  Замените `module_name` на реальное имя вашего модуля.
* Убедитесь, что ваш файл `conf.py` правильно настроен.
* Исходные файлы Python должны содержать docstrings в соответствии со стилем Sphinx.

Теперь вы можете использовать инструменты Sphinx для сборки, генерации и развертывания вашей документации.  Эта инструкция предназначена для использования с библиотекой Sphinx.