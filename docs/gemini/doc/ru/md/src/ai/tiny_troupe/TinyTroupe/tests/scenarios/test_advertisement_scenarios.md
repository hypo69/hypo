# Модуль `test_advertisement_scenarios.py`

## Обзор

Этот модуль содержит тесты для сценариев оценки и создания рекламы. Тесты проверяют функциональность агентов, работающих с рекламными объявлениями, и сценариев фокус-групп. Включает тесты для оценки рекламных объявлений с помощью агентов, а также сценарии, связанные с созданием рекламы.

## Тесты

### `test_ad_evaluation_scenario`

**Описание**: Этот тест проверяет способность агентов оценивать рекламные объявления и выбирать наиболее убедительное. Агенты анализируют несколько рекламных объявлений и выбирают одно, объясняя свой выбор.

**Параметры**:

- `setup`: Настройка для запуска теста.
- `travel_ad_1`, `travel_ad_2`, `travel_ad_3`, `travel_ad_4`: Тексты рекламных объявлений для оценки.
- `eval_request_msg`: Текст запроса для оценки объявлений, включающий каждый рекламный текст.
- `situation`: Обстановка, в которой работают агенты (планирование отпуска в Европе).
- `extraction_objective`: Задача для извлечения результатов (найти выбранное объявление, его номер, заголовок и обоснование).
- `people`: Список агентов, которые принимают участие в оценке.

**Возвращает**:

- Список результатов оценки от каждого агента. Каждый результат - словарь с полями `ad_id`, `ad_title` и `justification`.

**Вызывает исключения**:

- `AssertionError`: Если результаты не соответствуют ожидаемым критериям (например, отсутствует поле `ad_id`, неверный тип `ad_id`, неверные данные).


### `test_ad_creation_scenario`

**Описание**: Этот тест моделирует сценарий фокус-группы для обсуждения лучшего способа рекламирования квартиры. Участники фокус-группы (агенты) анализируют описание квартиры и обсуждают оптимальные методы рекламы.

**Параметры**:

- `setup`: Настройка для запуска теста.
- `focus_group_world`: Мировая модель для фокус-группы.
- `situation`: Описание ситуации фокус-группы (обсуждение рекламы квартиры).
- `apartment_description`: Описание квартиры, которую необходимо рекламировать.
- `task`: Задача фокус-группы (обсуждение способов рекламы квартиры).

**Возвращает**:

- Результаты работы фокус-группы (предложения по рекламе).

**Вызывает исключения**:

- `AssertionError`: Если результаты не содержат предложений по рекламе.

### `test_consumer_profiling_scenario`

**Описание**: Этот тест моделирует сценарий анкетирования потребителей для оценки интереса к новой продукции (газированный гвахачо). Тест фокусируется на сборе данных о предпочтениях потребителей, а также их поведенческих особенностях.

**Параметры**:

- `setup`: Настройка для запуска теста.
- `general_context`: Общий контекст для анкетирования.
- `consumer_factory`: Фабрика для генерации потребителей.
- `consumers`: Список потребителей, участвующих в анкетировании.

**Возвращает**:

- Список потребителей с их анкетными данными.

**Вызывает исключения**:

- `AssertionError`: Если файл контрольной точки не был создан.

## Функции

### `interview_consumer_batch`

**Описание**: Функция для проведения анкетирования группы потребителей. Функция генерирует потребителей, собирает данные о них и сохраняет их в кеше.

**Параметры**:

- `n`: Количество потребителей, которые должны быть опрошены.

**Возвращает**:

- Список потребителей.

**Вызывает исключения**:

- Нет.