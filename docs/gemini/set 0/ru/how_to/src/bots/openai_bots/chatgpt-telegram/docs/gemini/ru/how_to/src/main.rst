Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код представляет собой бота для Telegram, который обрабатывает голосовые и текстовые сообщения.  Он принимает голосовое сообщение, преобразует его в текст с помощью OpenAI, отправляет текст в чат OpenAI и возвращает ответ.  Код также обрабатывает текстовые сообщения.  Для обработки используется функция `processTextToChat`.

Шаги выполнения
-------------------------
1. **Инициализация бота:** Создается экземпляр бота `Telegraf` с использованием токена Telegram, полученного из файла конфигурации `config.js`.

2. **Обработка команды `start`:** При получении команды `start` бот отправляет в ответ строковое представление сообщения пользователя.

3. **Обработка голосовых сообщений:**
    a. При получении голосового сообщения бот отправляет сообщение о том, что принимает сообщение и ожидает ответа от сервера.
    b. Получает ссылку на голосовое сообщение.
    c. Получает идентификатор пользователя.
    d. Преобразует голосовое сообщение в `ogg` формат.
    e. Преобразует `ogg` файл в `mp3` файл.
    f. Удаляет временный `ogg` файл.
    g. Использует API OpenAI для транскрипции `mp3` файла в текст.
    h. Отправляет в Telegram сообщение с полученным текстом запроса.
    i. Формирует массив сообщений для OpenAI, содержащий полученный текст.
    j. Отправляет запрошенный текст в чат OpenAI и получает ответ.
    k. Отправляет ответ OpenAI в Telegram пользователю.
    l. Обрабатывает возможные ошибки во время обработки голосовых сообщений.

4. **Обработка текстовых сообщений:**
    a. При получении текстового сообщения бот отправляет сообщение о том, что принимает сообщение и ожидает ответа от сервера.
    b. Вызывает функцию `processTextToChat` для обработки текстового сообщения.
    c. Обрабатывает возможные ошибки во время обработки текстовых сообщений.

5. **Запуск бота:** Запускает бота.

6. **Обработка сигналов завершения:** При получении сигналов `SIGINT` или `SIGTERM` останавливает работу бота.


Пример использования
-------------------------
.. code-block:: javascript
    
    //Пример использования в другом файле (например, в файле utils.js):
    const processTextToChat = async (ctx, text) => {
        try {
            //Код для обработки текстового сообщения
            console.log(`Processing text message: ${text}`);
            //Используйте ctx для отправки сообщений, например:
            //await ctx.reply('Processing text...');
        } catch (e) {
            console.error(`Error while processing text message`, e.message);
        }
    };