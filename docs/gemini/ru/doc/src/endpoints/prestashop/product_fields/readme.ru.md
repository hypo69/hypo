# Документация по классу `ProductFields`

## Обзор

Класс `ProductFields` предназначен для управления и структурирования данных товаров в формате, требуемом API PrestaShop. Этот класс предоставляет комплексный интерфейс для работы с полями товаров, включая как одноязычные, так и многоязычные поля. Он гарантирует, что данные будут правильно отформатированы и проверены перед отправкой в API PrestaShop.

## Содержание

1.  [Введение](#введение)
2.  [Инициализация класса](#инициализация-класса)
3.  [Поля товара](#поля-товара)
    *   [Одноязычные поля](#одноязычные-поля)
    *   [Многоязычные поля](#многоязычные-поля)
4.  [Ассоциации](#ассоциации)
5.  [Значения по умолчанию](#значения-по-умолчанию)
6.  [Обработка ошибок](#обработка-ошибок)
7.  [Примеры использования](#примеры-использования)
8.  [Заключение](#заключение)

## Введение

Класс `ProductFields` — это Python-класс, который инкапсулирует структуру и поведение полей товаров в базе данных PrestaShop. Он разработан для упрощения процесса создания, обновления и управления данными товаров, предоставляя четкий и последовательный интерфейс для взаимодействия с полями товаров.

Класс особенно полезен для разработчиков, работающих с API PrestaShop, так как он гарантирует, что все обязательные поля будут правильно отформатированы и проверены перед отправкой в API.

## Инициализация класса

### Метод `__init__`

Метод `__init__` инициализирует класс `ProductFields`, загружая список полей товаров и настраивая значения по умолчанию для полей. Он также инициализирует объект `SimpleNamespace` для хранения полей товаров и вспомогательный словарь для дополнительных полей.

#### `__init__`

```python
def __init__(self):
    """
    Инициализирует класс ProductFields, загружая список полей товаров и настраивая значения по умолчанию для полей.
    Он также инициализирует объект SimpleNamespace для хранения полей товаров и вспомогательный словарь для дополнительных полей.
    """
    ...
```

**Описание**: Инициализация класса `ProductFields`.

**Методы**:
- `_load_product_fields_list`: Загружает список полей товаров.
- `_payload`: Загружает значения по умолчанию для полей товаров.

**Параметры**:
- Отсутствуют.

**Примеры**:

```python
product = ProductFields()
```

### Метод `_load_product_fields_list`

Этот метод загружает список полей товаров из текстового файла. Файл должен содержать одно имя поля на строку.

#### `_load_product_fields_list`

```python
def _load_product_fields_list(self) -> List[str]:
    """
    Загружает список полей товаров из текстового файла. Файл должен содержать одно имя поля на строку.

    Returns:
        List[str]: Список полей товаров.

    Raises:
        FileNotFoundError: Если файл не найден.
        IOError: Если произошла ошибка при чтении файла.
    """
    ...
```

**Описание**: Загружает список полей товаров из файла.

**Параметры**:
- Отсутствуют.

**Возвращает**:
- `List[str]`: Список полей товаров.

**Примеры**:

```python
product_fields = ProductFields()
fields_list = product_fields._load_product_fields_list()
print(fields_list)
```

### Метод `_payload`

Этот метод загружает значения по умолчанию для полей товаров из JSON-файла. Если файл не найден или не может быть загружен, выводится сообщение об ошибке.

#### `_payload`

```python
def _payload(self) -> bool:
    """
    Загружает значения по умолчанию для полей товаров из JSON-файла.

    Returns:
        bool: True, если загрузка прошла успешно, иначе False.
    
    Raises:
        FileNotFoundError: Если JSON-файл не найден.
        json.JSONDecodeError: Если JSON-файл имеет неверный формат.
    """
    ...
```

**Описание**: Загружает значения по умолчанию для полей товаров из JSON-файла.

**Параметры**:
- Отсутствуют.

**Возвращает**:
- `bool`: `True`, если загрузка прошла успешно, иначе `False`.

**Примеры**:

```python
product_fields = ProductFields()
is_loaded = product_fields._payload()
print(is_loaded)
```

## Поля товара

### Одноязычные поля

Одноязычные поля — это поля, которые не требуют перевода и хранятся на одном языке. Примеры включают `id_product`, `id_supplier`, `id_manufacturer` и т.д.

#### Пример: `id_product`

```python
@property
def id_product(self) -> Optional[int]:
    """
    Возвращает id_product.

    Returns:
        Optional[int]: id_product.
    """
    ...

@id_product.setter
def id_product(self, value: int = None):
    """
    Устанавливает значение для id_product.

    Args:
        value (int, optional): Значение для id_product. По умолчанию None.
    
    Raises:
        ProductFieldException: Если происходит ошибка при установке значения.
    """
    ...
```

**Описание**: Получение и установка значения `id_product`.

**Параметры**:
- `value` (int, optional): Значение `id_product`. По умолчанию `None`.

**Возвращает**:
- `Optional[int]`: Значение `id_product`.

**Вызывает исключения**:
- `ProductFieldException`: Если возникает ошибка при установке значения.

**Примеры**:

```python
product = ProductFields()
product.id_product = 123
print(product.id_product)
```

### Многоязычные поля

Многоязычные поля — это поля, которые требуют перевода и хранятся на нескольких языках. Примеры включают `name`, `description`, `meta_title` и т.д.

#### Пример: `name`

```python
@property
def name(self):
    """
    Возвращает name.

    Returns:
        str: name.
    """
    ...

@name.setter
def name(self, value: str, lang:str = 'en') -> bool:
    """
    Устанавливает значение для name на определенном языке.

    Args:
        value (str): Значение для name.
        lang (str, optional): Язык. По умолчанию 'en'.

    Returns:
        bool: True, если установка прошла успешно, иначе False.

    Raises:
        ProductFieldException: Если происходит ошибка при установке значения.
    """
    ...
```

**Описание**: Получение и установка многоязычного значения `name`.

**Параметры**:
- `value` (str): Значение для `name`.
- `lang` (str, optional): Язык. По умолчанию `'en'`.

**Возвращает**:
- `str`: Значение `name`.

**Вызывает исключения**:
- `ProductFieldException`: Если возникает ошибка при установке значения.

**Примеры**:

```python
product = ProductFields()
product.name = "Product Name", lang='en'
print(product.name)
```

## Ассоциации

Ассоциации используются для связывания товаров с другими сущностями, такими как категории, производители и поставщики. Свойство `associations` позволяет устанавливать и получать эти ассоциации.

#### Пример: `associations`

```python
@property
def associations(self) -> Optional[Dict]:
    """
    Возвращает associations.

    Returns:
        Optional[Dict]: associations.
    """
    ...

@associations.setter
def associations(self, value: Dict[str, Optional[str]]):
    """
    Устанавливает значение для associations.

    Args:
        value (Dict[str, Optional[str]]): Значение для associations.
    """
    ...
```

**Описание**: Получение и установка ассоциаций продукта.

**Параметры**:
- `value` (Dict[str, Optional[str]]): Значение для `associations`.

**Возвращает**:
- `Optional[Dict]`: Значение `associations`.

**Примеры**:

```python
product = ProductFields()
product.associations = {'categories': [{'id': 2}, {'id': 3}]}
print(product.associations)
```

## Значения по умолчанию

Значения по умолчанию для полей товаров могут быть загружены из JSON-файла с помощью метода `_payload`. Этот метод гарантирует, что все поля имеют значение по умолчанию, которое можно переопределить по необходимости.

## Обработка ошибок

Класс включает надежную обработку ошибок для перехвата и регистрации любых исключений, возникающих при установке полей товаров. Это гарантирует, что любые проблемы будут зарегистрированы и могут быть устранены разработчиком.

#### Пример: Обработка ошибок в `id_product`

```python
@id_product.setter
def id_product(self, value: int = None):
    """
    Устанавливает значение для id_product.

    Args:
        value (int, optional): Значение для id_product. По умолчанию None.
    
    Raises:
        ProductFieldException: Если происходит ошибка при установке значения.
    """
    ...
```

**Описание**: Обработка ошибок при установке значения `id_product`.

**Параметры**:
- `value` (int, optional): Значение `id_product`. По умолчанию `None`.

**Вызывает исключения**:
- `ProductFieldException`: Если возникает ошибка при установке значения.

## Примеры использования

### Пример 1: Установка одноязычного поля

```python
product = ProductFields()
product.id_product = 123
print(product.id_product)
```

### Пример 2: Установка многоязычного поля

```python
product = ProductFields()
product.name = "Product Name", lang='en'
print(product.name)
```

### Пример 3: Установка ассоциаций

```python
product = ProductFields()
product.associations = {'categories': [{'id': 2}, {'id': 3}]}
print(product.associations)
```

## Заключение

Класс `ProductFields` — это мощный инструмент для управления данными товаров в API PrestaShop. Он предоставляет четкий и последовательный интерфейс для работы как с одноязычными, так и с многоязычными полями, гарантируя, что данные будут правильно отформатированы и проверены перед отправкой в API. Благодаря надежной обработке ошибок и поддержке значений по умолчанию, класс упрощает процесс работы с данными товаров в PrestaShop.