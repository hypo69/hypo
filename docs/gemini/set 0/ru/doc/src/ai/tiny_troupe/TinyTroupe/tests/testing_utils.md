# Модуль `hypotez/src/ai/tiny_troupe/TinyTroupe/tests/testing_utils.py`

## Обзор

Этот модуль предоставляет вспомогательные функции для тестирования компонентов TinyTroupe. Он содержит функции для проверки действий и стимулов, определения, завершается ли последовательность действий определенным типом действия, проверки предложений, работы с сообщениями для LLM, сравнения конфигураций агентов и управления файлами. Также модуль включает фикстуры для создания тестовых миров.

## Функции

### `contains_action_type`

**Описание**: Проверяет, содержит ли заданный список действий действие заданного типа.

**Параметры**:
- `actions` (list): Список словарей действий. Каждый словарь должен содержать ключ "action" со словарем, содержащим ключ "type".
- `action_type` (str): Тип искомого действия.

**Возвращает**:
- `bool`: `True`, если действие заданного типа найдено в списке действий, иначе `False`.

### `contains_action_content`

**Описание**: Проверяет, содержит ли заданный список действий действие с заданным содержанием.

**Параметры**:
- `actions` (list): Список словарей действий.
- `action_content` (str): Содержание, которое ищется в действиях.

**Возвращает**:
- `bool`: `True`, если действие с указанным содержанием найдено в списке, иначе `False`.

### `contains_stimulus_type`

**Описание**: Проверяет, содержит ли заданный список стимулов стимул заданного типа.

**Параметры**:
- `stimuli` (list): Список словарей стимулов. Каждый словарь должен содержать ключ "type".
- `stimulus_type` (str): Тип искомого стимула.

**Возвращает**:
- `bool`: `True`, если стимул заданного типа найден в списке стимулов, иначе `False`.


### `contains_stimulus_content`

**Описание**: Проверяет, содержит ли заданный список стимулов стимул с заданным содержанием.

**Параметры**:
- `stimuli` (list): Список словарей стимулов.
- `stimulus_content` (str): Содержание, которое ищется в стимулах.

**Возвращает**:
- `bool`: `True`, если стимул с указанным содержанием найден в списке, иначе `False`.


### `terminates_with_action_type`

**Описание**: Проверяет, завершается ли заданный список действий действием заданного типа.

**Параметры**:
- `actions` (list): Список словарей действий.
- `action_type` (str): Тип искомого действия.

**Возвращает**:
- `bool`: `True`, если последнее действие в списке имеет заданный тип, иначе `False`. Возвращает `False`, если список пуст.


### `proposition_holds`

**Описание**: Проверяет, является ли заданное предложение истинным с помощью вызова LLM.

**Параметры**:
- `proposition` (str): Проверяемое предложение.

**Возвращает**:
- `bool`: `True`, если предложение истинно, `False`, если ложно.

**Вызывает исключения**:
- `Exception`: Если LLM возвращает неожиданный результат.


### `only_alphanumeric`

**Описание**: Возвращает строку, содержащую только алфавитно-цифровые символы из входной строки.

**Параметры**:
- `string` (str): Входная строка.

**Возвращает**:
- `str`: Строка, содержащая только алфавитно-цифровые символы.


### `create_test_system_user_message`

**Описание**: Создает список, содержащий одно системное сообщение и одно пользовательское сообщение.

**Параметры**:
- `user_prompt` (str): Текст пользовательского сообщения.
- `system_prompt` (str, optional): Текст системного сообщения. По умолчанию "You are a helpful AI assistant.".

**Возвращает**:
- `list`: Список из словарей, содержащих системное и пользовательское сообщения.


### `agents_configs_are_equal`

**Описание**: Проверяет, равны ли конфигурации двух агентов.

**Параметры**:
- `agent1`: Первый агент.
- `agent2`: Второй агент.
- `ignore_name` (bool, optional): Если `True`, игнорирует сравнение имени агентов. По умолчанию `False`.

**Возвращает**:
- `bool`: `True`, если конфигурации равны, иначе `False`.

### `remove_file_if_exists`

**Описание**: Удаляет файл по заданному пути, если он существует.

**Параметры**:
- `file_path` (str): Путь к файлу.

**Возвращает**:
- `None`


### `get_relative_to_test_path`

**Описание**: Возвращает путь к тестовому файлу с заданным суффиксом.

**Параметры**:
- `path_suffix` (str): Суффикс пути к тестовому файлу.

**Возвращает**:
- `str`: Путь к тестовому файлу.


## Фикстуры

### `focus_group_world`

**Описание**: Создает тестовый мир "Focus group" с тремя агентами (Lisa, Oscar, Marcos).

**Возвращает**:
- `TinyWorld`: Тестовый мир.

### `setup`

**Описание**:  Очищает список агентов и миров.

**Возвращает**:
- `None` (Используется как фикстура для подготовки среды перед другими тестами.)