# Модуль для логирования времени выполнения

## Обзор

Модуль содержит функции для измерения времени выполнения различных методов (`callable`) и логирования этого времени. Функции `log_time_async`, `log_time_yield` и `log_time` позволяют измерять время выполнения асинхронных, генераторных и обычных функций соответственно.

## Подробней

Этот модуль предоставляет простой способ оценки производительности различных частей кода. Он может быть использован для выявления узких мест и оптимизации времени выполнения. Анализ времени выполнения помогает понять, какие функции или методы занимают больше всего времени, и, следовательно, какие части кода нуждаются в оптимизации.

## Функции

### `log_time_async`

```python
async def log_time_async(method: callable, **kwargs):
    """
    Асинхронно измеряет время выполнения переданного метода и возвращает результат вместе со временем выполнения.

    Args:
        method (callable): Асинхронный метод, время выполнения которого нужно измерить.
        **kwargs: Произвольные именованные аргументы, передаваемые в метод.

    Returns:
        str: Результат выполнения метода, объединенный со временем выполнения, если метод возвращает результат, или только время выполнения, если результат отсутствует.

    Как работает функция:
    1. Измеряет время начала выполнения метода.
    2. Выполняет переданный асинхронный метод с заданными аргументами.
    3. Измеряет время окончания выполнения метода.
    4. Вычисляет время выполнения в секундах и форматирует его в строку.
    5. Возвращает результат выполнения метода, объединенный со временем выполнения, если метод возвращает результат, или только время выполнения, если результат отсутствует.

    ASCII flowchart:
    Начало --> Запись времени начала (start_time)
    ↓
    Выполнение асинхронного метода (result = await method(**kwargs))
    ↓
    Запись времени окончания (end_time)
    ↓
    Вычисление времени выполнения (execution_time)
    ↓
    Форматирование результата (formatted_result)
    ↓
    Возврат результата (return formatted_result)

    Примеры:
    ```python
    async def my_async_func(arg1: int, arg2: str) -> str:
        await asyncio.sleep(1)  # Имитация асинхронной операции
        return f"Result: {arg1}, {arg2}"

    async def main():
        result = await log_time_async(my_async_func, arg1=10, arg2="test")
        print(result)
    ```
    """
```

### `log_time_yield`

```python
def log_time_yield(method: callable, **kwargs):
    """
    Измеряет время выполнения генератора и добавляет время выполнения к каждому возвращаемому значению.

    Args:
        method (callable): Метод-генератор, время выполнения которого нужно измерить.
        **kwargs: Произвольные именованные аргументы, передаваемые в метод-генератор.

    Yields:
        str: Результат выполнения генератора с добавленным временем выполнения.

    Как работает функция:
    1. Измеряет время начала выполнения генератора.
    2. Выполняет генератор и получает его значения.
    3. После завершения генератора измеряет время окончания выполнения.
    4. Вычисляет время выполнения в секундах и форматирует его в строку.
    5. Добавляет время выполнения к каждому возвращаемому значению генератора.

    ASCII flowchart:
    Начало --> Запись времени начала (start_time)
    ↓
    Выполнение генератора (yield from method(**kwargs))
    ↓
    Запись времени окончания (end_time)
    ↓
    Вычисление времени выполнения (execution_time)
    ↓
    Форматирование времени (formatted_time)
    ↓
    Добавление времени к результату (yield result + formatted_time)

    Примеры:
    ```python
    def my_generator(n: int):
        for i in range(n):
            yield f"Value: {i}"

    for value in log_time_yield(my_generator, n=3):
        print(value)
    ```
    """
```

### `log_time`

```python
def log_time(method: callable, **kwargs):
    """
    Измеряет время выполнения переданного метода и возвращает результат вместе со временем выполнения.

    Args:
        method (callable): Метод, время выполнения которого нужно измерить.
        **kwargs: Произвольные именованные аргументы, передаваемые в метод.

    Returns:
        str: Результат выполнения метода, объединенный со временем выполнения, если метод возвращает результат, или только время выполнения, если результат отсутствует.

    Как работает функция:
    1. Измеряет время начала выполнения метода.
    2. Выполняет переданный метод с заданными аргументами.
    3. Измеряет время окончания выполнения метода.
    4. Вычисляет время выполнения в секундах и форматирует его в строку.
    5. Возвращает результат выполнения метода, объединенный со временем выполнения, если метод возвращает результат, или только время выполнения, если результат отсутствует.

    ASCII flowchart:
    Начало --> Запись времени начала (start_time)
    ↓
    Выполнение метода (result = method(**kwargs))
    ↓
    Запись времени окончания (end_time)
    ↓
    Вычисление времени выполнения (execution_time)
    ↓
    Форматирование результата (formatted_result)
    ↓
    Возврат результата (return formatted_result)

    Примеры:
    ```python
    def my_func(arg1: int, arg2: str) -> str:
        time.sleep(1)  # Имитация длительной операции
        return f"Result: {arg1}, {arg2}"

    result = log_time(my_func, arg1=10, arg2="test")
    print(result)
    ```
    """