```markdown
# README.md for cross-spawn

This file describes the `cross-spawn` Node.js package, a cross-platform solution for executing commands using `spawn` and `spawnSync`. It addresses issues with Node.js's built-in `child_process.spawn` on Windows, particularly regarding PATHEXT, shebangs, argument handling, and the use of command shims.

## Key Features

* **Cross-platform compatibility:**  Handles the quirks of different operating systems, especially Windows.
* **Robust argument handling:**  Properly escapes arguments to prevent errors, especially with spaces, quotes, and special characters.
* **Shebang support (limited):** Supports `#!/usr/bin/env <program>` type shebangs (with limitations on the `<program>`).
* **Drop-in replacement:**  Uses the same API as Node's `spawn` and `spawnSync`, making it easy to integrate into existing code.

## Installation

**Node.js 8 and above:**

```bash
npm install cross-spawn
```

**Node.js 7 and below:**

```bash
npm install cross-spawn@6
```

## Why use cross-spawn?

Node.js's built-in `spawn` function has several shortcomings on Windows, such as:

* **PATHEXT issues:**  Incorrect handling of file extensions.
* **Shebang problems:**  Difficulty with executable scripts using shebang lines.
* **Argument escaping:**  Poor handling of spaces and special characters in arguments.
* **POSIX path issues:**  Incorrect execution of commands with relative paths.
* **Shim issues:** Problems with commands residing within `node_modules/.bin`.


These issues can lead to unexpected behavior, errors, or non-deterministic results.  `cross-spawn` addresses these limitations for greater reliability across different platforms.

## Usage

The usage of `cross-spawn` is identical to Node.js's `spawn` and `spawnSync` functions, making it easy to integrate into existing code:

```javascript
const spawn = require('cross-spawn');

// Asynchronous execution
const child = spawn('npm', ['list', '-g', '-depth', '0'], { stdio: 'inherit' });

// Synchronous execution
const result = spawn.sync('npm', ['list', '-g', '-depth', '0'], { stdio: 'inherit' });
```

## Caveats and Important Considerations

* **`options.shell`:** While `cross-spawn` supports `options.shell`, it *disables* its enhancements for Node versions below v4.8 for improved reliability.  Using `options.shell` directly in `cross-spawn` on older Node versions is discouraged and may not provide the intended results.
* **Shebang limitations:** Shebang support is limited in `cross-spawn`; it doesn't handle general shebangs fully.  This is by design.
* **Testing on Windows:** Always test your code on Windows to ensure it functions as expected across all platforms.

## Conclusion

`cross-spawn` provides a robust and reliable solution for executing commands in Node.js, especially when cross-platform compatibility is required.  Its robust argument handling and shebang support mitigate potential issues on different operating systems, ensuring more consistent results.  Be aware of the caveats regarding `options.shell` and shebangs for optimal use.
```