# Модуль `hypotez/src/scenario/executor.py`

## Обзор

Модуль `src.scenario.executor` предназначен для выполнения сценариев, загрузки их из файлов, извлечения информации о продуктах и вставки данных в PrestaShop.  Модуль обрабатывает списки сценариев и выполняет их последовательно.  Он включает в себя функции для управления файлами сценариев и их запуском.

## Оглавление

* [Функции](#функции)
    * [`dump_journal`](#dump_journal)
    * [`run_scenario_files`](#run_scenario_files)
    * [`run_scenario_file`](#run_scenario_file)
    * [`run_scenarios`](#run_scenarios)
    * [`run_scenario`](#run_scenario)
    * [`insert_grabbed_data`](#insert_grabbed_data)
    * [`execute_PrestaShop_insert_async`](#execute_prestashop_insert_async)
    * [`execute_PrestaShop_insert`](#execute_prestashop_insert)

## Функции

### `dump_journal`

**Описание**: Сохраняет данные журнала в файл JSON.

**Параметры**:
- `s` (Supplier): Экземпляр класса поставщика.
- `journal` (dict): Словарь с данными журнала.

**Возвращает**:
-  (None):  Функция не возвращает значение.


### `run_scenario_files`

**Описание**: Выполняет список файлов сценариев.

**Параметры**:
- `s` (Supplier): Экземпляр класса поставщика.
- `scenario_files_list` (List[Path] | Path): Список путей к файлам сценариев или один путь к файлу.

**Возвращает**:
- bool: `True`, если все сценарии были выполнены успешно, `False` в противном случае.

**Возможные исключения**:
- `TypeError`: если `scenario_files_list` не является списком или строкой.


### `run_scenario_file`

**Описание**: Загружает и выполняет сценарии из файла.

**Параметры**:
- `s` (Supplier): Экземпляр класса поставщика.
- `scenario_file` (Path): Путь к файлу сценария.

**Возвращает**:
- bool: `True`, если сценарий был выполнен успешно, `False` в противном случае.

**Возможные исключения**:
- `FileNotFoundError`: Если файл не найден.
- `json.JSONDecodeError`: Если файл не является валидным JSON.


### `run_scenarios`

**Описание**: Выполняет список сценариев (НЕ файлов).

**Параметры**:
- `s` (Supplier): Экземпляр класса поставщика.
- `scenarios` (List[dict] | dict): Список сценариев или один сценарий в виде словаря.

**Возвращает**:
- List | dict | False: Результат выполнения сценариев в виде списка или словаря, или `False` в случае ошибки.

**Примечания**:
- Функция проверяет тип входных данных `scenarios`.
- Если `scenarios` не указан, берется значение из `s.current_scenario`.
- Результаты выполнения каждого сценария сохраняются в журнале `_journal`.


### `run_scenario`

**Описание**: Выполняет полученный сценарий.

**Параметры**:
- `supplier` (Supplier): Экземпляр класса поставщика.
- `scenario` (dict): Словарь, содержащий детали сценария.
- `scenario_name` (str): Имя сценария.

**Возвращает**:
- List | dict | False: Результат выполнения сценария.


### `insert_grabbed_data`

**Описание**: Вставляет полученные данные о продукте в PrestaShop.

**Параметры**:
- `product_fields` (ProductFields): Экземпляр класса, содержащий информацию о продукте.

**Возвращает**:
- None

**Примечания**:
- Эта функция перемещена в `execute_PrestaShop_insert`.


### `execute_PrestaShop_insert_async`

**Описание**: Асинхронная функция для вставки продукта в PrestaShop.

**Параметры**:
- `f` (ProductFields): Информация о продукте.
- `coupon_code` (str, необязательно): Купон.
- `start_date` (str, необязательно): Начало акции.
- `end_date` (str, необязательно): Конец акции.


**Возвращает**:
- bool: Успешность выполнения операции.

**Примечания**:
- Использует `execute_PrestaShop_insert` для выполнения операции.


### `execute_PrestaShop_insert`

**Описание**: Вставляет продукт в PrestaShop.

**Параметры**:
- `f` (ProductFields): Информация о продукте.
- `coupon_code` (str, необязательно): Купон.
- `start_date` (str, необязательно): Начало акции.
- `end_date` (str, необязательно): Конец акции.


**Возвращает**:
- bool: Успешность выполнения операции.

**Возможные исключения**:
- Любые исключения, возникающие при взаимодействии с PrestaShop.