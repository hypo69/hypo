# Анализ кода модуля `header.py`

**Качество кода**
7
-  Плюсы
    - Код выполняет свою функцию - определение корневой директории проекта.
    -  Используется `pathlib` для работы с путями, что является хорошей практикой.
    - Есть docstring для функции, что облегчает понимание кода.
    - Проверка наличия корневой директории и добавление ее в `sys.path`.
-  Минусы
    - Отсутствует описание модуля в формате RST.
    - Нет документации для переменной `__root__` в формате RST.
    - Не соответствие PEP8, отсутствует комментарии в блоках кода.
    - Малоинформативное название `marker_files` (лучше `root_markers`).
    - Не используется константа для  `0` при вставке пути в `sys.path`.
    - Нет примеров использования.

**Рекомендации по улучшению**

1.  Добавить описание модуля в формате RST.
2.  Добавить документацию для переменной `__root__` в формате RST.
3.  Добавить комментарии, объясняющие логику каждого блока кода.
4.  Использовать более информативное название для `marker_files`, например `root_markers`.
5.  Использовать константу `0` при вставке пути в `sys.path`.
6.  Добавить примеры использования.
7.  Привести форматирование к PEP8.

**Оптимизированный код**

```python
# -*- coding: utf-8 -*-
"""
Модуль для определения корневой директории проекта.
==================================================

Этот модуль определяет корневой путь к проекту, который используется для
всех импортов.

Пример использования:
--------------------

.. code-block:: python

    from src.utils.header import __root__
    print(__root__) # Выведет путь к корневой директории проекта.
"""
import sys
from pathlib import Path

_SYS_PATH_INSERT_INDEX = 0


def set_project_root(root_markers: tuple[str, ...] = ('__root__', '.git')) -> Path:
    """Определение корневой директории проекта.

    Функция ищет корневую директорию проекта, начиная с директории файла.
    Поиск ведется вверх по дереву каталогов до тех пор, пока не будет найдена
    директория, содержащая один из файлов-маркеров.

    :param root_markers: Список имен файлов или директорий, которые являются маркерами корневой директории.
    :type root_markers: tuple
    :return: Путь к корневой директории проекта.
    :rtype: Path
    :raises FileNotFoundError: Если корневая директория не найдена.

    Пример:

    .. code-block:: python

        from src.utils.header import set_project_root
        root_path = set_project_root()
        print(root_path)
    """
    __root__: Path  # Объявляем переменную __root__ с типом Path
    current_path: Path = Path(__file__).resolve().parent  # Получаем абсолютный путь к директории текущего файла
    __root__ = current_path  # Присваиваем текущий путь как начальное значение для __root__

    # Проходим по текущей директории и ее родительским директориям
    for parent in [current_path] + list(current_path.parents):
        # Если в директории есть хотя бы один из файлов-маркеров
        if any((parent / marker).exists() for marker in root_markers):
            __root__ = parent  # Записываем родительскую директорию в __root__
            break  # Прерываем цикл

    # Если корневая директория не в sys.path
    if __root__ not in sys.path:
        sys.path.insert(_SYS_PATH_INSERT_INDEX, str(__root__))  # Добавляем корневую директорию в sys.path
    return __root__


# Код исполняет определение корневой директории проекта.
__root__: Path = set_project_root()
"""
Path: Путь к корневой директории проекта.
"""
```