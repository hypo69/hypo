### Анализ кода модуля `readme.ru.md`

**Качество кода**:
- **Соответствие стандартам**: 8
- **Плюсы**:
    - Хорошо структурированное описание модуля `Code Assistant`.
    - Подробное описание основных возможностей, включая `code_assistant.py`, `make_summary.py`, `onela_bot.py`, и `bot_handlers.py`.
    - Ясное изложение структуры проекта, включая модели, промпты и типы файлов.
    - Наличие примеров использования с различными параметрами командной строки.
    - Описание параметров командной строки.
    - Описание логики работы модуля.
    - Описание параметров для исключений файлов и директорий.
    - Описание логирования.
    - Описание зависимостей.
    - Раздел по созданию новых ролей для моделей ИИ.
- **Минусы**:
    - Отсутствует явное указание на необходимость использования `j_loads` или `j_loads_ns` из `src.utils.jjson`.
    - Нет явного указания на использование `from src.logger import logger` для логирования.
    - Нет явного указания на использование одинарных кавычек в коде (кроме вывода).
    - Отсутствие примеров RST-документации для функций и модулей.

**Рекомендации по улучшению**:
- Добавить в описание явное указание на необходимость использовать `j_loads` или `j_loads_ns` вместо стандартного `json.load`.
- Явно указать, что логирование должно происходить через `from src.logger import logger`.
- Добавить в текст упоминание о необходимости использования одинарных кавычек (`'`) в Python коде и двойных кавычек (`"`) только для вывода.
- Добавить примеры RST-документации для функций и модулей, как указано в инструкции.
- Добавить в описание упоминание о необходимости использовать форматирование кода согласно PEP8.
- Уточнить формулировки в описании, избегая неясных фраз типа "получаем" или "делаем".

**Оптимизированный код**:
```rst
.. module:: src.endpoints.hypo69.code_assistant

```
<TABLE >
<TR>
<TD>
<A HREF = 'https://github.com/hypo69/hypo/blob/master/readme.ru.md'>[Root ↑]</A>
</TD>
<TD>
<A HREF = 'https://github.com/hypo69/hypo/blob/master/src/readme.ru.md'>src</A> \ 
<A HREF = 'https://github.com/hypo69/hypo/blob/master/src/endpoints/readme.ru.md'>endpoints</A> \
<A HREF = 'https://github.com/hypo69/hypo/blob/master/src/endpoints/hypo69/readme.ru.md'>hypo69</A>

</TD>
<TD>
<A HREF = 'https://github.com/hypo69/hypo/blob/master/src/endpoints/hypo69/code_assistant/README.MD'>English</A>
</TD>
</TR>
</TABLE>

# Модуль `Code Assistant`

## Обзор
```rst
Модуль `Code Assistant` представляет собой набор инструментов для взаимодействия с моделями **Gemini** и **OpenAI** с целью обработки исходного кода проекта. 
Он выполняет задачи, такие как создание документации, проверка кода и генерация тестов на основе указанных файлов. 
Также включает скрипты для создания файла `SUMMARY.md` для компиляции документации и Telegram-бота для обработки задач, связанных с кодом.
```

## Основные возможности

### `code_assistant.py`
```rst
- **Чтение файлов**: Читает код из файлов с расширениями `.py` и `README.MD` в указанных директориях.
- **Взаимодействие с моделями**: Отправляет код в модели для выполнения задач, таких как создание документации или проверка ошибок.
- **Генерация результатов**: Сохраняет ответы моделей в указанные директории для каждой роли.
```

### `make_summary.py`
```rst
- **Генерация `SUMMARY.md`**: Рекурсивно обходит директорию для создания файла `SUMMARY.md` для компиляции документации.
- **Фильтрация по языку**: Поддерживает фильтрацию файлов по языку (`ru` или `en`).
```

### `onela_bot.py` и `bot_handlers.py`
```rst
- **Telegram-бот**: Бот для обработки задач, связанных с кодом, таких как отправка фрагментов кода на проверку или генерация документации.
- **Обработчики бота**: Содержит обработчики для команд и сообщений бота.
```

## Структура проекта
```rst
- **Модели**: Используются модели **Gemini** и **OpenAI** для обработки запросов.
- **Промпты**: Читает промпты из файлов в директории `src/ai/prompts/developer/` (например, `doc_writer_en.md`).
- **Файлы**: Обрабатываются файлы с расширениями `.py` и `README.MD` в указанных директориях.
```

## Примеры использования

### Запуск с настройками из JSON:
```bash
python code_assistant.py --settings settings.json
```

### Запуск с явным указанием параметров:
```bash
python code_assistant.py --role doc_writer --lang ru --models gemini openai --start_dirs /path/to/dir1 /path/to/dir2
```

### Пример для роли `code_checker`:
```bash
python code_assistant.py --role code_checker --lang en --models gemini --start_dirs /path/to/dir
```

### Пример для модели `openai`:
```bash
python code_assistant.py --role doc_writer --lang en --models openai
```

## Параметры командной строки
```rst
- `--settings`: Путь к JSON-файлу с настройками. Загружает параметры из файла.
- `--role`: Роль модели для выполнения задачи (например, `doc_writer`, `code_checker`).
- `--lang`: Язык выполнения задачи (например, `ru` или `en`).
- `--models`: Список моделей для инициализации (например, `gemini`, `openai`).
- `--start_dirs`: Список директорий для обработки (например, `/path/to/dir1`).
```

## Логика работы
```rst
1. **Чтение файлов**: Ищет файлы с расширениями `.py` и `README.MD` в указанных директориях.
2. **Загрузка промптов**: Загружает промпты для каждой роли из директории `src/ai/prompts/developer/`.
3. **Обработка запросов**: Формирует запросы на основе загруженных файлов и отправляет их в модели.
4. **Сохранение ответов**: Сохраняет ответы моделей в директории, соответствующие роли и модели (например, `docs/raw_rst_from_<model>/<lang>/`).
```

## Исключения
```rst
Настройка исключений для файлов и директорий с помощью параметров:
- `exclude_file_patterns`: Список регулярных выражений для исключения файлов.
- `exclude_dirs`: Список директорий для исключения.
- `exclude_files`: Список файлов для исключения.
```

## Логирование
```rst
Логи сохраняются с помощью библиотеки `logger` и содержат информацию о процессе обработки файлов и полученных ответах.
Для корректного логирования используйте импорт:
```python
from src.logger import logger
```
```rst
В коде используйте :func:`logger.error` для обработки ошибок.
```

## Зависимости
```rst
- **Gemini API**: Требуется API-ключ для работы с моделью Gemini.
- **OpenAI API**: Требуется API-ключ для работы с моделью OpenAI.
```

## Создание новой роли для моделей ИИ
```rst
1. **Обновление `code_assistant.json`**:
   - Добавьте новую роль в список ролей:
     ```json
     "roles": [
       "code_checker",
       ...
     ]
     ```
   - Или исключите её в `"exclude-roles"`.

2. **Добавление роли в переводы**:
   - Обновите файл `translations/translations.json` с новой ролью.

3. **Создание системного промпта**:
   - Добавьте новый системный промпт в директорию `ai/prompts/developer/`.

4. **Создание командной инструкции**:
   - Добавьте новую команду в директорию `instructions/`.
```
```rst
.. note::
   При работе с кодом, **используйте одинарные кавычки** (`'`) для строк, списков и словарей в Python. Например:
   
   .. code-block:: python

      a = 'A1'
      b = ['a', 'b']
      c = {'key': 'value'}
   
   **Двойные кавычки** (`"`) используйте только для операций вывода:
   
   .. code-block:: python
   
      print("Hello, world!")
      input("Введите имя: ")
      logger.error("Ошибка")
      
   Для обработки JSON используйте `j_loads` или `j_loads_ns` из `src.utils.jjson` вместо стандартного `json.load`.
   
   Соблюдайте форматирование кода согласно стандарту PEP8.
```