# Модуль для запуска рекламных кампаний в Facebook

## Обзор

Модуль `src.endpoints.advertisement.facebook.start_sergey` предназначен для автоматизации процесса запуска и управления рекламными кампаниями в социальной сети Facebook. Он предоставляет функциональность для настройки параметров кампаний, выбора целевых групп и языковых настроек, а также обеспечивает логирование и обработку исключений.

## Подробнее

Модуль предназначен для автоматизации процессов, связанных с размещением рекламы в Facebook, включая выбор групп для размещения, определение языковых и валютных настроек, а также управление циклами кампаний.

## Функции

### `run_campaign`

```python
def run_campaign(d: Driver, promoter_name: str, campaigns: list | str, group_file_paths: list, language: str, currency: str):
    """Запуск рекламной кампании.

    Args:
        d (Driver): Экземпляр драйвера.
        promoter_name (str): Имя рекламодателя.
        campaigns (list): Список кампаний.
        group_file_paths (list): Пути к файлам с группами.
        language (str): Язык рекламной кампании.
        currency (str): Валюта рекламной кампании.
    """
    ...
```

**Назначение**: Запускает рекламную кампанию с заданными параметрами.

**Параметры**:

-   `d` (Driver): Экземпляр драйвера, используемый для управления браузером.
-   `promoter_name` (str): Имя рекламодателя.
-   `campaigns` (list | str): Список кампаний для запуска.
-   `group_file_paths` (list): Список путей к файлам, содержащим информацию о группах Facebook для размещения рекламы.
-   `language` (str): Язык, на котором будет отображаться рекламная кампания.
-   `currency` (str): Валюта, используемая в рекламной кампании.

**Как работает функция**:

1.  Создает экземпляр класса `FacebookPromoter`.
2.  Вызывает метод `run_campaigns` экземпляра `FacebookPromoter` для запуска рекламных кампаний с переданными параметрами.

**Примеры**:

```python
from src.webdriver.driver import Driver, Chrome
d = Driver(Chrome)
run_campaign(d, 'kazarinov', ['campaign1'], ['groups.json'], 'RU', 'ILS')
```

### `campaign_cycle`

```python
def campaign_cycle(d: Driver):
    """Цикл для управления запуском кампаний.

    Args:
        d (Driver): Экземпляр драйвера.
        aliexpress_adv (bool): Флаг для определения рекламодателя.
    """
    ...
```

**Назначение**: Управляет циклом запуска рекламных кампаний для разных языковых и валютных пар.

**Параметры**:

-   `d` (Driver): Экземпляр драйвера, используемый для управления браузером.
-   `aliexpress_adv` (bool): Флаг для определения рекламодателя.

**Как работает функция**:

1.  Определяет списки путей к файлам с группами и рекламными объявлениями для русского и ивритского языков.
2.  Определяет список словарей, содержащих языковые и валютные пары (`language_currency_pairs`).
3.  Для каждой языковой и валютной пары:
    *   Определяет список кампаний для запуска.
    *   Запускает кампании для рекламодателя "kazarinov".
    *   Получает список кампаний для "aliexpress" из директории Google Drive.
    *   Запускает кампании для рекламодателя "aliexpress".

**Примеры**:

```python
from src.webdriver.driver import Driver, Chrome
d = Driver(Chrome)
campaign_cycle(d)
```

### `main`

```python
def main():
    """Основная функция для запуска рекламных кампаний."""
    try:
        d = Driver(Chrome)
        d.get_url(r"https://facebook.com")
        aliexpress_adv = True

        while True:
            if interval():
                print("Good night!")
                time.sleep(1000)

            # Первый цикл для русскоязычных кампаний
            campaign_cycle(d)
            ...

            # Логирование и задержка
            logger.debug(f"going to sleep at {time.strftime('%H:%M:%S')}", None, False)
            t = random.randint(30, 360)
            print(f"sleeping {t} sec")
            time.sleep(t)

    except KeyboardInterrupt:
        logger.info("Campaign promotion interrupted.")
```

**Назначение**: Основная функция для запуска рекламных кампаний.

**Как работает функция**:

1.  Инициализирует драйвер Chrome и открывает Facebook.
2.  Запускает бесконечный цикл, в котором:
    *   Если выполняется условие `interval()`, ждет 1000 секунд.
    *   Запускает цикл кампаний `campaign_cycle(d)`.
    *   Выполняет логирование и задержку на случайное время от 30 до 360 секунд.
3.  Обрабатывает прерывание с клавиатуры (`KeyboardInterrupt`), логируя информацию о прерывании кампании.

**ASCII flowchart функции `main`**:

```
    A[Инициализация драйвера Chrome и открытие Facebook]
    |
    B[Вход в бесконечный цикл]
    |
    C{interval()}
    |Да
    D[Ожидание 1000 секунд]
    |Нет
    E[Запуск campaign_cycle(d)]
    |
    F[Логирование и задержка]
    |
    G[Возврат к B]
```

Где:

-   `A`: Инициализация драйвера Chrome и открытие Facebook.
-   `B`: Вход в бесконечный цикл.
-   `C`: Проверка условия `interval()`.
-   `D`: Ожидание 1000 секунд, если `interval()` возвращает `True`.
-   `E`: Запуск `campaign_cycle(d)`.
-   `F`: Логирование и задержка.
-   `G`: Возврат к началу цикла.

**Примеры**:

```python
if __name__ == "__main__":
    main()