## Ответ на Задачу No 141: Квадратные числа, формируемые делением

### 1. Анализ задачи и решение
**Понимание задачи:**
Нам нужно найти все числа `n` меньше 10<sup>15</sup>, которые удовлетворяют условию `n = d * q + r`, где `q = d + r` и `r² = n`.
Подставив `q` в первое уравнение, получаем `n = d * (d + r) + r`.  Из условия `r² = n`,  мы имеем `r² = d² + dr + r` => `d² + dr + r - r² = 0`.
Выразим `d` через `r` получаем `d = (-r +/- sqrt(r² - 4 * (r - r²)))/2`.
Из условия, что d целое положительное число,  следовательно дискриминант должен быть полным квадратом.
Так же мы знаем, что `d` положительное целое, то есть корень должен быть положительным и `d` целым.

**Решение:**
1.  Из условия `r² = n`, мы можем перебирать значения `r` и проверить, соответствует ли `n` условиям.
2.  `d = (-r + sqrt(r² - 4 * (r - r²))) / 2`
3.  Дискриминант  `D = r² - 4r + 4r² = 5r² - 4r`. 
4.  Для существования целого `d` нужно, чтобы `D` был полным квадратом. Пусть `D=s²` тогда `5r² - 4r = s²`
5. `s` - это целое число.
6.  Перебирая `r`, нужно проверить `5r² - 4r` на полный квадрат, и что `d` целое и положительное.
7.  Если условия выполняются, то добавляем `n=r²` к сумме.
8.  Останавливаемся когда `n >= 10^15`
9. Важно учесть, что при `r=0` получаем `n=0`. Нуль не является натуральным числом, а значит, его не нужно включать.

### 2. Алгоритм решения
1.  Начать
2.  Инициализировать `total_sum` = 0
3.  Инициализировать `r` = 1
4.  Пока `r² < 10^15`:
    *   Вычислить `discriminant = 5 * r² - 4 * r`
    *   Вычислить `s = sqrt(discriminant)`
    *   Если `s` - целое число:
        *   Вычислить `d = (-r + s) / 2`
        *   Если `d` - целое и `d` > 0:
            *   Добавить `r²` к `total_sum`
    *   Увеличить `r` на 1
5.  Вернуть `total_sum`
6.  Конец

### 3. Реализация на Python 3.12
```python
import math

def solve():
    limit = 10**15
    total_sum = 0
    r = 1
    while r**2 < limit:
        discriminant = 5 * r**2 - 4 * r
        s = math.sqrt(discriminant)
        if s == int(s):
            d = (-r + s) / 2
            if d == int(d) and d > 0:
                total_sum += r**2
        r += 1
    return total_sum

result = solve()
print(result)
```

### 4. Блок-схема в формате mermaid
```mermaid
flowchart TD
    Start((Начало)) --> InitializeSum((Инициализировать total_sum = 0))
    InitializeSum --> InitializeR((Инициализировать r = 1))
    InitializeR --> LoopCondition((r² < 10¹⁵?))
    LoopCondition -- Да --> CalculateDiscriminant((discriminant = 5r² - 4r))
    CalculateDiscriminant --> CalculateS((s = sqrt(discriminant)))
    CalculateS --> CheckSInteger((s целое число?))
     CheckSInteger -- Да --> CalculateD((d = (-r + s) / 2))
    CalculateD --> CheckDInteger((d целое и d > 0?))
    CheckDInteger -- Да --> AddR2ToSum((total_sum += r²))
    AddR2ToSum --> IncrementR((r += 1))
    CheckDInteger -- Нет --> IncrementR
     CheckSInteger -- Нет --> IncrementR
    IncrementR --> LoopCondition
    LoopCondition -- Нет --> ReturnSum((Вернуть total_sum))
    ReturnSum --> End((Конец))
```

**Легенда:**
*   **Начало, Конец:** Начало и конец алгоритма.
*   **Инициализировать total\_sum:** Создаем переменную для хранения результата и присваиваем ей значение 0.
*   **Инициализировать r:** Инициализируем переменную `r` значением 1.
*   **r² < 10¹⁵?:** Проверяем условие, что квадрат `r` меньше предела.
*   **discriminant = 5r² - 4r:**  Вычисляем дискриминант.
*   **s = sqrt(discriminant):** Вычисляем корень квадратный из дискриминанта.
*   **s целое число?:** Проверяем, является ли корень целым числом.
*  **d = (-r + s) / 2:** Вычисляем `d`.
*   **d целое и d > 0?:** Проверяем, является ли `d` целым и положительным числом.
*   **total\_sum += r²:** Если условия выполняются, то добавляем `r²` к общей сумме.
*    **r += 1:** Увеличиваем `r` на 1.
*   **Вернуть total\_sum:** Возвращаем общую сумму.
