# Анализ кода модуля `5_bagles.ru.md`

**Качество кода**
9
-  Плюсы
    - Документ хорошо структурирован и содержит подробное описание игры "Bagels".
    - Описаны основные шаги реализации игры, включая инициализацию, основной цикл, проверку победы и завершение игры.
    - Приведены примеры работы программы, которые помогают понять игровой процесс.
    - Указаны дополнительные функции и возможные ограничения, что способствует пониманию всех аспектов игры.
    - Есть четкое разделение на разделы, что облегчает чтение и восприятие информации.
-  Минусы
    - Отсутствует код в документе, что делает невозможным автоматизированную проверку и применение рефакторинга.
    - Документ содержит инструкции для реализации, но не сам код.

**Рекомендации по улучшению**
1.  **Добавление кода**: Необходимо добавить пример реализации игры на Python (или другом языке), чтобы можно было применить рекомендации по улучшению кода.
2.  **Форматирование кода**: Код необходимо обрамить в блоки с подсветкой синтаксиса, например, ```python.
3.  **Docstrings**: Код должен быть прокомментирован с использованием reStructuredText (RST) docstrings для функций, классов и методов.
4.  **Логирование**: Необходимо использовать `logger` для логирования ошибок и важных событий.
5.  **Импорты**: Добавить необходимые импорты в начале файла.

**Оптимизированный код**
```markdown
### Название игры: **Bagels** (Логическая игра с числами)

#### Описание
Игра представляет собой задачу на угадывание трехзначного числа, сгенерированного компьютером. Цель игрока — угадать число за минимальное количество попыток, основываясь на подсказках компьютера.

- **Подсказки:**
  - **Bagels**: Ни одна цифра не угадана.
  - **Pico**: Угадана цифра, но она стоит не на своем месте.
  - **Fermi**: Угадана цифра, и она стоит на своем месте.

---

### Пошаговая инструкция для реализации

#### 1. **Инициализация игры**
   - Сгенерировать случайное трехзначное число без повторяющихся цифр.
     ```
     Например: 394
     ```

#### 2. **Основной цикл игры**
   - **Ход игрока**:
     1. Запросить трехзначное число от игрока.
     2. Проверить корректность ввода:
        - Число должно состоять из трех цифр.
        - Цифры не должны повторяться.
     3. Сравнить число игрока с загаданным числом.
   - **Подсказки**:
     - Для каждой цифры в числе игрока:
       - Если цифра совпадает по значению и позиции: добавить "Fermi".
       - Если цифра совпадает только по значению: добавить "Pico".
       - Если цифра не совпадает: ничего не добавлять.
     - Если не добавлено ни одной подсказки, вернуть "Bagels".
   - Отобразить подсказки игроку.

#### 3. **Проверка победы**
   - Если число игрока совпадает с загаданным:
     ```
     Поздравляем! Вы угадали число за [X] попыток.
     ```
   - Если число не угадано, продолжить игру.

#### 4. **Завершение игры**
   - После угаданного числа или превышения лимита попыток (например, 20), предложить начать новую игру:
     ```
     Хотите сыграть еще раз? (да/нет)
     ```

---

### Пример работы программы

1. **Начало игры**:
   ```
   Компьютер загадал трехзначное число. Попробуйте его угадать!
   Введите трехзначное число:
   > 123
   ```

2. **Подсказки**:
   ```
   Подсказки: Pico Fermi
   Введите трехзначное число:
   > 394
   ```

3. **Победа**:
   ```
   Подсказки: Fermi Fermi Fermi
   Поздравляем! Вы угадали число 394 за 2 попытки!
   Хотите сыграть еще раз? (да/нет)
   ```

---

### Дополнительные функции
- **Подсчет попыток**: Отображение текущего количества попыток.
- **Режим обучения**: Выводит загаданное число после каждой игры для анализа.
- **Сложность**:
  - Легкий режим: Подсказки выдаются сразу.
  - Сложный режим: Подсказки выдаются с задержкой.

---

### Возможные ограничения
- Игрок должен вводить корректные данные, иначе запрос повторяется.
- Проверка числа на отсутствие повторяющихся цифр.

---

### Реализация
Игра может быть реализована на любом языке программирования с использованием стандартных функций ввода-вывода. Если потребуется пример кода на Python, я готов его предоставить!

```python
"""
Модуль для реализации игры Bagels
=========================================================================================
Этот модуль содержит функции для запуска и управления игрой Bagels,
в которой компьютер генерирует случайное трехзначное число, а игрок
пытается его угадать, получая подсказки.

Пример использования
--------------------

Пример запуска игры:

.. code-block:: python

    play_bagels()
"""
import random
from src.logger.logger import logger  # импортируем logger


def generate_secret_number() -> str:
    """
    Генерирует случайное трехзначное число без повторяющихся цифр.
    
    :return: Строка, представляющая секретное число.
    """
    digits = list(range(10))
    random.shuffle(digits)
    secret_number = str(digits[0]) + str(digits[1]) + str(digits[2])
    if secret_number[0] == '0':
        # Если первая цифра 0, то перегенерируем число
        return generate_secret_number()
    return secret_number


def get_hints(guess: str, secret_number: str) -> str:
    """
    Предоставляет подсказки на основе предположения игрока и секретного числа.

    :param guess: Строка, представляющая предположение игрока.
    :param secret_number: Строка, представляющая секретное число.
    :return: Строка, содержащая подсказки (Fermi, Pico, Bagels).
    """
    hints = []
    for i, digit in enumerate(guess):
        if digit == secret_number[i]:
            hints.append("Fermi")
        elif digit in secret_number:
            hints.append("Pico")
    if not hints:
        return "Bagels"
    return " ".join(hints)


def is_valid_guess(guess: str) -> bool:
    """
    Проверяет, является ли предположение игрока валидным.
    
    :param guess: Строка, представляющая предположение игрока.
    :return: True, если предположение валидно, иначе False.
    """
    if not guess.isdigit() or len(guess) != 3:
        return False
    if len(set(guess)) != 3:
        return False
    return True


def play_bagels():
    """
    Запускает игру Bagels.
    """
    secret_number = generate_secret_number()
    attempts = 0
    max_attempts = 20
    logger.info(f"Компьютер загадал трехзначное число. Попробуйте его угадать!")  # Log начала игры
    
    while attempts < max_attempts:
        attempts += 1
        guess = input("Введите трехзначное число: ")

        if not is_valid_guess(guess):
            logger.warning(f"Некорректный ввод: {guess}. Пожалуйста, введите трехзначное число без повторяющихся цифр.")  # Log некорректного ввода
            continue
        
        hints = get_hints(guess, secret_number)
        print(f"Подсказки: {hints}")

        if hints == "Fermi Fermi Fermi":
             print(f"Поздравляем! Вы угадали число {secret_number} за {attempts} попытки!")  # Log победы
             break
    
    if attempts == max_attempts:
        print(f"Вы исчерпали все попытки. Загаданное число было {secret_number}.")  # Log поражения
    
    play_again = input("Хотите сыграть еще раз? (да/нет): ").lower()
    if play_again == "да":
        play_bagels()
    else:
        print("Спасибо за игру!")

if __name__ == "__main__":
    play_bagels()
```