# Анализ кода модуля `spacwrd.py`

**Качество кода**
-   **Соответствие требованиям к формату кода (1-10):** 7
    -   **Преимущества:**
        -   Код в целом читаемый и логически структурирован.
        -   Разделен на функции, что облегчает понимание и поддержку кода.
        -   Имеется описание алгоритма игры, блок-схема и псевдокод в комментариях, что помогает понять логику программы.
    -   **Недостатки:**
        -   Отсутствует использование `src.utils.jjson` для загрузки данных.
        -   Не хватает комментариев в формате RST для функций.
        -   Отсутствует обработка ошибок с использованием `logger.error`.
        -   Использование `print` вместо `logger` для сообщений в консоль.

**Рекомендации по улучшению**

1.  **Форматирование документации:**
    -   Добавить docstring в формате RST для модуля, функций.
    -   Удалить лишние комментарии не в формате RST.
2.  **Обработка данных:**
    -   В данном коде не используется загрузка данных из файла. Если это предполагается в будущем, следует использовать `j_loads` или `j_loads_ns`.
3.  **Логирование:**
    -   Заменить `print` на `logger.info` для вывода информационных сообщений.
    -   Использовать `logger.error` для логирования ошибок.
4.  **Обработка исключений:**
    -   Избегать избыточного использования try-except. В данном коде это не требуется, так как ввод пользователя обрабатывается логикой программы.
5.  **Улучшение читаемости:**
    -   Переименовать переменные в соответствии с code style, если это требуется.
6.  **Улучшение алгоритма:**
    -   Добавить валидацию ввода пользователя (проверка на ввод только букв).

**Улучшенный код**

```python
"""
Модуль для игры в "Космическое слово".
=====================================

Этот модуль содержит функции и логику для текстовой игры,
в которой игрок должен угадать загаданное компьютером слово.
Игрок вводит буквы, и компьютер открывает соответствующие позиции
в слове. Игра продолжается до тех пор, пока игрок не угадает все буквы.

Пример использования
--------------------

.. code-block:: python

    if __name__ == "__main__":
        play_spaceword_game()

"""

import random
from src.logger.logger import logger # Импорт logger для логирования

def choose_word(word_list: list) -> str:
    """
    Выбирает случайное слово из списка.

    :param word_list: Список слов для выбора.
    :return: Случайно выбранное слово из списка.
    """
    return random.choice(word_list) # Возвращает случайное слово из списка

def display_word(word: str, guessed_letters: list) -> str:
    """
    Отображает слово, скрывая неугаданные буквы.

    :param word: Загаданное слово.
    :param guessed_letters: Список угаданных букв.
    :return: Строка с отображением слова, где неугаданные буквы заменены на '_'.
    """
    display = '' # Инициализирует пустую строку для отображения
    for letter in word: # Проходит по каждой букве в загаданном слове
        if letter in guessed_letters: # Если буква есть в списке угаданных букв
            display += letter + ' ' # Добавляет букву и пробел к строке отображения
        else: # Если буквы нет в списке угаданных
            display += '_ ' # Добавляет '_' и пробел к строке отображения
    return display.strip() # Возвращает строку отображения, удалив пробелы в начале и конце


def update_word(word: str, guessed_word: str, user_letter: str) -> str:
    """
    Обновляет отображаемое слово, открывая угаданные буквы.

    :param word: Загаданное слово.
    :param guessed_word: Текущее отображение слова с пробелами.
    :param user_letter: Буква, которую ввел пользователь.
    :return: Обновленная строка с отображением слова с открытыми буквами.
    """
    updated_word = '' # Инициализирует пустую строку для обновленного слова
    for i in range(len(word)): # Проходит по каждой букве в загаданном слове
        if word[i] == user_letter: # Если буква в загаданном слове совпадает с введенной буквой
            updated_word += user_letter + ' '  # Добавляет угаданную букву и пробел в обновленное слово
        else: # Если буква не совпадает
            updated_word += guessed_word[i*2] + ' ' # Добавляет соответствующий символ из текущего отображения слова и пробел
    return updated_word.strip()  # Возвращает обновленное слово, удалив пробелы в начале и конце

def correct_guesses(guessed_letters: list, target_word: str) -> int:
    """
    Считает количество правильно угаданных букв в слове.

    :param guessed_letters: Список угаданных букв.
    :param target_word: Загаданное слово.
    :return: Количество правильно угаданных букв.
    """
    count = 0 # Инициализирует счетчик угаданных букв
    unique_letters = set(target_word) # Создает множество уникальных букв из загаданного слова
    for letter in guessed_letters: # Проходит по каждой угаданной букве
        if letter in unique_letters: # Если буква есть в множестве уникальных букв
            count += 1 # Увеличивает счетчик
            unique_letters.remove(letter) # Удаляет букву из множества уникальных букв, чтобы не считать её повторно
    return len(set(target_word)) - len(unique_letters) # Возвращает общее количество уникальных букв минус оставшиеся


def play_spaceword_game():
    """
    Основная логика игры "Космическое слово".
    """
    word_list = ['APPLE', 'BANANA', 'CHERRY', 'DATE', 'ELDERBERRY', 'FIG', 'GRAPE', 'KIWI', 'LEMON', 'MANGO',
    'ORANGE', 'PEACH', 'QUINCE', 'RASPBERRY', 'STRAWBERRY', 'TANGERINE', 'WATERMELON'
    ] # Список слов для игры
    target_word = choose_word(word_list)  # Выбираем случайное слово из списка
    guessed_word = '_ ' * len(target_word) # Создаем строку с '_' на месте букв загаданного слова
    guessed_letters = []  # Инициализируем список для хранения угаданных букв
    correct_guesses_count = 0 # Инициализируем счетчик правильно угаданных букв

    logger.info('Добро пожаловать в игру \'Космическое слово\'!') # Вывод приветствия через логгер
    logger.info('Я загадал слово. Попробуй его угадать, вводя по одной букве.') # Вывод сообщения через логгер

    while correct_guesses_count < len(target_word): # Основной игровой цикл, пока количество угаданных букв не равно длине слова
        logger.info(f'\nСлово: {guessed_word}') # Выводит текущее состояние слова
        user_letter = input('Введите букву: ').upper()  # Запрашивает ввод буквы у пользователя и преобразует ее в верхний регистр

        if not user_letter.isalpha() or len(user_letter) != 1: # Проверка на корректный ввод.
            logger.error('Некорректный ввод. Введите одну букву.') # Сообщение об ошибке, если ввод некорректен.
            continue # Переход к началу цикла, если ввод некорректен
        
        if user_letter in target_word: # Если введенная буква есть в загаданном слове
            guessed_letters.append(user_letter) # Добавляет букву в список угаданных букв
            guessed_word = update_word(target_word, guessed_word, user_letter) # Обновляет отображение слова
            correct_guesses_count = correct_guesses(guessed_letters, target_word) # Обновляет счетчик правильно угаданных букв
        else: # Если введенной буквы нет в загаданном слове
             logger.info('Такой буквы нет в слове.') # Вывод сообщения, что буквы нет в слове через логгер


        if correct_guesses_count == len(target_word): # Если все буквы угаданы
           logger.info('\nYOU GOT IT!') # Вывод сообщения о победе через логгер
           break # Завершение игры


if __name__ == '__main__': # Проверка, является ли скрипт главным
    play_spaceword_game() # Запуск игры, если скрипт главный
```