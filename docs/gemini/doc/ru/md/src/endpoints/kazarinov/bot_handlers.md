# Модуль bot_handlers_parser

## Обзор

Данный модуль содержит код обработчиков команд для бота, взаимодействующих с OneTab и другими источниками данных, а также осуществляющих поиск и обработку цен.

## Классы

### `BotHandler`

**Описание**: Класс `BotHandler` реализует логику обработки команд, полученных от Telegram бота.  Он содержит методы для работы с ценовыми предложениями и управлением сценариями.

**Атрибуты**:

- `mexiron`: Экземпляр класса `Mexiron`, используемый для работы со сценариями.

**Методы**:

#### `__init__(self, webdriver_name: Optional[str] = 'firefox')`

**Описание**: Инициализирует экземпляр класса `BotHandler`.

**Параметры**:

- `webdriver_name` (Optional[str], optional): Название драйвера браузера (firefox, chrome, edge). По умолчанию 'firefox'.

**Возвращает**:

- None

#### `handle_url(self, update: Update, context: CallbackContext) -> Any`

**Описание**: Обрабатывает полученные URL-адреса и передает данные для создания ценового предложения.

**Параметры**:

- `update` (Update): Обновление данных Telegram бота.
- `context` (CallbackContext): Контекст вызова.

**Возвращает**:

- Any: Возвращает True, если сценарий успешно запущен, иначе None или обрабатывает ошибку

#### `get_data_from_onetab(self, response: str) -> list[int | float, str, list] | bool`

**Описание**: Извлекает данные (цену, название, список URL) из ответа OneTab.

**Параметры**:

- `response` (str): Текстовый ответ с данными OneTab.

**Возвращает**:

- list[int | float, str, list] | bool: Кортеж с данными (цена, имя, URL) или False, если данные не получены.


#### `handle_next_command(self, update: Update) -> None`

**Описание**: Обрабатывает команду '--next' и связанные с ней команды.

**Параметры**:

- `update` (Update): Обновление данных Telegram бота.

**Возвращает**:

- None

## Функции

### `fetch_target_urls_onetab(self, one_tab_url: str) -> list[str] | bool`

**Описание**: Извлекает целевые URL-адреса из страницы OneTab.

**Параметры**:

- `one_tab_url` (str): URL страницы OneTab.

**Возвращает**:

- Tuple[int, str, List[str]] | bool: Кортеж из цены, имени и списка URL или `False`, если произошла ошибка.

**Вызывает исключения**:

- `requests.exceptions.RequestException`: При ошибке запроса.
- `ValueError`: При ошибке преобразования цены.


## Замечания

- Модуль использует библиотеки `requests`, `BeautifulSoup`, `asyncio` и другие для работы с веб-страницами и обработкой данных.
- Логирование ошибок и информации осуществляется с помощью класса `logger`.
- Используется адаптивный подход к выбору драйвера браузера (firefox, chrome, edge) в зависимости от переданного параметра.