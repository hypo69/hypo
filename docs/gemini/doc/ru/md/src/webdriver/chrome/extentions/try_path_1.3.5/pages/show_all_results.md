# Модуль show_all_results.js

## Обзор

Этот модуль отвечает за отображение результатов поиска, полученных с помощью расширения TryXPath. Он отображает информацию о контексте поиска, основных результатах и деталях каждого результата в формате таблицы.  Модуль предоставляет возможность экспорта полученной информации в текстовом формате.

## Функции

### `showAllResults`

**Описание**: Функция отображает результаты поиска в пользовательском интерфейсе.

**Параметры**:

- `results` (object): Объект, содержащий результаты поиска. Должен включать свойства `message`, `title`, `href`, `frameId`, `context` (опционально) и `main`.

**Возвращает**:

-  Не имеет возвращаемого значения.

**Вызывает исключения**:

-  Возможные исключения, связанные с обработкой `results` или отображением данных в интерфейсе, обрабатываются через `catch(fu.onError)`.



### `makeTextDownloadUrl`

**Описание**: Создает URL для скачивания текстового файла.

**Параметры**:

- `text` (string): Текстовое содержимое для сохранения в файле.

**Возвращает**:

- `string`: URL для скачивания файла.

**Вызывает исключения**:

- Не ожидаются исключения.



### `makeInfoText`

**Описание**: Генерирует текстовое представление результатов для экспорта.

**Параметры**:

- `results` (object): Объект, содержащий результаты поиска.

**Возвращает**:

- `string`: Текст для экспорта, содержащий информацию о контексте и основных результатах.

**Вызывает исключения**:

- Не ожидаются исключения.


### `makeConvertedInfoText`

**Описание**: Генерирует текстовое представление результатов для экспорта, преобразуя значения в JSON.

**Параметры**:

- `results` (object): Объект, содержащий результаты поиска.

**Возвращает**:

- `string`: Текст для экспорта, содержащий информацию о контексте и основных результатах в формате JSON.

**Вызывает исключения**:

- Не ожидаются исключения.


##  Вспомогательные функции (функции из tryxpath)

Функции `fu.updateDetailsTable`, `fu.onError`, `fu.makeDetailText`  предполагаются как внешние для данного файла и не документированы в рамках этого файла.  Их описание должно находиться в другом модуле.


## Обработка событий

Обработчик события `load` загружает результаты и выполняет следующие действия:

1. Запрашивает результаты поиска через `browser.runtime.sendMessage`.
2. Обрабатывает полученные результаты и отображает их.
3.  Добавляет обработчики событий на элементы `context-detail` и `main-details` для обработки нажатий на кнопки.  Эти обработчики выполняют взаимодействие с браузером для выделения элементов.

**Обработчики кликов** позволяют пользователю выбрать элемент в контексте или в основных результатах, что приводит к отправке сообщения в браузер для фокусировки на выбранном элементе.

##  Рекомендации

*  Для более полной документации необходимо добавить описание функций `fu.updateDetailsTable`, `fu.onError`, `fu.makeDetailText` из модуля `tryxpath`.
*  Необходимо описать структуру объекта `results` и его свойства.