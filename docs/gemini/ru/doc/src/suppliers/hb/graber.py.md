# Модуль `graber` для `hb.co.il`

## Обзор

Модуль `graber` предназначен для сбора значений полей товаров с сайта `hb.co.il`. Он содержит класс `Graber`, который наследуется от родительского класса `Graber` (Grbr) и переопределяет его методы для нестандартной обработки полей, специфичных для `hb.co.il`. 

Модуль также предоставляет возможность предварительной обработки запросов к веб-драйверу с использованием декораторов. Декоратор по умолчанию находится в родительском классе. Для использования декоратора необходимо передать значение в `Context.locator`.

## Подробней

Этот модуль является частью системы сбора данных о товарах от поставщиков. Он специализируется на парсинге данных с сайта `hb.co.il`. Модуль использует веб-драйвер для взаимодействия с сайтом и извлечения необходимой информации.

Класс `Graber` перегружает функции обработки полей родительского класса, если требуется нестандартная обработка. Это позволяет адаптировать процесс сбора данных к особенностям структуры сайта `hb.co.il`.

Для выполнения предварительных действий перед отправкой запроса к веб-драйверу используется механизм декораторов. Декоратор по умолчанию определен в родительском классе и может быть настроен через `Context.locator`.

## Классы

### `Graber`

**Описание**: Класс `Graber` предназначен для сбора данных о товарах с сайта `hb.co.il`. Он наследуется от родительского класса `Graber` (Grbr) и предоставляет возможность переопределения методов обработки полей для нестандартных случаев.

**Методы**:
- `__init__`: Инициализирует экземпляр класса `Graber`.

**Параметры**:
- `driver` (Driver): Экземпляр веб-драйвера для взаимодействия с сайтом.
- `lang_index` (int): Индекс языка.

**Примеры**:

```python
from src.webdriver.driver import Driver
from src.suppliers.hb.graber import Graber

# Пример создания экземпляра класса Graber
driver = Driver()
graber = Graber(driver=driver, lang_index=0)
```

## Функции

### `close_pop_up`

```python
def close_pop_up(value: Any = None) -> Callable:
    """Создает декоратор для закрытия всплывающих окон перед выполнением основной логики функции.

    Args:
        value (Any): Дополнительное значение для декоратора.

    Returns:
        Callable: Декоратор, оборачивающий функцию.
    """
```

**Описание**: Функция `close_pop_up` создает декоратор, который закрывает всплывающие окна перед выполнением основной логики функции.

**Параметры**:
- `value` (Any, optional): Дополнительное значение для декоратора. По умолчанию `None`.

**Возвращает**:
- `Callable`: Декоратор, который можно применить к функции.

**Примеры**:

```python
from typing import Any, Callable
from functools import wraps
from src.logger.logger import logger
from src.exceptions.exceptions import ExecuteLocatorException

def close_pop_up(value: Any = None) -> Callable:
    """Создает декоратор для закрытия всплывающих окон перед выполнением основной логики функции.

    Args:
        value (Any): Дополнительное значение для декоратора.

    Returns:
        Callable: Декоратор, оборачивающий функцию.
    """
    def decorator(func: Callable) -> Callable:
        @wraps(func)
        async def wrapper(*args, **kwargs):
            try:
                # await Context.driver.execute_locator(Context.locator.close_pop_up)  # Await async pop-up close  
                ... 
            except ExecuteLocatorException as ex:
                logger.debug(f'Ошибка выполнения локатора: {ex}')
            return await func(*args, **kwargs)  # Await the main function
        return wrapper
    return decorator

# Пример использования декоратора
@close_pop_up()
async def my_function():
    print("Основная логика функции")
```