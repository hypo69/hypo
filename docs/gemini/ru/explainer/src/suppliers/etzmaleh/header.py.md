## <алгоритм>

1. **Инициализация переменных**:
   - Устанавливается переменная `MODE` в значение `'dev'`.
   - Импортируются необходимые модули: `sys`, `json`, `Version` из `packaging.version`, и `Path` из `pathlib`.

2. **Функция `set_project_root`**:
   - Принимает на вход кортеж `marker_files` (по умолчанию `('pyproject.toml', 'requirements.txt', '.git')`), содержащий имена файлов или директорий для определения корня проекта.
   - Устанавливает `current_path` как абсолютный путь к директории, содержащей текущий файл.
   - Инициализирует переменную `__root__` значением `current_path`.
   - Перебирает текущую директорию и все ее родительские директории.
   - Для каждой директории проверяет, существует ли в ней хотя бы один из `marker_files`.
     - Если существует, то устанавливает `__root__` равным этой директории и прерывает цикл.
   - Если `__root__` нет в списке путей поиска модулей `sys.path`, добавляет его в начало списка.
   - Возвращает `__root__`.
     - *Пример*: Если скрипт расположен в `/home/user/project/src/suppliers/etzmaleh` и в `/home/user/project/` есть файл `pyproject.toml`, то `__root__` будет равен `/home/user/project/`.

3. **Определение корня проекта**:
   - Вызывается функция `set_project_root` и ее возвращаемое значение присваивается переменной `__root__`.

4. **Импорт `gs`**:
   - Импортируется модуль `gs` из пакета `src`.

5. **Чтение настроек из `settings.json`**:
   - Инициализируется переменная `settings` значением `None`.
   - Попытка открыть файл `settings.json` в директории `src` относительно корня проекта.
   - Если открытие удалось, загружает JSON данные из файла в `settings`.
   - Если происходит ошибка `FileNotFoundError` или `json.JSONDecodeError`, пропускает блок `try`.

6. **Чтение документации из `README.MD`**:
    - Инициализируется переменная `doc_str` значением `None`.
    - Попытка открыть файл `README.MD` в директории `src` относительно корня проекта.
    - Если открытие удалось, считывает содержимое файла в `doc_str`.
    - Если происходит ошибка `FileNotFoundError` или `json.JSONDecodeError`, пропускает блок `try`.

7. **Инициализация глобальных переменных проекта**:
   -  Из `settings` устанавливаются значения для `__project_name__`, `__version__`, `__author__`, `__copyright__` и `__cofee__`, если `settings` существует. Иначе используются значения по умолчанию.
   - `__doc__` присваивается значение `doc_str` если он есть, или пустая строка.
   -  `__details__` инициализируется пустой строкой.

## <mermaid>

```mermaid
graph LR
    A[Начало] --> B{Инициализация переменных};
    B --> C[set_project_root() функция];
    C --> D{Определение корня проекта};
    D --> E[Импорт gs];
    E --> F{Чтение settings.json};
    F --> G{Чтение README.MD};
    G --> H{Инициализация глобальных переменных};
    H --> I[Конец];
    
    subgraph set_project_root
        C --> C1[Определение текущего пути];
        C1 --> C2[Обход родительских каталогов];
        C2 --> C3{Наличие маркерных файлов};
        C3 -- Да --> C4[Установка корня проекта];
        C3 -- Нет --> C2;
        C4 --> C5[Добавление корня в sys.path];
        C5 --> C6[Возврат корня проекта];
    end
    
    style A fill:#f9f,stroke:#333,stroke-width:2px
    style I fill:#ccf,stroke:#333,stroke-width:2px
    
    
    
    
```

**Объяснение зависимостей `mermaid`:**

- **`Начало`**: Начальная точка выполнения скрипта.
- **`Инициализация переменных`**: Устанавливаются начальные значения переменных и происходит импорт необходимых библиотек.
- **`set_project_root() функция`**: Вызывается функция, определяющая корень проекта.
  - **`Определение текущего пути`**: Получение абсолютного пути к текущему файлу.
  - **`Обход родительских каталогов`**: Итерация по родительским директориям.
  - **`Наличие маркерных файлов`**: Проверка наличия файлов-маркеров в текущей директории.
  - **`Установка корня проекта`**: Если маркерный файл найден, устанавливается корень проекта.
  - **`Добавление корня в sys.path`**: Корень проекта добавляется в список путей для поиска модулей.
  - **`Возврат корня проекта`**: Возвращает найденный путь.
- **`Определение корня проекта`**: Присвоение результата работы `set_project_root()` переменной `__root__`.
- **`Импорт gs`**: Импортируется модуль `gs` из пакета `src`.
- **`Чтение settings.json`**: Попытка чтения файла `settings.json` и загрузка настроек.
- **`Чтение README.MD`**: Попытка чтения файла `README.MD` и загрузка документации.
- **`Инициализация глобальных переменных`**: Инициализация глобальных переменных проекта на основе загруженных настроек и документации.
- **`Конец`**: Конечная точка выполнения скрипта.

## <объяснение>

**Импорты:**

-   `sys`: Предоставляет доступ к некоторым переменным и функциям, взаимодействующим с интерпретатором Python. В данном случае используется для добавления корня проекта в `sys.path`, чтобы модули проекта могли импортироваться правильно.
-   `json`: Используется для работы с данными в формате JSON. В данном коде применяется для чтения файла `settings.json` с настройками проекта.
-   `packaging.version`: Содержит класс `Version` для сравнения версий программного обеспечения. В данном случае, импорт `Version` есть но не используется, его можно убрать.
-   `pathlib.Path`: Позволяет работать с путями файловой системы в объектно-ориентированном стиле. Используется для определения корня проекта и открытия файлов `settings.json` и `README.MD`.

**Функция `set_project_root`:**

-   **Аргументы**:
    -   `marker_files` (tuple): Кортеж строк, представляющих имена файлов или каталогов, которые используются для идентификации корня проекта. По умолчанию `('pyproject.toml', 'requirements.txt', '.git')`.
-   **Возвращаемое значение**:
    -   `Path`: Абсолютный путь к корневой директории проекта. Если корневая директория не найдена (нет маркерных файлов), то возвращает путь к директории, где находится скрипт.
-   **Назначение**:
    -   Функция ищет корень проекта, поднимаясь по родительским каталогам до тех пор, пока не будет найден один из `marker_files`. Это позволяет запускать скрипт из любой точки проекта.
    -   После нахождения корня проекта, он добавляется в `sys.path`, чтобы можно было корректно импортировать модули из пакета `src`.
-   **Пример**:
    ```python
    root_path = set_project_root()
    print(root_path) # Выведет путь к корневой директории проекта
    ```

**Переменные:**

-   `MODE`: Строка, устанавливающая режим работы приложения (`'dev'`).
-   `__root__`: `Path` - абсолютный путь к корневой директории проекта.
-   `settings`: Словарь, содержащий настройки проекта, полученные из файла `settings.json`. Инициализируется `None`, пока не будет загружен файл настроек.
-   `doc_str`: Строка, содержащая содержимое файла `README.MD`. Инициализируется `None`, пока не будет загружен файл.
-   `__project_name__`: Строка, представляющая имя проекта. Загружается из `settings` или имеет значение по умолчанию `'hypotez'`.
-   `__version__`: Строка, представляющая версию проекта. Загружается из `settings` или имеет значение по умолчанию `''`.
-   `__doc__`: Строка, представляющая описание проекта, взятое из `README.MD`. Если `README.MD` не удалось прочитать, то строка пуста.
-   `__details__`: Строка, представляющая дополнительные детали проекта. Инициализируется пустой строкой.
-   `__author__`: Строка, представляющая автора проекта. Загружается из `settings` или имеет значение по умолчанию `''`.
-   `__copyright__`: Строка, представляющая авторские права проекта. Загружается из `settings` или имеет значение по умолчанию `''`.
-   `__cofee__`: Строка, содержащая сообщение о возможности поддержки разработчика, а так же ссылку на boosty. Загружается из `settings` или имеет значение по умолчанию.

**Классы:**

-   В данном коде нет классов.

**Потенциальные ошибки и области для улучшения:**

-   **Обработка ошибок**: Код использует общую обработку исключений `(FileNotFoundError, json.JSONDecodeError)`, но не записывает ошибки в лог. Следует добавить логирование для облегчения отладки.
-   **Проверка `settings`**: Код не обрабатывает случай, когда файл `settings.json` существует, но не содержит необходимых ключей. Можно добавить проверку на наличие нужных ключей в словаре `settings` перед их использованием.
-   **Использование констант**: `MODE` можно сделать константой, используя `typing.Final` (если используется Python 3.8+).
-   **Удалить неиспользуемые импорты:** `from packaging.version import Version`  не используется.
-   **Сократить повторяющийся код**:`try`-`except` для открытия и чтения файлов можно вынести в отдельную функцию.

**Взаимосвязи с другими частями проекта:**

-   Этот файл является частью пакета `src.suppliers.etzmaleh`, но при этом на прямую не зависит от него, так как не вызывает его методы, этот файл служит для настройки и определения переменных которые потом могут быть использованы другими частями проекта.
-   Файл использует `src.gs`, что говорит о том что он зависит от модуля `gs`, который также находится в папке `src`, `gs` используется для получения абсолютного пути к файлам.
-   Файл считывает данные из `settings.json` и `README.MD`, которые также находятся в папке `src`. Эти файлы могут содержать общие настройки и документацию для всего проекта.
-   Глобальные переменные, такие как `__project_name__`, `__version__`, и `__doc__`, могут использоваться в других частях проекта для отображения информации о проекте, например в интерфейсе командной строки или в документации.