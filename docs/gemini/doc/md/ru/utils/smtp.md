```markdown
# Модуль smtp

## Обзор

Модуль `smtp` предоставляет функции для отправки и получения электронных писем через SMTP и IMAP серверы. Он включает в себя функции для отправки писем через SMTP и извлечения писем через IMAP.

## Функции

### `send`

**Описание**: Отправляет электронное письмо. Возвращает `True`, если операция прошла успешно, и `False` в противном случае.  Логирует ошибки.

**Параметры**:
- `subject` (str, optional): Тема письма. По умолчанию пустая строка.
- `body` (str, optional): Тело письма. По умолчанию пустая строка.
- `to` (str, optional): Адрес получателя. По умолчанию 'one.last.bit@gmail.com'.


**Возвращает**:
- bool: `True` при успешной отправке, `False` в противном случае.

**Возможные исключения**:
- Любые исключения, возникающие при взаимодействии с SMTP-сервером (например, проблемы с подключением, авторизацией). Ошибка будет записана в лог.


### `receive`

**Описание**: Получает письма с IMAP-сервера. Возвращает список словарей, содержащих данные о письмах, если операция прошла успешно, и `None` в противном случае.  Логирует ошибки.

**Параметры**:
- `imap_server` (str): Адрес IMAP-сервера.
- `user` (str): Пользовательский логин для доступа к IMAP-серверу.
- `password` (str): Пароль для доступа к IMAP-серверу.
- `folder` (str, optional): Папка, из которой следует извлечь письма. По умолчанию 'inbox'.


**Возвращает**:
- Optional[List[Dict[str, str]]]: Список словарей, содержащих данные о письмах (включая тему, отправителя и тело), если операция прошла успешно, `None` в противном случае.

**Возможные исключения**:
- Любые исключения, возникающие при взаимодействии с IMAP-сервером (например, проблемы с подключением, авторизацией, чтением писем). Ошибка будет записана в лог.

## Важные соображения по безопасности и надёжности

- **Словарь `_connection`**: Не встраивайте учетные данные напрямую в этот файл. Используйте переменные окружения (например, `os.environ`) для хранения данных подключения. Это критически важно для безопасности. Избегайте хранения паролей непосредственно в исходном коде.

- **Обработка ошибок**: Код включает в себя надёжную обработку ошибок, регистрируя исключения с подробными данными (тема, тело и т.д.). Это очень полезно для отладки.

- **Парсинг писем**: Функция `receive` обрабатывает различные форматы писем, предотвращая потенциальные проблемы.

- **Обработка MIME**: Код правильно использует `MIMEText` для построения сообщения электронной почты, что важно для отправки простых текстовых сообщений.

## Конфигурация

- Словарь `_connection` содержит параметры для подключения к SMTP серверу. **Не храните пароли в этом коде!** Используйте переменные окружения для конфигурации.


```