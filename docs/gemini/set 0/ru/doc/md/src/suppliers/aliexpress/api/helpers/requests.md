# Модуль `hypotez/src/suppliers/aliexpress/api/helpers/requests.py`

## Обзор

Модуль `requests` содержит функцию `api_request`, предназначенную для обработки запросов к API AliExpress. Функция обрабатывает полученные ответы, проверяет код ответа и возвращает данные или None в случае ошибки.

## Функции

### `api_request`

**Описание**: Функция обрабатывает API запросы, получая ответ, разбирая его и проверяя код ответа.

**Параметры**:

- `request` (объект): Объект, содержащий метод `getResponse()`, возвращающий ответ API.
- `response_name` (строка): Название поля в ответе, содержащего результат.
- `attemps` (целое число, по умолчанию 1): Количество попыток запроса.

**Возвращает**:

- `SimpleNamespace` | `None`: Возвращает данные в формате `SimpleNamespace` при успешном запросе и коде ответа 200 или `None` при ошибке.

**Вызывает исключения**:

- `ApiRequestException`:  Исключение возникает, если произошла ошибка при получении ответа.
- `ApiRequestResponseException`: Исключение возникает, если произошла ошибка при обработке ответа.


**Детали реализации**:

Функция `api_request` пытается получить ответ от API с помощью метода `request.getResponse()`.
Если возникает ошибка, то она логгируется и возвращает `None`.

Далее, функция пытается извлечь результат из ответа и преобразовать его в формат `SimpleNamespace`. Если возникает ошибка, то она логгируется и функция возвращает `None`.

Функция проверяет код ответа (`response.resp_code`). Если код ответа 200, то возвращается результат (`response.result`). В противном случае, логгируется сообщение об ошибке, и функция возвращает `None`.

В случае возникновения любой ошибки, она логгируется, и функция возвращает `None`.

**Пример использования**:

```python
# Пример использования (замена реальными значениями)
import requests
# ... (импорт других необходимых модулей)

# ... (создание объекта 'request' с методом getResponse())

response = api_request(request, 'result')

if response:
    # Обработка успешного ответа
    print(response.some_field)
else:
    # Обработка ошибки
    print("Ошибка при запросе к API")
```
```