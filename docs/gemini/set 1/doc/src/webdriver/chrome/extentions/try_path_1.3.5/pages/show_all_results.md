# Модуль `show_all_results.js`

## Обзор

Этот модуль отвечает за отображение результатов поиска, полученных с помощью расширения `tryxpath`. Он обрабатывает данные `results` и отображает их в HTML-элементах страницы.  Модуль также предоставляет возможности экспорта данных в текстовые файлы.

## Функции

### `showAllResults`

**Описание**: Функция отображает результаты поиска в элементах HTML.

**Параметры**:
- `results` (object): Объект, содержащий результаты поиска.

**Возвращает**:
- Не имеет возвращаемого значения.

**Обрабатывает исключения**:
- `fu.onError`: Обрабатывает любые ошибки, возникающие при вызове функции `updateDetailsTable`.

### `makeTextDownloadUrl`

**Описание**: Создаёт URL для загрузки текста в виде файла.

**Параметры**:
- `text` (string): Текст, который нужно загрузить.

**Возвращает**:
- `string`: URL для загрузки текста.


### `makeInfoText`

**Описание**: Создаёт текст для экспорта информации о результатах.

**Параметры**:
- `results` (object): Объект, содержащий результаты поиска.

**Возвращает**:
- `string`: Текст для экспорта.


### `makeConvertedInfoText`

**Описание**: Создаёт текст для экспорта информации о результатах с преобразованием некоторых значений в JSON.

**Параметры**:
- `results` (object): Объект, содержащий результаты поиска.

**Возвращает**:
- `string`: Текст для экспорта.


##  Обработчики событий

### Обработчик события `load`

**Описание**: Обработчик события `load`, который выполняется после загрузки страницы.

**Описание**:
- Запрашивает результаты поиска от расширения (`browser.runtime.sendMessage`).
- При успешном получении данных:
    - Устанавливает `relatedTabId`, `relatedFrameId` и `executionId`.
    - Создаёт URL для скачивания текстовых файлов с информацией о результатах.
    - Отображает результаты в HTML с помощью `showAllResults`.
- Обрабатывает возможные ошибки (`catch(fu.onError)`).
- Добавляет обработчики кликов на кнопки для навигации по результатам.


### Обработчик клика на кнопки в таблице контекста (`context-detail`)

**Описание**: Обработчик клика на кнопки в таблице контекста.

**Описание**:
- При клике на кнопку `target.tagName.toLowerCase() === "button"` отправляет сообщение расширению (`browser.tabs.sendMessage`) для фокусировки на элементе контекста.


### Обработчик клика на кнопки в основной таблице (`main-details`)

**Описание**: Обработчик клика на кнопки в основной таблице.

**Описание**:
- При клике на кнопку `target.tagName.toLowerCase() === "button"` отправляет сообщение расширению (`browser.tabs.sendMessage`) для фокусировки на элементе в основном списке.
  - Извлекает индекс элемента `ind` из атрибута `data-index` кнопки.


##  Переменные

### `detailKeys`

**Описание**: Массив строк, содержащий ключи для извлечения данных из элементов детализации.


### `headerValues`

**Описание**: Массив строк, содержащий заголовки таблицы.


### `relatedTabId`, `relatedFrameId`, `executionId`

**Описание**: Переменные, хранящие ID вкладки, кадра и выполнения.


##  Использование

Этот модуль используется для отображения результатов работы расширения `tryxpath` на странице.  Разработчики могут использовать предоставленные функции для отображения и экспорта результатов поиска.