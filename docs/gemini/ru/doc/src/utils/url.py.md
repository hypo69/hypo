# Модуль для работы с URL строками
## Обзор

Модуль `src.utils.string.url` предоставляет инструменты для работы с URL строками, включая извлечение параметров запроса, проверку на валидность URL и сокращение ссылок.

## Подробнее

Этот модуль содержит функции для:

- Извлечения параметров из URL-адреса.
- Проверки, является ли строка валидным URL-адресом.
- Сокращения длинных URL-адресов с использованием сервиса TinyURL.

Модуль предназначен для упрощения работы с URL в различных приложениях, таких как обработка веб-запросов, анализ данных и автоматизация задач.

## Функции

### `extract_url_params`

```python
def extract_url_params(url: str) -> dict | None:
    """ Извлекает параметры из строки URL.

    Args:
        url (str): Строка URL для парсинга.

    Returns:
        dict | None: Словарь параметров запроса и их значений или `None`, если URL не содержит параметров.
    """
    ...
```

**Назначение**: Извлекает параметры запроса из URL-адреса.

**Параметры**:
- `url` (str): URL-адрес, из которого необходимо извлечь параметры.

**Возвращает**:
- `dict | None`: Словарь, содержащий параметры запроса и их значения. Если URL не содержит параметров, возвращается `None`.

**Как работает функция**:

1.  Функция принимает URL-адрес в качестве входного параметра.
2.  Использует `urllib.parse.urlparse` для разбора URL.
3.  Извлекает строку запроса из разобранного URL.
4.  Использует `urllib.parse.parse_qs` для преобразования строки запроса в словарь параметров.
5.  Если параметры существуют, преобразует значения параметров из списка в строку, если параметр имеет только одно значение.
6.  Возвращает словарь параметров или `None`, если URL не содержит параметров.

```
    URL -> Разбор URL (urlparse) -> Извлечение строки запроса -> Преобразование строки запроса в словарь (parse_qs) -> Преобразование значений параметров (если необходимо) -> Возврат словаря параметров
```

**Примеры**:

```python
url_with_params = "https://example.com?param1=value1&param2=value2"
params = extract_url_params(url_with_params)
print(params)  # Вывод: {'param1': 'value1', 'param2': 'value2'}

url_with_single_param = "https://example.com?param1=value1"
params = extract_url_params(url_with_single_param)
print(params)  # Вывод: {'param1': 'value1'}

url_without_params = "https://example.com"
params = extract_url_params(url_without_params)
print(params)  # Вывод: None
```

### `is_url`

```python
def is_url(text: str) -> bool:
    """ Проверяет, является ли переданный текст валидным URL с использованием библиотеки validators.

    Args:
        text (str): Строка для проверки.

    Returns:
        bool: `True` если строка является валидным URL, иначе `False`.
    """
    ...
```

**Назначение**: Проверяет, является ли переданная строка валидным URL-адресом.

**Параметры**:
- `text` (str): Строка, которую необходимо проверить.

**Возвращает**:
- `bool`: `True`, если строка является валидным URL, в противном случае `False`.

**Как работает функция**:

1.  Функция принимает строку в качестве входного параметра.
2.  Использует библиотеку `validators` для проверки, является ли строка валидным URL-адресом.
3.  Возвращает `True`, если строка является валидным URL, и `False` в противном случае.

```
    Строка -> Проверка валидности URL (validators.url) -> Возврат True или False
```

**Примеры**:

```python
valid_url = "https://example.com"
is_valid = is_url(valid_url)
print(is_valid)  # Вывод: True

invalid_url = "example"
is_valid = is_url(invalid_url)
print(is_valid)  # Вывод: False
```

### `url_shortener`

```python
def url_shortener(long_url: str) -> str | None:
    """ Сокращает длинный URL с использованием сервиса TinyURL.

    Args:
        long_url (str): Длинный URL для сокращения.

    Returns:
        str | None: Сокращённый URL или `None`, если произошла ошибка.
    """
    ...
```

**Назначение**: Сокращает длинный URL-адрес с использованием сервиса TinyURL.

**Параметры**:
- `long_url` (str): Длинный URL-адрес, который необходимо сократить.

**Возвращает**:
- `str | None`: Сокращенный URL-адрес или `None`, если произошла ошибка.

**Как работает функция**:

1.  Формирует URL для запроса к API TinyURL, передавая длинный URL в качестве параметра.
2.  Выполняет GET-запрос к API TinyURL.
3.  Если запрос выполнен успешно (код состояния 200), возвращает сокращенный URL из текста ответа.
4.  Если произошла ошибка (код состояния не 200), возвращает `None`.

```
    Длинный URL -> Формирование URL для запроса к API TinyURL -> GET-запрос к API TinyURL -> Проверка кода состояния -> Возврат сокращенного URL или None
```

**Примеры**:

```python
long_url = "https://example.com/very/long/url/path"
short_url = url_shortener(long_url)
if short_url:
    print(f"Сокращенный URL: {short_url}")
else:
    print("Ошибка при сокращении URL.")