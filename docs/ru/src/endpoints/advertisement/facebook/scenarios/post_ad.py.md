# Модуль: Публикация рекламного сообщения в группах Facebook

## Обзор

Модуль `src.endpoints.advertisement.facebook.scenarios.post_ad` предназначен для автоматической публикации рекламных сообщений в группах Facebook с использованием Selenium WebDriver. Он включает в себя функции для ввода заголовка сообщения, загрузки медиафайлов и публикации всего сообщения.

## Подробнее

Модуль предоставляет основной функционал для автоматизации процесса публикации рекламных объявлений в Facebook. Он использует драйвер Selenium для взаимодействия с веб-интерфейсом Facebook и выполняет шаги, необходимые для создания и публикации сообщения, включая ввод текста, загрузку изображений и отправку сообщения.
Этот модуль является частью системы автоматизации маркетинга в Facebook. Он отвечает за автоматическое размещение рекламных сообщений в группах Facebook.

## Функции

### `post_ad`

```python
def post_ad(d: Driver, message: SimpleNamespace) -> bool:
    """
    Отправляет рекламное сообщение.

    Args:
        d (Driver): Инстанс драйвера, используемый для взаимодействия с веб-страницей.
        message (SimpleNamespace): Объект, содержащий заголовок, описание и путь к изображению для отправки.

    Returns:
        bool: `True`, если заголовок и описание отправлены успешно, иначе `None`.

    Raises:
        Exception: Если происходит ошибка при отправке заголовка события.
    """
```

**Как работает функция**:

1.  Функция `post_ad` принимает инстанс драйвера `Driver` и объект `message` типа `SimpleNamespace`, содержащий информацию о рекламном сообщении (описание и путь к изображению).
2.  Вызывает функцию `post_message_title` для отправки описания сообщения. Если отправка не удалась, увеличивает счетчик неудач `fails`.
3.  Если количество неудач `fails` превышает 15, функция завершает свою работу.
4.  Если в объекте `message` присутствует атрибут `image_path`, функция вызывает `upload_post_media` для загрузки медиафайла.
5.  Вызывает функцию `message_publish` для публикации сообщения.
6.  Если все шаги выполнены успешно, сбрасывает счетчик `fails` и возвращает `True`.

**Параметры**:

*   `d` (Driver): Инстанс драйвера Selenium для управления браузером.
*   `message` (SimpleNamespace): Объект, содержащий атрибуты `description` (текст сообщения) и `image_path` (путь к изображению).

**Возвращает**:

*   `bool`: `True`, если сообщение успешно опубликовано, иначе `None`.

**Вызывает исключения**:

*   Отсутствуют явные исключения, но могут быть исключения, вызванные функциями `post_message_title`, `upload_post_media` и `message_publish`.

**Внутренние функции**:

В данной функции не вызываются внутренние функции.

**Примеры**:

```python
from src.webdriver.driver import Driver
from types import SimpleNamespace
from selenium import webdriver

# Создание инстанса драйвера (пример с Chrome)
driver = Driver(webdriver.Chrome)
message = SimpleNamespace(description="Текст рекламного сообщения", image_path="путь_к_изображению.jpg")
result = post_ad(driver, message)
if result:
    print("Сообщение успешно опубликовано")
else:
    print("Не удалось опубликовать сообщение")