# Модуль `hypotez/src/category/category.py`

## Обзор

Модуль `category.py` предназначен для работы с категориями продуктов, в основном для платформы PrestaShop. Он предоставляет классы для взаимодействия с данными категорий продуктов и обработки их, что особенно актуально для PrestaShop.

## Классы

### `Category`

**Описание**: Обработчик категорий продуктов. Наследует от `PrestaCategory`.

**Атрибуты**:

- `credentials`: Словарь с данными авторизации (API).


**Методы**:

#### `__init__`

**Описание**: Инициализирует объект `Category`.

**Параметры**:

- `api_credentials`: Данные авторизации для доступа к данным категорий.
- `*args`: Переменная длина аргументов (не используется).
- `**kwargs`: Ключевые аргументы (не используется).

**Возвращает**:
- Не имеет возвращаемого значения.


#### `get_parents`

**Описание**: Возвращает список родительских категорий.

**Параметры**:

- `id_category`: ID категории, для которой нужно получить родительские категории.
- `dept`: Уровень вложенности категории.

**Возвращает**:
- Список родительских категорий.


#### `crawl_categories_async`

**Описание**: Асинхронно обходит категории, создавая иерархический словарь.

**Параметры**:

- `url`: URL страницы категории.
- `depth`: Глубина рекурсивного обхода.
- `driver`: Экземпляр Selenium WebDriver.
- `locator`: XPath локатор для ссылок на категории.
- `dump_file`: Путь к файлу JSON для сохранения результатов.
- `default_category_id`: ID по умолчанию категории.
- `category`: (Необязательно) Существующий словарь категории (по умолчанию `None`).

**Возвращает**:
- Обновлённый или новый словарь категории.

**Обрабатывает исключения**:
- `Exception`: Возникает при ошибках во время обхода категорий.


#### `crawl_categories`

**Описание**: Рекурсивно обходит категории и строит иерархический словарь.

**Параметры**:

- `url`: URL страницы для обхода.
- `depth`: Глубина рекурсии.
- `driver`: Экземпляр Selenium WebDriver.
- `locator`: XPath локатор для нахождения ссылок на категории.
- `dump_file`: Файл для сохранения иерархического словаря.
- `id_category_default`: ID категории по умолчанию.
- `category`: Словарь категории (по умолчанию пустой).

**Возвращает**:
- Иерархический словарь категорий и их URL.


#### `_is_duplicate_url`

**Описание**: Проверяет, существует ли URL в словаре категорий.

**Параметры**:

- `category`: Словарь категорий.
- `url`: URL для проверки.

**Возвращает**:
- `True`, если URL дублируется, `False` в противном случае.


## Функции

### `compare_and_print_missing_keys`

**Описание**: Сравнивает текущий словарь с данными в файле и выводит отсутствующие ключи.

**Параметры**:

- `current_dict`: Текущий словарь.
- `file_path`: Путь к файлу.

**Возвращает**:
- Не имеет возвращаемого значения.

**Обрабатывает исключения**:
- `Exception`: Возникает при ошибках загрузки данных из файла.