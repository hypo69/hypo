# Модуль `bot_handlers`

## Обзор

Модуль `bot_handlers` предназначен для обработки событий, поступающих от телеграм-бота `emil_bot`. Он обрабатывает различные команды, включая работу с URL-адресами OneTab и выполнение связанных сценариев.

## Оглавление

- [Классы](#классы)
    - [`BotHandler`](#bot_handler)
- [Функции](#функции)
    - [`handle_message`](#handle_message)
    - [`handle_url`](#handle_url)
    - [`handle_next_command`](#handle_next_command)
    - [`fetch_target_urls_onetab`](#fetch_target_urls_onetab)

## Классы

### `BotHandler`

**Описание**: Класс `BotHandler` является исполнителем команд, полученных от телеграм-бота.

**Методы**:

-   `__init__`: Инициализация обработчика событий телеграм-бота.
-   `handle_message`: Обрабатывает текстовые сообщения, содержащие URL.
-   `handle_url`: Обрабатывает URL, присланный пользователем.
-   `handle_next_command`: Обрабатывает команду `--next` и её аналоги.
-  `fetch_target_urls_onetab`: Извлекает целевые URL с указанного URL OneTab.

#### `__init__`

**Описание**: Инициализирует обработчик событий телеграм-бота.

**Параметры**:

-   `webdriver_name` (str): Название веб-драйвера для запуска.

#### `handle_message`

**Описание**: Обрабатывает текстовые сообщения, содержащие URL.

**Параметры**:

-   `update` (Update): Объект обновления из телеграма.
-   `context` (CallbackContext): Контекст выполнения.

#### `handle_url`

**Описание**: Обрабатывает URL, присланный пользователем.

**Параметры**:

-   `update` (Update): Объект обновления из телеграма.
-   `context` (CallbackContext): Контекст выполнения.

#### `handle_next_command`

**Описание**: Обрабатывает команду `--next` и её аналоги.

**Параметры**:

-   `update` (Update): Объект обновления из телеграма.

**Вызывает исключения**:

-   `Exception`: Возникает при ошибке чтения вопросов.

## Функции

### `fetch_target_urls_onetab`

**Описание**: Извлекает целевые URL с указанного URL OneTab. Выполняет GET-запрос, парсит HTML и извлекает ссылки из тегов `a` с классом `tabLink`.

**Параметры**:

-   `one_tab_url` (str): URL страницы OneTab.

**Возвращает**:

-   `list[str] | bool`: Список целевых URL или `None` при ошибке.

**Вызывает исключения**:

-   `requests.exceptions.RequestException`: Возникает при ошибке выполнения запроса.