# Модуль `category.py`

## Обзор

Модуль `category.py` предназначен для работы с категориями товаров, в основном для PrestaShop. Он предоставляет классы для взаимодействия и обработки данных категорий товаров.

## Оглавление

- [Классы](#Классы)
  - [`Category`](#Category)
- [Функции](#Функции)
  - [`crawl_categories_async`](#crawl_categories_async)
  - [`crawl_categories`](#crawl_categories)
  - [`_is_duplicate_url`](#_is_duplicate_url)
  - [`compare_and_print_missing_keys`](#compare_and_print_missing_keys)

## Классы

### `Category`

**Описание**: Обработчик категорий для категорий товаров. Наследует от `PrestaCategoryAsync`.

**Методы**:

- `__init__`:
    - **Описание**: Инициализирует объект `Category`.
    - **Параметры**:
        - `api_credentials` (dict): Учетные данные API для доступа к данным категории.
        - `*args`: Список переменных аргументов (не используется).
        - `**kwargs`: Именованные аргументы (не используется).

## Функции

### `crawl_categories_async`

**Описание**: Асинхронно обходит категории, строя иерархический словарь.

**Параметры**:
- `url` (str): URL-адрес страницы категории.
- `depth` (int): Глубина рекурсии обхода.
- `driver` (selenium.webdriver.remote.webdriver.WebDriver): Экземпляр Selenium WebDriver.
- `locator` (tuple): XPath локатор для ссылок на категории.
- `dump_file` (str): Путь к JSON-файлу для сохранения результатов.
- `default_category_id` (int): Идентификатор категории по умолчанию.
- `category` (Optional[dict], optional): Существующий словарь категорий (по умолчанию `None`).

**Возвращает**:
- `dict`: Обновленный или новый словарь категорий.

**Вызывает исключения**:
- `Exception`: Возникает при ошибке во время обхода категорий.

### `crawl_categories`

**Описание**: Рекурсивно обходит категории и строит иерархический словарь.

**Параметры**:
- `url` (str): URL-адрес страницы для обхода.
- `depth` (int): Глубина рекурсии.
- `driver` (selenium.webdriver.remote.webdriver.WebDriver): Экземпляр Selenium WebDriver.
- `locator` (tuple): XPath локатор для поиска ссылок на категории.
- `dump_file` (str): Файл для сохранения иерархического словаря.
- `default_category_id` (int): Идентификатор категории по умолчанию.
- `category` (dict, optional): Словарь категорий (по умолчанию пустой).

**Возвращает**:
- `dict`: Иерархический словарь категорий и их URL-адресов.

**Вызывает исключения**:
- `Exception`: Возникает при ошибке во время обхода категорий.

### `_is_duplicate_url`

**Описание**: Проверяет, существует ли URL-адрес уже в словаре категорий.

**Параметры**:
- `category` (dict): Словарь категорий.
- `url` (str): URL-адрес для проверки.

**Возвращает**:
- `bool`: `True`, если URL является дубликатом, `False` в противном случае.

### `compare_and_print_missing_keys`

**Описание**: Сравнивает текущий словарь с данными в файле и печатает отсутствующие ключи.

**Параметры**:
- `current_dict` (dict): Текущий словарь.
- `file_path` (str): Путь к файлу для сравнения.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Вызывает исключения**:
- `Exception`: Возникает при ошибке загрузки данных из файла.