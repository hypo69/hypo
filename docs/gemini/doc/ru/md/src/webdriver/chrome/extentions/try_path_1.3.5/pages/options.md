# Модуль options.js

## Обзор

Этот файл JavaScript содержит код для страницы настроек расширения `try_path_1.3.5`. Он отвечает за загрузку текущих настроек, предоставление интерфейса для изменения этих настроек и сохранение изменений.  Также файл содержит логику проверки корректности вводимых значений.

## Оглавление

* [Функции](#функции)
* [Переменные](#переменные)

## Переменные

### `defaultAttributes`

**Описание**: Объект, содержащий значения по умолчанию для атрибутов.

### `defaultPopupBodyStyles`

**Описание**: Объект, содержащий значения по умолчанию для стилей тела всплывающего окна.

### `elementAttr`, `contextAttr`, `focusedAttr`, `ancestorAttr`, `frameAttr`, `frameAncestorAttr`, `style`, `popupBodyWidth`, `popupBodyHeight`, `message`, `testElement`

**Описание**:  Переменные, хранящие ссылки на элементы DOM страницы настроек.

## Функции

### `isValidAttrName(name)`

**Описание**: Проверяет, является ли имя атрибута допустимым.

**Параметры**:

- `name` (str): Имя атрибута.

**Возвращает**:

- bool: `true`, если имя атрибута допустимо, иначе `false`.

**Обрабатываемые исключения**:

- `e`:  Если возникло исключение при попытке установить атрибут.

### `isValidAttrNames(names)`

**Описание**: Проверяет, являются ли все имена атрибутов в объекте допустимыми.

**Параметры**:

- `names` (object): Объект, содержащий имена атрибутов.

**Возвращает**:

- bool: `true`, если все имена атрибутов допустимы, иначе `false`.


### `isValidStyleLength(len)`

**Описание**: Проверяет, является ли значение длины стиля (width или height) допустимым.

**Параметры**:

- `len` (str): Значение длины стиля.

**Возвращает**:

- bool: `true`, если значение допустимо, иначе `false`.


### `loadDefaultCss()`

**Описание**: Загружает CSS-стили по умолчанию.

**Возвращает**:

- Promise<string>: Promise, который разрешается текстом загруженного CSS.


### `extractBodyStyles(css)`

**Описание**: Извлекает стили (width и height) из CSS строки.

**Параметры**:

- `css` (string): Строка CSS.

**Возвращает**:

- object: Объект со стилями width и height.


### `createPopupCss(bodyStyles)`

**Описание**: Создает строку CSS для всплывающего окна на основе переданных стилей.

**Параметры**:

- `bodyStyles` (object): Объект со стилями width и height.

**Возвращает**:

- string: Строка CSS.


### `<анонимная функция>` (внутри `window.addEventListener("load", ... )`)

**Описание**: Обработчик события `load`. Инициализирует элементы, загружает значения настроек, добавляет обработчик нажатия на кнопку "Сохранить" и на кнопку "Показать значения по умолчанию".

**Обрабатываемые исключения**:

- `err`: При ошибке при выполнении `browser.storage.sync.set`.
- `fu.onError`: При ошибке при других операциях (например, загрузка дефолтных стилей).