# Модуль для отправки рекламных объявлений в Facebook

## Обзор

Модуль `src.endpoints.advertisement.facebook.start_sergey` предназначен для автоматизированной отправки рекламных объявлений в группы Facebook. 
Он использует Selenium WebDriver для взаимодействия с Facebook и выполняет циклический запуск рекламных кампаний на разных языках и с разными валютами.
Модуль предназначен для работы с рекламными кампаниями, созданными как для "Казаринов", так и для "Aliexpress".

## Подробней

Этот модуль является частью системы автоматизации рекламных кампаний в Facebook. Он позволяет запускать рекламные объявления в различных группах, 
поддерживает разные языки и валюты, а также обеспечивает логирование процесса. 
Основная цель модуля - автоматизировать процесс размещения рекламы в Facebook, что позволяет экономить время и ресурсы.

## Функции

### `run_campaign`

```python
def run_campaign(d: Driver, promoter_name: str, campaigns: list | str, group_file_paths: list, language: str, currency: str):
    """Запуск рекламной кампании.

    Args:
        d (Driver): Экземпляр драйвера.
        promoter_name (str): Имя рекламодателя.
        campaigns (list): Список кампаний.
        group_file_paths (list): Пути к файлам с группами.
        language (str): Язык рекламной кампании.
        currency (str): Валюта рекламной кампании.
    """
    ...
```

**Как работает функция**:
1.  Создает экземпляр класса `FacebookPromoter`.
2.  Вызывает метод `run_campaigns` для запуска рекламных кампаний с заданными параметрами.

**Параметры**:

-   `d` (Driver): Экземпляр драйвера, используемый для управления браузером.
-   `promoter_name` (str): Имя рекламодателя.
-   `campaigns` (list | str): Список кампаний для запуска.
-   `group_file_paths` (list): Список путей к файлам, содержащим информацию о группах.
-   `language` (str): Язык рекламной кампании (например, "RU" или "HE").
-   `currency` (str): Валюта рекламной кампании (например, "ILS").

**Возвращает**:

-   `None`: Функция ничего не возвращает.

**Вызывает исключения**:

-   Не вызывает явных исключений, но может вызывать исключения внутри `FacebookPromoter.run_campaigns`.

### `campaign_cycle`

```python
def campaign_cycle(d: Driver):
    """Цикл для управления запуском кампаний.

    Args:
        d (Driver): Экземпляр драйвера.
        aliexpress_adv (bool): Флаг для определения рекламодателя.
    """
    ...
```

**Как работает функция**:

1.  Создает копии списков путей к файлам с группами и рекламными объявлениями для русского и ивритского языков.
2.  Определяет список словарей с языками и валютами.
3.  Перебирает языки и валюты, выбирает соответствующие пути к файлам групп.
4.  Определяет список кампаний для каждого языка.
5.  Запускает рекламные кампании для "Казаринов" и "Aliexpress" с использованием функции `run_campaign`.

**Параметры**:

-   `d` (Driver): Экземпляр драйвера, используемый для управления браузером.

**Возвращает**:

-   `True`: Функция всегда возвращает `True`.

**Вызывает исключения**:

-   Не вызывает явных исключений.

### `main`

```python
def main():
    """Основная функция для запуска рекламных кампаний."""
    try:
        d = Driver(Chrome)
        d.get_url(r"https://facebook.com")
        aliexpress_adv = True

        while True:
            if interval():
                print("Good night!")
                time.sleep(1000)

            # Первый цикл для русскоязычных кампаний
            campaign_cycle(d)
            ...

            # Логирование и задержка
            logger.debug(f"going to sleep at {time.strftime('%H:%M:%S')}", None, False)
            t = random.randint(30, 360)
            print(f"sleeping {t} sec")
            time.sleep(t)

    except KeyboardInterrupt:
        logger.info("Campaign promotion interrupted.")
```

**Как работает функция**:

1.  Создает экземпляр драйвера Chrome.
2.  Открывает Facebook.
3.  Запускает бесконечный цикл, в котором вызывает `campaign_cycle` для запуска рекламных кампаний.
4.  После каждого цикла делает случайную задержку перед следующим запуском.
5.  Обрабатывает прерывание с клавиатуры (`KeyboardInterrupt`) и завершает работу.
6.  Использует функцию `interval()` для определения времени суток и выполняет задержку на ночь.

**Параметры**:

-   `None`: Функция не принимает параметров.

**Возвращает**:

-   `None`: Функция ничего не возвращает.

**Вызывает исключения**:

-   `KeyboardInterrupt`: Если пользователь прерывает выполнение программы с клавиатуры.