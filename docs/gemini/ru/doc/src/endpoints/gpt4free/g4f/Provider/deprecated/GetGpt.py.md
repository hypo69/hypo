# Модуль GetGpt
## Обзор

Модуль `GetGpt` предоставляет класс `GetGpt`, который является провайдером для взаимодействия с моделью GPT-3.5-turbo через API `chat.getgpt.world`. Этот модуль позволяет отправлять запросы к API и получать ответы в потоковом режиме. Модуль является частью проекта `hypotez` и предназначен для использования в задачах, требующих взаимодействия с языковой моделью.

## Подробнее

Модуль предназначен для упрощения взаимодействия с API `chat.getgpt.world`. Он предоставляет удобный интерфейс для отправки запросов и получения ответов в потоковом режиме. Класс `GetGpt` наследуется от `AbstractProvider`, что позволяет легко интегрировать его в существующую структуру провайдеров проекта `hypotez`.

## Классы

### `GetGpt`

**Описание**: Класс `GetGpt` является провайдером для взаимодействия с моделью GPT-3.5-turbo через API `chat.getgpt.world`.

**Наследует**:
- `AbstractProvider`: Абстрактный базовый класс для всех провайдеров в проекте `hypotez`.

**Атрибуты**:
- `url` (str): URL-адрес API `chat.getgpt.world`.
- `supports_stream` (bool): Указывает, поддерживает ли провайдер потоковый режим (в данном случае `True`).
- `working` (bool): Указывает, находится ли провайдер в рабочем состоянии (в данном случае `False`).
- `supports_gpt_35_turbo` (bool): Указывает, поддерживает ли провайдер модель GPT-3.5-turbo (в данном случае `True`).

**Методы**:
- `create_completion`: Отправляет запрос к API и возвращает ответ в потоковом режиме.

#### `create_completion`

```python
    def create_completion(
        model: str,
        messages: list[dict[str, str]],
        stream: bool, **kwargs: Any) -> CreateResult:
        """
        Отправляет запрос к API и возвращает ответ в потоковом режиме.

        Args:
            model (str): Название модели, которую необходимо использовать (в данном случае всегда `gpt-3.5-turbo`).
            messages (list[dict[str, str]]): Список сообщений для отправки в API.
            stream (bool): Указывает, должен ли ответ быть возвращен в потоковом режиме (в данном случае всегда `True`).
            **kwargs (Any): Дополнительные параметры для отправки в API.

        Returns:
            CreateResult: Генератор, возвращающий части ответа от API.

        Raises:
            requests.exceptions.HTTPError: Если запрос к API завершается с ошибкой HTTP.

        """
```

**Назначение**: Отправляет запрос к API `chat.getgpt.world` и возвращает ответ в потоковом режиме.

**Параметры**:
- `model` (str): Название модели, которую необходимо использовать.
- `messages` (list[dict[str, str]]): Список сообщений для отправки в API.
- `stream` (bool): Указывает, должен ли ответ быть возвращен в потоковом режиме.
- `**kwargs` (Any): Дополнительные параметры для отправки в API (например, `frequency_penalty`, `max_tokens`, `presence_penalty`, `temperature`, `top_p`).

**Возвращает**:
- `CreateResult`: Генератор, возвращающий части ответа от API.

**Вызывает исключения**:
- `requests.exceptions.HTTPError`: Если запрос к API завершается с ошибкой HTTP.

**Как работает функция**:
1. Функция `create_completion` принимает параметры `model`, `messages`, `stream` и `kwargs`.
2. Формируются заголовки запроса, включающие `Content-Type`, `Referer` и `user-agent`.
3. Данные запроса формируются в формате JSON, включающие сообщения, параметры из `kwargs` и случайный `uuid`.
4. Функция отправляет POST-запрос к API `chat.getgpt.world/api/chat/stream` с использованием библиотеки `requests` и включает потоковый режим.
5. Если запрос завершается с ошибкой, вызывается исключение `requests.exceptions.HTTPError`.
6. Функция итерируется по строкам ответа, декодирует JSON и извлекает содержимое из каждой строки.
7. Возвращается генератор, который выдает части ответа.

**ASCII flowchart**:

```
Начало
  │
  ├─────> Формирование заголовков HTTP-запроса
  │
  ├─────> Подготовка данных запроса в формате JSON
  │
  ├─────> Отправка POST-запроса к API с потоковой передачей
  │
  ├─────> Проверка на наличие ошибок HTTP
  │   │   Если ошибка: Выброс исключения HTTPError
  │   │   Если нет ошибки:
  │
  ├─────> Итерация по строкам ответа
  │
  ├─────> Декодирование JSON из каждой строки
  │
  ├─────> Извлечение содержимого из JSON
  │
  └─────> Выдача содержимого через генератор
  │
Конец
```

**Примеры**:

```python
messages = [{"role": "user", "content": "Hello, how are you?"}]
kwargs = {"max_tokens": 100, "temperature": 0.7}
result = GetGpt.create_completion(model="gpt-3.5-turbo", messages=messages, stream=True, **kwargs)
for line in result:
    print(line, end="")
```

## Функции

### `_encrypt`

```python
def _encrypt(e: str):
    """
    Эта функция не выполняет никаких действий.
    В оригинальном коде она была закомментирована и содержала попытку шифрования данных с использованием AES.
    На данный момент функция просто возвращает None.

    Args:
        e (str): Строка, которую предполагалось шифровать.

    Returns:
        None

    """
```

**Назначение**: Функция `_encrypt` должна была выполнять шифрование данных, но в текущей версии она закомментирована и ничего не делает.

**Параметры**:
- `e` (str): Строка, которую предполагалось шифровать.

**Возвращает**:
- `None`: Функция всегда возвращает `None`.

**Как работает функция**:

Функция должна была выполнять шифрование входной строки `e` с использованием алгоритма AES. Однако, в текущей версии весь код закомментирован, и функция просто возвращает `None`.

**ASCII flowchart**:

```
Начало
  │
  └─────> Возврат None
  │
Конец
```

**Примеры**:
```python
encrypted_data = _encrypt("test data")
print(encrypted_data)  # Output: None
```

### `_pad_data`

```python
def _pad_data(data: bytes) -> bytes:
    """
    Эта функция не выполняет никаких действий.
    В оригинальном коде она была закомментирована и содержала попытку дополнения данных для соответствия размеру блока AES.
    На данный момент функция просто возвращает входные данные без изменений.

    Args:
        data (bytes): Байтовая строка, которую предполагалось дополнить.

    Returns:
        bytes: Входные данные возвращаются без изменений.
    """
```

**Назначение**: Функция `_pad_data` должна была дополнять данные до размера блока AES, но в текущей версии она закомментирована и ничего не делает.

**Параметры**:
- `data` (bytes): Байтовая строка, которую предполагалось дополнить.

**Возвращает**:
- `bytes`: Входные данные возвращаются без изменений.

**Как работает функция**:

Функция должна была выполнять дополнение входных байтовых данных до размера блока, необходимого для алгоритма AES. Однако, в текущей версии весь код закомментирован, и функция просто возвращает входные данные без изменений.

**ASCII flowchart**:

```
Начало
  │
  └─────> Возврат входных данных
  │
Конец
```

**Примеры**:
```python
padded_data = _pad_data(b"test data")
print(padded_data)  # Output: b'test data'