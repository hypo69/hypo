# Модуль `utils.py`

## Обзор

Модуль `utils.py` содержит класс `Utils` с методом `get_cookies`, который используется для извлечения кукисов из различных веб-браузеров. Этот модуль помогает автоматизировать получение кукисов для определенного домена, что может быть полезно для автоматизации задач в браузере, таких как вход в систему или доступ к определенным ресурсам.

## Подробнее

Модуль предоставляет простой способ получения кукисов из популярных браузеров, таких как Chrome, Safari, Firefox, Edge и другие. Он использует библиотеку `browser_cookie3` для доступа к кукисам браузера. Если необходимо получить определенный набор кукисов, можно указать имя кукиса, и метод вернет только этот кукис.

## Классы

### `Utils`

**Описание**: Класс `Utils` содержит метод `get_cookies` для получения кукисов из различных браузеров.

**Методы**:
- `get_cookies(domain: str, setName: str = None, setBrowser: str = False) -> dict`: Получает кукисы для указанного домена из установленных браузеров.

## Функции

### `get_cookies`

```python
def get_cookies(domain: str, setName: str = None, setBrowser: str = False) -> dict:
    """
    Получает кукисы для указанного домена из установленных браузеров.

    Args:
        domain (str): Домен, для которого требуется получить кукисы.
        setName (str, optional): Имя конкретного кукиса, который нужно получить. По умолчанию `None`.
        setBrowser (str, optional): Имя браузера, из которого нужно получить кукисы. По умолчанию `False`.

    Returns:
        dict: Словарь с кукисами, где ключ - имя кукиса, значение - значение кукиса.

    Raises:
        ValueError: Если указанное имя кукиса `setName` не найдено ни в одном браузере.

    """
```

**Назначение**: Функция `get_cookies` предназначена для извлечения кукисов из различных установленных веб-браузеров для указанного домена. Она позволяет получить все кукисы для домена или конкретный кукис по имени.

**Параметры**:
- `domain` (str): Домен, для которого требуется получить кукисы.
- `setName` (str, optional): Имя конкретного кукиса, который нужно получить. Если `None`, возвращаются все кукисы для домена. По умолчанию `None`.
- `setBrowser` (str, optional): Имя браузера, из которого нужно получить кукисы. Если `False`, кукисы будут извлекаться из всех поддерживаемых браузеров. По умолчанию `False`.

**Возвращает**:
- `dict`: Словарь, содержащий кукисы для указанного домена. Ключи словаря - имена кукисов, значения - их значения.

**Вызывает исключения**:
- `ValueError`: Возникает, если указанное имя кукиса `setName` не найдено ни в одном браузере.

**Как работает функция**:

1. **Инициализация**: Функция начинает с инициализации пустого словаря `cookies`, который будет использоваться для хранения полученных кукисов.

2. **Выбор браузера**:
   - Если параметр `setBrowser` не указан (`False`), функция перебирает все браузеры, перечисленные в `Utils.browsers`.
   - Если `setBrowser` указан, функция ищет браузер с соответствующим именем и пытается получить кукисы только из этого браузера.

3. **Извлечение кукисов**:
   - Для каждого браузера функция пытается получить кукисы, используя `browser_cookie3`.
   - Она перебирает кукисы, возвращенные библиотекой `browser_cookie3`, и добавляет их в словарь `cookies`, если кукис с таким именем еще не существует.
   - Обработка исключений: Если во время получения кукисов возникает исключение (например, браузер не установлен или нет доступа к кукисам), исключение игнорируется, и функция переходит к следующему браузеру.

4. **Обработка имени кукиса**:
   - Если указано имя кукиса `setName`, функция пытается вернуть только этот кукис из полученного словаря.
   - Если кукис с указанным именем не найден, функция выводит сообщение об ошибке и завершает работу программы.

5. **Возврат результата**:
   - Если имя кукиса не указано, функция возвращает словарь со всеми кукисами, найденными для указанного домена.

```
  Начало
  │
  ├───Инициализация словаря cookies = {}
  │
  ├───Проверка setBrowser != False
  │   │
  │   ├───Да: Перебор браузеров, указанных в Utils.browsers
  │   │   │
  │   │   └───Попытка извлечения кукисов из указанного браузера
  │   │       │
  │   │       └───Обработка исключений при извлечении кукисов
  │   │
  │   └───Нет: Перебор всех браузеров в Utils.browsers
  │       │
  │       └───Попытка извлечения кукисов из каждого браузера
  │           │
  │           └───Обработка исключений при извлечении кукисов
  │
  ├───Проверка setName
  │   │
  │   ├───Да: Попытка вернуть конкретный кукис по имени
  │   │   │
  │   │   └───Обработка исключения ValueError, если кукис не найден
  │   │
  │   └───Нет: Возврат словаря со всеми кукисами
  │
  └───Конец
```

**Примеры**:

```python
from src.endpoints.freegpt_webui_ru.g4f.utils import Utils

# Получение всех кукисов для домена "example.com"
cookies = Utils().get_cookies(domain="example.com")
print(cookies)  # Вывод: {'cookie1': 'value1', 'cookie2': 'value2', ...}

# Получение конкретного кукиса "session_id" для домена "example.com"
session_cookie = Utils().get_cookies(domain="example.com", setName="session_id")
print(session_cookie)  # Вывод: {'session_id': '1234567890'}

# Получение кукисов только из браузера Chrome для домена "example.com"
chrome_cookies = Utils().get_cookies(domain="example.com", setBrowser="chrome")
print(chrome_cookies)  # Вывод: {'cookie1': 'value1', 'cookie2': 'value2', ...}