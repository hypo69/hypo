# Анализ кода модуля rocksp

**Качество кода**
6
- Плюсы
    - Код игры достаточно прост и понятен, логика игры реализована корректно.
    - Присутствует проверка ввода пользователя на корректность.
    - Код игры разбит на функции, что улучшает читаемость.
    - Есть docstring с описанием игры, правил и алгоритма, а также блок-схема.
- Минусы
    - Отсутствует обработка ошибок с использованием `logger.error`.
    - Нет документации в формате RST.
    - Код не соответствует PEP8, многострочные условия с `or` и `\` выглядят громоздко.
    - Избыточное использование `print` для вывода сообщений.

**Рекомендации по улучшению**

1.  **Добавить reStructuredText (RST) документацию**: Необходимо переписать docstring в формате RST для соответствия стандартам.
2.  **Использовать `logger.error` для обработки ошибок**: Вместо `print` использовать `logger.error` для записи ошибок и предупреждений.
3.  **Улучшить форматирование и стиль кода**: Привести код в соответствие с PEP8.
4.  **Улучшить читаемость логических выражений**: Упростить и разбить многострочные логические выражения.
5.  **Избегать избыточного использования `print`**: Использовать `logger.debug` для отладочных сообщений и `logger.info` для информационных.
6.  **Использовать константы для значений**: Заменить числовые значения (1, 2, 3) на константы с понятными именами (например, `ROCK`, `SCISSORS`, `PAPER`).
7.  **Разделить логику игры на функции**: Вынести логику выбора победителя в отдельную функцию для улучшения читаемости и повторного использования.

**Оптимизированный код**

```python
"""
Модуль для реализации игры "Камень, ножницы, бумага".
====================================================

Этот модуль реализует классическую игру "Камень, ножницы, бумага" между пользователем и компьютером.

Игра состоит из одного раунда, в котором пользователь вводит свой выбор (1 - камень, 2 - ножницы, 3 - бумага),
а компьютер делает случайный выбор. Затем определяется победитель на основе правил игры.

Пример использования
--------------------

.. code-block:: python

   from src.endpoints.ai_games.101_basic_computer_games.ru.GAMES.ROCKSP.rocksp import play_rock_paper_scissors

   play_rock_paper_scissors()
"""
import random
from src.logger.logger import logger

ROCK = 1
SCISSORS = 2
PAPER = 3


def determine_winner(user_choice: int, computer_choice: int) -> str:
    """
    Определяет победителя в игре "Камень, ножницы, бумага".

    :param user_choice: Выбор пользователя (1 - камень, 2 - ножницы, 3 - бумага).
    :param computer_choice: Выбор компьютера (1 - камень, 2 - ножницы, 3 - бумага).
    :return: Результат игры ("Ничья!", "Вы выиграли!", "Вы проиграли!").
    """
    if user_choice == computer_choice:
        return "Ничья!"
    if (user_choice == ROCK and computer_choice == SCISSORS) or \
       (user_choice == SCISSORS and computer_choice == PAPER) or \
       (user_choice == PAPER and computer_choice == ROCK):
        return "Вы выиграли!"
    return "Вы проиграли!"


def play_rock_paper_scissors():
    """
    Запускает игру "Камень, ножницы, бумага".

    Запрашивает ввод пользователя, генерирует выбор компьютера, определяет победителя и выводит результат.
    """
    while True:
        # Запрашиваем выбор пользователя
        try:
            user_choice = int(input("Введите ваш выбор (1 - Камень, 2 - Ножницы, 3 - Бумага): "))
        except ValueError as e:
            # Логирование ошибки ввода
            logger.error("Неверный ввод. Пожалуйста, введите число 1, 2 или 3.", exc_info=True)
            continue

        # Проверяем корректность ввода
        if user_choice not in [ROCK, SCISSORS, PAPER]:
            logger.error("Неверный ввод. Пожалуйста, введите число 1, 2 или 3.")
            continue

        # Генерируем случайный выбор для компьютера
        computer_choice = random.randint(ROCK, PAPER)

        # Логирование выбора игрока и компьютера
        logger.debug(f"Выбор пользователя: {user_choice}")
        logger.debug(f"Выбор компьютера: {computer_choice}")

        # Определяем победителя
        result = determine_winner(user_choice, computer_choice)

        # Логирование результата игры
        logger.info(result)
        print(f"Ваш выбор: {user_choice}")
        print(f"Выбор компьютера: {computer_choice}")
        print(result)
        break


# Запускаем игру
if __name__ == "__main__":
    play_rock_paper_scissors()