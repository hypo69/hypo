```markdown
# event-target-shim

[![npm version](https://img.shields.io/npm/v/event-target-shim.svg)](https://www.npmjs.com/package/event-target-shim)
[![Downloads/month](https://img.shields.io/npm/dm/event-target-shim.svg)](http://www.npmtrends.com/event-target-shim)
[![Build Status](https://travis-ci.org/mysticatea/event-target-shim.svg?branch=master)](https://travis-ci.org/mysticatea/event-target-shim)
[![Coverage Status](https://codecov.io/gh/mysticatea/event-target-shim/branch/master/graph/badge.svg)](https://codecov.io/gh/mysticatea/event-target-shim)
[![Dependency Status](https://david-dm.org/mysticatea/event-target-shim.svg)](https://david-dm.org/mysticatea/event-target-shim)

This package provides a polyfill for the WHATWG `EventTarget` interface, along with some extensions.  It allows you to create custom event-driven objects in a way consistent with modern web standards, particularly crucial for environments lacking native `EventTarget`.

- Implements the core `EventTarget` interface.
- Adds `defineEventAttribute` for creating event properties (e.g., `element.onclick`).
- Supports various event listener options (capture, passive, once).
- Includes ES modules, CommonJS, and UMD builds for flexibility.

## Installation

```bash
npm install event-target-shim
```

Then import or require the necessary parts:

```javascript
import { EventTarget, defineEventAttribute } from "event-target-shim";
// Or
const { EventTarget, defineEventAttribute } = require("event-target-shim");
// or (UMD)
const { EventTarget, defineEventAttribute } = window.EventTargetShim;
```

## Usage

### `EventTarget` Class

The `EventTarget` class is the core of this package.  Use it to create custom objects that can handle events.

#### `addEventListener(type, callback, options)`

Registers an event listener.

- `type`: The event type string (e.g., "click").
- `callback`: The function to be executed when the event occurs.
- `options`: (Optional) An object or boolean.  Specifies listener configuration (e.g., `capture`, `passive`, `once`). A boolean is equivalent to `{ capture: options }`.

#### `removeEventListener(type, callback, options)`

Unregisters an event listener.

- `type`: The event type.
- `callback`: The listener function to remove.
- `options`: Configuration for the listener (capture).  A boolean is equivalent to `{ capture: options }`.

#### `dispatchEvent(event)`

Dispatches an event to trigger listeners.

- `event`: The event object (or a plain object with a `type` property) to dispatch.  Listeners receive the `Event` object.

### `defineEventAttribute(proto, type)`

Creates an event attribute on an object's prototype.  This maps a method like `element.onclick` to an event listener.

- `proto`: The prototype object.
- `type`: The event type to map to the attribute.


## Examples

**ES6+ (using imports):**

```javascript
import { EventTarget, defineEventAttribute } from "event-target-shim";

class MyCustomObject extends EventTarget {
  constructor() {
    super();
    defineEventAttribute(this.constructor.prototype, "myEvent");
  }
}

const myObj = new MyCustomObject();

myObj.addEventListener("myEvent", (event) => {
  console.log("myEvent triggered!");
});

myObj.myEvent = (event) => {
  console.log("myEvent handled!");
}

myObj.dispatchEvent(new CustomEvent("myEvent"));
```

**TypeScript (with type safety):**

```typescript
// ... (import statements)

interface MyCustomObjectEvents {
  myEvent: CustomEvent;
}

class MyCustomObject extends EventTarget<MyCustomObjectEvents> {
  // ... (constructor, methods)
}

// ... (rest of the example)
```

## Browser Compatibility

This library aims to work with browsers that don't support the native `EventTarget`.  Its use is most critical for older browsers or environments that don't implement the full DOM.


## Contributing

Contributions are welcome!  See the [GitHub repository](https://github.com/mysticatea/event-target-shim) for details.
```