```markdown
# mdast-util-to-hast

[![Build Status][build-badge]][build]
[![Coverage][coverage-badge]][coverage]
[![Downloads][downloads-badge]][downloads]
[![Size][size-badge]][size]
[![Sponsors][sponsors-badge]][collective]
[![Backers][backers-badge]][collective]
[![Chat][chat-badge]][chat]

A utility to transform a [mdast](https://github.com/syntax-tree/mdast) tree to a [hast](https://github.com/syntax-tree/hast) tree.

## Contents

*   [Introduction](#introduction)
*   [Installation](#installation)
*   [Usage](#usage)
*   [API](#api)
    *   [`toHast(tree[, options])`](#tohasttree-options)
    *   [`defaultHandlers`](#defaulthandlers)
    *   [`Footnote Backreferences`](#footnote-backreferences)
        *   [`defaultFootnoteBackContent(referenceIndex, rereferenceIndex)`](#defaultfootnotebackcontentreferenceindex-rereferenceindex)
        *   [`defaultFootnoteBackLabel(referenceIndex, rereferenceIndex)`](#defaultfootnotebacklabelreferenceindex-rereferenceindex)
    *   [Custom Handlers](#custom-handlers)
        *   [`Handler`](#handler)
        *   [`Handlers`](#handlers)
    *   [`Options`](#options)
    *   [`Passthrough Types`](#passthrough-types)
    *   [`Unknown Node Handling`](#unknown-node-handling)
    *   [`Raw HTML Handling`](#raw-html-handling)


## Introduction

This package transforms a Markdown Abstract Syntax Tree (mdast) into a Hast (HTML Abstract Syntax Tree) representation.  It's commonly used in remark-rehype pipelines to convert Markdown to HTML.


## Installation

```bash
npm install mdast-util-to-hast
```

or for use with Deno and ESM.sh:

```javascript
import {toHast} from 'https://esm.sh/mdast-util-to-hast@13';
```


## Usage

```javascript
import {fromMarkdown} from 'mdast-util-from-markdown';
import {toHast} from 'mdast-util-to-hast';
import {toHtml} from 'hast-util-to-html';

const markdown = '# Hello, world!';
const mdast = fromMarkdown(markdown);
const hast = toHast(mdast);
const html = toHtml(hast);

console.log(html); // Output: <h1>Hello, world!</h1>
```


## API

### `toHast(tree[, options])`

Transforms the provided mdast `tree` into a hast `tree`.

*   `tree` (object): The mdast tree to transform.
*   `options` (object, optional): Configuration options.


### `defaultHandlers`

A set of default handlers for common mdast node types.  These map mdast node types to their corresponding hast representations.


### Footnote Backreferences

This package supports footnotes, which requires specific handling of backreferences.

#### `defaultFootnoteBackContent(referenceIndex, rereferenceIndex)`

Generates the default content for footnote backreferences.

#### `defaultFootnoteBackLabel(referenceIndex, rereferenceIndex)`

Generates the default label for footnote backreferences.


### Custom Handlers

You can add custom handlers to transform specific mdast node types into custom hast nodes.

#### `Handler`

A function that handles a single mdast node and its context.


#### `Handlers`

An object where keys are mdast node types and values are corresponding `Handler` functions.  This allows you to customize the transformation for specific nodes.


### Options

Options to customize the conversion process.

*   `allowDangerousHtml` (boolean, default: `false`):  If `true`, raw HTML within the mdast tree will be preserved in the hast tree.  **Use with caution, as enabling this can introduce security vulnerabilities.**
*   `handlers` (object, optional): Custom handlers for specific mdast node types.
*   `passThrough` (array, optional): List of mdast node types to pass through to the hast tree without transformation.
*   `unknownHandler` (function, optional): Handler for mdast nodes not covered by other handlers.  Defaults to converting unknown nodes to a div element.
*   `footnoteLabel` (string, default: `'Footnotes'`): Text for the footnote section heading.
*   `footnoteBackLabel` (function, default: defaultFootnoteBackLabel): Function to customize footnote backreference labels.
*   `footnoteBackContent` (function, default: defaultFootnoteBackContent): Function to customize footnote backreference content.
*   `footnoteLabelProperties` (object, default: `{className: ['sr-only']}`): Properties to apply to the footnote section heading. (e.g., {className: ['sr-only']}).
*  `clobberPrefix` (string, default: `'user-content-'`): Prefix for footnote IDs to prevent DOM clobbering.


### Passthrough Types

The `passThrough` option allows you to specify types that should be passed through to hast, preserving them as they are in the mdast tree.


### Unknown Node Handling

The `unknownHandler` provides fine-grained control over how mdast nodes with unknown types are handled in the conversion.


### Raw HTML Handling

The `allowDangerousHtml` option should be used with great care, as it allows potentially unsafe raw HTML from the input to appear directly in the output.  Always sanitize user-supplied data before using `allowDangerousHtml`.


<!-- Add links to definitions -->

<!-- ... (rest of the documentation) -->
```