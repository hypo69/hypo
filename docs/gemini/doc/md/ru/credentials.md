```markdown
# Модуль credentials

## Обзор

Этот модуль предоставляет класс `ProgramSettings` для хранения и управления глобальными настройками программы.  Он загружает конфигурацию из файла `config.json` и учетные данные из базы данных KeePass.

## Классы

### `ProgramSettings`

**Описание**: Класс `ProgramSettings` является синглтоном, содержащим основные настройки проекта, включая пути к директориям, API-ключи и другие важные данные.

**Параметры**:

* `base_dir` (Path): Корневая директория проекта, вычисляется автоматически.
* `settings` (SimpleNamespace): Объект `SimpleNamespace` для хранения настроек.
* `credentials` (SimpleNamespace): Объект `SimpleNamespace`, содержащий учетные данные различных сервисов (AliExpress, PrestaShop, OpenAI, Gemini, Discord, Telegram, SMTP, Facebook, GAPI).  Структура вложенных `SimpleNamespace` позволяет организовать данные по сервисам и их компонентам.
* `MODE` (str): Режим работы (по умолчанию 'development').
* `path` (SimpleNamespace):  Объект `SimpleNamespace`, содержащий пути к важным директориям проекта.
* `config` (SimpleNamespace): Объект `SimpleNamespace`, содержащий конфигурацию из файла `config.json`.

**Методы**:

- `__init__(**kwargs)`: Инициализирует объект `ProgramSettings`. Выполняет загрузку настроек из файла `config.json`, находит корневую директорию проекта, загружает учетные данные из базы данных KeePass.
- `_load_credentials()`:  Загружает учетные данные из базы данных KeePass. Вызывает другие вспомогательные методы для загрузки данных отдельных сервисов.
- `_open_kp(retry=3)`: Открывает базу данных KeePass.  Поддерживает повторные попытки открытия в случае ошибок.
- `_load_{сервис}_credentials(kp: PyKeePass)`: Загружает учетные данные для конкретного сервиса (AliExpress, OpenAI, и т.д.) из базы данных KeePass.  Эти методы валидируют и обрабатывают данные из базы KeePass.
- `now(dformat='%y_%m_%d_%H_%M_%S_%f')`: Возвращает текущее время в заданном формате.


**Вызывает исключения**:
- `BinaryError`: Ошибка при работе с бинарными данными.
- `CredentialsError`: Ошибка при получении учетных данных.
- `DefaultSettingsException`: Ошибка при использовании стандартных настроек.
- `HeaderChecksumError`: Ошибка проверки контрольной суммы заголовка.
- `KeePassException`: Ошибка при работе с базой данных KeePass.
- `PayloadChecksumError`: Ошибка проверки контрольной суммы данных.
- `UnableToSendToRecycleBin`: Ошибка при отправке файла в корзину.
- Возможны и другие исключения в методах для загрузки данных из базы KeePass, зависящие от используемых библиотек.




## Функции

### `singleton(cls)`

**Описание**: Декоратор, реализующий паттерн Singleton для класса.


**Параметры**:

* `cls`: Класс, для которого необходимо реализовать Singleton.

**Возвращает**:

* Функция `get_instance`: возвращающая единственный экземпляр класса.


## Полезные ссылки

- [Документация PyKeePass](https://pykeepass.readthedocs.io/en/stable/)
- [Документация Pydantic](https://pydantic-docs.helpmanual.io/)


```