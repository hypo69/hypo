# Модуль для отправки рекламных объявлений в Facebook

## Обзор

Модуль `src.endpoints.advertisement.facebook.start_posting` предназначен для автоматической отправки рекламных объявлений в группы Facebook. Он использует веб-драйвер для взаимодействия с сайтом Facebook и выполняет итеративный процесс публикации объявлений в различных группах.

## Подробней

Этот модуль является частью системы автоматизации маркетинга `hypotez`. Он отвечает за размещение рекламных материалов в группах Facebook с целью повышения узнаваемости бренда и привлечения трафика.

## Классы

В данном коде классы не определены. Вместо этого используется класс `FacebookPromoter` из модуля `src.endpoints.advertisement.facebook`.

## Функции

В явном виде функции не определены, но используется объект `promoter`, который вызывает методы класса `FacebookPromoter`.
Код выполняет следующие шаги:

1.  **Инициализация веб-драйвера:** Создается экземпляр драйвера `Chrome` для управления браузером.
2.  **Авторизация на Facebook:** Драйвер переходит по ссылке "https://facebook.com", предполагая, что пользователь авторизован.
3.  **Определение списков файлов и кампаний:** Задаются списки файлов (`filenames`, `excluded_filenames`) и кампаний (`campaigns`), которые будут использоваться для размещения объявлений.
4.  **Инициализация промоутера:** Создается экземпляр класса `FacebookPromoter` с передачей драйвера и списков файлов.
5.  **Запуск бесконечного цикла:** В цикле запускаются кампании продвижения, затем происходит ожидание в течение 180 секунд.
6.  **Обработка прерывания с клавиатуры:** При получении сигнала прерывания (например, `Ctrl+C`) цикл завершается, и в лог записывается сообщение о прерывании.

### `FacebookPromoter.run_campaigns`

**Назначение**: Запускает рекламные кампании, размещая объявления в группах Facebook.

```python
def run_campaigns(campaigns: list, group_file_paths: list):
    """
    Запускает рекламные кампании, размещая объявления в группах Facebook.

    Args:
        campaigns (list): Список названий кампаний для запуска.
        group_file_paths (list): Список путей к файлам, содержащим информацию о группах.

    Raises:
        Exception: Если возникает ошибка при выполнении кампании.
    """
    ...
```

**Параметры**:

*   `campaigns` (list): Список названий кампаний для запуска.
*   `group_file_paths` (list): Список путей к файлам, содержащим информацию о группах.

**Возвращает**:

*   Нет явного возвращаемого значения.

**Вызывает исключения**:

*   `Exception`: Если возникает ошибка при выполнении кампании.

**Как работает функция**:

1.  Функция принимает список кампаний и список файлов с информацией о группах.
2.  Внутри функции происходит итерация по группам и кампаниям, в ходе которой размещаются рекламные объявления.
3.  Если в процессе выполнения возникают ошибки, они перехватываются и логируются.

**Внутренние функции**:

Внутри данной функции нет внутренних функций.

**Примеры**:

В данном коде примеры вызова этой функции выглядят следующим образом:

```python
promoter.run_campaigns(campaigns = copy.copy(campaigns), group_file_paths = filenames)
```

```mermaid
graph LR
    A[Инициализация списков кампаний и файлов групп] --> B(Запуск цикла продвижения);
    B --> C{Вызов promoter.run_campaigns()};
    C --> D[Размещение рекламных объявлений в группах];
    D --> E{Пауза на 180 секунд};
    E --> B;
    B --> F{Прерывание с клавиатуры?};
    F -- Да --> G(Завершение цикла);
    F -- Нет --> B;
```

## Переменные

*   `filenames` (list[str]): Список имен файлов, содержащих информацию о группах Facebook для размещения объявлений.

*   `excluded_filenames` (list[str]): Список имен файлов, исключенных из процесса размещения объявлений.

*   `campaigns` (list): Список кампаний для запуска (например, 'brands', 'mom\_and\_baby').

*   `promoter` (FacebookPromoter): Экземпляр класса `FacebookPromoter`, используемый для запуска и управления рекламными кампаниями.

*   `d` (Driver): Экземпляр класса `Driver`, используемый для управления браузером Chrome и взаимодействия с Facebook.

## Как работает код:

1.  Инициализируется веб-драйвер Chrome для управления браузером.
2.  Выполняется переход на сайт Facebook.
3.  Определяются списки файлов, содержащих информацию о группах Facebook, и список рекламных кампаний.
4.  Создается экземпляр класса `FacebookPromoter`, которому передается драйвер и списки файлов.
5.  Запускается бесконечный цикл, в котором вызывается метод `run_campaigns` для размещения объявлений в группах.
6.  После выполнения кампаний происходит ожидание в течение 180 секунд.
7.  Если пользователь прерывает выполнение программы с помощью клавиатуры (например, `Ctrl+C`), цикл завершается.