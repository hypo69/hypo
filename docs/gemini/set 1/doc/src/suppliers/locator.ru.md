# Локаторы полей на HTML-странице

## Обзор

Данный файл содержит JSON-локаторы для элементов на HTML-странице.  Локаторы описывают различные способы поиска элементов на странице, включая атрибуты, селекторы, действия и условия.  Они предназначены для использования с Selenium WebDriver для автоматизации взаимодействия с веб-сайтом.

## Оглавление

- [Локаторы полей на HTML-странице](#локаторы-полей-на-html-странице)
- [Пример локатора](#пример-локатора)
- [Детали](#детали)
- [Сложные локаторы](#сложные-локаторы)
- [Описание ключей локатора](#описание-ключей-локатора)
- [Обработка различных версий страницы](#обработка-различных-версий-страницы)


## Пример локатора

```json
"close_banner": {
    "attribute": null, 
    "by": "XPATH",
    "selector": "//button[@id = 'closeXButton']",
    "if_list": "first",
    "use_mouse": false,
    "mandatory": false,
    "timeout": 0,
    "timeout_for_event": "presence_of_element_located",
    "event": "click()",
    "locator_description": "Закрываю pop-up окно. Если оно не появилось — не страшно (`mandatory`: `false`).",
  },
  "additional_images_urls": {
    "attribute": "src",
    "by": "XPATH",
    "selector": "//ol[contains(@class, 'flex-control-thumbs')]//img",
    "if_list": "all",
    "use_mouse": false,
    "mandatory": false,
    "timeout": 0,
    "timeout_for_event": "presence_of_element_located",
    "event": null,
    "locator_description": "Получает список `url` дополнительных изображений."
  },
  // ... (другие примеры локаторов)
}
```

## Детали

Локаторы представляют собой JSON-объекты, где каждый ключ соответствует имени поля, а значение — словарь с параметрами для поиска и взаимодействия с элементом.

- **`attribute`**: Атрибут, который нужно получить от веб-элемента.  `null` означает возврат всего элемента.
- **`by`**: Стратегия поиска (XPATH, CSS_SELECTOR, ID, etc.).
- **`selector`**:  Селектор для поиска элемента.
- **`if_list`**: Обработка списка элементов.  `first`, `all`, `last`, `even`, `odd`, или конкретные номера.
- **`use_mouse`**: Использовать ли мышь для действий (true/false).
- **`mandatory`**: Обязателен ли элемент (true/false).
- **`timeout`**: Время ожидания (в секундах).
- **`timeout_for_event`**: Время ожидания для события (например, `presence_of_element_located`).
- **`event`**: Событие, которое нужно выполнить (click(), screenshot(), etc.).
- **`locator_description`**:  Описание назначения локатора.

## Сложные локаторы

Локаторы могут содержать списки, кортежи или словари для более сложных сценариев поиска и обработки.  Примеры приведены в разделе "Пример локатора со списками" и "Пример локатора со словарем".

## Описание ключей локатора

Более подробные пояснения к каждому ключу локатора.

## Обработка различных версий страницы

Для адаптации к различным версиям (например, мобильная/десктопная) рекомендуется хранить отдельные файлы локаторов.  Приведен пример, как в коде можно выбирать файл локаторов в зависимости от текущего URL.


```python
    async def grab_page(self) -> ProductFields:
        # ...
        if 'ksp.co.il/mob' in d.current_url:
            self.locator = j_loads_ns(gs.path.src / 'suppliers' / 'ksp' / 'locators' / 'product_mobile_site.json')
        # ...
```