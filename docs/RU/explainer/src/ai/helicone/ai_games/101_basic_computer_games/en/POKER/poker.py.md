## <алгоритм>

**1. Инициализация:**
   - Создается список из 5 случайных чисел от 1 до 13, представляющих карты.
     *Пример:* `hand = [3, 7, 1, 12, 5]`

**2. Вывод карт на экран:**
   - Выводятся карты игроку на экран с нумерацией от 1 до 5.
     *Пример:*
     ```
     Ваши карты:
     1: 3  2: 7  3: 1  4: 12  5: 5
     ```

**3. Запрос у игрока, какие карты он хочет заменить:**
   - Игрок вводит номера карт через пробел, которые нужно заменить, или `0`, если не нужно заменять.
     - *Пример ввода на замену:* `1 3 5`
     - *Пример ввода без замены:* `0`

**4. Замена карт:**
   - Если игрок ввел `0`, то перейти к шагу 6.
   - Иначе, заменяются карты по указанным номерам на новые случайные числа от 1 до 13.
      - *Пример:* Если игрок ввел `1 3 5`, карты на позициях 1, 3, 5 заменяются:
         - Начальная рука: `hand = [3, 7, 1, 12, 5]`
         - После замены: `hand = [10, 7, 8, 12, 2]`

**5. Вывод обновленных карт на экран:**
   - Выводятся обновленные карты игроку с нумерацией.
     *Пример:*
     ```
     Ваши карты:
     1: 10  2: 7  3: 8  4: 12  5: 2
     ```

**6. Анализ комбинации:**
   - Подсчитывается количество повторений каждой карты.
     *Пример:* Для `hand = [10, 7, 8, 12, 2]`, `counts = {10: 1, 7: 1, 8: 1, 12: 1, 2: 1}`
   - Проверяются комбинации в следующем порядке:
     - **Флеш**: Проверяется, что все карты уникальны и идут последовательно (например, 1, 2, 3, 4, 5).
       - Если *Флеш* найден, выводится сообщение и выигрыш, игра завершается.
         *Пример*: `hand = [2, 3, 4, 5, 6]` - "Флеш! Выигрыш 20 очков"
     - **Каре**: Проверяется, что есть четыре одинаковые карты.
       - Если *Каре* найдено, выводится сообщение и выигрыш, игра завершается.
         *Пример*: `hand = [5, 5, 5, 5, 2]` - "Каре! Выигрыш 25 очков"
     - **Фулл Хаус**: Проверяется, что есть три одинаковые карты и пара.
       - Если *Фулл Хаус* найден, выводится сообщение и выигрыш, игра завершается.
         *Пример*: `hand = [3, 3, 3, 7, 7]` - "Фулл Хаус! Выигрыш 15 очков"
     - **Тройка**: Проверяется, что есть три одинаковые карты.
       - Если *Тройка* найдена, выводится сообщение и выигрыш, игра завершается.
         *Пример*: `hand = [9, 9, 9, 2, 5]` - "Тройка! Выигрыш 10 очков"
     - **Две пары**: Проверяется, что есть две пары.
       - Если *Две пары* найдены, выводится сообщение и выигрыш, игра завершается.
         *Пример*: `hand = [4, 4, 10, 10, 2]` - "Две пары! Выигрыш 5 очков"
     - **Пара**: Проверяется, что есть пара.
       - Если *Пара* найдена, выводится сообщение и выигрыш, игра завершается.
         *Пример*: `hand = [7, 7, 1, 5, 9]` - "Пара! Выигрыш 2 очка"
   - Если ни одна комбинация не найдена, выводится сообщение об отсутствии выигрыша.
     *Пример*: `hand = [1, 4, 7, 10, 13]` - "Нет выигрыша."

**7. Конец игры.**

## <mermaid>

```mermaid
flowchart TD
    Start(Start) --> InitializeHand[Initialize Hand: <br><code>hand = create_hand()</code>]
    InitializeHand --> DisplayInitialHand[Display Initial Hand:<br><code>display_hand(hand)</code>]
    DisplayInitialHand --> GetReplaceCards[Get Cards to Replace:<br><code>replace_indices = get_cards_to_replace()</code>]
    GetReplaceCards --> CheckNoReplace{No cards to replace?<br><code>if not replace_indices</code>}
    CheckNoReplace -- Yes --> AnalyzeCurrentHand[Analyze Hand:<br><code>analyze_hand(hand)</code>]
    CheckNoReplace -- No --> ReplaceSelectedCards[Replace Cards:<br><code>hand = replace_cards(hand, replace_indices)</code>]
    ReplaceSelectedCards --> DisplayReplacedHand[Display Replaced Hand:<br><code>display_hand(hand)</code>]
    DisplayReplacedHand --> AnalyzeCurrentHand
    AnalyzeCurrentHand --> CheckForFlush{Check for Flush}
    CheckForFlush -- Yes --> OutputFlush[Output: Flush and Win]
    OutputFlush --> End(End)
    CheckForFlush -- No --> CheckForFourOfAKind{Check for Four of a Kind}
    CheckForFourOfAKind -- Yes --> OutputFourOfAKind[Output: Four of a Kind and Win]
    OutputFourOfAKind --> End
     CheckForFourOfAKind -- No --> CheckForFullHouse{Check for Full House}
    CheckForFullHouse -- Yes --> OutputFullHouse[Output: Full House and Win]
    OutputFullHouse --> End
    CheckForFullHouse -- No --> CheckForThreeOfAKind{Check for Three of a Kind}
    CheckForThreeOfAKind -- Yes --> OutputThreeOfAKind[Output: Three of a Kind and Win]
    OutputThreeOfAKind --> End
    CheckForThreeOfAKind -- No --> CheckForTwoPairs{Check for Two Pairs}
    CheckForTwoPairs -- Yes --> OutputTwoPairs[Output: Two Pairs and Win]
    OutputTwoPairs --> End
     CheckForTwoPairs -- No --> CheckForPair{Check for Pair}
    CheckForPair -- Yes --> OutputPair[Output: Pair and Win]
    OutputPair --> End
    CheckForPair -- No --> OutputNoWin[Output: No Win]
    OutputNoWin --> End
```

**Зависимости, импортируемые при создании диаграммы:**

-   `random`: используется для генерации случайных чисел, которые используются для создания карт в руке игрока и для замены карт.

**Описание переменных `mermaid`:**

-   `Start`: Начало игры.
-   `InitializeHand`: Вызов функции `create_hand()` для создания начальной руки игрока.
-   `DisplayInitialHand`: Вызов функции `display_hand()` для вывода начальной руки на экран.
-   `GetReplaceCards`:  Вызов функции `get_cards_to_replace()` для получения ввода от игрока о картах для замены.
-  `CheckNoReplace`: Проверка, есть ли карты для замены (если `replace_indices` пустой, то нет).
-   `ReplaceSelectedCards`:  Вызов функции `replace_cards()` для замены выбранных карт.
-   `DisplayReplacedHand`: Вызов функции `display_hand()` для вывода обновленной руки на экран.
-    `AnalyzeCurrentHand`: Вызов функции `analyze_hand()` для анализа комбинации карт.
-   `CheckForFlush`: Проверка наличия комбинации "Флеш".
-   `OutputFlush`: Вывод сообщения о выигрыше с комбинацией "Флеш".
-   `CheckForFourOfAKind`: Проверка наличия комбинации "Каре".
-    `OutputFourOfAKind`: Вывод сообщения о выигрыше с комбинацией "Каре".
-   `CheckForFullHouse`: Проверка наличия комбинации "Фулл Хаус".
-    `OutputFullHouse`: Вывод сообщения о выигрыше с комбинацией "Фулл Хаус".
-   `CheckForThreeOfAKind`: Проверка наличия комбинации "Тройка".
-  `OutputThreeOfAKind`: Вывод сообщения о выигрыше с комбинацией "Тройка".
-   `CheckForTwoPairs`: Проверка наличия комбинации "Две пары".
-  `OutputTwoPairs`: Вывод сообщения о выигрыше с комбинацией "Две пары".
-   `CheckForPair`: Проверка наличия комбинации "Пара".
-    `OutputPair`: Вывод сообщения о выигрыше с комбинацией "Пара".
-   `OutputNoWin`: Вывод сообщения об отсутствии выигрыша.
-   `End`: Конец игры.

## <объяснение>

**Импорты:**

-   `import random`:
    -   Импортирует модуль `random`, который используется для генерации псевдослучайных чисел.
    -   Используется для создания карт в руке игрока (`create_hand`) и для замены карт (`replace_cards`).
    -   Не зависит от других пакетов `src` в данном контексте, так как является стандартной библиотекой Python.

**Функции:**

1.  **`create_hand()`**:
    -   **Аргументы:** Нет.
    -   **Возвращаемое значение:** `hand` (список из 5 случайных целых чисел от 1 до 13, представляющих карты).
    -   **Назначение:** Генерирует начальную руку игрока из 5 случайных карт.
    -   **Пример:** `create_hand()` может вернуть `[4, 9, 2, 11, 6]`.
2.  **`display_hand(hand)`**:
    -   **Аргументы:** `hand` (список карт).
    -   **Возвращаемое значение:** Нет (выводит результат в консоль).
    -   **Назначение:** Выводит карты на экран, нумеруя их для удобства игрока.
    -   **Пример:** Если `hand` равен `[3, 7, 1, 12, 5]`, то функция выведет:
        ```
        Ваши карты:
        1: 3  2: 7  3: 1  4: 12  5: 5
        ```
3.  **`get_cards_to_replace()`**:
    -   **Аргументы:** Нет.
    -   **Возвращаемое значение:** `replace_cards` (список целых чисел, индексов карт для замены) или пустой список, если игрок ввел 0.
    -   **Назначение:** Запрашивает у игрока номера карт, которые он хочет заменить.
    -   **Пример:**
        -   Если игрок вводит `"1 3 5"`, функция вернет `[0, 2, 4]`.
        -   Если игрок вводит `"0"`, функция вернет `[]`.
        -   Если игрок вводит `"10"`, будет выведено сообщение "Неверный ввод. Введите номера карт от 1 до 5 или 0.".
        -   Если игрок вводит `"a b c"`, будет выведено сообщение "Неверный ввод. Пожалуйста, введите номера через пробел."
4.  **`replace_cards(hand, replace_indices)`**:
    -   **Аргументы:**
        -   `hand` (список карт).
        -   `replace_indices` (список индексов карт для замены).
    -   **Возвращаемое значение:** `hand` (обновленный список карт).
    -   **Назначение:** Заменяет карты в руке на новые случайные карты.
    -   **Пример:** Если `hand` равен `[3, 7, 1, 12, 5]` и `replace_indices` равен `[0, 2, 4]`, функция может вернуть `[10, 7, 8, 12, 2]`.
5.  **`analyze_hand(hand)`**:
    -   **Аргументы:** `hand` (список карт).
    -   **Возвращаемое значение:** Нет (выводит результат в консоль).
    -   **Назначение:** Анализирует руку и определяет выигрышную комбинацию. Выводит сообщение о комбинации или об отсутствии выигрыша.
    -   **Примеры:**
        -   Для `hand = [2, 3, 4, 5, 6]`, выведет "Флеш! Выигрыш 20 очков".
        -   Для `hand = [5, 5, 5, 5, 2]`, выведет "Каре! Выигрыш 25 очков".
        -   Для `hand = [3, 3, 3, 7, 7]`, выведет "Фулл Хаус! Выигрыш 15 очков".
        -   Для `hand = [9, 9, 9, 2, 5]`, выведет "Тройка! Выигрыш 10 очков".
        -   Для `hand = [4, 4, 10, 10, 2]`, выведет "Две пары! Выигрыш 5 очков".
        -   Для `hand = [7, 7, 1, 5, 9]`, выведет "Пара! Выигрыш 2 очка".
        -   Для `hand = [1, 4, 7, 10, 13]`, выведет "Нет выигрыша.".
6.  **`play_poker()`**:
    -   **Аргументы:** Нет.
    -   **Возвращаемое значение:** Нет.
    -   **Назначение:** Запускает игру в покер, вызывая другие функции.
    -   **Поток данных:**
        -   `create_hand()` -> `hand`
        -   `hand` -> `display_hand()`
        -   `get_cards_to_replace()` -> `replace_indices`
        -   `hand`, `replace_indices` -> `replace_cards()` -> `hand`
        -   `hand` -> `display_hand()`
        -   `hand` -> `analyze_hand()`

**Переменные:**

-   `hand`: Список целых чисел, представляющих карты в руке игрока.
-   `replace_indices`: Список целых чисел, представляющих индексы карт для замены.
-   `counts`: Словарь, используемый для подсчета количества повторений каждой карты. Ключи - значения карт, значения - количество повторений.
-   `values`: Список количества повторений карт.
- `replace_str`: Строка, введенная пользователем для замены карт.
-   `card`: Временная переменная, используемая для перебора элементов в списках.
-   `i`, `index`: Целочисленные переменные, используемые для индексации списков.

**Потенциальные ошибки и области для улучшения:**

-   **Обработка ошибок ввода:** Функция `get_cards_to_replace()` обрабатывает ввод некорректных чисел, но не проверяет ввод дубликатов.
-   **Упрощение проверок комбинаций:** Проверку на Флеш можно сделать более гибкой, учитывая, что туз может быть и 1 и 14 (для стрита 10, J, Q, K, A).
-   **Выигрыши:** Выигрыши можно сделать параметризированными, чтобы их можно было легко изменять.
-   **Масти карт:** В текущей реализации масти карт не учитываются, можно было бы добавить поддержку мастей для более реалистичной игры.
-   **Рефакторинг:** Можно вынести проверки комбинаций в отдельные функции для улучшения читаемости кода.

**Взаимосвязь с другими частями проекта:**

-   Этот код является самостоятельным и не зависит от других частей проекта, за исключением стандартной библиотеки `random`.