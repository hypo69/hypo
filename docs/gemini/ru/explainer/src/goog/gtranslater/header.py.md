## <алгоритм>

1.  **`set_project_root(marker_files)`**:
    *   **Вход**: Принимает кортеж `marker_files` (по умолчанию `('__root__')`) содержащий имена файлов или директорий, которые используются для определения корня проекта.
    *   **Инициализация**:
        *   Получает абсолютный путь к директории, в которой находится текущий файл (`__file__`).
        *   Устанавливает начальное значение переменной `__root__` как текущая директория.
    *   **Поиск корня проекта**:
        *   Проходит по текущей директории и ее родительским директориям, перебирая их.
        *   Для каждой директории проверяет, существует ли какой-либо из `marker_files` в этой директории.
            *   **Пример**: Если `marker_files` содержит `'__root__'` и файл `'__root__'` существует в одной из родительских директорий, то текущая директория является корнем проекта.
        *   Если маркерный файл найден, то `__root__` обновляется, и поиск прекращается.
        *   **Пример**:  Если `marker_files` = `('config.ini', 'setup.py')`, и файл `setup.py` найден в родительской директории, то эта директория станет корнем проекта.
    *   **Обновление `sys.path`**:
        *   Если корень проекта не находится в `sys.path`, то он добавляется в начало списка.
        *   Это позволяет импортировать модули из корня проекта.
    *   **Выход**: Возвращает путь к корню проекта (`__root__`).

2.  **Инициализация `__root__`**:
    *   Вызывает `set_project_root()` для определения корня проекта и присваивает его переменной `__root__`.

3.  **Загрузка настроек из `settings.json`**:
    *   **Попытка открытия файла**: Пробует открыть файл `settings.json`, путь к которому формируется из корня проекта (`gs.path.root`) и поддиректории `src`.
    *   **Успешная загрузка**: Если файл открыт, то считывает содержимое из `settings.json`, парсит JSON и присваивает его переменной `settings`.
    *   **Обработка ошибок**: Если файл не найден или JSON не может быть декодирован, `settings` остаётся `None`.

4.  **Загрузка документации из `README.MD`**:
     *  **Попытка открытия файла**: Пробует открыть файл `README.MD`, путь к которому формируется из корня проекта (`gs.path.root`) и поддиректории `src`.
    *   **Успешная загрузка**: Если файл открыт, то считывает содержимое и присваивает его переменной `doc_str`.
    *   **Обработка ошибок**: Если файл не найден или возникли другие ошибки, `doc_str` остаётся `None`.

5.  **Инициализация глобальных переменных**:
    *   Инициализирует глобальные переменные:
        *   `__project_name__`: Получает название проекта из `settings` или устанавливает значение по умолчанию `'hypotez'`.
        *   `__version__`: Получает версию проекта из `settings` или устанавливает значение по умолчанию `''`.
        *   `__doc__`: Присваивает значение `doc_str`, если оно есть, иначе `''`.
        *   `__details__`: Устанавливает значение по умолчанию `''`.
        *   `__author__`: Получает автора проекта из `settings` или устанавливает значение по умолчанию `''`.
        *   `__copyright__`: Получает информацию об авторском праве из `settings` или устанавливает значение по умолчанию `''`.
        *   `__cofee__`: Получает сообщение для доната или устанавливает значение по умолчанию `'Treat the developer to a cup of coffee for boosting enthusiasm in development: https://boosty.to/hypo69'`.

## <mermaid>

```mermaid
flowchart TD
    Start[Start] --> SetProjectRoot[<code>set_project_root()</code><br>Find Project Root Directory]
    SetProjectRoot --> InitRoot[Initialize <code>__root__</code>: <code>Path</code>]
    InitRoot --> LoadSettings[Load settings: <br><code>settings.json</code>]
    LoadSettings --> LoadDocStr[Load doc_str: <br><code>README.MD</code>]
    LoadDocStr --> InitGlobalVars[Initialize Global Variables: <br><code>__project_name__</code>, <code>__version__</code>, etc.]
    InitGlobalVars --> End[End]

    
    subgraph "set_project_root()"
    SetProjectRoot --> InitCurrentPath[Init: <code>current_path</code> = Path(<code>__file__</code>).parent]
    InitCurrentPath --> InitRootPath[Init: <code>__root__</code> = <code>current_path</code>]
    InitRootPath --> LoopParents[Loop Through Parents]
    LoopParents --> CheckMarkerFile{Check: <code>any(marker.exists())</code>}
    CheckMarkerFile -- Yes --> UpdateRoot[<code>__root__</code> = <code>parent</code>]
    UpdateRoot --> BreakLoop[Break]
    CheckMarkerFile -- No --> LoopParents
    BreakLoop --> CheckSysPath{Check: <code>__root__</code> in <code>sys.path</code>?}
    CheckSysPath -- No --> AddToSysPath[<code>sys.path.insert(0, str(__root__))</code>]
    AddToSysPath --> ReturnRoot[return <code>__root__</code>]
    CheckSysPath -- Yes --> ReturnRoot
    end

    subgraph "Import dependencies"
        ImportStart[Start] --> ImportSys[Import <code>sys</code>]
        ImportSys --> ImportJSON[Import <code>json</code>]
        ImportJSON --> ImportVersion[Import <code>packaging.version</code>: <code>Version</code>]
         ImportVersion --> ImportPath[Import <code>pathlib</code>: <code>Path</code>]
         ImportPath --> ImportGS[Import Global Settings: <br><code>from src import gs</code>]
        ImportGS --> ImportEnd[End]
     end
```

### Описание `mermaid` диаграммы:

*   **Главный поток (`flowchart TD`)**: Описывает последовательность выполнения скрипта сверху вниз, включая вызов функции `set_project_root()`, загрузку настроек и документации, а также инициализацию глобальных переменных.
    *   `Start` и `End`: Начало и конец скрипта.
    *   `SetProjectRoot`: Вызов функции `set_project_root()` для определения корня проекта.
    *    `InitRoot`: Инициализирует переменную `__root__` значением типа `Path`.
    *   `LoadSettings`: Загрузка настроек из файла `settings.json`.
    *    `LoadDocStr`: Загрузка документации из файла `README.MD`.
    *   `InitGlobalVars`: Инициализация глобальных переменных, таких как `__project_name__`, `__version__`, и т.д.

*   **Подграф `set_project_root()`**: Детальное описание логики функции `set_project_root()`.
    *   `InitCurrentPath`: Инициализирует переменную `current_path` абсолютным путем к директории текущего файла.
    *   `InitRootPath`: Инициализирует переменную `__root__` начальным значением `current_path`.
    *   `LoopParents`: Цикл перебора родительских директорий.
    *   `CheckMarkerFile`: Проверка существования файла-маркера в текущей родительской директории.
    *   `UpdateRoot`: Обновляет значение `__root__` на найденную родительскую директорию.
    *   `BreakLoop`: Прерывает цикл после нахождения корня.
    *   `CheckSysPath`: Проверяет, добавлен ли путь корня проекта в `sys.path`.
    *   `AddToSysPath`: Добавляет путь корня проекта в `sys.path`, если его там нет.
    *    `ReturnRoot`: Возвращает найденный путь корня проекта.

*   **Подграф "Import dependencies"**: Описывает импорт модулей.
    *   `ImportSys`: Импорт модуля `sys`.
    *   `ImportJSON`: Импорт модуля `json`.
    *   `ImportVersion`: Импорт класса `Version` из модуля `packaging.version`.
    *    `ImportPath`: Импорт класса `Path` из модуля `pathlib`.
    *    `ImportGS`: Импорт глобальных настроек из модуля `src.gs`.

**Зависимости**:
* `sys`:  Предоставляет доступ к системным переменным и функциям, используется для работы с путями `sys.path`.
* `json`:  Используется для парсинга JSON из файла `settings.json`.
* `packaging.version`: Используется для работы с версиями.
* `pathlib`: Используется для работы с файловыми путями, представленными объектами `Path`.
* `src.gs`:  Предположительно содержит глобальные настройки проекта и путь к корню проекта.

## <объяснение>

### Импорты:
   *  `sys`: Модуль `sys` используется для работы с системными переменными и функциями, в частности `sys.path`, который необходим для добавления пути к корню проекта.
   * `json`: Модуль `json` используется для загрузки данных из JSON-файла `settings.json`.
   *  `packaging.version`: `Version` используется для работы с версиями.
   *  `pathlib`: Модуль `pathlib` используется для представления файловых путей как объектов, что упрощает операции с путями.
   * `from src import gs`: Импортирует пользовательский модуль `gs` (глобальные настройки), который предположительно содержит пути к файлам и другие общие настройки проекта. Импорт из `src` подразумевает наличие пакета `src` в проекте. Зависит от структуры вашего проекта.

### Функции:
  * `set_project_root(marker_files: tuple = ('__root__')) -> Path`:
        * **Аргументы**:
          - `marker_files` (tuple, по умолчанию ('\_\_root\_\_')): Кортеж имен файлов или папок, по которым определяется корень проекта.
        * **Возвращаемое значение**: `Path`:  объект `pathlib.Path`, указывающий на корневую директорию проекта.
        * **Назначение**:  Функция находит корневую директорию проекта, начиная от директории текущего файла. Она проходит вверх по родительским директориям, пока не найдет одну из указанных папок или файлов (`marker_files`).
        * **Пример**:
          ```python
          project_root = set_project_root(marker_files=('__root__', 'setup.py'))
          print(project_root) # Выведет путь до корня проекта, если найдет __root__ или setup.py
          ```
### Переменные:
  *   `__root__`: (Path): Глобальная переменная, хранящая путь к корневой директории проекта.
  *   `settings`: (dict): Словарь, полученный из файла `settings.json`. Если файл не найден или JSON невалидный, то принимает значение `None`.
  *   `doc_str`: (str): Строка, содержащая контент из файла `README.MD`. Если файл не найден или возникают ошибки, принимает значение `None`.
  *   `__project_name__` (str): Имя проекта, взятое из `settings.json` или значение по умолчанию `'hypotez'`.
  *   `__version__` (str): Версия проекта, взятая из `settings.json` или значение по умолчанию `''`.
  *   `__doc__` (str): Документация проекта, взятая из `README.MD` или значение по умолчанию `''`.
  *   `__details__` (str): Дополнительная информация о проекте, значение по умолчанию `''`.
  *   `__author__` (str): Автор проекта, взятый из `settings.json` или значение по умолчанию `''`.
  *   `__copyright__` (str): Информация об авторских правах, взятая из `settings.json` или значение по умолчанию `''`.
  *   `__cofee__` (str): Сообщение о поддержке разработчика, взятое из `settings.json` или значение по умолчанию `Treat the developer to a cup of coffee for boosting enthusiasm in development: https://boosty.to/hypo69`.

### Взаимосвязи с другими частями проекта:
*   `gs`: Данный скрипт импортирует `gs` (global settings) из `src`, что подразумевает наличие пакета `src` в проекте, в котором находится модуль `gs`.
*   Файлы `settings.json` и `README.MD`: Этот скрипт напрямую зависит от наличия `settings.json` и `README.MD`, так как загружает из них данные. Эти файлы определяют настройки и документацию проекта.

### Потенциальные ошибки и области для улучшения:
*   **Обработка ошибок**: Обработка ошибок при чтении `settings.json` и `README.MD` ограничена `pass`. Возможно, стоит добавить логгирование или более информативные сообщения об ошибках.
*   **Управление путями**: Использование `gs.path.root` предполагает, что объект `gs` имеет атрибут `path`, который в свою очередь содержит `root`. Стоит убедиться, что эти атрибуты правильно настроены.
*   **Отсутствие проверок типов**: Не помешает добавить проверки типов при извлечении данных из `settings` для предотвращения ошибок.
*   **Инициализация глобальных переменных**: Инициализация множества глобальных переменных можно было бы вынести в отдельную функцию, чтобы повысить читаемость и тестируемость кода.

### Дополнительно:
*    `set_project_root`: Функция добавляет путь к корню проекта в `sys.path`, что позволяет импортировать модули из этого пути, даже если текущая директория не является корнем проекта. Это важно для структурированных проектов.
*  **Принцип DRY** (Don't Repeat Yourself): Код обработки файлов `settings.json` и `README.MD` имеет некоторую повторяемость (try-except block, загрузка контента),  можно было бы вынести это в отдельную функцию.

В целом, данный скрипт обеспечивает базовую конфигурацию проекта, устанавливая путь к корню, загружая настройки и документацию.