# Инструкция по написанию кода

## Обзор

Данная документация описывает правила и рекомендации для написания кода Python, направленные на повышение читаемости, согласованности и качества.

## Требования

### 1. Общие принципы

- Следовать единообразному стилю кодирования.
- Все изменения и рекомендации должны соответствовать этому формату.

### 2. Комментарии

- Комментарии `#` должны оставаться неизменными и понятными.
- Внутренние комментарии должны быть информативными и объяснять последующий код.
- Использовать формат reStructuredText (RST) для комментариев и документации.
- В комментариях избегать слов "получить", "сделать". Примеры: "проверка", "отправка", "код исполняет".
- Предпочитать пассивные формы: "копирование", "форматирование", "создание".
- Не документировать пустые строки или `...`.

### 3. Документация

- Функции, методы и классы должны иметь docstring в стиле Sphinx.
- Пример:

```python
def function(param: str, param1: Optional[str | dict] = None) -> dict | None:
    """
    Описание функции.

    :param param: Описание параметра `param`.
    :type param: str
    :param param1: (Optional) Описание параметра `param1`.
    :type param1: Optional[str | dict]
    :return: Описание возвращаемого значения.
    :rtype: dict | None
    :raises SomeError: Условия возникновения исключения.
    """
    ...
```

- В начале каждого файла - описание модуля:

```python
"""
Модуль для работы ассистента программиста
=========================================================================================

Описание функционала модуля.

Пример использования
--------------------

.. code-block:: python

    пример_использования()
"""
```


### 4. Форматирование кода

- Использовать одинарные кавычки.
- Пробелы вокруг оператора присваивания (`=`).
- Пробелы последовательно во всех выражениях.
- Строка `import header` в начале файла.
- Между `logger` и `return` добавлять `...` для отладки.

```python
logger.error('Ошибка при выполнении задачи', ex)
...
return
```

### 5. Параметры функций

- Явно типизированные параметры.
- `Optional` для параметров по умолчанию `None`.
- Избегать `Union`.

### 6. Pydantic

- Использовать Pydantic для валидации данных, если это возможно.
- Предпочитать Pydantic-модели для классов, обрабатывающих структурированные данные.

### 7. Логирование

- `from src.logger.logger import logger` вместо стандартного `logging`.
- Пример:

```python
logger.error('Ошибка при запуске бота: ', ex)
...
return
```

### 8. Константы

- Глобальная константа `MODE` в коде, даже если она не используется.


##  Пример использования

### Описание функции

Функция `add_numbers` складывает два числа.

### Функция `add_numbers`

```python
def add_numbers(a: int, b: int) -> int:
    """
    Функция складывает два числа.

    :param a: Первое число.
    :type a: int
    :param b: Второе число.
    :type b: int
    :returns: Сумма чисел `a` и `b`.
    :rtype: int
    """
    return a + b
```
```