# Документация для модуля `test_async.py`

## Обзор

Модуль `test_async.py` предназначен для асинхронного тестирования различных провайдеров G4F (GPT4Free). Он выполняет запросы к провайдерам и логирует время выполнения, а также обрабатывает возможные исключения.

## Подробней

Этот модуль используется для проверки работоспособности и производительности различных провайдеров GPT4Free в асинхронном режиме. Он позволяет параллельно отправлять запросы к нескольким провайдерам и собирать информацию о времени отклика и возникающих ошибках. Расположение файла в структуре проекта указывает на то, что он предназначен для тестирования асинхронной функциональности.

## Функции

### `create_async`

```python
async def create_async(provider):
    """Асинхронно отправляет запрос к провайдеру и логирует результат.

    Args:
        provider: Провайдер для отправки запроса.

    Returns:
        None

    Raises:
        Exception: Если при выполнении запроса возникает исключение.
    """
```

**Как работает функция**:

1.  Функция принимает объект `provider` в качестве аргумента.
2.  Использует `log_time_async` для измерения времени выполнения `provider.create_async`.
3.  Отправляет асинхронный запрос к провайдеру с сообщением `"Hello, are you GPT 3.5?"`.
4.  Выводит имя провайдера и полученный ответ.
5.  При возникновении исключения выводит имя провайдера и информацию об исключении.

**Примеры**:

```python
# Пример вызова функции create_async с фиктивным провайдером
class MockProvider:
    __name__ = "MockProvider"
    async def create_async(self, model, messages):
        return "Mock response"

async def main():
    provider = MockProvider()
    await create_async(provider)

asyncio.run(main())
```

### `run_async`

```python
async def run_async():
    """Асинхронно запускает запросы ко всем доступным и работающим провайдерам.

    Returns:
        None
    """
```

**Как работает функция**:

1.  Получает список провайдеров с помощью `get_providers()`.
2.  Фильтрует провайдеров, оставляя только работающие (`provider.working`).
3.  Создает список асинхронных задач `create_async` для каждого провайдера.
4.  Использует `asyncio.gather` для параллельного выполнения всех задач.

**Примеры**:

```python
# Пример вызова функции run_async
async def main():
    await run_async()

asyncio.run(main())