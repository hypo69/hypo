# Модуль для отладки g4f

## Обзор

Модуль `debug.py` предназначен для отладки и логирования в проекте `g4f`. Он предоставляет функции для логирования сообщений, ошибок и управления параметрами отладки, такими как включение/выключение логирования и проверка версии.

## Содержание

- [Переменные](#переменные)
- [Функции](#функции)
    - [log](#log)
    - [error](#error)

## Переменные

### `logging`

**Описание**: Флаг, определяющий, включено ли логирование.

### `version_check`

**Описание**: Флаг, определяющий, нужно ли проверять версию.

### `version`

**Описание**: Строка, содержащая информацию о версии.

### `log_handler`

**Описание**: Функция, обрабатывающая логи. По умолчанию `print`.

### `logs`

**Описание**: Список для хранения логов.

## Функции

### `log`

```python
def log(*text: Any, file: Optional[Any] = None) -> None:
    """
    Log a message if logging is enabled.

    Args:
        *text (Any): Переменное количество аргументов для логирования.
        file (Optional[Any], optional): Файл, в который будет производиться запись лога. По умолчанию `None`.

    Returns:
        None

    """
```

**Назначение**: Логирует сообщение, если включено логирование.

**Параметры**:
- `*text` (Any): Переменное количество аргументов, которые нужно залогировать.
- `file` (Optional[Any], optional): Файл, в который нужно записать лог. По умолчанию `None`.

**Как работает функция**:
1. Проверяет, включено ли логирование (переменная `logging`).
2. Если логирование включено, вызывает функцию `log_handler` с переданными аргументами `text` и `file`.

**Примеры**:
```python
from src.endpoints.gpt4free.g4f.debug import log, logging, log_handler

logging = True  # Включаем логирование
log('Сообщение для логирования')

def custom_log_handler(*text: Any, file: Optional[Any] = None) -> None:
    """
    Custom log handler

    Args:
        *text (Any): Text
        file (Optional[Any], optional): File. Defaults to None.
    """
    print(f"Custom Log: {' '.join(map(str, text))}")

log_handler = custom_log_handler # Меняем функцию обработки логов
log('Сообщение с использованием пользовательского обработчика')
logging = False # Выключаем логирование, теперь логи не будут выводиться
log('Это сообщение не будет выведено')
```

### `error`

```python
def error(*error: Any, name: Optional[str] = None) -> None:
    """
    Log an error message to stderr.
    Args:
        *error (Any): Переменное количество аргументов ошибки для логирования.
        name (Optional[str], optional): Имя ошибки. По умолчанию `None`.

    Returns:
        None

    """
```

**Назначение**: Логирует сообщение об ошибке в stderr.

**Параметры**:
- `*error` (Any): Переменное количество аргументов, представляющих сообщение об ошибке.
- `name` (Optional[str], optional): Имя ошибки. Используется для форматирования сообщения об ошибке, если передан объект ошибки без строкового представления. По умолчанию `None`.

**Как работает функция**:
1. Преобразует каждый элемент `error` в строку. Если элемент не является строкой, форматирует его как `"{type(e).__name__ if name is None else name}: {e}"`.
2. Вызывает функцию `log` с преобразованным сообщением об ошибке и `file=sys.stderr`, чтобы направить вывод в стандартный поток ошибок.

**Примеры**:
```python
import sys
from src.endpoints.gpt4free.g4f.debug import error

error('Произошла ошибка', 'Не удалось выполнить операцию')

try:
    raise ValueError('Неверное значение')
except ValueError as ex:
    error(ex)

error('Ошибка сети', name='NetworkError')