# Модуль `hypotez/src/product/product_fields/product_fields_translator.py`

## Обзор

Этот модуль отвечает за перевод полей товара на языки клиентской базы данных. Он получает данные о полях товара со страницы поставщика (вероятно, PrestaShop), обрабатывает их, используя схему языков клиента, и возвращает переведенный словарь полей. Модуль обрабатывает ситуации, когда перевод не найден в базе данных и добавляет новые записи.

## Функции

### `rearrange_language_keys`

**Описание**: Функция обновляет идентификатор языка в словаре `presta_fields_dict` на соответствующий идентификатор из схемы клиентских языков, если язык страницы совпадает.

**Параметры**:

- `presta_fields_dict` (dict): Словарь полей товара.
- `page_lang` (str): Язык страницы.
- `client_langs_schema` (list | dict): Схема языков клиента.

**Возвращает**:

- dict: Обновленный словарь `presta_fields_dict`.

### `translate_presta_fields_dict`

**Описание**: Функция переводит мультиязычные поля товара в соответствии со схемой языков клиента. Получает словарь полей товара, схему языков и язык страницы.  Ищет соответствия переводов в базе данных и обновляет словарь, добавляя новые переводы, если их нет.

**Параметры**:

- `presta_fields_dict` (dict): Словарь полей товара, полученный со страницы поставщика. Ожидается, что поля с переводом будут иметь структуру вида `{'language': [{'attrs': {'id': '1'}, 'value': 'value'}]}`.
- `client_langs_schema` (list | dict): Схема языков клиента.
- `page_lang` (str, optional): Язык страницы поставщика (например, 'en-US', 'ru-RU'). Если не задан, функция пытается определить его.

**Возвращает**:

- dict: Переведенный словарь полей товара.

**Обрабатываемые исключения**:

- `Exception`: Возникает при ошибках во время обработки перевода.  Подробная информация об ошибке логируется в `logger`.



## Модульные переменные

### `MODE`

**Описание**: Переменная, содержащая режим работы модуля. В данном случае `'dev'`.

## Зависимости

- `pathlib`
- `typing`
- `gs` (из модуля `src`)
- `pprint` (из модуля `src.utils.printer`)
- `logger` (из модуля `src.logger.logger`)
- `ProductFieldException` (из модуля `src.logger.exceptions`)
- `get_translations_from_presta_translations_table` (из модуля `src.translator`)
- `insert_new_translation_to_presta_translations_table` (из модуля `src.translator`)
- `record` (вероятно, из другого модуля, скорее всего для записи данных)


**Примечание:**  В коде присутствуют закомментированные строки импорта, которые указывают на необходимость других модулей.  Для полной функциональности требуется импорт и реализация этих модулей.