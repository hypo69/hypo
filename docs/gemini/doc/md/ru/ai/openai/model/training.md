```markdown
# Модуль `hypotez/src/ai/openai/model/training.py`

## Обзор

Данный модуль предоставляет класс `OpenAIModel` для взаимодействия с API OpenAI, управления моделями и проведением обучения.  Модуль включает в себя методы для отправки запросов, получения ответов, анализа тональности, динамического обучения и полноценного обучения модели на пользовательских данных.

## Оглавление

* [Модуль `OpenAIModel`](#openai-model)
* [Функция `main`](#функция-main)


## Класс `OpenAIModel`

### Описание

Класс `OpenAIModel` представляет собой интерфейс для взаимодействия с OpenAI API. Он позволяет отправлять запросы к модели, получать ответы, анализировать тональность сообщений, а также проводить динамическое и полноценное обучение модели.

### Атрибуты

* `model`: (str): Идентификатор модели OpenAI. По умолчанию `gpt-4o-mini`.
* `client`: (OpenAI): Объект клиента для взаимодействия с OpenAI API.
* `current_job_id`: (str): ID текущей задачи обучения.
* `assistant_id`: (str): Идентификатор помощника OpenAI.
* `assistant`: (Optional[SimpleNamespace]): Объект помощника OpenAI.
* `thread`: (Optional[str]): ID потока диалога OpenAI.
* `system_instruction`: (str): Системная инструкция для модели.
* `dialogue_log_path`: (str | Path): Путь к файлу для сохранения диалога.
* `dialogue`: (List[Dict[str, str]]): Список сообщений диалога.
* `assistants`: (List[SimpleNamespace]): Список доступных помощников.
* `models_list`: (List[str]): Список доступных моделей OpenAI.

### Методы

#### `__init__`

**Описание**: Инициализирует объект `OpenAIModel`. Загружает помощника, создаёт поток диалога и задаёт системную инструкцию.

**Параметры**:
* `system_instruction` (str, optional): Системная инструкция для модели.
* `model_name` (str, optional): Идентификатор модели.
* `assistant_id` (str, optional): Идентификатор помощника.

#### `list_models`

**Описание**: Возвращает список доступных моделей OpenAI.

**Возвращает**:
* `List[str]`: Список идентификаторов моделей.

**Обрабатывает исключения**:
* `Exception`: Возникает при ошибке получения списка моделей.

#### `list_assistants`

**Описание**: Возвращает список доступных помощников OpenAI.

**Возвращает**:
* `List[str]`: Список имён помощников.

**Обрабатывает исключения**:
* `Exception`: Возникает при ошибке получения списка помощников.

#### `set_assistant`

**Описание**: Устанавливает помощника OpenAI по его ID.

**Параметры**:
* `assistant_id` (str): Идентификатор помощника.


#### `_save_dialogue`

**Описание**: Сохраняет диалог в файл.


#### `determine_sentiment`

**Описание**: Определяет тональность сообщения (положительная, отрицательная или нейтральная).

**Параметры**:
* `message` (str): Сообщение для анализа.

**Возвращает**:
* `str`: Тональность сообщения ('positive', 'negative', или 'neutral').

#### `ask`

**Описание**: Отправляет сообщение модели и возвращает ответ, а также анализ тональности.

**Параметры**:
* `message` (str): Сообщение для модели.
* `system_instruction` (str, optional): Дополнительная системная инструкция.
* `attempts` (int, optional): Количество попыток повтора.

**Возвращает**:
* `str`: Ответ модели.


#### `describe_image`

**Описание**: Описывает изображение на основе предоставленного пути к файлу.

**Параметры**:
* `image_path` (str | Path): Путь к файлу изображения.
* `prompt` (Optional[str], optional): Дополнительный запрос.
* `system_instruction` (Optional[str], optional): Дополнительная системная инструкция.

**Возвращает**:
* `str`: Описание изображения.

#### `describe_image_by_requests`

**Описание**: Описывает изображение на основе предоставленного пути к файлу. Использует requests для отправки запроса.


#### `dynamic_train`

**Описание**: Динамически загружает предыдущий диалог и подстраивает модель на основе него.


#### `train`

**Описание**: Обучает модель на предоставленных данных.

**Параметры**:
* `data` (str, optional): Путь к CSV файлу или строка в формате CSV с данными.
* `data_dir` (Path | str, optional): Директория, содержащая CSV файлы для обучения.
* `data_file` (Path | str, optional): Путь к одному CSV файлу с данными для обучения.
* `positive` (bool, optional): Признак, что данные положительные.

**Возвращает**:
* `str | None`: ID задачи обучения или `None` при ошибке.

#### `save_job_id`

**Описание**: Сохраняет ID задачи обучения вместе с описанием в файл.

**Параметры**:
* `job_id` (str): ID задачи.
* `description` (str): Описание задачи.
* `filename` (str, optional): Имя файла.


## Функция `main`

**Описание**: Главная функция для инициализации `OpenAIModel` и демонстрации его использования.


**В этом модуле реализованы функции для отправки запросов к API OpenAI, работы с моделями, хранения данных, динамического обучения и полноценного обучения моделей.**
```
