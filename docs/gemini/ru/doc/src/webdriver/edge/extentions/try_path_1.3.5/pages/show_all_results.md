# Модуль show_all_results.js

## Обзор

Этот файл JavaScript содержит функцию `showAllResults`, которая отображает результаты поиска в формате таблицы на странице. Функция обрабатывает данные, полученные от расширения, и обновляет различные элементы HTML, включая заголовки, URL, контекстную информацию и результаты поиска.  Также функция предоставляет возможность экспорта информации в текстовом формате.

## Функции

### `showAllResults`

**Описание**: Функция отображает результаты поиска.

**Параметры**:
- `results` (object): Объект, содержащий результаты поиска. Должен содержать информацию о запросе, контексте и деталях результата.


**Возвращает**:
-  Не имеет возвращаемого значения (void).


**Вызывает исключения**:
- `fu.onError`: Функция `fu.onError` обрабатывает возможные ошибки, возникающие при взаимодействии с DOM или при обработке данных.

### `makeTextDownloadUrl`

**Описание**: Создает URL для скачивания текстового файла.

**Параметры**:
- `text` (string): Текст, который будет сохранен в файле.


**Возвращает**:
- `string`: URL для скачивания текстового файла.


**Вызывает исключения**:
- Нет.


### `makeInfoText`

**Описание**:  Создает текстовую строку с информацией о результатах поиска в формате, подходящем для экспорта.

**Параметры**:
- `results` (object): Объект, содержащий информацию о результатах поиска.


**Возвращает**:
- `string`: Текстовая строка с информацией о результатах поиска.


**Вызывает исключения**:
- Нет.

### `makeConvertedInfoText`

**Описание**:  Создает текстовую строку с информацией о результатах поиска в формате, подходящем для экспорта, с преобразованием значений в JSON.

**Параметры**:
- `results` (object): Объект, содержащий информацию о результатах поиска.


**Возвращает**:
- `string`: Текстовая строка с информацией о результатах поиска.


**Вызывает исключения**:
- Нет.

## Обработка событий

### Обработчик события `load`

**Описание**:  Вызывается при загрузке страницы. Обрабатывает получение результатов поиска от расширения браузера, обновляет страницу с информацией о результатах, устанавливает ссылки для скачивания текстовых файлов, и обрабатывает клики на кнопках для фокусировки элементов.

**Параметры**:
-  Нет.


**Возвращает**:
- Нет.


**Вызывает исключения**:
- `fu.onError`: Функция `fu.onError` обрабатывает возможные ошибки при получении данных от расширения браузера.

### Обработчик события клика на кнопках в секции `context-detail`

**Описание**: Обрабатывает клики на кнопках внутри таблицы с контекстной информацией. Отправляет сообщение в браузерное расширение для фокусировки выбранного элемента контекста.

**Параметры**:
- `event` (object): Объект события клика.


**Возвращает**:
- Нет.


**Вызывает исключения**:
- Нет.

### Обработчик события клика на кнопках в секции `main-details`

**Описание**: Обрабатывает клики на кнопках внутри таблицы с основной информацией. Отправляет сообщение в браузерное расширение для фокусировки выбранного элемента основного результата.

**Параметры**:
- `event` (object): Объект события клика.


**Возвращает**:
- Нет.


**Вызывает исключения**:
- Нет.

## Структура данных

Функции предполагают определённую структуру данных `results`, `cont`, `main`.  Необходимо прояснить ожидаемый формат `itemDetail` и `itemDetails`. Документация должна содержать пример структуры данных для корректной работы.


##  Взаимодействие с расширением

Модуль взаимодействует с расширением браузера через API.  Необходимо добавить описание API, используемого для коммуникации между страницей и расширением, включая необходимые типы данных и структуры сообщений.

```