# Анализ кода модуля calndr

**Качество кода**
-  Соответствие требованиям к формату кода от 1 до 10:
    -   Преимущества:
        - Код написан на языке Python и предназначен для вывода календаря на месяц.
        -   Присутствует подробное описание модуля и алгоритма работы программы в формате docstring.
        -   Имеется блок-схема алгоритма в формате mermaid.
        -   Код хорошо структурирован и понятен, логика работы программы достаточно проста.
        -   Используются циклы `while` и `for` для ввода данных и вывода календаря.
        -   Присутствуют проверки корректности ввода данных.
    -   Недостатки:
        -   Отсутствуют импорты необходимых модулей (хотя в данном случае их нет).
        -   Используется стандартный ввод `input`, что не соответствует требованиям использовать `j_loads` или `j_loads_ns`.
        -   Нет обработки исключений с использованием `logger.error`.
        -   Отсутствует форматирование кода согласно PEP 8.
        -   Нет разделения кода на функции или классы.
        -   Комментарии `""" ... """` не в формате reStructuredText (RST).
        -   Не используются docstring для функций и классов (так как их нет).
        -   Не используются константы для магических чисел.

**Рекомендации по улучшению**
1. **Импорт модулей:**
   - Добавить необходимые импорты, хотя в данном случае они не требуются.
2.  **Формат документации:**
    -   Перевести все комментарии в формат reStructuredText (RST).
    -   Добавить docstring для модуля.
    -   Добавить docstring для всех функций и классов (если они будут добавлены).
3.  **Обработка данных:**
    -   Заменить стандартный ввод `input` на использование `j_loads` или `j_loads_ns` (хотя в данном случае это не требуется, можно оставить как есть).
4.  **Разбиение на функции:**
    -   Разбить код на функции для лучшей читаемости и переиспользования.
5.  **Логирование ошибок:**
    -   Использовать `logger.error` для обработки ошибок вместо `print`.
6.  **Форматирование кода:**
    -   Соблюдать стандарты PEP 8 для форматирования кода.
7.  **Использование констант:**
    -   Использовать константы для магических чисел (например, 7 для количества дней в неделе, 28 и 31 для количества дней в месяце).

**Улучшенный код**
```python
"""
Модуль CALNDR:
=================

Модуль выводит календарь на месяц, основываясь на номере дня недели, с которого начинается месяц, и количестве дней в месяце.
Пользователь вводит эти два параметра, а программа строит календарь.

:Автор: hypo69 (hypo69@davidka.net)
:Сложность: 4

Правила игры:
    1. Пользователь вводит номер дня недели, с которого начинается месяц (от 1 до 7, где 1 - воскресенье, 7 - суббота).
    2. Пользователь вводит общее количество дней в месяце (от 28 до 31).
    3. Программа выводит на экран календарь в виде таблицы, где дни месяца распределены по неделям.

Алгоритм:
    1. Запросить у пользователя ввод номера дня недели, с которого начинается месяц (1-7).
    2. Запросить у пользователя ввод общего количества дней в месяце (28-31).
    3. Вывести строку с названиями дней недели: "SUN MON TUE WED THU FRI SAT".
    4. Вычислить количество пробелов перед первым числом, основываясь на введенном номере дня недели.
    5. Вывести необходимое количество пробелов перед первым числом месяца.
    6. Начать цикл от 1 до количества дней в месяце:
        6.1 Вывести текущий день месяца.
        6.2 Если текущий день попадает на конец недели (субботу), вывести переход на новую строку.
        6.3 Если день не последний в месяце, добавить пробел после числа.
    7. Конец вывода календаря.

Блок-схема:
.. mermaid::

    flowchart TD
        Start["Начало"] --> InputStartDay["Ввод: <code><b>startDay</b></code> (день недели начала месяца)"]
        InputStartDay --> InputDaysInMonth["Ввод: <code><b>daysInMonth</b></code> (количество дней в месяце)"]
        InputDaysInMonth --> OutputWeekdays["Вывод: <b>SUN MON TUE WED THU FRI SAT</b>"]
        OutputWeekdays --> CalculateSpaces["<code><b>spaces = (startDay - 1) * 4</b></code> (вычисление количества пробелов)"]
        CalculateSpaces --> OutputSpaces["Вывод: <code><b>spaces</b></code> пробелов"]
        OutputSpaces --> LoopStart{"Начало цикла: <code><b>day = 1 to daysInMonth</b></code>"}
        LoopStart -- true --> OutputDay["Вывод: <code><b>day</b></code>"]
        OutputDay --> CheckEndOfLine{"Проверка: <code><b>(startDay + day - 2) mod 7 == 6</b></code> (конец недели?)"}
        CheckEndOfLine -- true --> OutputNewline["Вывод: Новая строка"]
        OutputNewline --> CheckLastDay{"Проверка: <code><b>day != daysInMonth</b></code> (последний день?)"}
        CheckEndOfLine -- false --> CheckLastDay
        CheckLastDay -- true --> OutputSpace["Вывод: Пробел"]
        OutputSpace --> LoopStart
        CheckLastDay -- false --> LoopStart
        LoopStart -- false --> End["Конец"]

Legenda:
    Start - Начало программы.
    InputStartDay - Ввод номера дня недели, с которого начинается месяц (startDay).
    InputDaysInMonth - Ввод общего количества дней в месяце (daysInMonth).
    OutputWeekdays - Вывод заголовка с днями недели.
    CalculateSpaces - Вычисление количества пробелов перед первым числом месяца.
    OutputSpaces - Вывод вычисленного количества пробелов.
    LoopStart - Начало цикла для вывода каждого дня месяца.
    OutputDay - Вывод текущего дня месяца.
    CheckEndOfLine - Проверка, является ли текущий день концом недели (субботой).
    OutputNewline - Вывод новой строки, если текущий день - суббота.
    CheckLastDay - Проверка, является ли текущий день последним днем месяца.
    OutputSpace - Вывод пробела после числа, если день не последний в месяце.
    End - Конец программы.
"""
from src.logger.logger import logger # Добавлен импорт logger

__author__ = 'hypo69 (hypo69@davidka.net)' # сохранение автора

DAYS_IN_WEEK = 7 # константа для дней в недели
MIN_DAYS_IN_MONTH = 28 # константа для минимального количества дней в месяце
MAX_DAYS_IN_MONTH = 31 # константа для максимального количества дней в месяце


def get_start_day() -> int:
    """
    Запрашивает у пользователя номер дня недели, с которого начинается месяц.

    :return: Номер дня недели (1 - воскресенье, 7 - суббота).
    :rtype: int
    """
    while True:
        try:
            start_day = int(input('Введите день недели, с которого начинается месяц (1-воскресенье, 7-суббота): ')) # Запрос ввода дня недели
            if 1 <= start_day <= DAYS_IN_WEEK: # проверка корректности ввода дня недели
                return start_day
            else:
                print('Пожалуйста, введите число от 1 до 7') # сообщение об ошибке
        except ValueError:
            print('Пожалуйста, введите целое число.') # сообщение об ошибке


def get_days_in_month() -> int:
    """
    Запрашивает у пользователя количество дней в месяце.

    :return: Количество дней в месяце (28-31).
    :rtype: int
    """
    while True:
        try:
            days_in_month = int(input('Введите количество дней в месяце (28-31): ')) # запрос ввода количества дней в месяце
            if MIN_DAYS_IN_MONTH <= days_in_month <= MAX_DAYS_IN_MONTH: # проверка корректности ввода количества дней в месяце
                return days_in_month
            else:
                print('Пожалуйста, введите число от 28 до 31') # сообщение об ошибке
        except ValueError:
             print('Пожалуйста, введите целое число.') # сообщение об ошибке


def print_calendar(start_day: int, days_in_month: int) -> None:
    """
    Выводит календарь на месяц.

    :param start_day: Номер дня недели, с которого начинается месяц.
    :type start_day: int
    :param days_in_month: Количество дней в месяце.
    :type days_in_month: int
    """
    print(' SUN MON TUE WED THU FRI SAT')  # Вывод заголовка с днями недели
    spaces = (start_day - 1) * 4  # Вычисление количества пробелов перед первым числом
    print(' ' * spaces, end='') # Вывод пробелов

    for day in range(1, days_in_month + 1):  # цикл перебирает все дни месяца
        print(f'{day:3}', end=' ') # Вывод текущего дня месяца
        if (start_day + day - 2) % DAYS_IN_WEEK == 6: # проверка является ли текущий день субботой
            print()  # если суббота, переходит на новую строку
        elif day != days_in_month: # если это не последний день добавляем пробел
            print(' ', end='')


def main() -> None:
    """
    Основная функция для запуска календаря.
    """
    try: # обработка возможных ошибок в основной функции
        start_day = get_start_day() # запрос дня недели начала месяца
        days_in_month = get_days_in_month()  # запрос количества дней в месяце
        print_calendar(start_day, days_in_month)  # вывод календаря
    except Exception as e: # обработка ошибки
       logger.error(f'Произошла ошибка: {e}', exc_info=True) # запись ошибки в лог


if __name__ == '__main__':
    main() # вызов основной функции