# Модуль `hypotez/src/category/category.py`

## Обзор

Модуль `src.category` предназначен для работы с категориями, в основном для платформы PrestaShop. Он предоставляет классы и функции для извлечения родительских категорий, а также для асинхронного и синхронного обхода категорий на сайте и построения иерархического словаря.

## Оглавление

* [Классы](#классы)
    * [`Category`](#category)
* [Функции](#функции)
    * [`compare_and_print_new_keys`](#compare_and_print_new_keys)


## Классы

### `Category`

**Описание**: Класс `Category` предназначен для работы с категориями товаров. Он наследуется от класса `PrestaCategory` и предоставляет методы для взаимодействия с API PrestaShop.

**Атрибуты**:

* `credentials`: Словарь, содержащий учетные данные API.

**Методы**:

#### `__init__`

**Описание**: Инициализирует объект `Category`.

**Параметры**:

* `api_credentials` (Dict): Учетные данные API.
* `*args`: Переменное количество позиционных аргументов.
* `**kwargs`: Переменное количество именованных аргументов.

**Возвращает**:
Не имеет возвращаемого значения.


#### `get_parents`

**Описание**: Получает родительские категории.

**Параметры**:

* `id_category` (int): Идентификатор категории.
* `dept` (int): Уровень вложенности категории.

**Возвращает**:
* Список родительских категорий.


#### `crawl_categories_async`

**Описание**: Асинхронно обходит категории и строит иерархический словарь.

**Параметры**:

* `url` (str): URL страницы.
* `depth` (int): Глубина рекурсии.
* `driver`: Экземпляр Selenium WebDriver.
* `locator` (str): XPath локатор для ссылок на категории.
* `dump_file` (Path): Путь к файлу для сохранения словаря.
* `id_category_default` (int): Идентификатор категории по умолчанию.
* `category` (dict, optional): Словарь, представляющий текущую категорию (по умолчанию `None`).

**Возвращает**:
* Иерархический словарь категорий и их URL.

**Обрабатывает исключения**:
* `Exception`: Возникает при возникновении ошибок во время обхода категорий.


#### `crawl_categories`

**Описание**: Рекурсивно обходит категории и строит иерархический словарь.

**Параметры**:

* `url` (str): URL страницы.
* `depth` (int): Глубина рекурсии.
* `driver`: Экземпляр Selenium WebDriver.
* `locator` (dict): XPath локатор для ссылок на категории.
* `dump_file` (Path): Путь к файлу для сохранения словаря.
* `id_category_default` (int): Идентификатор категории по умолчанию.
* `category` (dict, optional): Словарь, представляющий текущую категорию (по умолчанию пустой словарь).

**Возвращает**:
* Иерархический словарь категорий и их URL.

**Обрабатывает исключения**:
* `Exception`: Возникает при возникновении ошибок во время обхода категорий.

#### `_is_duplicate_url`

**Описание**: Проверяет, существует ли данный URL в словаре категорий.

**Параметры**:

* `category` (dict): Словарь категорий.
* `url` (str): URL для проверки.

**Возвращает**:
* `True`, если URL уже существует, `False` иначе.


## Функции

### `compare_and_print_new_keys`

**Описание**: Сравнивает текущий словарь с данными в файле и выводит отсутствующие ключи.

**Параметры**:

* `current_dict`: Текущий словарь для сравнения.
* `file_path`: Путь к файлу с данными для сравнения.

**Возвращает**:
Не имеет возвращаемого значения.

**Обрабатывает исключения**:
* `Exception`: Возникает при ошибках загрузки данных из файла.