# Модуль для отправки рекламных объявлений в Facebook

## Обзор

Модуль `src.endpoints.advertisement.facebook.start_sergey` предназначен для автоматизированной отправки рекламных объявлений в группы Facebook. Он поддерживает работу с различными языками и валютами, а также позволяет запускать рекламные кампании для разных рекламодателей, таких как "kazarinov" и "aliexpress".

## Подробнее

Модуль использует драйвер `webdriver` для взаимодействия с Facebook и выполняет следующие основные шаги:

1.  **Определение параметров кампании**: Загружаются списки групп и рекламных материалов для разных языков (русский и иврит) и категорий.
2.  **Запуск кампании**: Для каждого языка и валюты запускается рекламная кампания с использованием класса `FacebookPromoter`.
3.  **Циклическое выполнение**: Кампании выполняются циклически с заданными интервалами и случайными задержками.

## Функции

### `run_campaign`

```python
def run_campaign(d: Driver, promoter_name: str, campaigns: list | str, group_file_paths: list, language: str, currency: str):
    """Запуск рекламной кампании.

    Args:
        d (Driver): Экземпляр драйвера.
        promoter_name (str): Имя рекламодателя.
        campaigns (list): Список кампаний.
        group_file_paths (list): Пути к файлам с группами.
        language (str): Язык рекламной кампании.
        currency (str): Валюта рекламной кампании.
    """
    ...
```

**Назначение**: Запускает рекламную кампанию для указанного рекламодателя с заданными параметрами.

**Параметры**:

*   `d` (Driver): Экземпляр драйвера `webdriver` для управления браузером.
*   `promoter_name` (str): Имя рекламодателя (например, "kazarinov" или "aliexpress").
*   `campaigns` (list | str): Список кампаний для запуска.
*   `group_file_paths` (list): Список путей к файлам, содержащим информацию о группах Facebook, в которых будет размещаться реклама.
*   `language` (str): Язык рекламной кампании (например, "RU" или "HE").
*   `currency` (str): Валюта рекламной кампании (например, "ILS").

**Как работает функция**:

1.  Создает экземпляр класса `FacebookPromoter` с использованием переданного драйвера и имени рекламодателя.
2.  Вызывает метод `run_campaigns` экземпляра `FacebookPromoter` с передачей параметров кампании, включая список кампаний, пути к файлам с группами, язык и валюту.

**Примеры**:

```python
from src.webdriver.driver import Driver, Chrome
d = Driver(Chrome)
run_campaign(d, 'kazarinov', ['kazarinov_ru'], ['sergey_pages.json'], 'RU', 'ILS')
```

### `campaign_cycle`

```python
def campaign_cycle(d: Driver):
    """Цикл для управления запуском кампаний.

    Args:
        d (Driver): Экземпляр драйвера.
        aliexpress_adv (bool): Флаг для определения рекламодателя.
    """
    ...
```

**Назначение**: Управляет циклом запуска рекламных кампаний для разных языков и рекламодателей.

**Параметры**:

*   `d` (Driver): Экземпляр драйвера `webdriver` для управления браузером.

**Как работает функция**:

1.  Определяет пути к файлам групп и рекламных материалов для русского и иврит языков.
2.  Создает список пар "язык-валюта" для запуска кампаний (`language_currency_pairs`).
3.  Итерируется по списку пар "язык-валюта" и запускает кампании для каждого языка:
    *   Определяет, какие файлы групп использовать в зависимости от языка.
    *   Запускает кампании для рекламодателя "kazarinov".
    *   Получает список кампаний для рекламодателя "aliexpress" и запускает их.

**ASCII flowchart**:

```
A: Определение путей к файлам
|
B: Создание списка пар "язык-валюта"
|
C: Цикл по парам "язык-валюта"
|
D: Определение файлов групп
|
E: Запуск кампаний для "kazarinov"
|
F: Получение списка кампаний для "aliexpress"
|
G: Запуск кампаний для "aliexpress"
```

**Примеры**:

```python
from src.webdriver.driver import Driver, Chrome
d = Driver(Chrome)
campaign_cycle(d)
```

### `main`

```python
def main():
    """Основная функция для запуска рекламных кампаний."""
    ...
```

**Назначение**: Основная функция для запуска рекламных кампаний.

**Как работает функция**:

1.  Инициализирует драйвер `webdriver` (в данном случае, Chrome).
2.  Открывает Facebook в браузере.
3.  Запускает бесконечный цикл, в котором:
    *   Проверяет, не наступило ли время "тихого часа" (с использованием функции `interval`). Если наступило, засыпает на 1000 секунд.
    *   Запускает цикл кампаний (`campaign_cycle`).
    *   Логирует время и засыпает на случайное время от 30 до 360 секунд.
4.  Обрабатывает прерывание с клавиатуры (`KeyboardInterrupt`) и завершает работу.

**ASCII flowchart**:

```
A: Инициализация драйвера
|
B: Открытие Facebook
|
C: Бесконечный цикл
|
D: Проверка "тихого часа"
|
E: Запуск цикла кампаний
|
F: Логирование и задержка
```

**Примеры**:

```python
if __name__ == "__main__":
    main()
```