# Документация модуля Wewordle

## Обзор

Модуль `Wewordle` предоставляет асинхронный провайдер для взаимодействия с API `wewordle.org`. Он предназначен для генерации текста с использованием модели, аналогичной `gpt-3.5-turbo`. Модуль использует библиотеку `aiohttp` для выполнения асинхронных HTTP-запросов.

## Подробнее

Модуль предназначен для интеграции с другими частями проекта `hypotez`, где требуется использование API `wewordle.org` для генерации текста. Он предоставляет удобный интерфейс для отправки сообщений и получения ответов от API.

## Классы

### `Wewordle`

**Описание**: Класс `Wewordle` является асинхронным провайдером, который наследуется от `AsyncProvider`. Он предоставляет методы для взаимодействия с API `wewordle.org`.

**Наследует**: `AsyncProvider`

**Атрибуты**:
- `url` (str): URL-адрес API `wewordle.org`.
- `working` (bool): Флаг, указывающий, работает ли провайдер.
- `supports_gpt_35_turbo` (bool): Флаг, указывающий, поддерживает ли провайдер модель `gpt-3.5-turbo`.

## Функции

### `create_async`

```python
@classmethod
async def create_async(
    cls,
    model: str,
    messages: list[dict[str, str]],
    proxy: str = None,
    **kwargs
) -> str:
    """
    Асинхронно отправляет запрос к API wewordle.org и возвращает сгенерированный текст.

    Args:
        cls (Wewordle): Ссылка на класс.
        model (str): Название используемой модели.
        messages (list[dict[str, str]]): Список сообщений для отправки в API.
        proxy (str, optional): Адрес прокси-сервера. По умолчанию `None`.
        **kwargs: Дополнительные аргументы.

    Returns:
        str: Сгенерированный текст от API.

    Raises:
        aiohttp.ClientResponseError: Если HTTP-запрос завершается с ошибкой.
        Exception: Если возникает ошибка при обработке ответа от API.

    """
```

**Назначение**: Функция `create_async` отправляет асинхронный запрос к API `wewordle.org` и возвращает сгенерированный текст на основе предоставленных сообщений и модели.

**Параметры**:
- `cls` (Wewordle): Ссылка на класс.
- `model` (str): Название используемой модели.
- `messages` (list[dict[str, str]]): Список сообщений для отправки в API.
- `proxy` (str, optional): Адрес прокси-сервера. По умолчанию `None`.
- `**kwargs`: Дополнительные аргументы.

**Возвращает**:
- `str`: Сгенерированный текст от API.

**Вызывает исключения**:
- `aiohttp.ClientResponseError`: Если HTTP-запрос завершается с ошибкой.
- `Exception`: Если возникает ошибка при обработке ответа от API.

**Как работает функция**:

1. **Инициализация заголовков**: Определяются заголовки HTTP-запроса, включая `accept`, `pragma`, `Content-Type` и `Connection`.
2. **Генерация идентификаторов**: Генерируются случайные идентификаторы пользователя (`_user_id`) и приложения (`_app_id`) с использованием символов нижнего регистра и цифр.
3. **Формирование данных запроса**: Создается словарь `data`, содержащий идентификаторы пользователя, список сообщений и информацию о подписчике.
4. **Выполнение POST-запроса**: С использованием `aiohttp.ClientSession` выполняется POST-запрос к API `wewordle.org` с использованием предоставленных заголовков, прокси и данных.
5. **Обработка ответа**: Извлекается содержимое ответа в формате JSON и возвращается сгенерированный текст из поля `message.content`.

```
A: Инициализация заголовков и данных
│
├── B: Генерация случайных идентификаторов пользователя и приложения
│
├── C: Формирование данных запроса (user, messages, subscriber)
│
│
└── D: Выполнение POST-запроса к API wewordle.org
    │
    └── E: Извлечение и возврат сгенерированного текста из ответа
```

**Примеры**:

```python
import asyncio
from src.endpoints.gpt4free.g4f.Provider.deprecated.Wewordle import Wewordle

async def main():
    model = "gpt-3.5-turbo"
    messages = [{"role": "user", "content": "Hello, how are you?"}]
    proxy = None

    response = await Wewordle.create_async(model=model, messages=messages, proxy=proxy)
    print(response)

if __name__ == "__main__":
    asyncio.run(main())