# Модуль `xml2dict`

## Обзор

Модуль `xml2dict` предоставляет утилиты для преобразования XML-данных в словари. Он включает функции для разбора XML-строк и преобразования деревьев XML-элементов в словарные представления. Модуль предназначен для работы с XML-данными, обеспечивая удобный способ доступа к информации, содержащейся в XML-файлах и строках.

## Подробней

Этот модуль содержит функции, которые позволяют преобразовывать XML-данные в формат словаря Python. Это полезно, когда требуется программно обрабатывать XML-данные, представляя их в более удобной структуре данных, такой как словарь. Функции модуля позволяют разбирать XML-строки и преобразовывать деревья XML-элементов в словари.

Модуль предоставляет следующие функции:

- `_parse_node`: Выполняет рекурсивный разбор XML-узла в словарь.
- `_make_dict`: Создает словарь с именем тега и значением.
- `xml2dict`: Преобразует XML-строку в словарь.
- `ET2dict`: Преобразует дерево XML-элементов в словарь.

## Функции

### `_parse_node`

```python
def _parse_node(node: ET.Element) -> dict | str:
    """Parse an XML node into a dictionary.

    Args:
        node (ET.Element): The XML element to parse.

    Returns:
        dict | str: A dictionary representation of the XML node, or a string if the node has no attributes or children.
    """
   ...
```

**Описание**: Разбирает XML-узел в словарь.

**Как работает функция**:
Функция `_parse_node` рекурсивно разбирает XML-узел, преобразуя его атрибуты и дочерние узлы в словарь. Она обрабатывает атрибуты узла, преобразует их в словарь `attrs`. Затем, она перебирает дочерние узлы, рекурсивно вызывая `_parse_node` для каждого дочернего узла и добавляя их в словарь `tree`. Если у узла нет атрибутов и дочерних узлов, возвращается строковое значение узла.

**Параметры**:
- `node` (ET.Element): XML-элемент для разбора.

**Возвращает**:
- `dict | str`: Словарное представление XML-узла или строка, если у узла нет атрибутов или дочерних элементов.

### `_make_dict`

```python
def _make_dict(tag: str, value: any) -> dict:
    """Generate a new dictionary with tag and value.

    Args:
        tag (str): The tag name of the XML element.
        value (any): The value associated with the tag.

    Returns:
        dict: A dictionary with the tag name as the key and the value as the dictionary value.
    """
    ...
```

**Описание**: Создает новый словарь с тегом и значением.

**Как работает функция**:
Функция `_make_dict` создает словарь, где ключом является тег XML-элемента, а значением - значение, связанное с этим тегом. Она также обрабатывает пространства имен XML, извлекая их из тега, если они присутствуют. Если тег содержит пространство имен, функция создает вложенный словарь, содержащий пространство имен и значение.

**Параметры**:
- `tag` (str): Имя тега XML-элемента.
- `value` (any): Значение, связанное с тегом.

**Возвращает**:
- `dict`: Словарь с именем тега в качестве ключа и значением в качестве значения словаря.

### `xml2dict`

```python
def xml2dict(xml: str) -> dict:
    """Parse XML string into a dictionary.

    Args:
        xml (str): The XML string to parse.

    Returns:
        dict: The dictionary representation of the XML.
    """
    ...
```

**Описание**: Преобразует XML-строку в словарь.

**Как работает функция**:
Функция `xml2dict` принимает XML-строку в качестве входных данных, преобразует ее в дерево XML-элементов с использованием `ET.fromstring`, а затем вызывает функцию `ET2dict` для преобразования дерева XML-элементов в словарь.

**Параметры**:
- `xml` (str): XML-строка для разбора.

**Возвращает**:
- `dict`: Словарное представление XML.

### `ET2dict`

```python
def ET2dict(element_tree: ET.Element) -> dict:
    """Convert an XML element tree into a dictionary.

    Args:
        element_tree (ET.Element): The XML element tree.

    Returns:
        dict: The dictionary representation of the XML element tree.
    """
    ...
```

**Описание**: Преобразует дерево XML-элементов в словарь.

**Как работает функция**:
Функция `ET2dict` принимает дерево XML-элементов и вызывает функцию `_make_dict` для создания словаря, где ключом является тег корневого элемента дерева, а значением - результат вызова функции `_parse_node` для корневого элемента.

**Параметры**:
- `element_tree` (ET.Element): Дерево XML-элементов.

**Возвращает**:
- `dict`: Словарное представление дерева XML-элементов.