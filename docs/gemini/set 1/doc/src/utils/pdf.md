# Модуль `hypotez/src/utils/pdf.py`

## Обзор

Модуль `hypotez/src/utils/pdf.py` предоставляет функции для преобразования HTML-контента или файлов в PDF-формат, используя различные библиотеки (pdfkit, FPDF, WeasyPrint, xhtml2pdf). Он включает поиск корневой директории проекта и настройку пути к исполняемому файлу wkhtmltopdf.

## Функции

### `set_project_root`

**Описание**: Находит корневую директорию проекта, начиная с текущей директории и двигаясь вверх по иерархии директорий, пока не найдет директорию, содержащую файлы-маркеры (pyproject.toml, requirements.txt, .git). Если корневая директория не найдена, возвращает текущую директорию. Добавляет корневую директорию в `sys.path` для корректной импортации файлов.

**Параметры**:

- `marker_files` (tuple, опционально): Кортеж с именами файлов или директорий, которые используются для определения корневой директории проекта. По умолчанию содержит ('pyproject.toml', 'requirements.txt', '.git').

**Возвращает**:

- `Path`: Путь к корневой директории проекта. Возвращает текущую директорию, если корневая не найдена.


### `PDFUtils.save_pdf_pdfkit`

**Описание**: Сохраняет HTML-контент или файл в PDF с использованием библиотеки `pdfkit`.

**Параметры**:

- `data` (str | Path): HTML-контент или путь к HTML-файлу.
- `pdf_file` (str | Path): Путь к сохраняемому PDF-файлу.

**Возвращает**:

- `bool`: `True`, если PDF успешно сохранен, иначе `False`.

**Вызывает исключения**:

- `pdfkit.PDFKitError`: Ошибка генерации PDF через `pdfkit`.
- `OSError`: Ошибка доступа к файлу.
- `Exception`: Любые другие неожиданные ошибки.


### `PDFUtils.save_pdf_fpdf`

**Описание**: Сохраняет текст в PDF с использованием библиотеки FPDF.  Поддерживает загрузку пользовательских шрифтов из файла `fonts.json`.

**Параметры**:

- `data` (str): Текст, который необходимо сохранить в PDF.
- `pdf_file` (str | Path): Путь к сохраняемому PDF-файлу.


**Возвращает**:

- `bool`: `True`, если PDF успешно сохранен, иначе `False`.

**Вызывает исключения**:

- `FileNotFoundError`: Если файл `fonts.json` или шрифты из него не найдены.
- `Exception`: Любые другие неожиданные ошибки.


### `PDFUtils.save_pdf_weasyprint`

**Описание**: Сохраняет HTML-контент или файл в PDF с использованием библиотеки `WeasyPrint`.

**Параметры**:

- `data` (str | Path): HTML-контент или путь к HTML-файлу.
- `pdf_file` (str | Path): Путь к сохраняемому PDF-файлу.

**Возвращает**:

- `bool`: `True`, если PDF успешно сохранен, иначе `False`.

**Вызывает исключения**:

- `Exception`: Любые другие ошибки.


### `PDFUtils.save_pdf_xhtml2pdf`

**Описание**: Сохраняет HTML-контент или файл в PDF с использованием библиотеки `xhtml2pdf`.

**Параметры**:

- `data` (str | Path): HTML-контент или путь к HTML-файлу.
- `pdf_file` (str | Path): Путь к сохраняемому PDF-файлу.

**Возвращает**:

- `bool`: `True`, если PDF успешно сохранен, иначе `False`.

**Вызывает исключения**:

- `Exception`: Любые другие ошибки.


### `PDFUtils.html2pdf`

**Описание**: Конвертирует HTML-контент в PDF-файл с использованием WeasyPrint.

**Параметры**:

- `html_str` (str): HTML-контент.
- `pdf_file` (str | Path): Путь к сохраняемому PDF-файлу.

**Возвращает**:

- `bool | None`: `True`, если PDF успешно сохранен; `None`, если произошла ошибка.

**Вызывает исключения**:

- `Exception`: Любые ошибки во время генерации PDF.


##  Переменные

### `MODE`

Строковая переменная, хранящая значение "dev". Предположительно используется для определения режима работы.

### `__root__`

Переменная типа `Path`, содержащая путь к корневой директории проекта.

### `wkhtmltopdf_exe`

Переменная типа `Path`, хранящая путь к исполняемому файлу `wkhtmltopdf.exe`.