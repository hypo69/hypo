# Модуль `aliapi`

## Обзор

Модуль `aliapi` предоставляет класс `AliApi`, который является пользовательским API для работы с AliExpress. Он расширяет функциональность базового класса `AliexpressApi` и включает методы для получения информации о продуктах, аффилиатных ссылок и управления категориями и кампаниями продуктов.

## Подробней

Этот модуль предназначен для интеграции с AliExpress и позволяет автоматизировать получение данных о продуктах, создание аффилиатных ссылок и управление категориями и кампаниями продуктов. Класс `AliApi` использует API ключи, секреты и tracking ID для аутентификации и авторизации запросов к AliExpress. Модуль также включает интеграцию с базами данных для управления категориями и кампаниями продуктов.

## Классы

### `AliApi`

**Описание**: Класс `AliApi` представляет собой пользовательский API для работы с AliExpress. Он расширяет функциональность базового класса `AliexpressApi` и включает методы для получения информации о продуктах, аффилиатных ссылок и управления категориями и кампаниями продуктов.

**Как работает класс**:
1.  Инициализируется с API ключом, секретом, языком и валютой.
2.  Имеет методы для получения деталей продукта в формате словаря и для получения аффилиатных ссылок.
3.  Включает менеджеры для работы с категориями и кампаниями продуктов.

**Методы**:

*   `__init__`: Инициализирует экземпляр класса `AliApi`.
*   `retrieve_product_details_as_dict`: Получает детали продукта в формате словаря.
*   `get_affiliate_links`: Получает аффилиатные ссылки для указанных продуктов.

#### `__init__`

```python
def __init__(self, language: str = 'en', currency: str = 'usd', *args, **kwargs)
```

**Описание**: Инициализирует экземпляр класса `AliApi`.

**Как работает функция**:

1.  Получает учетные данные AliExpress из объекта `gs.credentials.aliexpress`.
2.  Инициализирует базовый класс `AliexpressApi` с полученными учетными данными.
3.  Инициализирует менеджеры баз данных для категорий и кампаний продуктов (закомментировано в текущей версии).

**Параметры**:

*   `language` (str, optional): Язык для API запросов. По умолчанию `'en'`.
*   `currency` (str, optional): Валюта для API запросов. По умолчанию `'usd'`.
*   `*args`: Произвольные позиционные аргументы, передаваемые в базовый класс.
*   `**kwargs`: Произвольные именованные аргументы, передаваемые в базовый класс.

#### `retrieve_product_details_as_dict`

```python
def retrieve_product_details_as_dict(self, product_ids: list) -> dict | dict | None
```

**Описание**: Получает детали продукта в формате словаря.

**Как работает функция**:

1.  Вызывает метод `retrieve_product_details` для получения деталей продукта в формате `SimpleNamespace`.
2.  Преобразует объекты `SimpleNamespace` в словари с использованием `vars(ns)`.
3.  Возвращает список словарей с деталями продукта.

**Параметры**:

*   `product_ids` (list): Список идентификаторов продуктов.

**Возвращает**:

*   `dict | dict | None`: Список словарей с деталями продукта.

**Примеры**:

```python
namespace_list = [
    SimpleNamespace(a=1, b=2, c=3),
    SimpleNamespace(d=4, e=5, f=6),
    SimpleNamespace(g=7, h=8, i=9)
]

dict_list = [vars(ns) for ns in namespace_list]
print(dict_list)
```

#### `get_affiliate_links`

```python
def get_affiliate_links(self, links: str | list, link_type: int = 0, **kwargs) -> List[SimpleNamespace]
```

**Описание**: Получает аффилиатные ссылки для указанных продуктов.

**Как работает функция**:

1.  Вызывает метод `get_affiliate_links` базового класса `AliexpressApi` для получения аффилиатных ссылок.
2.  Возвращает список объектов `SimpleNamespace` с аффилиатными ссылками.

**Параметры**:

*   `links` (str | list): Ссылка или список ссылок на продукты.
*   `link_type` (int, optional): Тип аффилиатной ссылки. По умолчанию `0`.
*   `**kwargs`: Произвольные именованные аргументы, передаваемые в базовый класс.

**Возвращает**:

*   `List[SimpleNamespace]`: Список объектов `SimpleNamespace` с аффилиатными ссылками.

```