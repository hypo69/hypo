# Code Assistant: Обучение модели коду проекта

## Описание

`Code Assistant` — инструмент для взаимодействия с моделями **Gemini** и **OpenAI** для обработки исходного кода. Он выполняет задачи, такие как создание документации, проверка кода и генерация тестов на основе кода из указанных файлов.

## Основные возможности

* **Чтение исходных файлов:** Чтение кода из файлов с расширениями `.py` и `README.MD` из заданных директорий.
* **Обработка с помощью моделей:** Отправка кода в модели **Gemini** и **OpenAI** для выполнения задач, таких как создание документации, проверка ошибок и генерация тестов.
* **Генерация результатов:** Ответы моделей сохраняются в указанные директории для каждой роли и модели.

## Структура проекта

* **Модели:** Используются модели **Gemini** и **OpenAI** для обработки запросов.  Необходимо предоставить API-ключи для доступа к моделям.
* **Промпты:** Программа читает промпты из файлов в директории `src/ai/prompts/developer/`.  Промпты содержат инструкции для моделей, как обрабатывать код.  Структура промптов должна соответствовать требованиям выбранной модели (Gemini/OpenAI).
* **Файлы:** Обрабатываются файлы `.py` и `README.MD` в указанных стартовых директориях.
* **Результаты:**  Ответы моделей сохраняются в специальных директориях,  позволяя структурировать результаты для разных моделей и задач.

## Пример использования

### Запуск с настройками из JSON:

```bash
python assistant.py --settings settings.json
```

### Запуск с явным указанием параметров:

```bash
python assistant.py --role doc_writer --lang ru --models gemini openai --start_dirs /path/to/dir1 /path/to/dir2
```

### Пример для роли `code_checker`:

```bash
python assistant.py --role code_checker --lang en --models gemini --start_dirs /path/to/dir
```

### Пример для модели `openai`:

```bash
python assistant.py --role doc_writer --lang en --models openai
```

## Параметры командной строки

* `--settings`: Путь к JSON файлу с настройками.  Этот файл, вероятно, содержит API-ключи для моделей, пути к директориям, параметры обработки (например, `exclude_file_patterns`).
* `--role`: Роль модели для выполнения задачи (например, `doc_writer`, `code_checker`).
* `--lang`: Язык выполнения задачи (например, `ru` или `en`).
* `--models`: Список моделей для инициализации (например, `gemini`, `openai`).
* `--start_dirs`: Список директорий для обработки.
* `exclude_file_patterns`, `exclude_dirs`, `exclude_files`:  Параметры для исключения файлов и директорий из обработки. Используются для настройки поведения скрипта.

## Логика работы (пошаговое описание)

1. **Чтение настроек:** Скрипт загружает настройки из файла `settings.json`.
2. **Определение файлов для обработки:**  На основе `start_dirs` и параметров исключения (`exclude_file_patterns`, `exclude_dirs`, `exclude_files`) определяется, какие файлы следует обрабатывать.
3. **Загрузка промптов:**  Скрипт загружает промпты, соответствующие заданной роли и языку.  Эти промпты содержат инструкции для обработки кода.
4. **Формирование запросов:**  Для каждого обрабатываемого файла формируется запрос для выбранных моделей, включая исходный код и загруженные промпты.  Важная часть – правильно сформулировать вопрос для модели, чтобы она дала нужный результат.
5. **Обработка ответов моделей:** Скрипт получает ответы от моделей.
6. **Сохранение ответов:** Результаты сохраняются в определённые директории, с учетом роли и модели.
7. **Логирование:**  Скрипт записывает информацию о процессе обработки файлов и ответах моделей в лог-файлы. Это важно для отладки и мониторинга работы программы.

## Логирование

Логи сохраняются с помощью библиотеки `logger` и содержат информацию о процессе обработки файлов и полученных ответах. Это позволяет отслеживать ошибки и проблемы.

## Зависимости

* **Gemini API**: Требуется API-ключ для работы с моделью Gemini.
* **OpenAI API**: Требуется API-ключ для работы с моделью OpenAI.
* **logger**: Библиотека для логирования.
* **[Библиотеки для работы с JSON и файлами]**: Вероятно, `json`, `os`, `pathlib`, для работы с файловой системой и данными.


**Порядок создания новой роли:**  Описание недостаточно подробное для полного понимания процесса.  Требуется больше информации о формате `code_assistant.json`, `translations/translations.json`, структуре промптов, и инструкции,  чтобы ответить на этот вопрос более полно.