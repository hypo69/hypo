# Модуль `kazarinov.py`

## Обзор

Модуль `kazarinov.py` представляет собой эксперимент по интеграции с OpenAI для создания чат-бота. Он включает в себя класс `OpenAIChat` для взаимодействия с API OpenAI и функцию `chat` для запуска интерактивного чата с пользователем. Модуль загружает системную инструкцию из файла `system_instruction.txt` и использует ее для инициализации чат-бота.

## Подробней

Этот модуль предназначен для демонстрации и тестирования возможностей OpenAI API. Он позволяет пользователю ввести свой API-ключ и общаться с моделью OpenAI через текстовый интерфейс. Модуль использует библиотеку `openai` для взаимодействия с API и модуль `logger` для логирования ошибок.

## Классы

### `OpenAIChat`

**Описание**: Класс `OpenAIChat` предназначен для взаимодействия с OpenAI API. Он инициализируется с API-ключом и системной инструкцией, а также предоставляет метод `ask` для отправки запросов и получения ответов от модели OpenAI.

**Как работает класс**:
1.  При инициализации класса `OpenAIChat` устанавливается API-ключ OpenAI и загружается системная инструкция.
2.  Метод `ask` принимает текстовый запрос, добавляет его в историю сообщений и отправляет в OpenAI API.
3.  Полученный ответ добавляется в историю сообщений и возвращается пользователю.
4.  В случае возникновения ошибки при взаимодействии с API, ошибка логируется.

**Методы**:

*   `__init__(self, api_key: str, system_instruction: str = None)`: Инициализация класса `OpenAIChat`.
*   `ask(self, prompt: str) -> str`: Отправка вопроса в модель OpenAI и получение ответа.

**Параметры**:

*   `api_key` (str): API-ключ OpenAI.
*   `system_instruction` (str, optional): Системная инструкция для модели OpenAI. По умолчанию `None`.
*   `prompt` (str): Текстовый запрос пользователя.

**Возвращает**:

*   `str`: Ответ от модели OpenAI или сообщение об ошибке.

**Примеры**

```python
# Пример инициализации класса OpenAIChat
ai = OpenAIChat(api_key='YOUR_API_KEY', system_instruction='You are a helpful assistant.')

# Пример отправки запроса и получения ответа
response = ai.ask(prompt='What is the capital of France?')
print(response)  # Вывод: Paris
```

## Функции

### `chat`

```python
def chat():
    print("Добро пожаловать в чат с OpenAI!")
    print("Чтобы завершить чат, напишите \'exit\'.\\n")
    
    # Ввод ключа API и инициализация модели
    api_key = input("Введите ваш OpenAI API ключ: ")
    ai = OpenAIChat(api_key=api_key, system_instruction=system_instruction)

    while True:
        # Получаем вопрос от пользователя
        user_input = input("> вопрос\\n> ")
        
        if user_input.lower() == 'exit':
            print("Чат завершен.")
            break
        
        # Отправляем запрос модели и получаем ответ
        response = ai.ask(prompt=user_input)
        
        # Выводим ответ
        print(f">> ответ\\n>> {response}\\n")
```

**Описание**: Функция `chat` запускает интерактивный чат с пользователем через OpenAI API.

**Как работает функция**:

1.  Выводит приветственное сообщение и инструкцию по завершению чата.
2.  Запрашивает у пользователя API-ключ OpenAI.
3.  Инициализирует класс `OpenAIChat` с API-ключом и системной инструкцией.
4.  В цикле запрашивает у пользователя текстовый запрос, отправляет его в OpenAI API и выводит полученный ответ.
5.  Завершает чат при вводе команды `exit`.

**Параметры**:

*   Нет параметров.

**Возвращает**:

*   Нет возвращаемого значения.

**Вызывает исключения**:

*   Не вызывает исключений напрямую, но может возникнуть исключение при взаимодействии с OpenAI API в классе `OpenAIChat`.

**Примеры**:

```python
# Пример запуска функции chat
chat()
```
```
Добро пожаловать в чат с OpenAI!
Чтобы завершить чат, напишите 'exit'.

Введите ваш OpenAI API ключ: YOUR_API_KEY
> вопрос
> What is the capital of France?
>> ответ
>> Paris

> вопрос
> exit
Чат завершен.
```
```

### `__main__`

**Описание**: Этот блок кода запускает функцию `chat`, если скрипт запущен напрямую.

**Как работает функция**:
*   Проверяет, является ли текущий скрипт главной программой.
*   Если да, вызывает функцию `chat` для запуска интерактивного чата.

**Параметры**:
*   Нет параметров.

**Возвращает**:
*   Нет возвращаемого значения.
```