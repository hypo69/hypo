# Модуль `send_data.js`

## Обзор

Данный скрипт JavaScript предназначен для сбора информации о загруженной странице (заголовок, URL, содержимое тела) и отправки этой информации на сервер по заданному API-адресу.  Скрипт использует `fetch` API для асинхронной отправки данных.  Он обрабатывает возможные ошибки при запросе и выводит информацию о полученном ответе или ошибке в консоль.


## Функции

### `onPageLoad`

**Описание**: Функция собирает данные о загруженной странице (заголовок, URL, содержимое) и отправляет их на сервер.

**Параметры**:
Нет.

**Возвращает**:
Нет.

**Обрабатывает исключения**:
- `Error`: Обрабатывает случай, когда HTTP-запрос не удался (например, сервер недоступен).

**Детали реализации**:
1. Сбор данных о странице: `title`, `url`, `body`.
2. Формирование объекта данных `data`.
3. Отправка запроса `fetch` на указанный API-адрес с методом POST и JSON-данными.
4. Обработка ответа сервера:
    - Проверка статуса ответа (`response.ok`).  В случае ошибки выбрасывает исключение.
    - Парсинг ответа в JSON (`response.json()`) и вывод в консоль.
5. Обработка ошибок: перехватывает ошибки с помощью блока `catch`. Выводит ошибку в консоль.

## Использование

Скрипт автоматически запускается при загрузке страницы благодаря добавлению обработчика события `window.addEventListener('load', onPageLoad);`.  Для корректной работы, необходимо задать API-адрес в строке `fetch(...)`.


## API-адрес

`http://127.0.0.1/hypotez.online/api/`

**Важно**: Замените `http://127.0.0.1/hypotez.online/api/` на действительный адрес API вашего сервера.