# Модуль discord_bot_trainger

## Обзор

Этот модуль содержит код для бота Discord, который может обучаться моделям, обрабатывать голосовые и текстовые команды, а также взаимодействовать с голосовыми каналами. Он использует библиотеки `discord.py`, `openai`, `speech_recognition`, `pydub`, `gtts` и др. для выполнения своих задач.

## Команды

### `hi`

**Описание**: Команда приветствия, возвращающая сообщение "HI!".

**Использование**: `!hi`


### `join`

**Описание**: Подключает бота к голосовому каналу пользователя, в котором он находится.

**Использование**: `!join`


### `leave`

**Описание**: Отключает бота от голосового канала.

**Использование**: `!leave`


### `train`

**Описание**: Обучает модель с предоставленными данными.

**Параметры**:

- `data` (str, необязательно): Путь к файлу или строка с данными для обучения. По умолчанию `None`.
- `data_dir` (str, необязательно): Путь к директории с данными для обучения. По умолчанию `None`.
- `positive` (bool, необязательно): Флаг, указывающий, являются ли данные положительными. По умолчанию `True`.
- `attachment` (discord.Attachment, необязательно): Прикрепленный файл для обучения.


**Возвращает**:

- `bool`:  `True`, если обучение успешно начато, `False` в противном случае.


**Использование**: `!train <data> <data_dir> <positive>` или с прикрепленным файлом.


### `test`

**Описание**: Тестирует модель с предоставленными данными.

**Параметры**:

- `test_data` (str): Данные для тестирования в формате JSON.


**Возвращает**:

- `str`: Результаты тестирования в формате JSON.


**Вызывает исключения**:

- `json.JSONDecodeError`: Если данные тестирования не являются валидным JSON.


**Использование**: `!test <test_data>`


### `archive`

**Описание**: Архивирует файлы в указанной директории.

**Параметры**:

- `directory` (str): Путь к директории для архивации.


**Возвращает**:

- `None`

**Вызывает исключения**:

- `Exception`: При возникновении ошибки во время архивирования.


**Использование**: `!archive <directory>`


### `select_dataset`

**Описание**: Выбирает набор данных для обучения модели.

**Параметры**:

- `path_to_dir_positive` (str): Путь к директории с положительными данными.
- `positive` (bool, необязательно):  Флаг, указывающий, являются ли данные положительными. По умолчанию `True`.


**Возвращает**:

- `str`: Выбранный набор данных.


**Использование**: `!select_dataset <path_to_dir_positive>` или `!select_dataset <path_to_dir_positive> <positive>`


### `instruction`

**Описание**: Выводит инструкцию из файла.

**Использование**: `!instruction`


### `correct`

**Описание**: Исправляет предыдущий ответ.

**Параметры**:

- `message_id` (int): ID сообщения для исправления.
- `correction` (str): Текст исправления.


**Возвращает**:

- `None`


**Вызывает исключения**:

- `Exception`: При возникновении ошибки во время получения сообщения или обработки исправления.


**Использование**: `!correct <message_id> <correction>`


### `feedback`

**Описание**: Отправляет обратную связь по модели.

**Параметры**:

- `feedback_text` (str): Текст обратной связи.


**Возвращает**:

- `None`


**Использование**: `!feedback <feedback_text>`


### `getfile`

**Описание**: Прикрепляет файл к сообщению.

**Параметры**:

- `file_path` (str): Путь к файлу.


**Возвращает**:

- `None`


**Использование**: `!getfile <file_path>`

## Обработчики событий

### `on_ready`

**Описание**: Вызывается при готовности бота.


### `on_message`

**Описание**: Обрабатывает входящие сообщения и реагирует на голосовые команды.

## Функции

### `store_correction`

**Описание**: Сохраняет исправление для дальнейшей обработки.

**Параметры**:

- `original_text` (str): Исходный текст.
- `correction` (str): Исправление.


**Возвращает**:

- `None`


**Использование**: Внутри кода.


### `text_to_speech_and_play`

**Описание**: Преобразует текст в речь и воспроизводит его в голосовом канале.

**Параметры**:

- `text` (str): Текст для преобразования.
- `channel` (discord.TextChannel): Голосовой канал.


**Возвращает**:

- `None`



##  Замечания

Модуль использует `ffmpeg` для конвертации аудио.  Путь к `ffmpeg.exe` должен быть корректным.


```