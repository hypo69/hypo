# Модуль `hypotez/src/utils/convertors/html2text.py`

## Обзор

Модуль `html2text` преобразует HTML-код в эквивалентный текст в формате Markdown. Он поддерживает различные опции форматирования, такие как форматирование заголовков, списков, ссылок, изображений и цитат.

## Функции

### `has_key`

**Описание**: Проверяет, содержит ли объект `x` ключ `y`. Поддерживает как словари, так и объекты, имеющие метод `has_key`.

**Параметры**:
- `x`: Объект, который проверяется на наличие ключа.
- `y`: Ключ, который проверяется на наличие в `x`.

**Возвращает**:
- `bool`: `True`, если ключ `y` присутствует в объекте `x`, `False` иначе.


### `name2cp`

**Описание**: Преобразует имя сущности в ее код символа.

**Параметры**:
- `k`: Имя сущности.

**Возвращает**:
- `int`: Код символа.


### `charref`

**Описание**:  Преобразует числовую ссылку сущности в соответствующий символ.

**Параметры**:
- `name`: Числовая ссылка сущности.

**Возвращает**:
- `str`: Соответствующий символ.


### `entityref`

**Описание**: Преобразует ссылку сущности в соответствующий символ.

**Параметры**:
- `c`: Имя ссылки сущности.

**Возвращает**:
- `str`: Символ, соответствующий ссылке сущности, или строка `"&" + c + ";"`, если сущность не найдена.


### `replaceEntities`

**Описание**: Заменяет сущности в строке.

**Параметры**:
- `s`: Строка с сущностями.

**Возвращает**:
- `str`: Строка, в которой сущности заменены на соответствующие символы.


### `unescape`

**Описание**: Разбирает и заменяет HTML-сущности в строке.

**Параметры**:
- `s`: Строка, содержащая HTML-сущности.

**Возвращает**:
- `str`: Строка, в которой HTML-сущности заменены соответствующими символами.


### `onlywhite`

**Описание**: Проверяет, состоит ли строка только из пробельных символов.

**Параметры**:
- `line`: Строка, которую нужно проверить.

**Возвращает**:
- `bool`: `True`, если строка состоит только из пробельных символов, `False` иначе.


### `optwrap`

**Описание**: Обёртка для перевода текста в нескольких параграфах.

**Параметры**:
- `text`: Текст для перевода.

**Возвращает**:
- `str`: Переведённый текст.


### `hn`

**Описание**: Определяет тип заголовка (h1-h9).

**Параметры**:
- `tag`: Тег HTML.

**Возвращает**:
- `int`: Номер заголовка (1-9) или 0 если не заголовок.


### `dumb_property_dict`

**Описание**: Преобразует строку CSS-стилей в словарь атрибутов.

**Параметры**:
- `style`: Строка CSS-стилей.

**Возвращает**:
- `dict`: Словарь атрибутов CSS.


### `dumb_css_parser`

**Описание**: Парсит CSS-стили.

**Параметры**:
- `data`: Строка CSS-стилей.

**Возвращает**:
- `dict`: Словарь CSS-стилей, где ключи - селекторы, а значения - словари атрибутов.


### `element_style`

**Описание**: Объединяет стили родителя и текущего элемента.

**Параметры**:
- `attrs`: Атрибуты элемента.
- `style_def`: Определения стилей (CSS).
- `parent_style`: Стиль родительского элемента.

**Возвращает**:
- `dict`: Стиль элемента.


### `google_list_style`

**Описание**: Определяет тип списка (упорядоченный или неупорядоченный) для Google Docs.

**Параметры**:
- `style`: Словарь CSS-стилей.

**Возвращает**:
- `str`: Тип списка (`ul` или `ol`).


### `google_nest_count`

**Описание**: Определяет уровень вложенности списков в Google Docs.

**Параметры**:
- `style`: Словарь CSS-стилей.

**Возвращает**:
- `int`: Уровень вложенности.


### `google_has_height`

**Описание**: Проверяет, определена ли высота элемента в стиле.

**Параметры**:
- `style`: Словарь CSS-стилей.

**Возвращает**:
- `bool`: `True`, если высота определена, `False` иначе.


### `google_text_emphasis`

**Описание**: Возвращает список всех модификаторов выделения текста.

**Параметры**:
- `style`: Словарь CSS-стилей.

**Возвращает**:
- `list`: Список модификаторов выделения.


### `google_fixed_width_font`

**Описание**: Проверяет, определен ли шрифт с фиксированной шириной.

**Параметры**:
- `style`: Словарь CSS-стилей.

**Возвращает**:
- `bool`: `True`, если шрифт с фиксированной шириной, `False` иначе.


### `list_numbering_start`

**Описание**: Извлекает номер начала нумерации списка.

**Параметры**:
- `attrs`: Атрибуты элемента списка.

**Возвращает**:
- `int`: Начальный номер нумерации.


### `_html2text`

**Описание**: Класс для парсинга HTML и преобразования его в Markdown.


### `wrapwrite`

**Описание**: Функция для записи текста в стандартный вывод.


### `html2text_file`

**Описание**: Преобразует HTML в текст, сохраняя его в файл или в указанный поток.

**Параметры**:
- `html`: HTML-текст.
- `out`: Функция записи (по умолчанию `wrapwrite`).
- `baseurl`: Базовый URL для обработки ссылок.

**Возвращает**:
- `str`: Переведенный текст.


### `html2text`

**Описание**: Преобразует HTML в текст, используя `optwrap`.

**Параметры**:
- `html`: HTML-текст.
- `baseurl`: Базовый URL.

**Возвращает**:
- `str`: Переведенный текст.


## Классы

### `Storage`

**Описание**: Пустой класс для хранения параметров.

##  Дополнительные сведения

* Модуль использует библиотеки `html.entities`, `urllib.parse`, `html.parser`, `urllib.request`, `optparse`, `re`, `sys`, `codecs`, `textwrap`.
* Поддерживает различные опции форматирования, такие как ширина строки, выделение текста, список, заголовки, цитаты, ссылки и изображения.
* Включает функции для обработки исключений, обработки HTML-сущностей и навигации по дереву HTML.


```