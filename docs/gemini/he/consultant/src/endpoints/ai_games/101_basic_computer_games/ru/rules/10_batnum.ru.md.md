# Анализ кода модуля `10_batnum.ru.md`

**Качество кода**
- **Соблюдение требований к формату кода (1-10)**:
    - **Преимущества**:
        - Документ написан на русском языке, как и требуется.
        - Структура документа соответствует формату markdown.
        - Текст документа подробно описывает правила игры, что соответствует цели.
    - **Недостатки**:
        - Документ не является кодом Python, поэтому не применим к автоматической проверке.
        - Отсутствуют docstring в формате RST.
        - Не используются логирование ошибок или форматирование кода.

**Рекомендации по улучшению**
1.  **Преобразование в код Python**: Необходимо преобразовать документ в исполняемый код на Python, реализующий описанную игру.
2.  **Использование RST**:  Добавить docstring в формате RST к функциям и классам, которые будут созданы при реализации игры.
3.  **Логирование ошибок**:  При реализации кода предусмотреть использование `logger.error` для отлавливания и логирования исключений.
4.  **Проверка ввода**:  Необходимо добавить проверки ввода для случаев, когда пользователь вводит некорректные данные.
5.  **Стратегия компьютера**: Реализовать логику AI, как описано в разделе "Стратегия победы".
6.  **Улучшение структуры кода**: Организовать код в функции и классы для улучшения читаемости и переиспользования.

**Улучшенный код**

```python
"""
Модуль для реализации игры "Butnum" (Битва чисел).
=========================================================================================

Модуль реализует игру, где игрок и компьютер поочередно убирают объекты из кучки.
Игра основана на стратегическом мышлении и арифметике по модулю.

Пример использования:
--------------------
Запустите скрипт, и следуйте инструкциям в консоли для игры.
"""
import random  # импорт модуля random
from src.logger.logger import logger  # импорт логгера

def get_int_input(prompt: str, min_val: int, max_val: int) -> int:
    """
    Получает целое число от пользователя в заданном диапазоне.

    :param prompt: Сообщение, выводимое пользователю.
    :type prompt: str
    :param min_val: Минимальное допустимое значение.
    :type min_val: int
    :param max_val: Максимальное допустимое значение.
    :type max_val: int
    :return: Введенное пользователем число.
    :rtype: int
    :raises ValueError: Если ввод пользователя не является целым числом или выходит за заданный диапазон.
    """
    while True:
        try:
            value = int(input(prompt))
            if min_val <= value <= max_val:
                return value
            else:
                logger.error(f"Ввод должен быть в диапазоне от {min_val} до {max_val}") # логирование ошибки
                print(f"Пожалуйста, введите число от {min_val} до {max_val}.")
        except ValueError as e:
            logger.error(f"Некорректный ввод: {e}") # логирование ошибки
            print("Пожалуйста, введите целое число.")

def computer_move(objects_left: int, min_take: int, max_take: int) -> int:
    """
    Определяет оптимальный ход компьютера.

    Компьютер старается оставить игроку количество объектов, кратное (max_take + 1).

    :param objects_left: Количество оставшихся объектов.
    :type objects_left: int
    :param min_take: Минимальное количество объектов, которое можно забрать.
    :type min_take: int
    :param max_take: Максимальное количество объектов, которое можно забрать.
    :type max_take: int
    :return: Количество объектов, которое забирает компьютер.
    :rtype: int
    """
    optimal_move = objects_left % (max_take + 1)
    if optimal_move == 0:
      optimal_move = random.randint(min_take,max_take) # Если остаток 0, компьютер делает случайный ход
    elif optimal_move < min_take:
      optimal_move = min_take
    return optimal_move

def play_butnum() -> None:
    """
    Запускает игру "Butnum".

    Игра продолжается до тех пор, пока пользователь не откажется играть.
    """
    while True:
        objects_total = 20  # начальное количество объектов
        min_take = get_int_input("Введите минимальное количество объектов для забора (например, 1): ", 1, objects_total)
        max_take = get_int_input("Введите максимальное количество объектов для забора (например, 3): ", min_take, objects_total)
        first_move = get_int_input("Кто ходит первым? (1 - игрок, 2 - компьютер): ", 1, 2)
        current_turn = first_move # определяет чей ход

        objects_left = objects_total # копирует начальное количество обьектов

        while objects_left > 0:
            if current_turn == 1: # ход игрока
                print(f"Осталось объектов: {objects_left}")
                take = get_int_input(f"Ваш ход: Сколько объектов вы хотите забрать? ({min_take}-{max_take}) ", min_take, max_take) # запрос хода у игрока
                objects_left -= take
                current_turn = 2
            else:  # ход компьютера
                take = computer_move(objects_left, min_take, max_take)
                print(f"Компьютер забрал {take} объектов.")
                objects_left -= take
                current_turn = 1

        if current_turn == 2:  # Выиграл игрок
            print("Поздравляем! Вы выиграли!")
        else:  # Выиграл компьютер
            print("Жаль, вы проиграли!")

        play_again = input("Хотите сыграть снова? (да/нет): ").lower() # запрос на новую игру
        if play_again != "да":
            break
if __name__ == "__main__":
    play_butnum()
```