Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот блок кода содержит тесты для сценариев взаимодействия агентов (TinyPerson) с рекламой.  В частности, он тестирует оценку рекламных объявлений (test_ad_evaluation_scenario) и создание рекламы для аренды квартиры (test_ad_creation_scenario), а также сбор данных о потребителях (test_consumer_profiling_scenario).  Каждый тест использует различные функции для моделирования взаимодействия с окружающей средой и получения результатов.

Шаги выполнения
-------------------------
1. **Импорт необходимых модулей:** Блок кода импортирует необходимые библиотеки, включая `pytest`, `logging`, `tinytroupe`, и другие, что подготавливает окружение для выполнения тестов.
2. **Определение сценария оценки рекламы (test_ad_evaluation_scenario):** 
   - Определяет несколько рекламных объявлений (`travel_ad_1`, `travel_ad_2`, ...).
   - Формирует запрос на оценку (`eval_request_msg`) с предоставлением рекламных объявлений.
   - Устанавливает контекст для агентов (`situation`).
   - Определяет цель извлечения данных (`extraction_objective`).
   - Создаёт список агентов (`people`) из класса `TinyPerson`.
   - Запускает оценку рекламных объявлений каждым агентом.
   - Извлекает результаты оценки (`res`) из действий агентов используя `ResultsExtractor`.
   - Проверяет корректность результатов (`assert`) для каждого агента и для всех агентов в целом.

3. **Определение сценария создания рекламы для аренды (test_ad_creation_scenario):**
    - Задает контекст для фокус-группы (`situation`).
    - Описывает характеристики квартиры (`apartment_description`).
    - Задает задачу для фокус-группы (`task`).
    - Передает ситуацию, описание и задачу фокус-группе.
    - Запускает работу фокус-группы.
    - Извлекает результат из фокус-группы.
    - Проверяет, содержит ли результат идеи для рекламы.

4. **Определение сценария профилирования потребителей (test_consumer_profiling_scenario):**
    - Удаляет предыдущий файл кэша.
    - Инициализирует файл кэша для сохранения данных.
    - Устанавливает общий контекст для потребителей (`general_context`).
    - Создаёт фабрику для создания потребителей (`consumer_factory`).
    - Проводит интервью с заданным числом потребителей (`interview_consumer_batch`).
    - Запрашивает у потребителей информацию о покупке бутылированного газаpacho.
    - Сохраняет результаты в файл кэша.
    - Проверяет, что файл кэша был создан.
    - Завершает сессию сохранения.


Пример использования
-------------------------
.. code-block:: python

    # Пример использования сценария оценки рекламы:
    test_ad_evaluation_scenario(setup)

    # Пример использования сценария создания рекламы:
    test_ad_creation_scenario(setup, focus_group_world)

    # Пример использования сценария профилирования:
    test_consumer_profiling_scenario(setup)