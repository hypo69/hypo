# Документация для разработчика: Автоматизированная отправка сообщений WhatsApp

## Обзор

Этот документ содержит руководство по созданию скрипта Python для автоматической отправки сообщений WhatsApp. Он охватывает необходимые компоненты, процесс разработки, возможные проблемы и способы их решения.

## Подробней

Этот код используется для автоматизации отправки сообщений в WhatsApp. Он предназначен для разработчиков, которые хотят автоматизировать отправку сообщений, например, для маркетинговых кампаний или уведомлений.

## Содержание

1.  [Введение](#введение)
2.  [Необходимые компоненты](#необходимые-компоненты)
3.  [Процесс разработки](#процесс-разработки)
    *   [Функция отправки сообщений (`send_whatsapp_message`)](#функция-отправки-сообщений-send_whatsapp_message)
    *   [Банк сообщений](#банк-сообщений)
    *   [Пользовательский ввод](#пользовательский-ввод)
    *   [Основной цикл отправки](#основной-цикл-отправки)
4.  [Возможные проблемы и решения](#возможные-проблемы-и-решения)
5.  [Код (пример)](#код-пример)
6.  [Выполнение скрипта](#выполнение-скрипта)

## Введение

### 1.1. Назначение:

В данном документе описывается процесс разработки автоматизированного скрипта на языке Python, предназначенного для отправки случайных сообщений WhatsApp в течение определенного периода времени.

### 1.2. Целевая аудитория:

Данное руководство предназначено для разработчиков, имеющих базовые знания языка Python и понимание работы с командной строкой.

### 1.3. Предпосылки:

Перед использованием данного руководства, необходимо наличие установленного Python 3.6+ и менеджера пакетов pip.

## Необходимые компоненты

### 2.1. Библиотеки Python:

*   `pywhatkit`: Для взаимодействия с веб-версией WhatsApp и отправки сообщений.
*   `pyautogui`: Для автоматизации действий мыши и клавиатуры.
*   `pynput`: Для контроля клавиатурного ввода.
*   `emoji`: Для добавления эмодзи в сообщения.
*   `random`: Для генерации случайных сообщений и времени.
*   `time`: Для управления задержками и временем выполнения.

### 2.2. Зависимости:

Установка указанных библиотек выполняется посредством pip:

```bash
pip install pywhatkit pyautogui pynput emoji
```

### 2.3. Требования к системе:

Операционная система с установленным веб-браузером (например, Chrome или Firefox) и возможностью подключения к WhatsApp Web.

## Процесс разработки

### 3.1. Функция отправки сообщений (`send_whatsapp_message`)

#### Назначение:

Отправляет сообщение в WhatsApp с использованием библиотеки `pywhatkit`.

**Параметры:**

*   `phone_number` (str): Номер телефона получателя (с кодом страны).
*   `message` (str): Текст сообщения.
*   `hour` (int): Час отправки сообщения (0-23).
*   `minutes` (int): Минуты отправки сообщения (0-59).

**Как работает функция:**

1.  **Инициализация отправки сообщения:** Функция `pywhatkit.sendwhatmsg` инициализирует отправку сообщения, открывая веб-версию WhatsApp в браузере.
2.  **Задержка загрузки:** `time.sleep` используется для задержки, чтобы дать веб-версии WhatsApp время для загрузки.
3.  **Имитация нажатия клавиши "Enter":** `pyautogui` и `pynput` используются для имитации нажатия клавиши "Enter" для отправки сообщения.
4.  **Обработка исключений:** Блок `try...except` используется для перехвата возможных ошибок и вывода информации об ошибке.

**Возвращает:**

Функция ничего не возвращает явно, но выводит сообщения об успехе или ошибке в консоль.

**Вызывает исключения:**

Функция не вызывает исключений явно, но перехватывает любые исключения, которые могут возникнуть в процессе отправки сообщения, и логирует их.

**Примеры:**

Пример вызова функции:

```python
send_whatsapp_message("+79991234567", "Привет, это автоматическое сообщение!", 10, 30)
```

### 3.2. Банк сообщений

#### Назначение:

Создание списка строк (`messages`) для хранения сообщений. Использование `emoji.emojize` для добавления эмодзи. Применение `random.choice` для случайного выбора сообщения.

**Как работает банк сообщений:**

1.  **Создание списка сообщений:** Определяется список `messages`, содержащий различные текстовые сообщения.
2.  **Добавление эмодзи:** Функция `emoji.emojize` используется для добавления эмодзи в сообщения на основе их текстового представления (например, `:thumbs_up:`).
3.  **Случайный выбор сообщения:** Функция `random.choice` выбирает случайное сообщение из списка `messages`.

**Примеры:**

Пример работы с банком сообщений:

```python
import random
import emoji

messages = [
    "Привет! :wave:",
    "Как дела? :question:",
    "Хорошего дня! :sunflower:"
]

message = random.choice([emoji.emojize(m) for m in messages])
print(message)
```

### 3.3. Пользовательский ввод

#### Назначение:

Получение количества сообщений (`num_messages`) с помощью функции `input`. Получение начального часа (`start_hour`) и конечного часа (`end_hour`) диапазона отправки с помощью `input`.

**Как работает пользовательский ввод:**

1.  **Запрос количества сообщений:** Функция `input` используется для запроса у пользователя количества сообщений, которые необходимо отправить.
2.  **Запрос диапазона времени:** Функция `input` используется для запроса у пользователя начального и конечного часа для отправки сообщений.

**Примеры:**

Пример получения пользовательского ввода:

```python
num_messages = int(input("Введите количество сообщений: "))
start_hour = int(input("Введите начальный час: "))
end_hour = int(input("Введите конечный час: "))
```

### 3.4. Основной цикл отправки

#### Назначение:

Цикл `while` выполняется, пока счетчик сообщений (`message_count`) не достигнет заданного количества (`num_messages`). Генерация случайного часа и минут с помощью `random.randint`. Вызов функции `send_whatsapp_message` с полученными данными. Увеличение счетчика сообщений.

**Как работает цикл отправки:**

1.  **Инициализация счетчика:** Счетчик сообщений `message_count` инициализируется нулем.
2.  **Цикл отправки сообщений:** Цикл `while` выполняется, пока счетчик сообщений не достигнет заданного количества `num_messages`.
3.  **Генерация случайного времени:** `random.randint` используется для генерации случайного часа и минут в заданном диапазоне.
4.  **Вызов функции отправки:** Функция `send_whatsapp_message` вызывается с номером телефона, случайным сообщением, случайным часом и минутами.
5.  **Увеличение счетчика:** Счетчик сообщений увеличивается на единицу после каждой отправки.

**Примеры:**

Пример основного цикла отправки:

```python
message_count = 0
while message_count < num_messages:
    hour = random.randint(start_hour, end_hour)
    minutes = random.randint(0, 59)
    send_whatsapp_message("+79991234567", "Привет, это автоматическое сообщение!", hour, minutes)
    message_count += 1
```

## Возможные проблемы и решения

### 4.1. Проблемы с `pywhatkit`:

В случае неудачной автоматической отправки сообщения, использовать `pyautogui` и `pynput` для эмуляции нажатия клавиш и отправки сообщения.

### 4.2. Подключение к WhatsApp Web:

При первом использовании необходимо подключение к веб-версии WhatsApp через веб-браузер.

### 4.3. Динамическая задержка:

Скорость загрузки веб-версии WhatsApp может меняться, поэтому для стабильности увеличьте время задержки.

### 4.4. Зависимость от браузера и версии WhatsApp:

Изменения в браузере или веб-версии WhatsApp могут потребовать корректировки скрипта.

## Код (пример)

```python
# ... (Код ) ...
```

## Выполнение скрипта

*   Сохраните скрипт в файл с расширением `.py`.
*   Выполните скрипт в терминале с помощью команды: `python имя_файла.py`
*   Следуйте инструкциям на экране для ввода необходимых данных.