# Модуль `md2dict`

## Обзор

Модуль `md2dict` предназначен для конвертации строк в формате Markdown в структурированные словари. Он включает функциональность для извлечения содержимого и его представления в удобном формате.

## Подробней

Этот модуль предоставляет функции для преобразования Markdown в HTML и последующего разбора HTML для создания структурированного словаря. Основное назначение модуля - обработка текстовых данных, представленных в формате Markdown, и организация их в удобную структуру для дальнейшей обработки и анализа.

## Функции

### `md2html`

```python
def md2html(md_string: str, extras: List[str] = None) -> str:
    """
    Конвертирует строку Markdown в HTML.

    Args:
        md_string (str): Строка Markdown для конвертации.
        extras (list, optional): Список расширений markdown2. Defaults to None.

    Returns:
        str: HTML-представление Markdown.
    """
```

**Назначение**: Конвертирует строку Markdown в HTML.

**Параметры**:
- `md_string` (str): Строка Markdown, которую необходимо преобразовать в HTML.
- `extras` (list, optional): Список расширений `markdown2`, используемых при конвертации. По умолчанию `None`.

**Возвращает**:
- `str`: HTML-представление входной Markdown-строки.

**Вызывает исключения**:
- `Exception`: В случае возникновения ошибки при преобразовании Markdown в HTML, ошибка логируется, и возвращается пустая строка.

**Как работает функция**:

1. Функция `md2html` принимает на вход строку в формате Markdown и необязательный список расширений для `markdown2`.
2. Преобразует Markdown в HTML с использованием библиотеки `markdown2`. Если список расширений не предоставлен, используется преобразование без расширений.
3. Обрабатывает возможные исключения при преобразовании, логируя информацию об ошибке и возвращая пустую строку в случае неудачи.

```
Markdown -> HTML
```

**Примеры**:

```python
from src.utils.convertors.md import md2html
markdown_text = "# Заголовок 1\nТекст абзаца."
html_text = md2html(markdown_text)
print(html_text)
```

### `md2dict`

```python
def md2dict(md_string: str, extras: List[str] = None) -> Dict[str, list[str]]:
    """
    Конвертирует строку Markdown в структурированный словарь.

    Args:
        md_string (str): Строка Markdown для конвертации.
        extras (list, optional): Список расширений markdown2 для md2html. Defaults to None.

    Returns:
         Dict[str, list[str]]: Структурированное представление Markdown содержимого.
    """
```

**Назначение**: Конвертирует строку Markdown в структурированный словарь.

**Параметры**:
- `md_string` (str): Строка Markdown для конвертации.
- `extras` (list, optional): Список расширений `markdown2` для `md2html`. По умолчанию `None`.

**Возвращает**:
- `Dict[str, list[str]]`: Структурированное представление Markdown содержимого. Ключи словаря — заголовки, значения — список строк под заголовком.

**Вызывает исключения**:
- `Exception`: В случае возникновения ошибки при парсинге Markdown в структурированный словарь, ошибка логируется, и возвращается пустой словарь.

**Как работает функция**:

1. Функция `md2dict` принимает на вход строку в формате Markdown и необязательный список расширений для `markdown2`.
2. Преобразует Markdown в HTML с использованием функции `md2html`.
3. Разбивает HTML на строки и анализирует их для выявления заголовков и содержимого.
4. Создает словарь, в котором ключи — это заголовки первого уровня, а значения — списки строк, относящихся к этим заголовкам.
5. Обрабатывает возможные исключения при парсинге, логируя информацию об ошибке и возвращая пустой словарь в случае неудачи.

```
Markdown -> HTML -> Разделение на строки -> Анализ заголовков и содержимого -> Словарь
```

**Примеры**:

```python
from src.utils.convertors.md import md2dict

markdown_text = """
# Заголовок 1
Текст абзаца 1.

# Заголовок 2
Текст абзаца 2.
"""
result_dict = md2dict(markdown_text)
print(result_dict)