Как использовать декоратор для автоматического обновления docstring функции
==============================================================================

Описание
-------------------------
Этот модуль предоставляет декоратор `autodoc`, который автоматически обновляет строку документации (docstring) функции, добавляя информацию о времени последнего вызова.  Декоратор оборачивает функцию, обновляет её docstring перед вызовом, вставляя время вызова в конец документации.

Шаги выполнения
-------------------------
1. **Импортировать необходимые библиотеки:** Модуль `time` для получения текущего времени и `functools` для сохранения метаданных функции.
2. **Определить декоратор `autodoc`:**
   - Он использует `functools.wraps`, чтобы сохранить все атрибуты оригинальной функции, включая docstring.
   - Внутри `wrapper` перед вызовом функции `func` вызывает функцию `update_docstring`, обновляющую docstring.
3. **Определить функцию `update_docstring`:**
   - Получает текущую дату и время.
   - Проверяет, существует ли текущий docstring. Если нет, создает новый, содержащий только время.
   - Если docstring существует, добавляет в конец строку с временем последнего вызова.
4. **Использовать декоратор:** Применить декоратор `@autodoc` к функциям, для которых требуется автоматическое обновление docstring.
5. **Вызывать функцию:** Выполнить функцию, к которой применён декоратор. Декоратор автоматически обновит docstring.
6. **Получить обновленный docstring:** После вызова функции, обратиться к атрибуту `__doc__` функции, чтобы получить обновленную информацию.

Пример использования
-------------------------
.. code-block:: python

    import time

    # Импортируем необходимые библиотеки.
    import functools

    def autodoc(func):
        """Декоратор для автоматического обновления docstring функции."""

        @functools.wraps(func)
        def wrapper(*args, **kwargs):
            # Обновляем docstring перед вызовом функции.
            update_docstring(func)
            return func(*args, **kwargs)

        return wrapper

    def update_docstring(func):
        """Обновляет docstring функции."""
        current_time = time.strftime("%Y-%m-%d %H:%M:%S")

        # Проверяем, существует ли docstring.
        if func.__doc__:
            # Добавляем информацию о времени последнего вызова.
            func.__doc__ += f"\n\nLast called at: {current_time}"
        else:
            func.__doc__ = f"Last called at: {current_time}"


    @autodoc
    def example_function(param1: int, param2: str) -> None:
        """Пример функции.

        Args:
            param1 (int): Первое значение.
            param2 (str): Второе значение.
        """
        print(f"Processing {param1} and {param2}")


    example_function(1, "test")
    print(example_function.__doc__)  # Вывод обновленного docstring
    example_function(2, "another test")
    print(example_function.__doc__)  # Вывод обновленного docstring