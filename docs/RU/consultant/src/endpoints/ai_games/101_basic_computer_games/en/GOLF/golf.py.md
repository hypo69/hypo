# Анализ кода модуля `golf.py`

**Качество кода**
8
- Плюсы
    - Код достаточно хорошо структурирован и понятен, логика игры реализована в соответствии с описанием.
    - Присутствуют комментарии, объясняющие основные шаги кода.
    - Используется try-except для обработки ошибок ввода.
    - Присутствует docstring в начале файла.
- Минусы
    -  Не все комментарии оформлены в формате reStructuredText (RST).
    -  Не используется логирование ошибок с помощью `logger`.
    -  Не хватает docstring для переменных и функций.
    -  Используется стандартный `print` для вывода сообщений, что не очень удобно для дальнейшего расширения функционала.
    - Не все комментарии содержат полное объяснение следующего за ними блока кода.

**Рекомендации по улучшению**
1.  Переписать docstring в формате reStructuredText (RST) с подробным описанием модуля.
2.  Добавить docstring для всех переменных.
3.  Улучшить обработку ошибок, используя `logger.error` вместо `print` и `try-except`.
4.  Переписать комментарии в формате RST, объясняющие каждый блок кода.
5.  Добавить импорт для `logger`.

**Оптимизированный код**

```python
"""
Модуль для игры в гольф
=========================================================================================

Этот модуль реализует текстовую игру в гольф, где игрок пытается достичь лунки за минимальное количество ударов.

Описание игры
-------------

Игрок вводит расстояние удара, программа вычисляет фактическое расстояние удара с учетом случайной ошибки,
и обновляет расстояние до лунки. Цель игры - достичь лунки (расстояние до лунки <= 0) за минимальное количество ударов.

Правила игры:
    1. Игра начинается с расстояния до лунки в 250 ярдов.
    2. Игрок вводит расстояние, на которое он хочет ударить мяч.
    3. Программа генерирует случайную ошибку (от -10 до 10 ярдов) и добавляет ее к введенному расстоянию.
    4. Расстояние до лунки уменьшается на фактическое расстояние удара.
    5. Игра продолжается, пока расстояние до лунки не станет меньше или равно 0.
    6. По завершении игры выводится количество ударов, потребовавшихся для достижения лунки.

Пример использования
--------------------

.. code-block:: python

    import golf

    golf.play_golf()
"""
import random
from src.logger.logger import logger  # Добавлен импорт logger

#: Количество ударов, сделанных игроком
numberOfHits = 0
#: Расстояние до лунки в ярдах
distanceToHole = 250

def play_golf():
    """
    Запускает игру в гольф.

    :return: None
    """
    global numberOfHits, distanceToHole
    # Игровой цикл продолжается, пока расстояние до лунки больше 0
    while distanceToHole > 0:
        # Запрашиваем у пользователя расстояние удара
        try:
            userDistance = float(input("Введите дистанцию удара: "))
        except ValueError as e:
            # Логируем ошибку ввода и переходим к следующей итерации цикла
            logger.error(f"Ошибка ввода: {e}", exc_info=True)
            print("Пожалуйста, введите число.") # Сообщение пользователю сохранено
            continue
        # Генерируем случайную ошибку удара
        error = random.randint(-10, 10)
        # Увеличиваем количество ударов на 1
        numberOfHits += 1
        # Вычисляем фактическое расстояние удара с учетом ошибки
        actualDistance = userDistance + error
        # Обновляем расстояние до лунки
        distanceToHole -= actualDistance

        # Выводим информацию о текущем ударе и оставшемся расстоянии
        print(f"Фактическая дистанция удара: {actualDistance:.2f} ярдов")
        print(f"Расстояние до лунки: {distanceToHole:.2f} ярдов")

    # После выхода из цикла выводим сообщение о победе
    print(f"УРА! Вы добрались до лунки за {numberOfHits} ударов.")

if __name__ == '__main__':
    play_golf()
    
"""
Объяснение кода:
1.  **Импорт модуля random и logger**:
    - `import random`: Импортирует модуль `random`, который используется для генерации случайных чисел.
    - `from src.logger.logger import logger`: Импортирует логгер для обработки ошибок.
2.  **Инициализация переменных**:
    - `numberOfHits = 0`: Инициализирует переменную `numberOfHits` для подсчета количества ударов.
    - `distanceToHole = 250`: Устанавливает начальное расстояние до лунки в 250 ярдов.
3. **Функция `play_golf`**:
    -  Определена функция `play_golf` для управления логикой игры.
4. **Основной игровой цикл `while distanceToHole > 0:`**:
    - Цикл продолжается до тех пор, пока расстояние до лунки (`distanceToHole`) не станет меньше или равно 0.
5.  **Ввод данных**:
    -  `try...except ValueError`: Блок `try-except` обрабатывает возможные ошибки ввода. Если пользователь введет не число, то сообщение об ошибке будет выведено в консоль и в лог.
    -  `userDistance = float(input("Введите дистанцию удара: "))`: Запрашивает у пользователя дистанцию удара и преобразует ее в число с плавающей точкой.
6.  `error = random.randint(-10, 10)`: Генерирует случайное целое число от -10 до 10, представляющее собой ошибку в ударе.
7.  `numberOfHits += 1`: Увеличивает счетчик количества ударов на 1.
8.  `actualDistance = userDistance + error`: Вычисляет фактическую дистанцию удара, добавляя ошибку к введенной пользователем дистанции.
9.  `distanceToHole -= actualDistance`: Обновляет расстояние до лунки, вычитая из него фактическую дистанцию удара.
10. `print(f"Фактическая дистанция удара: {actualDistance:.2f} ярдов")`: Выводит фактическую дистанцию удара с точностью до двух знаков после запятой.
11. `print(f"Расстояние до лунки: {distanceToHole:.2f} ярдов")`: Выводит оставшееся расстояние до лунки с точностью до двух знаков после запятой.
12. **Вывод сообщения о победе**:
    - `print(f"УРА! Вы добрались до лунки за {numberOfHits} ударов.")`: Выводит сообщение о победе с указанием количества ударов, потребовавшихся для достижения лунки.
13. **Условие запуска**:
     - `if __name__ == '__main__':`: Код в этом блоке будет выполнен только при запуске скрипта напрямую.
     - `play_golf()`: Запускает игру в гольф, если скрипт выполняется напрямую.
"""
```