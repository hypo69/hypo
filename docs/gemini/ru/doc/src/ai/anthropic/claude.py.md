# Модуль для работы с Claude API

## Обзор

Модуль `claude.py` предоставляет класс `ClaudeClient` для взаимодействия с API Claude от Anthropic.
Он позволяет генерировать текст, анализировать тональность и переводить текст с одного языка на другой.

## Подробней

Этот модуль облегчает интеграцию с API Claude, предоставляя удобный интерфейс для выполнения различных задач обработки естественного языка. Он включает в себя методы для генерации текста на основе заданного запроса, анализа тональности текста и перевода текста между различными языками.

## Классы

### `ClaudeClient`

**Описание**: Класс `ClaudeClient` является основным интерфейсом для работы с API Claude. Он инкапсулирует логику аутентификации и предоставляет методы для выполнения запросов к API.

**Принцип работы**:
1.  При инициализации класса создается клиент `anthropic.Client` с использованием предоставленного API-ключа.
2.  Методы класса используют этот клиент для отправки запросов к API Claude и обработки ответов.

**Атрибуты**:

*   `client` (anthropic.Client): Объект клиента Anthropic для взаимодействия с API.

**Методы**:

*   `__init__(api_key: str) -> None`: Инициализирует клиент Claude с предоставленным API-ключом.
*   `generate_text(prompt: str, max_tokens_to_sample: int = 100) -> str`: Генерирует текст на основе предоставленного запроса.
*   `analyze_sentiment(text: str) -> str`: Анализирует тональность предоставленного текста.
*   `translate_text(text: str, source_language: str, target_language: str) -> str`: Переводит предоставленный текст с исходного языка на целевой язык.

## Функции

### `__init__`

```python
def __init__(self, api_key: str) -> None:
    """
    Инициализирует клиент Claude с предоставленным API-ключом.

    Args:
        api_key (str): API-ключ для доступа к сервисам Claude.

    Example:
        >>> claude_client = ClaudeClient('your_api_key')
    """
    ...
```

**Назначение**: Инициализирует экземпляр класса `ClaudeClient`.

**Параметры**:

*   `api_key` (str): API-ключ, необходимый для аутентификации и доступа к API Claude.

**Возвращает**:

*   `None`: Функция ничего не возвращает.

**Как работает функция**:

1.  Функция принимает API-ключ в качестве аргумента.
2.  Создает экземпляр класса `anthropic.Client`, используя предоставленный API-ключ.
3.  Сохраняет созданный экземпляр `anthropic.Client` в атрибуте `self.client` класса `ClaudeClient`.

```
API-ключ --> Создание клиента anthropic.Client --> Сохранение клиента в self.client
```

**Примеры**:

```python
claude_client = ClaudeClient('your_api_key')
```

### `generate_text`

```python
def generate_text(self, prompt: str, max_tokens_to_sample: int = 100) -> str:
    """
    Генерирует текст на основе предоставленного запроса.

    Args:
        prompt (str): Запрос для генерации текста.
        max_tokens_to_sample (int, optional): Максимальное количество токенов для генерации. По умолчанию 100.

    Returns:
        str: Сгенерированный текст.

    Example:
        >>> claude_client.generate_text('Write a short story.')
        'A short story about...'
    """
    ...
```

**Назначение**: Генерирует текст, используя API Claude, на основе предоставленного запроса.

**Параметры**:

*   `prompt` (str): Запрос (prompt) для генерации текста.
*   `max_tokens_to_sample` (int, optional): Максимальное количество токенов, которые следует сгенерировать. По умолчанию равен 100.

**Возвращает**:

*   `str`: Сгенерированный текст.

**Как работает функция**:

1.  Функция принимает запрос `prompt` и максимальное количество токенов `max_tokens_to_sample`.
2.  Вызывает метод `completion` объекта `self.client` (экземпляр `anthropic.Client`) для генерации текста на основе запроса.
3.  Извлекает сгенерированный текст из ответа API и возвращает его.

```
Запрос и макс. кол-во токенов --> Вызов anthropic.Client.completion() --> Извлечение сгенерированного текста из ответа --> Возврат сгенерированного текста
```

**Примеры**:

```python
claude_client.generate_text('Write a short story.')
```

### `analyze_sentiment`

```python
def analyze_sentiment(self, text: str) -> str:
    """
    Анализирует тональность предоставленного текста.

    Args:
        text (str): Текст для анализа.

    Returns:
        str: Результат анализа тональности.

    Example:
        >>> claude_client.analyze_sentiment('I am very happy!')
        'Positive'
    """
    ...
```

**Назначение**: Анализирует тональность предоставленного текста, используя API Claude.

**Параметры**:

*   `text` (str): Текст, который необходимо проанализировать на предмет тональности.

**Возвращает**:

*   `str`: Результат анализа тональности (например, "Positive", "Negative", "Neutral").

**Как работает функция**:

1.  Функция принимает текст `text` для анализа.
2.  Формирует запрос к API Claude, включающий текст для анализа тональности.
3.  Вызывает метод `completion` объекта `self.client` для анализа тональности текста.
4.  Извлекает результат анализа тональности из ответа API и возвращает его.

```
Текст для анализа --> Формирование запроса к API --> Вызов anthropic.Client.completion() --> Извлечение результата анализа из ответа --> Возврат результата анализа
```

**Примеры**:

```python
claude_client.analyze_sentiment('I am very happy!')
```

### `translate_text`

```python
def translate_text(self, text: str, source_language: str, target_language: str) -> str:
    """
    Переводит предоставленный текст с исходного языка на целевой язык.

    Args:
        text (str): Текст для перевода.
        source_language (str): Код исходного языка.
        target_language (str): Код целевого языка.

    Returns:
        str: Переведенный текст.

    Example:
        >>> claude_client.translate_text('Hello', 'en', 'es')
        'Hola'
    """
    ...
```

**Назначение**: Переводит текст с одного языка на другой, используя API Claude.

**Параметры**:

*   `text` (str): Текст, который необходимо перевести.
*   `source_language` (str): Код исходного языка (например, "en" для английского).
*   `target_language` (str): Код целевого языка (например, "es" для испанского).

**Возвращает**:

*   `str`: Переведенный текст.

**Как работает функция**:

1.  Функция принимает текст `text`, код исходного языка `source_language` и код целевого языка `target_language`.
2.  Формирует запрос к API Claude, включающий текст для перевода, исходный язык и целевой язык.
3.  Вызывает метод `completion` объекта `self.client` для перевода текста.
4.  Извлекает переведенный текст из ответа API и возвращает его.

```
Текст, исходный язык, целевой язык --> Формирование запроса к API --> Вызов anthropic.Client.completion() --> Извлечение переведенного текста из ответа --> Возврат переведенного текста
```

**Примеры**:

```python
claude_client.translate_text('Hello', 'en', 'es')