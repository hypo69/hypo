# Модуль определения типов данных для g4f

## Обзор

Модуль `typing.py` содержит определения типов, используемые в библиотеке `g4f` (gpt4free). Он включает в себя импорты стандартных модулей, таких как `sys`, `os`, `typing`, а также условный импорт класса `Image` из библиотеки `PIL` (если она установлена). Кроме того, определены пользовательские типы, такие как `SHA256`, `CreateResult`, `AsyncResult`, `Messages`, `Cookies`, `ImageType` и `MediaListType`.  Этот модуль предназначен для обеспечения статической типизации и улучшения читаемости кода.

## Подробнее

Этот модуль играет важную роль в обеспечении надежности и предсказуемости работы библиотеки `g4f`. Определяя типы данных, используемые в различных функциях и классах, модуль позволяет статическим анализаторам кода и средам разработки выявлять потенциальные ошибки на ранних этапах разработки.

## Типы

### `SHA256`

**Описание**: Тип, представляющий SHA256 хеш.

### `CreateResult`

**Описание**: Тип, представляющий собой итератор, возвращающий строки или объекты `ResponseType`.

### `AsyncResult`

**Описание**: Тип, представляющий собой асинхронный итератор, возвращающий строки или объекты `ResponseType`.

### `Messages`

**Описание**: Тип, представляющий собой список словарей, где каждый словарь содержит информацию о сообщении, включая его роль и содержимое.

### `Cookies`

**Описание**: Тип, представляющий собой словарь, содержащий куки (ключ-значение).

### `ImageType`

**Описание**: Тип, представляющий изображение, которое может быть строкой, байтами, файловым объектом, объектом `PIL.Image.Image` или путем к файлу.

### `MediaListType`

**Описание**: Тип, представляющий собой список кортежей, где каждый кортеж содержит изображение и опциональное описание.

## Классы

### `Image`

**Описание**: Класс для работы с изображениями.  Этот класс импортируется из библиотеки `PIL` (Pillow), если она установлена. Если `PIL` не установлена, то создается пустой класс `Image`, чтобы избежать ошибок при работе с типами.

**Методы**:

- Отсутствуют, если `PIL` не установлена.

## Функции

В данном модуле функции отсутствуют, он предназначен для определения типов данных.

## Как работает модуль

1.  **Импорт модулей**:
    *   Импортируются необходимые модули: `sys`, `os`, `typing`.

2.  **Условный импорт `PIL.Image`**:
    *   Попытка импорта класса `Image` из библиотеки `PIL`. Если библиотека не установлена, создается пустой класс `Image`.

3.  **Определение типов**:
    *   Определяются новые типы с использованием `typing.NewType`, `typing.TypedDict`, `typing.Union`, `typing.List`, `typing.Dict`, `typing.Type`, `typing.IO`, `typing.Optional`.

4.  **Экспорт имен**:
    *   Определенные типы и класс `Image` добавляются в список `__all__` для экспорта из модуля.

```
Импорт необходимых модулей
↓
Условный импорт PIL.Image
↓
Определение новых типов
↓
Добавление типов и класса Image в __all__
```

## Примеры

Примеры использования определенных типов:

```python
from typing import List, Dict, Union, Optional

messages: List[Dict[str, Union[str, List[Dict[str, Union[str, Dict[str, str]]]]]]] = [
    {"role": "user", "content": "Hello, how are you?"},
    {"role": "assistant", "content": "I'm doing well, thank you!"}
]

cookies: Dict[str, str] = {
    "session_id": "1234567890",
    "user_id": "user123"
}

image_type: Optional[Union[str, bytes]] = "path/to/image.jpg"