# Модуль для обработки диалогов с использованием g4f.client
==========================================================

Модуль содержит класс `ConversationHandler`, который используется для управления диалогами с AI-моделями через библиотеку `g4f.client`.

Пример использования
----------------------

```python
conversation = ConversationHandler()
conversation.add_user_message("Hello!")
print("Assistant:", conversation.get_response())

conversation.add_user_message("How are you?")
print("Assistant:", conversation.get_response())
```

## Обзор

Модуль предоставляет класс `ConversationHandler` для упрощения взаимодействия с AI-моделями. Он позволяет добавлять сообщения пользователя, получать ответы от модели и сохранять историю диалога.

## Подробнее

Этот модуль облегчает ведение диалогов с AI-моделями, предоставляя удобный интерфейс для добавления сообщений и получения ответов. Класс `ConversationHandler` инкапсулирует клиент `g4f.client`, историю диалога и логику взаимодействия с моделью.

## Классы

### `ConversationHandler`

**Описание**: Класс для управления диалогами с AI-моделями.

**Принцип работы**:
Класс инициализируется с указанием используемой модели AI (по умолчанию "gpt-4"). Он использует клиент `g4f.client` для отправки запросов к модели и хранит историю диалога в списке `conversation_history`.

**Методы**:
- `__init__(self, model="gpt-4")`: Инициализирует обработчик диалога с указанной моделью.
- `add_user_message(self, content)`: Добавляет сообщение пользователя в историю диалога.
- `get_response(self)`: Отправляет историю диалога модели и возвращает ответ ассистента.

#### `__init__`

```python
def __init__(self, model="gpt-4"):
    """
    Инициализирует обработчик диалога с указанной моделью.

    Args:
        model (str): Название используемой AI-модели. По умолчанию "gpt-4".

    """
    ...
```

**Параметры**:
- `model` (str): Название используемой AI-модели. По умолчанию "gpt-4".

**Как работает функция**:
1. Инициализируется клиент `g4f.client.Client`.
2. Устанавливается модель AI, используемая для диалога.
3. Инициализируется пустой список для хранения истории диалога.

#### `add_user_message`

```python
def add_user_message(self, content):
    """
    Добавляет сообщение пользователя в историю диалога.

    Args:
        content (str): Сообщение пользователя.

    """
    ...
```

**Параметры**:
- `content` (str): Сообщение пользователя.

**Как работает функция**:
1. Создается словарь с ролью "user" и содержимым сообщения.
2. Этот словарь добавляется в список `conversation_history`.

#### `get_response`

```python
def get_response(self):
    """
    Отправляет историю диалога модели и возвращает ответ ассистента.

    Returns:
        str: Ответ ассистента.

    """
    ...
```

**Как работает функция**:
1. Отправляет запрос к AI-модели через `client.chat.completions.create` с использованием текущей истории диалога.
2. Извлекает ответ ассистента из полученного результата.
3. Добавляет ответ ассистента в историю диалога.
4. Возвращает содержимое ответа ассистента.

## Примеры

```python
conversation = ConversationHandler()
conversation.add_user_message("Hello!")
print("Assistant:", conversation.get_response())

conversation.add_user_message("How are you?")
print("Assistant:", conversation.get_response())
```

В этом примере создается экземпляр `ConversationHandler`, добавляются сообщения пользователя и печатаются ответы ассистента.