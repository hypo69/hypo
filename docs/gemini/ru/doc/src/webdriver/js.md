# Модуль `hypotez/src/webdriver/js.py`

## Обзор

Модуль `js.py` предоставляет функции на языке JavaScript для взаимодействия с веб-страницей, расширяя возможности Selenium WebDriver.  Он включает функции для отображения невидимых элементов DOM, получения метаданных страницы (например, состояние загрузки, referrer, язык) и управления фокусом браузера.

## Оглавление

* [Модуль `js.py`](#модуль-js-py)
* [Класс `JavaScript`](#класс-javascript)
    * [`unhide_DOM_element`](#unhide-dom-element)
    * [`ready_state`](#ready-state)
    * [`window_focus`](#window-focus)
    * [`get_referrer`](#get-referrer)
    * [`get_page_lang`](#get-page-lang)


## Классы

### `JavaScript`

**Описание**: Класс `JavaScript` предоставляет методы для взаимодействия с веб-страницей через JavaScript.

**Конструктор**:

#### `__init__(self, driver: WebDriver)`

**Описание**: Инициализирует объект `JavaScript`.

**Параметры**:

- `driver` (WebDriver): Экземпляр Selenium WebDriver для выполнения JavaScript кода.


**Методы**:

#### `unhide_DOM_element(self, element: WebElement) -> bool`

**Описание**: Делает невидимый элемент DOM видимым, изменяя его свойства стиля.

**Параметры**:

- `element` (WebElement): Объект WebElement, который нужно сделать видимым.

**Возвращает**:

- `bool`: `True`, если скрипт выполнился успешно, `False` в противном случае.

**Обрабатываемые исключения**:

- `Exception`:  Возникает при ошибке выполнения JavaScript кода.  Ошибка записывается в лог с использованием `logger.error`.


#### `ready_state(self) -> str`

**Описание**: Возвращает текущее состояние загрузки документа.

**Возвращает**:

- `str`: `'loading'`, если документ еще загружается, `'complete'`, если загрузка завершена.

**Обрабатываемые исключения**:

- `Exception`: Возникает при ошибке получения состояния загрузки. Ошибка записывается в лог с использованием `logger.error`.


#### `window_focus(self) -> None`

**Описание**: Устанавливает фокус на окно браузера с помощью JavaScript.  Попытка перевести окно браузера в передний план.

**Обрабатываемые исключения**:

- `Exception`: Возникает при ошибке выполнения JavaScript кода. Ошибка записывается в лог с использованием `logger.error`.



#### `get_referrer(self) -> str`

**Описание**: Возвращает URL referrer текущего документа.

**Возвращает**:

- `str`: URL referrer или пустая строка, если значение недоступно.

**Обрабатываемые исключения**:

- `Exception`: Возникает при ошибке получения значения `document.referrer`. Ошибка записывается в лог с использованием `logger.error`.


#### `get_page_lang(self) -> str`

**Описание**: Возвращает язык текущей страницы.

**Возвращает**:

- `str`: Код языка страницы или пустая строка, если значение недоступно.

**Обрабатываемые исключения**:

- `Exception`: Возникает при ошибке получения значения `document.documentElement.lang`. Ошибка записывается в лог с использованием `logger.error`.