Как использовать функцию validate_person
=========================================================================================

Описание
-------------------------
Функция `validate_person` предназначена для валидации экземпляра класса `TinyPerson` с помощью LLM OpenAI. Она задаёт серию вопросов экземпляру `TinyPerson`, чтобы оценить его ответы с помощью OpenAI LLM.  Функция возвращает числовое значение - оценку доверия к валидации. Если валидация не удалась, возвращает None.

Шаги выполнения
-------------------------
1. **Инициализация переменных:** Создаёт пустой список `current_messages` для хранения диалога с LLM. Устанавливает значение для `max_content_length`.
2. **Генерация запроса:**  Загружает шаблон запроса `check_person.mustache` и использует `chevron` для его рендеринга, подставляя значения из `expectations`.  Также генерирует пользовательский запрос с описанием заданий и характеристик `person` (мини-биография и спецификация агента).
3. **Отправка запросов к LLM:** Добавляет системный и пользовательский запросы в `current_messages` и отправляет их к OpenAI LLM с помощью `openai_utils.client().send_message()`.
4. **Диалог с LLM:**  В цикле отправляет вопросы от LLM к `person`.
   - Извлекает вопросы из ответа LLM.
   - Отправляет вопросы `person` с помощью `person.listen_and_act()`.
   - Получает ответы от `person`.
   - Добавляет ответы в `current_messages`.
   - Отправляет обновлённые `current_messages` к LLM, чтобы получить следующий ответ.
   - Проверяет, содержит ли ответ метку завершения.
5. **Обработка ответа LLM:** Если получен ответ, извлекает JSON-контент с оценкой и обоснованием.
   - Извлекает значение `score` и `justification` из JSON.
   - Выводит информацию об оценке и обосновании в лог.
   - Возвращает оценку и обоснование.
6. **Обработка ошибки:** Если ответ от LLM отсутствует или содержит неверный формат, функция возвращает None и None.


Пример использования
-------------------------
.. code-block:: python

    from tinytroupe.validation import TinyPersonValidator
    from tinytroupe.agent import TinyPerson

    # ... (Пример создания объекта TinyPerson, например, person = TinyPerson(...))

    validation_result = TinyPersonValidator.validate_person(person, expectations="Высокая обучаемость", max_content_length=512)

    if validation_result:
        score, justification = validation_result
        print(f"Оценка валидации: {score:.2f}")
        print(f"Обоснование: {justification}")
    else:
        print("Ошибка валидации.")