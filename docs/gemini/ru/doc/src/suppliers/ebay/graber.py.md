# Модуль `src.suppliers.ebay.graber`

## Обзор

Модуль `src.suppliers.ebay.graber` предназначен для сбора значений полей на странице товара `ebay.com`. Он содержит класс `Graber`, который наследует функциональность сбора данных от родительского класса `Graber` (Grbr). Модуль предоставляет механизм для переопределения стандартных методов обработки полей, если требуется нестандартная обработка. Также, модуль позволяет выполнять предварительные действия перед отправкой запроса к веб-драйверу через декораторы.

## Подробней

Модуль предназначен для извлечения информации о товарах с сайта `ebay.com`. Он использует веб-драйвер для взаимодействия с веб-страницей и извлекает необходимые данные. Класс `Graber` содержит методы для обработки конкретных полей товара, и эти методы могут быть переопределены для адаптации к изменениям в структуре веб-страницы.

Модуль использует декораторы для выполнения предварительных действий, таких как закрытие всплывающих окон, перед выполнением основной логики сбора данных.

## Классы

### `Graber`

**Описание**: Класс `Graber` предназначен для сбора данных о товарах с сайта `ebay.com`. Он наследует функциональность от класса `Graber` (Grbr) и может переопределять методы для обработки конкретных полей товара.

**Как работает класс**:

1.  **Инициализация**: При инициализации класса устанавливается префикс поставщика (`ebay`) и вызывается конструктор родительского класса.
2.  **Сбор данных**: Класс использует методы для извлечения значений полей товара с веб-страницы. Эти методы могут быть переопределены для адаптации к изменениям в структуре веб-страницы.
3.  **Декораторы**: Класс использует декораторы для выполнения предварительных действий, таких как закрытие всплывающих окон, перед выполнением основной логики сбора данных.

**Методы**:

*   `__init__`: Инициализация класса.

    *   **Параметры**:
        *   `driver` (`Driver`): Экземпляр веб-драйвера для взаимодействия с веб-страницей.
        *   `lang_index` (int): Индекс языка.

    *   **Как работает функция**:

        1.  Устанавливает префикс поставщика `self.supplier_prefix` в значение `'ebay'`.
        2.  Вызывает конструктор родительского класса `super().__init__(supplier_prefix=self.supplier_prefix, driver=driver, lang_index=lang_index)` для инициализации общих параметров.
        3.  Устанавливает `Context.locator_for_decorator = None`, чтобы отключить выполнение декоратора `@close_pop_up` по умолчанию. Если установить значение, то оно будет выполнено в декораторе.

## Функции

### `close_pop_up`

```python
def close_pop_up(value: Any = None) -> Callable:
    """Создает декоратор для закрытия всплывающих окон перед выполнением основной логики функции.

    Args:
        value (Any): Дополнительное значение для декоратора.

    Returns:
        Callable: Декоратор, оборачивающий функцию.
    """
```

**Назначение**: Функция `close_pop_up` создает декоратор, который закрывает всплывающие окна перед выполнением основной логики декорируемой функции.

**Параметры**:

*   `value` (`Any`, optional): Дополнительное значение для декоратора. По умолчанию `None`.

**Возвращает**:

*   `Callable`: Декоратор, который оборачивает функцию.

**Как работает функция**:

1.  Функция `close_pop_up` принимает необязательный параметр `value`.
2.  Она определяет внутреннюю функцию `decorator`, которая принимает функцию `func` в качестве аргумента.
3.  Внутри `decorator` определяется функция `wrapper`, которая будет выполняться вместо оригинальной функции `func`.
4.  В `wrapper` происходит попытка закрытия всплывающего окна с использованием `Context.driver.execute_locator(Context.locator.close_pop_up)`.
5.  Если возникает исключение `ExecuteLocatorException`, оно логируется с уровнем `DEBUG`.
6.  После этого выполняется оригинальная функция `func` и возвращается её результат.

### `__init__`

```python
def __init__(self, driver: Driver, lang_index):
    """Инициализация класса сбора полей товара."""
```

**Назначение**: Метод `__init__` инициализирует экземпляр класса `Graber`.

**Параметры**:

*   `driver` (`Driver`): Экземпляр веб-драйвера для взаимодействия с веб-страницей.
*   `lang_index` (int): Индекс языка.

**Как работает функция**:

1.  Устанавливает префикс поставщика `self.supplier_prefix` в значение `'ebay'`.
2.  Вызывает конструктор родительского класса `super().__init__(supplier_prefix=self.supplier_prefix, driver=driver, lang_index=lang_index)` для инициализации общих параметров.
3.  Устанавливает `Context.locator_for_decorator = None`, чтобы отключить выполнение декоратора `@close_pop_up` по умолчанию. Если установить значение, то оно будет выполнено в декораторе.