# Модуль для работы с языками в PrestaShop (`language.py`)

## Обзор

Модуль `language.py` предоставляет интерфейс для взаимодействия с сущностью `language` в CMS PrestaShop через API PrestaShop. Он включает класс `PrestaLanguage`, который позволяет выполнять различные операции с языками, такие как добавление, удаление, обновление и получение информации о языках в магазине PrestaShop.

## Подробней

Этот модуль предназначен для управления языковыми настройками в PrestaShop. Он обеспечивает удобный способ взаимодействия с API PrestaShop для выполнения операций, связанных с языками. Класс `PrestaLanguage` наследуется от класса `PrestaShop`, который предоставляет базовые методы для работы с API PrestaShop. Модуль использует библиотеку `logger` для логирования ошибок и отладочной информации.

## Классы

### `PrestaLanguage`

**Описание**: Класс `PrestaLanguage` отвечает за настройки языков магазина PrestaShop.

**Как работает класс**:
1.  **Инициализация**: При инициализации класса происходит настройка соединения с API PrestaShop.
2.  **Получение схемы языков**: Метод `get_languages_schema` извлекает словарь актуальных языков для данного магазина.
3.  **Получение имени языка по индексу**: Метод `get_lang_name_by_index` извлекает ISO код языка из магазина PrestaShop по его индексу.
4.  **Добавление языка**: Метод `add_language_PrestaShop` добавляет новый язык в PrestaShop.
5.  **Удаление языка**: Метод `delete_language_PrestaShop` удаляет язык из PrestaShop по его ID.
6.  **Обновление языка**: Метод `update_language_PrestaShop` обновляет информацию о языке в PrestaShop.
7.  **Получение деталей языка**: Метод `get_language_details_PrestaShop` получает детальную информацию о языке из PrestaShop по его ID.

**Методы**:

*   `__init__(self, *args, **kwards)`:
    *   **Описание**: Конструктор класса `PrestaLanguage`.
    *   **Как работает метод**: Инициализирует экземпляр класса `PrestaLanguage`. Принимает произвольные аргументы и именованные аргументы. Важно помнить, что у каждого магазина своя нумерация языков. Определяет языки в базах данных в определенном порядке (`en` - 1, `he` - 2, `ru` - 3).
    *   **Параметры**:
        *   `*args`: Произвольные аргументы.
        *   `**kwards`: Произвольные именованные аргументы.

*   `get_lang_name_by_index(self, lang_index: int | str) -> str`:
    *   **Описание**: Функция извлекает ISO код языка из магазина `Prestashop`.
    *   **Как работает метод**:
        1.  Вызывает метод `get` родительского класса `PrestaShop` для получения информации о языке по его индексу.
        2.  В случае ошибки логирует её с помощью `logger.error` и возвращает пустую строку.
    *   **Параметры**:
        *   `lang_index` (int | str): Индекс языка в таблице PrestaShop.
    *   **Возвращает**:
        *   `str`: Имя языка ISO по его индексу в таблице PrestaShop.

*   `get_languages_schema(self) -> Optional[dict]`:
    *   **Описание**: Функция извлекает словарь актуальных языков для данного магазина.
    *   **Как работает метод**:
        1.  Вызывает метод `_exec` для выполнения запроса к API PrestaShop для получения схемы языков.
        2.  В случае успеха возвращает полученный словарь.
        3.  В случае ошибки логирует её с помощью `logger.error` и возвращает `None`.
    *   **Возвращает**:
        *   `Optional[dict]`: Language schema or `None` on failure.

## Функции

### `main()`

**Описание**: Функция `main` является примером использования класса `PrestaLanguage`.

**Как работает функция**:
1.  Создает экземпляр класса `PrestaLanguage`.
2.  Получает схему языков с помощью метода `get_languages_schema`.
3.  Выводит полученную схему на экран с использованием функции `print`.

```python
async def main():
    """
    Example:
        >>> asyncio.run(main())
    """
    ...
    lang_class = PrestaLanguage()
    languagas_schema = await lang_class.get_languages_schema()
    print(languagas_schema)