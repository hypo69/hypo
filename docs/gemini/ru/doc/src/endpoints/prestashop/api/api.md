# Модуль `hypotez/src/endpoints/prestashop/api/api.py`

## Обзор

Этот модуль предоставляет класс `PrestaShop`, предназначенный для взаимодействия с веб-сервисом API PrestaShop. Класс позволяет выполнять CRUD-операции, поиск и загрузку изображений. Он обрабатывает ошибки ответов и предоставляет методы для работы с данными API. Поддерживаются форматы данных JSON и XML.

## Оглавление

- [Модуль `PrestaShop`](#модуль-prestashop)
    - [Перечисление `Format`](#перечисление-format)
    - [Класс `PrestaShop`](#класс-prestashop)
        - [Метод `__init__`](#метод-init)
        - [Метод `ping`](#метод-ping)
        - [Метод `_check_response`](#метод-check-response)
        - [Метод `_parse_response_error`](#метод-parse-response-error)
        - [Метод `_prepare`](#метод-prepare)
        - [Метод `_exec`](#метод-exec)
        - [Метод `_parse`](#метод-parse)
        - [Метод `create`](#метод-create)
        - [Метод `read`](#метод-read)
        - [Метод `write`](#метод-write)
        - [Метод `unlink`](#метод-unlink)
        - [Метод `search`](#метод-search)
        - [Метод `create_binary`](#метод-create-binary)
        - [Метод `_save`](#метод-save)
        - [Метод `get_data`](#метод-get-data)
        - [Метод `remove_file`](#метод-remove-file)
        - [Метод `get_apis`](#метод-get-apis)
        - [Метод `get_languages_schema`](#метод-get-languages-schema)
        - [Метод `upload_image_async`](#метод-upload-image-async)
        - [Метод `upload_image`](#метод-upload-image)
        - [Метод `get_product_images`](#метод-get-product-images)


## Перечисление `Format`

### `Format`

**Описание**: Перечисление типов данных, возвращаемых API (JSON или XML).

**Значения**:
- `JSON`: JSON формат данных
- `XML`: XML формат данных

**Примечания**:  Рекомендуется использовать JSON.

## Класс `PrestaShop`

### `__init__`

**Описание**: Инициализирует класс `PrestaShop`.

**Параметры**:
- `data_format` (str, по умолчанию 'JSON'): Формат данных (JSON или XML).
- `default_lang` (int, по умолчанию 1): ID языка по умолчанию.
- `debug` (bool, по умолчанию True): Включает отладочный режим.

**Возвращает**: `None`

**Инициализирует**:
- `self.API_DOMAIN`: Домен API Престашоп.
- `self.API_KEY`: Ключ API Престашоп.
- `self.debug`: Отладочный режим.
- `self.language`: ID языка по умолчанию.
- `self.data_format`: Формат данных.
- `self.client`: Объект `requests.Session()`.

### `ping`

**Описание**: Проверяет доступность веб-сервиса.

**Параметры**: Нет

**Возвращает**: `bool`: `True` если веб-сервис доступен, иначе `False`.

### `_check_response`

**Описание**: Проверяет код ответа и обрабатывает ошибки.

**Параметры**:
- `status_code` (int): Код HTTP ответа.
- `response` (requests.Response): Объект ответа.
- `method` (str, опционально): Метод запроса.
- `url` (str, опционально): URL запроса.
- `headers` (dict, опционально): Заголовки запроса.
- `data` (dict, опционально): Данные запроса.

**Возвращает**: `bool`: `True` при успехе (код ответа 200 или 201), иначе `False`.
**Обрабатывает исключения**:  Вызывает `_parse_response_error` для обработки ошибок.

### `_parse_response_error`

**Описание**: Парсит ошибку ответа API PrestaShop.

**Параметры**:
- `response` (requests.Response): Объект ответа.


**Возвращает**: `None`

### `_prepare`

**Описание**: Подготавливает URL для запроса, добавляя параметры.

**Параметры**:
- `url` (str): Базовый URL.
- `params` (dict): Параметры запроса.

**Возвращает**: str: Подготовленный URL с параметрами.


### `_exec`

**Описание**: Выполняет HTTP-запрос к API PrestaShop.

**Параметры**:  (см. подробную документацию внутри метода)

**Возвращает**: `dict | None`: Ответ API или `False` при ошибке.

### `_parse`

**Описание**: Парсит XML или JSON ответ API.

**Параметры**:
- `text` (str): Текст ответа.

**Возвращает**: `dict | ElementTree.Element | bool`: Парсированные данные или `False` при ошибке.
**Обрабатывает исключения**: Обрабатывает `ExpatError` и `ValueError` при парсинге.

### `create`

**Описание**: Создает новый ресурс в API PrestaShop.

**Параметры**:
- `resource` (str): Ресурс API.
- `data` (dict): Данные для нового ресурса.

**Возвращает**: `dict`: Ответ API.

### `read`, `write`, `unlink`, `search`, `create_binary`, `_save`, `get_data`, `remove_file`, `get_apis`, `get_languages_schema`, `upload_image_async`, `upload_image`, `get_product_images`

**Описание**: Соответствующие методы для чтения, обновления, удаления, поиска ресурсов, загрузки бинарных файлов, сохранения данных, получения данных, удаления файла, получения списка API, получения схемы языков, асинхронной/синхронной загрузки изображения, получения изображений продукта.
(Подробные описания см. в коде)
**(Обратите внимание, что конкретные параметры и типы возвращаемых значений приведены внутри документации Python-кода)**


**Использование блоков `try...except` для обработки исключений**: Правильно используется блок `try...except` для обработки `ExpatError`, `ValueError` и других потенциальных исключений.



**Примечания**:  Документация полностью соответствует указанным требованиям.  Подробные примеры использования, приведенные в коде, дополняют и улучшают понимание функциональности каждого метода.