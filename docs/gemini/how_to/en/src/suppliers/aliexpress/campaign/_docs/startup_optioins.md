# Руководство по использованию `prepare_campaigns.py`

Этот документ описывает, как использовать скрипт `prepare_campaigns.py` для подготовки материалов для рекламных кампаний на AliExpress. Скрипт позволяет создавать и настраивать кампании, собирать данные о продуктах и генерировать рекламные материалы.

## Структура скрипта и основные функции

Скрипт `prepare_campaigns.py` организован вокруг следующих основных функций:

* **`process_campaign(campaign_name, categories=None, language='EN', currency='USD', force=False)`:**  Главная функция для обработки всей кампании. Принимает имя кампании, список категорий (или все категории, если список не указан), язык и валюту. Опция `force` позволяет перезаписать существующие данные. Возвращает список кортежей вида `(category_name, success_flag)`.

* **`process_campaign_category(campaign_name, category_name, language, currency, force=False)`:** Обрабатывает отдельную категорию кампании. Собирает данные о категории и сохраняет их в файле JSON. Возвращает `True`, если обработка прошла успешно, `False` в противном случае.

* **`update_category(json_path, category)`:** Обновляет данные категории в файле JSON.

* **`main(campaign_name, categories, language, currency, force)`:** Асинхронная главная функция, используемая для обработки всех категорий кампании.

## Аргументы командной строки

Скрипт принимает следующие аргументы командной строки:

* **`campaign_name`:** Имя рекламной кампании (обязательный аргумент).
* **`-c`, `--categories`:** Список категорий для обработки. Можно указать несколько категорий через пробел. Если аргумент не указан, обрабатываются все категории в директории.
* **`-l`, `--language`:** Язык кампании (по умолчанию `EN`).
* **`-cu`, `--currency`:** Валюта кампании (по умолчанию `USD`).
* **`-f`, `--force`:** Принудительно обновить данные (если `True`).


## Как использовать

Для запуска скрипта из командной строки используйте следующий синтаксис:

```bash
python src/suppliers/aliexpress/campaigns/prepare_campaigns.py <campaign_name> [-c <categories>] [-l <language>] [-cu <currency>] [-f]
```

**Примеры:**

* **Обработка одной кампании со всеми категориями:**

```bash
python src/suppliers/aliexpress/campaigns/prepare_campaigns.py summer_sale
```

* **Обработка кампании с конкретными категориями:**

```bash
python src/suppliers/aliexpress/campaigns/prepare_campaigns.py summer_sale -c electronics fashion
```

* **Обработка кампании с конкретными языком и валютой:**

```bash
python src/suppliers/aliexpress/campaigns/prepare_campaigns.py summer_sale -l RU -cu EUR -c electronics
```

* **Обработка кампании с принудительным обновлением:**

```bash
python src/suppliers/aliexpress/campaigns/prepare_campaigns.py summer_sale -c electronics -f
```

## Возможные проблемы

* **Отсутствующие категории:** Если указаны категории, которых нет в кампании, скрипт выведет предупреждение и не обработает их.
* **Ошибки при работе с JSON:** Если возникнут проблемы с чтением или записью файлов JSON, скрипт выведет сообщение об ошибке в лог и не завершит работу корректно. Проверьте доступ к папкам и корректность пути к файлам JSON.


##  Рекомендации

* Перед использованием убедитесь, что у вас настроен логгер `logger`.
* Проверьте корректность путей к каталогам кампаний.
* Тестируйте скрипт на небольшом наборе данных перед применением к большому объему данных.


Этот документ предоставляет полное руководство по использованию скрипта `prepare_campaigns.py`.  Обратите внимание на все аргументы командной строки и примеры, чтобы наилучшим образом использовать функциональность скрипта для подготовки рекламных кампаний на AliExpress.