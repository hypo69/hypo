## –ê–ù–ê–õ–ò–ó –ö–û–î–ê:

### 1. <–∞–ª–≥–æ—Ä–∏—Ç–º>

**–ë–ª–æ–∫-—Å—Ö–µ–º–∞:**

1.  **–ù–∞—á–∞–ª–æ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É `/start`.
    *   –ü—Ä–∏–º–µ—Ä: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç –≤ —á–∞—Ç `/start`.
2.  **`command_start_handler`:** –ë–æ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –Ω–∞—á–∞—Ç—å –ø–æ–∏—Å–∫ —Ñ–∏–ª—å–º–∞.
    *   –ü—Ä–∏–º–µ—Ä: –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, [–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è] üòé" –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ù–∞–π—Ç–∏ —Ñ–∏–ª—å–º".
3.  **–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–ù–∞–π—Ç–∏ —Ñ–∏–ª—å–º":** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ù–∞–π—Ç–∏ —Ñ–∏–ª—å–º".
    *   –ü—Ä–∏–º–µ—Ä: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ù–∞–π—Ç–∏ —Ñ–∏–ª—å–º".
4.  **`movie_handler`:** –ë–æ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `Params.type_movie` –∏ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç, —á—Ç–æ –∏—â–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (—Ñ–∏–ª—å–º –∏–ª–∏ —Å–µ—Ä–∏–∞–ª).
    *   –ü—Ä–∏–º–µ—Ä: –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç: "–£–∫–∞–∂–∏—Ç–µ —Ñ–∏–ª—å–º –∏–ª–∏ —Å–µ—Ä–∏–∞–ª –≤—ã –∏—â–∏—Ç–µ" –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ "–§–∏–ª—å–º" –∏ "–°–µ—Ä–∏–∞–ª".
5.  **–í—ã–±–æ—Ä —Ç–∏–ø–∞ —Ñ–∏–ª—å–º–∞/—Å–µ—Ä–∏–∞–ª–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç "–§–∏–ª—å–º" –∏–ª–∏ "–°–µ—Ä–∏–∞–ª".
    *   –ü—Ä–∏–º–µ—Ä: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–§–∏–ª—å–º".
6.  **`film_handler` / `series_handler`:** –ë–æ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—ã–±–æ—Ä, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–∏–ø –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (`film` –∏–ª–∏ `series`) –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `Params.name`, –∑–∞–ø—Ä–∞—à–∏–≤–∞—è –Ω–∞–∑–≤–∞–Ω–∏–µ.
    *   –ü—Ä–∏–º–µ—Ä: –ë–æ—Ç —É–¥–∞–ª—è–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –æ—Ç–≤–µ—á–∞–µ—Ç: "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ".
7.  **–í–≤–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏—è:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –∏–ª–∏ —Å–µ—Ä–∏–∞–ª–∞.
    *   –ü—Ä–∏–º–µ—Ä: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç "–ú–∞—Ç—Ä–∏—Ü–∞".
8.  **`name_handler`:** –ë–æ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è (`name`, `type_movie`), –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `search_query` –¥–ª—è –ø–æ–∏—Å–∫–∞.
    *   –ü—Ä–∏–º–µ—Ä: –ë–æ—Ç –≤—ã–∑—ã–≤–∞–µ—Ç `search_query("–ú–∞—Ç—Ä–∏—Ü–∞", "film")`.
9.  **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞:**
    *   **–ï—Å–ª–∏ —Ñ–∏–ª—å–º/—Å–µ—Ä–∏–∞–ª –Ω–∞–π–¥–µ–Ω:** –ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ, —Ç–∏–ø –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∏–ª—å–º–µ/—Å–µ—Ä–∏–∞–ª–µ (–æ–ø–∏—Å–∞–Ω–∏–µ, —Å—Å—ã–ª–∫–∞).
        *   –ü—Ä–∏–º–µ—Ä: –ë–æ—Ç –≤—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º "–ú–∞—Ç—Ä–∏—Ü–∞", –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏ —Å—Å—ã–ª–∫–æ–π.
    *   **–ï—Å–ª–∏ —Ñ–∏–ª—å–º/—Å–µ—Ä–∏–∞–ª –Ω–µ –Ω–∞–π–¥–µ–Ω:** –ë–æ—Ç —Å–æ–æ–±—â–∞–µ—Ç, —á—Ç–æ —Ñ–∏–ª—å–º/—Å–µ—Ä–∏–∞–ª –Ω–µ –Ω–∞–π–¥–µ–Ω.
        *   –ü—Ä–∏–º–µ—Ä: –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç: "–í–∞—à –§–∏–ª—å–º –Ω–µ –Ω–∞–π–¥–µ–Ω üò¢".
10. **–ó–∞–ø—Ä–æ—Å –Ω–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞:** –ë–æ—Ç –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–∞–π—Ç–∏ –µ—â–µ –æ–¥–∏–Ω —Ñ–∏–ª—å–º –∏ –æ—á–∏—â–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
    *   –ü—Ä–∏–º–µ—Ä: –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç: "–ù–∞–π—Ç–∏ –Ω–æ–≤—ã–π —Ñ–∏–ª—å–º" –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ù–∞–π—Ç–∏ —Ñ–∏–ª—å–º".
11. **–ö–æ–Ω–µ—Ü:** –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ –Ω–æ–≤—ã–º –∑–∞–ø—Ä–æ—Å–∞–º.

**–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**

*   `Message` –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -> `command_start_handler` -> `Message` –±–æ—Ç—É.
*   `CallbackQuery` –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -> `movie_handler` -> `state` (—Å–æ—Å—Ç–æ—è–Ω–∏–µ FSM).
*   `CallbackQuery` –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -> `film_handler`/`series_handler` -> `state` (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è FSM) ->  `Message` –±–æ—Ç—É.
*   `Message` –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -> `name_handler` -> `state` (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è FSM) -> `search_query` -> —Ä–µ–∑—É–ª—å—Ç–∞—Ç ->  `Message` –±–æ—Ç—É.

### 2. <mermaid>

```mermaid
flowchart TD
    Start[Start: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç /start] --> CommandStartHandler[command_start_handler <br> –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∫–Ω–æ–ø–∫–∞ '–ù–∞–π—Ç–∏ —Ñ–∏–ª—å–º']
    CommandStartHandler --> FindMovieButton[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç '–ù–∞–π—Ç–∏ —Ñ–∏–ª—å–º']
    FindMovieButton --> MovieHandler[movie_handler <br> –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è 'type_movie' –∏ –∑–∞–ø—Ä–æ—Å —Ç–∏–ø–∞]
    MovieHandler --> ChoiceType[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–∏–ø (—Ñ–∏–ª—å–º/—Å–µ—Ä–∏–∞–ª)]
    ChoiceType -- "–í—ã–±–æ—Ä '–°–µ—Ä–∏–∞–ª'" --> SeriesHandler[series_handler <br>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞ 'series' –∏ –∑–∞–ø—Ä–æ—Å –Ω–∞–∑–≤–∞–Ω–∏—è]
    ChoiceType -- "–í—ã–±–æ—Ä '–§–∏–ª—å–º'" --> FilmHandler[film_handler <br>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞ 'film' –∏ –∑–∞–ø—Ä–æ—Å –Ω–∞–∑–≤–∞–Ω–∏—è]
    SeriesHandler --> InputName[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ]
    FilmHandler --> InputName
    InputName --> NameHandler[name_handler <br>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞ 'name' –∏ –ø–æ–∏—Å–∫]
    NameHandler --> SearchQuery[search_query <br>–ü–æ–∏—Å–∫ —Ñ–∏–ª—å–º–∞/—Å–µ—Ä–∏–∞–ª–∞]
    SearchQuery -- "–ù–∞–π–¥–µ–Ω–æ" --> FoundMessage[–í—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–µ/—Å–µ—Ä–∏–∞–ª–µ]
    SearchQuery -- "–ù–µ –Ω–∞–π–¥–µ–Ω–æ" --> NotFoundMessage[–°–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ–Ω–∞–π–¥–µ–Ω–Ω–æ–º —Ñ–∏–ª—å–º–µ/—Å–µ—Ä–∏–∞–ª–µ]
    FoundMessage --> NewSearch[–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏ —Å–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è]
    NotFoundMessage --> NewSearch
    NewSearch --> Finish[–ì–æ—Ç–æ–≤ –∫ –Ω–æ–≤—ã–º –∑–∞–ø—Ä–æ—Å–∞–º]
    Finish --> Start
    
    style Start fill:#f9f,stroke:#333,stroke-width:2px
    style Finish fill:#ccf,stroke:#333,stroke-width:2px
    
```
**–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**

*   `aiogram.Router`: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (—Å–æ–æ–±—â–µ–Ω–∏—è, callback-–∑–∞–ø—Ä–æ—Å—ã) –º–µ–∂–¥—É –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏.
*   `aiogram.filters.CommandStart`: –§–∏–ª—å—Ç—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏—è, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –∫–æ–º–∞–Ω–¥—É `/start`.
*   `aiogram.fsm.context.FSMContext`: –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∫–æ–Ω–µ—á–Ω–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∞ (FSM). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
*   `aiogram.fsm.state.StatesGroup, State`: –ö–ª–∞—Å—Å—ã –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π FSM. `StatesGroup` —Å–æ–∑–¥–∞–µ—Ç –≥—Ä—É–ø–ø—É —Å–æ—Å—Ç–æ—è–Ω–∏–π, –∞ `State` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ —ç—Ç–æ–π –≥—Ä—É–ø–ø–µ.
*   `aiogram.types.Message`: –û–±—ä–µ–∫—Ç —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ—Ç Telegram.
*   `aiogram.types.CallbackQuery`: –û–±—ä–µ–∫—Ç callback-–∑–∞–ø—Ä–æ—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ—Ç Telegram, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ –∫–Ω–æ–ø–∫—É.
*   `apps.keyboard as kb`: –ú–æ–¥—É–ª—å, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (–∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏) –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –±–æ—Ç–∞.
*   `apps.search.search_query`: –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ñ–∏–ª—å–º–æ–≤ –∏–ª–∏ —Å–µ—Ä–∏–∞–ª–æ–≤ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ —Ç–∏–ø—É.

### 3. <–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ>

**–ò–º–ø–æ—Ä—Ç—ã:**

*   `from aiogram import Router, F`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∫–ª–∞—Å—Å `Router` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∏ `F` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤.
*   `from aiogram.filters import CommandStart`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ñ–∏–ª—å—Ç—Ä `CommandStart` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥—ã `/start`.
*   `from aiogram.fsm.context import FSMContext`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `FSMContext` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
*   `from aiogram.fsm.state import StatesGroup, State`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `StatesGroup` –∏ `State` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω–µ—á–Ω–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∞ (FSM).
*   `from aiogram.types import Message, CallbackQuery`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ç–∏–ø—ã `Message` –∏ `CallbackQuery` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ callback-–∑–∞–ø—Ä–æ—Å–æ–≤.
*   `import apps.keyboard as kb`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–æ–¥—É–ª—å `apps.keyboard` –ø–æ–¥ –ø—Å–µ–≤–¥–æ–Ω–∏–º–æ–º `kb` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞–º–∏.
*   `from apps.search import search_query`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `search_query` –∏–∑ –º–æ–¥—É–ª—è `apps.search`.

**–ö–ª–∞—Å—Å—ã:**

*   `Params(StatesGroup)`: –ö–ª–∞—Å—Å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π –∫–æ–Ω–µ—á–Ω–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∞ (FSM).
    *   `type_movie = State()`: –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–∏–ø–∞ —Ñ–∏–ª—å–º–∞ –∏–ª–∏ —Å–µ—Ä–∏–∞–ª–∞ (`film` –∏–ª–∏ `series`).
    *   `name = State()`: –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è —Ñ–∏–ª—å–º–∞ –∏–ª–∏ —Å–µ—Ä–∏–∞–ª–∞.

**–§—É–Ω–∫—Ü–∏–∏:**

*   `command_start_handler(message: Message) -> None`:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**: `message` (–æ–±—ä–µ–∫—Ç `Message` –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: `None`.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É `/start`, –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –Ω–∞—á–∞—Ç—å –ø–æ–∏—Å–∫ —Ñ–∏–ª—å–º–∞.
    *   **–ü—Ä–∏–º–µ—Ä**: –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–ø–∏—Å–∞–ª –≤ —á–∞—Ç–µ `/start`, –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è —Å –∫–Ω–æ–ø–∫–æ–π "–ù–∞–π—Ç–∏ —Ñ–∏–ª—å–º".
*   `movie_handler(callback: CallbackQuery, state: FSMContext) -> None`:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**: `callback` (–æ–±—ä–µ–∫—Ç `CallbackQuery` –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è), `state` (–∫–æ–Ω—Ç–µ–∫—Å—Ç FSM).
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: `None`.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ "–ù–∞–π—Ç–∏ —Ñ–∏–ª—å–º", —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ `Params.type_movie` –∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ç–∏–ø —Ñ–∏–ª—å–º–∞/—Å–µ—Ä–∏–∞–ª–∞.
    *   **–ü—Ä–∏–º–µ—Ä**: –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–ù–∞–π—Ç–∏ —Ñ–∏–ª—å–º" –±–æ—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç, —á—Ç–æ –∏—â–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (—Ñ–∏–ª—å–º –∏–ª–∏ —Å–µ—Ä–∏–∞–ª).
*   `series_handler(callback: CallbackQuery, state: FSMContext) -> None`:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**: `callback` (–æ–±—ä–µ–∫—Ç `CallbackQuery` –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è), `state` (–∫–æ–Ω—Ç–µ–∫—Å—Ç FSM).
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: `None`.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ "–°–µ—Ä–∏–∞–ª", –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ `type_movie='series'`  –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `Params.name`, –∑–∞–ø—Ä–∞—à–∏–≤–∞—è –Ω–∞–∑–≤–∞–Ω–∏–µ.
    *   **–ü—Ä–∏–º–µ—Ä**: –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ "–°–µ—Ä–∏–∞–ª" –±–æ—Ç —Å–ø—Ä–æ—Å–∏—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–∏–∞–ª–∞.
*   `film_handler(callback: CallbackQuery, state: FSMContext) -> None`:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**: `callback` (–æ–±—ä–µ–∫—Ç `CallbackQuery` –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è), `state` (–∫–æ–Ω—Ç–µ–∫—Å—Ç FSM).
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: `None`.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ "–§–∏–ª—å–º", –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ `type_movie='film'` –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `Params.name`, –∑–∞–ø—Ä–∞—à–∏–≤–∞—è –Ω–∞–∑–≤–∞–Ω–∏–µ.
    *   **–ü—Ä–∏–º–µ—Ä**: –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ "–§–∏–ª—å–º" –±–æ—Ç —Å–ø—Ä–æ—Å–∏—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞.
*   `name_handler(message: Message, state: FSMContext) -> None`:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**: `message` (–æ–±—ä–µ–∫—Ç `Message` –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è), `state` (–∫–æ–Ω—Ç–µ–∫—Å—Ç FSM).
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: `None`.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–≤–µ–¥–µ–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –≤—ã–∑—ã–≤–∞–µ—Ç `search_query` –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –≤—ã–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
    *   **–ü—Ä–∏–º–µ—Ä**: –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–ª –Ω–∞–∑–≤–∞–Ω–∏–µ "–ú–∞—Ç—Ä–∏—Ü–∞", –±–æ—Ç –≤—ã–∑–æ–≤–µ—Ç `search_query("–ú–∞—Ç—Ä–∏—Ü–∞", "film")` –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

*   `router = Router()`: –≠–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ `Router` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏.
*   `type_movies = {'film': '–§–∏–ª—å–º', 'series': '–°–µ—Ä–∏–∞–ª'}`: –°–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –º–µ–∂–¥—É –∫–ª—é—á–∞–º–∏ (`film`, `series`) –∏ –∏—Ö –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è:**

*   **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –í –∫–æ–¥–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è `search_query` –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É –∏–ª–∏ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–¥–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –°–ª–µ–¥—É–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å `try...except` –±–ª–æ–∫–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π.
*   **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞**: –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤–≤–æ–¥–∞ –Ω–∞–∑–≤–∞–Ω–∏—è. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ –¥–ª–∏–Ω—É –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã.
*   **–£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞**: –ú–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–∏—Å–∫ –ø–æ —Ä–µ–∂–∏—Å—Å–µ—Ä—É, –∞–∫—Ç–µ—Ä—É –∏ —Ç.–¥.
*   **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ—à–∏–±–æ–∫ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞.
*   **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏**: –§—É–Ω–∫—Ü–∏—é `name_handler` –º–æ–∂–Ω–æ —Ä–∞–∑–±–∏—Ç—å –Ω–∞ –±–æ–ª–µ–µ –º–µ–ª–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏.

**–í–∑–∞–∏–º–æ—Å–≤—è–∑—å —Å –¥—Ä—É–≥–∏–º–∏ —á–∞—Å—Ç—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞:**

*   `apps.keyboard`: –≠—Ç–æ—Ç –º–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. –û–Ω —É–ø—Ä–æ—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ —Ñ–∏–ª—å–º–∞ –∏–ª–∏ –Ω–∞—á–∞–ª–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞.
*   `apps.search`: –≠—Ç–æ—Ç –º–æ–¥—É–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ—É–Ω–∫—Ü–∏—é `search_query`, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–æ–∏—Å–∫ —Ñ–∏–ª—å–º–æ–≤/—Å–µ—Ä–∏–∞–ª–æ–≤ –ø–æ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ API.

–≠—Ç–æ—Ç –∫–æ–¥ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é Telegram-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏—Å–∫–∞—Ç—å —Ñ–∏–ª—å–º—ã –∏ —Å–µ—Ä–∏–∞–ª—ã. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç (FSM) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –¥–∏–∞–ª–æ–≥–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. –ë–æ—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–æ–∫, –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞.