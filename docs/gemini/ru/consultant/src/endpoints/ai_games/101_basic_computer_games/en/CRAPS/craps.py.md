# Анализ кода модуля craps

**Качество кода**
8
-  Плюсы
    - Код хорошо структурирован и логически понятен.
    - Присутствуют docstring для функций, объясняющие их назначение.
    - Код соответствует базовым требованиям игры "Крэпс".
    - Используются информативные сообщения для пользователя.
-  Минусы
    - Отсутствует импорт `logger` из `src.logger.logger`.
    - Нет обработки ошибок с использованием `logger.error`.
    - Код не соответствует формату reStructuredText (RST) для docstring.
    - Комментарии не соответствуют формату RST и не объясняют каждый блок кода.
    -  Используется избыточное количество print для вывода информации, что не подходит для продакшн-кода.
    - Код не использует `j_loads` или `j_loads_ns` для чтения файлов (отсутствует работа с файлами)
    - Отсутствует разделение логики игры и UI, что уменьшает гибкость кода.

**Рекомендации по улучшению**

1.  **Импорт `logger`**: Добавить импорт `from src.logger.logger import logger` для логирования.
2.  **Формат docstring**: Переписать все docstring в формате reStructuredText (RST).
3.  **Комментарии в RST**: Переписать комментарии к коду в формате RST, объясняя каждую строку кода.
4.  **Логирование ошибок**: Заменить `print` на `logger.info` или `logger.debug` для вывода сообщений и добавить обработку ошибок с помощью `logger.error`.
5.  **Разделение логики**: Разделить логику игры и пользовательский интерфейс для улучшения гибкости и тестируемости кода.
6.  **Удаление избыточного print**:  Убрать избыточные выводы в консоль, оставив только информационные сообщения.
7.  **Улучшение читаемости**: Переименовать переменные и функции при необходимости для улучшения читаемости кода.
8.  **Исключить избыточные проверки**: Убрать избыточные `return` после вывода в консоль в условиях.
9.  **Обработка исключений**: Добавить обработку исключений с использованием try-except, если это необходимо.

**Оптимизированный код**

```python
"""
Модуль для игры в кости "Крэпс"
=========================================================================================

Этот модуль реализует логику игры в кости "Крэпс", включая броски костей,
вычисление суммы очков и определение победителя или проигравшего.

Правила игры:
1. Игрок бросает две кости.
2. Если сумма равна 7 или 11, игрок выигрывает.
3. Если сумма равна 2, 3 или 12, игрок проигрывает.
4. В противном случае, сумма становится "целевым числом".
5. Игрок продолжает бросать, пока не выпадет "целевое число" (выигрыш) или 7 (проигрыш).

Пример использования
--------------------

.. code-block:: python

    play_craps()
"""
import random
# импорт модуля logger для логирования
from src.logger.logger import logger


def roll_dice() -> tuple[int, int]:
    """
    Имитирует бросок двух игральных костей.

    :return: Кортеж из двух целых чисел, представляющих значения костей.
    """
    # генерирует случайное целое число от 1 до 6 для первой кости
    dice1 = random.randint(1, 6)
    # генерирует случайное целое число от 1 до 6 для второй кости
    dice2 = random.randint(1, 6)
    # возвращает значения двух костей
    return dice1, dice2


def calculate_sum(dice1: int, dice2: int) -> int:
    """
    Вычисляет сумму значений двух костей.

    :param dice1: Значение первой кости.
    :param dice2: Значение второй кости.
    :return: Сумма значений двух костей.
    """
    # возвращает сумму значений двух костей
    return dice1 + dice2


def play_craps() -> None:
    """
    Запускает игру "Крэпс".
    """
    #  бросок костей и получение их значений
    dice1, dice2 = roll_dice()
    # вычисление суммы значений костей
    sum_of_dice = calculate_sum(dice1, dice2)
    # вывод информации о броске
    logger.info(f'Выпало: {dice1} + {dice2} = {sum_of_dice}')

    # проверка выигрыша или проигрыша после первого броска
    if sum_of_dice in (7, 11):
        #  вывод сообщения о выигрыше
        logger.info('YOU WIN!')
        return
    # проверка проигрыша после первого броска
    elif sum_of_dice in (2, 3, 12):
        # вывод сообщения о проигрыше
        logger.info('YOU LOSE!')
        return

    # установка целевого числа
    point = sum_of_dice
    # вывод сообщения о целевом числе
    logger.info(f'Ваше целевое число: {point}')

    # цикл игры, пока не будет выиграша или проигрыша
    while True:
        #  бросок костей и получение их значений
        dice1, dice2 = roll_dice()
        # вычисление суммы значений костей
        sum_of_dice = calculate_sum(dice1, dice2)
        # вывод информации о броске
        logger.info(f'Выпало: {dice1} + {dice2} = {sum_of_dice}')
        # проверка выигрыша
        if sum_of_dice == point:
            #  вывод сообщения о выигрыше
            logger.info('YOU WIN!')
            return
         # проверка проигрыша
        elif sum_of_dice == 7:
            # вывод сообщения о проигрыше
            logger.info('YOU LOSE!')
            return


if __name__ == '__main__':
    # вызов функции для запуска игры
    play_craps()
```