# Класс `Supplier`

```markdown
Класс `Supplier` в данном коде является базовым классом для работы с поставщиками данных. Он предоставляет общий интерфейс для взаимодействия с различными источниками данных (например, Amazon, AliExpress, Walmart).  Этот класс предназначен для инкапсуляции логики взаимодействия с конкретным поставщиком, включая загрузку настроек, авторизацию, выполнение сценариев и парсинг данных.

## Назначение

* Обеспечивает общий интерфейс для работы с различными поставщиками данных.
* Инкапсулирует логику взаимодействия с сайтом поставщика.
* Упрощает создание и использование новых поставщиков данных, путем наследования от `Supplier`.

## Основные Атрибуты

* `supplier_id`: Уникальный идентификатор поставщика.
* `supplier_prefix`: Префикс для поставщика (например, `aliexpress`, `amazon`).  Этот атрибут часто используется для динамической загрузки настроек.
* `supplier_settings`: Настройки поставщика, обычно загружаемые из файла конфигурации.  Это позволяет гибко настраивать поведение для каждого поставщика.
* `locale`: Код локализации (например, `en`, `ru`).  Важно для работы с локализованными сайтами.
* `price_rule`: Правило расчета цены (например, добавление НДС, скидки).
* `related_modules`: Модули, содержащие специфические функции для данного поставщика (например, функции для парсинга определенных данных).
* `scenario_files`: Список файлов сценариев, которые необходимо выполнить для извлечения данных.  Этот подход позволяет структурировать и управлять логикой извлечения данных.
* `current_scenario`: Текущий сценарий, выполняемый в данный момент.
* `login_data`: Данные для входа на сайт поставщика (если требуется).
* `locators`: Локаторы веб-элементов на страницах сайта поставщика.  Используются для автоматизированного поиска и взаимодействия с элементами страницы.
* `driver`: Веб-драйвер для взаимодействия с сайтом поставщика.
* `parsing_method`: Метод парсинга данных (например, `webdriver`, `api`, `xls`, `csv`).

## Основные Методы

* `__init__`: Конструктор класса, инициализирующий атрибуты.  Принимает `supplier_prefix`, `locale` и `webdriver` для настройки поставщика.
* `_payload`: Загружает настройки поставщика (конфигурационные файлы, локаторы, сценарии) и инициализирует веб-драйвер.
* `login`: Метод для выполнения входа на сайт поставщика (если требуется).
* `run_scenario_files`: Запускает выполнение сценариев, определенных в списках файлов.
* `run_scenarios`: Запускает сценарии, заданные в словарях или списках словарей.  Поддержка различных способов задания сценариев.

## Принцип работы

1. **Инициализация (`__init__`):** Создается объект `Supplier` для конкретного поставщика с необходимыми параметрами.
2. **Загрузка настроек (`_payload`):** Загружаются конфигурационные файлы, содержащие настройки, локаторы и сценарии, специфичные для данного поставщика.
3. **Вход на сайт (при необходимости, `login`):** Выполняется вход на сайт поставщика, если это требуется для доступа к данным.
4. **Выполнение сценариев (`run_scenario_files`, `run_scenarios`):** Запускаются сценарии для извлечения данных.
5. **Обработка данных (не показано в примере):** Результаты выполнения сценариев обрабатываются и возвращаются.

##  Пример использования

```python
# Создаем объект для поставщика 'aliexpress'
supplier = Supplier(supplier_prefix='aliexpress', locale='en', webdriver='chrome')

# Выполняем вход на сайт поставщика
supplier.login()

# Запускаем сценарии из файлов
supplier.run_scenario_files(['example_scenario.json'])

# Или запускаем сценарии по определенным условиям
supplier.run_scenarios([{'action': 'scrape', 'target': 'product_list'}])
```

## Визуализация

`Supplier` – это шаблон, описывающий общие действия, которые должны выполняться при работе с любым поставщиком.  Конкретные поставщики (например, `AliexpressSupplier`, `AmazonSupplier`) будут наследовать от `Supplier` и добавлять специфические методы и атрибуты.

## Заключение

Класс `Supplier` – это хороший пример использования принципов SOLID (в частности, принцип открытости/закрытости) для создания гибкого и масштабируемого приложения, работающего с данными от разных поставщиков.
```