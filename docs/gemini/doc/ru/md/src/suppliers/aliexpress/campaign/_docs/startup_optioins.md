# Модуль `prepare_campaigns`

## Обзор

Данный модуль предназначен для подготовки данных для рекламных кампаний AliExpress. Он предоставляет функции для инициализации, создания каталогов, сохранения конфигурации, сбора данных о продуктах, сохранения данных о продуктах, создания рекламных материалов, проверки кампании и публикации. Модуль использует Google Drive для хранения данных.

## Оглавление

- [Подготовка кампании](#подготовка-кампании)
    - [Функция `process_campaign`](#функция-process_campaign)
    - [Функция `process_campaign_category`](#функция-process_campaign_category)
    - [Функция `update_category`](#функция-update_category)
- [Асинхронная обработка кампании](#асинхронная-обработка-кампании)
    - [Функция `main`](#функция-main)
- [Инициализация и аргументы командной строки](#инициализация-и-аргументы-командной-строки)


## Подготовка кампании

### Функция `process_campaign`

**Описание**: Обрабатывает всю кампанию для всех категорий.

**Параметры**:

- `campaign_name` (str): Название рекламной кампании.
- `categories` (List[str] | None, optional): Список категорий для кампании. По умолчанию `None` (обрабатываются все категории из каталога).
- `language` (str, optional): Язык кампании (по умолчанию 'EN').
- `currency` (str, optional): Валюта кампании (по умолчанию 'USD').
- `force` (bool, optional): Если True, принудительно обновляет категории. По умолчанию `False`.

**Возвращает**:
- `None`

**Вызывает исключения**:
- Любые исключения, возникающие при работе с файлами или API.


### Функция `process_campaign_category`

**Описание**: Обрабатывает конкретную категорию в рамках кампании для всех языков и валют.

**Параметры**:

- `campaign_name` (str): Название рекламной кампании.
- `category_name` (str): Категория для кампании.
- `language` (str): Язык для кампании.
- `currency` (str): Валюта для кампании.
- `force` (bool, optional): Если True, принудительно обновляет категорию. По умолчанию `False`.

**Возвращает**:
- `Optional[bool]`: `True`, если обработка прошла успешно; `False`, если произошла ошибка.

**Вызывает исключения**:
- Любые исключения, возникающие при работе с файлами или API.


### Функция `update_category`

**Описание**: Обновляет категорию в JSON-файле.

**Параметры**:

- `json_path` (Path): Путь к JSON-файлу.
- `category` (SimpleNamespace): Объект категории, который нужно обновить.

**Возвращает**:
- `bool`: `True`, если обновление прошло успешно; `False`, если произошла ошибка.

**Вызывает исключения**:
- Любые исключения, возникающие при работе с JSON или файлами.

## Асинхронная обработка кампании

### Функция `main`

**Описание**: Асинхронная функция для обработки кампании.

**Параметры**:

- `campaign_name` (str): Название рекламной кампании.
- `categories` (List[str]): Список категорий для кампании.
- `language` (str): Язык для кампании.
- `currency` (str): Валюта для кампании.
- `force` (bool, optional): Если True, принудительно обновляет категории. По умолчанию `False`.

**Возвращает**:
- `None`

**Вызывает исключения**:
- Любые исключения, возникающие при асинхронной обработке.

## Инициализация и аргументы командной строки

Модуль использует `argparse` для обработки аргументов командной строки, что позволяет задавать название кампании, список категорий, язык и валюту.

```python
parser = argparse.ArgumentParser(description="Prepare AliExpress Campaign")
parser.add_argument("campaign_name", type=str, help="Name of the campaign")
parser.add_argument("-c", "--categories", nargs='+', help="List of categories")
parser.add_argument("-l", "--language", type=str, default="EN", help="Language for the campaign")
parser.add_argument("-cu", "--currency", type=str, default="USD", help="Currency for the campaign")
parser.add_argument("-f", "--force", action="store_true", help="Force update")
```