# Crawlee Python для Веб-Парсинга

Этот документ описывает класс `CrawleePython`, использующий библиотеку `crawlee` для выполнения веб-парсинга с помощью Playwright.

## Класс `CrawleePython`

Класс `CrawleePython` предоставляет структурированный подход к веб-парсингу, используя асинхронное программирование и библиотеку Playwright.

### Методы класса:

* **`__init__(self, max_requests, headless=True, browser_type='chromium')`**: Инициализирует объект `CrawleePython`.
    * `max_requests`: Максимальное количество запросов, выполняемых во время парсинга.
    * `headless`: Флаг, определяющий режим работы браузера (с графическим интерфейсом или без).
    * `browser_type`: Тип браузера (например, 'chromium', 'firefox').
    * Создает экземпляр `PlaywrightCrawler` с заданными параметрами.

* **`setup_crawler(self)`**: Настраивает парсер.
    * Определяет обработчик запросов по умолчанию.
    * Обрабатывает каждый запрос, извлекает данные с страницы и добавляет ссылки для дальнейшего парсинга.
    * Использует API Playwright для выбора элементов на странице (например, постов, заголовков, рейтингов).
    * Собирает необходимые данные в список словарей.

* **`run_crawler(self, initial_urls)`**: Запускает процесс парсинга с заданным списком начальных URL.

* **`export_data(self, filename='data.json')`**: Экспортирует собранные данные в JSON-файл.

* **`get_data(self)`**: Возвращает собранные данные в виде словаря.

* **`run(self, initial_urls)`**:  Главный метод, который организует весь процесс: настройку парсера, запуск, экспорт данных и вывод полученных данных.

### Пример использования:

```python
import asyncio
from your_module import CrawleePython  # Замените 'your_module'

async def main():
    crawler = CrawleePython(max_requests=10, headless=False)  # Установите headless=False для визуализации
    initial_urls = ['https://news.ycombinator.com/']
    await crawler.run(initial_urls)

asyncio.run(main())
```

### Ключевые особенности:

* **Асинхронное выполнение:** Использование `async` и `await` для повышения эффективности обработки множественных запросов.
* **Извлечение данных:** Извлечение определенных данных (заголовков, рейтингов и ссылок) со страниц.  Логика извлечения может быть изменена в зависимости от структуры целевого сайта.
* **Бесголовый режим браузера:** Возможность работы в бесголовом режиме, что полезно для автоматизированного парсинга без графического интерфейса.
* **Экспорт данных:** Экспорт данных в JSON-файл для удобного хранения и анализа результатов.

### Важные замечания:

* Необходимо заменить `'your_module'` на фактическое имя модуля, содержащего класс `CrawleePython`.
* Убедитесь, что у вас установлены необходимые библиотеки (`crawlee`, `playwright`).
* Логика извлечения данных (например, селекторы Playwright) должна быть адаптирована под структуру парсируемого сайта.


Этот класс предоставляет прочный фундамент для веб-парсинга с помощью Playwright в Python.  Его можно легко расширять и изменять для различных потребностей парсинга путем изменения логики извлечения данных или начальных URL-адресов.  Структура класса и методов обеспечивает четкую организацию и простоту поддержания функциональности веб-парсинга.