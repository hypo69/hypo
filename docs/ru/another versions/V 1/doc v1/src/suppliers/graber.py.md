# src.suppliers.graber

## Обзор

Модуль `src.suppliers.graber` предоставляет базовый класс для сбора данных со страниц HTML поставщиков. Он использует веб-драйвер для извлечения целевых полей, таких как название, описание, спецификация, артикул и цена. Расположение этих полей определяется локаторами, хранящимися в JSON-файлах в директории `locators` каждого поставщика.

## Подробней

Основная цель модуля - упростить процесс сбора данных о товарах с веб-сайтов поставщиков. Это достигается путем предоставления базового класса `Graber`, который можно наследовать и расширять для конкретных поставщиков. Локаторы, хранящиеся в JSON-файлах, позволяют гибко настраивать процесс сбора данных, адаптируясь к изменениям в структуре HTML страниц поставщиков.

Для нестандартной обработки полей товара можно переопределить соответствующие функции в дочернем классе.

## Оглавление

- [Context](#Context)
- [close_pop_up](#close_pop_up)
- [Graber](#Graber)

## Классы

### `Context`

**Описание**: Класс для хранения глобальных настроек, используемых в процессе сбора данных.

**Параметры**:
- `driver` (`'Driver'`): Объект драйвера, используемый для управления браузером или другим интерфейсом.
- `locator_for_decorator` (`SimpleNamespace`): Пространство имен для хранения локаторов, используемых декоратором `@close_pop_up`.
- `supplier_prefix` (`str`): Префикс поставщика.

**Примеры**:

```python
Context.driver = some_driver_instance
Context.locator_for_decorator = self.locator.close_pop_up
Context.supplier_prefix = 'supplier_name'
```

### `Graber`

**Описание**: Базовый класс для сбора данных со страницы для всех поставщиков.

**Методы**:
- `__init__`: Инициализация класса Graber.
- `error`: Обработчик ошибок для полей.
- `set_field_value`: Универсальная функция для установки значений полей с обработкой ошибок.
- `grab_page`: Синхронная функция для сбора полей продукта.
- `grab_page_async`: Асинхронная функция для сбора полей продукта.
- `additional_shipping_cost`: Извлечение и установка дополнительной стоимости доставки.
- `delivery_in_stock`: Извлечение и установка статуса наличия на складе.
- `active`: Извлечение и установка статуса активности.
- `additional_delivery_times`: Извлечение и установка дополнительных сроков доставки.
- `advanced_stock_management`: Извлечение и установка статуса расширенного управления запасами.
- `affiliate_short_link`: Извлечение и установка короткой партнерской ссылки.
- `affiliate_summary`: Извлечение и установка партнерского обзора.
- `affiliate_summary_2`: Извлечение и установка партнерского обзора 2.
- `affiliate_text`: Извлечение и установка партнерского текста.
- `affiliate_image_large`: Извлечение и установка большого партнерского изображения.
- `affiliate_image_medium`: Извлечение и установка среднего партнерского изображения.
- `affiliate_image_small`: Извлечение и установка маленького партнерского изображения.
- `available_date`: Извлечение и установка доступной даты.
- `available_for_order`: Извлечение и установка статуса доступности для заказа.
- `available_later`: Извлечение и установка статуса доступности позже.
- `available_now`: Извлечение и установка статуса доступности сейчас.
- `additional_categories`: Установка дополнительных категорий.
- `cache_default_attribute`: Извлечение и установка атрибута кэша по умолчанию.
- `cache_has_attachments`: Извлечение и установка статуса наличия вложений в кэше.
- `cache_is_pack`: Извлечение и установка статуса является ли кэш пакетом.
- `condition`: Извлечение и установка условия продукта.
- `customizable`: Извлечение и установка статуса настраиваемости.
- `date_add`: Извлечение и установка даты добавления.
- `date_upd`: Извлечение и установка даты обновления.
- `delivery_out_stock`: Извлечение и установка доставки вне склада.
- `depth`: Извлечение и установка глубины.
- `description`: Извлечение и установка описания.
- `description_short`: Извлечение и установка короткого описания.
- `id_category_default`: Извлечение и установка ID категории по умолчанию.
- `id_default_combination`: Извлечение и установка ID комбинации по умолчанию.
- `id_product`: Извлечение и установка ID продукта.
- `locale`: Извлечение и установка локали.
- `id_default_image`: Извлечение и установка ID изображения по умолчанию.
- `ean13`: Извлечение и установка кода EAN13.
- `ecotax`: Извлечение и установка экологического налога.
- `height`: Извлечение и установка высоты.
- `how_to_use`: Извлечение и установка инструкции по использованию.
- `id_manufacturer`: Извлечение и установка ID производителя.
- `id_supplier`: Извлечение и установка ID поставщика.
- `id_tax`: Извлечение и установка ID налога.
- `id_type_redirected`: Извлечение и установка ID перенаправленного типа.
- `images_urls`: Извлечение и установка URL-адресов изображений.
- `indexed`: Извлечение и установка статуса индексации.
- `ingredients`: Извлечение и установка ингредиентов.
- `meta_description`: Извлечение и установка мета-описания.
- `meta_keywords`: Извлечение и установка мета-ключевых слов.
- `meta_title`: Извлечение и установка мета-заголовка.
- `is_virtual`: Извлечение и установка виртуального статуса.
- `isbn`: Извлечение и установка ISBN.
- `link_rewrite`: Извлечение и установка перезаписи ссылки.
- `location`: Извлечение и установка местоположения.
- `low_stock_alert`: Извлечение и установка предупреждения о низком уровне запасов.
- `low_stock_threshold`: Извлечение и установка порога низкого уровня запасов.
- `minimal_quantity`: Извлечение и установка минимального количества.
- `mpn`: Извлечение и установка MPN (Manufacturer Part Number).
- `name`: Извлечение и установка названия продукта.
- `online_only`: Извлечение и установка статуса "только онлайн".
- `on_sale`: Извлечение и установка статуса "в продаже".
- `out_of_stock`: Извлечение и установка статуса "нет в наличии".
- `pack_stock_type`: Извлечение и установка типа запаса пакета.
- `price`: Извлечение и установка цены.
- `product_type`: Извлечение и установка типа продукта.
- `quantity`: Извлечение и установка количества.
- `quantity_discount`: Извлечение и установка скидки за количество.
- `redirect_type`: Извлечение и установка типа перенаправления.
- `reference`: Извлечение и установка ссылки.
- `show_condition`: Извлечение и установка условия отображения.
- `show_price`: Извлечение и установка отображения цены.
- `state`: Извлечение и установка состояния.
- `text_fields`: Извлечение и установка текстовых полей.
- `unit_price_ratio`: Извлечение и установка коэффициента цены за единицу.
- `unity`: Извлечение и установка единицы измерения.
- `upc`: Извлечение и установка UPC.
- `uploadable_files`: Извлечение и установка загружаемых файлов.
- `default_image_url`: Извлечение и установка URL-адреса изображения по умолчанию.
- `visibility`: Извлечение и установка видимости.
- `weight`: Извлечение и установка веса.
- `wholesale_price`: Извлечение и установка оптовой цены.
- `width`: Извлечение и установка ширины.
- `specification`: Извлечение и установка спецификации.
- `link`: Извлечение и установка ссылки.
- `byer_protection`: Извлечение и установка защиты покупателя.
- `customer_reviews`: Извлечение и установка отзывов клиентов.
- `link_to_video`: Извлечение и установка ссылки на видео.
- `local_image_path`: Извлечение и сохранение изображения локально.
- `local_video_path`: Извлечение и сохранение видео локально.

**Параметры**:
- `supplier_prefix` (`str`): Префикс поставщика.
- `lang_index` (`int`): Индекс языка.
- `driver` (`'Driver'`): Экземпляр класса Driver.

**Примеры**:

```python
from src.suppliers.graber import Graber
from src.webdriver import Driver

# Пример инициализации класса Graber
driver = Driver()
graber = Graber('supplier_prefix', 1, driver)

# Пример вызова метода grab_page
product_fields = graber.grab_page('name', 'description', name='Product Name', description='Product Description')
```

## Функции

### `close_pop_up`

```python
def close_pop_up() -> Callable:
    """Создает декоратор для закрытия всплывающих окон перед выполнением основной логики функции.

    Args:
        value (\'Driver\'): Дополнительное значение для декоратора.

    Returns:
        Callable: Декоратор, оборачивающий функцию.
    """
    ...
```

**Описание**: Создает декоратор для закрытия всплывающих окон перед выполнением основной логики функции.

**Параметры**:
- `value` (`'Driver'`): Дополнительное значение для декоратора.

**Возвращает**:
- `Callable`: Декоратор, оборачивающий функцию.

**Примеры**:

```python
@close_pop_up()
async def some_function():
    # Some logic here
    return True
```