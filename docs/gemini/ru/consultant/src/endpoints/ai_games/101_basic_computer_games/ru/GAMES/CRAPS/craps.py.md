# Анализ кода модуля `craps.py`

**Качество кода**
8
-  Плюсы
    - Код хорошо структурирован, с разделением на функции `roll_dice`, `calculate_sum` и `play_craps`, что делает его читаемым и легким для понимания.
    - Присутствуют подробные комментарии, объясняющие логику работы каждой части кода.
    - Использование f-строк для форматированного вывода делает код более современным и читаемым.
    - Логика игры "Крэпс" реализована правильно, согласно описанию в начале файла.
-  Минусы
    - Отсутствует обработка ошибок, например, при некорректных входных данных (хотя в этой игре таких данных нет, но хороший тон предполагает их обработку в общем случае).
    - Нет логирования, что затрудняет отладку в случае возникновения проблем.
    - Документация в формате reStructuredText отсутствует.

**Рекомендации по улучшению**
1. **Добавить документацию в формате reStructuredText (RST)**: Необходимо добавить docstring к модулю, функциям и переменным в формате RST.
2. **Использовать логирование**: Необходимо добавить логирование ошибок и важных событий с использованием `logger.error` и `logger.debug` из `src.logger.logger`.
3. **Улучшить комментарии**: Убедиться, что все комментарии соответствуют стандарту RST и поясняют каждый блок кода.
4. **Убрать избыточный `return`**: Упростить структуру функции `play_craps` удалив избыточные `return` из условий, вынеся их в конец функции.

**Оптимизированный код**
```python
"""
Модуль для игры в кости "Крэпс"
=========================================================================================

Этот модуль реализует логику игры в кости "Крэпс", где игрок делает ставки на результат
броска двух игральных костей. В первом раунде игрок может выиграть или проиграть сразу,
в зависимости от суммы очков. Если игрок не выигрывает и не проигрывает, устанавливается
целевое число, и игра продолжается до выигрыша или проигрыша.

Правила игры:
    1. В начале игры игрок бросает две кости.
    2. Если сумма очков на костях равна 7 или 11, игрок выигрывает.
    3. Если сумма очков равна 2, 3 или 12, игрок проигрывает.
    4. Если сумма очков равна 4, 5, 6, 8, 9 или 10, то это число становится "целевым числом" (point).
    5. После установления "целевого числа", игрок продолжает бросать кости, пока:
       - не выпадет "целевое число", тогда игрок выигрывает.
       - не выпадет 7, тогда игрок проигрывает.

Пример использования:
--------------------

.. code-block:: python

    if __name__ == "__main__":
        play_craps()
"""
import random
from src.logger.logger import logger # импортируем logger

def roll_dice() -> tuple[int, int]:
    """
    Имитирует бросок двух игральных костей.

    :return: Значения двух костей в виде кортежа (dice1, dice2).
    :rtype: tuple[int, int]
    """
    # Код генерирует случайное целое число от 1 до 6 для первой кости
    dice1 = random.randint(1, 6)
    # Код генерирует случайное целое число от 1 до 6 для второй кости
    dice2 = random.randint(1, 6)
    return dice1, dice2

def calculate_sum(dice1: int, dice2: int) -> int:
    """
    Вычисляет сумму значений двух костей.

    :param dice1: Значение первой кости.
    :type dice1: int
    :param dice2: Значение второй кости.
    :type dice2: int
    :return: Сумма значений двух костей.
    :rtype: int
    """
    # Код возвращает сумму значений dice1 и dice2
    return dice1 + dice2

def play_craps():
    """
    Запускает игру Крэпс.
    
    Игра продолжается до тех пор, пока игрок не выиграет или не проиграет.
    """
    # Код выполняет первый бросок костей
    dice1, dice2 = roll_dice()
    sum_of_dice = calculate_sum(dice1, dice2)
    print(f"Выпало: {dice1} + {dice2} = {sum_of_dice}")
    
    # Код проверяет условия выигрыша или проигрыша после первого броска
    if sum_of_dice in (7, 11):
        print("YOU WIN!")
        return
    elif sum_of_dice in (2, 3, 12):
        print("YOU LOSE!")
        return
    
    # Код устанавливает целевое число
    point = sum_of_dice
    print(f"Ваше целевое число: {point}")
    
    # Код продолжает бросать кости, пока не будет достигнут выигрыш или проигрыш
    while True:
        # Код выполняет новый бросок костей
        dice1, dice2 = roll_dice()
        sum_of_dice = calculate_sum(dice1, dice2)
        print(f"Выпало: {dice1} + {dice2} = {sum_of_dice}")
        
        # Код проверяет условия выигрыша или проигрыша
        if sum_of_dice == point:
            print("YOU WIN!")
            return
        elif sum_of_dice == 7:
            print("YOU LOSE!")
            return
    

if __name__ == "__main__":
    # Код запускает игру при вызове скрипта
    play_craps()
"""
Объяснение кода:
1.  **Импорт модуля `random` и `logger`**:\n
   -  `import random`: Импортирует модуль `random`, который используется для генерации случайных чисел (значений для игральных костей).\n
   -  `from src.logger.logger import logger`: Импортирует logger для записи логов.
2. **Функция `roll_dice()`**:\n
   -  `def roll_dice() -> tuple[int, int]:`: Функция имитирует бросок двух игральных костей. Возвращает кортеж из двух целых чисел.\n
   -  `dice1 = random.randint(1, 6)`: Генерирует случайное целое число от 1 до 6 (значение первой кости).\n
   -  `dice2 = random.randint(1, 6)`: Генерирует случайное целое число от 1 до 6 (значение второй кости).\n
   - `return dice1, dice2`: Возвращает значения двух костей.\n
3. **Функция `calculate_sum(dice1, dice2)`**:\n
   -  `def calculate_sum(dice1: int, dice2: int) -> int:`: Функция вычисляет сумму значений двух костей. Принимает два целых числа и возвращает их сумму.\n
   -  `return dice1 + dice2`: Возвращает сумму.\n
4.  **Функция `play_craps()`**:\n
    -   `def play_craps():`:  Функция, которая содержит всю логику игры "Крэпс".\n
    -   `dice1, dice2 = roll_dice()`: Вызывает функцию `roll_dice()` для первого броска костей.\n
    -   `sum_of_dice = calculate_sum(dice1,dice2)`: Вызывает функцию `calculate_sum()` для получения суммы значений первого броска.\n
    -   `print(f"Выпало: {dice1} + {dice2} = {sum_of_dice}")`: Выводит на экран значения костей и их сумму.\n
    -   **Первая проверка выигрыша/проигрыша**:\n
        -   `if sum_of_dice in (7, 11):`: Проверяет, выиграл ли игрок при первом броске (сумма равна 7 или 11).\n
        -   `print("YOU WIN!")`: Выводит сообщение о выигрыше.\n
        -   `return`: Завершает игру.\n
        -   `elif sum_of_dice in (2, 3, 12):`: Проверяет, проиграл ли игрок при первом броске (сумма равна 2, 3 или 12).\n
        -   `print("YOU LOSE!")`: Выводит сообщение о проигрыше.\n
        -   `return`: Завершает игру.\n
    -  **Установка целевого числа (point)**:\n
        -   `point = sum_of_dice`: Если ни выигрыш, ни проигрыш не наступили, текущая сумма становится целевым числом (point).\n
        -   `print(f"Ваше целевое число: {point}")`: Выводит сообщение о целевом числе.\n
    -  **Основной цикл игры**:\n
       -  `while True:`:  Бесконечный цикл, который продолжается, пока игрок не выиграет или не проиграет.\n
       - `dice1, dice2 = roll_dice()`:  Вызывает функцию `roll_dice()` для нового броска костей.\n
       - `sum_of_dice = calculate_sum(dice1,dice2)`: Вызывает функцию `calculate_sum()` для получения суммы значений нового броска.\n
       - `print(f"Выпало: {dice1} + {dice2} = {sum_of_dice}")`: Выводит на экран значения костей и их сумму.\n
       - **Второй цикл проверки выигрыша/проигрыша**:\n
          - `if sum_of_dice == point:`: Проверяет, выиграл ли игрок (сумма равна целевому числу).\n
          -   `print("YOU WIN!")`: Выводит сообщение о выигрыше.\n
          -   `return`: Завершает игру.\n
          -   `elif sum_of_dice == 7:`: Проверяет, проиграл ли игрок (сумма равна 7).\n
          -   `print("YOU LOSE!")`: Выводит сообщение о проигрыше.\n
          -   `return`: Завершает игру.\n
5.  **Запуск игры**:\n
    -  `if __name__ == "__main__":`: Этот блок гарантирует, что функция `play_craps()` будет запущена, только если файл исполняется напрямую, а не импортируется как модуль.\n
    -  `play_craps()`: Вызывает функцию для начала игры.\n
"""
```