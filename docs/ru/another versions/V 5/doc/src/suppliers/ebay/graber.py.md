# Модуль `src.suppliers.ebay.graber`

## Обзор

Модуль предназначен для сбора значений полей товаров на сайте `ebay.com`. Он содержит класс `Graber`, который наследует функциональность от родительского класса `Graber` (из `src.suppliers.graber`). Если требуется нестандартная обработка полей, функции обработки перегружаются в этом классе. Модуль также предоставляет возможность выполнения предварительных действий перед отправкой запроса к веб-драйверу с использованием декораторов.

## Подробней

Этот модуль является частью системы сбора данных о товарах с различных онлайн-платформ. Он специализируется на сборе информации с `ebay.com`. Класс `Graber` переопределяет методы родительского класса для адаптации к особенностям структуры страниц `ebay.com`. Декораторы используются для выполнения предварительных действий, таких как закрытие всплывающих окон, перед тем как основная логика сбора данных будет выполнена.

## Классы

### `Graber`

**Описание**: Класс для сбора данных о товарах с сайта `ebay.com`.

**Как работает класс**:
1.  **Наследование**: Класс `Graber` наследуется от класса `Graber` (из `src.suppliers.graber`), что обеспечивает общую структуру и функциональность для сбора данных с разных платформ.
2.  **Инициализация**: В конструкторе класса устанавливается префикс поставщика (`ebay`) и вызывается конструктор родительского класса. Также инициализируется `Context.locator_for_decorator` значением `None`. Если установить значение, то оно выполнится в декораторе `@close_pop_up`.
3.  **Декораторы**: Класс поддерживает использование декораторов для выполнения предварительных действий перед сбором данных, таких как закрытие всплывающих окон.

**Методы**:

*   `__init__`: Инициализация класса.

**Параметры**:

*   `driver` (Driver): Экземпляр веб-драйвера для взаимодействия с сайтом.
*   `lang_index` (int): Индекс языка, используемый для локализации.

## Функции

### `close_pop_up`

```python
def close_pop_up(value: Any = None) -> Callable:
    """Создает декоратор для закрытия всплывающих окон перед выполнением основной логики функции.

    Args:
        value (Any): Дополнительное значение для декоратора.

    Returns:
        Callable: Декоратор, оборачивающий функцию.
    """
```

**Описание**: Создает декоратор для закрытия всплывающих окон перед выполнением основной логики функции.

**Как работает функция**:
1.  **Декоратор**: Функция `close_pop_up` является фабрикой декораторов. Она принимает значение `value` и возвращает декоратор, который оборачивает другую функцию (`func`).
2.  **Внутренняя функция `wrapper`**: Внутри декоратора определена функция `wrapper`, которая будет выполнена при вызове обернутой функции.
3.  **Обработка исключений**: Внутри `wrapper` используется блок `try...except` для обработки возможных исключений при выполнении локатора закрытия всплывающего окна.
4.  **Вызов основной функции**: После попытки закрытия всплывающего окна вызывается основная функция `func` с помощью `await func(*args, **kwargs)`.
5.  **Логирование**: При возникновении исключения `ExecuteLocatorException` в процессе закрытия всплывающего окна, информация об ошибке записывается в лог с уровнем `DEBUG`.

**Параметры**:

*   `value` (Any, optional): Дополнительное значение для декоратора. По умолчанию `None`.

**Возвращает**:

*   `Callable`: Декоратор, который можно применить к функции.

**Вызывает исключения**:

*   `ExecuteLocatorException`: Возникает, если не удается выполнить локатор для закрытия всплывающего окна.

**Примеры**:

```python
# Пример использования декоратора
@close_pop_up()
async def my_function():
    # Основная логика функции
    return "Hello, world!"