# Модуль `hypotez/src/utils/jjson.py`

## Обзор

Модуль `jjson` предоставляет функции для работы с JSON и CSV файлами, включая загрузку, сохранение, слияние и преобразование данных. Он поддерживает различные форматы ввода, включая файлы, директории и строки, а также конвертацию данных в объекты `SimpleNamespace` для удобной работы.  Модуль также умеет обрабатывать ошибки и предупреждения во время работы.

## Функции

### `j_dumps`

**Описание**: Функция сохраняет JSON-совместимые данные в файл или возвращает их как словарь. Поддерживает различные режимы записи (`w`, `a+`, `+a`).

**Параметры**:

- `data` (Dict | SimpleNamespace | List[Dict] | List[SimpleNamespace]): Данные для сохранения. Может быть словарем, объектом `SimpleNamespace`, списком словарей или списком объектов `SimpleNamespace`.
- `file_path` (Optional[Path], optional): Путь к файлу для сохранения. Если `None`, то данные возвращаются как словарь. По умолчанию `None`.
- `ensure_ascii` (bool, optional): Если `True`, не-ASCII символы в выводе будут экранированы. По умолчанию `True`.
- `mode` (str, optional): Режим открытия файла (`w`, `a+`, `+a`). По умолчанию `w`.
- `exc_info` (bool, optional): Если `True`, то исключения выводятся с отладочной информацией. По умолчанию `True`.

**Возвращает**:

- `Optional[Dict]`: Сохранённые данные как словарь, если всё прошло успешно, иначе `None`.

**Возможные исключения**:

- `ValueError`: Если указан неподдерживаемый режим открытия файла.


### `j_loads`

**Описание**: Функция загружает данные из файла, директории или строки JSON или CSV в словарь или список словарей. Поддерживает чтение данных из директорий и CSV файлов.

**Параметры**:

- `jjson` (Path | dict | str): Путь к файлу, директории, JSON-данные в виде строки или JSON-объект.
- `ordered` (bool, optional): Если `True`, возвращает `OrderedDict` для сохранения порядка элементов. По умолчанию `False`.
- `exc_info` (bool, optional): Если `True`, то исключения выводятся с отладочной информацией. По умолчанию `True`.

**Возвращает**:

- `Any`: Словарь или список словарей, если загрузка успешна; иначе `None`.

**Возможные исключения**:

- `FileNotFoundError`: Если указанный файл не найден.
- `json.JSONDecodeError`: Если JSON-данные не могут быть обработаны.


### `j_loads_ns`

**Описание**: Функция загружает JSON или CSV данные из файла, директории или строки, и преобразует их в объекты `SimpleNamespace`.

**Параметры**:

- `jjson` (Path | SimpleNamespace | Dict | str): Путь к файлу, директории, JSON данные в виде строки, или JSON-объект.
- `ordered` (bool, optional): Если `True`, возвращает `OrderedDict` вместо обычного словаря для сохранения порядка элементов. По умолчанию `False`.
- `exc_info` (bool, optional): Если `True`, то исключения выводятся с отладочной информацией. По умолчанию `True`.

**Возвращает**:

- `Optional[SimpleNamespace | List[SimpleNamespace]]`: Возвращает объект `SimpleNamespace` или список объектов `SimpleNamespace` в случае успеха; иначе `None`.

**Примеры использования**:

- Загрузка JSON данных из файла: `j_loads('data.json')`
- Загрузка JSON данных из директории: `j_loads(Path('/path/to/directory'))`
- Загрузка данных из CSV файла: `j_loads(Path('/path/to/file.csv'))`


### `process_json_file`

**Описание**: Обрабатывает JSON файл, заменяя ключ `name` на `category_name`.

**Параметры**:

- `json_file` (Path): Путь к JSON файлу.

**Возможные исключения**:

- `Exception`: Если возникает ошибка во время обработки файла.



### `recursive_process_json_files`

**Описание**: Рекурсивно обходит папки и обрабатывает JSON файлы.

**Параметры**:

- `directory` (Path): Путь к директории, которую нужно обработать.


### `extract_json_from_string`

**Описание**: Извлекает JSON-контент из строки Markdown между тегами ```json ```.

**Параметры**:

- `md_string` (str): Строка Markdown, содержащая JSON.

**Возвращает**:

- str: Извлеченная строка JSON, или пустая строка если не найдено.