# Документация компонента `App`

## Обзор

Компонент `App` представляет собой чат-бокс, реализованный с использованием React.js. Он позволяет пользователю вводить сообщения, отправлять их на сервер API и получать ответ от чат-бота.

## Оглавление

- [Функциональность](#функциональность)
- [Состояния](#состояния)
- [Обработка сообщений](#обработка-сообщений)
- [Отправка сообщений](#отправка-сообщений)
- [Обработка ошибок](#обработка-ошибок)
- [Вывод сообщений](#вывод-сообщений)
- [Обработка ввода](#обработка-ввода)


## Функциональность

Компонент `App` отвечает за:

- отображения чата;
- прием ввода от пользователя;
- отправку ввода на сервер API;
- отображение ответа чат-бота;
- управление состоянием чата.


## Состояния

Компонент использует два состояния:

- `input`: хранит текущий ввод пользователя;
- `messages`: массив объектов, содержащих сообщения от пользователя и чат-бота. Каждый объект имеет поля `role` (значение `"user"` или `"assistant"`) и `content` (текст сообщения).


## Обработка сообщений

Функция `sendMessage` обрабатывает сообщения следующим образом:

- Проверяет, пусто ли поле ввода. Если да, то функция возвращается.
- Создаёт объект сообщения `userMessage` с ролью `"user"` и текстом из поля ввода.
- Добавляет `userMessage` в массив `messages`.
- Использует `fetch` для отправки POST-запроса на сервер API `/api/chat` с данными о вводе пользователя.
- При получении ответа от сервера, обрабатывает данные и создаёт объект сообщения `aiMessage` с ролью `"assistant"` и содержимым из ответа API.
- Добавляет `aiMessage` в массив `messages`.


## Отправка сообщений

Функция `sendMessage` выполняет следующие шаги для отправки сообщений:

- Формирует `POST` запрос к API на `/api/chat` с `input` в качестве `prompt`.
- Обрабатывает полученный JSON ответ от API.
- Обновляет состояние `messages` новыми сообщениями.


## Обработка ошибок

В функции `sendMessage` используется блок `try...catch`:

- Если запрос к API терпит неудачу (например, нет соединения или сервер вернул ошибку), `catch` обрабатывает ошибку `error` и выводит сообщение об ошибке в консоль.


## Вывод сообщений

Компонент отображает сообщения в чате с помощью метода `map` и отображает роль каждого сообщения (пользователь или бот).


## Обработка ввода

- Компонент получает ввод пользователя с помощью поля ввода текста.
- Для отправки сообщения при нажатии Enter используется обработчик `onKeyDown` с проверкой на нажатие Enter.
-  Для отправки сообщения при нажатии кнопки "Отправить" используется обработчик `onClick` для кнопки.
- Ввод обновляется с помощью `setInput(e.target.value)`.


##  Использование `ReactDOM.render`

Код `ReactDOM.render(<App />, document.getElementById('chat-app'));` использует React для рендеринга компонента `App` в элемент DOM с id 'chat-app'.

**Важно**: Эта документация предполагает, что API на `/api/chat` возвращает JSON в формате `{ "response": "..." }`.