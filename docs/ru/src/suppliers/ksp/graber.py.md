# Модуль `src.suppliers.ksp.graber`

## Обзор

Модуль предназначен для сбора информации о товарах с сайта `ksp.co.il`. Он содержит класс `Graber`, который наследует функциональность от родительского класса `Graber` (`Grbr`). Класс `Graber` специализируется на обработке веб-страниц товаров `ksp.co.il`, переопределяя методы родительского класса при необходимости нестандартной обработки полей.

## Подробнее

Основная задача модуля - автоматизированный сбор данных о товарах с сайта `ksp.co.il`. Это достигается путем определения специфичных локаторов элементов страницы и методов их обработки. Перед отправкой запроса к веб-драйверу, модуль позволяет выполнять предварительные действия, используя декораторы. Декоратор по умолчанию определен в родительском классе, но может быть переопределен в данном классе при необходимости.

## Классы

### `Graber`

**Описание**: Класс `Graber` предназначен для сбора информации о товарах с сайта `ksp.co.il`. Он наследует функциональность от класса `Graber` (`Grbr`) и переопределяет методы, если требуется нестандартная обработка полей.

**Наследует**:
- `Graber` (`Grbr`): Класс, предоставляющий общую функциональность для сбора данных с веб-страниц.

**Атрибуты**:
- `supplier_prefix` (str): Префикс поставщика, устанавливается как `'ksp'`.

**Методы**:
- `__init__`: Инициализирует экземпляр класса `Graber`, устанавливает префикс поставщика, вызывает конструктор родительского класса и выполняет дополнительные действия, такие как проверка мобильной версии сайта и установка соответствующих локаторов.

## Функции

### `__init__`

```python
def __init__(self, driver: 'Driver', lang_index: int):
    """Инициализация класса сбора полей товара.

    Args:
        driver ('Driver'): Экземпляр веб-драйвера для управления браузером.
        lang_index (int): Индекс языка, используемый для локализации.

    Raises:
        ExecuteLocatorException: Если возникает ошибка при выполнении локатора.

    Example:
        >>> driver = Driver(Chrome)
        >>> graber = Graber(driver, 0)
    """
```

**Назначение**: Инициализация экземпляра класса `Graber`, установка префикса поставщика, вызов конструктора родительского класса и выполнение дополнительных действий, таких как проверка мобильной версии сайта и установка соответствующих локаторов.

**Параметры**:
- `driver` (`'Driver'`): Экземпляр веб-драйвера для управления браузером.
- `lang_index` (`int`): Индекс языка, используемый для локализации.

**Как работает функция**:

1.  **Установка префикса поставщика**: Устанавливает атрибут `supplier_prefix` в значение `'ksp'`.
2.  **Вызов конструктора родительского класса**: Вызывает метод `__init__` родительского класса `Grbr` с передачей префикса поставщика, экземпляра драйвера и индекса языка.
3.  **Ожидание**: Выполняет задержку в 3 секунды, чтобы дать странице время на загрузку.
4.  **Проверка мобильной версии сайта**: Проверяет, содержит ли текущий URL-адрес драйвера подстроку `'/mob/'`.
    - Если да, загружает локаторы для мобильной версии сайта из файла `'product_mobile_site.json'` и устанавливает их.
    - Логирует информацию об использовании локаторов для мобильной версии сайта KSP.
5.  **Установка локатора для декоратора**: Устанавливает атрибут `Context.locator_for_decorator` в значение `None`.

**ASCII flowchart**:

```
    Инициализация Graber
    │
    ├── Установка supplier_prefix = 'ksp'
    │
    ├── Вызов Graber.__init__(...)
    │
    ├── Ожидание (3 секунды)
    │
    ├── Проверка URL на наличие '/mob/'
    │   ├── Да: Загрузка и установка локаторов для мобильной версии
    │   └── Нет: Пропуск
    │
    └── Установка Context.locator_for_decorator = None
```

**Примеры**:

```python
from src.webdirver import Driver, Chrome, Firefox, Playwright, ...
driver = Driver(Firefox)
graber = Graber(driver, 0)