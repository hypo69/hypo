```markdown
# micromark-util-chunked

[![Build Status][build-badge]][build]
[![Coverage][coverage-badge]][coverage]
[![Downloads][downloads-badge]][downloads]
[![Size][bundle-size-badge]][bundle-size]
[![Sponsors][sponsors-badge]][opencollective]
[![Backers][backers-badge]][opencollective]
[![Chat][chat-badge]][chat]

A micromark utility for efficiently splicing and pushing large arrays,
mitigating V8 performance issues.


## Usage

This package is ESM only.

**Node.js (version 16+)**

```bash
npm install micromark-util-chunked
```

```javascript
import { push, splice } from 'micromark-util-chunked';

// Example usage:
let nextEvents = [];

nextEvents = push(nextEvents, [
  ['enter', 'paragraph', {}],
  ['exit', 'paragraph', {}]
]);

// ... (other operations) ...

splice(events, open - 1, index - open + 3, nextEvents);

// ... (rest of your code) ...
```

**Deno**

```typescript
import { push, splice } from 'https://esm.sh/micromark-util-chunked@latest';
// or use a specific version if needed
```

**Browser (using esm.sh)**

```html
<script type="module">
  import { push, splice } from 'https://esm.sh/micromark-util-chunked@latest?bundle';
  // ... use push and splice ...
</script>
```

## API

### `push(list, items)`

Appends the `items` array to the end of the `list` array.  If `list` is empty, returns `items` instead.  This optimization prevents expensive operations when the list is empty and efficiently adds items in batches.

*   **`list`**: The array to append to.
*   **`items`**: The array of items to append.
*   **Returns**: The `list` array if it wasn't empty, otherwise `items`.

### `splice(list, start, remove, items)`

Similar to `Array.prototype.splice`, but designed to handle large arrays efficiently without causing V8 stack overflows when inserting many items.  It does *not* return the removed items.

*   **`list`**: The array to modify.
*   **`start`**: The index to start removing/inserting from (can be negative).
*   **`remove`**: The number of items to remove.
*   **`items`**: The array of items to insert.
*   **Returns**: `undefined`.


## Types

Fully typed with TypeScript. No additional types are exported.


## Compatibility

This package is compatible with Node.js 16+ and `micromark@^3`.


## Contributing

See the [CONTRIBUTING.md](./CONTRIBUTING.md) file for details.


## License

[MIT](LICENSE) Â© [Titus Wormer](https://wooorm.com)


<!-- Link Definitions -->
<!-- Replace with actual links -->
[build-badge]: https://example.com/build-badge.svg
[build]: https://example.com/build
[coverage-badge]: https://example.com/coverage-badge.svg
[coverage]: https://example.com/coverage
[downloads-badge]: https://example.com/downloads-badge.svg
[downloads]: https://example.com/downloads
[bundle-size-badge]: https://example.com/bundle-size-badge.svg
[bundle-size]: https://example.com/bundle-size
[sponsors-badge]: https://example.com/sponsors-badge.svg
[opencollective]: https://opencollective.com/unified
[backers-badge]: https://example.com/backers-badge.svg
[chat-badge]: https://example.com/chat-badge.svg
[chat]: https://example.com/chat
```

**Explanation of Improvements:**

* **Clearer Structure:** The README now follows a more standard documentation format, including a title, usage examples, and API details.
* **Improved Examples:**  The examples are more practical, showing how to use `push` and `splice` together.
* **Explicit ESM Information:**  The README emphasizes that this package is ESM-only, providing clear instructions for Node.js, Deno, and browser usage.
* **Consistent Styling:**  Used consistent Markdown formatting.
* **Removed Redundant Information:** Removed the `MODE = 'debug'` line and other unnecessary comments.
* **Link Placeholder:** The placeholders for links are updated to reflect the proper format for using the README.  **Crucially**, you *must* replace these placeholders with actual links.  These links are likely to be found on the GitHub repo or other relevant hosting services for this package.
* **Added CONTRIBUTING.md:**  A `CONTRIBUTING.md` file is mentioned to handle contributions, which is good practice.  If this file doesn't exist, you should create one.
* **License Clarity:** The license is clearly stated and linked.


Remember to replace the placeholder links with the actual links from the original `micromark` project.  This will make the documentation usable. Also make sure the `CONTRIBUTING.md` file exists in the project.