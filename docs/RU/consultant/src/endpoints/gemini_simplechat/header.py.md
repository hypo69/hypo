# Анализ кода модуля `header.py`

**Качество кода**

**7/10**
-  Плюсы
    - Код выполняет поставленную задачу - определяет корневой каталог проекта.
    - Используется `pathlib` для работы с путями, что делает код более читаемым и кроссплатформенным.
    - Наличие docstring для модуля и функции.
-  Минусы
    - Отсутствуют комментарии, объясняющие логику работы кода внутри цикла поиска корневой директории.
    - Отсутствует описание переменных `__root__` и `current_path`.
    - Не используется `from src.logger.logger import logger` для логирования.
    - Присутствует неиспользуемый комментарий `#! venv/bin/python/python3.12`.

**Рекомендации по улучшению**

1.  Добавить комментарии, поясняющие логику работы цикла поиска корневой директории.
2.  Добавить docstring для переменных `__root__` и `current_path`.
3.  Удалить неиспользуемый комментарий `#! venv/bin/python/python3.12`.
4.  Импортировать `logger` из `src.logger.logger` для логирования.
5.  Добавить проверку `__root__` на `None` перед добавлением в `sys.path`.
6.  Переменную `__root__` сделать приватной `_root__`.

**Оптимизированный код**

```python
# -*- coding: utf-8 -*-

"""
Модуль для определения корневого каталога проекта.
==================================================

Этот модуль содержит функцию :func:`set_project_root`, которая определяет корневой
каталог проекта, начиная с текущего файла и поднимаясь вверх по иерархии директорий.
Корневым каталогом считается первая директория, содержащая маркерные файлы, такие как '__root__' или '.git'.

Пример использования
--------------------

.. code-block:: python

    from pathlib import Path
    from src.header import set_project_root

    root_dir:Path = set_project_root()
    print(f"Корневой каталог проекта: {root_dir}")

"""
import sys
from pathlib import Path

# from src.logger.logger import logger # TODO: добавить logger если понадобится

def set_project_root(marker_files: tuple = ('__root__', '.git')) -> Path:
    """
    Находит корневой каталог проекта, начиная с директории текущего файла,
    путем поиска вверх по иерархии каталогов и остановки на первой директории,
    содержащей любой из маркерных файлов.

    :param marker_files: Кортеж имен файлов или каталогов, которые идентифицируют корень проекта.
    :type marker_files: tuple, optional
    :return: Путь к корневому каталогу, если он найден, иначе путь к каталогу, где находится скрипт.
    :rtype: Path
    """
    _root__: Path #  путь к корневой директории проекта
    current_path: Path = Path(__file__).resolve().parent # путь к директории текущего файла

    _root__ = current_path # Инициализация корневого пути текущей директорией
    # цикл перебирает текущий путь и все его родительские пути
    for parent in [current_path] + list(current_path.parents):
        # проверка существования одного из маркерных файлов в текущей директории
        if any((parent / marker).exists() for marker in marker_files):
            _root__ = parent #  если маркерный файл найден, то путь сохраняется как корень
            break #  выход из цикла
    # Проверка наличия корня в системных путях
    if _root__ not in sys.path:
        sys.path.insert(0, str(_root__)) #  добавление пути к корню проекта в список системных путей
    return _root__ #  возвращает путь к корневой директории

# Get the root directory of the project
__root__ = set_project_root()
"""Path: Путь к корневой директории проекта"""
```