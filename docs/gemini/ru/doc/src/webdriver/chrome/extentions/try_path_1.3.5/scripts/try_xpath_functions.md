# Модуль try_xpath_functions.js

## Обзор

Данный модуль содержит JavaScript-функции для работы с XPath и DOM-элементами.  Он предоставляет методы для оценки XPath-выражений, выбора элементов с помощью `querySelector` и `querySelectorAll`, обработки результатов, а также работы с атрибутами элементов.

## Оглавление

* [Функции](#функции)


## Функции

### `execExpr`

**Описание**: Выполняет заданный XPath-выражение или CSS-выбор.

**Параметры**:

* `expr` (string): XPath-выражение или CSS-селектор.
* `method` (string): Метод выполнения (`evaluate`, `querySelector`, `querySelectorAll`).
* `opts` (object, optional): Опции выполнения.
    * `context` (object, optional): Контекст выполнения (документ, элемент, атрибут).
    * `resolver` (function|string, optional): Функция или строка, представляющие разрешение, используемые при работе с XPath. Принимает строку и возвращает значение.
    * `document` (object, optional):  Объект DOM-документа. По умолчанию `document`.
    * `resultType` (number, optional): Тип результата XPath.

**Возвращает**:

* `object`: Объект с результатами:
    * `items` (array): Массив результатов. Тип элементов зависит от `method`.
    * `method` (string): Используемый метод (`evaluate`, `querySelector`, `querySelectorAll`).
    * `resultType` (number): Тип результата XPath.


**Вызывает исключения**:

* `Error`: Если контекст не является узлом или атрибутом.
* `Error`: Если контекст не является документом или элементом.
* `Error`: Если результат `resultType` невалиден.
* `Error`: Если передан некорректный `resolver` (не функция и не строка).
* `Error`: При ошибке разбора JSON в `resolver`.


### `resToArr`

**Описание**: Преобразует результат XPath в массив.

**Параметры**:

* `res` (object): Результат вызова `evaluate()`.
* `type` (number, optional): Тип результата. Если не указан, берется из `res`.


**Возвращает**:

* `array`: Массив результатов.


**Вызывает исключения**:

* `Error`: Если тип результата не поддерживается.


### `makeResolver`

**Описание**: Создает функцию-разрешитель для XPath.

**Параметры**:

* `obj` (function|string|object, optional): Функция, строка или объект, представляющие разрешение.


**Возвращает**:

* `function`: Функция-разрешитель.


**Вызывает исключения**:

* `Error`: Если передан некорректный `resolver`.


### `isValidDict`

**Описание**: Проверяет, является ли объект корректным словарем.

**Параметры**:

* `obj` (object): Объект для проверки.


**Возвращает**:

* `boolean`: `True`, если объект является корректным словарем, `False` - иначе.


### `objToMap`

**Описание**: Преобразует объект в Map.

**Параметры**:

* `obj` (object): Объект для преобразования.


**Возвращает**:

* `Map`: Преобразованный объект в Map.


### `isDocOrElem`

**Описание**: Проверяет, является ли объект элементом или документом.

**Параметры**:

* `obj` (object): Объект для проверки.


**Возвращает**:

* `boolean`: `True`, если объект является элементом или документом.


### `listToArr`

**Описание**: Преобразует список в массив.

**Параметры**:

* `list` (array): Список для преобразования.


**Возвращает**:

* `array`: Преобразованный массив.


### `getItemDetail`

**Описание**: Возвращает детали элемента.

**Параметры**:

* `item` (object): Элемент, для которого необходимо получить детали.


**Возвращает**:

* `object`: Детали элемента (тип, имя, значение, текст).


### `getItemDetails`

**Описание**: Возвращает детали элементов.

**Параметры**:

* `items` (array): Массив элементов.


**Возвращает**:

* `array`: Массив деталей элементов.


### `getNodeTypeStr`

**Описание**: Возвращает строковое представление типа узла.

**Параметры**:

* `nodeType` (number): Числовой код типа узла.


**Возвращает**:

* `string`: Строковое представление типа узла.


### `getxpathResultStr`

**Описание**: Преобразует числовой тип результата XPath в строку.

**Параметры**:

* `resultType` (number): Числовой код типа результата XPath.


**Возвращает**:

* `string`: Строковое представление типа результата XPath.


### `getxpathResultNum`

**Описание**: Преобразует строковой тип результата XPath в число.

**Параметры**:

* `resultTypeStr` (string): Строковое представление типа результата XPath.


**Возвращает**:

* `number`: Числовой код типа результата XPath.


### `isAttrItem`

**Описание**: Проверяет, является ли элемент атрибутом.

**Параметры**:

* `item` (object): Элемент для проверки.


**Возвращает**:

* `boolean`: `True`, если элемент является атрибутом.


### `isNodeItem`

**Описание**: Проверяет, является ли элемент узлом DOM.

**Параметры**:

* `item` (object): Элемент для проверки.


**Возвращает**:

* `boolean`: `True`, если элемент является узлом DOM.


### `isElementItem`

**Описание**: Проверяет, является ли элемент элементом.

**Параметры**:

* `item` (object): Элемент для проверки.


**Возвращает**:

* `boolean`: `True`, если элемент является элементом.


### `addClassToItem`

**Описание**: Добавляет класс к элементу.

**Параметры**:

* `clas` (string): Класс для добавления.
* `item` (object): Элемент.


### `addClassToItems`

**Описание**: Добавляет класс к элементам.

**Параметры**:

* `clas` (string): Класс для добавления.
* `items` (array): Массив элементов.


### `saveItemClass`

**Описание**: Сохраняет класс элемента.

**Параметры**:

* `item` (object): Элемент.


**Возвращает**:

* `object`: Объект, содержащий сохраненный класс элемента.


### `restoreItemClass`

**Описание**: Восстанавливает класс элемента.

**Параметры**:

* `savedClass` (object): Объект, содержащий сохраненный класс элемента.



### ... (и так далее для остальных функций)