# Модуль experimentation.py

## Обзор

Данный модуль содержит классы для рандомизации данных и управления вмешательствами.  `ABRandomizer` служит для рандомизации выбора между двумя вариантами (например, в A/B тестировании), а `Intervention` предоставляет базовый класс для управления вмешательствами, включая установку условий и применение эффектов.

## Оглавление

- [Модуль experimentation.py](#модуль-experimentationpy)
- [Класс ABRandomizer](#класс-abrandomizer)
    - [`__init__`](#__init__)
    - [`randomize`](#randomize)
    - [`derandomize`](#derandomize)
    - [`derandomize_name`](#derandomize_name)
- [Класс Intervention](#класс-intervention)
    - [`__init__`](#__init__-1)
    - [`check_precondition`](#check_precondition)
    - [`apply`](#apply)
    - [`set_textual_precondition`](#set_textual_precondition)
    - [`set_functional_precondition`](#set_functional_precondition)
    - [`set_effect`](#set_effect)


## Классы

### `ABRandomizer`

**Описание**: Класс для рандомизации между двумя вариантами (например, для A/B тестирования) и последующего дерандомизирования. Сохраняет информацию о рандомизации для каждого элемента.

#### `__init__`

**Описание**: Инициализирует объект `ABRandomizer`.

**Параметры**:
- `real_name_1` (str): Имя первого варианта.
- `real_name_2` (str): Имя второго варианта.
- `blind_name_a` (str): Имя первого варианта, представленное пользователю.
- `blind_name_b` (str): Имя второго варианта, представленное пользователю.
- `passtrough_name` (list): Список имён, которые не подлежат рандомизации.
- `random_seed` (int):  Семена для генератора случайных чисел.


#### `randomize`

**Описание**: Рандомизирует выбор между `a` и `b` для заданного индекса `i`. Хранит результаты рандомизации для последующего использования.

**Параметры**:
- `i` (int): Индекс элемента.
- `a` (str): Первый вариант.
- `b` (str): Второй вариант.

**Возвращает**:
- `tuple`: Кортеж с рандомизированными вариантами.


#### `derandomize`

**Описание**: Дерандомизирует выбор для заданного индекса `i` на основе сохраненных результатов рандомизации.

**Параметры**:
- `i` (int): Индекс элемента.
- `a` (str): Первый вариант.
- `b` (str): Второй вариант.

**Возвращает**:
- `tuple`: Кортеж с исходными вариантами.

**Вызывает исключения**:
- `Exception`: Если для данного индекса нет сохранённых результатов рандомизации.


#### `derandomize_name`

**Описание**: Определяет фактический вариант на основе рандомизированного имени и сохранённых данных о рандомизации.

**Параметры**:
- `i` (int): Индекс элемента.
- `blind_name` (str): Рандомизированное имя варианта.

**Возвращает**:
- `str`: Исходное имя варианта.

**Вызывает исключения**:
- `Exception`: Если переданное `blind_name` не соответствует ни одному из известных вариантов.


### `Intervention`

**Описание**: Базовый класс для управления вмешательствами.


#### `__init__`

**Описание**: Инициализирует объект `Intervention`.

**Параметры**:
- `agent` (TinyPerson, необязательно): Объект агента.
- `agents` (list, необязательно): Список объектов агентов.
- `environment` (TinyWorld, необязательно): Объект окружения.
- `environments` (list, необязательно): Список объектов окружения.


**Вызывает исключения**:
- `Exception`: Если предоставлены и `agent`, и `agents`, или `environment` и `environments`.
- `Exception`: Если не предоставлен ни один из параметров.


#### `check_precondition`

**Описание**: Проверяет условие для проведения вмешательства.

**Вызывает исключения**:
- `NotImplementedError`: Метод не реализован.

#### `apply`

**Описание**: Применяет вмешательство.

**Вызывает исключения**:
- `NotImplementedError`: Метод не реализован.

#### `set_textual_precondition`

**Описание**: Устанавливает текстовое условие для вмешательства.

**Параметры**:
- `text` (str): Текст условия.


#### `set_functional_precondition`

**Описание**: Устанавливает условие как функцию.

**Параметры**:
- `func` (function): Функция условия.  Должна принимать аргументы: `agent`, `agents`, `environment`, `environments`.


#### `set_effect`

**Описание**: Устанавливает эффект вмешательства.

**Параметры**:
- `effect_func` (function): Функция, описывающая эффект.