# Анализ кода модуля `bullcow.py`

**Качество кода**
7
-  Плюсы
    - Код хорошо структурирован, с разделением на логические функции.
    - Имеется подробное описание алгоритма и логики игры в начале файла.
    - Используются понятные имена переменных и функций.
    - Код в целом соответствует требованиям задания игры "Быки и Коровы".
-  Минусы
    - Отсутствует документация в формате reStructuredText (RST).
    - Не используются логирование ошибок.
    - Отсутствует проверка на ввод нечисловых символов (проверяется только длина и уникальность).
    - Не используется `j_loads` или `j_loads_ns`.

**Рекомендации по улучшению**

1.  **Документация RST**: Добавить документацию в формате reStructuredText (RST) для модуля, функций и переменных.
2.  **Логирование ошибок**: Добавить логирование ошибок с использованием `from src.logger.logger import logger`.
3.  **Обработка ошибок**: Использовать `logger.error` для обработки ошибок вместо общих `try-except` блоков.
4.  **Проверка ввода**: Добавить проверку на ввод нечисловых символов с помощью `try-except` и `logger.error`.
5.  **Использование `j_loads`**: Заменить стандартное чтение файлов на `j_loads` или `j_loads_ns`, если это необходимо в контексте проекта.
6.  **Улучшение читаемости**: Улучшить читаемость, добавив комментарии с подробным описанием каждого логического блока кода.

**Оптимизированный код**

```python
"""
Модуль для игры "Быки и Коровы".
=========================================================================================

Этот модуль реализует игру "Быки и Коровы", в которой компьютер загадывает число,
а игрок пытается его угадать, получая подсказки в виде "быков" (цифры на своих местах)
и "коров" (цифры присутствуют в числе, но не на своих местах).

Пример использования
--------------------

.. code-block:: python

    if __name__ == "__main__":
        play_bullcow_game()

"""
import random
# from src.utils.jjson import j_loads # TODO: Добавить импорт если необходимо
from src.logger.logger import logger # Импорт логгера

def generate_random_4_digit_number() -> str:
    """
    Генерирует случайное 4-значное число с уникальными цифрами.

    :return: Случайное 4-значное число в виде строки.
    :rtype: str
    """
    digits = list(range(10)) # Создает список цифр от 0 до 9
    random.shuffle(digits)   # Перемешивает список
    while digits[0] == 0:     # Проверяет, что первая цифра не 0
        random.shuffle(digits) # Перемешивает список, если первая цифра 0
    # Возвращает первые 4 цифры в виде строки
    return "".join(map(str, digits[:4]))

def is_valid_guess(guess: str) -> bool:
    """
    Проверяет, является ли ввод пользователя корректным.

    :param guess: Ввод пользователя в виде строки.
    :type guess: str
    :return: True, если ввод корректный, False в противном случае.
    :rtype: bool
    """
    # Проверяет, состоит ли ввод только из цифр и имеет ли длину 4
    if not guess.isdigit() or len(guess) != 4:
        return False
    # Проверяет, все ли цифры уникальны
    return len(set(guess)) == 4

def calculate_bulls_cows(guess: str, target: str) -> tuple[int, int]:
    """
    Вычисляет количество быков и коров для данного предположения и загаданного числа.

    :param guess: Предположение пользователя в виде строки.
    :type guess: str
    :param target: Загаданное число в виде строки.
    :type target: str
    :return: Кортеж с количеством быков и коров.
    :rtype: tuple[int, int]
    """
    bulls = 0 # Инициализирует счетчик быков
    cows = 0  # Инициализирует счетчик коров
    # Проходит по каждой цифре в предположении
    for i, digit in enumerate(guess):
        if digit == target[i]:
            bulls += 1  # Увеличивает счетчик быков, если цифра на своем месте
        elif digit in target:
            cows += 1   # Увеличивает счетчик коров, если цифра есть в загаданном числе, но не на своем месте
    return bulls, cows

def play_bullcow_game():
    """
    Запускает игру "Быки и Коровы".
    """
    # Генерирует загаданное число
    target_number = generate_random_4_digit_number()
    print("Я загадал число из 4 разных цифр. Попробуй его отгадать!")

    while True:
        # Получает ввод пользователя
        user_guess = input("Введите ваш вариант (4 разные цифры): ")

        # Проверяет корректность ввода
        if not is_valid_guess(user_guess):
            print("Некорректный ввод. Пожалуйста, введите 4 разные цифры.")
            continue

        # Проверяет, угадано ли число
        if user_guess == target_number:
            print("Поздравляю! Вы угадали число!")
            break

        # Вычисляет количество быков и коров
        bulls, cows = calculate_bulls_cows(user_guess, target_number)
        print(f"{bulls} быков, {cows} коров.")

if __name__ == "__main__":
    # Запускает игру, если скрипт запущен напрямую
    play_bullcow_game()
```