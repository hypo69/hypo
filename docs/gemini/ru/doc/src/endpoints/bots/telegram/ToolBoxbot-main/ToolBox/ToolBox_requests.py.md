# Модуль `ToolBox_requests.py`

## Обзор

Этот модуль содержит класс `ToolBox`, который управляет основными функциями и логикой взаимодействия с Telegram-ботом. Он включает в себя обработку текстовых и графических запросов, управление тарифами и интеграцию с нейронными сетями.

## Содержание
- [Класс `ToolBox`](#класс-toolbox)
    - [Метод `__init__`](#метод-__init__)
    - [Метод `__gpt_4o_mini`](#метод-__gpt_4o_mini)
    - [Метод `__FLUX_schnell`](#метод-__flux_schnell)
    - [Метод `Text_types`](#метод-text_types)
    - [Метод `Basic_tariff`](#метод-basic_tariff)
    - [Метод `Pro_tariff`](#метод-pro_tariff)
    - [Метод `TextCommands`](#метод-textcommands)
    - [Метод `SomeTextsCommand`](#метод-sometextscommand)
    - [Метод `ImageCommand`](#метод-imagecommand)
    - [Метод `Image_Regen_And_Upscale`](#метод-image_regen_and_upscale)
    - [Метод `FreeCommand`](#метод-freecommand)

## Классы

### `ToolBox`

**Описание**:
Класс `ToolBox` реализует взаимодействие с Telegram-ботом, обрабатывает текстовые и графические запросы, управляет тарифами и интегрируется с нейронными сетями.

**Методы**:

#### `__init__`
```python
def __init__(self)
```
**Описание**:
Инициализирует класс `ToolBox`, устанавливает начальные значения для кнопок, загружает текстовые подсказки, инициализирует Telegram-бота, определяет лямбда-функции для различных клавиатур и запросов.

**Параметры**:
-   `self`: Экземпляр класса `ToolBox`.

#### `__gpt_4o_mini`
```python
def __gpt_4o_mini(self, prompt: list[dict], message) -> tuple[dict[str, str], int, int]
```
**Описание**:
Отправляет запрос в GPT-4o mini, обрабатывает ответ и возвращает его вместе с количеством входящих и исходящих токенов.

**Параметры**:
-   `prompt` (`list[dict]`): Список словарей с запросом к GPT-4o mini.
-   `message`: Объект сообщения Telegram.

**Возвращает**:
-   `tuple[dict[str, str], int, int]`: Кортеж, содержащий словарь с ответом, количество входящих токенов и количество исходящих токенов.

#### `__FLUX_schnell`
```python
def __FLUX_schnell(self, prompt: str, size: list[int], message, seed: int, num_inference_steps: int)-> None
```
**Описание**:
Генерирует изображение с помощью FLUX schnell и отправляет его пользователю.

**Параметры**:
-   `prompt` (`str`): Текстовый запрос для генерации изображения.
-   `size` (`list[int]`): Размеры изображения.
-   `message`: Объект сообщения Telegram.
-    `seed` (`int`): Зерно для генерации изображения.
-   `num_inference_steps` (`int`): Количество шагов инференса.

**Возвращает**:
-   `None`

#### `Text_types`
```python
def Text_types(self, message)
```
**Описание**:
Отправляет сообщение с вариантами типов текста для выбора.

**Параметры**:
-   `message`: Объект сообщения Telegram.

**Возвращает**:
-   `None`

#### `Basic_tariff`
```python
def Basic_tariff(self, message)
```
**Описание**:
Инициализирует и отправляет инвойс для подключения тарифа BASIC.

**Параметры**:
-   `message`: Объект сообщения Telegram.

**Возвращает**:
-   `None`

#### `Pro_tariff`
```python
def Pro_tariff(self, message)
```
**Описание**:
Инициализирует и отправляет инвойс для подключения тарифа PRO.

**Параметры**:
-   `message`: Объект сообщения Telegram.

**Возвращает**:
-   `None`

#### `TextCommands`
```python
def TextCommands(self, message, ind: int)
```
**Описание**:
Обрабатывает текстовые команды, формирует запрос к GPT-4o mini и возвращает информацию о токенах.

**Параметры**:
-   `message`: Объект сообщения Telegram.
-   `ind` (`int`): Индекс команды в списке.

**Возвращает**:
-   `tuple[int, int, int]`: Кортеж, содержащий количество входящих токенов, количество исходящих токенов и количество выполненных запросов.

#### `SomeTextsCommand`
```python
def SomeTextsCommand(self, message, ind: int, tokens: dict[str, int])
```
**Описание**:
Обрабатывает команды для генерации нескольких текстов, формирует запросы и возвращает информацию о токенах.

**Параметры**:
-   `message`: Объект сообщения Telegram.
-   `ind` (`int`): Индекс команды в списке.
-   `tokens` (`dict[str, int]`): Словарь с информацией о доступных токенах и запросах.

**Возвращает**:
-   `tuple[int, int, int]`: Кортеж, содержащий количество входящих токенов, количество исходящих токенов и количество выполненных запросов.

#### `ImageCommand`
```python
def ImageCommand(self, message, prompt: str, size: list[int])
```
**Описание**:
Генерирует изображение по запросу и отправляет его пользователю.

**Параметры**:
-   `message`: Объект сообщения Telegram.
-   `prompt` (`str`): Текстовый запрос для генерации изображения.
-   `size` (`list[int]`): Размеры изображения.

**Возвращает**:
-   `int`: Зерно для генерации изображения.

#### `Image_Regen_And_Upscale`
```python
def Image_Regen_And_Upscale(self, message, prompt: str, size: list[int], seed, num_inference_steps=4)
```
**Описание**:
Регенерирует или улучшает изображение и отправляет его пользователю.

**Параметры**:
-   `message`: Объект сообщения Telegram.
-   `prompt` (`str`): Текстовый запрос для генерации изображения.
-   `size` (`list[int]`): Размеры изображения.
-   `seed` (`int`): Зерно для генерации изображения.
-   `num_inference_steps` (`int`, optional): Количество шагов инференса. По умолчанию `4`.

**Возвращает**:
-   `None`

#### `FreeCommand`
```python
def FreeCommand(self, message, prompts: list[str])
```
**Описание**:
Обрабатывает запросы в свободном режиме, отправляет запрос в GPT-4o mini и возвращает информацию о токенах.

**Параметры**:
-   `message`: Объект сообщения Telegram.
-   `prompts` (`list[str]`): Список промптов.

**Возвращает**:
-   `tuple[int, int, list[str]]`: Кортеж, содержащий количество входящих токенов, количество исходящих токенов и список промптов.