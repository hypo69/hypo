# Модуль для работы с XML
=================================================

Модуль содержит функции для очистки и сохранения XML данных.
Он включает в себя функции для удаления пустых CDATA секций, лишних пробелов и сохранения XML в файл с отступами.

## Оглавление

- [Обзор](#обзор)
- [Функции](#функции)
  - [`clean_empty_cdata`](#clean_empty_cdata)
  - [`save_xml`](#save_xml)

## Обзор

Этот модуль предоставляет инструменты для работы с XML данными, включая очистку от пустых элементов и сохранение в файл с форматированием. Он полезен для обработки XML, генерируемого другими системами, и приведения его к стандартному виду.

## Подробней

Модуль содержит две основные функции: `clean_empty_cdata` и `save_xml`. Функция `clean_empty_cdata` используется для очистки XML от пустых CDATA секций и лишних пробелов. Функция `save_xml` сохраняет XML данные в файл с отступами для улучшения читаемости.

## Функции

### `clean_empty_cdata`

```python
def clean_empty_cdata(xml_string: str) -> str:
    """ Очищает пустые секции CDATA и лишние пробелы в XML строке.

    Args:
        xml_string (str): XML контент в виде строки.

    Returns:
        str: Очищенный и отформатированный XML контент.
    """
```

**Назначение**: Очистка XML от пустых элементов и лишних пробелов.

**Как работает функция**:
1. Преобразует XML-строку в дерево элементов с помощью `ET.fromstring`.
2. Определяет рекурсивную функцию `remove_empty_elements` для удаления пустых дочерних элементов.
3. Если у элемента нет текста, атрибутов и дочерних элементов, он удаляется.
4. Преобразует очищенное дерево обратно в XML-строку с помощью `ET.tostring`.
5. Удаляет лишние пробелы между тегами с помощью регулярного выражения `re.sub`.
6. Возвращает очищенную XML-строку.

**Параметры**:
- `xml_string` (str): XML контент в виде строки.

**Возвращает**:
- `str`: Очищенный и отформатированный XML контент.

**Примеры**:

```python
xml_data = "<root><item>Value</item><empty></empty></root>"
cleaned_xml = clean_empty_cdata(xml_data)
print(cleaned_xml)  # Вывод: <root><item>Value</item></root>
```

### `save_xml`

```python
def save_xml(xml_string: str, file_path: str) -> None:
    """ Сохраняет очищенные XML данные из строки в файл с отступами.

    Args:
        xml_string (str): XML контент в виде строки.
        file_path (str): Путь к выходному файлу.

    Returns:
        None
    """
```

**Назначение**: Сохранение XML в файл с форматированием.

**Как работает функция**:
1. Очищает XML от пустых элементов с помощью `clean_empty_cdata`.
2. Преобразует очищенную XML-строку в дерево элементов с помощью `ET.fromstring`.
3. Создает объект `ElementTree` из дерева элементов.
4. Преобразует дерево в строку с помощью `ET.tostring`.
5. Форматирует XML-строку с отступами с помощью `minidom.parseString` и `toprettyxml`.
6. Записывает отформатированную XML-строку в файл, указанный в `file_path`.

**Параметры**:
- `xml_string` (str): XML контент в виде строки.
- `file_path` (str): Путь к выходному файлу.

**Возвращает**:
- `None`

**Примеры**:

```python
xml_data = "<root><item>Value</item><item attr=\"test\">Another</item></root>"
save_xml(xml_data, "output.xml")
```