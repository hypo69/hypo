# Модуль `hypotez/src/category/category.py`

## Обзор

Модуль `src.category` предназначен для работы с категориями продуктов, в основном для платформы PrestaShop.  Он предоставляет классы для взаимодействия с данными о категориях продуктов и их обработки.

## Классы

### `Category`

**Описание**: Обработчик категорий продуктов. Наследует класс `PrestaCategory`.

**Атрибуты**:

- `credentials`: Словарь с данными аутентификации для доступа к данным о категориях (тип `Dict`).

**Методы**:

#### `__init__`

**Описание**: Инициализирует объект `Category`.

**Параметры**:

- `api_credentials` (словарь): Данные аутентификации для доступа к данным о категориях.
- `*args`: Список аргументов переменной длины (не используется).
- `**kwargs`: Словарь ключевых аргументов (не используется).

**Возвращает**: Объект `Category`.


#### `get_parents`

**Описание**: Получает список родительских категорий.

**Параметры**:

- `id_category` (целое число): ID категории, для которой необходимо получить родительские категории.
- `dept` (целое число): Уровень вложенности категории.

**Возвращает**: Список родительских категорий.


#### `crawl_categories_async`

**Описание**: Асинхронно обходит категории, строя иерархический словарь.

**Параметры**:

- `url` (строка): URL страницы категории.
- `depth` (целое число): Глубина рекурсивного обхода.
- `driver`: Экземпляр Selenium WebDriver.
- `locator` (строка): XPath локатор для поиска ссылок на подкатегории.
- `dump_file` (объект `Path`): Путь к файлу для сохранения результатов в формате JSON.
- `default_category_id` (целое число): ID категории по умолчанию.
- `category` (словарь, опционально): Существующий словарь категории (по умолчанию `None`).

**Возвращает**: Обновленный или новый словарь категории.


#### `crawl_categories`

**Описание**: Рекурсивно обходит категории и строит иерархический словарь.

**Параметры**:

- `url` (строка): URL страницы категории.
- `depth` (целое число): Глубина рекурсивного обхода.
- `driver`: Экземпляр Selenium WebDriver.
- `locator` (словарь): XPath локатор для поиска ссылок на подкатегории.
- `dump_file` (объект `Path`): Путь к файлу для сохранения результатов в формате JSON.
- `id_category_default` (целое число): ID категории по умолчанию.
- `category` (словарь, опционально): Существующий словарь категории (по умолчанию пустой словарь).

**Возвращает**: Иерархический словарь категорий.


#### `_is_duplicate_url`

**Описание**: Проверяет, существует ли URL в словаре категории.

**Параметры**:

- `category` (словарь): Словарь категории.
- `url` (строка): URL для проверки.

**Возвращает**: `True`, если URL дублируется, иначе `False`.

## Функции

### `compare_and_print_missing_keys`

**Описание**: Сравнивает текущий словарь с данными в файле и выводит отсутствующие ключи.

**Параметры**:

- `current_dict` (словарь): Текущий словарь для сравнения.
- `file_path` (строка): Путь к файлу с данными для сравнения.

**Возвращает**:  Ничего, выводит отсутствующие ключи в консоль.


**Примечания**:

- Методы `crawl_categories_async` и `crawl_categories` имеют сложные логические блоки, связанные с асинхронностью и обработкой исключений.
- Примеры использования и конкретные входные данные для методов не предоставлены в коде.
- В коде присутствует дублирование кода, частично комментирован и неполностью документирован.