# Модуль `popup.js`

## Обзор

Данный JavaScript-модуль (`popup.js`) реализует функциональность всплывающего окна расширения. Он управляет взаимодействием с активной вкладкой браузера, выполняя запросы к содержанию страницы и обрабатывая полученные результаты. Модуль отвечает за отображение результатов поиска, управление отображением различных элементов интерфейса, загрузку стилей и сохранение состояния окна.


## Функции

### `sendToActiveTab`

**Описание**: Отправляет сообщение в активную вкладку текущего окна.

**Параметры**:

- `msg` (объект): Сообщение для отправки.
- `opts` (объект, опционально): Дополнительные параметры, например, `frameId`. По умолчанию `{}`.

**Возвращает**:
- `Promise<any>`: Promise, который разрешается, когда сообщение отправлено.

**Вызывает исключения**:
- `Ошибка браузера`: Любые ошибки, связанные с коммуникацией с браузером.

### `sendToSpecifiedFrame`

**Описание**: Отправляет сообщение в указанный фрейм активной вкладки.

**Параметры**:
- `msg` (объект): Сообщение для отправки.

**Возвращает**:
- `Promise<void>`: Promise, который разрешается после успешного выполнения.

**Вызывает исключения**:
- `Ошибка браузера`: Любые ошибки, связанные с коммуникацией с браузером.
- `Ошибка`: Возникает в случае неверного `frameId`.

### `collectPopupState`

**Описание**: Считывает текущее состояние всплывающего окна.

**Параметры**: Нет

**Возвращает**:
- `объект`: Объект, содержащий состояние всплывающего окна.

**Вызывает исключения**: Нет


### `changeContextVisible`

**Описание**: Изменяет видимость раздела контекста.

**Параметры**: Нет

**Возвращает**: Нет

**Вызывает исключения**: Нет

### `changeResolverVisible`

**Описание**: Изменяет видимость раздела решателя.

**Параметры**: Нет

**Возвращает**: Нет

**Вызывает исключения**: Нет

### `changeFrameIdVisible`

**Описание**: Изменяет видимость раздела с идентификаторами фреймов.

**Параметры**: Нет

**Возвращает**: Нет

**Вызывает исключения**: Нет

### `changeFrameDesignationVisible`

**Описание**: Изменяет видимость раздела с указанием фрейма.

**Параметры**: Нет

**Возвращает**: Нет

**Вызывает исключения**: Нет

### `changeHelpVisible`

**Описание**: Изменяет видимость раздела справки.

**Параметры**: Нет

**Возвращает**: Нет

**Вызывает исключения**: Нет

### `makeExecuteMessage`

**Описание**: Создает сообщение для выполнения XPath-запроса.

**Параметры**: Нет

**Возвращает**:
- `объект`: Объект, содержащий данные запроса.

**Вызывает исключения**: Нет

### `getSpecifiedFrameId`

**Описание**: Получает идентификатор указанного фрейма.

**Параметры**: Нет

**Возвращает**:
- `число`: Идентификатор фрейма.

**Вызывает исключения**: Нет


### `execContentScript`

**Описание**: Выполняет скрипты в содержании активной вкладки.

**Параметры**: Нет

**Возвращает**:
- `Promise<void>`: Promise, который разрешается, когда скрипты выполнены.

**Вызывает исключения**:
- `Ошибка браузера`: Любые ошибки, связанные с коммуникацией с браузером.


### `sendExecute`

**Описание**: Отправляет сообщение для выполнения XPath-запроса в активную вкладку.

**Параметры**: Нет

**Возвращает**: Нет

**Вызывает исключения**:
- `Ошибка браузера`: Любые ошибки, связанные с коммуникацией с браузером.


### `handleExprEnter`

**Описание**: Обрабатывает нажатие клавиши Enter при вводе выражения.

**Параметры**:
- `event`: Объект события.

**Возвращает**: Нет

**Вызывает исключения**: Нет

### `showDetailsPage`

**Описание**: Отображает страницу с результатами.

**Параметры**:
- `index` (число): Номер страницы.

**Возвращает**: Нет

**Вызывает исключения**:
- `fu.onError`: Обработчик ошибок.

### `showError`

**Описание**: Отображает сообщение об ошибке.

**Параметры**:
- `message` (строка): Сообщение об ошибке.
- `frameId` (число): Идентификатор фрейма.

**Возвращает**: Нет

**Вызывает исключения**:
- `fu.onError`: Обработчик ошибок.

### `genericListener`

**Описание**: Обработчик сообщений от контентных скриптов.

**Параметры**:
- `message`: Сообщение.
- `sender`: Отправитель.
- `sendResponse`: Функция для отправки ответа.

**Возвращает**: `true` если обработка происходит асинхронно.

**Вызывает исключения**: Нет


##  Обработка событий

Функции `genericListener`, `sendExecute`, `showDetailsPage` и другие функции в модуле реагируют на события, такие как нажатие кнопок, ввод текста и отправка сообщений между расширением и вкладкой браузера.  Эти функции обрабатывают эти события и выполняют соответствующие действия.

```
```