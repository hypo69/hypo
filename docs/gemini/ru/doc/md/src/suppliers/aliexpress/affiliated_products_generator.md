# Модуль `hypotez/src/suppliers/aliexpress/affiliated_products_generator.py`

## Обзор

Этот модуль предоставляет класс `AliAffiliatedProducts`, предназначенный для сбора полной информации о продуктах с AliExpress, включая аффилированные ссылки и сохраненные изображения/видео. Он обрабатывает список идентификаторов продуктов (или URL-адресов) и возвращает список продуктов с аффилированными ссылками и сохраненными изображениями.  Модуль использует API AliExpress, а также функции для загрузки изображений и видео.  Он также генерирует и сохраняет данные кампании и выходные файлы.


## Классы

### `AliAffiliatedProducts`

**Описание**: Класс `AliAffiliatedProducts` наследуется от `AliApi` и расширяет его функциональность для работы с аффилированными продуктами.

**Атрибуты**:

- `language: str`: Язык кампании.
- `currency: str`: Валюта кампании.


**Методы**:

#### `__init__`

**Описание**: Инициализирует класс `AliAffiliatedProducts`.

**Параметры**:

- `language (str | dict, optional):` Язык для кампании (по умолчанию 'EN').
- `currency (str, optional):` Валюта для кампании (по умолчанию 'USD').


#### `process_affiliate_products`

**Описание**: Обрабатывает список идентификаторов продуктов (или URL-адресов) и возвращает список продуктов с аффилированными ссылками и сохраненными изображениями.

**Параметры**:

- `prod_ids (list[str]):` Список URL-адресов или идентификаторов продуктов.
- `category_root (Path | str):` Путь к корневой директории для сохранения данных.

**Возвращает**:

- `list[SimpleNamespace]:` Список обработанных продуктов с аффилированными ссылками и сохраненными изображениями.

**Возможные исключения**:

- `Exception`: Если имя категории не найдено в кампании.


## Функции

(Нет функций, кроме методов класса)


## Обработка исключений

В коде используется `logger.critical` и `logger.warning`, чтобы логгировать ошибки и предупреждения. Обработка исключений в целом отсутствует.


## Замечания

- Используются асинхронные операции (`asyncio`).
- Использование `SimpleNamespace` для представления данных продуктов.
- Сохранение изображений и видео в отдельные папки.
- Генерация JSON-файлов для каждого продукта.
- Сохранение заголовков продуктов в текстовый файл.
- Использование функций `ensure_https`, `save_png_from_url`, `save_video_from_url`, `j_dumps`, `read_text_file`, `save_text_file` из других модулей.