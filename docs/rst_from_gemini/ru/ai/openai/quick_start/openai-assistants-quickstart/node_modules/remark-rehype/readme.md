```markdown
# remark-rehype

[![Build][build-badge]][build]
[![Coverage][coverage-badge]][coverage]
[![Downloads][downloads-badge]][downloads]
[![Size][size-badge]][size]
[![Sponsors][sponsors-badge]][collective]
[![Backers][backers-badge]][collective]
[![Chat][chat-badge]][chat]

**A [remark][] plugin to transform Markdown into HTML for use with [rehype][].**

This plugin bridges the markdown (mdast) and HTML (hast) ecosystems, allowing you to use rehype plugins to further process the resulting HTML structure.  This is useful when you want to convert markdown to HTML for display, but also allows additional processing steps.


## Contents

* [What is this?](#what-is-this)
* [When should I use this?](#when-should-i-use-this)
* [Install](#install)
* [Use](#use)
* [API](#api)
    * [Options](#options)
    * [Handlers](#handlers)
    * [Footnotes](#footnotes)
    * [Customizing Output](#customizing-output)
    * [Unknown Nodes](#unknown-nodes)
* [Examples](#examples)
    * [Example: Basic Conversion](#example-basic-conversion)
    * [Example: Handling HTML in Markdown](#example-handling-html-in-markdown)
    * [Example: Footnotes in Different Languages](#example-footnotes-in-different-languages)
* [HTML](#html)
* [CSS](#css)
* [Syntax Tree](#syntax-tree)
* [Types](#types)
* [Compatibility](#compatibility)
* [Security](#security)
* [Related](#related)
* [Contribute](#contribute)
* [License](#license)


## What is this?

This package is a [unified][] plugin that transforms a markdown Abstract Syntax Tree (mdast) into an HTML Abstract Syntax Tree (hast).  This allows you to leverage the powerful and extensive ecosystem of rehype plugins to perform tasks like minification, formatting, sanitization, code highlighting, and more on the generated HTML.


## When should I use this?

Use `remark-rehype` when:

* You need to convert markdown to HTML.
* You want to leverage rehype plugins for advanced HTML processing.
* You're building a static site generator, a documentation tool, or any application that needs to render markdown to HTML.


## Install

```bash
npm install remark-rehype
```

## Use

```javascript
import {unified} from 'unified';
import remarkParse from 'remark-parse';
import remarkRehype from 'remark-rehype';
import rehypeStringify from 'rehype-stringify';
import {read} from 'to-vfile';

async function convertMarkdownToHTML(markdownFile) {
  const file = await unified()
    .use(remarkParse)
    .use(remarkRehype)
    .use(rehypeStringify)
    .process(await read(markdownFile));
  return String(file);
}

// Example usage (replace 'example.md' with your file):
const html = await convertMarkdownToHTML('example.md');
console.log(html);
```


## API

### Options

Configuration options for `remark-rehype`:

*   `allowDangerousHtml` (boolean, default: `false`): Allow raw HTML in markdown input.  **Use with caution!**  This option bypasses the typical safety measures, making your application vulnerable to XSS if the input isn't trusted.  Use `rehype-raw` and `rehype-sanitize` to handle untrusted HTML safely.

*   `footnoteBackContent`, `footnoteBackLabel`, `footnoteLabel`, `footnoteLabelProperties`, `footnoteLabelTagName` (see Footnotes section below)


### Handlers

Customize how specific markdown nodes are converted to HTML.  This can be used to add custom attributes or styles to particular elements.


### Footnotes

Handles footnote support.  Several options control the behavior and appearance of footnotes:

*   `footnoteBackContent`: (Function or string, default: default function): Customize the backreference content.  A function allows you to create dynamic content based on the footnote reference.
*   `footnoteBackLabel`: (Function or string, default: default function): Customize the label used for the footnote backreference.
*   `footnoteLabel`: (string, default: 'Footnotes'): Customize the label text displayed for the footnotes section.
*   `footnoteLabelProperties`:  (Object, default: `{className: ['sr-only']}`):  Customize the properties of the footnote label element.
*   `footnoteLabelTagName`: (string, default: 'h2'): Customize the tag name used for the footnote label element.


### Customizing Output

*   `handlers`:  Allows adding custom handling for any mdast nodes not handled by default.
*   `passThrough`:  Allows specifying certain mdast node types to be passed through to the resulting hast tree without transformation.  Useful for special markdown syntax or data you don't want converted.


### Unknown Nodes

*   `unknownHandler`: (Function, optional): Define custom handling for any markdown nodes that `remark-rehype` doesn't recognize.  By default, unknown nodes are wrapped in a `<div>`.


## Examples

### Example: Basic Conversion

```markdown
# This is a title

This is a paragraph.
```

```javascript
// ... (code as in the Use section)
```


### Example: Handling HTML in Markdown

```markdown
<p>This is some <strong>HTML</strong>.</p>
```

**Safe Approach:**  Use `rehype-raw`, `rehype-sanitize` and  `allowDangerousHtml` in conjunction to handle potentially unsafe HTML:

```javascript
import rehypeRaw from 'rehype-raw';
import rehypeSanitize from 'rehype-sanitize';

// ... (code as in the Use section)
.use(rehypeRaw)
.use(rehypeSanitize)
```


### Example: Footnotes in Different Languages

```markdown
This is a footnote example.[^footnote]

[^footnote]: This is the footnote definition.
```

```javascript
// ... (code as in the Use section)
.use(remarkRehype, {
  footnoteLabel: 'Fußnoten', // German label for footnotes
  // ... other footnote options
});
```


## HTML

The HTML output adheres to the structure defined by the markdown input.


## CSS

You can style the generated HTML using CSS.  Consider using a CSS framework or a dedicated stylesheet for markdown to streamline this.


## Syntax Tree

This plugin transforms markdown syntax trees (mdast) into HTML syntax trees (hast).


## Types

This package is fully typed with TypeScript.


## Compatibility

This package is compatible with the latest versions of `unified`, `remark`, and `rehype`.


## Security

Be extremely cautious when using `allowDangerousHtml`.  Untrusted user input could lead to XSS vulnerabilities.  Prioritize sanitization to prevent risks!


## Related

*   [`rehype-raw`]: For handling raw HTML within your markdown input.
*   [`rehype-sanitize`]:  To sanitize HTML and prevent XSS attacks.
*   [`rehype-remark`]: The inverse of `remark-rehype`, converting HTML to markdown.


## Contribute

See the `contributing.md` file in the repository for details.


## License

[MIT][license] © [Titus Wormer][author]

<!-- Definitions (moved to bottom for cleaner reading) -->

[build-badge]: https://github.com/remarkjs/remark-rehype/workflows/main/badge.svg
[build]: https://github.com/remarkjs/remark-rehype/actions
[coverage-badge]: https://img.shields.io/codecov/c/github/remarkjs/remark-rehype.svg
[coverage]: https://codecov.io/github/remarkjs/remark-rehype
[downloads-badge]: https://img.shields.io/npm/dm/remark-rehype.svg
[downloads]: https://www.npmjs.com/package/remark-rehype
[size-badge]: https://img.shields.io/bundlejs/size/remark-rehype
[size]: https://bundlejs.com/?q=remark-rehype
[sponsors-badge]: https://opencollective.com/unified/sponsors/badge.svg
[backers-badge]: https://opencollective.com/unified/backers/badge.svg
[collective]: https://opencollective.com/unified
[chat-badge]: https://img.shields.io/badge/chat-discussions-success.svg
[chat]: https://github.com/remarkjs/remark/discussions
[rehype-raw]: https://github.com/rehypejs/rehype-raw
[rehype-sanitize]: https://github.com/rehypejs/rehype-sanitize
[remark]: https://github.com/remarkjs/remark
[rehype]: https://github.com/rehypejs/rehype
[unified]: https://github.com/unifiedjs/unified
[license]: license
[author]: https://wooorm.com
```

**Key Improvements:**

* **Clearer Structure:** The README is better organized with sections for options, handlers, footnotes, and more.
* **Emphasis on Security:**  Explicitly calls out the importance of careful use of `allowDangerousHtml` and the need for sanitization.
* **Example Improvements:**  Provides more robust examples, including the crucial safety example for handling HTML in markdown.
* **Concise Language:**  Streamlined explanations and reduced redundancy.
* **Modern Approach:**  Uses the more up-to-date `unified` module import style.
* **Moved Definitions:** Definitions for external links are collected at the bottom.


This revised README is much more helpful and informative, addressing the security concerns raised in the previous version. Remember to always sanitize user-provided data to protect against potential vulnerabilities. Remember to replace `'example.md'` with your file's actual path.