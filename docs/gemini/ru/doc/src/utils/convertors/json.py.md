# Модуль `json`

## Обзор

Модуль `json` предоставляет функции для конвертации JSON данных в различные форматы, такие как CSV, SimpleNamespace, XML и XLS. Он включает в себя функции для чтения JSON данных из строк, словарей, списков и файлов, а также для записи в файлы CSV и XLS.

## Подробней

Этот модуль предоставляет набор инструментов для преобразования JSON данных в различные форматы, что может быть полезно для интеграции с различными системами и приложениями, требующими различные форматы данных. Например, функция `json2csv` может быть использована для экспорта данных из JSON формата в формат CSV для анализа в табличных редакторах, а функция `json2xml` может быть использована для интеграции с системами, требующими данные в формате XML.

## Функции

### `json2csv`

```python
def json2csv(json_data: str | list | dict | Path, csv_file_path: str | Path) -> bool:
    """
    Преобразует JSON данные или JSON файл в формат CSV с разделителем в виде запятой.

    Args:
        json_data (str | list | dict | Path): JSON данные в виде строки, списка словарей или пути к JSON файлу.
        csv_file_path (str | Path): Путь к CSV файлу для записи.

    Returns:
        bool: True, если преобразование выполнено успешно, False в противном случае.

    Raises:
        ValueError: Если тип json_data не поддерживается.
        Exception: Если не удается разобрать JSON или записать CSV.

    Example:
        >>> json2csv('{"name": "John", "age": 30}', 'output.csv')
        True
    """
```

**Как работает функция**:
Функция `json2csv` принимает JSON данные в различных форматах (строка, список, словарь или путь к файлу) и преобразует их в формат CSV. Она сначала загружает JSON данные в зависимости от их типа, а затем использует функцию `save_csv_file` из модуля `src.utils.csv` для записи данных в CSV файл. Если в процессе возникают ошибки, функция логирует их с помощью `logger.error`.

**Параметры**:
- `json_data` (str | list | dict | Path): JSON данные для преобразования. Может быть строкой, списком словарей, словарем или путем к JSON файлу.
- `csv_file_path` (str | Path): Путь к CSV файлу, в который будут записаны преобразованные данные.

**Возвращает**:
- `bool`: Возвращает `True`, если преобразование прошло успешно, и `False` в случае ошибки.

**Вызывает исключения**:
- `ValueError`: Вызывается, если тип `json_data` не поддерживается.
- `Exception`: Вызывается, если не удается разобрать JSON данные или записать CSV файл.

### `json2ns`

```python
def json2ns(json_data: str | dict | Path) -> SimpleNamespace:
    """
    Преобразует JSON данные или JSON файл в объект SimpleNamespace.

    Args:
        json_data (str | dict | Path): JSON данные в виде строки, словаря или пути к JSON файлу.

    Returns:
        SimpleNamespace: Разобранные JSON данные в виде объекта SimpleNamespace.

    Raises:
        ValueError: Если тип json_data не поддерживается.
        Exception: Если не удается разобрать JSON.

    Example:
        >>> json2ns('{"name": "John", "age": 30}')
        namespace(name='John', age=30)
    """
```

**Как работает функция**:
Функция `json2ns` преобразует JSON данные в объект `SimpleNamespace`. Она принимает JSON данные в различных форматах (строка, словарь или путь к файлу), загружает их и создает объект `SimpleNamespace` на основе загруженных данных. В случае возникновения ошибок функция логирует их с использованием `logger.error`.

**Параметры**:
- `json_data` (str | dict | Path): JSON данные для преобразования. Может быть строкой, словарем или путем к JSON файлу.

**Возвращает**:
- `SimpleNamespace`: Объект `SimpleNamespace`, представляющий JSON данные.

**Вызывает исключения**:
- `ValueError`: Вызывается, если тип `json_data` не поддерживается.
- `Exception`: Вызывается, если не удается разобрать JSON данные.

### `json2xml`

```python
def json2xml(json_data: str | dict | Path, root_tag: str = "root") -> str:
    """
    Преобразует JSON данные или JSON файл в формат XML.

    Args:
        json_data (str | dict | Path): JSON данные в виде строки, словаря или пути к JSON файлу.
        root_tag (str): Корневой элемент для XML.

    Returns:
        str: Результирующая XML строка.

    Raises:
        ValueError: Если тип json_data не поддерживается.
        Exception: Если не удается разобрать JSON или преобразовать в XML.

    Example:
        >>> json2xml('{"name": "John", "age": 30}', root_tag='person')
        '<person><name>John</name><age>30</age></person>'
    """
```

**Как работает функция**:
Функция `json2xml` преобразует JSON данные в формат XML. Она принимает JSON данные в различных форматах (строка, словарь или путь к файлу) и использует функцию `dict2xml` из модуля `src.utils.convertors.dict` для преобразования данных в XML формат.

**Параметры**:
- `json_data` (str | dict | Path): JSON данные для преобразования. Может быть строкой, словарем или путем к JSON файлу.
- `root_tag` (str): Корневой элемент для XML. По умолчанию "root".

**Возвращает**:
- `str`: XML строка, представляющая JSON данные.

**Вызывает исключения**:
- `ValueError`: Вызывается, если тип `json_data` не поддерживается.
- `Exception`: Вызывается, если не удается разобрать JSON данные или преобразовать их в XML.

### `json2xls`

```python
def json2xls(json_data: str | list | dict | Path, xls_file_path: str | Path) -> bool:
    """
    Преобразует JSON данные или JSON файл в формат XLS.

    Args:
        json_data (str | list | dict | Path): JSON данные в виде строки, списка словарей или пути к JSON файлу.
        xls_file_path (str | Path): Путь к XLS файлу для записи.

    Returns:
        bool: True, если преобразование выполнено успешно, False в противном случае.

    Raises:
        ValueError: Если тип json_data не поддерживается.
        Exception: Если не удается разобрать JSON или записать XLS.
    """
```

**Как работает функция**:
Функция `json2xls` преобразует JSON данные в формат XLS. Она принимает JSON данные в различных форматах (строка, список, словарь или путь к файлу) и использует функцию `save_xls_file` из модуля `src.utils.xls` для записи данных в XLS файл.

**Параметры**:
- `json_data` (str | list | dict | Path): JSON данные для преобразования. Может быть строкой, списком словарей, словарем или путем к JSON файлу.
- `xls_file_path` (str | Path): Путь к XLS файлу, в который будут записаны преобразованные данные.

**Возвращает**:
- `bool`: Возвращает `True`, если преобразование прошло успешно, и `False` в случае ошибки.

**Вызывает исключения**:
- `ValueError`: Вызывается, если тип `json_data` не поддерживается.
- `Exception`: Вызывается, если не удается разобрать JSON данные или записать XLS файл.