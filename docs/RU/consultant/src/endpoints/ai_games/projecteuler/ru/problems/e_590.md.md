# Анализ кода модуля e_590.md

**Качество кода**
8
- Плюсы
    - Текст задачи четко структурирован и представлен в формате Markdown.
    - Описаны математические условия для существования треугольника с углом 120 градусов.
    - Приведен пример допустимого решения.
    - Дано определение функции T(n) и пример значения T(1000).
    - Четко сформулирована задача для решения.

- Минусы
    - Отсутствует код на Python для решения задачи.
    - Нет docstring и комментариев в коде.
    - Не используются импорты, нужные для решения задачи.

**Рекомендации по улучшению**

1.  **Добавить код на Python**: Необходимо предоставить код на Python, который решает задачу, описанную в тексте.
2.  **Добавить документацию**: Код должен быть снабжен подробной документацией в формате reStructuredText (RST). Это включает в себя docstring для функций, переменных, классов и комментарии в коде.
3.  **Импортировать необходимые модули**: Добавить импорты, необходимые для работы кода, такие как `math` для математических операций.
4.  **Логирование ошибок**: Использовать `from src.logger.logger import logger` для обработки и логирования ошибок.
5.  **Рефакторинг кода**:  Код должен быть оптимизирован и соответствовать стандартам Python.
6.  **Избегать избыточного try-except**:  Использовать `logger.error` для обработки ошибок.

**Оптимизированный код**

```python
"""
Модуль для решения задачи 590 с сайта Project Euler.
=========================================================================================

Задача касается нахождения количества треугольников со сторонами a, b и c,
которые имеют ровно один угол 120°, где a, b и c являются целыми числами,
не превышающими n.

Пример использования
--------------------

.. code-block:: python

    from src.endpoints.ai_games.projecteuler.ru.problems.e_590 import solve_problem
    result = solve_problem(1000)
    print(result)
"""
from math import gcd
from src.logger.logger import logger

def count_triangles(limit: int) -> int:
    """
    Подсчитывает количество треугольников с целыми сторонами не более limit,
    у которых ровно один угол равен 120 градусам.

    :param limit: Максимальная длина стороны треугольника.
    :return: Количество треугольников, удовлетворяющих условию.
    """
    count = 0
    # Итерация по всем возможным значениям p
    for p in range(2, int((limit ** 0.5) * 2 ** 0.5) + 1):
        # Итерация по всем возможным значениям q, таким, что q < p
        for q in range(1, p):
            # Проверка, что p и q взаимно просты
            if gcd(p, q) == 1:
                # Вычисление a, b, c для m = 1
                a = p * p - q * q
                b = 2 * p * q + q * q
                c = p * p + p * q + q * q
                # Итерация по всем возможным значениям m
                m = 1
                while True:
                    # Вычисление фактических сторон треугольника
                    ma = m * a
                    mb = m * b
                    mc = m * c
                    # Проверка, что стороны не превышают предел
                    if max(ma, mb, mc) > limit:
                         break
                    # Увеличение счетчика
                    count += 1
                    # Увеличение m
                    m += 1
    # Код возвращает общее количество треугольников
    return count


def solve_problem(limit: int) -> int:
    """
    Решает задачу Project Euler 590 для заданного предела.

    :param limit: Максимальная длина стороны треугольника.
    :return: Количество треугольников, удовлетворяющих условию.
    """
    try:
        # Код вызывает функцию count_triangles для подсчета количества треугольников
        result = count_triangles(limit)
        # Код возвращает результат
        return result
    except Exception as e:
        #  Код логирует ошибку и возвращает 0
        logger.error(f"Произошла ошибка при решении задачи: {e}", exc_info=True)
        return 0


if __name__ == '__main__':
    # Код запускается при прямом вызове файла
    # Код выводит результат для limit = 1000
    print(f"T(1000) = {solve_problem(1000)}")
    # Код выводит результат для limit = 10^8
    print(f"T(10^8) = {solve_problem(10**8)}")
```