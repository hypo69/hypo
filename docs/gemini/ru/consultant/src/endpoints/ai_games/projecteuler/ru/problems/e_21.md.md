# Анализ кода модуля e_21.md

**Качество кода**

9
- Плюсы
    - Код представляет собой четкое описание задачи Project Euler на русском языке.
    - Описаны условия задачи и приведен пример для наглядности.
- Минусы
    - Отсутствует сам код решения задачи.
    - Не хватает документации в формате reStructuredText (RST).

**Рекомендации по улучшению**

1.  Добавить в файл Python код для решения задачи.
2.  Обеспечить весь код необходимыми комментариями в формате reStructuredText (RST), включая docstring для модуля и функций.
3.  Использовать `j_loads` или `j_loads_ns` для чтения файлов, если это потребуется.
4.  Добавить логирование ошибок с помощью `from src.logger.logger import logger`.
5.  Оформить комментарии в соответствии с инструкцией.
6.  Предоставить полный код решения в одном блоке, который можно скопировать и вставить для замены исходного кода.

**Оптимизированный код**

```python
"""
Модуль для решения задачи 21 Project Euler - Дружественные числа.
==================================================================

Задача заключается в поиске суммы всех дружественных чисел меньше 10000.
Дружественные числа - это два числа, для которых сумма собственных делителей
одного равна другому числу и наоборот, при этом числа не равны друг другу.

Пример:
    Числа 220 и 284 - дружественные.
    d(220) = 1 + 2 + 4 + 5 + 10 + 11 + 20 + 22 + 44 + 55 + 110 = 284
    d(284) = 1 + 2 + 4 + 71 + 142 = 220

"""
from src.logger.logger import logger
from typing import List

def sum_of_divisors(n: int) -> int:
    """
    Вычисляет сумму собственных делителей числа.

    :param n: Число, для которого вычисляется сумма делителей.
    :return: Сумма собственных делителей числа n.
    """
    divisors_sum = 0
    for i in range(1, n):
        if n % i == 0:
            divisors_sum += i
    return divisors_sum

def find_amicable_numbers(limit: int) -> List[int]:
    """
    Находит все дружественные числа меньше заданного лимита.

    :param limit: Верхняя граница поиска дружественных чисел.
    :return: Список дружественных чисел.
    """
    amicable_numbers = []
    for a in range(1, limit):
        b = sum_of_divisors(a)
        if a != b and sum_of_divisors(b) == a:
            amicable_numbers.append(a)
    return amicable_numbers

def main() -> int:
    """
    Основная функция для запуска решения задачи.

    :return: Сумма всех дружественных чисел меньше 10000.
    """
    try:
        limit = 10000
        amicable_numbers = find_amicable_numbers(limit)
        total_sum = sum(set(amicable_numbers)) # Используем set, чтобы избежать повторений
        return total_sum
    except Exception as e:
        logger.error(f'Произошла ошибка при выполнении поиска дружественных чисел: {e}')
        return 0


if __name__ == "__main__":
    result = main()
    print(f"Сумма всех дружественных чисел меньше 10000: {result}")

# Задача No 21
# Дружественные числа
# Условия
# Пусть d(n) определяется как сумма собственных делителей n (числа меньшие n, которые делят n нацело). Если d(a) = b и d(b) = a, где a ≠ b, то a и b называются дружественной парой, а a и b называются дружественными числами.
#
# Например, собственные делители числа 220 — это 1, 2, 4, 5, 10, 11, 20, 22, 44, 55 и 110. Поэтому d(220) = 284.
# Собственные делители числа 284 — это 1, 2, 4, 71 и 142, поэтому d(284) = 220.
#
# Оцените сумму всех дружественных чисел меньше 10000.
```