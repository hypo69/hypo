# Анализ кода модуля `50_hi_q.ru.md`

**Качество кода: 7/10**

*   **Плюсы:**
    *   Документ содержит подробное описание игры "Hl_Q" и пошаговую инструкцию её реализации.
    *   Приведены примеры работы программы и возможные ограничения.
    *   Есть рекомендации по реализации на Python с использованием необходимых модулей и структур.
*   **Минусы:**
    *   Документ не содержит кода, только описание.
    *   Отсутствует формализованная документация в формате reStructuredText.
    *   Не используется логирование ошибок.
    *   Нет обработки исключений, связанных с вводом пользователя.

**Рекомендации по улучшению**

1.  **Форматирование**: Перевести все комментарии в формат RST.
2.  **Реализация**: Добавить реализацию игры на Python с учётом инструкций и рекомендаций.
3.  **Логирование**: Использовать `from src.logger.logger import logger` для логирования ошибок и отладки.
4.  **Обработка ошибок**: Добавить проверку введённых пользователем данных.
5.  **Функционал**: Добавить подсчёт количества попыток и уровни сложности.
6.  **Документация**: Добавить docstring к функциям и классам.

**Оптимизированный код**

```markdown
### Название игры: **Hl_Q** (Угадай слово)
===============================================================================

#### Описание
**Hl_Q** — это игра, в которой программа загадывает слово, а игрок должен попытаться угадать его, вводя буквы по очереди. После каждого ввода игроку показывается, какие буквы из его предположения правильно совпали с загаданным словом и в какой позиции. Игра продолжается до тех пор, пока игрок не угадает слово полностью.

---

### Пошаговая инструкция для реализации
-----------------------------------------------------

#### 1. **Инициализация игры**
   - При запуске игры программа приветствует игрока и объясняет правила:
     ```
     Добро пожаловать в игру Hl_Q!
     Я загадаю слово, а ваша задача — угадать его.
     Я буду показывать, какие буквы вы угадали и на каких позициях.
     У вас неограниченное количество попыток!
     ```
   - Программа выбирает случайное слово из заранее заданного списка (например, "питон", "яблоко", "компьютер").
   - Загаданное слово отображается в виде пустых подчеркиваний (например, "_ _ _ _").

#### 2. **Основной процесс игры**
   - **Ввод игрока:**
     1. Игрок поочередно вводит буквы, пытаясь угадать слово.
     2. Программа отображает текущее состояние слова, показывая правильные буквы в соответствующих позициях, а неверные оставляет как подчеркивания.
     3. Если буква присутствует в слове, программа открывает соответствующие позиции. Если нет — программа сообщает, что буква неверная.
   
   - **Подсказки:**
     1. После каждого хода программа показывает текущее состояние слова (с подчеркиваниями на месте ещё не угаданных букв).
     2. Игрок может вводить только одну букву за раз.
   
   - **Победа:**
     1. Игра считается выигранной, когда игрок угадывает все буквы слова.
     2. Программа сообщает победу:
        ```
        Поздравляем! Вы угадали слово!
        ```

#### 3. **Завершение игры**
   - После того как игрок угадывает слово, программа предлагает сыграть снова:
     ```
     Хотите сыграть снова? (да/нет)
     ```
   - Если игрок выбирает "да", начинается новый раунд с новым словом.
   - Если "нет", программа завершает работу.

---

### Пример работы программы
-----------------------------------------------------

1. **Начало игры:**
   ```
   Добро пожаловать в игру Hl_Q!
   Я загадаю слово, а ваша задача — угадать его.
   Я буду показывать, какие буквы вы угадали и на каких позициях.
   У вас неограниченное количество попыток!
   Загаданное слово: _ _ _ _ _
   Введите вашу букву:
   > п
   Программное слово: п _ _ _ _
   Введите вашу букву:
   > и
   Программное слово: п и _ _ _
   Введите вашу букву:
   > т
   Программное слово: п и т _ _
   Введите вашу букву:
   > о
   Программное слово: п и т о _
   Введите вашу букву:
   > н
   Поздравляем! Вы угадали слово!
   Хотите сыграть снова? (да/нет):
   > нет
   Спасибо за игру!
   ```

---

### Возможные ограничения
-----------------------------------------------------
- Игрок может вводить только одну букву за раз.
- Программа должна обрабатывать только буквенные символы и сообщать об ошибке, если введён невалидный символ (например, цифра или специальный знак).
- Игроку не дается подсказка о количестве букв в слове (если не указано иное).

---

### Реализация
-----------------------------------------------------
Игра может быть реализована на Python с использованием следующих возможностей:
- **Модуль `random`** для выбора случайного слова.
- **Циклы и условия** для обработки ввода игрока, отображения состояния слова и проверки победы.
- Текстовое отображение текущего состояния слова с угаданными и неугаданными буквами.

Рекомендуется:
- Добавить систему подсчёта количества попыток для каждого раунда.
- Реализовать возможность выбора уровня сложности, где сложность будет зависеть от длины слова.

```python
"""
Модуль для реализации игры "Hl_Q" (Угадай слово).
=========================================================================================

Этот модуль реализует игру, в которой компьютер загадывает слово,
а игрок должен угадать его, вводя буквы по очереди.

Пример использования
--------------------

Пример запуска игры:

.. code-block:: python

    game = HlQGame()
    game.start_game()
"""
import random
from src.logger.logger import logger # импорт модуля для логирования

class HlQGame:
    """
    Класс, реализующий логику игры "Hl_Q".

    :ivar words: Список слов для игры.
    :vartype words: list
    :ivar secret_word: Загаданное слово.
    :vartype secret_word: str
    :ivar guessed_word: Слово с угаданными буквами.
    :vartype guessed_word: list
    :ivar attempts: Количество попыток.
    :vartype attempts: int
    """
    def __init__(self, words = None):
        """
        Инициализирует игру с заданным списком слов.
        
        :param words: Список слов для выбора (по умолчанию заданный список).
        :type words: list, optional
        """
        self.words = words or ["питон", "яблоко", "компьютер", "игра", "программа"]
        self.secret_word = ""
        self.guessed_word = []
        self.attempts = 0
    
    def _choose_word(self) -> None:
        """
        Выбирает случайное слово из списка `self.words`.
        """
        self.secret_word = random.choice(self.words)
        self.guessed_word = ["_" for _ in self.secret_word] # Код инициализирует список подчеркиваний на длину загаданного слова

    def _display_word(self) -> None:
        """
        Отображает текущее состояние слова с угаданными буквами.
        """
        print(" ".join(self.guessed_word))

    def _get_letter(self) -> str:
        """
        Запрашивает у игрока ввод буквы, обрабатывая исключения.

        :return: Введенная игроком буква.
        :rtype: str
        """
        while True:
           try:
                letter = input("Введите вашу букву: ").lower()
                if len(letter) != 1 or not letter.isalpha(): # Код проверяет, что введена одна буква
                    raise ValueError("Пожалуйста, введите одну букву.") #  Код поднимает исключение если введено не валидное значение
                return letter
           except ValueError as e:
                logger.error(f"Ошибка ввода: {e}") # Логирование ошибок ввода
                print(e) # Код выводит сообщение об ошибке

    def _update_word(self, letter: str) -> None:
        """
        Обновляет слово, добавляя угаданные буквы.
         
         :param letter: Введенная игроком буква.
         :type letter: str
        """
        for i, char in enumerate(self.secret_word): # Код проходит по буквам загаданного слова с индексом
            if char == letter: # Код проверяет соответствие букв
                self.guessed_word[i] = letter # Код обновляет угаданное слово, открывая букву

    def _check_win(self) -> bool:
        """
        Проверяет, угадано ли слово.
        
        :return: True, если слово угадано, False в противном случае.
        :rtype: bool
        """
        return "_" not in self.guessed_word # Код возвращает результат проверки на наличие не угаданных букв

    def start_game(self) -> None:
        """
        Запускает игровой процесс.
        """
        print("Добро пожаловать в игру Hl_Q!")
        print("Я загадаю слово, а ваша задача — угадать его.")
        print("Я буду показывать, какие буквы вы угадали и на каких позициях.")
        print("У вас неограниченное количество попыток!")

        while True:
            self._choose_word()
            print("Загаданное слово:", " ".join(["_" for _ in self.secret_word]))
            self.attempts = 0 # Код обнуляет количество попыток при старте новой игры
            while not self._check_win():
                letter = self._get_letter()
                self._update_word(letter)
                self._display_word()
                self.attempts += 1 # Код увеличивает количество попыток
            print("Поздравляем! Вы угадали слово!")
            play_again = input("Хотите сыграть снова? (да/нет): ").lower() #  Код запрашивает желание игрока сыграть еще
            if play_again != "да": # Код проверяет ввод пользователя
                print("Спасибо за игру!")
                break # Код прерывает цикл игры
```