# test_control.py

## Overview

This module contains unit tests for the `control` module in the TinyTroupe project.  It verifies the functionality of starting, checkpointing, and ending simulations, including scenarios with agents, a world, and a factory.  The tests employ various TinyTroupe components like `TinyPerson`, `TinyWorld`, `TinyPersonFactory`, and others.  Error handling and simulation state are also tested.


## Table of Contents

* [test_begin_checkpoint_end_with_agent_only](#test_begin_checkpoint_end_with_agent_only)
* [test_begin_checkpoint_end_with_world](#test_begin_checkpoint_end_with_world)
* [test_begin_checkpoint_end_with_factory](#test_begin_checkpoint_end_with_factory)


## Functions

### `test_begin_checkpoint_end_with_agent_only`

**Description**: This function tests the simulation lifecycle (begin, checkpoint, end) focusing on agents only. It initializes, interacts with, and checks the status of a simulation with two agent instances.

**Parameters**:

- `setup`: (object): A setup object (likely from a testing framework).

**Raises**:
- `AssertionError`:  If assertions about the simulation state, file existence, or agent properties fail.


### `test_begin_checkpoint_end_with_world`

**Description**: This function tests the simulation lifecycle, starting with a `TinyWorld`. It creates a world, runs it, and then checks the simulation status.

**Parameters**:

- `setup`: (object): A setup object (likely from a testing framework).

**Raises**:
- `AssertionError`:  If assertions about the simulation state, file existence, or world properties fail.



### `test_begin_checkpoint_end_with_factory`

**Description**: This function tests the simulation lifecycle with a `TinyPersonFactory`. It demonstrates creating simulations with different instances from a factory and comparing their properties.

**Parameters**:

- `setup`: (object): A setup object (likely from a testing framework).

**Raises**:
- `AssertionError`:  If assertions about the simulation state, file existence, or agent properties fail.

- `AttributeError`: If an attribute of an agent is not found.


### `aux_simulation_to_repeat`

**Description**:  Helper function within `test_begin_checkpoint_end_with_factory` to create and run a simulation iteratively.


**Parameters**:
- `iteration` (int): The current iteration of the simulation.
- `verbose` (bool, optional):  If True, prints debugging information about the simulation and agent. Defaults to False.

**Returns**:
- `agent` (TinyPerson): The agent generated by the factory in the simulation.

**Raises**:
- `AssertionError`:  If assertions about the simulation state, file existence, or agent properties fail.