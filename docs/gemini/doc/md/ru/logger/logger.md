```markdown
# Модуль `src.logger`

## Обзор

Данный модуль предоставляет утилиту для ведения логов, реализованную как синглтон.  Утилита поддерживает различные уровни логов, форматы вывода (консоль, файл, JSON), и возможность цветной расцветки сообщений в консоли.

## Классы

### `SingletonMeta`

**Описание**:  Метакласс для реализации паттерна проектирования "синглтон". Обеспечивает создание только одного экземпляра класса.

**Особенности**:
- Использует `threading.Lock()` для синхронизации доступа к созданию экземпляра.
- Хранит экземпляры в словаре `_instances`.

### `JsonFormatter`

**Описание**:  Настраиваемый форматтер для логов в формате JSON.

**Методы**:
- `format(record)`: Форматирует запись лога в JSON.  Возвращает строку в формате JSON.

### `Logger`

**Описание**:  Класс логгера, реализующий паттерн "синглтон". Поддерживает вывод логов в консоль, файлы и JSON.

**Методы**:

#### `__init__`

**Описание**: Инициализирует экземпляр логгера.  Инициализирует все внутрииерархические логгеры, устанавливает флаг `_initialized` в `False`.

#### `_configure_logger`

**Описание**:  Конфигурирует и возвращает логгер с заданными параметрами.

**Параметры**:
- `name` (str): Имя логгера.
- `log_path` (str): Путь к файлу лога.
- `level` (int): Уровень лога (по умолчанию `logging.DEBUG`).
- `formatter` (logging.Formatter, optional): Форматтер для лога (по умолчанию стандартный формат).
- `mode` (str, optional): Режим открытия файла (по умолчанию `"a"`).

**Возвращает**:
- `logging.Logger`: Конфигурированный логгер.

#### `initialize_loggers`

**Описание**: Инициализирует логгеры для консоли, файлов (info, debug, error) и JSON вывода. Должен быть вызван один раз.

**Параметры**:
- `info_log_path` (str, optional): Путь к файлу лога уровня INFO.
- `debug_log_path` (str, optional): Путь к файлу лога уровня DEBUG.
- `errors_log_path` (str, optional): Путь к файлу лога уровня ERROR и CRITICAL.
- `json_log_path` (str, optional): Путь к файлу лога в формате JSON.

**Вызывает исключения**:
- Возможны исключения при работе с файлами (например, при отсутствии доступа).

#### `_format_message`

**Описание**: Форматирует сообщение с опциональными цветом и информацией об исключении.

**Параметры**:
- `message` (str): Сообщение для лога.
- `ex` (str, optional): Информация об исключении (строка).
- `color` (str, optional): Цвет вывода сообщения (строка).

**Возвращает**:
- `str`: Отформатированное сообщение.

#### `_ex_full_info`

**Описание**: Возвращает полную информацию об исключении, включая имя файла, функции и номер строки.

**Параметры**:
- `ex` (Exception, optional): Экземпляр исключения.

**Возвращает**:
- `str`:  Подробная информация об исключении.


#### `log`

**Описание**:  Общая функция для записи логов на разных уровнях.

**Параметры**:
- `level` (int): Уровень лога (logging.INFO, logging.DEBUG и т.д.).
- `message` (str): Сообщение для лога.
- `ex` (Exception, optional): Экземпляр исключения.
- `exc_info` (bool, optional): Флаг для включения/выключения информации об исключении.
- `color` (str, tuple, optional): Цвет сообщения для консоли.

**Возвращает**:
- Возвращает ничего.

#### `info`, `success`, `warning`, `debug`, `error`, `critical`, `info_red`, `info_black`

**Описание**:  Методы для записи логов на соответствующих уровнях. Эти методы вызывают `log` с предопределенными уровнями и цветом для консоли.


## Функции (нет)

## Пример использования

```python
logger: Logger = Logger()
logger.initialize_loggers(info_log_path='info.log', debug_log_path='debug.log', errors_log_path='errors.log', json_log_path='log.json')
logger.info('Тестовое сообщение INFO')
logger.debug('Тестовое сообщение DEBUG')
```
```
```
```
```
```