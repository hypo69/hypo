# Правила кодирования

## Обзор

Этот документ описывает правила и рекомендации по написанию кода, которым необходимо следовать при работе над проектом. Цель этих правил - обеспечить читаемость, консистентность и поддерживаемость кодовой базы.

## Содержание

- [Общие принципы](#общие-принципы)
- [Комментарии](#комментарии)
- [Документация](#документация)
- [Форматирование кода](#форматирование-кода)
- [Параметры функций](#параметры-функций)
- [Логирование](#логирование)
- [Константы](#константы)

## Общие принципы

### Основные положения
- Используйте консистентный стиль кодирования для улучшения читаемости и консистентности кода.
- Все изменения и рекомендации должны соответствовать этому формату.

---

## Комментарии

### Комментарии после `#`

- **Не изменять**: Комментарии после символа `#` должны оставаться неизменными и быть понятными. Не переписывайте и не удаляйте их, даже если они начинаются с кода.
- **Информативные**: Внутренние комментарии должны быть информативными и объяснять следующий блок кода.
- **Формат**: Используйте формат reStructuredText (RST) для всех комментариев и документации.
- **Терминология**: Избегайте использования таких терминов, как 'get', 'do' в комментариях. Вместо этого используйте фразы, такие как 'check', 'send', 'code executes ...'.
- **Пассивные формы**: Предпочитайте пассивные формы: 'copying', 'formatting', 'creating' и т.д.
- **Пустые строки**: Если есть пустые строки или `...`, не документируйте их.

### Комментарии после `"""`

- **Оптимизировать**: Комментарии после символа `"""` можно и нужно оптимизировать, исходя из фактического поведения кода.

---

## Документация

### Docstring

- Каждая функция, метод и класс должны иметь docstring в стиле Sphinx.

  ```python
  def function(param: str, param1: Optional[str | dict] = None) -> dict | None:
      """
      Function description.

      :param param: Description of the `param` parameter.
      :param param1: (Optional) Description of the `param1` parameter.
      :return: Description of the return value.
      :raises SomeError: Conditions for the exception.
      """
  ```

### Описание модуля

- Добавьте описание модуля в начало каждого файла:

  ```python
  """
  Module for working with a programmer assistant
  =========================================================================================

  Description of the module functionality.

  Example usage
  -------------

  .. code-block:: python

      example_usage()
  """
  ```

---

## Форматирование кода

### Кавычки

- Используйте одинарные кавычки вместо двойных кавычек.

### Пробелы

- Используйте пробелы вокруг оператора присваивания `=`. Пример:

  ```python
  a = 1
  ```

- Применяйте пробелы консистентно во всех выражениях и присваиваниях:

  ```python
  result = 10 if x > 5 else 20
  ```

### Импорт

- Всегда включайте строку `import header` в начало файла.

### Отладка

- Добавляйте `...` между `logger` и `return` для отладки, пример:

  ```python
  logger.error('Error while executing task', ex)
  ...
  return
  ```

---

## Параметры функций

### Типизация

- Параметры должны быть явно типизированы. Если значение по умолчанию `None`, используйте `Optional`. Пример:

  ```python
  def critical(self, message: str, ex: Optional = None, exc_info: Optional[bool] = True):
  ```

### Избегать `Union`

- Избегайте использования `Union`.

---

## Логирование

### Logger

- Используйте `from src.logger.logger import logger` для логирования вместо стандартного `logging`.

### Пример логирования ошибок

```python
logger.error('Error while starting bot: ', ex)
...
return
```

---

## Константы

### MODE

- Всегда включайте глобальную константу `MODE` в код, даже если она не используется.