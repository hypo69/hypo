# Модуль `options.js`

## Обзор

Этот модуль JavaScript отвечает за обработку настроек расширения. Он получает данные из браузера, отображает их в интерфейсе и позволяет пользователю сохранить измененные настройки. Модуль использует API браузера для взаимодействия с хранилищем настроек.

## Функции

### `isValidAttrName`

**Описание**: Проверяет, является ли переданное имя атрибута допустимым.

**Параметры**:

- `name` (str): Имя атрибута.

**Возвращает**:

- bool: `true`, если имя атрибута является допустимым, `false` в противном случае.

**Обрабатываемые исключения**:

- `ex`: Любые исключения, возникающие при попытке установить атрибут.


### `isValidAttrNames`

**Описание**: Проверяет, являются ли все имена атрибутов допустимыми.

**Параметры**:

- `names` (object): Объект, содержащий имена атрибутов.

**Возвращает**:

- bool: `true`, если все имена атрибутов являются допустимыми, `false` в противном случае.

**Обрабатываемые исключения**:

-  `ex`: Любые исключения, возникающие при проверке имени атрибута.

### `isValidStyleLength`

**Описание**: Проверяет, является ли переданная длина стиля допустимой.

**Параметры**:

- `len` (str): Длина стиля.

**Возвращает**:

- bool: `true`, если длина стиля является допустимой, `false` в противном случае.


### `loadDefaultCss`

**Описание**: Загружает стандартный CSS для расширения.

**Возвращает**:

- Promise<string>: Promise, содержащий содержимое загруженного CSS.

**Обрабатываемые исключения**:

- `fu.onError`: Обрабатывает ошибки при выполнении запроса.


### `extractBodyStyles`

**Описание**: Извлекает значения `width` и `height` из CSS.

**Параметры**:

- `css` (str): Строка CSS.

**Возвращает**:

- object: Объект с ключами `width` и `height`, содержащими значения.


### `createPopupCss`

**Описание**: Создает строку CSS для тела всплывающего окна.

**Параметры**:

- `bodyStyles` (object): Объект с настройками `width` и `height`.

**Возвращает**:

- str: Строка CSS для тела всплывающего окна.


### Анонимная функция `window.addEventListener("load", ...)`

**Описание**: Обработчик события `load` для окна. Инициализирует элементы интерфейса и устанавливает обработчики событий для кнопок сохранения и показа значений по умолчанию.

**Обрабатываемые исключения**:

- `fu.onError`: Обрабатывает ошибки при получении настроек.
- `err`: Обрабатывает ошибки при сохранении настроек.


## Переменные

### `defaultAttributes`

**Описание**: Объект, содержащий значения атрибутов по умолчанию.

### `defaultPopupBodyStyles`

**Описание**: Объект, содержащий значения стилей по умолчанию для тела всплывающего окна.

### `elementAttr`, `contextAttr`, `focusedAttr`, `ancestorAttr`, `frameAttr`, `frameAncestorAttr`, `style`, `popupBodyWidth`, `popupBodyHeight`, `message`

**Описание**:  Переменные, хранящие ссылки на HTML-элементы.

### `testElement`

**Описание**: Переменная, хранящая экземпляр элемента `div` для тестирования.

## API расширения

### `browser.runtime.sendMessage`

**Описание**: Отправляет сообщение в фоновый скрипт.

### `browser.storage.sync.set`

**Описание**: Сохраняет данные в синхронизируемом хранилище настроек.

### `browser.runtime.getURL`

**Описание**: Возвращает URL ресурса расширения.


##  Примечания

Этот модуль использует асинхронные операции (`Promise`) для обработки запросов к хранилищу.  Обработка ошибок выполняется через исключения.