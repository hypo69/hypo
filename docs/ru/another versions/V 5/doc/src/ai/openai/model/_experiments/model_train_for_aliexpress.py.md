# Модуль `model_train_for_aliexpress`

## Обзор

Модуль `model_train_for_aliexpress` предназначен для экспериментов с обучением моделей искусственного интеллекта (OpenAI и Google Gemini) на данных, связанных с AliExpress. Он включает в себя функциональность для сбора данных (например, заголовков продуктов), загрузки системных инструкций и использования этих инструкций для обучения и взаимодействия с моделями.

## Подробней

Этот модуль является частью проекта `hypotez` и используется для экспериментов с моделями ИИ, в частности, для обучения моделей на данных AliExpress. Модуль выполняет следующие шаги:
1.  Получает список файлов, содержащих заголовки продуктов AliExpress.
2.  Загружает системные инструкции, которые используются для обучения моделей ИИ.
3.  Инициализирует модели OpenAI и Google Gemini с использованием загруженных инструкций.
4.  Для каждого файла с заголовками продуктов, отправляет заголовки в модели OpenAI и Gemini и обрабатывает полученные ответы.

## Функции

### `recursively_get_filenames`

```python
recursively_get_filenames(path: str, ext: str) -> list
```

**Описание**: Рекурсивно получает список файлов с указанным расширением из указанного пути.

**Как работает функция**:
Функция `recursively_get_filenames` принимает путь к директории и расширение файла в качестве аргументов. Она рекурсивно обходит указанную директорию и все её поддиректории, собирая полные пути ко всем файлам, имеющим указанное расширение.

**Параметры**:

*   `path` (str): Путь к директории, в которой нужно искать файлы.
*   `ext` (str): Расширение файлов, которые нужно найти.

**Возвращает**:

*   `list`: Список полных путей к файлам, найденным в директории и её поддиректориях.

**Примеры**:

```python
from pathlib import Path
path_to_search = Path('./')
extention = 'py'
files = recursively_get_filenames(path_to_search, extention)
print(files) # -> ['./example.py', './src/example.py']
```

### `read_text_file`

```python
def read_text_file(file_path: str) -> str:
    """ This if example function
    Args:
        file_path (str): Описание параметра `file_path`.
    Returns:
        str: Описание возвращаемого значения. Возвращает строку.
    """
```

**Описание**: Читает содержимое текстового файла и возвращает его в виде строки.

**Как работает функция**:
Функция `read_text_file` открывает файл, расположенный по указанному пути `file_path`, в режиме чтения ('r') с кодировкой UTF-8. Затем считывает все содержимое файла и возвращает его в виде строки.

**Параметры**:

*   `file_path` (str): Путь к текстовому файлу, который нужно прочитать.

**Возвращает**:

*   `str`: Строка, содержащая содержимое текстового файла.

**Примеры**:

```python
from pathlib import Path
file_path = Path('./example.txt')
file_content = read_text_file(file_path)
print(file_content) # -> 'Hello example text file'
```

### `csv2json_csv2dict`

```python
csv2json_csv2dict(file_path: str, delimiter: str = ';') -> list[dict]:
```

**Описание**: Преобразует CSV файл в список словарей.

**Как работает функция**:
Функция `csv2json_csv2dict` принимает путь к CSV-файлу и разделитель в качестве аргументов. Она открывает CSV-файл, читает его содержимое и преобразует каждую строку в словарь, используя первую строку в качестве ключей.

**Параметры**:

*   `file_path` (str): Путь к CSV файлу.
*   `delimiter` (str, optional): Разделитель между значениями в CSV файле. По умолчанию ';'.

**Возвращает**:

*   `list[dict]`: Список словарей, представляющих данные из CSV файла.

**Примеры**:

```python
from pathlib import Path
file_path = Path('./example.csv')
data = csv2json_csv2dict(file_path)
print(data) # -> [{'name': 'Name1', 'age': '20'}, {'name': 'Name2', 'age': '30'}]
```

### `pprint`

```python
pprint(obj: any) -> None:
```

**Описание**: Выводит объект в удобочитаемом формате.

**Как работает функция**:
Функция `pprint` принимает объект любого типа в качестве аргумента и выводит его строковое представление в консоль, используя функцию `print`.

**Параметры**:

*   `obj` (any): Объект, который нужно вывести.

**Возвращает**:

*   `None`: Функция ничего не возвращает.

**Примеры**:

```python
data = {'name': 'Name1', 'age': 20}
pprint(data) # -> {'name': 'Name1', 'age': 20}
```

## Переменные

*   `product_titles_files` (list): Список путей к файлам, содержащим заголовки продуктов AliExpress. Получается с использованием функции `recursively_get_filenames`.
*   `system_instruction_path` (Path): Путь к файлу, содержащему системные инструкции для моделей ИИ.
*   `system_instruction` (str): Системные инструкции, загруженные из файла `system_instruction_path`. Используются для обучения моделей OpenAI и Gemini.
*   `openai` (OpenAIModel): Экземпляр класса `OpenAIModel`, инициализированный с использованием системных инструкций.
*   `gemini` (GoogleGenerativeAI): Экземпляр класса `GoogleGenerativeAI`, инициализированный с использованием системных инструкций.
*   `file` (str): Переменная цикла, представляющая текущий файл с заголовками продуктов.
*   `product_titles` (str): Содержимое файла с заголовками продуктов, прочитанное с использованием функции `read_text_file`.
*   `response_openai` (str): Ответ, полученный от модели OpenAI на основе заголовков продуктов.
*   `response_gemini` (str): Ответ, полученный от модели Google Gemini на основе заголовков продуктов.