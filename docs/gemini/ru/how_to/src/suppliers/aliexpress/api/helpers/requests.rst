Как использовать функцию api_request
========================================================================================

Описание
-------------------------
Функция `api_request` предназначена для выполнения запроса к API и обработки ответа. Она принимает объект запроса, имя поля с результатом в ответе и количество попыток. Функция обрабатывает возможные исключения при получении ответа и его десериализации, а также анализирует код ответа. Если код ответа 200, функция возвращает результат; в противном случае возвращает None.  Функция использует логирование для вывода предупреждений и критических ошибок.

Шаги выполнения
-------------------------
1. **Выполняется запрос к API:** Функция `request.getResponse()` делает запрос к API и получает ответ.
2. **Обработка исключений при получении ответа:** Если возникает исключение при получении ответа, функция обрабатывает его.  В данном случае исключение игнорируется и выполнение функции завершается.
3. **Обработка исключений при парсинге ответа:**  Если возникло исключение при десериализации ответа (преобразовании JSON в объект Python), обрабатывается ошибка с использованием логирования. В данном случае исключение игнорируется и выполнение функции завершается.
4. **Проверка кода ответа:** Функция проверяет код ответа (`response.resp_code`).
5. **Обработка успешного ответа:** Если код ответа равен 200, функция извлекает результат (`response.result`) и возвращает его.
6. **Обработка неуспешного ответа:** Если код ответа не равен 200, функция выводит предупреждение (используя логирование) и возвращает None.
7. **Обработка дополнительных исключений:** Функция обрабатывает любые дополнительные исключения, возникающие при выполнении, с помощью логирования.


Пример использования
-------------------------
.. code-block:: python

    import requests
    from types import SimpleNamespace
    from hypotez.src.suppliers.aliexpress.api.helpers.requests import api_request


    # Пример объекта запроса (замените на ваш реальный запрос)
    class MyRequest:
        def getResponse(self):
            try:
                response_data = {
                    "resp_result": {
                        "resp_code": 200,
                        "resp_msg": "OK",
                        "result": {"product_id": 123, "name": "Example Product"},
                    }
                }
                return SimpleNamespace(**response_data) # Преобразование словаря в объект
            except requests.exceptions.RequestException as e:
                raise ApiRequestException(e.message)

    request_obj = MyRequest()

    # Вызов функции api_request
    result = api_request(request_obj, "resp_result")


    if result:
        print(f"Результат запроса: {result}")
    else:
        print("Запрос не удался")