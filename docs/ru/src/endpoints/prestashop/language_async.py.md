# Модуль для асинхронного управления языками в PrestaShop

## Обзор

Модуль `language_async.py` предназначен для асинхронного управления языками в интернет-магазине PrestaShop. Он предоставляет функциональность для получения информации о языках, их добавления, удаления и обновления через API PrestaShop. Модуль использует асинхронные запросы для повышения производительности при взаимодействии с API.

## Подробнее

Этот модуль является частью системы `hypotez` и предназначен для автоматизации работы с языковыми настройками в PrestaShop. Он предоставляет асинхронный интерфейс для выполнения операций, связанных с языками, что позволяет интегрировать его в более сложные системы управления магазином.

## Классы

### `PrestaLanguageAync`

**Описание**: Класс `PrestaLanguageAync` предназначен для взаимодействия с языками в PrestaShop через API. Он наследует функциональность от класса `PrestaShopAsync`, что позволяет ему выполнять асинхронные запросы к API PrestaShop.

**Принцип работы**:
1.  Класс инициализируется с использованием параметров подключения к API PrestaShop.
2.  Он предоставляет методы для получения информации о языках, их добавления, удаления и обновления.
3.  Использует асинхронные запросы для выполнения операций, что позволяет избежать блокировки основного потока выполнения.

**Наследует**:
-   `PrestaShopAsync`: Обеспечивает асинхронное взаимодействие с API PrestaShop.

**Методы**:

-   `__init__(self, *args, **kwards)`:
    -   **Описание**: Конструктор класса `PrestaLanguageAync`.
    -   **Параметры**:
        -   `*args`: Произвольные позиционные аргументы.
        -   `**kwards`: Произвольные именованные аргументы.
    -   **Как работает функция**:
        1.  Инициализирует класс `PrestaLanguageAync`.
        2.  Принимает аргументы для настройки подключения к API PrestaShop.
        3.  Важно помнить, что у каждого магазина своя нумерация языков.
        4.  `lang_string`: ISO названия языка. Например: en, ru, he

-   `get_lang_name_by_index(self, lang_index: int | str) -> str`:
    -   **Описание**: Асинхронно получает ISO-код языка по его индексу в PrestaShop.
    -   **Параметры**:
        -   `lang_index` (int | str): Индекс языка в PrestaShop.
    -   **Возвращает**:
        -   `str`: ISO-код языка или пустую строку в случае ошибки.
    -   **Вызывает исключения**:
        -   `Exception`: Если происходит ошибка при получении языка по индексу.
    -   **Как работает функция**:
        1.  Пытается получить ISO-код языка по его индексу, используя метод `get` класса `PrestaShopAsync`.
        2.  В случае успеха возвращает ISO-код языка.
        3.  В случае ошибки логирует ошибку и возвращает пустую строку.
    -   **Внутренние функции**:
        -   Нет.
    -   **Примеры**:
        ```python
        # Пример использования функции get_lang_name_by_index
        async def example():
            lang_class = PrestaLanguageAync()
            lang_index = 1
            lang_name = await lang_class.get_lang_name_by_index(lang_index)
            print(f"Язык с индексом {lang_index}: {lang_name}")
        ```
        ```mermaid
        graph LR
            A[Начало] --> B{Попытка получить язык по индексу};
            B -- Успех --> C[Возврат ISO-кода языка];
            B -- Ошибка --> D[Логирование ошибки];
            D --> E[Возврат пустой строки];
            C --> F[Конец];
            E --> F;
        ```

-   `get_languages_schema(self) -> dict`:
    -   **Описание**: Асинхронно получает схему языков из API PrestaShop.
    -   **Возвращает**:
        -   `dict`: Словарь, представляющий схему языков.
    -   **Как работает функция**:
        1.  Вызывает метод `get_languages_schema` родительского класса (`PrestaShopAsync`), чтобы получить схему языков.
        2.  Выводит полученную схему языков в консоль.
        3.  Возвращает полученную схему языков.
    -   **Внутренние функции**:
        -   Нет.
    -   **Примеры**:
        ```python
        # Пример использования функции get_languages_schema
        async def example():
            lang_class = PrestaLanguageAync()
            schema = await lang_class.get_languages_schema()
            print(f"Схема языков: {schema}")
        ```
        ```mermaid
        graph LR
            A[Начало] --> B[Получение схемы языков];
            B --> C[Вывод схемы в консоль];
            C --> D[Возврат схемы языков];
            D --> E[Конец];
        ```

## Функции

### `main`

**Описание**: Асинхронная функция `main` выполняет основные действия по взаимодействию с классом `PrestaLanguageAync`.

**Как работает функция**:

1.  Создает экземпляр класса `PrestaLanguageAync`.
2.  Получает схему языков, используя метод `get_languages_schema`.
3.  Выводит полученную схему языков в консоль.

**Примеры**:

```python
# Пример вызова функции main
async def example():
    await main()
```
```mermaid
graph LR
    A[Начало] --> B[Создание экземпляра PrestaLanguageAync];
    B --> C[Получение схемы языков];
    C --> D[Вывод схемы языков в консоль];
    D --> E[Конец];