# Модуль для работы с языками в PrestaShop

## Обзор

Модуль `language.py` предоставляет интерфейс для взаимодействия с сущностью `language` в CMS PrestaShop через API PrestaShop. Он позволяет добавлять, удалять, обновлять и получать информацию о языках магазина.

## Подробнее

Этот модуль предназначен для управления языковыми настройками в PrestaShop. Он включает класс `PrestaLanguage`, который наследуется от класса `PrestaShop` и предоставляет методы для выполнения различных операций с языками, такими как добавление нового языка, удаление существующего языка, обновление информации о языке и получение подробных сведений о языке. Важно помнить, что нумерация языков может отличаться в разных магазинах.

## Классы

### `PrestaLanguage(PrestaShop)`

**Описание**: Класс `PrestaLanguage` отвечает за управление языками в магазине PrestaShop. Он предоставляет методы для добавления, удаления, обновления и получения информации о языках.

**Наследует**:
- `PrestaShop`: Класс `PrestaLanguage` наследует функциональность для взаимодействия с API PrestaShop.

**Принцип работы**:
1.  **Инициализация**: При инициализации класса устанавливаются параметры для подключения к API PrestaShop.
2.  **Управление языками**: Класс предоставляет методы для выполнения основных операций с языками, таких как добавление, удаление, обновление и получение информации.
3.  **Обработка ошибок**: В случае возникновения ошибок при взаимодействии с API PrestaShop, ошибки логируются с использованием модуля `logger`.

**Методы**:

-   `__init__(self, *args, **kwards)`:
    *   Инициализирует экземпляр класса `PrestaLanguage`.
    *   **Параметры**:
        *   `*args`: Произвольные аргументы.
        *   `**kwards`: Произвольные именованные аргументы.

    *   **Описание**: Конструктор класса. Важно помнить, что у каждого магазина своя нумерация языков. Я определяю языки в своих базах в таком порядке: `en` - 1; `he` - 2; `ru` - 3.
-   `get_lang_name_by_index(self, lang_index: int | str) -> str`:
    *   Извлекает ISO код языка из магазина `Prestashop`.
    *   **Параметры**:
        *   `lang_index` (int | str): Индекс языка в таблице PrestaShop.
    *   **Возвращает**:
        *   `str`: Имя языка ISO по его индексу в таблице PrestaShop.
    *   **Как работает функция**:
        1.  Пытается получить информацию о языке, используя метод `get` суперкласса (`PrestaShop`).
        2.  Если возникает ошибка, логирует ее и возвращает пустую строку.

    ```ascii
    Начало
    │
    └──► Получение информации о языке по индексу
         │
         ├──► Успех: Возврат имени языка
         │
         └──► Ошибка: Логирование ошибки и возврат пустой строки
              │
              Конец
    ```

-   `get_languages_schema(self) -> Optional[dict]`:
    *   Извлекает словарь актуальных языков для данного магазина.
    *   **Возвращает**:
        *   `Optional[dict]`: Language schema or `None` on failure.
    *   **Как работает функция**:
        1.  Выполняет запрос к API PrestaShop для получения списка языков.
        2.  В случае успеха возвращает полученный словарь.
        3.  В случае ошибки логирует ее и возвращает `None`.

    ```ascii
    Начало
    │
    └──► Запрос к API для получения списка языков
         │
         ├──► Успех: Возврат словаря с языками
         │
         └──► Ошибка: Логирование ошибки и возврат None
              │
              Конец
    ```

## Функции

### `main()`

**Описание**: Функция `main` является точкой входа для асинхронного примера использования класса `PrestaLanguage`.

**Как работает функция**:

1.  Создает экземпляр класса `PrestaLanguage`.
2.  Получает схему языков с использованием метода `get_languages_schema`.
3.  Выводит полученную схему на экран.

```ascii
Начало
│
└──► Создание экземпляра PrestaLanguage
│
└──► Получение схемы языков
│
└──► Вывод схемы языков на экран
│
Конец
```

**Примеры**:

```python
import asyncio

async def main():
    """
    Example:
        >>> asyncio.run(main())
    """
    # ...
    lang_class = PrestaLanguage()
    languagas_schema = await lang_class.get_languages_schema()
    print(languagas_schema)