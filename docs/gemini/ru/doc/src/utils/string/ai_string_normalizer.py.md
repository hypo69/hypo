# Модуль для нормализации ответа модели

## Обзор

Модуль `ai_response_normalizer.py` предназначен для очистки текстовых ответов, полученных от AI-моделей, путем удаления нежелательных префиксов и суффиксов, таких как маркеры начала и конца блоков кода (` ``` `). Это позволяет привести ответы моделей к более чистому и удобному для дальнейшей обработки виду.

## Подробнее

Этот модуль содержит функцию `normalize_answer`, которая принимает строку в качестве входных данных и последовательно проверяет, начинается ли строка с одного из определенных префиксов. Если один из префиксов найден, он удаляется из начала строки, а также удаляется суффикс ` ``` ` (если он есть) в конце строки. Это особенно полезно при работе с AI-моделями, которые могут возвращать текст, обернутый в маркеры, указывающие на формат содержимого (например, HTML или Markdown).

## Функции

### `normalize_answer`

```python
def normalize_answer(text:str) -> str:
    """"""
    for prefix in prefixes:
        if text.startswith(prefix):
            return text.removeprefix(prefix).removesuffix('```')

    return text
```

**Назначение**: Нормализует текстовый ответ, удаляя префиксы и суффиксы.

**Параметры**:
- `text` (str): Строка, которую необходимо нормализовать.

**Возвращает**:
- `str`: Нормализованная строка без префиксов и суффиксов.

**Как работает функция**:

1. **Перебор префиксов**: Функция проходит по списку `prefixes`, который содержит различные варианты префиксов, которые могут быть в начале строки.
2. **Проверка на наличие префикса**: Для каждого префикса проверяется, начинается ли с него входная строка `text`.
3. **Удаление префикса и суффикса**: Если строка начинается с одного из префиксов, этот префикс удаляется с помощью метода `removeprefix()`. Затем, независимо от наличия префикса, пытается удалить суффикс ` ``` ` с помощью метода `removesuffix()`.
4. **Возврат результата**: Если один из префиксов найден и удален, возвращается строка без префикса и суффикса. Если ни один из префиксов не найден, возвращается исходная строка без изменений.

```
Начало
  │
  │ text: str
  │
  V
Проверка префиксов
  │
  │ prefix in prefixes
  │
  V
Удаление префикса и суффикса
  │
  │ text.removeprefix(prefix).removesuffix('```')
  │
  V
Возврат результата
  │
  │ нормализованный text
  │
Конец
```

**Примеры**:

```python
from src.utils.string.ai_response_normalizer import normalize_answer

# Пример 1: Удаление префикса '```html\n' и суффикса '```'
text1 = "```html\n<html><body><h1>Hello</h1></body></html>```"
normalized_text1 = normalize_answer(text1)
print(normalized_text1)  # <html><body><h1>Hello</h1></body></html>

# Пример 2: Удаление префикса '```md\n'
text2 = "```md\n# Заголовок"
normalized_text2 = normalize_answer(text2)
print(normalized_text2)  # # Заголовок

# Пример 3: Строка без префиксов и суффиксов
text3 = "Просто текст"
normalized_text3 = normalize_answer(text3)
print(normalized_text3)  # Просто текст

# Пример 4: Удаление префикса '```' и суффикса '```'
text4 = "```Пример```"
normalized_text4 = normalize_answer(text4)
print(normalized_text4)  # Пример