# Анализ кода модуля `angular.min.js`

**Качество кода:** 7/10
- **Плюсы:**
    - Код хорошо минимизирован, что обеспечивает компактность и скорость загрузки.
    - Использование IIFE (Immediately Invoked Function Expression) для инкапсуляции кода.
    - Применение `hasOwnProperty` для проверки наличия свойств, что является хорошей практикой.
- **Минусы:**
    - Отсутствие комментариев делает код сложным для понимания и модификации.
    - Использование сокращенных имен переменных и функций (например, `ve`, `Yb`, `za`) усложняет чтение и понимание логики.
    -  Код является минимизированной версией, что делает его очень сложным для анализа.

**Рекомендации по улучшению:**

1. **Добавление комментариев:**
   -  Добавить комментарии к ключевым блокам кода, функциям и переменным, объясняя их предназначение и логику.
   -  Использовать комментарии для документирования сложных алгоритмов и решений.
2. **Улучшение читаемости:**
   -  По возможности, переименовать переменные и функции для повышения их описательности (хотя это и сложно в минимизированном коде).
3. **Документация:**
   -  Добавить docstring для модуля, классов и функций в формате RST, как показано в примере.
   -  Использовать RST-формат для документации, чтобы обеспечить совместимость со Sphinx.
4. **Улучшение обработки ошибок:**
   -  Использовать `logger.error` для логирования ошибок вместо стандартных `try-except` блоков.
5. **Использование `j_loads`:**
    - Заменить прямое использование `JSON.parse` на функцию `j_loads` из `src.utils.jjson`.

**Оптимизированный код:**

```python
"""
Модуль AngularJS v1.8.2
=========================================================================================

Этот модуль содержит минимизированный код AngularJS v1.8.2, 
лицензированный под MIT, с добавлением документации для улучшения понимания и поддержки.

Пример использования
--------------------

.. code-block:: python

    # Пример использования данного модуля:
    # AngularJS код будет выполняться при загрузке страницы

"""
from src.logger import logger # Импорт логгера
from src.utils.jjson import j_loads # Импорт j_loads

# Этот блок кода выполняется в немедленно вызываемой функции
(function (z) {
    'use strict';

    def ve(a):
        """
        Настраивает параметры конфигурации объекта Xb.
        Args:
            a (dict): Объект с параметрами конфигурации.
        Returns:
            dict: Объект Xb.
        """
        if D(a):
            if w(a.objectMaxDepth):
                Xb.objectMaxDepth = Yb(a.objectMaxDepth) if Yb(a.objectMaxDepth) else float('NaN')
            if w(a.urlErrorParamsEnabled) and Ga(a.urlErrorParamsEnabled):
                Xb.urlErrorParamsEnabled = a.urlErrorParamsEnabled
        else:
           return Xb

    def Yb(a):
        """
        Проверяет, является ли значение числом и больше 0.
        Args:
            a (Any): Проверяемое значение.
        Returns:
            bool: True, если значение число и > 0, иначе False.
        """
        return X(a) and 0 < a

    def F(a, b):
        """
        Создает функцию, генерирующую объект ошибки с URL-адресом и параметрами.
        Args:
            a (str): Префикс ошибки.
            b (type): Тип ошибки.
        Returns:
            function: Функция, генерирующая объект ошибки.
        """
        b = b or Error
        def inner_function(*args):
            d = args[0]
            c = f"[{a if a else ''}{d}] http://errors.angularjs.org/1.8.2/{a if a else ''}{d}"
            for i in range(1, len(args)):
                e = args[i]
                f = "function" == typeof e ? str(e).replace(/ \{[\s\S]*$/, "") : "undefined" if "undefined" == typeof e else str(e) if not isinstance(e,str) else e
                c += f"{'?' if i == 1 else '&'}p{i-1}=" + encodeURIComponent(f)
            return b(c)
        return inner_function


    def za(a):
        """
        Проверяет, является ли объект массивоподобным.
        Args:
            a (Any): Проверяемый объект.
        Returns:
            bool: True, если объект массивоподобный, иначе False.
        """
        if null == a or $a(a):
            return False
        if H(a) or C(a) or (x and a instanceof x):
            return True
        b = "length" in Object(a) and a.length
        return X(b) and (0 <= b and b - 1 in a or "function" == typeof a.item)

    def r(a, b, d):
        """
        Итерирует по объекту или массиву и вызывает функцию обратного вызова.
        Args:
            a (Any): Объект или массив для итерации.
            b (function): Функция обратного вызова.
            d (Any): Контекст для функции обратного вызова.
        Returns:
            Any: Возвращает объект a.
        """
        if a:
            if B(a):
                for c in a:
                    if "prototype" != c and "length" != c and "name" != c and a.hasOwnProperty(c):
                        b(a[c], c, a)
            elif H(a) or za(a):
                f = "object" != typeof a
                c = 0
                e = a.length
                while c < e:
                  if f or c in a:
                    b(a[c], c, a)
                  c += 1
            elif a.forEach and a.forEach != r:
                a.forEach(b, d, a)
            elif Pc(a):
                for c in a:
                    b(a[c], c, a)
            elif "function" == typeof a.hasOwnProperty:
                for c in a:
                    if a.hasOwnProperty(c):
                        b(a[c], c, a)
            else:
                for c in a:
                    if ta(a, c):
                        b(a[c], c, a)
        return a
    
    def Qc(a, b, d):
        """
        Итерирует по отсортированным ключам объекта.
        Args:
            a (dict): Объект для итерации.
            b (function): Функция обратного вызова.
            d (Any): Контекст для функции обратного вызова.
        Returns:
            list: Отсортированный список ключей.
        """
        c = sorted(Object.keys(a))
        for e in c:
            b(a[e], e, d)
        return c


    def Zb(a):
        """
        Создает функцию обратного вызова с обратным порядком аргументов.
        Args:
            a (function): Функция для обертки.
        Returns:
            function: Функция обратного вызова с обратным порядком аргументов.
        """
        def inner_function(b, d):
            a(d, b)
        return inner_function


    def we():
        """
        Генерирует уникальный идентификатор.
        Returns:
             int: Уникальный идентификатор.
        """
        global qb
        qb += 1
        return qb

    def $b(a, b, d):
      """
      Копирует свойства из объектов в целевой объект, рекурсивно обрабатывая объекты.
      Args:
          a (dict): Целевой объект.
          b (list): Список исходных объектов.
          d (bool): Флаг рекурсивной обработки.
      Returns:
          dict: Целевой объект с добавленными свойствами.
      """
      c = a.get('$$hashKey', None)
      for g in b:
          if D(g) or B(g):
              for m in g:
                 p = g[m]
                 if d and D(p):
                     if ha(p):
                         a[m] = new Date(p.valueOf())
                     elif ab(p):
                         a[m] = new RegExp(p)
                     elif ac(p):
                       a[m] = p.clone()
                     elif not m == "__proto__":
                         if not D(a.get(m)):
                            a[m] = [] if H(p) else {}
                         $b(a[m], [p], True)
                     else:
                        a[m] = p
                 else:
                    a[m] = p
      if c:
         a["$$hashKey"] = c
      else:
         a.pop("$$hashKey",None)
      return a


    def S(a, *args):
        """
        Расширяет целевой объект свойствами из исходных объектов.
        Args:
            a (dict): Целевой объект.
            *args: Исходные объекты.
        Returns:
            dict: Расширенный целевой объект.
        """
        return $b(a, args, False)


    def xe(a, *args):
        """
        Объединяет свойства из исходных объектов в целевой объект с рекурсивным обходом.
        Args:
            a (dict): Целевой объект.
            *args: Исходные объекты.
        Returns:
             dict: Объединенный целевой объект.
        """
        return $b(a, args, True)

    def fa(a):
        """
        Преобразует значение в целое число.
        Args:
            a (Any): Значение для преобразования.
        Returns:
            int: Преобразованное целое число.
        """
        return int(a, 10)

    def bc(a, b):
        """
        Создает новый объект, прототипом которого является a, и расширяет его свойствами b.
        Args:
            a (Any): Прототип.
            b (dict): Объект для расширения.
        Returns:
            dict: Новый объект, созданный на основе прототипа и расширенный свойствами.
        """
        return S(Object.create(a), b)


    def E():
      """
      Пустая функция.
      """
      pass


    def Ta(a):
        """
        Возвращает значение без изменений.
        Args:
            a (Any): Возвращаемое значение.
        Returns:
             Any: Значение без изменений.
        """
        return a
    
    def ia(a):
        """
        Создает функцию, которая возвращает заданное значение.
        Args:
            a (Any): Возвращаемое значение.
        Returns:
            function: Функция, возвращающая заданное значение.
        """
        def inner_function():
            return a
        return inner_function


    def cc(a):
        """
        Проверяет, является ли объект функцией, отличной от toString по умолчанию.
         Args:
            a (Any): Проверяемый объект.
        Returns:
            bool: True, если объект функция и не является toString по умолчанию, иначе False.
        """
        return B(a.toString) and a.toString != la

    def A(a):
        """
        Проверяет, является ли значение undefined.
        Args:
            a (Any): Проверяемое значение.
        Returns:
            bool: True, если значение undefined, иначе False.
        """
        return "undefined" == typeof a

    def w(a):
        """
        Проверяет, определено ли значение.
        Args:
             a (Any): Проверяемое значение.
        Returns:
            bool: True, если значение определено, иначе False.
        """
        return "undefined" != typeof a

    def D(a):
        """
        Проверяет, является ли значение объектом.
        Args:
            a (Any): Проверяемое значение.
        Returns:
            bool: True, если значение объект, иначе False.
        """
        return None != a and "object" == typeof a

    def Pc(a):
        """
        Проверяет, является ли значение обычным объектом, не являющимся массивом.
        Args:
            a (Any): Проверяемое значение.
        Returns:
            bool: True, если значение обычный объект, иначе False.
        """
        return null != a and "object" == typeof a and not Rc(a)

    def C(a):
        """
        Проверяет, является ли значение строкой.
        Args:
             a (Any): Проверяемое значение.
        Returns:
            bool: True, если значение строка, иначе False.
        """
        return "string" == typeof a

    def X(a):
        """
        Проверяет, является ли значение числом.
        Args:
            a (Any): Проверяемое значение.
        Returns:
            bool: True, если значение число, иначе False.
        """
        return "number" == typeof a

    def ha(a):
        """
        Проверяет, является ли значение датой.
        Args:
            a (Any): Проверяемое значение.
        Returns:
            bool: True, если значение дата, иначе False.
        """
        return "[object Date]" == la(a)

    def H(a):
        """
        Проверяет, является ли значение массивом.
        Args:
            a (Any): Проверяемое значение.
        Returns:
             bool: True, если значение массив, иначе False.
        """
        return Array.isArray(a) or isinstance(a, Array)

    def dc(a):
        """
        Проверяет, является ли значение ошибкой.
        Args:
            a (Any): Проверяемое значение.
        Returns:
            bool: True, если значение ошибка, иначе False.
        """
        return "[object Error]" == la(a) or "[object Exception]" == la(a) or "[object DOMException]" == la(a) or a instanceof Error

    def B(a):
        """
        Проверяет, является ли значение функцией.
        Args:
            a (Any): Проверяемое значение.
        Returns:
             bool: True, если значение функция, иначе False.
        """
        return "function" == typeof a

    def ab(a):
        """
        Проверяет, является ли значение регулярным выражением.
        Args:
            a (Any): Проверяемое значение.
        Returns:
            bool: True, если значение регулярное выражение, иначе False.
        """
        return "[object RegExp]" == la(a)

    def $a(a):
        """
        Проверяет, является ли значение window-объектом.
        Args:
            a (Any): Проверяемое значение.
        Returns:
            bool: True, если значение window-объект, иначе False.
        """
        return a and a.window == a

    def bb(a):
      """
      Проверяет, является ли объект scope.
      Args:
            a (Any): Проверяемый объект.
        Returns:
             bool: True, если объект scope, иначе False.
      """
      return a and a.$evalAsync and a.$watch

    def Ga(a):
        """
        Проверяет, является ли значение булевым.
        Args:
            a (Any): Проверяемое значение.
        Returns:
            bool: True, если значение булево, иначе False.
        """
        return "boolean" == typeof a

    def ye(a):
      """
      Проверяет, является ли значение массивоподобным объектом.
       Args:
            a (Any): Проверяемое значение.
        Returns:
            bool: True, если значение массивоподобный объект, иначе False.
      """
      return a and X(a.length) and ze.test(la(a))

    def ac(a):
        """
        Проверяет, является ли значение элементом DOM.
         Args:
            a (Any): Проверяемое значение.
        Returns:
            bool: True, если значение DOM, иначе False.
        """
        return bool(a and (a.nodeName or a.prop and a.attr and a.find))

    def Ae(a):
        """
        Создает объект, где ключи являются элементами строки, разделенной запятыми.
        Args:
            a (str): Строка с элементами, разделенными запятыми.
        Returns:
            dict: Объект, где ключи - элементы строки, а значения - True.
        """
        b = {}
        for d in a.split(","):
            b[d] = True
        return b

    def ua(a):
        """
        Возвращает имя узла DOM элемента.
         Args:
            a (Any): Проверяемый элемент.
        Returns:
             str: Имя узла DOM элемента.
        """
        return K(a.nodeName if a else a[0].nodeName)


    def cb(a, b):
        """
        Удаляет элемент из массива и возвращает его индекс.
        Args:
            a (list): Массив.
            b (Any): Элемент для удаления.
        Returns:
            int: Индекс удаленного элемента или -1, если элемента нет в массиве.
        """
        d = a.index(b) if b in a else -1
        if 0 <= d:
            a.pop(d)
        return d
    
    def Ia(a, b, d):
        """
        Копирует объект или массив с заданной глубиной.
        Args:
            a (Any): Объект или массив для копирования.
            b (Any): Целевой объект для копирования (опционально).
            d (int): Глубина копирования (опционально).
        Returns:
            Any: Копия объекта или массива.
        Raises:
            oa: если тип `b`  является массивоподобным или ArrayBuffer
        """
        def c(a, b, c):
            """
             Рекурсивная функция для копирования.
             Args:
                a (Any): Объект или массив для копирования.
                b (Any): Целевой объект.
                c (int): Глубина копирования.
            Returns:
                Any: Копия объекта или массива.
            """
            c -= 1
            if 0 > c:
                return "..."
            d = b.get('$$hashKey', None)
            if H(a):
                f = 0
                g = a.length
                while f < g:
                  b.append(e(a[f],c))
                  f += 1
            elif Pc(a):
                for f in a:
                    b[f] = e(a[f], c)
            elif a and "function" == typeof a.hasOwnProperty:
                for f in a:
                    if a.hasOwnProperty(f):
                       b[f] = e(a[f], c)
            else:
                for f in a:
                    if ta(a, f):
                       b[f] = e(a[f], c)
            if d:
               b["$$hashKey"] = d
            else:
               b.pop("$$hashKey", None)
            return b

        def e(a, b):
            """
            Функция для создания копии
            Args:
                a (Any): Значение для копирования.
                b (int): Глубина копирования.
            Returns:
                Any: Копия значения
            Raises:
                oa: если тип `a`  является массивоподобным объектом или scope
            """
            if not D(a):
                return a
            d = g.indexOf(a)
            if -1 != d:
                return k[d]
            if $a(a) or bb(a):
               raise oa("cpws")
            d = False
            e = f(a)
            if void 0 == e:
               e = [] if H(a) else Object.create(Rc(a))
               d = True
            g.append(a)
            k.append(e)
            if d:
              return c(a, e, b)
            else:
              return e

        def f(a):
          """
          Возвращает копию простых объектов, либо создает копию массивоподобного
          Args:
             a (Any): значение для копирования.
           Returns:
              Any: Копия простых объектов
          """
          _type = la.call(a)
          if _type == "[object Int8Array]" or _type =="[object Int16Array]" or _type == "[object Int32Array]" or _type =="[object Float32Array]" or _type == "[object Float64Array]" or _type == "[object Uint8Array]" or _type == "[object Uint8ClampedArray]" or _type == "[object Uint16Array]" or _type == "[object Uint32Array]":
            return a.constructor(e(a.buffer), a.byteOffset, a.length)
          if _type == "[object ArrayBuffer]":
              if not a.slice:
                b = new ArrayBuffer(a.byteLength)
                (new Uint8Array(b)).set(new Uint8Array(a))
                return b
              return a.slice(0)
          if  _type =="[object Boolean]" or _type == "[object Number]" or _type =="[object String]" or _type == "[object Date]":
              return a.constructor(a.valueOf())
          if _type == "[object RegExp]":
              b = new RegExp(a.source, a.toString().match(/[^/]*$/)[0])
              b.lastIndex = a.lastIndex
              return b
          if _type == "[object Blob]":
              return a.constructor([a], {type: a.type})
          if B(a.cloneNode):
              return a.cloneNode(True)
          
        g = []
        k = []
        d = Yb(d) if Yb(d) else float('NaN')
        if b:
            if ye(b) or "[object ArrayBuffer]" == la(b):
                raise oa("cpta")
            if a == b:
                raise oa("cpi")
            if H(b):
                b.length = 0
            else:
                r(b, lambda a, c: " " if c =="$$hashKey" else b.pop(c))
            g.append(a)
            k.append(b)
            return c(a, b, d)
        return e(a,d)

    def ec(a, b):
        """
        Проверяет, являются ли два значения идентичными или оба NaN.
        Args:
            a (Any): Первое значение.
            b (Any): Второе значение.
        Returns:
            bool: True, если значения идентичны или оба NaN, иначе False.
        """
        return a == b or (a != a and b != b)

    def va(a, b):
        """
        Проверяет, являются ли два значения глубоко равными.
        Args:
            a (Any): Первое значение.
            b (Any): Второе значение.
        Returns:
            bool: True, если значения глубоко равны, иначе False.
        """
        if a == b:
            return True
        if null == a or null == b:
            return False
        if a != a and b != b:
            return True
        d = typeof a
        if d == typeof b and "object" == d:
            if H(a):
                if not H(b):
                    return False
                if (d := a.length) == b.length:
                    for c in range(d):
                        if not va(a[c], b[c]):
                            return False
                    return True
            else:
                if ha(a):
                    return ha(b) and ec(a.getTime(), b.getTime())
                if ab(a):
                    return ab(b) and str(a) == str(b)
                if bb(a) or bb(b) or $a(a) or $a(b) or H(b) or ha(b) or ab(b):
                  return False
                d = T()
                for c in a:
                     if "$" != c[0] and not B(a[c]):
                          if not va(a[c], b[c]):
                            return False
                          d[c] = True
                for c in b:
                     if not c in d and "$" != c[0] and w(b[c]) and not B(b[c]):
                           return False
                return True
        return False


    def db(a, b, d):
        """
        Объединяет два массива или добавляет элемент в массив.
        Args:
            a (list): Первый массив.
            b (Any): Второй массив или элемент для добавления.
            d (int): Индекс, с которого начинается добавление (опционально).
        Returns:
            list: Объединенный массив.
        """
        return a + Ha[d](b) if d is not None else a + Ha(b)


    def Va(a, b, *args):
        """
        Применяет функцию к контексту с возможностью частичного применения аргументов.
        Args:
            a (Any): Контекст.
            b (function): Функция для применения.
            *args: Дополнительные аргументы для частичного применения.
        Returns:
            function: Функция, применяющая функцию b к контексту a.
        """
        d = args
        if not B(b) or isinstance(b, RegExp):
          return b
        if not d:
          def function_inner(*args):
            return b.apply(a, args) if args else b(a)
          return function_inner
        else:
            def function_inner(*args):
              return b.apply(a, db(d, args, 0)) if args else b.apply(a, d)
            return function_inner


    def Sc(a, b):
      """
      Преобразует значение в строку, добавляет префикс $ если это scope или window.
      Args:
        a (str): Строка или значение.
        b (Any): Значение для проверки.
      Returns:
         str: строка или $SCOPE, $WINDOW, $DOCUMENT, undefined
      """
      d = b
      if "string" == typeof a and "$" == a[0] and "$" == a[1]:
        d = void 0
      elif $a(b):
        d = "$WINDOW"
      elif b and z.document == b:
        d = "$DOCUMENT"
      elif bb(b):
        d = "$SCOPE"
      return d

    def eb(a, b):
        """
        Преобразует значение в JSON-строку.
        Args:
             a (Any): Значение для преобразования.
             b (int): Значение для отступа (опционально).
        Returns:
            str: JSON-представление значения.
        """
        if not A(a):
          return JSON.stringify(a, Sc, b if X(b) else 2 if b else None)
        

    def Tc(a):
        """
        Парсит JSON-строку.
        Args:
            a (Any): JSON-строка или значение.
        Returns:
            Any: Распарсенное значение.
        """
        return j_loads(a) if C(a) else a


    def fc(a, b):
        """
        Преобразует строку с временем в минуты с учетом часового пояса.
        Args:
            a (str): Строка с временем.
            b (int): Смещение часового пояса.
        Returns:
             int: Время в минутах.
        """
        a = a.replace(Be, "")
        d =  Date.parse(f"Jan 01, 1970 00:00:00 {a}")/ 6E4
        return d if Y(d) else b


    def Uc(a, b):
        """
        Добавляет минуты к дате.
        Args:
             a (Date): Исходная дата.
            b (int): Количество минут для добавления.
        Returns:
             Date: Новая дата с добавленными минутами.
        """
        a = new Date(a.getTime())
        a.setMinutes(a.getMinutes() + b)
        return a


    def gc(a, b, d):
      """
      Корректирует время с учетом часового пояса.
      Args:
            a (Date): Исходная дата.
            b (str): Строка времени.
            d (bool): Флаг для инвертирования смещения.
        Returns:
            Date: Скорректированная дата с учетом часового пояса.
      """
      d = -1 if d else 1
      c = a.getTimezoneOffset()
      b = fc(b,c)
      return Uc(a, d * (b - c))
    
    def Aa(a):
      """
      Извлекает HTML тег из строки
      Args:
        a(DOM) DOM element or string
      Returns:
        string: HTML тег, либо очищенная строка
      """
      a = x(a).clone().empty()
      b = x("<div></div>").append(a).html()
      try:
          if a[0].nodeType == Pa:
              return K(b)
          else:
              return b.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/, lambda a, b: "<" + K(b))
      except:
           return K(b)
    
    def Vc(a):
        """
        Декодирует URI компонент.
        Args:
            a (str): URI компонент.
        Returns:
            str: Декодированная URI строка.
        """
        try:
           return decodeURIComponent(a)
        except:
            pass

    def hc(a):
        """
        Преобразует строку запроса в объект.
        Args:
            a (str): Строка запроса.
        Returns:
            dict: Объект с параметрами запроса.
        """
        b = {}
        r((a if a else "").split("&"), lambda a:
                a and (
                    e:= a.replace(/\+/g, "%20"),
                    c := e.indexOf("="),
                    e if c == -1 else (
                        e := e[:c],
                        f := e[c + 1:],
                        e := Vc(e),
                        w(e) and (
                          f := Vc(f) if w(f) else True,
                          b[e] if e in b and  H(b[e]) else (b[e] = [b[e], f] if e in b else (b[e] = f)) if e in b else (b[e] = f))
                    )

                )
            )
        return b


    def Ce(a):
        """
        Преобразует объект в строку запроса.
        Args:
            a (dict): Объект с параметрами запроса.
        Returns:
             str: Строка запроса.
        """
        b = []
        r(a, lambda a, c: H(a) and  r(a, lambda a: b.append(ba(c, True) + ("" if True == a else f"={ba(a, True)}")))  if H(a)  else b.append(ba(c, True) + ("" if True == a else f"={ba(a, True)}")))
        return "&".join(b) if len(b) else ""


    def ic(a):
        """
        Декодирует строку URI.
        Args:
            a (str): URI строка.
        Returns:
            str: Декодированная URI строка.
        """
        return ba(a, True).replace(/%26/gi, "&").replace(/%3D/gi, "=").replace(/%2B/gi, "+")

    def ba(a, b):
        """
        Кодирует строку URI.
        Args:
             a (str): URI строка.
             b (bool): Флаг для кодирования пробелов.
        Returns:
            str: Кодированная URI строка.
        """
        return encodeURIComponent(a).replace(/%40/gi, "@").replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%3B/gi, ";").replace(/%20/g, "%20" if b else "+")


    def De(a, b):
        """
        Получает значение атрибута элемента, соответствующего префиксу.
        Args:
             a (DOM): DOM-элемент.
            b (str): Суффикс атрибута.
        Returns:
            str: Значение атрибута или null.
        """
        for c in Qa:
            d = c + b
            if C(d := a.getAttribute(d)):
                return d
        return None


    def Ee(a, b):
      """
      Ищет элемент с атрибутом app, затем вызывает переданную функцию
       Args:
           a(DOM): DOM element
           b(function): callback
      """
      d = None
      c = None
      def inner_func(b):
         nonlocal d,c
         b += "app"
         if not d and a.hasAttribute and a.hasAttribute(b):
           d = a
           c = a.getAttribute(b)

      r(Qa, inner_func)
      def inner_func_2(b):
          nonlocal d,c
          b += "app"
          if not d and (e := a.querySelector(f"[{b.replace(':','\\\\:')}]")):
              d = e
              c = e.getAttribute(b)
      r(Qa, inner_func_2)

      if d:
         e = {}
         if Fe:
             e.strictDi = None != De(d, "strict-