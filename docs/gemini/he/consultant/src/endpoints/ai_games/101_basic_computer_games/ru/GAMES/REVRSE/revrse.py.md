# Анализ кода модуля `revrse.py`

**Качество кода**
- **Соответствие требованиям к формату кода (1-10)**
    - **Преимущества:**
        - Код хорошо структурирован и читаем.
        - Функции имеют четкое назначение и разделены по логике.
        - Имеется подробное описание алгоритма игры и блок-схема в комментариях.
        - Код включает обработку ошибок ввода пользователя.
        - Присутствуют комментарии, объясняющие основные части кода.
    - **Недостатки:**
        - Используется стандартный `print` для вывода, вместо логирования.
        - Отсутствует импорт и использование `j_loads` или `j_loads_ns` для работы с файлами.
        - Отсутствует импорт и использование `logger` для логирования ошибок и отладки.
        - Комментарии не соответствуют формату RST.
        - Отсутствует docstring у функций.
        - Имена переменных не стандартизированы.

**Рекомендации по улучшению**

1.  **Форматирование документации**:
    -   Переписать все комментарии и docstring в формате RST.
    -   Добавить docstring к функциям и модулю.
2.  **Логирование**:
    -   Заменить `print` на `logger.info`, `logger.debug` и `logger.error` для более гибкого управления выводом и отладкой.
    -   Импортировать и использовать `logger` из `src.logger.logger`.
3.  **Обработка ошибок**:
    -   Использовать `logger.error` для логирования ошибок вместо `print`.
4.  **Импорты**:
    -  Добавить недостающие импорты.
5.  **Соглашения об именовании**:
    -   Привести имена переменных и функций к единому стилю.
6. **Обработка данных**:
    - Заменить `json.load` на `j_loads` или `j_loads_ns` из `src.utils.jjson`.

**Улучшенный код**
```python
"""
Модуль для игры в "REVRSE".
=========================================================================================

Этот модуль реализует игру "REVRSE", в которой игрок пытается угадать
последовательность из 4 цифр.

Правила игры:
1. Компьютер генерирует случайную последовательность из 4 цифр от 1 до 6, цифры могут повторяться.
2. Игрок вводит свою последовательность из 4 цифр, также от 1 до 6, разделяя цифры пробелами.
3. После каждой попытки компьютер выводит:
   - Количество правильно угаданных цифр на своих местах (прямое попадание).
   - Количество правильно угаданных цифр, которые есть в загаданной последовательности, но находятся не на своих местах (косвенное попадание).
4. Игра заканчивается, когда игрок угадывает последовательность или после 10 попыток.

Пример использования:

.. code-block:: python

    from src.endpoints.ai_games.101_basic_computer_games.ru.GAMES.REVRSE import revrse

    revrse.play_reverse_game()
"""
import random # Импортируем модуль random для генерации случайных чисел
from src.logger.logger import logger  # Импортируем logger для логирования #
# from src.utils.jjson import j_loads_ns #Импортируем j_loads_ns из src.utils.jjson # TODO: Пока не используется, но может понадобиться в будущем

def generate_target_sequence() -> list:
    """
    Генерирует случайную последовательность из 4 цифр от 1 до 6.

    :return: Список из 4 случайных целых чисел от 1 до 6.
    :rtype: list
    """
    # Генерация случайной последовательности из 4 цифр от 1 до 6 #
    return [random.randint(1, 6) for _ in range(4)]


def compare_sequences(target: list, user: list) -> tuple:
    """
    Сравнивает две последовательности и подсчитывает прямые и косвенные попадания.

    :param target: Загаданная последовательность цифр.
    :type target: list
    :param user: Введенная пользователем последовательность цифр.
    :type user: list
    :return: Кортеж, содержащий количество прямых и косвенных попаданий.
    :rtype: tuple
    """
    direct_hits = 0  # Прямые попадания (цифра на своем месте) #
    indirect_hits = 0  # Косвенные попадания (цифра присутствует, но не на своем месте) #
    target_copy = list(target) # Создаем копию загаданной последовательности, чтобы не менять исходную #

    # Считаем прямые попадания и удаляем их из копии #
    for i in range(4):
        if user[i] == target_copy[i]:
            direct_hits += 1
            target_copy[i] = None # Помечаем, чтобы не считать повторно #
            user[i] = None # Помечаем, чтобы не считать повторно #

    # Считаем косвенные попадания #
    for i in range(4):
      if user[i] is not None:
        for j in range(4):
            if user[i] == target_copy[j]:
                indirect_hits += 1
                target_copy[j] = None
                break
    return direct_hits, indirect_hits


def play_reverse_game():
    """
    Основная логика игры "REVRSE".
    """
    number_of_guesses = 0  # Счетчик попыток #
    target_sequence = generate_target_sequence()  # Загаданная последовательность #

    logger.info("Добро пожаловать в игру REVRSE!")  # Вывод приветственного сообщения и инструкций #
    logger.info("Я загадал последовательность из 4 цифр (от 1 до 6).")  # Вывод приветственного сообщения и инструкций #
    logger.info("Попробуй ее отгадать. У тебя есть 10 попыток.")  # Вывод приветственного сообщения и инструкций #

    while number_of_guesses < 10:
        number_of_guesses += 1
        try:
            user_input = input(f"Попытка {number_of_guesses}. Введи 4 цифры через пробел (например, 1 2 3 4): ") # Запрос ввода пользовательской последовательности #
            user_sequence = [int(x) for x in user_input.split()]  # Преобразуем введенные данные в список целых чисел #
            if len(user_sequence) != 4 or not all(1 <= x <= 6 for x in user_sequence): # Проверка корректности ввода #
                logger.error("Пожалуйста, введи ровно 4 цифры от 1 до 6, разделенные пробелами.")  # Логирование ошибки в случае некорректного ввода #
                continue
        except ValueError as e:
            logger.error(f"Пожалуйста, введи целые числа. Ошибка: {e}")  # Логирование ошибки в случае неверного формата ввода #
            continue

        direct_hits, indirect_hits = compare_sequences(target_sequence, user_sequence) # Вызов функции сравнения последовательностей #
        logger.info(f"Прямые попадания: {direct_hits}, Косвенные попадания: {indirect_hits}")  # Вывод количества прямых и косвенных попаданий #
        if direct_hits == 4: # Проверка на победу #
            logger.info("Поздравляю! Ты угадал последовательность!")  # Вывод сообщения о победе #
            return

    logger.info("Увы, попытки закончились. Ты не угадал последовательность.")  # Вывод сообщения о проигрыше #
    logger.info(f"Правильная последовательность: {target_sequence}") # Вывод загаданной последовательности #

if __name__ == "__main__":
    play_reverse_game()
```