# Модуль `hypotez/src/utils/convertors/png.py`

## Обзор

Модуль `hypotez/src/utils/convertors/png.py` предоставляет инструменты для генерации PNG изображений из текстовых строк с использованием библиотеки Pillow.  Модуль включает класс `TextToImageGenerator` для создания изображений, а также функцию `webp2png` для конвертации изображений WEBP в PNG.

## Классы

### `TextToImageGenerator`

**Описание**: Класс `TextToImageGenerator` предназначен для генерации PNG изображений из текстовых строк.  Он предоставляет методы для задания параметров изображения, расчета позиций текста, генерации изображений, обработки ошибок и логгирования.

**Методы**:

- **`__init__(self)`**: Инициализирует класс с параметрами по умолчанию для размеров изображения, отступа, фона и цвета текста.
- **`generate_images(self, lines, output_dir=None, font="sans-serif", canvas_size=None, padding=None, background_color=None, text_color=None, log_level=None, clobber=False)`**: Генерирует PNG изображения из списка строк `lines`.  Изображения сохраняются в указанной директории `output_dir` (по умолчанию "./output").  Функция поддерживает настраиваемые параметры шрифта, размера холста, отступа, цвета фона и текста, а также уровень логгирования.  Если файл с таким же именем уже существует, и `clobber=False`, то изображение пропускается.
- **`generate_png(self, text, canvas_size, padding, background_color, text_color, font)`**: Создаёт PNG изображение с заданным текстом, шрифтом и цветами.
- **`center_text_position(self, draw, text, font, canvas_size)`**: Вычисляет координаты для центрирования текста на холсте.
- **`overlay_images(self, background_path, overlay_path, position=(0, 0), alpha=1.0)`**: Наложение одного PNG изображения поверх другого в указанной позиции.  Поддерживает изменение прозрачности наложения.


## Функции

### `webp2png(webp_path, png_path)`

**Описание**: Конвертирует изображение в формате WEBP в PNG.

**Параметры**:
- `webp_path` (str): Путь к файлу в формате WEBP.
- `png_path` (str): Путь к файлу для сохранения преобразованного изображения в формате PNG.


**Возвращает**:
- bool: `True`, если преобразование прошло успешно, иначе `None`.


**Обрабатываемые исключения**:
- Возможные исключения при работе с файлами или библиотекой Pillow.


## Примеры использования

```python
# Пример генерации изображений из списка строк:
generator = TextToImageGenerator()
lines = ["Строка 1", "Строка 2", "Строка 3"]
output_dir = "./output_images"
images = generator.generate_images(lines, output_dir=output_dir)
print(images)

# Пример конвертации WEBP в PNG:
webp2png("image.webp", "image.png")
```


##  Примечания

- Для работы с Pillow необходимо установить соответствующий пакет: `pip install Pillow`
- Модуль использует логгирование.
- Использование `async` ключевого слова в методе `generate_images` намекает на потенциальную асинхронность при обработке нескольких строк. В зависимости от реализации асинхронной части, возможно, потребуется использовать `asyncio` для запуска кода.