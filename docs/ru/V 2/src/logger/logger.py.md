# Модуль `logger`

## Обзор

Модуль `logger` предоставляет функциональность для логирования сообщений в консоль, файлы и в формате JSON. Он использует паттерн Singleton для обеспечения единственного экземпляра логгера в приложении. Модуль поддерживает различные уровни логирования, а также форматирование сообщений с использованием цветов.

## Оглавление

- [Классы](#классы)
    - [`SingletonMeta`](#singletonmeta)
    - [`JsonFormatter`](#jsonformatter)
    - [`Logger`](#logger)
- [Функции](#функции)

## Классы

### `SingletonMeta`

**Описание**:
Метакласс для реализации паттерна Singleton.

**Методы**:
- `__call__`: Возвращает единственный экземпляр класса.

### `JsonFormatter`

**Описание**:
Пользовательский форматтер для логирования в формате JSON.

**Методы**:
- `format`: Форматирует запись лога в JSON.

### `Logger`

**Описание**:
Класс Logger реализует паттерн Singleton и предоставляет функциональность для логирования в консоль, файлы и JSON.

**Параметры**:

- `info_log_path` (Optional[str], optional): Путь к файлу для информационных логов. По умолчанию `None`.
- `debug_log_path` (Optional[str], optional): Путь к файлу для отладочных логов. По умолчанию `None`.
- `errors_log_path` (Optional[str], optional): Путь к файлу для логов ошибок. По умолчанию `None`.
- `json_log_path` (Optional[str], optional): Путь к файлу для JSON логов. По умолчанию `None`.

**Атрибуты**:

- `log_files_path` (Path): Путь к директории, где хранятся файлы логов.
- `info_log_path` (Path): Путь к файлу для информационных логов.
- `debug_log_path` (Path): Путь к файлу для отладочных логов.
- `errors_log_path` (Path): Путь к файлу для логов ошибок.
- `json_log_path` (Path): Путь к файлу для JSON логов.

**Методы**:

- `__init__`: Инициализирует экземпляр логгера, устанавливает пути к файлам логов, создает директории и файлы, настраивает логгеры.

- `_format_message`: Возвращает отформатированное сообщение с необязательным цветом и информацией об исключении.

- `_ex_full_info`: Возвращает полную информацию об исключении, включая имя файла, функцию и номер строки.

- `log`: Общий метод для логирования сообщений на указанном уровне с необязательным цветом.

- `info`: Логирует информационное сообщение с необязательными цветами текста и фона.

- `success`: Логирует сообщение об успехе с необязательными цветами текста и фона.

- `warning`: Логирует предупреждение с необязательными цветами текста и фона.

- `debug`: Логирует отладочное сообщение с необязательными цветами текста и фона.

- `error`: Логирует сообщение об ошибке с необязательными цветами текста и фона.

- `critical`: Логирует критическое сообщение с необязательными цветами текста и фона.

## Функции

### `format`

**Описание**:
Форматирует запись лога в JSON.

**Параметры**:

- `record` (LogRecord): Запись журнала для форматирования.

**Возвращает**:

- `str`: Строка, содержащая запись журнала в формате JSON.

### `__init__`

**Описание**:
Инициализирует экземпляр логгера, устанавливает пути к файлам логов, создает директории и файлы, настраивает логгеры.

**Параметры**:

- `info_log_path` (Optional[str], optional): Путь к файлу для информационных логов. По умолчанию `None`.
- `debug_log_path` (Optional[str], optional): Путь к файлу для отладочных логов. По умолчанию `None`.
- `errors_log_path` (Optional[str], optional): Путь к файлу для логов ошибок. По умолчанию `None`.
- `json_log_path` (Optional[str], optional): Путь к файлу для JSON логов. По умолчанию `None`.

### `_format_message`

**Описание**:
Возвращает отформатированное сообщение с необязательным цветом и информацией об исключении.

**Параметры**:

- `message` (str): Сообщение для форматирования.
- `ex` (Optional[Exception], optional): Исключение. По умолчанию `None`.
- `color` (Optional[Tuple[str, str]], optional): Кортеж цветов текста и фона. По умолчанию `None`.

**Возвращает**:

- `str`: Отформатированное сообщение.

### `_ex_full_info`

**Описание**:
Возвращает полную информацию об исключении, включая имя файла, функцию и номер строки.

**Параметры**:

- `ex` (Optional[Exception], optional): Исключение.

**Возвращает**:

- `str`: Строка с информацией об исключении.

### `log`

**Описание**:
Общий метод для логирования сообщений на указанном уровне с необязательным цветом.

**Параметры**:

- `level` (int): Уровень логирования.
- `message` (str): Сообщение для логирования.
- `ex` (Optional[Exception], optional): Исключение. По умолчанию `None`.
- `exc_info` (bool, optional): Флаг, указывающий, нужно ли включать информацию об исключении. По умолчанию `False`.
- `color` (Optional[Tuple[str, str]], optional): Кортеж цветов текста и фона. По умолчанию `None`.

### `info`

**Описание**:
Логирует информационное сообщение с необязательными цветами текста и фона.

**Параметры**:

- `message` (str): Сообщение для логирования.
- `ex` (Optional[Exception], optional): Исключение. По умолчанию `None`.
- `exc_info` (bool, optional): Флаг, указывающий, нужно ли включать информацию об исключении. По умолчанию `False`.
- `text_color` (str, optional): Цвет текста. По умолчанию `"green"`.
- `bg_color` (str, optional): Цвет фона. По умолчанию `""`.

### `success`

**Описание**:
Логирует сообщение об успехе с необязательными цветами текста и фона.

**Параметры**:

- `message` (str): Сообщение для логирования.
- `ex` (Optional[Exception], optional): Исключение. По умолчанию `None`.
- `exc_info` (bool, optional): Флаг, указывающий, нужно ли включать информацию об исключении. По умолчанию `False`.
- `text_color` (str, optional): Цвет текста. По умолчанию `"yellow"`.
- `bg_color` (str, optional): Цвет фона. По умолчанию `""`.

### `warning`

**Описание**:
Логирует предупреждение с необязательными цветами текста и фона.

**Параметры**:

- `message` (str): Сообщение для логирования.
- `ex` (Optional[Exception], optional): Исключение. По умолчанию `None`.
- `exc_info` (bool, optional): Флаг, указывающий, нужно ли включать информацию об исключении. По умолчанию `False`.
- `text_color` (str, optional): Цвет текста. По умолчанию `"black"`.
- `bg_color` (str, optional): Цвет фона. По умолчанию `"yellow"`.

### `debug`

**Описание**:
Логирует отладочное сообщение с необязательными цветами текста и фона.

**Параметры**:

- `message` (str): Сообщение для логирования.
- `ex` (Optional[Exception], optional): Исключение. По умолчанию `None`.
- `exc_info` (bool, optional): Флаг, указывающий, нужно ли включать информацию об исключении. По умолчанию `True`.
- `text_color` (str, optional): Цвет текста. По умолчанию `"cyan"`.
- `bg_color` (str, optional): Цвет фона. По умолчанию `""`.

### `error`

**Описание**:
Логирует сообщение об ошибке с необязательными цветами текста и фона.

**Параметры**:

- `message` (str): Сообщение для логирования.
- `ex` (Optional[Exception], optional): Исключение. По умолчанию `None`.
- `exc_info` (bool, optional): Флаг, указывающий, нужно ли включать информацию об исключении. По умолчанию `True`.
- `text_color` (str, optional): Цвет текста. По умолчанию `"red"`.
- `bg_color` (str, optional): Цвет фона. По умолчанию `""`.

### `critical`

**Описание**:
Логирует критическое сообщение с необязательными цветами текста и фона.

**Параметры**:

- `message` (str): Сообщение для логирования.
- `ex` (Optional[Exception], optional): Исключение. По умолчанию `None`.
- `exc_info` (bool, optional): Флаг, указывающий, нужно ли включать информацию об исключении. По умолчанию `True`.
- `text_color` (str, optional): Цвет текста. По умолчанию `"red"`.
- `bg_color` (str, optional): Цвет фона. По умолчанию `"white"`.