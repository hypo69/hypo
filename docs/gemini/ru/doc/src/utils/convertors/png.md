# Модуль hypotez/src/utils/convertors/png.py

## Обзор

Модуль `src.utils.convertors.png` предоставляет инструменты для генерации изображений PNG из текстовых строк с использованием библиотеки Pillow. Он позволяет настраивать параметры изображения, такие как размер, шрифт, цвета и выходной каталог. Также модуль умеет конвертировать WEBP файлы в PNG.

## Классы

### `TextToImageGenerator`

**Описание**: Класс `TextToImageGenerator` предназначен для генерации изображений PNG из списка строк текста. Он предоставляет методы для задания путей, вычисления позиции текста, генерации изображений, фильтрации строк, проверки существования файлов и обработки исключений.

**Методы**:

- **`__init__`**: Инициализирует класс с настройками по умолчанию для выходного каталога, размера холста, отступа и цветов.
- **`generate_images`**: Генерирует изображения PNG для каждой строки текста в списке. Настраиваемые параметры включают путь к выходному каталогу, шрифт, размер холста, отступ, цвета фона и текста, уровень ведения логов и возможность перезаписи существующих файлов.

    **Параметры**:
    - `lines` (List[str]): Список строк текста для генерации изображений.
    - `output_dir` (str | Path, optional): Путь к выходному каталогу. По умолчанию "./output".
    - `font` (str | ImageFont.ImageFont, optional): Шрифт для текста. По умолчанию "sans-serif".
    - `canvas_size` (Tuple[int, int], optional): Размер холста в пикселях. По умолчанию (1024, 1024).
    - `padding` (float, optional): Процент размера холста для использования в качестве пустой границы. По умолчанию 0.10.
    - `background_color` (str, optional): Цвет фона изображений. По умолчанию "white".
    - `text_color` (str, optional): Цвет текста. По умолчанию "black".
    - `log_level` (int | str | bool, optional): Уровень подробности ведения логов. По умолчанию "WARNING".
    - `clobber` (bool, optional): Если True, перезаписывает существующие файлы. По умолчанию False.

    **Возвращает**:
    - List[Path]: Список путей к сгенерированным изображениям PNG.


- **`generate_png`**: Создает изображение PNG со заданным текстом, шрифтом и цветами.

    **Параметры**:
    - `text` (str): Текст для отображения на изображении.
    - `canvas_size` (Tuple[int, int]): Размер холста в пикселях.
    - `padding` (float): Отступ в процентах для использования в качестве границы.
    - `background_color` (str): Цвет фона изображения.
    - `text_color` (str): Цвет текста.
    - `font` (str | ImageFont.ImageFont): Шрифт для использования в тексте.

    **Возвращает**:
    - Image: Сгенерированное изображение PNG.


- **`center_text_position`**: Вычисляет позицию для центрирования текста на холсте.

    **Параметры**:
    - `draw` (ImageDraw.Draw): Экземпляр ImageDraw.
    - `text` (str): Текст для центрирования.
    - `font` (ImageFont.ImageFont): Шрифт.
    - `canvas_size` (Tuple[int, int]): Размер холста.

    **Возвращает**:
    - Tuple[int, int]: Координаты для центрирования текста.


- **`overlay_images`**: Накладывает одно изображение PNG поверх другого в указанной позиции.

    **Параметры**:
    - `background_path` (str | Path): Путь к фоновому изображению PNG.
    - `overlay_path` (str | Path): Путь к изображению-наложению PNG.
    - `position` (tuple[int, int], optional): (x, y) координаты, где будет расположено наложение. По умолчанию (0, 0).
    - `alpha` (float, optional): Уровень прозрачности наложения изображения (0.0 - 1.0). По умолчанию 1.0.

    **Возвращает**:
    - Image: Результирующее изображение с наложением.


## Функции

### `webp2png`

**Описание**: Преобразует изображение WEBP в формат PNG.

**Параметры**:
- `webp_path` (str): Путь к входному файлу WEBP.
- `png_path` (str): Путь для сохранения преобразованного файла PNG.

**Возвращает**:
- bool: `True` при успешной конвертации, иначе `None`.


## Замечания

- Модуль использует библиотеку Pillow для работы с изображениями.
- Модуль использует `async` для асинхронной работы.
- Модуль использует логгирование для вывода сообщений об ошибках и предупреждениях.
- `setup_logging` и некоторые другие функции не документированы, поскольку их реализация не описана в предоставляемом коде.  Добавьте документацию к этим функциям, если они используются в других местах.