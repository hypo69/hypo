# Модуль `test_extraction.py`

## Обзор

Этот модуль содержит тесты для модуля `extraction` в пакете `tiny_troupe`. Тесты проверяют функциональность экспорта артефактов в различные форматы (JSON, текст, DOCX) и нормализацию концепций.

## Фикстуры

### `exporter`

**Описание**: Фикстура, возвращающая экземпляр класса `ArtifactExporter` с заданной папкой вывода.

**Возвращает**:
- `ArtifactExporter`: Экземпляр класса `ArtifactExporter`.

## Функции

### `test_export_json`

**Описание**: Тестирует экспорт артефактов в формате JSON.

**Параметры**:
- `exporter`: Экземпляр класса `ArtifactExporter` (получен из фикстуры).

**Действия**:
1. Определяет данные артефакта в словаре.
2. Экспортирует данные артефакта в файл JSON с помощью метода `exporter.export()`.
3. Проверяет, что файл JSON был создан.
4. Проверяет, что содержимое экспортированного файла соответствует исходным данным.

**Вызывает исключения**:
- Возможны ошибки при работе с файлами или JSON.

### `test_export_text`

**Описание**: Тестирует экспорт артефактов в текстовом формате.

**Параметры**:
- `exporter`: Экземпляр класса `ArtifactExporter` (получен из фикстуры).

**Действия**:
1. Определяет данные артефакта в строке.
2. Экспортирует данные артефакта в текстовый файл с помощью метода `exporter.export()`.
3. Проверяет, что файл текста был создан.
4. Проверяет, что содержимое экспортированного файла соответствует исходным данным.

**Вызывает исключения**:
- Возможны ошибки при работе с файлами.

### `test_export_docx`

**Описание**: Тестирует экспорт артефактов в формате DOCX.

**Параметры**:
- `exporter`: Экземпляр класса `ArtifactExporter` (получен из фикстуры).

**Действия**:
1. Определяет данные артефакта в строке Markdown.
2. Экспортирует данные артефакта в файл DOCX с помощью метода `exporter.export()`.
3. Проверяет, что файл DOCX был создан.
4. Проверяет, что экспортированный файл содержит исходные данные (не в формате Markdown).
5. Проверяет, что в экспортированном файле отсутствуют исходные символы Markdown.

**Вызывает исключения**:
- Возможны ошибки при работе с файлами или библиотекой `docx`.

### `test_normalizer`

**Описание**: Тестирует функциональность нормализации концепций.

**Параметры**:
- `concepts`: Список концепций для нормализации.

**Действия**:
1. Создаёт экземпляр класса `Normalizer` с заданными концепциями.
2. Проверяет, что количество нормализованных элементов соответствует заданному значению (`n`).
3. Нормализует несколько случайных выборок концепций с помощью метода `normalize()`.
4. Проверяет, что карта нормализации не пуста после нормализации.
5. Проверяет, что размер карты нормализации увеличивается после каждой нормализации.
6. Проверяет, что длина нормализованного списка концепций равна длине исходного списка.
7. Проверяет, что все элементы из нормализованного списка концепций присутствуют в ключах карты нормализации.


**Вызывает исключения**:
- Возможные ошибки при работе с методами класса `Normalizer`.

##  Ссылки

- [Модуль `extraction`](extraction.md)
- [Модуль `utils`](utils.md)
- [Модуль `testing_utils`](testing_utils.md)