# Документация модуля `run.py`

## Обзор

Модуль `run.py` является точкой входа для запуска Telegram-бота. Он инициализирует и запускает бота, используя библиотеку `aiogram`. Модуль загружает переменные окружения из файла `.env`, создает экземпляр бота и диспетчера, регистрирует промежуточное ПО для ограничения скорости обработки сообщений и включает маршрутизатор для обработки команд и сообщений.

## Подробней

Этот модуль выполняет следующие задачи:
1. Загрузка переменных окружения, таких как токен бота, из файла `.env`.
2. Создание экземпляра бота `aiogram` с использованием токена.
3. Создание экземпляра диспетчера `aiogram`, который обрабатывает обновления от Telegram.
4. Регистрация промежуточного ПО для управления скоростью обработки сообщений, чтобы предотвратить злоупотребление ботом.
5. Включение маршрутизатора, который определяет, как обрабатывать различные типы сообщений и команд.
6. Запуск бота в режиме опроса (polling), при котором бот активно опрашивает сервер Telegram на наличие новых обновлений.

Расположение файла в проекте: `hypotez/src/endpoints/bots/telegram/movie_bot-main/run.py`. Это указывает на то, что данный файл является частью Telegram-бота для поиска фильмов.

## Функции

### `main`

```python
async def main() -> None:
    """
    Args:
        Нет

    Returns:
        None

    Raises:
        Нет
    """
```

**Описание**: Асинхронная функция, которая инициализирует и запускает Telegram-бота.

**Параметры**: 
- Отсутствуют.

**Возвращает**:
- `None`

**Вызывает исключения**:
- Отсутствуют.

**Примеры**:

```python
async def main() -> None:
    bot = Bot(os.getenv('TOKEN'),)
    dp.message.middleware(ThrottlingMiddleware())
    dp.include_router(router)
    await dp.start_polling(bot)
```

### `__main__`

**Описание**: Этот блок кода выполняется при запуске скрипта напрямую. Он настраивает логирование и запускает асинхронную функцию `main`.

**Параметры**:
- Отсутствуют.

**Возвращает**:
- Отсутствует.

**Вызывает исключения**:
- Отсутствуют.

**Примеры**:

```python
if __name__ == "__main__":
    logging.basic_colorized_config(
        level=logging.INFO,
        format='%(asctime)s - [%(levelname)s] - %(name)s - '
               '(%(filename)s).%(funcName)s(%(lineno)d) - %(message)s',
        datefmt='%H:%M:%S'
    )
    asyncio.run(main())
```