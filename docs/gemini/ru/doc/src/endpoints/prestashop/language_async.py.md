# Модуль `language_async.py`

## Обзор

Модуль `language_async.py` предоставляет асинхронный класс `PrestaLanguageAync` для управления языками в магазине PrestaShop. Он позволяет добавлять, удалять, обновлять и получать информацию о языках через API PrestaShop.

## Содержание

- [Классы](#Классы)
  - [`PrestaLanguageAync`](#PrestaLanguageAync)
    - [`__init__`](#__init__)
    - [`get_lang_name_by_index`](#get_lang_name_by_index)
    - [`get_languages_schema`](#get_languages_schema)
- [Функции](#Функции)
  - [`main`](#main)

## Классы

### `PrestaLanguageAync`

**Описание**:
Класс `PrestaLanguageAync` предназначен для асинхронного взаимодействия с API PrestaShop для управления языками магазина.

**Как работает класс**:
Класс наследуется от `PrestaShopAsync` и предоставляет методы для получения информации о языках, таких как получение имени языка по его индексу и получение схемы языков.

- Все комментарии и docstring должны быть на русском языке в формате UTF-8. Если в оригинальном коде текст напюисан на английском - переводи его на русский

#### `__init__`

```python
def __init__(self, *args, **kwards):
    """Класс интерфейс взаимодействия языками в Prestashop
    Важно помнить, что у каждого магазина своя нумерация языков
    :lang_string: ISO названия языка. Например: en, ru, he
    """
    ...
```

**Описание**:
Инициализирует экземпляр класса `PrestaLanguageAync`.

**Как работает функция**:
Этот метод является конструктором класса. Он принимает произвольное количество позиционных и именованных аргументов (`*args`, `**kwards`). В docstring указано, что важно помнить, что у каждого магазина своя нумерация языков. Параметр `lang_string` указывает на ISO-название языка, например: en, ru, he.

#### `get_lang_name_by_index`

```python
async def get_lang_name_by_index(self, lang_index:int|str ) -> str:
    """Возвращает имя языка ISO по его индексу в таблице Prestashop"""
    try:
        return super().get('languagaes', resource_id=str(lang_index), display='full', io_format='JSON')
    except Exception as ex:
        logger.error(f"Ошибка получения языка по индексу {lang_index=}", ex)
        return ''
```

**Описание**:
Возвращает имя языка ISO по его индексу в таблице PrestaShop.

**Как работает функция**:
Эта функция асинхронно получает имя языка ISO по его индексу из таблицы PrestaShop. Она вызывает метод `get` из родительского класса (`PrestaShopAsync`) с параметрами, необходимыми для получения информации о языке. В случае возникновения ошибки, она логируется с использованием `logger.error`, и возвращается пустая строка.

Внутри функции происходят следующие действия:
1. Вызов `super().get()` для получения данных о языке из API PrestaShop.
2. Преобразование `lang_index` в строку для использования в качестве `resource_id`.
3. Обработка исключений с помощью `try...except` для логирования ошибок и возврата пустой строки в случае неудачи.

**Параметры**:
- `lang_index` (int | str): Индекс языка в таблице PrestaShop.

**Возвращает**:
- `str`: Имя языка ISO или пустая строка в случае ошибки.

**Вызывает исключения**:
- `Exception`: В случае ошибки при получении данных о языке.

#### `get_languages_schema`

```python
async def get_languages_schema(self) -> dict:
    lang_dict = super().get_languages_schema()
    print(lang_dict)
```

**Описание**:
Получает схему языков из PrestaShop.

**Как работает функция**:
Эта функция асинхронно получает схему языков, используя метод `get_languages_schema` из родительского класса. Полученный словарь `lang_dict` затем выводится с использованием функции `print`.

Внутри функции происходят следующие действия:
1. Вызов `super().get_languages_schema()` для получения схемы языков.
2. Вывод полученной схемы с использованием `print`.

**Параметры**:
- Отсутствуют

**Возвращает**:
- `dict`: Cхема языков.

## Функции

### `main`

```python
async def main():
    """"""
    ...
    lang_class = PrestaLanguageAync()
    languagas_schema = await  lang_class.get_languages_schema()
    print(languagas_schema)
```

**Описание**:
Асинхронная функция, выполняющая основные действия.

**Как работает функция**:
Эта функция создает экземпляр класса `PrestaLanguageAync` и вызывает метод `get_languages_schema` для получения схемы языков, после чего выводит её.

Внутри функции происходят следующие действия:
1. Создание экземпляра класса `PrestaLanguageAync`.
2. Вызов метода `get_languages_schema` для получения схемы языков.
3. Вывод полученной схемы с использованием `print`.

**Параметры**:
- Отсутствуют

**Возвращает**:
- Отсутствует