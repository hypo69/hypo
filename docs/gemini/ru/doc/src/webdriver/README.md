# Модуль `webdriver/driver`

## Обзор

Модуль `driver` предоставляет реализацию динамического WebDriver, объединяющую базовые функциональности WebDriver с дополнительными методами для взаимодействия с веб-страницами, обработки JavaScript и управления куками. Он использует возможности Selenium WebDriver и собственные расширения для поддержки различных задач веб-автоматизации.

## Основные возможности

- Наследуется от указанного класса WebDriver (например, Chrome, Firefox, Edge) и добавляет дополнительную функциональность.
- Включает методы для прокрутки, обработки куков, взаимодействия с веб-элементами и выполнения JavaScript.
- Предоставляет утилиты для управления окнами браузера и взаимодействия со страницами.


## Компоненты

### Класс `DriverBase`

**Атрибуты:**

- `previous_url`: Хранит предыдущий URL.
- `referrer`: Хранит URL источника.
- `page_lang`: Хранит язык страницы.
- Различные атрибуты, связанные с взаимодействием с веб-элементами и выполнением JavaScript.

**Методы:**

- `scroll(scrolls, direction, frame_size, delay)`: Прокручивает веб-страницу в указанном направлении. Поддерживает прокрутку вперед, назад или в обе стороны.
- `locale()`: Попытка определить язык страницы путем проверки тегов meta или использования JavaScript.
- `get_url(url)`: Загружает указанный URL.
- `extract_domain(url)`: Извлекает домен из URL.
- `_save_cookies_localy()`: Сохраняет куки в локальный файл.
- `page_refresh()`: Обновляет текущую страницу.
- `window_focus()`: Фокусирует окно браузера с использованием JavaScript.
- `wait(seconds)`: Ожидает указанный интервал.


### Класс `DriverMeta`

**Методы:**

- `__call__(cls, driver_class, *args, **kwargs)`: Создаёт новый класс `Driver`, объединяющий указанный класс WebDriver (например, Chrome, Firefox, Edge) с `DriverBase`. Инициализирует методы JavaScript и функциональности выполнения локаторов.


### Класс `Driver`

**Описание:**

- Динамически создаваемый класс WebDriver, наследующийся как от `DriverBase`, так и от указанного класса WebDriver.

**Пример использования:**

```python
from src.webdriver.driver import Driver, Chrome
d = Driver(Chrome)
```


## Использование

- **Инициализация:** Создайте экземпляр `Driver` с конкретным классом WebDriver.
- **Функциональность:** Используйте методы, такие как `scroll`, `get_url`, `extract_domain` и `page_refresh`, для взаимодействия с веб-страницами. Класс также предоставляет методы для выполнения JavaScript и управления куками.


## Зависимости

- **Selenium:** Используется для операций WebDriver, включая поиск элементов, прокрутку и взаимодействие с веб-страницами.
- **Встроенные библиотеки Python:** Включают `sys`, `pickle`, `time`, `copy`, `pathlib`, `urllib.parse` и другие для различных функций.

## Примеры использования


```python
from src.webdriver.driver import Driver, Chrome
from selenium.webdriver.common.by import By

def main():
    # Пример 1: Создание экземпляра Chrome драйвера и навигация по URL
    chrome_driver = Driver(Chrome)
    if chrome_driver.get_url("https://www.example.com"):
        print("Успешно перешли на URL")

    # ... (другие примеры)

if __name__ == "__main__":
    main()
```


## Примечания

- Убедитесь, что у вас установлены все необходимые зависимости, такие как `selenium` и другие модули, указанные в импортах.
- Путь к файлам настроек и другим ресурсам должен быть настроен в `gs` (глобальные настройки).