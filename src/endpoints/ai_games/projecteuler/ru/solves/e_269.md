## Ответ на Задачу No 269: Многочлены с целыми корнями

### 1. Анализ задачи и решение
**Понимание задачи:**
* Нам нужно найти количество многочленов вида `x^4 + a3*x^3 + a2*x^2 + a1*x + a0`, где коэффициенты `a0`, `a1`, `a2`, `a3` - целые числа в диапазоне от `-n` до `n`.
* Многочлен имеет хотя бы один целый корень тогда и только тогда, когда `a0` делится на этот корень.
* Нам нужно найти количество таких многочленов для `n = 10^6`.
* Использование того факта, что a0 должен делиться на целый корень, позволяет нам перебрать возможные корни и найти соответствующие многочлены.
* Простой перебор всех коэффициентов и проверка для каждого многочлена будет слишком медленным.

**Решение:**
1. **Перебор корней:** Мы знаем, что если многочлен имеет целый корень `r`, то `a0` должно делиться на `r`.  Корни могут быть от -n до n.
2. **Вывод формулы для a0, a1, a2 и a3** Из условия что `r` корень многочлена, то 
    `r^4 + a3 * r^3 + a2 * r^2 + a1 * r + a0 = 0` => `a0 = - (r^4 + a3 * r^3 + a2 * r^2 + a1 * r)`
    Нам нужно перебрать все возможные значения корней `r`, и для каждого `r`  нам необходимо перебрать все допустимые значения a1, a2, a3, и убедиться, что `a0` получается в диапазоне [-n, n]
3. **Итерирование по возможным корням**:
   - Для каждого целого корня `r` от `-n` до `n` (кроме 0), мы итерируем по всем возможным `a1`, `a2`, `a3` в диапазоне от `-n` до `n`.
   - Вычисляем `a0` = `-(r^4 + a3*r^3 + a2*r^2 + a1*r)`.
   - Если `-n <= a0 <= n`, то такой многочлен имеет целый корень `r`, увеличиваем счетчик на 1.
   - Для r=0, нужно чтобы `a0 = 0`
4. **Оптимизация:**
    -  Избавимся от перебора всех корней r. Если в многочлене есть корень r, то есть и многочлен с корнем -r.
    -  Сделаем перебор только по положительным `r` и умножим результат на 2.
    - Учтём, что нужно обрабатывать `r=0` отдельно (при `r=0`, `a0` всегда равно `0`).
5. **Результирующий счётчик:**
    - Инициализируем счетчик `count` равным 0.
    - Итерируемся по возможным корням `r` от `1` до `n`.
    - Увеличиваем `count` на 2 * число допустимых комбинаций `a1`, `a2`, `a3`  (так как корень может быть как `r`, так и `-r`).
    - Добавляем к `count` число многочленов для `r=0`, где `a0=0` (это `(2n+1)^3`).

### 2. Алгоритм решения
1. Начать
2. Ввести `n` (10^6)
3. Инициализировать `count` = 0
4. Итерировать по всем возможным корням `r` от 1 до `n`:
   - Инициализировать `valid_combinations` = 0
   - Итерировать по всем возможным значениям `a1` от `-n` до `n`
     - Итерировать по всем возможным значениям `a2` от `-n` до `n`
       - Итерировать по всем возможным значениям `a3` от `-n` до `n`
         - Вычислить `a0 = -(r^4 + a3*r^3 + a2*r^2 + a1*r)`
         - Если `-n <= a0 <= n`, увеличить `valid_combinations` на 1
   - Увеличить `count` на `2 * valid_combinations`
5. Увеличить `count` на `(2*n + 1)^3` (для `r=0`, когда `a0=0`)
6. Вывести `count`
7. Конец

### 3. Реализация на Python 3.12
```python
def count_polynomials_with_integer_roots(n):
    """
    Counts the number of polynomials x^4 + a3*x^3 + a2*x^2 + a1*x + a0 with integer
    coefficients -n <= a_i <= n that have at least one integer root.

    Args:
        n: The range of coefficients.

    Returns:
        The count of such polynomials.
    """
    count = 0
    for r in range(1, n + 1):
        valid_combinations = 0
        for a1 in range(-n, n + 1):
            for a2 in range(-n, n + 1):
                for a3 in range(-n, n + 1):
                   a0 = -(r**4 + a3*r**3 + a2*r**2 + a1*r)
                   if -n <= a0 <= n:
                      valid_combinations +=1
        count += 2 * valid_combinations
    count += (2 * n + 1)**3
    return count


# Example usage:
n = 10**6
result = count_polynomials_with_integer_roots(n)
print(result)
```

### 4. Блок-схема в формате mermaid
```mermaid
flowchart TD
    Start((Начало)) --> InputN((Ввести n))
    InputN --> InitCount((Инициализировать count = 0))
    InitCount --> LoopRStart((Начать цикл: r от 1 до n))
    LoopRStart --> InitValidCombos((Инициализировать valid_combinations = 0))
    InitValidCombos --> LoopA1Start((Начать цикл: a1 от -n до n))
    LoopA1Start --> LoopA2Start((Начать цикл: a2 от -n до n))
    LoopA2Start --> LoopA3Start((Начать цикл: a3 от -n до n))
    LoopA3Start --> CalculateA0((Вычислить a0 = -(r^4 + a3*r^3 + a2*r^2 + a1*r)))
    CalculateA0 --> CheckA0Range((Проверить: -n <= a0 <= n?))
    CheckA0Range -- Да --> IncrementValidCombos((Увеличить valid_combinations на 1))
    IncrementValidCombos --> LoopA3End((Конец цикла a3))
    CheckA0Range -- Нет --> LoopA3End
    LoopA3End --> LoopA2End((Конец цикла a2))
    LoopA2End --> LoopA1End((Конец цикла a1))
    LoopA1End --> UpdateCount((count = count + 2 * valid_combinations))
    UpdateCount --> LoopREnd((Конец цикла r))
    LoopREnd --> CalculateForR0((count = count + (2*n+1)^3))
    CalculateForR0 --> OutputCount((Вывести count))
    OutputCount --> End((Конец))
```

**Легенда:**
* **Начало, Конец:** Начало и конец алгоритма.
* **Ввести n:** Ввод значения n.
* **Инициализировать count = 0:** Инициализируем счетчик многочленов.
* **Начать цикл: r от 1 до n:** Цикл перебора возможных корней.
* **Инициализировать valid_combinations = 0:** Счетчик допустимых комбинаций для текущего корня r.
* **Начать цикл: a1 от -n до n:** Циклы перебора коэффициентов a1, a2, a3.
* **Вычислить a0 = -(r^4 + a3*r^3 + a2*r^2 + a1*r):** Вычисляем a0.
* **Проверить: -n <= a0 <= n?:** Проверка, находится ли a0 в допустимом диапазоне.
* **Увеличить valid_combinations на 1:** Если a0 в допустимом диапазоне увеличиваем счётчик.
* **Конец цикла a3, a2, a1:** Конец соответствующих циклов.
* **count = count + 2 * valid_combinations:** Увеличиваем count на количество комбинаций для r и -r.
*  **Конец цикла r:** Конец цикла по корням
*  **count = count + (2*n+1)^3:** Добавляем количество многочленов для случая r=0.
* **Вывести count:** Вывод финального результата.
