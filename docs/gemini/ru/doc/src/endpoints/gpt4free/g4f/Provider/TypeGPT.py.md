# Модуль TypeGPT
## Обзор

Модуль `TypeGPT` предназначен для взаимодействия с сервисом TypeGPT, предоставляя функциональность для отправки запросов к различным моделям, включая `gpt-4o-mini-2024-07-18`. Этот модуль является частью проекта `hypotez` и расширяет возможности библиотеки `g4f` для работы с альтернативными AI-провайдерами.

## Подробнее

Модуль определяет класс `TypeGPT`, который наследуется от `OpenaiTemplate`. Он содержит настройки для подключения к API TypeGPT, такие как URL, заголовки запросов, а также список поддерживаемых моделей.

## Классы

### `TypeGPT`

**Описание**: Класс `TypeGPT` предоставляет интерфейс для взаимодействия с моделями TypeGPT. Он наследует базовый класс `OpenaiTemplate` и переопределяет параметры, специфичные для данного провайдера.

**Наследует**:
- `OpenaiTemplate`: Базовый класс для шаблонов OpenAI-подобных API.

**Атрибуты**:
- `label` (str): Метка провайдера, в данном случае `"TypeGpt"`.
- `url` (str): URL сервиса TypeGPT (`"https://chat.typegpt.net"`).
- `api_base` (str): Базовый URL API (`"https://chat.typegpt.net/api/openai/v1"`).
- `working` (bool): Указывает, является ли провайдер рабочим (`True`).
- `headers` (dict): Заголовки HTTP-запросов, необходимые для взаимодействия с API.
- `default_model` (str): Модель, используемая по умолчанию (`'gpt-4o-mini-2024-07-18'`).
- `default_vision_model` (str): Модель для обработки изображений по умолчанию, совпадает с `default_model`.
- `vision_models` (list): Список моделей, поддерживающих обработку изображений.
- `fallback_models` (list): Список моделей, используемых в случае сбоя основных моделей.
- `image_models` (list): Список моделей, предназначенных для генерации изображений.
- `model_aliases` (dict): Словарь псевдонимов моделей для удобства использования.

**Методы**:
- `get_models(**kwargs)`: Получает список доступных моделей от API TypeGPT.

## Функции

### `get_models`

```python
    @classmethod
    def get_models(cls, **kwargs):
        """
        Получает список доступных моделей от API TypeGPT.

        Args:
            kwargs (dict): Дополнительные параметры, которые могут быть переданы в API запрос.

        Returns:
            list: Список доступных моделей.

        Raises:
            requests.exceptions.RequestException: Если возникает ошибка при выполнении HTTP-запроса.
            KeyError: Если структура ответа API не соответствует ожидаемой.

        Как работает функция:
        1. Проверяет, был ли уже получен список моделей (`cls.models`). Если да, возвращает сохраненный список.
        2. Если список моделей еще не получен, выполняет GET-запрос к эндпоинту `/api/config` для получения конфигурации.
        3. Извлекает список моделей из поля `customModels` ответа, разделяя строку на отдельные модели.
        4. Фильтрует модели, оставляя только те, которые начинаются с `"+"` и не входят в список `image_models`.
        5. Извлекает имя модели из каждой строки, удаляя префикс `"+"` и все, что идет после символа `"@"`.
        6. Сохраняет полученный список моделей в `cls.models` для последующего использования.
        7. Возвращает список моделей.

        ASCII flowchart:

        A [Проверка наличия cls.models]
        |
        B [GET-запрос к /api/config]
        |
        C [Извлечение customModels]
        |
        D [Разделение строки на модели]
        |
        E [Фильтрация моделей]
        |
        F [Извлечение имени модели]
        |
        G [Сохранение в cls.models]
        |
        H [Возврат списка моделей]

        Примеры:
        >>> TypeGPT.get_models()
        ['gpt-4o-mini-2024-07-18', 'gpt-3.5-turbo', ...]
        """
```
**Параметры**:
- `cls` (Type[TypeGPT]): Ссылка на класс `TypeGPT`.
- `**kwargs`: Дополнительные параметры, которые могут быть переданы в API запрос.

**Возвращает**:
- `list`: Список доступных моделей.

**Вызывает исключения**:
- `requests.exceptions.RequestException`: Если возникает ошибка при выполнении HTTP-запроса.
- `KeyError`: Если структура ответа API не соответствует ожидаемой.