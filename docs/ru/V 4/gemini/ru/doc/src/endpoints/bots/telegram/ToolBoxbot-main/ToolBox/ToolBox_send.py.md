# ToolBox_send.py

## Обзор

Данный скрипт предназначен для отправки рекламного сообщения пользователям Telegram-бота, у которых не активирован промокод. Он использует библиотеку `telebot` для взаимодействия с Telegram API и `sqlite3` для работы с базой данных пользователей. Скрипт загружает токен бота из переменных окружения, подключается к базе данных, выбирает ID пользователей без промокода и отправляет им сообщение с информацией о промокоде.

## Подробнее

Скрипт выполняет следующие шаги:

1.  Импортирует необходимые библиотеки: `telebot`, `sqlite3` и `os`, а также функцию `load_dotenv` из библиотеки `dotenv` для загрузки переменных окружения из файла `.env`.
2.  Загружает переменные окружения, содержащие токен Telegram-бота.
3.  Инициализирует бота `telebot.TeleBot` с использованием токена из переменной окружения.
4.  Устанавливает соединение с базой данных SQLite `UsersData.db`.
5.  Создает курсор для выполнения SQL-запросов.
6.  Выполняет SQL-запрос для выбора `id` всех пользователей из таблицы `users_data_table`, у которых поле `promocode` не равно 1 (т.е. у которых нет активированного промокода).
7.  Получает список `id` пользователей из результата запроса.
8.  Итерируется по списку `id` пользователей и пытается отправить каждому пользователю сообщение с информацией о промокоде "FREE24".
9.  Использует блок `try...except` для обработки возможных исключений при отправке сообщения (например, если пользователь заблокировал бота). В случае ошибки выводит в консоль `id` пользователя и сообщение "no". В случае успешной отправки выводит в консоль `id` пользователя и сообщение "yes".

## Функции

### `send_message_to_users_without_promocode`

```python
def send_message_to_users_without_promocode():
    """
    Отправляет рекламное сообщение пользователям Telegram-бота, у которых не активирован промокод.

    Args:
        Нет аргументов.

    Returns:
        None

    Raises:
        sqlite3.Error: Если возникает ошибка при работе с базой данных.
        telebot.apihelper.ApiException: Если возникает ошибка при отправке сообщения пользователю.

    Example:
        >>> send_message_to_users_without_promocode()
        (123456789, 'yes') # Сообщение успешно отправлено пользователю с ID 123456789
        (987654321, 'no')  # Не удалось отправить сообщение пользователю с ID 987654321
    """
```

**Описание**: Отправляет рекламное сообщение пользователям Telegram-бота, у которых не активирован промокод.

**Параметры**:
\- Отсутствуют.

**Возвращает**:
\- `None`

**Вызывает исключения**:

*   `sqlite3.Error`: Если возникает ошибка при работе с базой данных.
*   `telebot.apihelper.ApiException`: Если возникает ошибка при отправке сообщения пользователю.