```markdown
# vfile-message

Create [vfile][] messages.

## Contents

*   [What is this?](#what-is-this)
*   [When should I use this?](#when-should-i-use-this)
*   [Install](#install)
*   [Use](#use)
*   [API](#api)
    *   [`VFileMessage(reason[, options])`](#vfilemessagereason-options)
    *   [`Options`](#options)
    *   [Well-known Properties](#well-known-properties)
*   [Types](#types)
*   [Compatibility](#compatibility)
*   [Contribute](#contribute)
*   [License](#license)

## What is this?

This package provides a (lint) message format for vfile.

## When should I use this?

Use this package when you need to create messages outside the context of a `VFile`.  For example, if you're generating messages during a processing step without a file object.  In most cases, using `file.message` from `VFile` itself is preferred.

## Install

This package is [ESM only][esm].

In Node.js (version 16+), install with npm:

```bash
npm install vfile-message
```

In Deno with esm.sh:

```typescript
import { VFileMessage } from 'https://esm.sh/vfile-message@4';
```

In browsers with esm.sh:

```html
<script type="module">
  import { VFileMessage } from 'https://esm.sh/vfile-message@4?bundle';
</script>
```

## Use

```typescript
import { VFileMessage } from 'vfile-message';

const message = new VFileMessage(
  'Unexpected unknown word `braavo`, did you mean `bravo`?',
  {
    source: 'spell',
    ruleId: 'typo',
    place: { line: 1, column: 8 },
  }
);

console.log(message);
```

This will output a formatted message to the console, similar to this:

```
[1:8: Unexpected unknown word `braavo`, did you mean `bravo`?] {
  reason: 'Unexpected unknown word `braavo`, did you mean `bravo`?',
  line: 1,
  column: 8,
  ancestors: undefined,
  cause: undefined,
  fatal: undefined,
  place: { line: 1, column: 8 },
  ruleId: 'typo',
  source: 'spell'
}
```

## API

### `VFileMessage(reason[, options])`

Creates a message for the given `reason`.

**Parameters**

*   `reason` (`string`) - The reason for the message (use markdown for clarity).
*   `options` ([`Options`][api-options], optional) - Configuration options.

**Extends** [`Error`][mdn-error].

**Returns** Instance of `VFileMessage`.

**Fields**

*   `ancestors` (`Array<Node>` or `undefined`) - Ancestor nodes.
*   `cause` (`Error` or `undefined`) - Original error cause.
*   `column` (`number` or `undefined`) - Column number.
*   `fatal` (`boolean` or `undefined`) - Error/warning severity.
*   `line` (`number` or `undefined`) - Line number.
*   `place` ([`Point`][unist-point] or [`Position`][unist-position] or `undefined`) - Position of the message.
*   `reason` (`string`) - Reason for the message.
*   `ruleId` (`string` or `undefined`) - Category or rule ID.
*   `source` (`string` or `undefined`) - Namespace or source of the message.

### `Options`

Configuration options.

**Fields**

*   `ancestors` (`Array<Node>`) - Ancestor nodes.
*   `cause` (`Error`) - Original error cause.
*   `place` ([`Point`][unist-point] or [`Position`][unist-position]) - Position of the message.
*   `ruleId` (`string`) - Rule ID.
*   `source` (`string`) - Source or namespace.

### Well-known Properties

You can store custom data on `VFileMessage` instances.  The following properties are well-known:

*   `actual` (`string`) - Actual value.
*   `expected` (`Array<string>`) - Expected values.
*   `url` (`string`) - URL for documentation.
*   `note` (`string`) - Additional notes (use markdown).


## Types

This package is fully typed with TypeScript.

## Compatibility

Projects maintained by the unified collective are compatible with maintained Node.js versions.

## Contribute

See [`contributing.md`][contributing] in the vfile repository for contributing information.
See [`support.md`][support] for support information.

## License

[MIT][license] Â© [Titus Wormer][author]


<!-- Definitions -->
```