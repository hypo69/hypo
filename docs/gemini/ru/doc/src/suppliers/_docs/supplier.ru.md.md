# Модуль `Supplier`

## Обзор

Модуль содержит класс `Supplier`, который является базовым классом для работы с поставщиками данных. Он предоставляет общие методы и атрибуты, которые могут быть использованы или переопределены конкретными реализациями поставщиков.

## Содержание
- [Класс `Supplier`](#класс-supplier)
  - [Описание](#описание)
  - [Атрибуты](#атрибуты)
  - [Методы](#методы)
    - [`__init__`](#__init__)
    - [`_payload`](#_payload)
    - [`login`](#login)
    - [`run_scenario_files`](#run_scenario_files)
    - [`run_scenarios`](#run_scenarios)
  - [Пример использования](#пример-использования)
  - [Заключение](#заключение)

## Класс `Supplier`

### Описание
Класс `Supplier` служит основой для реализации различных поставщиков данных. Он предоставляет общие методы и атрибуты для взаимодействия с сайтами поставщиков, загрузки конфигурации, входа на сайт и выполнения сценариев.

### Атрибуты

- `supplier_id` (str): Уникальный идентификатор поставщика.
- `supplier_prefix` (str): Префикс для поставщика, например, `aliexpress` или `amazon`.
- `supplier_settings` (dict): Настройки для поставщика, загруженные из файла конфигурации.
- `locale` (str): Код локализации (например, `en` для английского, `ru` для русского).
- `price_rule` (dict): Правило для расчета цены (например, добавление НДС или скидки).
- `related_modules` (module): Модуль, содержащий специфические для поставщика функции.
- `scenario_files` (List[str]): Список файлов сценариев, которые должны быть выполнены.
- `current_scenario` (str): Текущий сценарий выполнения.
- `login_data` (dict): Данные для входа на сайт поставщика (если требуется).
- `locators` (dict): Локаторы для веб-элементов на страницах сайта поставщика.
- `driver` (WebDriver): Веб-драйвер для взаимодействия с сайтом поставщика.
- `parsing_method` (str): Метод парсинга данных (например, `webdriver`, `api`, `xls`, `csv`).

### Методы

#### `__init__`

**Описание**: Конструктор класса, инициализирующий атрибуты на основе префикса поставщика и других параметров.

**Параметры**:
- `supplier_prefix` (str): Префикс поставщика.
- `locale` (str, optional): Код локализации. По умолчанию `en`.
- `webdriver` (str | Driver | bool, optional): Веб-драйвер. По умолчанию `default`.
- `*attrs`: Дополнительные атрибуты.
- `**kwargs`: Дополнительные именованные аргументы.

**Возвращает**:
- `None`: Метод ничего не возвращает.

**Вызывает исключения**:
- `SupplierConfigError`: Если не удалось загрузить конфигурацию поставщика.

#### `_payload`

**Описание**: Загружает настройки поставщика, конфигурационные файлы и инициализирует веб-драйвер.

**Параметры**:
- `webdriver` (str | Driver | bool): Веб-драйвер.
- `*attrs`: Дополнительные атрибуты.
- `**kwargs`: Дополнительные именованные аргументы.

**Возвращает**:
- `bool`: Возвращает `True` в случае успешной загрузки и инициализации, `False` в случае неудачи.

**Вызывает исключения**:
- `DriverNotFoundError`: Если не удалось инициализировать веб-драйвер.
- `SupplierConfigError`: Если не удалось загрузить конфигурацию поставщика.

#### `login`

**Описание**: Метод для выполнения входа на сайт поставщика (если требуется).

**Параметры**:
- Отсутствуют.

**Возвращает**:
- `bool`: Возвращает `True` в случае успешного входа, `False` в случае неудачи.

**Вызывает исключения**:
- `SupplierLoginError`: Если произошла ошибка при входе на сайт.

#### `run_scenario_files`

**Описание**: Запускает выполнение сценариев из файлов.

**Параметры**:
- `scenario_files` (str | List[str], optional): Путь к файлу сценария или список путей к файлам сценариев. По умолчанию `None`.

**Возвращает**:
- `bool`: Возвращает `True` в случае успешного выполнения сценариев, `False` в случае неудачи.

**Вызывает исключения**:
- `SupplierScenarioError`: Если произошла ошибка при выполнении сценария.

#### `run_scenarios`

**Описание**: Запускает один или несколько сценариев.

**Параметры**:
- `scenarios` (dict | list[dict]): Словарь или список словарей, представляющих сценарии для выполнения.

**Возвращает**:
- `bool`: Возвращает `True` в случае успешного выполнения сценариев, `False` в случае неудачи.

**Вызывает исключения**:
- `SupplierScenarioError`: Если произошла ошибка при выполнении сценария.

### Пример использования

```python
# Создаем объект для поставщика 'aliexpress'
supplier = Supplier(supplier_prefix='aliexpress', locale='en', webdriver='chrome')

# Выполняем вход на сайт поставщика
supplier.login()

# Запускаем сценарии из файлов
supplier.run_scenario_files(['example_scenario.json'])

# Или запускаем сценарии по определенным условиям
supplier.run_scenarios([{'action': 'scrape', 'target': 'product_list'}])
```

### Заключение

Класс `Supplier` является основой для создания более специфичных классов для каждого поставщика данных. Он инкапсулирует общую логику взаимодействия с сайтом, настройку драйвера, управление сценарием и парсинг данных. Конкретные реализации поставщиков будут наследовать этот класс и добавлять свою специфическую логику.