# Руководство для Тестера

## Обзор

Данный документ предназначен для тестеров, которые будут проверять модуль, отвечающий за подготовку материалов для рекламных кампаний на платформе AliExpress. Модуль включает в себя три основных файла: `edit_campaign.py`, `prepare_campaigns.py` и `test_campaign_integration.py`.

## Подробнее

Этот документ предоставляет подробные инструкции по тестированию модуля подготовки материалов для рекламных кампаний на AliExpress. Он описывает основные файлы модуля, их функции и необходимые шаги для проведения тестов. Цель данного руководства — обеспечить качественное тестирование всех компонентов модуля для выявления возможных проблем и ошибок.

## Основные файлы

### `edit_campaign.py`

**Описание**: Этот файл содержит класс `AliCampaignEditor`, который наследует от `AliPromoCampaign`. Основная задача этого класса - управление рекламной кампанией.

**Основные функции**:
- `AliCampaignEditor`: Инициализация и управление кампанией.

### `prepare_campaigns.py`

**Описание**: Этот файл содержит функции для подготовки материалов кампании, включая обновление категорий и обработку кампаний по категориям.

**Основные функции**:
- `update_category`: Обновление категории в JSON файле.
- `process_campaign_category`: Обработка конкретной категории в рамках кампании.
- `process_campaign`: Обработка всей кампании по всем категориям.
- `main`: Асинхронная основная функция для обработки кампании.

### `test_campaign_integration.py`

**Описание**: Этот файл содержит тесты, проверяющие взаимодействие всех компонентов модуля.

**Основные тесты**:
- `test_update_category_success`: Проверка успешного обновления категории.
- `test_update_category_failure`: Проверка обработки ошибки при обновлении категории.
- `test_process_campaign_category_success`: Проверка успешной обработки категории.
- `test_process_campaign_category_failure`: Проверка обработки ошибки при обработке категории.
- `test_process_campaign`: Проверка обработки всех категорий в кампании.
- `test_main`: Проверка основного сценария выполнения кампании.

## Инструкции по тестированию

1.  **Установка зависимостей**:
    - Убедитесь, что все необходимые зависимости установлены. Выполните команду:

    ```sh
    pip install -r requirements.txt
    ```

2.  **Запуск тестов**:
    - Для запуска всех тестов используйте команду:

    ```sh
    pytest test_campaign_integration.py
    ```

3.  **Проверка тестов**:
    - Убедитесь, что все тесты проходят успешно. В выводе команды `pytest` должно быть указано, что все тесты пройдены (`PASSED`).

## Проверка функциональности

### Проверка успешного обновления категории

**Описание**: Тест `test_update_category_success` проверяет, что категория успешно обновляется в JSON файле.

**Действия**: Убедитесь, что функция `update_category` правильно обновляет данные категории и логгирует успешное выполнение.

### Проверка обработки ошибки при обновлении категории

**Описание**: Тест `test_update_category_failure` проверяет обработку ошибки при обновлении категории.

**Действия**: Убедитесь, что при возникновении ошибки функция логгирует сообщение об ошибке и возвращает `False`.

### Проверка успешной обработки категории

**Описание**: Тест `test_process_campaign_category_success` проверяет успешную обработку категории в кампании.

**Действия**: Убедитесь, что функция `process_campaign_category` корректно обрабатывает категорию и возвращает результат без ошибок.

### Проверка обработки ошибки при обработке категории

**Описание**: Тест `test_process_campaign_category_failure` проверяет обработку ошибки при обработке категории.

**Действия**: Убедитесь, что при возникновении ошибки функция логгирует сообщение об ошибке и возвращает `None`.

### Проверка обработки всех категорий в кампании

**Описание**: Тест `test_process_campaign` проверяет обработку всех категорий в кампании.

**Действия**: Убедитесь, что функция `process_campaign` корректно обрабатывает все категории и возвращает результаты обработки каждой категории.

### Проверка основного сценария выполнения кампании

**Описание**: Тест `test_main` проверяет основной сценарий выполнения кампании.

**Действия**: Убедитесь, что функция `main` корректно выполняет все этапы обработки кампании асинхронно и без ошибок.

## Заключение

Убедитесь, что все тесты пройдены и функциональность модуля работает корректно. В случае возникновения проблем или ошибок, сообщите разработчикам для исправления.