# `DriverMeta` Метакласс

## Обзор

Этот код определяет метакласс `DriverMeta` для динамического создания класса `Driver`, который наследуется как от базового класса `Driver`, так и от указанного класса Selenium WebDriver (`Chrome`, `Firefox` или `Edge`). Метакласс отвечает за создание правильной комбинации этих классов.

## Оглавление

1.  [Метакласс `DriverMeta`](#метакласс-drivermeta)
    *   [`__call__` Метод](#__call__-метод)
    *   [Утверждения](#утверждения)
    *   [Динамическое создание класса](#динамическое-создание-класса)
        *   [Конструктор класса `Driver`](#конструктор-класса-driver)
        *   [Метод `driver_payload`](#метод-driver_payload)
    *   [Возвращение динамического класса](#возвращение-динамического-класса)
2.  [Пример использования](#пример-использования)

## Метакласс `DriverMeta`

Метакласс в Python - это класс класса, определяющий, как ведет себя класс. Здесь `DriverMeta` используется для управления созданием нового класса `Driver`.

### `__call__` Метод

Метод `__call__` в метаклассе вызывается при создании экземпляра класса. В этом случае он используется для создания нового класса `Driver`, который наследуется как от базового класса `Driver`, так и от одного из классов Selenium WebDriver (`Chrome`, `Firefox` или `Edge`).

-   `cls`: Класс, создаваемый экземпляр, в данном случае `Driver`.
-   `webdriver_cls`: Класс Selenium WebDriver, от которого нужно наследоваться (`Chrome`, `Firefox` или `Edge`).
-   `*args` и `**kwargs`: Аргументы и ключевые аргументы, которые передаются в конструктор класса `Driver`.

### Утверждения

-   `assert isinstance(webdriver_cls, type)`: Гарантирует, что `webdriver_cls` действительно является классом.
-   `assert issubclass(webdriver_cls, Chrome | Firefox | Edge)`: Гарантирует, что `webdriver_cls` является подклассом одного из разрешенных классов WebDriver (`Chrome`, `Firefox` или `Edge`).

### Динамическое создание класса

Внутри метода `__call__` динамически определяется новый класс с именем `Driver`. Этот новый класс наследуется как от `cls` (базовый класс `Driver`), так и от `webdriver_cls` (указанный класс WebDriver).

#### Конструктор класса `Driver`

-   `__init__`: Конструктор для динамически созданного класса `Driver`.
    -   Регистрирует инициализацию WebDriver с его именем и аргументами.
    -   Вызывает конструкторы родительских классов, используя `super()`.
    -   Вызывает метод `driver_payload`.

#### Метод `driver_payload`

Этот метод определен внутри динамически созданного класса `Driver` и вызывает метод `driver_payload` из родительского класса `Driver`. Это гарантирует, что любая дополнительная инициализация, требуемая классом `Driver`, будет выполнена.

### Возвращение динамического класса

Вновь созданный класс `Driver` создается и возвращается с предоставленными аргументами.

## Пример использования

Когда вы создаете экземпляр класса `Driver` с `DriverMeta` в качестве метакласса и передаете класс WebDriver, он динамически создаст новый класс, который наследуется как от базового класса `Driver`, так и от указанного класса WebDriver.

Например:

```python
# Создание экземпляра Driver с Chrome в качестве класса WebDriver
chrome_driver = Driver(Chrome, *args, **kwargs)

# Создание экземпляра Driver с Firefox в качестве класса WebDriver
firefox_driver = Driver(Firefox, *args, **kwargs)
```

Это позволяет создавать экземпляр класса `Driver`, который имеет все методы и свойства как базового класса `Driver`, так и указанного класса Selenium WebDriver (`Chrome`, `Firefox` или `Edge`), обеспечивая гибкую и динамическую инстанциацию WebDriver с дополнительными пользовательскими функциями.