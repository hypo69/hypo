# Модуль `hypotez/src/ai/openai/model/event_handler.py`

## Обзор

Модуль `event_handler.py` содержит класс `EventHandler`, предназначенный для обработки событий, генерируемых API OpenAI, в частности, для потоковой передачи данных от помощника модели.  Он реализует методы обработки событий, позволяющие получать и отображать текстовую информацию, а также данные вызовов инструментов, включая вызовы кодового интерпретатора.

## Определения

### Класс `EventHandler`

**Описание**:  Этот класс наследуется от `AssistantEventHandler` и переопределяет методы для обработки различных событий в потоке ответов модели OpenAI.

**Методы**:

#### `on_text_created(self, text: Text) -> None`

**Описание**: Обрабатывает событие создания нового текста. Выводит текст в консоль.

**Параметры**:

- `text` (Text): Объект, представляющий новый текст.

**Возвращает**:

- `None`

#### `on_text_delta(self, delta: TextDelta, snapshot: Text)`

**Описание**: Обрабатывает изменение существующего текста.  Выводит изменение в консоль.

**Параметры**:

- `delta` (TextDelta): Объект, описывающий изменение.
- `snapshot` (Text): Текущее состояние текста.


**Возвращает**:

- `None`


#### `on_tool_call_created(self, tool_call: ToolCall)`

**Описание**: Обрабатывает создание вызова инструмента. Выводит тип вызова в консоль.


**Параметры**:

- `tool_call` (ToolCall): Объект, описывающий вызов инструмента.

**Возвращает**:

- `None`


#### `on_tool_call_delta(self, delta: ToolCallDelta, snapshot: ToolCall)`

**Описание**: Обрабатывает изменения в вызове инструмента. Выводит входные данные и логи кодового интерпретатора в консоль, если применимо.


**Параметры**:

- `delta` (ToolCallDelta): Объект, описывающий изменения в вызове.
- `snapshot` (ToolCall): Текущее состояние вызова инструмента.

**Возвращает**:

- `None`


**Обрабатываемые исключения**:

- Нет явных обработок исключений.


## Постоянные значения

### `MODE`

**Описание**: Строковая переменная, хранящая значение режима работы (`'dev'`).


## Модульные импорты

- `typing_extensions`
- `openai`
- `openai.types.beta.threads`
- `openai.types.beta.threads.runs`

## Замечания

- Используется аннотация типов для явного указания типов параметров и возвращаемых значений.
- Класс `EventHandler` обрабатывает различные события API OpenAI, позволяя собирать и отображать информацию в потоковом режиме.
- При обработке `on_tool_call_delta` выводится информация о вводе и выводе кодового интерпретатора.
- Код предполагает работу с библиотекой `openai` и соответствующими типами данных.


## Ссылки

- [Документация OpenAI](https://github.com/openai/openai-python/blob/main/helpers.md#assistant-events)