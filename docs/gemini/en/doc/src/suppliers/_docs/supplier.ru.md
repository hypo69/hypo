# Класс Supplier

## Обзор

Данный документ описывает класс `Supplier`, который является базовым классом для работы с поставщиками данных. Он предоставляет общую инфраструктуру для взаимодействия с различными источниками данных, такими как Amazon, AliExpress, Walmart и др.  Класс отвечает за инициализацию, вход на сайт, выполнение сценариев и загрузку данных.


## Таблица содержания

* [Классы](#классы)
* [Функции](#функции)
    * [`__init__`](#__init__)
    * [`_payload`](#_payload)
    * [`login`](#login)
    * [`run_scenario_files`](#run_scenario_files)
    * [`run_scenarios`](#run_scenarios)


## Классы

### `Supplier`

**Описание**: Базовый класс для работы с поставщиками данных. Предоставляет общие методы и атрибуты для взаимодействия с различными источниками данных.

**Атрибуты**:

* `supplier_id`: Уникальный идентификатор поставщика.
* `supplier_prefix`: Префикс для поставщика (например, `aliexpress`, `amazon`).
* `supplier_settings`: Настройки для поставщика, загруженные из файла конфигурации.
* `locale`: Код локализации (например, `en`, `ru`).
* `price_rule`: Правило для расчета цены (например, добавление НДС или скидки).
* `related_modules`: Модуль, содержащий специфические для поставщика функции.
* `scenario_files`: Список файлов сценариев, которые должны быть выполнены.
* `current_scenario`: Текущий сценарий выполнения.
* `login_data`: Данные для входа на сайт поставщика (если требуется).
* `locators`: Локаторы для веб-элементов на страницах сайта поставщика.
* `driver`: Веб-драйвер для взаимодействия с сайтом поставщика.
* `parsing_method`: Метод парсинга данных (например, `webdriver`, `api`, `xls`, `csv`).


**Методы**:

* [`__init__`](#__init__): Конструктор класса.
* [`_payload`](#_payload): Загружает настройки поставщика, конфигурационные файлы и инициализирует веб-драйвер.
* [`login`](#login): Метод для выполнения входа на сайт поставщика.
* [`run_scenario_files`](#run_scenario_files): Запускает выполнение сценариев из файлов.
* [`run_scenarios`](#run_scenarios): Запускает один или несколько сценариев.


## Функции

### `__init__`

**Описание**: Конструктор класса `Supplier`. Инициализирует атрибуты класса, используя предоставленные параметры.

**Параметры**:

* `supplier_prefix` (str): Префикс для поставщика.
* `locale` (str, optional): Код локализации. По умолчанию 'en'.
* `webdriver` (str | Driver | bool, optional): Тип веб-драйвера. По умолчанию 'default'.
* `*attrs`, `**kwargs`: Дополнительные аргументы и ключевые аргументы.

**Возвращаемое значение**:  None


### `_payload`

**Описание**: Загружает настройки поставщика, конфигурационные файлы и инициализирует веб-драйвер.

**Параметры**:

* `webdriver` (str | Driver | bool): Тип веб-драйвера.

**Возвращаемое значение**: bool. Возвращает `True`, если загрузка и инициализация успешны, иначе `False`.

**Возможные исключения**:
* `FileNotFoundError`: Если файл настроек не найден.
* Другие исключения:  В случае проблем с загрузкой данных или инициализацией драйвера.


### `login`

**Описание**: Выполняет вход на сайт поставщика.

**Возвращаемое значение**: bool. Возвращает `True`, если вход успешен, иначе `False`.


**Возможные исключения**:
* `Exception`: В случае проблем с входом на сайт.


### `run_scenario_files`

**Описание**: Запускает сценарии из указанных файлов.

**Параметры**:

* `scenario_files` (str | List[str], optional): Список файлов сценариев или путь к файлу сценария.

**Возвращаемое значение**: bool. Возвращает `True`, если выполнение сценариев прошло успешно, иначе `False`.


**Возможные исключения**:
* `Exception`: В случае проблем с выполнением сценариев.


### `run_scenarios`

**Описание**: Запускает заданные сценарии.

**Параметры**:

* `scenarios` (dict | list[dict]): Список или словарь сценариев.

**Возвращаемое значение**: bool. Возвращает `True`, если выполнение сценариев прошло успешно, иначе `False`.


**Возможные исключения**:
* `Exception`: В случае проблем с выполнением сценариев.


## Пример использования

```python
# Пример использования класса Supplier
supplier = Supplier(supplier_prefix='aliexpress', locale='ru', webdriver='chrome')
success = supplier._payload(webdriver='chrome')
if success:
    supplier.login()
    supplier.run_scenario_files(['scenario1.json', 'scenario2.json'])
    supplier.run_scenarios([{'action': 'scrape', 'target': 'product_list'}])
```