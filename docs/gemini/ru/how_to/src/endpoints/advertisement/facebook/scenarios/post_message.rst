Как использовать функцию post_message
========================================================================================

Описание
-------------------------
Функция `post_message` отвечает за публикацию сообщения в Facebook с заголовком, описанием и медиафайлами. Она вызывает функции `post_title`, `upload_media` и `publish` для выполнения необходимых действий.  Функция принимает объект `Driver` для взаимодействия с веб-страницей, объект `SimpleNamespace` `message` содержащий заголовок, описание и список продуктов с медиафайлами, опциональные параметры `no_video` и `without_captions`.

Шаги выполнения
-------------------------
1. **Проверка наличия заголовка и описания:** Функция `post_title` получает объект `message` и добавляет заголовок и описание в поле для сообщения.  Если `post_title` возвращает `False`, то выполнение прекращается и функция возвращает `False`.

2. **Загрузка медиафайлов:** Функция `upload_media` получает список продуктов (`message.products`) и загружает медиафайлы (изображения или видео) в форму. Если `upload_media` возвращает `False`, то выполнение прекращается и функция возвращает `False`.  Этот шаг может быть пропущен, если задан параметр `without_captions=True`.

3. **Нажатие кнопки "Отправить":** Проверяется наличие кнопки "Отправить" (locator = locator.send). Если кнопка найдена, функция возвращает True.

4. **Нажатие кнопки "Завершить редактирование":** Если кнопка "Отправить" не найдена, функция ищет и нажимает кнопку "Завершить редактирование" (locator = locator.finish_editing_button). Если кнопка не найдена, функция возвращает `False`.

5. **Публикация сообщения:** Функция `publish` публикует сообщение. Если процесс публикации не завершается успешно, функция `publish` предпринимает попытки (до 5 раз), ожидая освобождения поля ввода и выполняет повторные попытки публикации. Если все попытки заканчиваются неудачей, функция возвращает `False`.

Пример использования
-------------------------
.. code-block:: python

    from src.webdriver import Driver
    from pathlib import Path
    from types import SimpleNamespace

    # ... (Импорт других необходимых модулей) ...

    # Создаем экземпляр драйвера
    driver = Driver(...)

    # Создаем объект SimpleNamespace для данных сообщения
    message = SimpleNamespace(
        title="Новое сообщение",
        description="Описание сообщения",
        products=[
            SimpleNamespace(local_saved_image=str(Path("./image1.jpg"))),
            SimpleNamespace(local_saved_image=str(Path("./image2.png")))
        ]
    )


    # Вызываем функцию post_message
    result = post_message(driver, message)

    # Обработка результата
    if result:
        print("Сообщение опубликовано успешно!")
    else:
        print("Ошибка публикации сообщения.")