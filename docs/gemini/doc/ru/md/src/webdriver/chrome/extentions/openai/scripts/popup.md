# Документация для popup.js

## Обзор

Файл `popup.js` содержит JavaScript-код, реализующий интерфейс для взаимодействия с API, предоставляющим доступ к моделям обработки естественного языка.  Код использует AngularJS для управления интерфейсом и `$http` для асинхронных запросов к серверу.

## Оглавление

* [Функции](#функции)
* [Контроллер MainController](#контроллер-maincontroller)

## Функции

### `loadAssistants`

**Описание**: Функция загружает список доступных ассистентов из внешнего источника (например, сервера).

**Параметры**:
Нет.

**Возвращает**:
Нет.  Обновляет `$scope.assistants` в AngularJS.


**Вызывает исключения**:
- Любые ошибки, возникающие при выполнении запроса `$http.get`.


### `sendMessage`

**Описание**: Функция отправляет запрос к API с текстом сообщения и идентификатором выбранного ассистента.

**Параметры**:
- Нет. Использует данные из `$scope.message`, `$scope.selectedAssistant`.


**Возвращает**:
- Нет. Обновляет `$scope.response` в AngularJS с ответом API.


**Вызывает исключения**:
- Любые ошибки, возникающие при выполнении запроса `$http.post`.


## Контроллер MainController

**Описание**: Контроллер `MainController` управляет логикой интерфейса, включая загрузку данных, отправку запросов и обработку ответов.


**Функции:**

- `loadAssistants()`: Загружает список ассистентов.  См. описание функции выше.
- `sendMessage()`: Отправляет сообщение модели. См. описание функции выше.


##  Использование

Для взаимодействия с сервером, необходимо настроить сервер, который отвечает на запросы по адресам:

- `http://localhost:8000/assistants` (Получение списка ассистентов)
- `http://localhost:8000/ask` (Отправка запроса модели обработки естественного языка)

Сервер должен быть готов обрабатывать POST-запросы на `/ask` с данными в формате:

```json
{
  "message": "Текст сообщения",
  "system_instruction": "Система инструкция",
  "assistant_id": "id ассистента"
}
```

Ответ от сервера должен быть в формате:

```json
{
  "response": "Ответ модели"
}
```

Обратите внимание на важность добавления `assistant_id` в запросы к API. Это необходимо для корректной работы с различными ассистентами.