# Модуль `post_event.py`

## Обзор

Модуль `post_event.py` предназначен для автоматизации процесса публикации информации о мероприятиях на платформе Facebook. Он выполняет чтение данных о мероприятиях из JSON-файлов, расположенных в Google Drive, и последующую их публикацию в указанные группы Facebook. Модуль использует Selenium для автоматизации действий в браузере, включая навигацию по страницам и отправку данных.

## Подробней

Этот модуль является частью системы, автоматизирующей рекламные кампании в Facebook. Он предназначен для упрощения и ускорения процесса публикации информации о мероприятиях, что позволяет более эффективно достигать целевой аудитории. Модуль интегрирован с Google Drive для хранения данных о мероприятиях и использует JSON формат для их представления.

## Функции

### `post_events`

```python
def post_events():
    """Обрабатывает и отправляет мероприятия на Facebook.

    Функция получает данные о мероприятиях из указанной директории, загружает детали мероприятий из JSON-файлов
    и отправляет их на Facebook. Мероприятия хранятся в структуре директорий под папкой `facebook/events`.

    Raises:
        FileNotFoundError: Если JSON-файл с информацией о мероприятии отсутствует.
    """
    ...
```

**Как работает функция**:

Функция `post_events` выполняет следующие действия:

1.  Инициализирует драйвер браузера Chrome с использованием класса `Driver`.
2.  Получает список директорий с мероприятиями из Google Drive, используя функцию `get_directory_names` и путь `gs.path.google_drive / 'aliexpress' / 'events'`.
3.  Получает список файлов с информацией о группах Facebook, используя функцию `get_filenames` и путь `gs.path.google_drive / 'facebook' / 'groups'`.
4.  Создает экземпляр класса `FacebookPromoter`, передавая ему драйвер браузера и список файлов групп.
5.  Для каждой директории с мероприятием загружает данные о мероприятии из JSON-файла с использованием функции `j_loads_ns` и пути `gs.path.google_drive / 'aliexpress' / 'events' / event_file / f'{event_file}.json'`.
6.  Передает данные о мероприятии в функцию `promoter.process_groups` для публикации в группах Facebook.

### `post_to_my_group`

```python
def post_to_my_group(event):
    """"""
    ...
```

**Как работает функция**:

Функция `post_to_my_group` выполняет следующие действия:

1. Загружает информацию о группах из JSON файла `my_managed_groups.json` с использованием `j_loads_ns`.
2. Инициализирует драйвер Chrome с использованием класса `Driver`.
3. Перебирает группы из загруженного JSON.
4. Для каждой группы формирует URL события с использованием `get_event_url` и открывает его в браузере с помощью `d.get_url`.
5. Вызывает функцию `post_event` для публикации события в текущей группе.

**Параметры**:

*   `event` (dict): Словарь, содержащий информацию о мероприятии для публикации.

## Переменные

В модуле используются следующие переменные:

*   `gs.path.google_drive`: Базовый путь к Google Drive. Используется для формирования путей к файлам и директориям с данными о мероприятиях и группах Facebook.
*   `event_file`: Название файла с данными о мероприятии.
*   `event`: Данные о мероприятии, загруженные из JSON-файла.
*   `events_dirs`: Список директорий, содержащих данные о мероприятиях.
*    `group_file_paths` (list): Список файлов, содержащих информацию о группах Facebook.
*    `promoter`: Инстанс класса `FacebookPromoter`, используемый для публикации мероприятий в группах Facebook.
*   `groups_ns`: Данные о группах, загруженные из JSON-файла.
*    `d`: Инстанс класса `Driver`, используемый для управления браузером Chrome.
*    `group_url`: URL группы Facebook.
*    `group`: Информация о группе Facebook.