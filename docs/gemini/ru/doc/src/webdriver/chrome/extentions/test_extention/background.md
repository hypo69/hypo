# Модуль `background.js`

## Обзор

Этот файл JavaScript отвечает за обработку сообщений от других частей расширения, в частности от скриптов контента, и за отправку данных на сервер. Он слушает события `chrome.browserAction.onClicked`, обрабатывает запросы `'collectData'` и использует `chrome.storage` для получения собранных данных, а затем отправляет их на указанный сервер.


## Функции

### `sendDataToServer`

**Описание**: Функция отправляет собранные данные на сервер.

**Параметры**:

- `url` (str): URL страницы, для которой собираются данные.

**Возвращает**:
  -  Не имеет возвращаемого значения.

**Вызывает исключения**:
- `Error`: Возникает при ошибке отправки данных на сервер.


### `chrome.runtime.onMessage.addListener`

**Описание**: Функция устанавливает обработчик сообщений от других частей расширения.

**Параметры**:

- `(message, sender, sendResponse) => { ... }`:  Функция-обработчик.
    - `message` (object): Сообщение, полученное от отправителя.
    - `sender` (object): Информация об отправителе сообщения (ID, тип отправителя).
    - `sendResponse` (function): Функция для отправки ответа отправителю (не используется в данном случае).

**Возвращает**:
 - `true`:  Необходимо для асинхронной обработки сообщений.

**Вызывает исключения**:
 - Нет.


## События

### `chrome.browserAction.onClicked`

**Описание**: Событие срабатывает при клике на иконку расширения.
**Действия**: Отправляет сообщение `'collectData'` в активную вкладку с текущим URL.

##  Использование `chrome.storage`


**Описание**: Используется для хранения и извлечения собранных данных из хранилища расширения.


##  Структура обработки запроса `collectData`

**Описание**: При получении сообщения `collectData` запускается функция `sendDataToServer`, которая, используя данные из хранилища, отправляет их на указанный сервер.


## Обработка ошибок

**Описание**: В случае ошибок при отправке данных на сервер выводится сообщение об ошибке в консоль.


##  Совместимость с сервером

**Описание**:  Обратите внимание на адрес сервера (`serverUrl`).  Его необходимо изменить на действительный адрес вашего сервера.