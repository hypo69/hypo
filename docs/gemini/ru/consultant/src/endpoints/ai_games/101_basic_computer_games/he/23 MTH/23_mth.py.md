# Анализ кода модуля 23_mth

**Качество кода**
7
- Плюсы
    - Код выполняет поставленную задачу, предоставляя базовую игру "математика".
    - Присутствуют комментарии, объясняющие логику работы кода на иврите.
    - Использование `random` для выбора чисел и операций.
    - Наличие блока try-except для обработки нечислового ввода.
- Минусы
    - Код не соответствует PEP8 (отсутствуют docstrings, не используются константы для операций, комментарии не в формате RST).
    - Не используется логирование.
    - Код на иврите, что затрудняет его понимание для не говорящих на иврите разработчиков.
    - Использование `while True` может быть небезопасным и нечитабельным, лучше использовать более явные условия.
    - Отсутствует проверка на выход за границы диапазона при вычитании (может получиться отрицательный результат).

**Рекомендации по улучшению**
1.  **Форматирование кода**:
    -   Привести код в соответствие с PEP8.
    -   Добавить docstring к модулю и функциям в формате reStructuredText (RST).
2.  **Логирование**:
    -   Использовать `logger.error` вместо `print` для вывода ошибок.
    -   Использовать `logger.debug` для отладочной информации.
3.  **Обработка ошибок**:
    -   Улучшить обработку ошибок ввода, предоставляя более информативные сообщения.
    -   Проверка на корректность ввода, например, если введено не число.
4.  **Улучшение читаемости**:
    -   Вынести операции в константы для лучшей читаемости.
    -   Заменить `while True` на более явное условие завершения цикла.
    -   Добавить проверку на отрицательный результат вычитания.
5.  **Унификация**:
    -   Использовать английский язык для комментариев и переменных.
6.  **Документация**:
    -  Добавить подробную документацию к каждой функции, переменной и модулю в формате RST.
7.  **Оптимизация**:
    -  Рассмотреть возможность использования словаря для операций, чтобы избежать длинных конструкций `if-elif-else`.

**Оптимизированный код**
```python
"""
Модуль для игры в простую арифметику.
======================================

Этот модуль реализует игру, в которой компьютер задает
случайные арифметические задачи (сложение, вычитание, умножение),
игрок должен ввести правильный ответ. Игра продолжается до тех пор,
пока игрок не даст неверный ответ.

Пример использования
--------------------

.. code-block:: python

    python 23_mth.py
"""
import random
from src.logger.logger import logger

#: Список возможных арифметических операций.
OPERATIONS = ['+', '-', '*']


def calculate_answer(operand1: int, operand2: int, operator: str) -> int:
    """
    Вычисляет правильный ответ для заданного выражения.

    :param operand1: Первый операнд.
    :param operand2: Второй операнд.
    :param operator: Арифметическая операция ('+', '-', '*').
    :return: Результат вычисления.
    :raises ValueError: Если передан недопустимый оператор.
    """
    if operator == '+':
        return operand1 + operand2
    if operator == '-':
        return operand1 - operand2
    if operator == '*':
        return operand1 * operand2
    logger.error(f'Недопустимая операция {operator=}')
    raise ValueError(f'Invalid operation: {operator}')


def generate_question() -> tuple[int, int, str]:
    """
    Генерирует случайное арифметическое выражение.

    :return: Кортеж (operand1, operand2, operator).
    """
    operand1 = random.randint(1, 10)
    operand2 = random.randint(1, 10)
    operator = random.choice(OPERATIONS)
    return operand1, operand2, operator


def get_user_answer() -> int | None:
    """
    Запрашивает ответ у пользователя.

    :return: Введенный пользователем ответ в виде целого числа или None при ошибке ввода.
    """
    try:
        user_answer = input("Enter your answer: ")
        return int(user_answer)
    except ValueError:
        logger.error(f'Неправильный ввод {user_answer=}. Введите целое число')
        return None


def main():
    """
    Основная функция, реализующая игровой цикл.
    """
    correct_answers = 0
    game_over = False
    while not game_over:
        # Код генерирует случайное арифметическое выражение.
        operand1, operand2, operator = generate_question()
        question = f"{operand1} {operator} {operand2} = ?"
        print(question)

        # Код получает ответ от пользователя.
        user_answer = get_user_answer()
        if user_answer is None:
            break

        # Код вычисляет правильный ответ.
        try:
            correct_answer = calculate_answer(operand1, operand2, operator)
        except ValueError:
           logger.error(f'Ошибка вычисления, проверьте оператор {operator}')
           break

        # Код проверяет правильность ответа.
        if user_answer == correct_answer:
            correct_answers += 1
        else:
            game_over = True # Код завершает игру если ответ неверный.

    # Код выводит количество правильных ответов.
    print(f"YOU GOT {correct_answers} RIGHT")

if __name__ == '__main__':
    # Код запускает основную функцию игры.
    main()