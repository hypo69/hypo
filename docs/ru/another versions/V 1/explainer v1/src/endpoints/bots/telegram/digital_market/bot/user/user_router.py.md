## <–∞–ª–≥–æ—Ä–∏—Ç–º>

1.  **`@user_router.message(CommandStart())` - `cmd_start`**:
    *   **–ù–∞—á–∞–ª–æ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É `/start`.
    *   **–ü–æ–ª—É—á–µ–Ω–∏–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**: –ò–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è `user_id` –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è.
    *   **–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î**: –§—É–Ω–∫—Ü–∏—è `UserDAO.find_one_or_none` –∏—â–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î –ø–æ `telegram_id`.
        *   **–ü—Ä–∏–º–µ—Ä**: –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å `telegram_id=12345` –Ω–∞–π–¥–µ–Ω, –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è.
    *   **–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω**:
        *   –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –º–µ–Ω—é (`main_user_kb`).
        *   **–ü—Ä–∏–º–µ—Ä**:  "üëã –ü—Ä–∏–≤–µ—Ç, John Doe! –í—ã–±–µ—Ä–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ".
    *   **–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω**:
        *   –°–æ–∑–¥–∞–µ—Ç—Å—è `UserModel` —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`telegram_id`, `username`, `first_name`, `last_name`).
        *   **–ü—Ä–∏–º–µ—Ä**: `UserModel(telegram_id=12345, username='john_doe', first_name='John', last_name='Doe')`
        *   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –ë–î —á–µ—Ä–µ–∑ `UserDAO.add`.
        *   –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å –º–µ–Ω—é.
        *   **–ü—Ä–∏–º–µ—Ä**: "üéâ **–ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é!**. –¢–µ–ø–µ—Ä—å –≤—ã–±–µ—Ä–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ."
    *   **–ö–æ–Ω–µ—Ü**: –§—É–Ω–∫—Ü–∏—è –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É.

2.  **`@user_router.callback_query(F.data == "home")` - `page_home`**:
    *   **–ù–∞—á–∞–ª–æ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ –∫–Ω–æ–ø–∫—É —Å `callback_data="home"`.
    *   –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞" (–Ω–µ–≤–∏–¥–∏–º–æ–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).
    *   –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≥–ª–∞–≤–Ω—ã–º –º–µ–Ω—é (`main_user_kb`).
    *   **–ü—Ä–∏–º–µ—Ä**: "üëã –ü—Ä–∏–≤–µ—Ç, John Doe! –í—ã–±–µ—Ä–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ"
    *   **–ö–æ–Ω–µ—Ü**: –§—É–Ω–∫—Ü–∏—è –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É.

3.  **`@user_router.callback_query(F.data == "about")` - `page_about`**:
    *   **–ù–∞—á–∞–ª–æ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ –∫–Ω–æ–ø–∫—É —Å `callback_data="about"`.
    *   –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–û –º–∞–≥–∞–∑–∏–Ω–µ".
    *   –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –º–∞–≥–∞–∑–∏–Ω–µ –∏ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –æ–ø–ª–∞—Ç—ã.
    *   **–ö–æ–Ω–µ—Ü**: –§—É–Ω–∫—Ü–∏—è –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É.

4.  **`@user_router.callback_query(F.data == "my_profile")` - `page_about`**:
    *   **–ù–∞—á–∞–ª–æ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ –∫–Ω–æ–ø–∫—É —Å `callback_data="my_profile"`.
    *   –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–ü—Ä–æ—Ñ–∏–ª—å".
    *   –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–∫—É–ø–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ `UserDAO.get_purchase_statistics`.
        *   **–ü—Ä–∏–º–µ—Ä**: `purchases = {"total_amount": 1500, "total_purchases": 3}`
    *   **–ï—Å–ª–∏ –ø–æ–∫—É–ø–æ–∫ –Ω–µ—Ç**:
        *   –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ–∫—É–ø–æ–∫" —Å –≥–ª–∞–≤–Ω—ã–º –º–µ–Ω—é (`main_user_kb`).
    *   **–ï—Å–ª–∏ –ø–æ–∫—É–ø–∫–∏ –µ—Å—Ç—å**:
        *   –§–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ–∫—É–ø–æ–∫ –∏ –æ–±—â–µ–π —Å—É–º–º–æ–π.
        *   **–ü—Ä–∏–º–µ—Ä**: "üõç **–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å:**\n\n–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫—É–ø–æ–∫: **3**\n–û–±—â–∞—è —Å—É–º–º–∞: **1500‚ÇΩ**\n\n–•–æ—Ç–∏—Ç–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª–∏ –≤–∞—à–∏—Ö –ø–æ–∫—É–ø–æ–∫?"
        *   –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ç–µ–∫—Å—Ç–æ–º –∏ –∫–Ω–æ–ø–∫–æ–π –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π –ø–æ–∫—É–ø–æ–∫ (`purchases_kb`).
    *   **–ö–æ–Ω–µ—Ü**: –§—É–Ω–∫—Ü–∏—è –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É.

5.  **`@user_router.callback_query(F.data == "purchases")` - `page_user_purchases`**:
    *   **–ù–∞—á–∞–ª–æ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ –∫–Ω–æ–ø–∫—É —Å `callback_data="purchases"`.
    *    –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–ú–æ–∏ –ø–æ–∫—É–ø–∫–∏".
    *   –ü—ã—Ç–∞–µ—Ç—Å—è —É–¥–∞–ª–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ. (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    *   –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–∫—É–ø–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ `UserDAO.get_purchased_products`.
        *   **–ü—Ä–∏–º–µ—Ä**: –°–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ–∫—É–ø–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–æ–≤–∞—Ä–µ.
    *   **–ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫ –ø—É—Å—Ç**:
        *   –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ–∫—É–ø–æ–∫" —Å –≥–ª–∞–≤–Ω—ã–º –º–µ–Ω—é (`main_user_kb`).
    *   **–ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫ –Ω–µ –ø—É—Å—Ç**:
        *   –î–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∫—É–ø–∫–∏ –∏–∑ —Å–ø–∏—Å–∫–∞:
            *   –§–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–æ–≤–∞—Ä–µ, –≤–∫–ª—é—á–∞—è –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ü–µ–Ω—É –∏ —Å–∫—Ä—ã—Ç–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ.
            *   –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, –µ—Å—Ç—å –ª–∏ —Ñ–∞–π–ª —É –ø—Ä–æ–¥—É–∫—Ç–∞ (`product.file_id`).
                *   **–ï—Å–ª–∏ —Ñ–∞–π–ª –µ—Å—Ç—å**:
                    *   –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –¥–æ–∫—É–º–µ–Ω—Ç —Å —Ç–µ–∫—Å—Ç–æ–º –≤ `caption`.
                    *   **–ü—Ä–∏–º–µ—Ä**: –û—Ç–ø—Ä–∞–≤–∫–∞ pdf —Ñ–∞–π–ª–∞ —Å `caption` "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ"
                *   **–ï—Å–ª–∏ —Ñ–∞–π–ª–∞ –Ω–µ—Ç**:
                    *   –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Å —Ç–µ–∫—Å—Ç–æ–º.
        *   –í –∫–æ–Ω—Ü–µ, –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤—Å–µ—Ö –ø–æ–∫—É–ø–∫–∞—Ö, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "–°–ø–∞—Å–∏–±–æ –∑–∞ –¥–æ–≤–µ—Ä–∏–µ!" —Å –≥–ª–∞–≤–Ω—ã–º –º–µ–Ω—é.
    *   **–ö–æ–Ω–µ—Ü**: –§—É–Ω–∫—Ü–∏—è –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É.

## <mermaid>

```mermaid
flowchart TD
    Start[–ù–∞—á–∞–ª–æ] --> CommandStartHandler{–ö–æ–º–∞–Ω–¥–∞ /start?};
    
    CommandStartHandler -- –î–∞ --> GetUserInfoFromDB{–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î –ø–æ telegram_id}
    CommandStartHandler -- –ù–µ—Ç --> CallbackQueryHandler;

    GetUserInfoFromDB -- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω --> SendWelcomeMessage1{–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –º–µ–Ω—é}
    GetUserInfoFromDB -- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω --> CreateUserModel{–°–æ–∑–¥–∞–Ω–∏–µ UserModel}
    
    CreateUserModel --> AddUserToDB{–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î}
    AddUserToDB --> SendWelcomeMessage2{–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –º–µ–Ω—é}
    SendWelcomeMessage1 --> End[–ö–æ–Ω–µ—Ü];
    SendWelcomeMessage2 --> End;

    CallbackQueryHandler --> CheckCallbackData{–ü—Ä–æ–≤–µ—Ä–∫–∞ callback_data}
    
    CheckCallbackData -- data == "home" --> pageHome{–û–±—Ä–∞–±–æ—Ç—á–∏–∫ "home"}
    CheckCallbackData -- data == "about" --> pageAbout{–û–±—Ä–∞–±–æ—Ç—á–∏–∫ "about"}
    CheckCallbackData -- data == "my_profile" --> pageMyProfile{–û–±—Ä–∞–±–æ—Ç—á–∏–∫ "my_profile"}
    CheckCallbackData -- data == "purchases" --> pagePurchases{–û–±—Ä–∞–±–æ—Ç—á–∏–∫ "purchases"}
    CheckCallbackData -- –î—Ä—É–≥–æ–µ --> End
    
    pageHome --> SendHomeMessage{–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≥–ª–∞–≤–Ω—ã–º –º–µ–Ω—é}
    pageHome --> End
    
    pageAbout --> SendAboutMessage{–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –º–∞–≥–∞–∑–∏–Ω–µ}
    pageAbout --> End
    
    pageMyProfile --> GetPurchaseStatistics{–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–∫—É–ø–æ–∫}
    GetPurchaseStatistics -- –ù–µ—Ç –ø–æ–∫—É–ø–æ–∫ --> SendNoPurchasesMessage{–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–æ–∫—É–ø–æ–∫}
    GetPurchaseStatistics -- –ï—Å—Ç—å –ø–æ–∫—É–ø–∫–∏ --> SendProfileMessage{–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø—Ä–æ—Ñ–∏–ª–µ–º –∏ –∫–Ω–æ–ø–∫–æ–π "–ú–æ–∏ –ø–æ–∫—É–ø–∫–∏"}
    SendNoPurchasesMessage --> End;
    SendProfileMessage --> End;
    
    pagePurchases --> GetUserPurchases{–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è}
    GetUserPurchases -- –ù–µ—Ç –ø–æ–∫—É–ø–æ–∫ --> SendNoPurchasesMessage2{–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–æ–∫—É–ø–æ–∫}
    GetUserPurchases -- –ï—Å—Ç—å –ø–æ–∫—É–ø–∫–∏ --> LoopPurchases{–¶–∏–∫–ª –ø–æ —Å–ø–∏—Å–∫—É –ø–æ–∫—É–ø–æ–∫}
    SendNoPurchasesMessage2 --> End;
        
    LoopPurchases --> CreateProductMessage{–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–æ–¥—É–∫—Ç–µ}
    CreateProductMessage --> CheckFile{–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ñ–∞–π–ª–∞ —É –ø—Ä–æ–¥—É–∫—Ç–∞}

    CheckFile -- –ï—Å—Ç—å —Ñ–∞–π–ª --> SendDocument{–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–∞–π–ª —Å —Ç–µ–∫—Å—Ç–æ–º}
    CheckFile -- –ù–µ—Ç —Ñ–∞–π–ª–∞ --> SendText{–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç}
    
    SendDocument --> LoopPurchases
    SendText --> LoopPurchases

    LoopPurchases --> CheckEndLoop{–ö–æ–Ω–µ—Ü —Ü–∏–∫–ª–∞ –ø–æ–∫—É–ø–æ–∫?}
    CheckEndLoop -- –î–∞ --> SendThankYouMessage{–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ "–°–ø–∞—Å–∏–±–æ –∑–∞ –¥–æ–≤–µ—Ä–∏–µ!"}
    CheckEndLoop -- –ù–µ—Ç --> LoopPurchases

    SendThankYouMessage --> End
```

### **–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º—ã `mermaid`:**

*   `aiogram`:
    *   `Router`: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–æ—É—Ç–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–≤—è–∑—ã–≤–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ callback –∑–∞–ø—Ä–æ—Å—ã —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏.
    *   `F`: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ callback –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Ö –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, `F.data == "home"`).
    *   `CommandStart`: –§–∏–ª—å—Ç—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥—ã `/start`.
    *   `Message`: –¢–∏–ø –æ–±—ä–µ–∫—Ç–∞, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–µ–≥–æ –≤—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    *   `CallbackQuery`: –¢–∏–ø –æ–±—ä–µ–∫—Ç–∞, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–µ–≥–æ –≤—Ö–æ–¥—è—â–∏–π callback –∑–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
*   `sqlalchemy.ext.asyncio`:
    *   `AsyncSession`: –¢–∏–ø —Å–µ—Å—Å–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
*   `bot.dao.dao`:
    *   `UserDAO`: –ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, –ø–æ–∏—Å–∫, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ —Ç.–¥.).
*   `bot.user.kbs`:
    *   `main_user_kb`: –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥–ª–∞–≤–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    *   `purchases_kb`: –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ–∫—É–ø–æ–∫.
*   `bot.user.schemas`:
    *   `TelegramIDModel`: Pydantic –º–æ–¥–µ–ª—å –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ telegram id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    *   `UserModel`: Pydantic –º–æ–¥–µ–ª—å –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## <–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ>

### **–ò–º–ø–æ—Ä—Ç—ã:**

*   `from aiogram import Router, F`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∫–ª–∞—Å—Å `Router` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–æ—É—Ç–µ—Ä–∞, `F` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ callback-–∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ –¥–∞–Ω–Ω—ã–º.
*   `from aiogram.filters import CommandStart`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä `CommandStart` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥—ã `/start`.
*   `from aiogram.types import Message, CallbackQuery`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è —Ç–∏–ø—ã `Message` –∏ `CallbackQuery` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏ callback-–∑–∞–ø—Ä–æ—Å–∞–º–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
*   `from sqlalchemy.ext.asyncio import AsyncSession`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è `AsyncSession` –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.
*   `from bot.dao.dao import UserDAO`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∫–ª–∞—Å—Å `UserDAO`, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –≠—Ç–æ **—Ü–µ–ø–æ—á–∫–∞ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–µ–π —Å –º–æ–¥—É–ª–µ–º `src/bot/dao/dao.py`**.
*   `from bot.user.kbs import main_user_kb, purchases_kb`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `main_user_kb` –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é, `purchases_kb` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–∫—É–ø–æ–∫. –≠—Ç–æ **—Ü–µ–ø–æ—á–∫–∞ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–µ–π —Å –º–æ–¥—É–ª–µ–º `src/bot/user/kbs.py`**.
*   `from bot.user.schemas import TelegramIDModel, UserModel`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è Pydantic –º–æ–¥–µ–ª–∏ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö: `TelegramIDModel` –¥–ª—è telegram_id, `UserModel` –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ. –≠—Ç–æ **—Ü–µ–ø–æ—á–∫–∞ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–µ–π —Å –º–æ–¥—É–ª–µ–º `src/bot/user/schemas.py`**.

### **–ö–ª–∞—Å—Å—ã:**

*   `Router`: –≠–∫–∑–µ–º–ø–ª—è—Ä `user_router` –∫–ª–∞—Å—Å–∞ `Router` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ –ø—Ä–∏–≤—è–∑–∫–∏ –∏—Ö –∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º.

### **–§—É–Ω–∫—Ü–∏–∏:**

*   `cmd_start(message: Message, session_with_commit: AsyncSession)`:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**:
        *   `message`: –û–±—ä–µ–∫—Ç `Message` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤—Ö–æ–¥—è—â–µ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
        *   `session_with_commit`: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Å–µ—Å—Å–∏—è SQLAlchemy –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∫–æ–º–º–∏—Ç–∞.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É `/start`. –ù–∞—Ö–æ–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äì –¥–æ–±–∞–≤–ª—è–µ—Ç. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≥–ª–∞–≤–Ω—ã–º –º–µ–Ω—é.
    *   **–ü—Ä–∏–º–µ—Ä**:
        *   –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å `telegram_id=12345` —É–∂–µ –µ—Å—Ç—å, —Ç–æ –æ—Ç–≤–µ—Ç–∏—Ç "üëã –ü—Ä–∏–≤–µ—Ç, John Doe! –í—ã–±–µ—Ä–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ".
        *   –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –∏ –æ—Ç–≤–µ—Ç–∏—Ç "üéâ **–ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é!**. –¢–µ–ø–µ—Ä—å –≤—ã–±–µ—Ä–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ."
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: None
*   `page_home(call: CallbackQuery)`:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**:
        *   `call`: –û–±—ä–µ–∫—Ç `CallbackQuery` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ callback-–∑–∞–ø—Ä–æ—Å–µ.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç callback —Å –¥–∞–Ω–Ω—ã–º–∏ "home". –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≥–ª–∞–≤–Ω—ã–º –º–µ–Ω—é.
    *   **–ü—Ä–∏–º–µ—Ä**:
        *   –û—Ç–≤–µ—Ç–∏—Ç  "üëã –ü—Ä–∏–≤–µ—Ç, John Doe! –í—ã–±–µ—Ä–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ" –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É "–ì–ª–∞–≤–Ω–∞—è".
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: None
*   `page_about(call: CallbackQuery)`:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**:
        *   `call`: –û–±—ä–µ–∫—Ç `CallbackQuery` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ callback-–∑–∞–ø—Ä–æ—Å–µ.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç callback —Å –¥–∞–Ω–Ω—ã–º–∏ "about". –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –º–∞–≥–∞–∑–∏–Ω–µ.
    *   **–ü—Ä–∏–º–µ—Ä**:
        *   –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–û –º–∞–≥–∞–∑–∏–Ω–µ", –ø–æ–∫–∞–∂–µ—Ç —Ç–µ–∫—Å—Ç —Å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏ –∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–π –æ–ø–ª–∞—Ç—ã.
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: None
*   `page_about(call: CallbackQuery, session_without_commit: AsyncSession)`:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**:
        *   `call`: –û–±—ä–µ–∫—Ç `CallbackQuery` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ callback-–∑–∞–ø—Ä–æ—Å–µ.
        *    `session_without_commit`: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Å–µ—Å—Å–∏—è SQLAlchemy –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–º–º–∏—Ç–∞.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç callback —Å –¥–∞–Ω–Ω—ã–º–∏ "my_profile". –ü–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–∫—É–ø–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –µ—ë, –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–æ–∫—É–ø–æ–∫, –µ—Å–ª–∏ –ø–æ–∫—É–ø–æ–∫ –Ω–µ –±—ã–ª–æ.
        *   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `UserDAO.get_purchase_statistics` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±—â–µ–π —Å—É–º–º—ã –ø–æ–∫—É–ø–æ–∫ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–∫—É–ø–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    *   **–ü—Ä–∏–º–µ—Ä**:
        *   –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å 3 –ø–æ–∫—É–ø–∫–∏ –Ω–∞ —Å—É–º–º—É 1500, —Ç–æ –ø–æ–∫–∞–∂–µ—Ç "üõç **–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å:**\n\n–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫—É–ø–æ–∫: **3**\n–û–±—â–∞—è —Å—É–º–º–∞: **1500‚ÇΩ**\n\n–•–æ—Ç–∏—Ç–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª–∏ –≤–∞—à–∏—Ö –ø–æ–∫—É–ø–æ–∫?"
        *   –ï—Å–ª–∏ –ø–æ–∫—É–ø–æ–∫ –Ω–µ—Ç, —Ç–æ –æ—Ç–≤–µ—Ç–∏—Ç "üîç **–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ–∫—É–ø–æ–∫.**\n\n–û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞—Ç–∞–ª–æ–≥ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ!"
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: None
*   `page_user_purchases(call: CallbackQuery, session_without_commit: AsyncSession)`:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**:
        *   `call`: –û–±—ä–µ–∫—Ç `CallbackQuery` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ callback-–∑–∞–ø—Ä–æ—Å–µ.
        *   `session_without_commit`: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Å–µ—Å—Å–∏—è SQLAlchemy –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–º–º–∏—Ç–∞.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç callback —Å –¥–∞–Ω–Ω—ã–º–∏ "purchases". –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞–∂–¥–æ–º –ø—Ä–æ–¥—É–∫—Ç–µ, –≤–∫–ª—é—á–∞—è —Ñ–∞–π–ª, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å.
        *   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `UserDAO.get_purchased_products` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –∫—É–ø–ª–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤.
    *   **–ü—Ä–∏–º–µ—Ä**:
        *   –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –∫—É–ø–ª–µ–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä "–ö–Ω–∏–≥–∞" —Å —Ü–µ–Ω–æ–π 500‚ÇΩ, –≤—ã–≤–µ–¥–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–æ–≤–∞—Ä–µ, –≤–∫–ª—é—á–∞—è –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ü–µ–Ω—É, —Å–∫—Ä—ã—Ç—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –∏ —Å—Å—ã–ª–∫—É –Ω–∞ —Ñ–∞–π–ª (–µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å).
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: None

### **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

*   `user_router = Router()`: –°–æ–∑–¥–∞–µ—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä —Ä–æ—É—Ç–µ—Ä–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.
*   `user_id`: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–∏–ø `int`) –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∏–∑ –æ–±—ä–µ–∫—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è.
*   `user_info`: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ (—Ç–∏–ø `UserModel`), –ø–æ–ª—É—á–µ–Ω–Ω–∞—è –∏–∑ –ë–î. –ú–æ–∂–µ—Ç –±—ã—Ç—å `None`, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω.
*   `values`: –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–∏–ø `UserModel`) –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –ë–î.
*   `purchases`: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫—É–ø–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–∏–ø `dict`), –ø–æ–ª—É—á–µ–Ω–Ω–∞—è –∏–∑ –ë–î.
*   `total_amount`: –û–±—â–∞—è —Å—É–º–º–∞ –ø–æ–∫—É–ø–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–∏–ø `int` –∏–ª–∏ `float`).
*   `total_purchases`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫—É–ø–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–∏–ø `int`).
*   `product`: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–¥—É–∫—Ç–µ (—Ç–∏–ø `Product` –∏–∑ –ë–î), –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∏–∑ –æ–±—ä–µ–∫—Ç–∞ –ø–æ–∫—É–ø–∫–∏.
*   `file_text`: –¢–µ–∫—Å—Ç –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –Ω–∞–ª–∏—á–∏—è —Ñ–∞–π–ª–∞ –≤ –ø—Ä–æ–¥—É–∫—Ç–µ (—Ç–∏–ø `str`).
*  `product_text`: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–æ–¥—É–∫—Ç–µ (—Ç–∏–ø `str`).

### **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è:**

*   **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –í —Ñ—É–Ω–∫—Ü–∏–∏ `page_user_purchases` –µ—Å—Ç—å `try/except` –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–æ –æ–±—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–ª—É—á—à–µ–Ω–∞.
*   **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
*   **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∏–∑–ª–∏—à–Ω–∏–º –∑–∞–ø—Ä–æ—Å–∞–º –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.
*   **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —á—Ç–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç –æ—Ç–ª–∞–¥–∫—É –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
*   **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏**: –õ–æ–≥–∏–∫—É –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏.
*  **–ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –ú–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

**–í–∑–∞–∏–º–æ—Å–≤—è–∑–∏ —Å –¥—Ä—É–≥–∏–º–∏ —á–∞—Å—Ç—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞:**

*   **`src.bot.dao.dao`**: –ú–æ–¥—É–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–ª–∞—Å—Å—ã –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º (DAO).  –§—É–Ω–∫—Ü–∏–∏ `cmd_start`, `page_about` –∏ `page_user_purchases` –∏—Å–ø–æ–ª—å–∑—É—é—Ç `UserDAO` –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ë–î.
*   **`src.bot.user.kbs`**: –ú–æ–¥—É–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã. –§—É–Ω–∫—Ü–∏–∏ `cmd_start`, `page_home`, `page_about`, `page_user_purchases` –∏—Å–ø–æ–ª—å–∑—É—é—Ç `main_user_kb` –∏ `purchases_kb` –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –±–æ—Ç–∞.
*   **`src.bot.user.schemas`**: –ú–æ–¥—É–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ —á–∞—Å—Ç—è–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –§—É–Ω–∫—Ü–∏–∏ `cmd_start` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `UserModel` –∏ `TelegramIDModel`.

–≠—Ç–æ—Ç –∞–Ω–∞–ª–∏–∑ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞, –≤–∫–ª—é—á–∞—è –µ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞.