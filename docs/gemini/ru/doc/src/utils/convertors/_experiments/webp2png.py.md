# Модуль `webp2png`

## Обзор

Модуль предназначен для конвертации изображений из формата WebP в формат PNG. Он включает в себя функции для поиска WebP файлов в указанной директории, их конвертации и сохранения в другую директорию. Конвертация выполняется с использованием функции `webp2png`.

## Подробнее

Данный модуль предоставляет функциональность для автоматической конвертации изображений WebP в PNG, что может быть полезно для обеспечения совместимости с системами и приложениями, которые не поддерживают формат WebP. Модуль использует функции из других модулей проекта, таких как `gs` для работы с путями и `get_filenames` для получения списка файлов.

## Функции

### `convert_images`

```python
def convert_images(webp_dir: Path, png_dir: Path) -> None:
    """ Конвертирует все изображения WebP в указанной директории в формат PNG.

    Args:
        webp_dir (Path): Директория, содержащая исходные изображения WebP.
        png_dir (Path): Директория для сохранения преобразованных изображений PNG.

    Example:
        convert_images(
            gs.path.google_drive / 'emil' / 'raw_images_from_openai',
            gs.path.google_drive / 'emil' / 'converted_images'
        )
    """
```

**Назначение**: Конвертирует все WebP изображения из указанной директории в формат PNG и сохраняет их в другую директорию.

**Параметры**:
- `webp_dir` (Path): Путь к директории, содержащей WebP изображения.
- `png_dir` (Path): Путь к директории, куда будут сохранены PNG изображения.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Вызывает исключения**:
- Отсутствуют явные исключения, но могут возникнуть исключения при операциях с файлами и директориями, обрабатываемые внутри вызываемых функций (`get_filenames`, `webp2png`).

**Как работает функция**:

1. **Получение списка WebP файлов**: Функция использует `get_filenames(webp_dir)` для получения списка всех файлов WebP в указанной директории `webp_dir`.
2. **Итерация по WebP файлам**: Для каждого WebP файла в списке выполняется конвертация в PNG.
3. **Формирование пути для PNG файла**: Для каждого WebP файла формируется имя соответствующего PNG файла с использованием `Path(webp).stem` для получения имени файла без расширения и добавлением расширения ".png".
4. **Конвертация WebP в PNG**: Используется функция `webp2png(webp_path, png)` для выполнения конвертации из WebP в PNG.
5. **Вывод результата**: Результат конвертации выводится в консоль с использованием `print(result)`.

**ASCII flowchart**:

```
A[Получение списка WebP файлов]
|
B[Итерация по WebP файлам]
|
C[Формирование пути для PNG файла]
|
D[Конвертация WebP в PNG с использованием webp2png]
|
E[Вывод результата конвертации]
```

**Примеры**:

```python
from pathlib import Path
from src import gs
# Пример использования функции convert_images
webp_dir = gs.path.google_drive / 'emil' / 'raw_images_from_openai'
png_dir = gs.path.google_drive / 'emil' / 'converted_images'
convert_images(webp_dir, png_dir)
```

## Главный блок `if __name__ == '__main__'`

В главном блоке происходит следующее:

1. **Определение директорий**: Задаются пути к директориям с WebP изображениями (`webp_dir`) и директории для сохранения PNG изображений (`png_dir`). Используются пути из модуля `gs.path.google_drive`.
2. **Вывод информации о директориях**: Выводится информация о путях к директориям WebP и PNG изображений.
3. **Запуск конвертации**: Вызывается функция `convert_images` с передачей определенных директорий для запуска процесса конвертации изображений.

```python
if __name__ == '__main__':
    # Define the directories for WebP and PNG images
    webp_dir = gs.path.google_drive / 'kazarinov' / 'raw_images_from_openai'
    png_dir = gs.path.google_drive / 'kazarinov' / 'converted_images'
    print(f"from: {webp_dir=}\nto:{png_dir=}")
    # Run the conversion
    convert_images(webp_dir, png_dir)