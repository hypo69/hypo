# Модуль управления категориями Aliexpress

## Обзор

Модуль предоставляет функциональность для работы с категориями товаров на платформе Aliexpress. Он включает функции для получения ссылок на товары в категории, обновления категорий на основе данных с сайта и операций с базой данных.

## Подробнее

Модуль предназначен для управления категориями товаров на Aliexpress. Он включает в себя следующие ключевые функции:

- Получение списка товаров из категории.
- Обновление категорий в сценарии на основе данных с сайта.
- Операции с базой данных для работы с категориями.

## Функции модуля

### `get_list_products_in_category(s)`

```python
def get_list_products_in_category(s):
    """
    Считывает URL товаров со страницы категории. Если есть несколько страниц с товарами, функция будет перелистывать все страницы.

    Args:
        s (Supplier): Экземпляр поставщика.

    Returns:
        list: Список URL продуктов в категории.

    """
```

**Назначение**: Считывает URL товаров со страницы категории. Если есть несколько страниц с товарами, функция будет перелистывать все страницы.

**Параметры**:
- `s` (Supplier): Экземпляр поставщика, содержащий информацию о поставщике и необходимые методы для взаимодействия с сайтом Aliexpress.

**Возвращает**:
- `list`: Список URL продуктов в категории.

**Как работает функция**:
1. Функция принимает экземпляр поставщика `s`.
2. Используя методы поставщика, она получает URL товаров со страницы категории.
3. Если в категории есть несколько страниц с товарами, функция автоматически перелистывает все страницы, собирая URL с каждой из них.
4. Возвращает список всех собранных URL товаров.

**Примеры**:

```python
# Пример использования функции get_list_products_in_category
# Предположим, что supplier - это экземпляр класса Supplier, настроенный для работы с Aliexpress
products = get_list_products_in_category(supplier)
# products будет содержать список URL товаров, найденных в категории, определенной в supplier
```

### `get_prod_urls_from_pagination(s)`

```python
def get_prod_urls_from_pagination(s):
    """
    Собирает ссылки на товары с страницы категории с перелистыванием страниц.

    Args:
        s (Supplier): Экземпляр поставщика.

    Returns:
        list: Список ссылок на товары.

    """
```

**Назначение**: Собирает ссылки на товары с страницы категории с перелистыванием страниц.

**Параметры**:
- `s` (`Supplier`): Экземпляр поставщика.

**Возвращает**:
- `list`: Список ссылок на товары.

**Как работает функция**:
1. Функция принимает экземпляр поставщика `s`, который содержит методы для взаимодействия с сайтом.
2. Она перелистывает страницы категории, используя пагинацию (если она есть).
3. С каждой страницы собирает ссылки на товары.
4. Возвращает список всех собранных ссылок на товары.

**Примеры**:

```python
# Пример использования функции get_prod_urls_from_pagination
# Предположим, что supplier - это экземпляр класса Supplier, настроенный для работы с Aliexpress
product_urls = get_prod_urls_from_pagination(supplier)
# product_urls будет содержать список ссылок на товары, найденных на страницах категории, перелистываемых через пагинацию
```

### `update_categories_in_scenario_file(s, scenario_filename)`

```python
def update_categories_in_scenario_file(s, scenario_filename):
    """
    Проверяет изменения категорий на сайте и обновляет файл сценария.

    Args:
        s (Supplier): Экземпляр поставщика.
        scenario_filename (str): Имя файла сценария для обновления.

    Returns:
        bool: True, если обновление прошло успешно.

    """
```

**Назначение**: Проверяет изменения категорий на сайте и обновляет файл сценария.

**Параметры**:
- `s` (`Supplier`): Экземпляр поставщика.
- `scenario_filename` (`str`): Имя файла сценария для обновления.

**Возвращает**:
- `bool`: `True`, если обновление прошло успешно.

**Как работает функция**:
1. Функция принимает экземпляр поставщика `s` и имя файла сценария `scenario_filename`.
2. Она проверяет, произошли ли изменения в категориях на сайте (например, добавлены новые категории или изменены существующие).
3. Если изменения обнаружены, функция обновляет файл сценария `scenario_filename` в соответствии с этими изменениями.
4. Возвращает `True`, если обновление прошло успешно.

**Примеры**:

```python
# Пример использования функции update_categories_in_scenario_file
# Предположим, что supplier - это экземпляр класса Supplier, настроенный для работы с Aliexpress
filename = "scenario_file.json"
updated = update_categories_in_scenario_file(supplier, filename)
# Если updated равно True, значит, файл сценария был успешно обновлен
```

### `get_list_categories_from_site(s, scenario_file, brand='')`

```python
def get_list_categories_from_site(s, scenario_file, brand=''):
    """
    Получает список категорий с сайта на основе файла сценария.

    Args:
        s (Supplier): Экземпляр поставщика.
        scenario_file (str): Имя файла сценария.
        brand (str, optional): Опциональное имя бренда.

    Returns:
        list: Список категорий.

    """
```

**Назначение**: Получает список категорий с сайта на основе файла сценария.

**Параметры**:
- `s` (`Supplier`): Экземпляр поставщика.
- `scenario_file` (`str`): Имя файла сценария.
- `brand` (`str`, optional): Опциональное имя бренда.

**Возвращает**:
- `list`: Список категорий.

**Как работает функция**:
1. Функция принимает экземпляр поставщика `s`, имя файла сценария `scenario_file` и опциональное имя бренда `brand`.
2. На основе данных из файла сценария и информации о поставщике, функция получает список категорий с сайта.
3. Если указано имя бренда, функция может фильтровать категории по этому бренду.
4. Возвращает список категорий.

**Примеры**:

```python
# Пример использования функции get_list_categories_from_site
# Предположим, что supplier - это экземпляр класса Supplier, настроенный для работы с Aliexpress
filename = "scenario_file.json"
categories = get_list_categories_from_site(supplier, filename, brand="SomeBrand")
# categories будет содержать список категорий, полученных с сайта на основе данных из файла сценария и отфильтрованных по бренду "SomeBrand"
```

## Классы

### `DBAdaptor`

```python
class DBAdaptor:
    """
    Предоставляет методы для выполнения операций с базой данных, таких как SELECT, INSERT, UPDATE и DELETE.

    Methods:
        select(cat_id, parent_id, project_cat_id): Выбирает записи из базы данных.
        insert(): Вставляет новые записи в базу данных.
        update(): Обновляет записи в базе данных.
        delete(): Удаляет записи из базы данных.

    """
```

**Описание**: Предоставляет методы для выполнения операций с базой данных, таких как `SELECT`, `INSERT`, `UPDATE` и `DELETE`.

**Методы**:
- `select(cat_id, parent_id, project_cat_id)`: Выбирает записи из базы данных.
- `insert()`: Вставляет новые записи в базу данных.
- `update()`: Обновляет записи в базе данных.
- `delete()`: Удаляет записи из базы данных.