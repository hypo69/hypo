# Анализ кода модуля `24_calndr.ru.md`

**Качество кода**

-   **Соответствие требованиям к формату кода (1-10):**

    -   **Преимущества:**
        -   Документ содержит подробное описание игры, пошаговую инструкцию, пример работы и ограничения.
        -   Структура документа логична и понятна.
        -   Используются Markdown-заголовки и списки для организации информации.
    -   **Недостатки:**
        -   Это не код, а описание игры в формате Markdown.
        -   Отсутствует код Python, который нужно анализировать и улучшать.
        -   Нет reStructuredText (RST) комментариев и docstring, которые требуются по условиям.

**Рекомендации по улучшению**

1.  **Преобразовать описание в код:** Необходимо разработать Python-код, реализующий описанную логику игры.
2.  **Добавить документацию:** Добавить reStructuredText (RST) комментарии и docstring для всех функций, методов и классов.
3.  **Использовать logger:** Добавить логгирование ошибок и отладочную информацию.
4.  **Использовать `j_loads` или `j_loads_ns`:** Если потребуется чтение данных из JSON, использовать соответствующие функции из `src.utils.jjson`.
5.  **Обработка ошибок:** Обеспечить корректную обработку ошибок и не допускать падения программы.
6.  **Тестирование:** Добавить тесты для проверки правильности работы календаря для разных лет.
7.  **Высокосный год:** Включить корректную обработку високосных лет.
8.  **Унификация кода:** Код должен быть унифицирован в соответствии с предыдущими примерами.

**Улучшенный код**

```python
"""
Модуль для вывода календаря на заданный год.
=========================================================================================

Модуль реализует программу CALNDR, позволяющую пользователю вывести календарь для любого года,
начиная с заданного дня недели. В модуле используется функция определения количества дней в месяце,
а также функции для вывода календаря на экран.

Пример использования
--------------------

Пример использования функции `print_calendar`:

.. code-block:: python

    print_calendar(2024, -1) # Вывод календаря на 2024 год, начиная с понедельника.

"""

from src.logger.logger import logger # Импортируем logger для отслеживания ошибок
from typing import List, Any  # Импортируем типы для аннотации

def is_leap_year(year: int) -> bool:
    """
    Проверяет, является ли год високосным.

    :param year: Год для проверки.
    :return: True, если год високосный, иначе False.
    """
    # Проверка, является ли год високосным
    if year % 4 == 0:
        if year % 100 == 0:
            if year % 400 == 0:
                return True
            else:
                return False
        else:
            return True
    else:
        return False

def get_days_in_month(month: int, year: int) -> int:
    """
    Возвращает количество дней в заданном месяце для определенного года.

    :param month: Месяц (1-12).
    :param year: Год.
    :return: Количество дней в месяце.
    """
    # Функция возвращает количество дней в месяце
    if month in [4, 6, 9, 11]:
        return 30
    elif month == 2:
        if is_leap_year(year):
            return 29
        else:
            return 28
    else:
        return 31

def print_calendar(year: int, start_day: int) -> None:
    """
    Выводит календарь на заданный год, начиная с заданного дня недели.

    :param year: Год для вывода календаря.
    :param start_day: День недели, с которого начинается год (0 - воскресенье, -1 - понедельник и т.д.).
    """
    # Функция выводит календарь для заданного года и начального дня недели
    days_of_week = ['Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб', 'Вс']  # Дни недели
    try:
        print(f"Календарь на {year} год:") # Вывод заголовка календаря
        for month in range(1, 13):
            print(f"\n{get_month_name(month)} {year}") # Вывод названия месяца
            print(' '.join(days_of_week)) # Вывод дней недели
            days_in_month = get_days_in_month(month, year) # Получаем количество дней в месяце
            day = start_day # Устанавливаем начальный день
            for _ in range(day % 7): # Выводим пробелы до первого дня месяца
                print("   ", end="")
            for day_num in range(1, days_in_month + 1): # Вывод чисел месяца
                print(f"{day_num:2}", end=" ")
                day += 1
                if day % 7 == 0:
                    print()
            start_day = day # Обновляем стартовый день для следующего месяца
            print()
    except Exception as ex:
        logger.error(f"Ошибка при выводе календаря: {ex}", exc_info=True) # Логирование ошибки, если что-то пошло не так

def get_month_name(month: int) -> str:
    """
    Возвращает название месяца по его номеру.

    :param month: Номер месяца (1-12).
    :return: Название месяца.
    """
    # Функция возвращает название месяца
    month_names = [
        'Январь', 'Февраль', 'Март', 'Апрель',
        'Май', 'Июнь', 'Июль', 'Август',
        'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'
    ]
    return month_names[month - 1]

def main() -> None:
    """
    Основная функция программы для запуска игры.
    """
    # Основная функция для запуска игры
    try:
         while True:
            year = int(input("Введите год: ")) # Получаем год от пользователя
            start_day = int(input("Введите день недели, с которого начинается год (0 - воскресенье, -1 - понедельник и т.д.): ")) # Получаем день недели
            print_calendar(year, start_day) # Выводим календарь

            repeat = input("Хотите вывести календарь для другого года? (да/нет): ").lower() # Спрашиваем про повторение
            if repeat != 'да':
                print("Спасибо за использование программы!") # Завершение программы
                break
    except ValueError as ex:
        logger.error(f"Ошибка ввода: {ex}", exc_info=True) # Логирование ошибки ввода
    except Exception as ex:
         logger.error(f"Непредвиденная ошибка: {ex}", exc_info=True) # Логирование непредвиденной ошибки

if __name__ == "__main__":
    main() # Запуск main если скрипт вызывается напрямую
```