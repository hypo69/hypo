# Модуль `main.js`

## Обзор

Этот модуль реализует бота для Telegram, который обрабатывает голосовые и текстовые сообщения.  Бот использует API OpenAI для обработки запросов и возвращает ответы пользователю.

## Импорты

- `Telegraf`: Библиотека для создания ботов Telegram.
- `message`: Фильтр сообщений в Telegraf.
- `code`: Форматирование кода в Telegraf.
- `config`: Модуль для чтения конфигурационных данных.
- `ogg`: Модуль для работы с файлами OGG.
- `openai`: Модуль для работы с API OpenAI.
- `removeFile`: Модуль для удаления файлов.

## Переменные

- `bot`: Экземпляр бота Telegraf, созданный с использованием токена Telegram.


## Команды

### `start`

**Описание**: Обрабатывает команду `/start`.

**Параметры**:
- `ctx`: Контекст сообщения.

**Возвращает**:
- Не применимо.

**Обрабатывает исключения**:
- Не применимо.


## Обработчики сообщений

### Обработчик голосовых сообщений (`voice`)

**Описание**: Обрабатывает голосовые сообщения.

**Параметры**:
- `ctx`: Контекст сообщения.

**Возвращает**:
- Не применимо.

**Обрабатывает исключения**:
- `e`: Любые ошибки, возникающие при обработке голосового сообщения. Выводит сообщение об ошибке в консоль.

**Описание шагов обработки:**
1. Отправляет сообщение о принятии сообщения и ожидании ответа от сервера.
2. Получает ссылку на загруженный голосовый файл.
3. Получает идентификатор пользователя.
4. Преобразует голосовое сообщение в формат OGG.
5. Преобразует файл OGG в MP3.
6. Удаляет временный файл OGG.
7. Переводит голосовое сообщение в текст с помощью API OpenAI.
8. Отправляет сообщение с запросом.
9. Отправляет запрос в API OpenAI для получения ответа.
10. Отправляет полученный ответ пользователю.


### Обработчик текстовых сообщений (`text`)

**Описание**: Обрабатывает текстовые сообщения.

**Параметры**:
- `ctx`: Контекст сообщения.
- `text`: Текст сообщения.

**Возвращает**:
- Не применимо.

**Обрабатывает исключения**:
- `e`: Любые ошибки, возникающие при обработке текстового сообщения. Выводит сообщение об ошибке в консоль.

**Описание шагов обработки:**
1. Отправляет сообщение о принятии сообщения и ожидании ответа от сервера.
2. Обрабатывает текстовое сообщение с помощью функции `processTextToChat`.

## Функции

### `processTextToChat` (не определена в коде)

**Описание**:  Функция, которая обрабатывает текстовые сообщения, передавая их API OpenAI для получения ответа.

**Параметры**:
- `ctx`: Контекст сообщения.
- `text`: Текст сообщения.

**Возвращает**:
- Не применимо.

**Обрабатывает исключения**:
- Не применимо.


## Запуск бота

Бот запускается с помощью `bot.launch()`.

## Обработка сигналов

Бот корректно обрабатывает сигналы `SIGINT` и `SIGTERM`, завершая работу при их получении.