# Модуль `src.suppliers.ivory.graber`

## Обзор

Модуль `src.suppliers.ivory.graber` содержит класс `Graber`, который собирает значения полей на странице товара `ivory.co.il`.
Для каждого поля страницы товара создана функция обработки поля в родительском классе.
Если требуется нестандартная обработка, функция перегружается в этом классе.

Перед отправкой запроса к веб-драйверу можно совершить предварительные действия через декоратор.
Декоратор по умолчанию находится в родительском классе. Для того, чтобы декоратор сработал, нужно передать значение
в `Context.locator`. Если нужно реализовать свой декоратор - раскомментируйте строки с декоратором и переопределите его поведение.

## Подробнее

Этот модуль предназначен для извлечения информации о товарах с сайта `ivory.co.il`. Он расширяет возможности базового класса `Graber` (из модуля `src.suppliers.graber`), адаптируя их под структуру конкретного сайта. Модуль использует веб-драйвер для взаимодействия с веб-страницей и извлечения необходимых данных.

## Классы

### `Graber`

**Описание**: Класс `Graber` предназначен для захвата данных с сайта `ivory.co.il`. Он наследуется от класса `Graber` из модуля `src.suppliers.graber` и переопределяет некоторые его методы для адаптации к особенностям структуры сайта `ivory.co.il`.

**Как работает класс**:
1.  **Инициализация**: При создании экземпляра класса `Graber` происходит инициализация префикса поставщика (`supplier_prefix`) значением `'ivory'`. Затем вызывается конструктор родительского класса `Graber` для выполнения базовой инициализации.
2.  **Использование декоратора**:  В классе предусмотрена возможность использования декоратора `@close_pop_up` для выполнения предварительных действий перед отправкой запроса к веб-драйверу. Для этого необходимо установить значение `Context.locator_for_decorator`.

**Методы**:

-   `__init__(self, driver: Driver, lang_index)`: Инициализирует экземпляр класса `Graber`.

    **Параметры**:
    -   `driver` (`Driver`): Экземпляр веб-драйвера, используемый для взаимодействия с сайтом.
    -   `lang_index` (int): Индекс языка, используемый при работе с сайтом.

## Функции

### `close_pop_up`

```python
def close_pop_up(value: Any = None):
    """Создает декоратор для закрытия всплывающих окон перед выполнением основной логики функции.

    Args:
        value (Any): Дополнительное значение для декоратора.

    Returns:
        Callable: Декоратор, оборачивающий функцию.
    """
```

**Назначение**:
Функция `close_pop_up` является декоратором, предназначенным для закрытия всплывающих окон на веб-странице перед выполнением основной логики декорируемой функции.

**Как работает функция**:

1.  Функция `close_pop_up` принимает необязательный аргумент `value`, который может быть использован для передачи дополнительных параметров декоратору.
2.  Определяется внутренняя функция `decorator`, которая принимает функцию `func` в качестве аргумента и возвращает функцию `wrapper`.
3.  Внутри функции `wrapper` происходит попытка закрытия всплывающего окна с использованием `Context.driver.execute_locator(Context.locator.close_pop_up)`.
4.  Если во время выполнения локатора возникает исключение `ExecuteLocatorException`, оно логируется с помощью `logger.debug`.
5.  В конце выполняется основная функция `func` и возвращается ее результат.

**Пример**:

```python
@close_pop_up()
async def my_function():
    # Основная логика функции
    ...
```