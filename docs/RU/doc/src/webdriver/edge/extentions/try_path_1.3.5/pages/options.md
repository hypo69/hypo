# Модуль options.js

## Обзор

Данный JavaScript-модуль (`options.js`) отвечает за обработку пользовательских настроек расширения `try_xpath_1.3.5`. Модуль позволяет пользователю изменять атрибуты, стили и другие параметры, определяющие поведение расширения.  После сохранения настроек, пользователь должен перезагрузить всплывающее окно расширения, чтобы изменения вступили в силу.

## Переменные

### `defaultAttributes`

**Описание**: Объект, содержащий значения по умолчанию для различных атрибутов.

**Значения**:

```javascript
{
    "element": "data-tryxpath-element",
    "context": "data-tryxpath-context",
    "focused": "data-tryxpath-focused",
    "focusedAncestor": "data-tryxpath-focused-ancestor",
    "frame": "data-tryxpath-frame",
    "frameAncestor": "data-tryxpath-frame-ancestor"
}
```


### `defaultPopupBodyStyles`

**Описание**: Объект, содержащий значения по умолчанию для стилей тела всплывающего окна.

**Значения**:

```javascript
{
    "width": "367px",
    "height": "auto"
}
```


## Функции

### `isValidAttrName(name)`

**Описание**: Проверяет, является ли переданное имя атрибута валидным.

**Параметры**:

- `name` (string): Имя атрибута.

**Возвращает**:

- boolean: `true`, если имя атрибута валидно, `false` - иначе.

**Обрабатывает исключения**:

- `e`: Если имя атрибута не валидно, возникает исключение.


### `isValidAttrNames(names)`

**Описание**: Проверяет, являются ли все имена атрибутов в переданном объекте валидными.

**Параметры**:

- `names` (object): Объект, содержащий имена атрибутов.

**Возвращает**:

- boolean: `true`, если все имена атрибутов валидны, `false` - иначе.


### `isValidStyleLength(len)`

**Описание**: Проверяет, является ли переданная строка длины стилей валидной.

**Параметры**:

- `len` (string): Строка длины стиля.

**Возвращает**:

- boolean: `true`, если строка длины стиля валидна, `false` - иначе.


### `loadDefaultCss()`

**Описание**: Загружает CSS-стили по умолчанию из файла `/css/try_xpath_insert.css` используя `XMLHttpRequest`.

**Возвращает**:

- Promise<string>: Обещание, которое резолвится с текстом загруженного CSS или отклоняется, если возникла ошибка.


### `extractBodyStyles(css)`

**Описание**: Извлекает значения ширины и высоты из CSS-стиля.

**Параметры**:

- `css` (string): Строка CSS-стиля.

**Возвращает**:

- object: Объект, содержащий значения ширины и высоты.


### `createPopupCss(bodyStyles)`

**Описание**: Создаёт строку CSS для стиля всплывающего окна.

**Параметры**:

- `bodyStyles` (object): Объект со значениями `width` и `height`.

**Возвращает**:

- string: Строка CSS для всплывающего окна.


## Обработчики событий

### `window.addEventListener("load", ...)`

**Описание**: Обработчик события загрузки страницы. Выполняется инициализация элементов, установка обработчиков событий для кнопок и загрузка настроек.

**Детали**:

* Инициализирует элементы DOM.
* Загружает параметры из `browser.storage` и устанавливает значения в поля формы.
* Устанавливает обработчик для кнопки сохранения (`save`).
* Устанавливает обработчик для кнопки показа значений по умолчанию (`show-default`).


## Использование

Модуль `options.js` используется для настройки параметров расширения. Пользователь может изменять значения атрибутов, стилей и других параметров в всплывающем окне расширения.  После сохранения настроек, изменения вступят в силу только после перезагрузки всплывающего окна.


```