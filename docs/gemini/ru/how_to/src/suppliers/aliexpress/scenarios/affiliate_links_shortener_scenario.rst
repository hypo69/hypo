Как использовать функцию get_short_affiliate_link
============================================================================================

Описание
-------------------------
Функция `get_short_affiliate_link` предназначена для получения короткой ссылки из длинной ссылки через веб-браузер. Она взаимодействует с веб-сайтом, вводит длинную ссылку, нажимает кнопку для сокращения и возвращает полученную короткую ссылку.  Функция обрабатывает возможные ошибки, такие как отсутствие короткой ссылки или некорректный URL.

Шаги выполнения
-------------------------
1. **Загрузка локаторов:** Функция загружает локаторы из файла `affiliate_links_shortener.json`, содержащие пути к элементам на веб-странице (например, поля для ввода URL и кнопки).
2. **Ввод URL:** Функция вводит предоставленный `url` в соответствующее поле на веб-странице.
3. **Нажатие кнопки:** Функция нажимает на кнопку, которая запускает процесс сокращения ссылки.
4. **Ожидание обновления:**  Функция ожидает 1 секунду, чтобы страница успела обновиться после нажатия кнопки.
5. **Извлечение короткой ссылки:** Функция извлекает короткую ссылку из соответствующего элемента на странице.
6. **Сохранение текущей вкладки:** Сохраняется идентификатор текущей вкладки.
7. **Проверка короткой ссылки:** Проверяется длина полученной короткой ссылки. Если она пустая, генерируется сообщение об ошибке, и функция завершается, не возвращая значение.
8. **Открытие новой вкладки:** Открывается новая вкладка браузера с короткой ссылкой.
9. **Переключение на новую вкладку:** Функция переключается на новую вкладку.
10. **Проверка корректности короткой ссылки:** Проверяется, начинается ли текущий URL с `https://error.taobao.com`. Если да, то выводится сообщение об ошибке, закрывается вкладка с некорректной ссылкой, и функция возвращается к исходной вкладке.
11. **Закрытие новой вкладки и возврат к основной:** Закрывается новая вкладка и переключается обратно на исходную вкладку.
12. **Возврат короткой ссылки:** Функция возвращает полученную короткую ссылку.


Пример использования
-------------------------
.. code-block:: python

    from src.webdriver import Driver
    from pathlib import Path
    from src import gs

    # Предполагается, что объект Driver и необходимые пути уже инициализированы
    driver = Driver()
    url_to_shorten = "https://example.com"
    
    # Путь к файлу с локаторами (убедитесь, что он существует)
    locators_path = Path(gs.path.src, 'suppliers', 'aliexpress', 'locators', 'affiliate_links_shortener.json')
    try:
        shortened_url = get_short_affiliate_link(driver, url_to_shorten)
        print(f"Укороченная ссылка: {shortened_url}")
    except Exception as e:
        print(f"Произошла ошибка: {e}")
    finally:
        driver.quit()