# Анализ кода модуля hmrabi.py

**Качество кода: 7/10**
 -  Плюсы
     - Код достаточно хорошо структурирован и читаем.
     - Используется `try-except` для обработки исключений при вводе данных пользователем.
     - Код игры соответствует описанным правилам.
     - Присутствует документация в виде многострочного комментария.
 -  Минусы
    - Отсутствует docstring для модуля и переменных.
    - Не используется `src.logger.logger` для логирования ошибок.
    - Комментарии к коду недостаточно подробные и не соответствуют формату RST.
    - Не используются константы для числовых значений.
    - Желательно перенести логику преобразования чисел в отдельные функции.
    - Нет проверки на не пустую строку ввода пользователя.

**Рекомендации по улучшению**

1.  Добавить docstring в формате RST для модуля и переменных.
2.  Использовать `src.logger.logger` для логирования ошибок вместо `print`.
3.  Добавить более подробные комментарии в формате RST к каждому блоку кода.
4.  Использовать константы для числовых значений, таких как 4095.
5.  Создать отдельные функции для преобразования чисел из десятичной в шестнадцатеричную систему и обратно.
6.  Добавить проверку на пустую строку ввода от пользователя.
7.  Улучшить читаемость кода за счет более информативных имен переменных.

**Оптимизированный код**

```python
"""
Модуль HMRABI:
=========================================================================================
Этот модуль реализует игру, в которой пользователь пытается угадать случайно сгенерированное
число в шестнадцатеричном формате.

Правила игры:
    1.  Компьютер выбирает случайное число от 0 до FFF (4095 в десятичной системе).
    2.  Игрок вводит свои предположения в шестнадцатеричном формате.
    3.  Если предположение ниже загаданного числа, игра выводит "TOO LOW" в шестнадцатеричном формате.
    4.  Если предположение выше загаданного числа, игра выводит "TOO HIGH" в шестнадцатеричном формате.
    5.  Игра продолжается до тех пор, пока игрок не угадает число.

Пример использования:
--------------------

.. code-block:: python

    python hmrabi.py

"""
import random
from src.logger.logger import logger  # Импорт logger для логирования

MAX_NUMBER = 4095  # Константа для максимального числа
# MAX_NUMBER_HEX = hex(MAX_NUMBER)[2:].upper() # TODO: не используется, можно удалить
"""
:int: Максимальное значение числа для генерации.
"""


def to_hex(decimal_number: int) -> str:
    """
    Преобразует десятичное число в шестнадцатеричную строку.

    :param decimal_number: Десятичное число для преобразования.
    :type decimal_number: int
    :return: Строка, представляющая шестнадцатеричное число без префикса '0x'.
    :rtype: str
    """
    return hex(decimal_number)[2:].upper()


def from_hex(hex_number: str) -> int:
    """
    Преобразует шестнадцатеричную строку в десятичное число.

    :param hex_number: Шестнадцатеричная строка для преобразования.
    :type hex_number: str
    :return: Десятичное представление шестнадцатеричного числа.
    :rtype: int
    :raises ValueError: Если входная строка не является валидным шестнадцатеричным числом.
    """
    try:
        return int(hex_number, 16)
    except ValueError as e:
        logger.error(f"Ошибка преобразования шестнадцатеричного числа: {hex_number}", exc_info=True)
        raise


def start_game():
    """
    Запускает игру угадывания чисел в шестнадцатеричном формате.
    """
    number_of_guesses = 0  # Инициализация счетчика попыток
    """
    :int: Счетчик попыток пользователя.
    """
    target_number = random.randint(0, MAX_NUMBER) # Генерация случайного числа
    """
    :int: Загаданное число, которое пользователь должен угадать.
    """
    while True: # Начало цикла игры
        number_of_guesses += 1 # Увеличение счетчика попыток
        user_guess_hex = input(f"Введите число в шестнадцатеричном формате (0-{to_hex(MAX_NUMBER)}): ") # Запрос ввода пользователя
        """
        :str: Строка ввода пользователя в шестнадцатеричном формате.
        """
        if not user_guess_hex: # Проверка на пустую строку ввода
            logger.error("Ввод не может быть пустым") # логируем ошибку
            continue # если пустая строка, то переходим к следующей итерации цикла
        try:
            user_guess = from_hex(user_guess_hex) # Преобразование ввода пользователя в десятичное число
            """
            :int: Преобразованный ввод пользователя в десятичном формате.
            """
        except ValueError:
            print("Пожалуйста, введите корректное шестнадцатеричное число.") # Вывод сообщения об ошибке
            continue

        if user_guess == target_number: # Проверка на совпадение с загаданным числом
            print(f"Поздравляем! Вы угадали число за {number_of_guesses} попыток!") # Вывод поздравления
            break # Выход из цикла, если угадали
        elif user_guess < target_number: # Если введенное число меньше загаданного
            print(f"Слишком мало ({to_hex(user_guess)})") # Вывод подсказки "слишком мало"
        else: # Если введенное число больше загаданного
            print(f"Слишком много ({to_hex(user_guess)})") # Вывод подсказки "слишком много"


if __name__ == "__main__":
    start_game()
```