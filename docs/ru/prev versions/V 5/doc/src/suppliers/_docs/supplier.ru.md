# Модуль Supplier

## Обзор

Модуль `Supplier` представляет собой базовый класс для работы с поставщиками данных в приложении `hypotez`. Он предоставляет общие методы и атрибуты, которые используются или переопределяются конкретными реализациями поставщиков, такими как Amazon, AliExpress и Walmart.

## Подробней

Класс `Supplier` служит основой для унифицированного взаимодействия с различными поставщиками данных. Он включает в себя функциональность для инициализации, загрузки конфигураций, входа на сайт поставщика (если требуется) и выполнения сценариев для сбора и обработки данных. Этот класс предназначен для наследования и расширения, позволяя конкретным поставщикам добавлять свою специфическую логику.

## Классы

### `Supplier`

**Описание**: Базовый класс для работы с поставщиками данных.

**Как работает класс**:
Класс `Supplier` предоставляет основную структуру и методы для взаимодействия с поставщиками данных. При инициализации загружаются настройки поставщика, устанавливается веб-драйвер и подготавливаются сценарии для выполнения. Методы класса обеспечивают вход на сайт поставщика, запуск сценариев и выполнение задач сбора данных.

**Методы**:

- `__init__`: Конструктор класса, инициализирующий атрибуты на основе префикса поставщика и других параметров.
- `_payload`: Загружает настройки поставщика, конфигурационные файлы и инициализирует веб-драйвер.
- `login`: Метод для выполнения входа на сайт поставщика (если требуется).
- `run_scenario_files`: Запускает выполнение файлов сценариев.
- `run_scenarios`: Запускает один или несколько сценариев.

**Параметры**:

- `supplier_prefix` (str): Префикс для поставщика, например, `aliexpress` или `amazon`.
- `locale` (str, optional): Код локализации (например, `en` для английского, `ru` для русского). По умолчанию `'en'`.
- `webdriver` (str | Driver | bool, optional): Веб-драйвер для взаимодействия с сайтом поставщика. По умолчанию `'default'`.
- `*attrs`: Дополнительные атрибуты.
- `**kwargs`: Дополнительные именованные аргументы.

**Примеры**:

```python
# Создаем объект для поставщика 'aliexpress'
supplier = Supplier(supplier_prefix='aliexpress', locale='en', webdriver='chrome')

# Выполняем вход на сайт поставщика
supplier.login()

# Запускаем сценарии из файлов
supplier.run_scenario_files(['example_scenario.json'])

# Или запускаем сценарии по определенным условиям
supplier.run_scenarios([{'action': 'scrape', 'target': 'product_list'}])
```

## Функции

### `__init__`

```python
def __init__(self, supplier_prefix: str, locale: str = 'en', webdriver: str | Driver | bool = 'default', *attrs, **kwargs) -> None:
    """
    Инициализирует атрибуты класса Supplier.

    Args:
        supplier_prefix (str): Префикс поставщика (например, 'aliexpress', 'amazon').
        locale (str, optional): Локаль поставщика (например, 'en', 'ru'). По умолчанию 'en'.
        webdriver (str | Driver | bool, optional): Веб-драйвер для взаимодействия с сайтом поставщика. По умолчанию 'default'.
        *attrs: Дополнительные атрибуты.
        **kwargs: Дополнительные именованные аргументы.
    """
```

**Описание**: Инициализирует экземпляр класса `Supplier`.

**Как работает функция**:
Конструктор `__init__` принимает параметры, необходимые для инициализации поставщика, такие как префикс поставщика, локаль и веб-драйвер. Он устанавливает основные атрибуты объекта, подготавливая его к дальнейшей работе.

**Параметры**:

- `supplier_prefix` (str): Префикс поставщика, используемый для загрузки конфигураций и настроек.
- `locale` (str, optional): Локаль поставщика, определяющая язык и региональные настройки. По умолчанию `'en'`.
- `webdriver` (str | Driver | bool, optional): Веб-драйвер для взаимодействия с сайтом поставщика. Может быть строкой (например, `'chrome'`), экземпляром драйвера или булевым значением. По умолчанию `'default'`.
- `*attrs`: Дополнительные атрибуты.
- `**kwargs`: Дополнительные именованные аргументы.

**Примеры**:

```python
supplier = Supplier(supplier_prefix='aliexpress', locale='ru', webdriver='chrome')
```

### `_payload`

```python
def _payload(self, webdriver: str | Driver | bool, *attrs, **kwargs) -> bool:
    """
    Загружает конфигурацию поставщика и инициализирует веб-драйвер.

    Args:
        webdriver (str | Driver | bool): Веб-драйвер для взаимодействия с сайтом поставщика.
        *attrs: Дополнительные атрибуты.
        **kwargs: Дополнительные именованные аргументы.

    Returns:
        bool: Возвращает True, если загрузка прошла успешно, иначе False.
    """
```

**Описание**: Загружает конфигурационные файлы поставщика и инициализирует веб-драйвер.

**Как работает функция**:
Метод `_payload` отвечает за загрузку необходимых конфигурационных файлов, таких как локаторы элементов на страницах сайта поставщика и сценарии выполнения. Он также инициализирует веб-драйвер, используемый для взаимодействия с сайтом поставщика.

**Параметры**:

- `webdriver` (str | Driver | bool): Веб-драйвер для взаимодействия с сайтом поставщика. Может быть строкой (например, `'chrome'`), экземпляром драйвера или булевым значением.
- `*attrs`: Дополнительные атрибуты.
- `**kwargs`: Дополнительные именованные аргументы.

**Возвращает**:

- `bool`: `True`, если загрузка конфигурации и инициализация веб-драйвера прошли успешно, иначе `False`.

**Примеры**:

```python
supplier._payload(webdriver='chrome')
```

### `login`

```python
def login(self) -> bool:
    """
    Выполняет вход на сайт поставщика.

    Returns:
        bool: Возвращает True, если вход выполнен успешно, иначе False.
    """
```

**Описание**: Выполняет вход на сайт поставщика.

**Как работает функция**:
Метод `login` отвечает за выполнение процесса входа на сайт поставщика. Он использует данные для входа, такие как имя пользователя и пароль, для аутентификации на сайте.

**Возвращает**:

- `bool`: `True`, если вход на сайт выполнен успешно, иначе `False`.

**Примеры**:

```python
supplier.login()
```

### `run_scenario_files`

```python
def run_scenario_files(self, scenario_files: str | list[str] = None) -> bool:
    """
    Запускает выполнение сценариев из файлов.

    Args:
        scenario_files (str | list[str], optional): Список файлов сценариев для выполнения. По умолчанию None.

    Returns:
        bool: Возвращает True, если выполнение сценариев прошло успешно, иначе False.
    """
```

**Описание**: Запускает выполнение сценариев, определенных в файлах.

**Как работает функция**:
Метод `run_scenario_files` принимает список файлов сценариев и выполняет каждый из них. Сценарии определяют последовательность действий, которые необходимо выполнить для сбора данных или выполнения других задач на сайте поставщика.

**Параметры**:

- `scenario_files` (str | list[str], optional): Список файлов сценариев для выполнения. Если `None`, используются сценарии по умолчанию. По умолчанию `None`.

**Возвращает**:

- `bool`: `True`, если выполнение всех сценариев прошло успешно, иначе `False`.

**Примеры**:

```python
supplier.run_scenario_files(['scenario1.json', 'scenario2.json'])
```

### `run_scenarios`

```python
def run_scenarios(self, scenarios: dict | list[dict]) -> bool:
    """
    Запускает выполнение одного или нескольких сценариев.

    Args:
        scenarios (dict | list[dict]): Список сценариев для выполнения.

    Returns:
        bool: Возвращает True, если выполнение сценариев прошло успешно, иначе False.
    """
```

**Описание**: Запускает выполнение одного или нескольких сценариев, переданных в виде словарей.

**Как работает функция**:
Метод `run_scenarios` принимает список словарей, где каждый словарь представляет собой сценарий для выполнения. Он выполняет каждый сценарий, определяя действия, которые необходимо выполнить на сайте поставщика.

**Параметры**:

- `scenarios` (dict | list[dict]): Список сценариев для выполнения. Каждый сценарий представлен в виде словаря, содержащего информацию о действиях и целях.

**Возвращает**:

- `bool`: `True`, если выполнение всех сценариев прошло успешно, иначе `False`.

**Примеры**:

```python
supplier.run_scenarios([
    {'action': 'scrape', 'target': 'product_list'},
    {'action': 'navigate', 'url': 'https://example.com'}
])
```