# Модуль для поиска свободного порта

## Обзор

Модуль `get_free_port.py` предназначен для поиска свободного порта в заданном диапазоне или первого доступного порта, если диапазон не указан. Он определяет, какие порты уже используются, и возвращает свободный порт для использования в сетевых соединениях.

## Подробнее

Этот модуль предоставляет функцию `get_free_port`, которая принимает хост и диапазон портов в качестве аргументов. Если указан диапазон портов, функция пытается найти свободный порт в этом диапазоне. Если диапазон не указан, функция начинает поиск с порта 1024 и увеличивает его до тех пор, пока не найдет свободный. Модуль использует сокеты для проверки, занят ли порт. Этот модуль важен для динамического выделения портов в сетевых приложениях, где необходимо избежать конфликтов портов.

## Функции

### `get_free_port`

```python
def get_free_port(host: str, port_range: Optional[str | List[str]] = None) -> int:
    """
    Находит и возвращает свободный порт в указанном диапазоне или первый доступный порт, если диапазон не указан.

    Args:
        host (str): Адрес хоста для проверки доступных портов.
        port_range (Optional[str | List[str]], optional): Диапазон портов, указанный в виде строки "min-max" или списка строк.
               Например: "3000-3999", ["3000-3999", "8000-8010"], None. По умолчанию `None`.

    Returns:
        int: Доступный номер порта.

    Raises:
        ValueError: Если в указанном диапазоне не удается найти свободный порт или если диапазон портов недействителен.
    """
```

**Описание**: Находит свободный порт в заданном диапазоне или первый доступный порт, если диапазон не указан.

**Параметры**:
- `host` (str): Адрес хоста для проверки доступных портов.
- `port_range` (Optional[str | List[str]], optional): Диапазон портов, указанный строкой "min-max" или списком строк. По умолчанию `None`.

**Возвращает**:
- `int`: Доступный номер порта.

**Вызывает исключения**:
- `ValueError`: Если не удается найти свободный порт в указанном диапазоне или если диапазон портов недействителен.

**Примеры**:

```python
get_free_port('localhost', '3000-3005')
get_free_port('localhost', ['3000-3005', '8000-8010'])
get_free_port('localhost')
```

### `_is_port_in_use`

```python
def _is_port_in_use(host: str, port: int) -> bool:
    """
    Проверяет, используется ли данный порт на указанном хосте.

    Args:
        host (str): Адрес хоста.
        port (int): Номер порта для проверки.

    Returns:
        bool: True, если порт используется, False в противном случае.
    """
```

**Описание**: Проверяет, используется ли указанный порт на данном хосте.

**Параметры**:
- `host` (str): Адрес хоста.
- `port` (int): Номер порта для проверки.

**Возвращает**:
- `bool`: `True`, если порт используется, `False` в противном случае.

**Примеры**:
```python
_is_port_in_use('localhost', 3000)
```

### `_parse_port_range`

```python
def _parse_port_range(port_range_str: str) -> Tuple[int, int]:
    """
    Разбирает строку диапазона портов "min-max" в кортеж (min_port, max_port).

    Args:
        port_range_str (str): Строка диапазона портов.

    Returns:
        Tuple[int, int]: Кортеж, содержащий минимальный и максимальный номера портов.

    Raises:
        ValueError: Если формат строки диапазона портов недействителен.
    """
```

**Описание**: Преобразует строку диапазона портов "min-max" в кортеж (min_port, max_port).

**Параметры**:
- `port_range_str` (str): Строка, представляющая диапазон портов.

**Возвращает**:
- `Tuple[int, int]`: Кортеж, содержащий минимальный и максимальный номера портов.

**Вызывает исключения**:
- `ValueError`: Если формат строки диапазона портов недействителен.

**Примеры**:

```python
_parse_port_range('3000-3005')