# Модуль `src.logger`

## Обзор

Модуль `src.logger` предоставляет гибкую систему логирования, поддерживающую вывод в консоль, файлы и формате JSON. Он использует паттерн Singleton для обеспечения единственного экземпляра логгера в приложении. Логгер поддерживает различные уровни логирования (например, `INFO`, `ERROR`, `DEBUG`) и включает цветной вывод для логов в консоли. Также можно настраивать форматы вывода логов и управлять логированием в разные файлы.

## Классы

### `SingletonMeta`

**Описание**: Метакласс, реализующий паттерн Singleton для логгера.

### `JsonFormatter`

**Описание**:  Пользовательский форматер, выводящий логи в формате JSON.

### `Logger`

**Описание**: Основной класс логгера, поддерживающий логирование в консоль, файлы и в формате JSON.


## Функции

### `__init__`

**Описание**: Инициализирует экземпляр `Logger` с заполнителями для разных типов логгеров (консоль, файл, JSON).

### `_configure_logger(name: str, log_path: str, level: Optional[int] = logging.DEBUG, formatter: Optional[logging.Formatter] = None, mode: Optional[str] = 'a') -> logging.Logger`

**Описание**: Настраивает и возвращает экземпляр логгера.

**Параметры**:
- `name` (str): Имя логгера.
- `log_path` (str): Путь к файлу лога.
- `level` (Optional[int], optional): Уровень логирования, например, `logging.DEBUG`. По умолчанию `logging.DEBUG`.
- `formatter` (Optional[logging.Formatter], optional): Пользовательский форматер (необязательно).
- `mode` (Optional[str], optional): Режим файла, например, `'a'` для добавления (по умолчанию).

**Возвращает**: Настроенный экземпляр `logging.Logger`.

### `initialize_loggers(info_log_path: Optional[str] = '', debug_log_path: Optional[str] = '', errors_log_path: Optional[str] = '', json_log_path: Optional[str] = '')`

**Описание**: Инициализирует логгеры для консольного и файлового логирования (info, debug, error и JSON).

**Параметры**:
- `info_log_path` (Optional[str], optional): Путь для файла лога info.
- `debug_log_path` (Optional[str], optional): Путь для файла лога debug.
- `errors_log_path` (Optional[str], optional): Путь для файла лога errors.
- `json_log_path` (Optional[str], optional): Путь для файла лога в формате JSON.


### `log(level, message, ex=None, exc_info=False, color=None)`

**Описание**: Логирует сообщение на указанном уровне (например, `INFO`, `DEBUG`, `ERROR`) с необязательным исключением и форматированием цвета.

**Параметры**:
- `level`: Уровень логирования (например, `logging.INFO`, `logging.DEBUG`).
- `message`: Сообщение для логирования.
- `ex`: Необязательное исключение для логирования.
- `exc_info`: Флаг, включающий информацию об исключении (по умолчанию `False`).
- `color`: Кортеж с текстовым и фоновым цветами для консольного вывода (необязательно).


### `info(message, ex=None, exc_info=False, colors: Optional[tuple] = None)`
### `success(message, ex=None, exc_info=False, colors: Optional[tuple] = None)`
### `warning(message, ex=None, exc_info=False, colors: Optional[tuple] = None)`
### `debug(message, ex=None, exc_info=True, colors: Optional[tuple] = None)`
### `error(message, ex=None, exc_info=True, colors: Optional[tuple] = None)`
### `critical(message, ex=None, exc_info=True, colors: Optional[tuple] = None)`

**Описание**: Логирование сообщений с соответствующими уровнями.

**Параметры**:
Аналогичны параметрам `log`, дополнительные параметры `colors` для настройки цвета.


## Параметры логгера

Класс `Logger` принимает несколько необязательных параметров для настройки поведения логирования:

- **Уровень (Level)**: Определяет критичность логируемых сообщений. Общие значения:
  - `logging.DEBUG`: Подробная информация, полезная для диагностики проблем.
  - `logging.INFO`: Общая информация, например, о успешных операциях.
  - `logging.WARNING`: Предупреждения, которые не требуют немедленного реагирования.
  - `logging.ERROR`: Сообщения об ошибках.
  - `logging.CRITICAL`: Критические ошибки, требующие немедленного вмешательства.

- **Форматтер (Formatter)**: Определяет, как форматируются сообщения лога. По умолчанию используется `'%(asctime)s - %(levelname)s - %(message)s'`. Можно указать пользовательский форматер для разных форматов, например, JSON.

- **Цвет (Color)**: Цвет сообщений в консоли. Цвет задается как кортеж из двух элементов:
  - **Цвет текста (Text color)**: Задает цвет текста (например, `colorama.Fore.RED`).
  - **Цвет фона (Background color)**: Задает цвет фона (например, `colorama.Back.WHITE`).

Цвет можно настраивать для разных уровней логирования (например, зеленый для info, красный для ошибок).


## Настройка файлового логирования (`config`)

Для логирования в файл можно задать пути к файлам в конфигурации.


## Пример использования

#### 1. Инициализация логгера:

```python
logger: Logger = Logger()
config = {'info_log_path': 'logs/info.log', ...}
logger.initialize_loggers(**config)
```

#### 2. Логирование сообщений на разных уровнях:

```python
logger.info('Это информационное сообщение')
...
```

#### 3. Настройка цветов:

```python
logger.info('Это сообщение будет зеленым', colors=(colorama.Fore.GREEN, colorama.Back.BLACK))
```

## Заключение

Модуль предоставляет комплексную и гибкую систему логирования для приложений Python.  Можно настроить консольное и файловое логирование с разными форматами и цветами, управлять уровнями логирования и обрабатывать исключения. Конфигурация для файлового логирования хранится в словаре `config`, что позволяет легко настраивать поведение.