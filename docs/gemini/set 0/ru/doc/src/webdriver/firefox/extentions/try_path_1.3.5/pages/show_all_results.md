# Модуль show_all_results.js

## Обзор

Этот модуль отвечает за отображение результатов поиска, полученных из расширения. Он обрабатывает данные, полученные от расширения, и отображает их в формате таблиц на странице. Модуль предоставляет возможность экспорта данных в текстовом формате, включая как обычный, так и частично преобразованный в JSON. Кроме того, модуль позволяет фокусировать внимание пользователя на конкретных элементах результатов поиска.


## Функции

### `showAllResults`

**Описание**: Функция отображает результаты поиска на странице.

**Параметры**:
- `results` (объект): Объект, содержащий результаты поиска, включая информацию о контексте, основных результатах и дополнительные данные.

**Возвращает**:
-  Не имеет значения.

**Вызывает исключения**:
- `fu.onError`: Функция обработки ошибок.


### `makeTextDownloadUrl`

**Описание**: Функция генерирует URL для скачивания текста.

**Параметры**:
- `text` (строка): Текст для скачивания.

**Возвращает**:
- `строка`: URL для скачивания.


### `makeInfoText`

**Описание**: Функция формирует текст для экспорта, содержащий информацию о результатах в формате, удобном для чтения человеком.

**Параметры**:
- `results` (объект): Объект, содержащий результаты поиска.

**Возвращает**:
- `строка`: Текст для экспорта.


### `makeConvertedInfoText`

**Описание**: Функция формирует текст для экспорта, преобразуя некоторые данные в формате JSON.

**Параметры**:
- `results` (объект): Объект, содержащий результаты поиска.

**Возвращает**:
- `строка`: Текст для экспорта.


## Вспомогательные функции (из tryxpath.functions)

### `updateDetailsTable`

**Описание**: Функция, вероятно, из модуля `tryxpath.functions`, обновляет таблицу с деталями.

**Параметры**:
- `contTbody` (объект): Элемент `tbody` таблицы, в который будут добавлены данные.
- `details` (массив): Массив объектов, содержащих данные для отображения в таблице.
- `options` (объект): Опции для функции, например, `headerValues` и `detailKeys`.


**Возвращает**:
- Обещает `Promise`, который разрешается после успешного обновления таблицы.  В случае ошибки возвращает отклоненную `Promise`.


**Вызывает исключения**:
- Неявно вызывает `fu.onError` при возникновении ошибок в асинхронной операции.


### `onError`

**Описание**: Функция обработки ошибок. Вероятно, из tryxpath.functions.


**Параметры**:
- Не имеет параметров.


**Возвращает**:
- Не имеет значения.

**Примечание**: Подробности этой функции не определены, но по контексту предполагается, что она обрабатывает ошибки, возникающие в `updateDetailsTable`.


### `makeDetailText`

**Описание**: Функция, вероятно, из модуля `tryxpath.functions`, формирует строку, представляющую детали.

**Параметры**:
- `detail` (объект): Объект с данными для детали.
- `keys` (массив): Массив ключей для извлечения данных.
- `separator` (строка): Разделитель для значений.
- `options` (объект): Опции, возможно для трансформации значений.


**Возвращает**:
- `строка`: Отформатированный текст детали.


## Обработка событий

**Описание**: Модуль обрабатывает события загрузки страницы и щелчки по кнопкам в таблице результатов.

**Обработка события load**:
- Запрашивает результаты от расширения.
- Отображает результаты поиска.
- Добавляет ссылки для экспорта в разные форматы.


**Обработка кликов по кнопкам в контексте**:
- Отправляет сообщение в активную вкладку, чтобы фокусироваться на конкретных элементах.


**Обработка кликов по кнопкам в основном блоке**:
- Отправляет сообщение в активную вкладку с указанием индекса элемента для фокусировки.