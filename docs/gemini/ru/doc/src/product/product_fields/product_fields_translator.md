# Модуль product_fields_translator

## Обзор

Модуль `product_fields_translator` отвечает за перевод полей товара на языки клиентской базы данных. Он обрабатывает словарь полей товара, полученный с сайта поставщика, и обновляет идентификаторы языка в соответствии со схемой языков клиента.  Модуль использует данные из таблицы переводов и выполняет вставку новых переводов, если они отсутствуют.

## Функции

### `rearrange_language_keys`

**Описание**: Обновляет идентификатор языка в словаре `presta_fields_dict` на соответствующий идентификатор из схемы клиентских языков при совпадении языка страницы.

**Параметры**:

- `presta_fields_dict` (dict): Словарь полей товара.
- `page_lang` (str): Язык страницы.
- `client_langs_schema` (list | dict): Схема языков клиента.

**Возвращает**:

- dict: Обновленный словарь `presta_fields_dict`.

### `translate_presta_fields_dict`

**Описание**: Переводит мультиязычные поля товара в соответствии со схемой значений `id` языка в базе данных клиента. Функция получает на вход словарь полей, содержит мультиязычные поля в виде словаря, где `language` - список словарей с атрибутами и значением перевода.  Находит соответствующий идентификатор языка в базе данных клиента и обновляет поля с этим идентификатором.

**Параметры**:

- `presta_fields_dict` (dict): Словарь полей товара, полученный с сайта поставщика.
- `client_langs_schema` (list | dict): Схема языков клиента.
- `page_lang` (str, optional): Язык страницы поставщика. По умолчанию `None`.

**Возвращает**:

- dict: Переведенный словарь полей товара.

**Обрабатывает исключения**:

- `Exception`:  Логирует ошибку и предоставляет подробную информацию о возникшей ошибке, включая значения `client_lang` и стека вызовов.


**Примечания**:

- Функция `rearrange_language_keys` выполняет предварительную обработку, изменяя атрибуты `id` внутри словаря полей.
- Функция `translate_presta_fields_dict` взаимодействует с функциями, которые, вероятно, подключаются к базе данных (например, `get_translations_from_presta_translations_table`, `insert_new_translation_to_presta_translations_table`). Их реализация не представлена в данном файле, но предполагается, что они существуют и выполняют необходимые базовые операции с таблицей переводов.
-  Код использует `pprint` для вывода отладочных данных.


##  Обработка исключений

В обоих функциях используется блок `try...except` для обработки возможных исключений во время работы с данными.  Обработка исключений позволяет предотвратить сбой программы и сохранить возможность записи логов о возникших ошибках.