# Модуль `campaign`

## Обзор

Модуль `campaign` предназначен для управления процессом создания и публикации рекламных кампаний на Facebook. Он включает функционал для инициализации параметров кампании (название, язык, валюта), создания структуры директорий, сохранения конфигураций для новой кампании, сбора и сохранения данных о продуктах через `ali` или `html`, генерации рекламных материалов, проверки кампании и публикации ее на Facebook.

## Оглавление

1. [Обзор](#обзор)
2. [Функции](#функции)
    - [`create_campaign_dir`](#create_campaign_dir)
    - [`save_config`](#save_config)
    - [`campaign_init`](#campaign_init)
    - [`collect_products`](#collect_products)
    - [`save_products`](#save_products)
    - [`generate_ads_materials`](#generate_ads_materials)
    - [`check_campaign`](#check_campaign)
    - [`publish_campaign`](#publish_campaign)
    - [`create_campaign`](#create_campaign)

## Функции

### `create_campaign_dir`

**Описание**: Создает директории для новой рекламной кампании и категорий внутри нее.

**Параметры**:
- `campaign_name` (str): Название рекламной кампании.
- `categories` (list[str]): Список категорий товаров для данной кампании.
- `base_dir` (str, optional): Базовая директория для сохранения кампаний. По умолчанию './campaigns'.

**Возвращает**:
- `str`: Путь к созданной директории кампании.

**Вызывает исключения**:
- `OSError`: Если не удается создать директорию или файл.

### `save_config`

**Описание**: Сохраняет конфигурацию рекламной кампании в JSON-файл.

**Параметры**:
- `campaign_config` (dict): Словарь с настройками кампании.
- `campaign_dir` (str): Путь к директории кампании.

**Возвращает**:
- `None`

**Вызывает исключения**:
- `FileNotFoundError`: Если директория не найдена.
- `json.JSONDecodeError`: Если данные не удалось закодировать в JSON.
- `OSError`: Если не удалось сохранить файл.

### `campaign_init`

**Описание**: Инициализирует параметры новой рекламной кампании.

**Параметры**:
- `campaign_name` (str): Название кампании.
- `language` (str): Язык кампании.
- `currency` (str): Валюта кампании.

**Возвращает**:
- `dict`: Словарь с инициализированной конфигурацией кампании.

**Вызывает исключения**:
- `ValueError`: Если `campaign_name`, `language` или `currency` не заданы.

### `collect_products`

**Описание**: Собирает данные о продуктах для рекламной кампании из `ali` или `html`.

**Параметры**:
- `campaign_config` (dict): Словарь с конфигурацией кампании.
- `collector_type` (str): Тип коллектора данных ('ali' или 'html').
- `**kwargs` (dict): Дополнительные аргументы для коллектора.

**Возвращает**:
- `dict`: Словарь с данными о продуктах.
- `None`: Если произошла ошибка в процессе сбора данных.

**Вызывает исключения**:
- `ValueError`: Если `collector_type` не является 'ali' или 'html'.
- `Exception`: Возникают ошибки при работе с API или HTML.

### `save_products`

**Описание**: Сохраняет данные о продуктах в JSON-файл.

**Параметры**:
- `products` (dict): Словарь с данными о продуктах.
- `campaign_dir` (str): Путь к директории кампании.

**Возвращает**:
- `None`

**Вызывает исключения**:
- `FileNotFoundError`: Если директория не найдена.
- `json.JSONDecodeError`: Если данные не удалось закодировать в JSON.
- `OSError`: Если не удалось сохранить файл.

### `generate_ads_materials`

**Описание**: Генерирует рекламные материалы для кампании (пока не реализовано).

**Параметры**:
- `campaign_config` (dict): Словарь с конфигурацией кампании.
- `products` (dict): Словарь с данными о продуктах.
- `campaign_dir` (str): Путь к директории кампании.

**Возвращает**:
- `None`

**Вызывает исключения**:
- `NotImplementedError`: Метод пока не реализован.

### `check_campaign`

**Описание**: Проверяет готовность кампании к публикации (пока не реализовано).

**Параметры**:
- `campaign_config` (dict): Словарь с конфигурацией кампании.
- `campaign_dir` (str): Путь к директории кампании.

**Возвращает**:
- `bool`: `True` если кампания готова, иначе `False`.

**Вызывает исключения**:
- `NotImplementedError`: Метод пока не реализован.

### `publish_campaign`

**Описание**: Публикует рекламную кампанию на Facebook (пока не реализовано).

**Параметры**:
- `campaign_config` (dict): Словарь с конфигурацией кампании.
- `campaign_dir` (str): Путь к директории кампании.

**Возвращает**:
- `None`

**Вызывает исключения**:
- `NotImplementedError`: Метод пока не реализован.

### `create_campaign`

**Описание**: Основная функция для создания и публикации рекламной кампании.

**Параметры**:
- `campaign_name` (str): Название кампании.
- `language` (str): Язык кампании.
- `currency` (str): Валюта кампании.
- `categories` (list[str]): Список категорий товаров.
- `collector_type` (str, optional): Тип коллектора данных ('ali' или 'html'). По умолчанию `ali`.
- `**kwargs` (dict): Дополнительные аргументы для коллектора.

**Возвращает**:
- `None`

**Вызывает исключения**:
- `Exception`: Возникают ошибки при работе с API, HTML или при создании кампании.