```markdown
# parse-entities

[![Build][build-badge]][build]
[![Coverage][coverage-badge]][coverage]
[![Downloads][downloads-badge]][downloads]
[![Size][size-badge]][size]

Parse HTML character references.

## –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ HTML —Å–∏–º–≤–æ–ª—å–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π (—á–∞—Å—Ç–æ –Ω–∞–∑—ã–≤–∞–µ–º—ã—Ö —Å—É—â–Ω–æ—Å—Ç—è–º–∏). –û–Ω–∞ –∫–æ–º–ø–∞–∫—Ç–Ω–∞, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏.

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç—É –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏ —Ä–∞–∑–±–æ—Ä–µ —Å—É—â–Ω–æ—Å—Ç–µ–π.  –û–Ω–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–∞–ª–∞ –∏ –±—ã—Å—Ç—Ä–∞ –¥–ª—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏. –¢–∞–∫–∂–µ –µ—ë –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –ª–∏–Ω—Ç–µ—Ä–æ–≤, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–∏—á–∏–Ω–∞—Ö –∏ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–≠—Ç–æ—Ç –ø–∞–∫–µ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ ESM.
–í Node.js (–≤–µ—Ä—Å–∏–∏ 14.14+ –∏ 16.0+), —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å –ø–æ–º–æ—â—å—é npm:

```bash
npm install parse-entities
```

–í Deno —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `esm.sh`:

```javascript
import {parseEntities} from 'https://esm.sh/parse-entities@3'
```

–í –±—Ä–∞—É–∑–µ—Ä–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `esm.sh`:

```html
<script type="module">
  import {parseEntities} from 'https://esm.sh/parse-entities@3?bundle'
</script>
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```javascript
import {parseEntities} from 'parse-entities'

console.log(parseEntities('alpha &amp; bravo'))
// => alpha & bravo

console.log(parseEntities('charlie &copycat; delta'))
// => charlie ¬©cat; delta

console.log(parseEntities('echo &copy; foxtrot &#8800; golf &#x1D306; hotel'))
// => echo ¬© foxtrot ‚â† golf ùåÜ hotel
```

## API

–≠—Ç–æ—Ç –ø–∞–∫–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä `parseEntities`.  –ù–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

### `parseEntities(value[, options])`

–†–∞–∑–±–∏—Ä–∞–µ—Ç HTML —Å–∏–º–≤–æ–ª—å–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏.

#### –ü–∞—Ä–∞–º–µ—Ç—Ä `options`

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ).

##### `options.additional`

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ (`string?`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `''`).
–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ —Å–∏–º–≤–æ–ª—ã –ø–æ—Å–ª–µ –∞–º–ø–µ—Ä—Å–∞–Ω–¥–∞ –±–µ–∑ –æ—à–∏–±–æ–∫.

##### `options.attribute`

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å `value` –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞ (`boolean?`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `false`).
–≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –Ω–µ–º–Ω–æ–≥–æ –¥—Ä—É–≥–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é.

##### `options.nonTerminated`

–†–∞–∑—Ä–µ—à–∞—Ç—å –Ω–µ–ø–æ–ª–Ω—ã–µ —Å—Å—ã–ª–∫–∏ (`boolean`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `true`).
–ù–∞–ø—Ä–∏–º–µ—Ä, `&copycat` –¥–ª—è `¬©cat`.
–≠—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏, –Ω–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º.

##### `options.position`

–ù–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è `value` (`Position` –∏–ª–∏ `Point`, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ).
–ü–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –≤ –Ω–µ–∫—É—é —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É.
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:

```javascript
{line: 1, column: 1, offset: 0}
```

##### `options.warning`

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ (`Function?`).

##### `options.text`

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–∞ (`Function?`).

##### `options.reference`

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫ (`Function?`).

##### `options.warningContext`

–ö–æ–Ω—Ç–µ–∫—Å—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `warning` (`'*'`, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ).

##### `options.textContext`

–ö–æ–Ω—Ç–µ–∫—Å—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `text` (`'*'`, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ).

##### `options.referenceContext`

–ö–æ–Ω—Ç–µ–∫—Å—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `reference` (`'*'`, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ).

#### –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç

`string` ‚Äî –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ `value`.

#### `warning(reason, point, code)`

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫.

##### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

*   `this` (`*`) ‚Äî —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ `warningContext`, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω –≤ `parseEntities`
*   `reason` (`string`) ‚Äî —á–∏—Ç–∞–µ–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
*   `point` (`Point`) ‚Äî –º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏
*   `code` (`number`) ‚Äî –º–∞—à–∏–Ω–Ω–æ-—á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥ –æ—à–∏–±–∫–∏

–°–ø–∏—Å–æ–∫ –∫–æ–¥–æ–≤ –æ—à–∏–±–æ–∫:

| –ö–æ–¥ | –ü—Ä–∏–º–µ—Ä             | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ                                     |
|----|---------------------|-------------------------------------------------|
| `1` | `foo &amp bar`     | –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª ¬´;¬ª (–∏–º—è)                     |
| `2` | `foo &#123 bar`    | –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª ¬´;¬ª (—á–∏—Å–ª–æ–≤–æ–π)                   |
| `3` | `Foo &bar baz`     | –ü—É—Å—Ç–æ–µ (–∏–º—è)                                 |
| `4` | `Foo &#`           | –ü—É—Å—Ç–æ–µ (—á–∏—Å–ª–æ–≤–æ–π)                               |
| `5` | `Foo &bar; baz`    | –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π (–∏–º—è)                               |
| `6` | `Foo &#128; baz`   | [–ó–∞–ø—Ä–µ—â–µ–Ω–Ω–∞—è —Å—Å—ã–ª–∫–∞][invalid]               |
| `7` | `Foo &#xD800; baz` | –ó–∞–ø—Ä–µ—â–µ–Ω–æ: –≤–Ω–µ –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –Æ–Ω–∏–∫–æ–¥–∞ |

#### text(value, position)

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–∞.


#### reference(value, position, source)

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫.


## –¢–∏–ø—ã

–ü–∞–∫–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –ø–æ–º–æ—â—å—é TypeScript.
–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∏–ø—ã `Options`, `WarningHandler`, `ReferenceHandler`, –∏ `TextHandler`.

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–ü–∞–∫–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º —Å–æ –≤—Å–µ–º–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ Node.js.
–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —ç—Ç–æ Node.js 14.14+ –∏ 16.0+.
–¢–∞–∫–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Deno –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö.

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–ü–∞–∫–µ—Ç –±–µ–∑–æ–ø–∞—Å–µ–Ω: –æ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ HTML –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ —Å–∏–º–≤–æ–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫.

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã

*   [`wooorm/stringify-entities`](https://github.com/wooorm/stringify-entities) ‚Äî –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ HTML —Å–∏–º–≤–æ–ª—å–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
*   [`wooorm/character-entities`](https://github.com/wooorm/character-entities) ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏–º–≤–æ–ª—å–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç—è—Ö
*   [`wooorm/character-entities-html4`](https://github.com/wooorm/character-entities-html4) ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏–º–≤–æ–ª—å–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç—è—Ö HTML4
*   [`wooorm/character-entities-legacy`](https://github.com/wooorm/character-entities-legacy) ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞—Å–ª–µ–¥—É–µ–º—ã—Ö —Å–∏–º–≤–æ–ª—å–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç—è—Ö
*   [`wooorm/character-reference-invalid`](https://github.com/wooorm/character-reference-invalid) ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —á–∏—Å–ª–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª—å–Ω—ã—Ö —Å—Å—ã–ª–∫–∞—Ö

## –í–∫–ª–∞–¥

–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!
–°–º. [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≤–Ω–µ—Å–µ–Ω–∏—é –≤–∫–ª–∞–¥–∞ –≤ –æ—Ç–∫—Ä—ã—Ç—ã–π –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥][contribute].

## –õ–∏—Ü–µ–Ω–∑–∏—è

[MIT][license] ¬© [Titus Wormer][author]

<!-- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è -->

[build-badge]: https://github.com/wooorm/parse-entities/workflows/main/badge.svg
[build]: https://github.com/wooorm/parse-entities/actions
[coverage-badge]: https://img.shields.io/codecov/c/github/wooorm/parse-entities.svg
[coverage]: https://codecov.io/github/wooorm/parse-entities
[downloads-badge]: https://img.shields.io/npm/dm/parse-entities.svg
[downloads]: https://www.npmjs.com/package/parse-entities
[size-badge]: https://img.shields.io/bundlephobia/minzip/parse-entities.svg
[size]: https://bundlephobia.com/result?p=parse-entities
[license]: license
[author]: https://wooorm.com
[contribute]: https://opensource.guide/how-to-contribute/
[invalid]: https://github.com/wooorm/character-reference-invalid
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

* **–Ø–∑—ã–∫:**  –ü–µ—Ä–µ–≤–æ–¥ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫.
* **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**  –ò–∑–º–µ–Ω–µ–Ω—ã –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω —Ç–µ–∫—Å—Ç –¥–ª—è –ª—É—á—à–µ–≥–æ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è.
* **–¢–æ—á–Ω–æ—Å—Ç—å:**  –î–æ–±–∞–≤–ª–µ–Ω–∞ –±–æ–ª–µ–µ —Ç–æ—á–Ω–∞—è –∏ –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö.
* **–ü—Ä–∏–º–µ—Ä—ã:**  –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è.
* **–¢–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è:**  –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –∏ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Ä—É—Å—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, "—Å–∏–º–≤–æ–ª—å–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏", "–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫").


–≠—Ç–æ—Ç —É–ª—É—á—à–µ–Ω–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ –¥–µ–ª–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –±–æ–ª–µ–µ –¥–æ—Å—Ç—É–ø–Ω–æ–π –∏ –ø–æ–Ω—è—Ç–Ω–æ–π –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ–≤–æ—Ä—è—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.  –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å—Å—ã–ª–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ—Å—Ç–∞–ª–∏—Å—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∏—Å—Ö–æ–¥–Ω—ã–º –¥–æ–∫—É–º–µ–Ω—Ç–∞–º.