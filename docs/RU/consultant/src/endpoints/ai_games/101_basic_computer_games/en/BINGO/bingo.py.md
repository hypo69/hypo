# Анализ кода модуля bingo.py

**Качество кода**
9
-  Плюсы
    - Код хорошо структурирован и разбит на логические функции.
    -  Присутствует подробное описание модуля, функций и алгоритма игры в виде docstring и комментариев.
    -  Используются meaningful имена переменных и функций.
    -  Логика игры реализована корректно, включая генерацию карточки, отметку чисел и проверку на выигрыш.
    -  Код легко читается и понимается.

-  Минусы
    - Отсутствует обработка возможных ошибок.
    - Не используется логирование.
    - Используется стандартный `random.randint`, который может генерировать повторения, хотя и предпринята попытка это исправить, более правильным решением было бы использвать `random.sample`

**Рекомендации по улучшению**

1. **Добавить обработку ошибок:**
   -   В функции `play_bingo` добавить обработку исключений с использованием `try-except` и `logger.error` для ситуаций, когда могут возникнуть непредвиденные ошибки.
2.  **Использовать логгирование:**
   -   Добавить логирование для отслеживания процесса игры, вывода чисел и действий пользователя.
3. **Избегать повторений в генерации случайных чисел:**
   -  Вместо использования цикла с `random.randint` для генерации неповторяющихся чисел,  использовать `random.sample` для генерации уникального набора чисел.
4. **Переработать комментарии в формате reStructuredText (RST)**
  -   Привести все docstring и комментарии к формату RST.
5. **Улучшить форматирование кода:**
   -  Применить более читаемое форматирование карточки Бинго.
6. **Добавить описание к переменным**
    - Описать переменные в функциях.
7. **Добавить пустые строки для лучшей читаемости**
    - Добавить пустые строки в коде между логическими блоками для лучшей читаемости.

**Оптимизированный код**
```python
"""
Модуль для игры в Бинго.
=========================

Этот модуль реализует упрощенную версию игры в Бинго, где генерируется карточка 5x5
со случайными числами от 1 до 75 (исключая числа, кратные 10). Игрок поочередно получает
случайные числа, и, если число есть на карточке, оно отмечается. Игра заканчивается,
когда все числа на карточке отмечены.

Пример использования
--------------------

.. code-block:: python

   if __name__ == "__main__":
        play_bingo()

"""
import random
from src.logger.logger import logger # Подключаем logger для логирования

def create_bingo_card() -> list[list[int]]:
    """
    Создает и возвращает карточку бинго 5x5.

    Карточка содержит уникальные случайные числа от 1 до 75, исключая числа, кратные 10.

    :return: Карточка бинго в виде списка списков.
    :rtype: list[list[int]]
    """
    card = [] #  Инициализирует пустой список `card`, который будет представлять собой матрицу 5x5 (карточку бинго)
    numbers = [i for i in range(1, 76) if i % 10 != 0]  # Создаем список чисел от 1 до 75, не кратных 10
    random.shuffle(numbers)  # Перемешиваем список

    # Заполняем карточку числами из перемешанного списка
    for i in range(5):
        row = [] #  Инициализирует пустой список для хранения строки карточки
        for j in range(5):
            row.append(numbers.pop()) # Извлекает последнее число из списка `numbers` и добавляет его в текущую строку карточки
        card.append(row) # Добавляет сформированную строку в карточку
    return card


def print_bingo_card(card: list[list[int]]) -> None:
    """
    Выводит карточку бинго в консоль.

    :param card: Карточка бинго для вывода.
    :type card: list[list[int]]
    """
    for row in card: # Перебирает все строки карточки
        print(" ".join(str(x).rjust(2) for x in row)) # Выводит текущую строку.
    print()


def mark_number(card: list[list[int]], number: int) -> None:
    """
    Отмечает число на карточке бинго, заменяя его на 0.

    :param card: Карточка бинго.
    :type card: list[list[int]]
    :param number: Число для отметки.
    :type number: int
    """
    for i in range(len(card)): # Перебирает все ячейки карточки
        for j in range(len(card[i])):
            if card[i][j] == number: # Проверяет, равно ли текущее число искомому
                card[i][j] = 0 # Если число найдено, оно заменяется на 0
                return


def is_bingo(card: list[list[int]]) -> bool:
    """
    Проверяет, все ли числа на карточке бинго отмечены (заменены на 0).

    :param card: Карточка бинго для проверки.
    :type card: list[list[int]]
    :return: True, если все числа отмечены, иначе False.
    :rtype: bool
    """
    for row in card: # Перебирает все строки карточки
        for num in row: # Перебирает все числа в текущей строке
            if num != 0: # Если найдено неотмеченное число (не равное 0), возвращает False
                return False
    return True # Если все числа отмечены, возвращает True


def play_bingo() -> None:
    """
    Запускает игру "Бинго".

    Создает карточку бинго, выводит ее на экран, и просит пользователя вводить числа.
    Игра заканчивается, когда все числа на карточке отмечены.
    """
    try:
        bingo_card = create_bingo_card()  # Создаем игровую карточку
        print("Ваша карточка BINGO:")
        print_bingo_card(bingo_card)  # Выводим карточку на экран

        called_numbers = set()  # Набор для отслеживания уже названных чисел
        all_numbers = [i for i in range(1, 76)] # Список всех возможных чисел
        while not is_bingo(bingo_card):  # Игровой цикл
            number = random.choice(list(set(all_numbers) - called_numbers)) # Генерируем новое случайное число из списка еще не вызванных
            called_numbers.add(number) # Записываем номер в уже вызванные

            print(f"Выпало число: {number}")
            mark_number(bingo_card, number) # Отмечаем число на карточке
            print_bingo_card(bingo_card) # Выводим карточку на экран
        print("BINGO!")

    except Exception as e: # Ловим возможные исключения
        logger.error(f"Произошла ошибка в игре Бинго: {e}", exc_info=True) # Логируем ошибку


if __name__ == "__main__":
    play_bingo()
```