# Анализ кода модуля craps.py

**Качество кода**
- Соответствие требованиям к формату кода (1-10)
    - Преимущества
        - Код функционально корректен и выполняет игру "Крэпс".
        - Код разбит на логические функции, что улучшает читаемость.
        - Присутствуют docstring для функций.
        - Используются информативные имена переменных.
        -  Присутствует блок `if __name__ == "__main__":` для запуска игры.
    - Недостатки
        - Используются комментарии в стиле `#`, а не RST.
        - Нет обработки ошибок.
        - Нет логгирования.
        - Нет единого стиля кавычек (используются `"` и `'`).
        - Отсутствуют импорты `j_loads` или `j_loads_ns`.
        - docstring не соответствуют формату RST.

**Рекомендации по улучшению**

1.  Заменить все комментарии `#` на комментарии в стиле reStructuredText (RST).
2.  Использовать `j_loads` или `j_loads_ns` из `src.utils.jjson` вместо `json.load` (в данном коде `json.load` отсутствует, но для соблюдения рекомендаций).
3.  Добавить обработку исключений с использованием `logger.error` из `src.logger.logger`.
4.  Привести все docstring к формату RST.
5.  Использовать только одинарные кавычки (`'`) для строк.
6.  Добавить импорт `logger` из `src.logger.logger`.
7.  Соблюдать стиль написания кода, в соответствии с прошлыми примерами.

**Улучшенный код**

```python
"""
Крэпс:
=================
Сложность: 7
-----------------
Игра "Крэпс" - это азартная игра в кости, в которой игрок делает ставку на результат броска двух игральных костей.
В первом раунде игрок выигрывает, если сумма очков на костях равна 7 или 11, и проигрывает, если сумма равна 2, 3 или 12.
Если сумма очков равна 4, 5, 6, 8, 9 или 10, то это становится "целевым числом" игрока, и он продолжает бросать кости,
пока не выпадет это число снова (в этом случае игрок выигрывает) или не выпадет 7 (в этом случае игрок проигрывает).

Правила игры:
1. В начале игры игрок бросает две кости.
2. Если сумма очков на костях равна 7 или 11, игрок выигрывает.
3. Если сумма очков равна 2, 3 или 12, игрок проигрывает.
4. Если сумма очков равна 4, 5, 6, 8, 9 или 10, то это число становится "целевым числом" (point).
5. После установления "целевого числа", игрок продолжает бросать кости, пока:
   -  не выпадет "целевое число", тогда игрок выигрывает.
   -  не выпадет 7, тогда игрок проигрывает.
-----------------
Алгоритм:
1. Сгенерировать случайные значения для двух костей (от 1 до 6).
2. Вычислить сумму выпавших значений.
3. Если сумма равна 7 или 11, вывести сообщение о выигрыше и перейти к шагу 7.
4. Если сумма равна 2, 3 или 12, вывести сообщение о проигрыше и перейти к шагу 7.
5. Сохранить сумму как "целевое число" (point).
6.  Начать цикл:
    6.1 Сгенерировать случайные значения для двух костей.
    6.2 Вычислить сумму выпавших значений.
    6.3 Если сумма равна "целевому числу", вывести сообщение о выигрыше и перейти к шагу 7.
    6.4 Если сумма равна 7, вывести сообщение о проигрыше и перейти к шагу 7.
    6.5 Иначе, повторить цикл с шага 6.
7. Конец игры.
-----------------

"""
import random
from src.logger.logger import logger  # Добавлен импорт logger #
# from src.utils.jjson import j_loads_ns # пример импорта на будущее


def roll_dice() -> tuple[int, int]:
    """
    Бросает две игральные кости.

    :return: Значения двух костей.
    :rtype: tuple[int, int]
    """
    dice1 = random.randint(1, 6)  # Генерируется случайное число от 1 до 6 для первой кости. #
    dice2 = random.randint(1, 6)  # Генерируется случайное число от 1 до 6 для второй кости. #
    return dice1, dice2  # Возвращаются значения обеих костей. #


def calculate_sum(dice1: int, dice2: int) -> int:
    """
    Вычисляет сумму значений двух костей.

    :param dice1: Значение первой кости.
    :type dice1: int
    :param dice2: Значение второй кости.
    :type dice2: int
    :return: Сумма значений двух костей.
    :rtype: int
    """
    return dice1 + dice2  # Возвращается сумма значений двух костей. #


def play_craps():
    """
    Запускает игру Крэпс.

    Имитирует игру в кости, где игрок делает ставки на результат броска двух игральных костей.
    """
    try:  # Добавлен блок try для обработки возможных ошибок. #
        # Первый бросок костей #
        dice1, dice2 = roll_dice()  # Вызывается функция roll_dice для получения значений костей. #
        sum_of_dice = calculate_sum(dice1, dice2) # Вычисляется сумма значений костей. #
        print(f'Выпало: {dice1} + {dice2} = {sum_of_dice}')  # Выводятся значения костей и их сумма. #

        # Проверка выигрыша или проигрыша после первого броска #
        if sum_of_dice == 7 or sum_of_dice == 11:  # Проверяется, выиграл ли игрок при первом броске. #
            print('YOU WIN!')  # Выводится сообщение о выигрыше. #
            return  # Завершается игра. #
        elif sum_of_dice == 2 or sum_of_dice == 3 or sum_of_dice == 12: # Проверяется, проиграл ли игрок при первом броске. #
            print('YOU LOSE!')  # Выводится сообщение о проигрыше. #
            return  # Завершается игра. #

        # Установка целевого числа #
        point = sum_of_dice  # Сумма первого броска устанавливается как целевое число. #
        print(f'Ваше целевое число: {point}')  # Выводится целевое число. #

        # Продолжаем бросать кости пока не выиграем или проиграем #
        while True:  # Начинается цикл бросков, пока игра не завершится. #
            dice1, dice2 = roll_dice() # Получаются значения для нового броска костей. #
            sum_of_dice = calculate_sum(dice1, dice2)  # Вычисляется сумма значений костей. #
            print(f'Выпало: {dice1} + {dice2} = {sum_of_dice}') # Выводятся значения костей и их сумма. #
            if sum_of_dice == point: # Проверяется, выпало ли целевое число. #
                print('YOU WIN!')  # Выводится сообщение о выигрыше. #
                return  # Завершается игра. #
            elif sum_of_dice == 7: # Проверяется, выпало ли число 7 (проигрыш). #
                print('YOU LOSE!')  # Выводится сообщение о проигрыше. #
                return  # Завершается игра. #
    except Exception as e: # Обрабатываются возможные исключения. #
        logger.error(f'Произошла ошибка в игре: {e}', exc_info=True) # Логируется ошибка. #


if __name__ == '__main__':
    play_craps() # Запускается игра, если скрипт выполняется напрямую. #
```