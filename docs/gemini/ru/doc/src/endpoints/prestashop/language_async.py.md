# Модуль для асинхронного управления языками в PrestaShop

## Обзор

Модуль `language_async.py` предназначен для асинхронного взаимодействия с API PrestaShop с целью управления языками, используемыми в интернет-магазине. Он предоставляет функциональность для получения информации о языках, их добавления, удаления и обновления.

## Подробнее

Этот модуль предоставляет асинхронный класс `PrestaLanguageAync`, который расширяет возможности класса `PrestaShopAsync` (из модуля `src.endpoints.prestashop.api`). Это позволяет выполнять запросы к API PrestaShop асинхронно, что повышает производительность при работе с большим количеством языков. Важно помнить, что каждый магазин PrestaShop может иметь свою собственную нумерацию языков.

## Классы

### `PrestaLanguageAync`

**Описание**: Класс `PrestaLanguageAync` предназначен для управления языками в PrestaShop. Он предоставляет методы для получения информации о языках по их индексу и получения схемы языков.

**Наследует**:
- `PrestaShopAsync`: Обеспечивает асинхронное взаимодействие с API PrestaShop.

**Атрибуты**:
- Отсутствуют явно определенные атрибуты, но используются атрибуты, унаследованные от `PrestaShopAsync`, такие как параметры для подключения к API PrestaShop.

**Методы**:
- `get_lang_name_by_index(lang_index: int | str) -> str`: Возвращает ISO-код языка по его индексу в таблице PrestaShop.
- `get_languages_schema() -> dict`: Возвращает схему языков.

#### `get_lang_name_by_index`

```python
    async def get_lang_name_by_index(self, lang_index:int|str ) -> str:
        """Возвращает имя языка ISO по его индексу в таблице Prestashop"""
        ...
```

**Назначение**: Получение ISO-кода языка по его индексу в таблице PrestaShop.

**Параметры**:
- `lang_index` (int | str): Индекс языка в таблице PrestaShop.

**Возвращает**:
- `str`: ISO-код языка или пустую строку в случае ошибки.

**Вызывает исключения**:
- `Exception`: Логируется в случае возникновения ошибки при получении языка по индексу.

**Как работает функция**:
1. Функция пытается получить имя языка, используя метод `get` родительского класса `PrestaShopAsync`.
2. Если возникает исключение, оно логируется, и возвращается пустая строка.

```
Ищем язык по индексу
│
├───> Вызываем метод get родительского класса PrestaShopAsync
│     │
│     └───> Успешно: Возвращаем ISO-код языка
│     │
│     └───> Ошибка: Логируем ошибку
│           │
│           └───> Возвращаем пустую строку
│
Конец
```

**Примеры**:

```python
# Пример получения ISO-кода языка по индексу
lang_class = PrestaLanguageAync()
lang_name = await lang_class.get_lang_name_by_index(1)
print(lang_name)
```

#### `get_languages_schema`

```python
    async def get_languages_schema(self) -> dict:
        """ """
        lang_dict = super().get_languages_schema()
        print(lang_dict)
```

**Назначение**: Получение схемы языков.

**Параметры**:
- Отсутствуют.

**Возвращает**:
- `dict`: Схема языков.

**Как работает функция**:
1. Функция вызывает метод `get_languages_schema` родительского класса `PrestaShopAsync`.
2. Возвращает полученную схему языков.

```
Получение схемы языков
│
├───> Вызываем метод get_languages_schema родительского класса PrestaShopAsync
│     │
│     └───> Возвращаем схему языков
│
Конец
```

**Примеры**:

```python
# Пример получения схемы языков
lang_class = PrestaLanguageAync()
languages_schema = await lang_class.get_languages_schema()
print(languages_schema)
```

## Функции

### `main`

```python
async def main():
    """"""
    ...
    lang_class = PrestaLanguageAync()
    languagas_schema = await  lang_class.get_languages_schema()
    print(languagas_schema)
```

**Назначение**: Асинхронная функция, демонстрирующая пример использования класса `PrestaLanguageAync` для получения схемы языков.

**Параметры**:
- Отсутствуют.

**Возвращает**:
- Отсутствует.

**Как работает функция**:
1. Создается экземпляр класса `PrestaLanguageAync`.
2. Вызывается метод `get_languages_schema` для получения схемы языков.
3. Полученная схема языков выводится в консоль.

```
Инициализация и получение схемы языков
│
├───> Создаем экземпляр класса PrestaLanguageAync
│     │
│     └───> Вызываем метод get_languages_schema
│           │
│           └───> Печатаем схему языков
│
Конец
```

**Примеры**:

```python
# Пример вызова функции main
asyncio.run(main())