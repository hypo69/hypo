# Модуль hypotez/src/ai/openai/bully.py

## Обзор

Данный модуль предоставляет функцию `bully`, которая использует API OpenAI для генерации текста, имитирующего поведение задиры. Функция принимает пользовательское сообщение и список сообщений в качестве аргументов и возвращает список сообщений, включая ответ модели OpenAI.

## Функции

### `bully`

**Описание**: Функция генерирует ответ, имитирующий поведение задиры, используя API OpenAI.

**Параметры**:

- `user_message` (str): Пользовательское сообщение. По умолчанию "Hello!".
- `messages` (list): Список сообщений, в том числе системный запрос. По умолчанию список, содержащий системный запрос. Каждый элемент списка должен быть словарем с ключами "system" или "role" и "content".

**Возвращает**:

- list: Список сообщений, включая ответ модели OpenAI.

**Вызывает исключения**:

- `Exception`: Возникает в случае ошибки при взаимодействии с API OpenAI.


## Константы

### `MODE`

**Описание**: Строковая переменная, определяющая режим работы (например, 'dev' для разработки, 'prod' для производства).

**Значение**: 'dev'


```
```python
def bully(user_message="Hello!", messages=[{"system": "user", "content": system_prompt}]):
	"""
	Args:
		user_message (str): Пользовательское сообщение. По умолчанию "Hello!".
		messages (list): Список сообщений, в том числе системный запрос. По умолчанию список, содержащий системный запрос. Каждый элемент списка должен быть словарем с ключами "system" или "role" и "content".

	Returns:
		list: Список сообщений, включая ответ модели OpenAI.

	Raises:
		Exception: Возникает в случае ошибки при взаимодействии с API OpenAI.
	"""
	messages.append({"role": "user", "content": user_message})
	completion = openai.ChatCompletion.create(
		model="gpt-3.5-turbo",
		messages=messages
	)
	
	messages.append({"role": "user", "content": completion.choices[0].message})
	return messages
```


## Замечания

- Необходимо установить библиотеку `openai`.
- В коде присутствует строка `openai.API_KEY = "YOUR_API_KEYS_OPENAI"`.  Перед использованием замените `"YOUR_API_KEYS_OPENAI"` на ваш собственный ключ API OpenAI.
- Системный запрос `system_prompt` задаёт контекст для модели, требуя от неё генерировать примеры запугивания в определённом формате.


```