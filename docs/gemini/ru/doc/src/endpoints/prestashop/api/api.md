# Модуль `hypotez/src/endpoints/prestashop/api/api.py`

## Обзор

Этот модуль предоставляет класс `PrestaShop`, позволяющий взаимодействовать с веб-сервисом PrestaShop API.  Он поддерживает операции CRUD, поиск и загрузку изображений, используя JSON и XML для обмена данными. Модуль включает обработку ошибок ответов API и методы для работы с полученными данными.

## Перечисления

### `Format`

**Описание**: Перечисление `Format` определяет типы данных, возвращаемых API (JSON или XML).

**Элементы**:
- `JSON`: Тип данных JSON.
- `XML`: Тип данных XML.


## Классы

### `PrestaShop`

**Описание**: Класс `PrestaShop` предназначен для взаимодействия с веб-сервисом PrestaShop API.  Он обеспечивает методы для выполнения операций CRUD, поиска и загрузки изображений.


**Атрибуты**:
- `client`: Объект `Session` для работы с HTTP-запросами.
- `debug`: Флаг, определяющий режим отладки (по умолчанию `True`).
- `language`: ID языка по умолчанию.
- `data_format`: Формат данных по умолчанию ('JSON' или 'XML').
- `ps_version`: Версия PrestaShop API.


**Методы**:

#### `__init__`

**Описание**: Инициализирует объект `PrestaShop`.

**Параметры**:
- `data_format` (str, опционально): Формат данных. По умолчанию 'JSON'.
- `default_lang` (int, опционально): ID языка по умолчанию. По умолчанию 1.
- `debug` (bool, опционально): Режим отладки. По умолчанию `True`.

**Возвращает**:
- `None`


#### `ping`

**Описание**: Проверяет работоспособность веб-сервиса.

**Возвращает**:
- `bool`: `True`, если веб-сервис работает, иначе `False`.


#### `_check_response`

**Описание**: Проверяет код ответа и обрабатывает ошибки.

**Параметры**:
- `status_code` (int): Код ответа HTTP.
- `response` (requests.Response): Объект ответа HTTP.
- `method` (str, опционально): HTTP-метод.
- `url` (str, опционально): URL запроса.
- `headers` (dict, опционально): Заголовки запроса.
- `data` (dict, опционально): Данные запроса.

**Возвращает**:
- `bool`: `True`, если код ответа 200 или 201, иначе `False`.


#### `_parse_response_error`

**Описание**: Парсит ошибку ответа от PrestaShop API.

**Параметры**:
- `response` (requests.Response): Объект ответа HTTP.


#### `_prepare`

**Описание**: Подготавливает URL для запроса.

**Параметры**:
- `url` (str): Базовый URL.
- `params` (dict): Параметры запроса.

**Возвращает**:
- str: Подготовленный URL с параметрами.


#### `_exec`

**Описание**: Выполняет HTTP-запрос к API PrestaShop.

**Параметры**:
- `resource` (str): Ресурс API (например, 'products', 'categories').
- `resource_id` (int | str, опционально): ID ресурса.
- `resource_ids` (int | tuple, опционально): ID нескольких ресурсов.
- `method` (str, опционально): HTTP-метод (GET, POST, PUT, DELETE).
- `data` (dict, опционально): Данные для отправки.
- `headers` (dict, опционально): Дополнительные заголовки.
- `search_filter` (str | dict, опционально): Фильтр для запроса.
- `display` (str | list, опционально): Поля для отображения в ответе.
- `schema` (str | None, опционально): Схема данных.
- `sort` (str, опционально): Параметр сортировки.
- `limit` (str, опционально): Ограничение результатов.
- `language` (int, опционально): ID языка.
- `io_format` (str, опционально): Формат данных ('JSON' или 'XML').

**Возвращает**:
- `dict | None`: Ответ от API или `False` при ошибке.


#### `_parse`

**Описание**: Парсит XML или JSON ответ от API.

**Параметры**:
- `text` (str): Текст ответа.

**Возвращает**:
- `dict | ElementTree.Element | bool`: Разложенные данные или `False` при ошибке.


#### `create`

**Описание**: Создаёт новый ресурс в API PrestaShop.

**Параметры**:
- `resource` (str): Ресурс API.
- `data` (dict): Данные для создания.

**Возвращает**:
- `dict`: Ответ от API.


#### `read`

**Описание**: Читает ресурс из API PrestaShop.

**Параметры**:
- `resource` (str): Ресурс API.
- `resource_id` (int | str): ID ресурса.

**Возвращает**:
- `dict`: Ответ от API.


#### `write`

**Описание**: Обновляет существующий ресурс в API PrestaShop.

**Параметры**:
- `resource` (str): Ресурс API.
- `data` (dict): Данные для обновления.

**Возвращает**:
- `dict`: Ответ от API.


#### `unlink`

**Описание**: Удаляет ресурс из API PrestaShop.

**Параметры**:
- `resource` (str): Ресурс API.
- `resource_id` (int | str): ID ресурса.

**Возвращает**:
- `bool`: `True` при успехе, `False` при ошибке.


#### `search`

**Описание**: Ищет ресурсы в API PrestaShop.

**Параметры**:
- `resource` (str): Ресурс API.
- `filter` (str | dict, опционально): Фильтр поиска.

**Возвращает**:
- `List[dict]`: Список ресурсов, соответствующих критериям поиска.


#### `create_binary`

**Описание**: Загружает бинарный файл в ресурс API PrestaShop.

**Параметры**:
- `resource` (str): Ресурс API.
- `file_path` (str): Путь к файлу.
- `file_name` (str): Имя файла.

**Возвращает**:
- `dict`: Ответ от API.


#### `_save`

**Описание**: Сохраняет данные в файл.

**Параметры**:
- `file_name` (str): Имя файла.
- `data` (dict): Данные для сохранения.


#### `get_data`

**Описание**: Получает данные из ресурса API PrestaShop и сохраняет их.

**Параметры**:
- `resource` (str): Ресурс API.
- `**kwargs`: Дополнительные аргументы для запроса API.


**Возвращает**:
- `dict | None`: Данные из API или `False` при ошибке.


#### `remove_file`

**Описание**: Удаляет файл из файловой системы.

**Параметры**:
- `file_path` (str): Путь к файлу.


#### `get_apis`

**Описание**: Получает список всех доступных API.

**Возвращает**:
- `dict`: Список доступных API.


#### `get_languages_schema`

**Описание**: Получает схему данных для языков.

**Возвращает**:
- `dict`: Схема языков или `None` при ошибке.


#### `upload_image_async`

**Описание**: Асинхронная загрузка изображения в API PrestaShop.

#### `upload_image`

**Описание**: Загрузка изображения в API PrestaShop.

#### `get_product_images`

**Описание**: Получает изображения для продукта.


## Функции

(Список функций в этом модуле отсутствует)