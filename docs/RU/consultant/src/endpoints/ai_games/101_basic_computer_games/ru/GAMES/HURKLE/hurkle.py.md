# Анализ кода модуля hurkle.py

**Качество кода**
8
- Плюсы
    - Код игры HURKLE достаточно хорошо структурирован и понятен.
    - Используются функции для разделения логики, что делает код более читаемым.
    - Присутствуют подробные комментарии, объясняющие назначение блоков кода.
    - Есть блок-схема, визуализирующая алгоритм игры.
- Минусы
    - Отсутствуют docstring для модуля и функций, что затрудняет автоматическую генерацию документации.
    - Нет обработки ошибок ввода координат, кроме ValueError, например, если координаты выходят за допустимый диапазон (1-10).
    - Не используется логирование ошибок.

**Рекомендации по улучшению**
1. **Добавить docstring**: Необходимо добавить docstring для модуля и функции `get_direction` в формате reStructuredText (RST).
2. **Логирование ошибок**: Использовать `from src.logger.logger import logger` для логирования ошибок, особенно в блоке `try-except`.
3. **Проверка ввода**: Добавить проверку, чтобы координаты `user_x` и `user_y` находились в диапазоне от 1 до 10, и выводить соответствующее сообщение об ошибке в случае невалидного ввода.
4. **Улучшить читаемость**: Использовать более информативные имена переменных и констант, где это уместно.

**Оптимизированный код**
```python
"""
Модуль для игры HURKLE.
=========================================================================================

Игра "HURKLE" - это игра в угадывание местоположения "HURKLE", который скрыт на карте 10x10.
Игрок делает ходы, вводя координаты, и получает подсказки о том, где находится HURKLE относительно его предположений.
Цель игры - найти HURKLE за минимальное количество ходов.

Правила игры:
1. HURKLE прячется на карте 10x10. Координаты HURKLE выбираются случайно.
2. Игрок делает ходы, вводя координаты x и y.
3. После каждого хода игрок получает подсказку, указывающую направление (север, юг, восток, запад, северо-восток, юго-восток, северо-запад, юго-запад)
   от введенной игроком координаты до местоположения HURKLE.
4. Игра продолжается до тех пор, пока игрок не угадает местоположение HURKLE.

Алгоритм:
1.  Сгенерировать случайные координаты HURKLE (X и Y) в диапазоне от 1 до 10.
2.  Установить количество ходов равным 0.
3.  Начать игровой цикл:
    3.1. Увеличить счетчик ходов на 1.
    3.2. Запросить у игрока ввод координат X и Y.
    3.3. Если введенные координаты равны координатам HURKLE, вывести сообщение о победе и количестве ходов. Завершить игру.
    3.4. Иначе, определить направление от введенных координат до координат HURKLE и вывести подсказку (направление).
4. Повторять игровой цикл, пока HURKLE не будет найден.

Блок-схема:
```mermaid
flowchart TD
    Start["Начало"] --> InitializeVariables["<p align='left'>Инициализация переменных:\n    <code><b>\n    hurkleX = random(1, 10)\n    hurkleY = random(1, 10)\n    numberOfGuesses = 0\n    </b></code></p>"]
    InitializeVariables --> LoopStart{"Начало цикла: пока HURKLE не найден"}
    LoopStart -- Да --> IncreaseGuesses["<code><b>numberOfGuesses = numberOfGuesses + 1</b></code>"]
    IncreaseGuesses --> InputCoordinates["Ввод координат пользователем: <code><b>userX, userY</b></code>"]
    InputCoordinates --> CheckWin{"Проверка: <code><b>userX == hurkleX and userY == hurkleY</b></code>?"}
    CheckWin -- Да --> OutputWin["Вывод сообщения: <b>YOU GOT IT IN <code>{numberOfGuesses}</code> GUESSES!</b>"]
    OutputWin --> End["Конец"]
    CheckWin -- Нет --> CalculateDirection["Вычисление направления: <code><b>direction = getDirection(userX, userY, hurkleX, hurkleY)</b></code>"]
    CalculateDirection --> OutputDirection["Вывод сообщения: <b>{direction}</b>"]
    OutputDirection --> LoopStart
    LoopStart -- Нет --> End
```
Legenda:
    Start - Начало программы.
    InitializeVariables - Инициализация переменных: hurkleX и hurkleY (координаты HURKLE) генерируются случайным образом от 1 до 10,
                          numberOfGuesses (количество попыток) устанавливается в 0.
    LoopStart - Начало цикла, который продолжается, пока HURKLE не найден.
    IncreaseGuesses - Увеличение счетчика количества попыток на 1.
    InputCoordinates - Запрос у пользователя ввода координат X и Y и сохранение их в переменных userX и userY.
    CheckWin - Проверка, равны ли введенные координаты userX и userY координатам HURKLE hurkleX и hurkleY.
    OutputWin - Вывод сообщения о победе, если координаты совпадают, с указанием количества попыток.
    End - Конец программы.
    CalculateDirection - Вычисление направления от координат пользователя до координат HURKLE.
    OutputDirection - Вывод сообщения с направлением.
"""
import random
from src.logger.logger import logger # Импортируем logger для логирования ошибок

# Функция для определения направления HURKLE
def get_direction(user_x: int, user_y: int, hurkle_x: int, hurkle_y: int) -> str:
    """
    Определяет направление от координат пользователя к координатам HURKLE.

    :param user_x: Координата X, введенная пользователем.
    :type user_x: int
    :param user_y: Координата Y, введенная пользователем.
    :type user_y: int
    :param hurkle_x: Координата X HURKLE.
    :type hurkle_x: int
    :param hurkle_y: Координата Y HURKLE.
    :type hurkle_y: int
    :return: Строка, представляющая направление.
    :rtype: str
    """
    if user_x < hurkle_x and user_y < hurkle_y:
        return 'СЕВЕРО-ВОСТОК'
    elif user_x < hurkle_x and user_y > hurkle_y:
        return 'ЮГО-ВОСТОК'
    elif user_x > hurkle_x and user_y < hurkle_y:
        return 'СЕВЕРО-ЗАПАД'
    elif user_x > hurkle_x and user_y > hurkle_y:
        return 'ЮГО-ЗАПАД'
    elif user_x < hurkle_x:
        return 'ВОСТОК'
    elif user_x > hurkle_x:
        return 'ЗАПАД'
    elif user_y < hurkle_y:
        return 'СЕВЕР'
    else:
        return 'ЮГ'

# Генерируем случайные координаты HURKLE
hurkle_x = random.randint(1, 10)
hurkle_y = random.randint(1, 10)

# Инициализируем счетчик ходов
number_of_guesses = 0

# Основной игровой цикл
while True:
    # Увеличиваем счетчик ходов
    number_of_guesses += 1

    # Запрашиваем ввод координат у пользователя
    try:
        user_x = int(input('Введите X координату (1-10): '))
        user_y = int(input('Введите Y координату (1-10): '))
    except ValueError as ex:
        # Логируем ошибку ввода не целого числа
        logger.error('Ошибка ввода: Пожалуйста, введите целые числа.', exc_info=ex)
        print('Пожалуйста, введите целые числа.')
        continue

    # Проверяем, что координаты находятся в диапазоне от 1 до 10
    if not 1 <= user_x <= 10 or not 1 <= user_y <= 10:
        print('Пожалуйста, введите координаты от 1 до 10.')
        continue

    # Проверяем, угадал ли пользователь местоположение HURKLE
    if user_x == hurkle_x and user_y == hurkle_y:
        print(f'ПОЗДРАВЛЯЮ! Вы нашли HURKLE за {number_of_guesses} ходов!')
        break

    # Вычисляем и выводим направление
    direction = get_direction(user_x, user_y, hurkle_x, hurkle_y)
    print(direction)
    
"""
Объяснение кода:
1.  **Импорт модуля `random` и `logger`**:
   -  `import random`: Импортирует модуль `random`, который используется для генерации случайных чисел.
   - `from src.logger.logger import logger`: Импортирует logger для логирования ошибок.
2.  **Функция `get_direction(user_x, user_y, hurkle_x, hurkle_y)`**:
    -   Определяет функцию, принимающую координаты пользователя и HURKLE.
    -   Определяет направление от координат пользователя к координатам HURKLE и возвращает строку с направлением.
    -  Добавлены docstring в формате RST
3.  **Инициализация координат HURKLE**:
    -   `hurkle_x = random.randint(1, 10)`: Генерирует случайную x-координату HURKLE от 1 до 10.
    -   `hurkle_y = random.randint(1, 10)`: Генерирует случайную y-координату HURKLE от 1 до 10.
4.  **Инициализация количества попыток**:
    -   `number_of_guesses = 0`: Инициализирует переменную `number_of_guesses` для подсчета ходов игрока.
5.  **Основной игровой цикл `while True:`**:
    -   Бесконечный цикл, который продолжается до тех пор, пока игрок не угадает местоположение HURKLE (будет выполнена команда `break`).
    -   `number_of_guesses += 1`: Увеличивает счетчик попыток на 1 при каждом новом витке цикла.
    -   **Ввод данных**:
        -   `try...except ValueError`: Блок try-except обрабатывает возможные ошибки ввода. Если пользователь введет не целые числа, то будет выведено сообщение об ошибке и ошибка будет залогирована.
        -   `user_x = int(input('Введите X координату (1-10): '))`: Запрашивает у пользователя x-координату и преобразует ее в целое число.
        -   `user_y = int(input('Введите Y координату (1-10): '))`: Запрашивает у пользователя y-координату и преобразует ее в целое число.
    -   **Проверка диапазона координат**:
        -   `if not 1 <= user_x <= 10 or not 1 <= user_y <= 10:`: Проверяет, находятся ли введенные координаты в диапазоне от 1 до 10. Если нет, выводится сообщение об ошибке.
    -   **Условие победы**:
        -   `if user_x == hurkle_x and user_y == hurkle_y:`: Проверяет, совпадают ли введенные координаты с координатами HURKLE.
        -   `print(f'ПОЗДРАВЛЯЮ! Вы нашли HURKLE за {number_of_guesses} ходов!')`: Выводит сообщение о победе и количестве ходов.
        -   `break`: Завершает цикл (игру), если HURKLE найден.
     -   **Вычисление и вывод направления**:
        -    `direction = get_direction(user_x, user_y, hurkle_x, hurkle_y)`: Вызывает функцию `get_direction` для получения направления.
        -    `print(direction)`: Выводит направление для игрока.
"""
```