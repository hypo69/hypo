# Анализ кода модуля e_761.md

**Качество кода**
8
- Плюсы
    - Код содержит описание задачи, условий и целевой метрики.
    - Присутствуют пояснения к иррациональным числам и их десятичным представлениям.
- Минусы
    - Отсутствует код на Python для решения задачи.
    - Нет примеров использования или реализации решения.
    - Отсутствует структура, необходимая для выполнения инструкций.

**Рекомендации по улучшению**
1.  Добавить реализацию кода на Python для решения задачи.
2.  Использовать reStructuredText (RST) для комментариев и docstring.
3.  Включить импорты и логирование.
4.  Разбить код на функции и использовать их с docstring.
5.  Применить обработку ошибок с помощью `logger.error`.
6.  Добавить примеры использования.
7.  Оформить код согласно стилю PEP 8.

**Оптимизированный код**
```python
"""
Модуль для решения задачи 761 проекта Эйлера.
=========================================================================================

Этот модуль вычисляет сумму первых 100 цифр после запятой в десятичном представлении √n
для всех иррациональных чисел n в диапазоне от 2 до 100.

Функции:
    - calculate_sqrt_sum(n: int, digits: int = 100) -> int: Вычисляет сумму цифр после запятой квадратного корня числа.
    - is_perfect_square(n: int) -> bool: Проверяет, является ли число полным квадратом.
    - main() -> int: Основная функция для решения задачи.

Пример использования
--------------------

Для запуска решения:

.. code-block:: python

    if __name__ == "__main__":
        result = main()
        print(f"Сумма S(n) для иррациональных чисел от 2 до 100 равна: {result}")
"""
from decimal import Decimal, getcontext
from math import sqrt
from src.logger.logger import logger


def calculate_sqrt_sum(n: int, digits: int = 100) -> int:
    """
    Вычисляет сумму первых `digits` цифр после десятичной запятой в десятичном представлении √n.

    :param n: Целое число, для которого вычисляется квадратный корень.
    :param digits: Количество цифр после запятой для суммирования.
    :return: Сумма цифр после запятой.
    """
    try:
        getcontext().prec = digits + 10  # Устанавливаем точность Decimal для корректных вычислений
        sqrt_n = Decimal(n).sqrt()  # Вычисляем квадратный корень с заданной точностью
        sqrt_str = str(sqrt_n)  # Преобразуем корень в строку

        # Код проверяет наличие десятичной точки
        if '.' not in sqrt_str:
            return 0 # Если нет дробной части, возвращаем 0

        # Код выделяет цифры после десятичной точки
        decimal_part = sqrt_str.split('.')[1]

        # Код суммирует первые digits цифр после запятой
        return sum(int(digit) for digit in decimal_part[:digits])
    except Exception as e:
        logger.error(f"Ошибка при вычислении суммы цифр для {n}: {e}")
        return 0


def is_perfect_square(n: int) -> bool:
    """
    Проверяет, является ли число полным квадратом.

    :param n: Целое число для проверки.
    :return: True, если число является полным квадратом, иначе False.
    """
    if n < 0:
        return False
    root = int(sqrt(n)) # Вычисление целого корня
    return root * root == n # Проверка полного квадрата


def main() -> int:
    """
    Основная функция, выполняющая расчет и вывод результата.

    :return: Общая сумма S(n) для всех иррациональных √n, где 1 < n ≤ 100.
    """
    total_sum = 0
    for n in range(2, 101):
         # Код проверяет, является ли число полным квадратом
        if not is_perfect_square(n):
            # Код вычисляет сумму цифр и добавляет её к общему результату
            total_sum += calculate_sqrt_sum(n)
    return total_sum


if __name__ == "__main__":
    result = main()
    print(f"Сумма S(n) для иррациональных чисел от 2 до 100 равна: {result}")
```