# Документация модуля `src.logger`

## Описание

Модуль `src.logger` предоставляет гибкую систему логирования, поддерживающую вывод в консоль, файлы и JSON-формат. Он использует паттерн проектирования "Одиночка" (Singleton), гарантируя, что в приложении используется только один экземпляр логгера. Логгер поддерживает различные уровни логирования (например, `INFO`, `ERROR`, `DEBUG`) и включает цветной вывод для консольных логов. Также можно настраивать форматы вывода логов и управлять логированием в разные файлы.

---

## Классы:

- **`SingletonMeta`**: Метакласс, реализующий паттерн "Одиночка" для логгера.
- **`JsonFormatter`**: Пользовательский форматер, выводит логи в формате JSON.
- **`Logger`**: Основной класс логгера, поддерживающий консольное, файловое и JSON-логирование.

---

## Функции:

#### `__init__`

Инициализирует экземпляр `Logger` с плацехолдерами для разных типов логгеров (консоль, файл и JSON).

#### `_configure_logger(name: str, log_path: str, level: Optional[int] = logging.DEBUG, formatter: Optional[logging.Formatter] = None, mode: Optional[str] = 'a') -> logging.Logger`

Настраивает и возвращает экземпляр логгера.

**Параметры:**

- `name`: Имя логгера.
- `log_path`: Путь к файлу логов.
- `level`: Уровень логирования, например, `logging.DEBUG`. По умолчанию `logging.DEBUG`.
- `formatter`: Пользовательский форматер (необязательно).
- `mode`: Режим файла, например, `'a'` для добавления (по умолчанию).

**Возвращает:** Настроенный экземпляр `logging.Logger`.

#### `initialize_loggers(info_log_path: Optional[str] = '', debug_log_path: Optional[str] = '', errors_log_path: Optional[str] = '', json_log_path: Optional[str] = '')`

Инициализирует логгеры для консольного и файлового логирования (info, debug, error и JSON).

**Параметры:**

- `info_log_path`: Путь к файлу для логов уровня `INFO` (необязательно).
- `debug_log_path`: Путь к файлу для логов уровня `DEBUG` (необязательно).
- `errors_log_path`: Путь к файлу для логов уровня `ERROR` (необязательно).
- `json_log_path`: Путь к файлу для JSON-логов (необязательно).

#### `log(level, message, ex=None, exc_info=False, color=None)`

Записывает сообщение на указанном уровне (например, `INFO`, `DEBUG`, `ERROR`) с необязательными данными об исключениях и форматированием цвета.

**Параметры:**

- `level`: Уровень логирования (например, `logging.INFO`, `logging.DEBUG`).
- `message`: Сообщение для логирования.
- `ex`: Необязательное исключение для логирования.
- `exc_info`: Флаг включения информации об исключении (по умолчанию `False`).
- `color`: Кортеж с текстовым и фоновым цветами для консольного вывода (необязательно).

#### `info`, `success`, `warning`, `debug`, `error`, `critical`

Функции для логирования сообщений на соответствующих уровнях. Принимают сообщение, необязательное исключение, флаг включения информации об исключении и необязательный кортеж для цвета.

---

## Параметры логгера

Класс `Logger` принимает несколько необязательных параметров для настройки поведения логирования:

- **`level`**: Определяет уровень серьезности логов, которые будут захватываться.  Типичные уровни:
    - `logging.DEBUG`: Подробная информация, полезна для диагностики проблем.
    - `logging.INFO`: Общая информация, например, успешные операции.
    - `logging.WARNING`: Предупреждения, которые не требуют немедленных действий.
    - `logging.ERROR`: Сообщения об ошибках.
    - `logging.CRITICAL`: Критические ошибки, требующие немедленного внимания.

- **`formatter`**: Определяет, как форматируются сообщения в логах. По умолчанию сообщения форматируются как `'%(asctime)s - %(levelname)s - %(message)s'`. Можно указать пользовательский форматер для различных форматов, например, JSON.

- **`color`**: Цвета для сообщений в консоли. Цвета задаются как кортеж из двух элементов:
    - **`text_color`**: Цвет текста (например, `colorama.Fore.RED`).
    - **`background_color`**: Цвет фона (например, `colorama.Back.WHITE`).

Цвет можно настраивать для разных уровней логирования (например, зелёный для `INFO`, красный для `ERROR`).


---

## Настройка файлового логирования (`config`)

Для логирования в файл можно указать пути в конфигурации:

```python
config = {
    'info_log_path': 'logs/info.log',
    'debug_log_path': 'logs/debug.log',
    'errors_log_path': 'logs/errors.log',
    'json_log_path': 'logs/log.json'
}
```

Пути, указанные в `config`, используются для записи логов в соответствующие файлы для каждого уровня.

---

## Пример использования

#### 1. Инициализация логгера:

```python
logger: Logger = Logger()
config = {
    'info_log_path': 'logs/info.log',
    'debug_log_path': 'logs/debug.log',
    'errors_log_path': 'logs/errors.log',
    'json_log_path': 'logs/log.json'
}
logger.initialize_loggers(**config)
```

#### 2. Логирование сообщений на разных уровнях:

```python
logger.info('Это информационное сообщение')
logger.success('Успешное сообщение')
logger.warning('Предупреждение')
logger.debug('Отладочное сообщение')
logger.error('Ошибка')
logger.critical('Критическая ошибка')
```

#### 3. Настройка цветов:

```python
logger.info('Это сообщение будет зелёным', colors=(colorama.Fore.GREEN, colorama.Back.BLACK))
logger.error('Это сообщение будет с красным фоном', colors=(colorama.Fore.WHITE, colorama.Back.RED))
```

---

## Заключение

Модуль предоставляет комплексную и гибкую систему логирования для Python-приложений. Можно настроить консольное и файловое логирование с различными форматами и цветами, управлять уровнями логирования и обрабатывать исключения. Конфигурация для файлового логирования хранится в словаре `config`, что обеспечивает лёгкую настройку.