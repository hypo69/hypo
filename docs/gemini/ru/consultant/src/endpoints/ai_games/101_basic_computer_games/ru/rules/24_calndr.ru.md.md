# Анализ кода модуля `24_calndr.ru.md`

**Качество кода**

8
- **Плюсы**
    - Документ содержит подробное описание игры "Перпетуальный календарь", включая цели, правила, примеры и возможные ограничения.
    - Шаги реализации игры четко структурированы, что облегчает понимание процесса разработки.
    - Примеры работы программы и завершения игры помогают понять взаимодействие пользователя с программой.

- **Минусы**
    - Документ не содержит реального исполняемого кода, только описание и примеры, что не позволяет оценить его качество с точки зрения кодирования.
    - Отсутствует описание формата ввода данных для дня недели (например, используется отрицательная индексация), что может быть неинтуитивно для пользователя.

**Рекомендации по улучшению**

1.  **Добавить код:** Необходимо предоставить реализацию кода на Python, чтобы можно было оценить его качество и применить рекомендации.
2.  **Уточнить формат ввода:** В описании следует четко указать, почему используется отрицательная индексация дней недели и как она соотносится с реальными днями недели.
3.  **Обработка ошибок:** В реализации кода предусмотреть обработку некорректного ввода данных пользователем.
4.  **Универсальность:** Предусмотреть автоматическое определение високосного года, а не ручное изменение кода.
5.  **Разбить на модули:** В реальной реализации, код должен быть разделен на функции для лучшей читаемости и поддержки.
6.  **Добавить RST документацию:** В коде добавить docstring в формате RST для всех функций и переменных.
7.  **Логирование:** Добавить логирование важных событий и ошибок.

**Оптимизированный код**

```markdown
### Название игры: **CALNDR** (Перпетуальный календарь)

#### Описание
**CALNDR** — это программа, которая позволяет пользователю вывести календарь для любого года. Чтобы использовать программу, необходимо указать день недели, с которого начинается год. Для этого используется программа **WEKDAY**. Вводя правильное число для дня недели, вы можете получить точный календарь для выбранного года. Вы также можете адаптировать программу под високосные годы, внося изменения в код программы.

---

### Пошаговая инструкция для реализации

#### 1. **Инициализация игры**
   - Программа запрашивает ввод года и дня недели, с которого он начинается.
   - Дни недели кодируются как числа:
     - 0 — воскресенье
     - -1 — понедельник
     - -2 — вторник
     - и так далее.
   - Чтобы получить правильное начало года, воспользуйтесь функцией **WEKDAY** для вычисления дня недели для 1 января того года.

#### 2. **Основной цикл игры**
   - **Ввод данных:**
     1. Программа запрашивает ввод года.
     2. Затем пользователю нужно ввести число, которое соответствует началу года (например, 0 для воскресенья).
   - **Вывод календаря:**
     Программа будет поочередно выводить календарь для каждого месяца выбранного года. Каждый месяц будет отображаться с номерами дней недели и днями месяца.

#### 3. **Подсчёт победителя**
   - Игра не имеет победителя, так как цель игры — корректно вывести календарь для заданного года.

#### 4. **Завершение игры**
   - После того как календарь будет выведен, программа предложит пользователю продолжить или завершить игру:
     ```
     Хотите вывести календарь для другого года? (да/нет)
     ```

---

### Пример работы программы

1. **Начало игры:**
   ```
   Добро пожаловать в программу CALNDR!
   Введите год: 2024
   Введите день недели, с которого начинается год (0 - воскресенье, -1 - понедельник и т.д.): -1
   ```

2. **Вывод календаря:**
   ```
   Январь 2024
   Пн Вт Ср Чт Пт Сб Вс
   1  2  3  4  5  6  7
   8  9 10 11 12 13 14
   15 16 17 18 19 20 21
   22 23 24 25 26 27 28
   29 30 31
   ```

3. **Завершение игры:**
   ```
   Хотите вывести календарь для другого года? (да/нет)
   > нет
   Спасибо за использование программы!
   ```

---

### Возможные ограничения
- Программа требует корректного ввода года и дня недели, иначе она может не работать.
- Для високосных лет необходимо вручную внести изменения в код программы (например, для февраля).

---

### Реализация
Игра реализована с помощью базовых вычислений, чтобы вывести календарь для любого года на основе информации о днях недели и количестве дней в месяце.

```python
"""
Модуль для реализации игры "Перпетуальный календарь".
=========================================================================================
Этот модуль предоставляет функциональность для отображения календаря любого года, начиная с указанного дня недели.

Пример использования
--------------------

Пример использования функции ``print_calendar``:

.. code-block:: python

    print_calendar(year=2024, start_day=-1)
"""
from src.logger.logger import logger
from typing import List


def is_leap(year: int) -> bool:
    """
    Проверяет, является ли год високосным.

    :param year: Год для проверки.
    :return: True, если год високосный, иначе False.
    """
    # Код выполняет проверку, является ли год високосным
    return year % 4 == 0 and (year % 100 != 0 or year % 400 == 0)


def get_days_in_month(year: int, month: int) -> int:
    """
    Определяет количество дней в месяце.

    :param year: Год.
    :param month: Номер месяца (1-12).
    :return: Количество дней в месяце.
    """
    # Код определяет количество дней в месяце с учётом високосного года
    if month == 2:
        return 29 if is_leap(year) else 28
    elif month in [4, 6, 9, 11]:
        return 30
    else:
        return 31


def print_month_calendar(year: int, month: int, start_day: int) -> None:
    """
    Выводит календарь для одного месяца.

    :param year: Год.
    :param month: Номер месяца (1-12).
    :param start_day: День недели, с которого начинается месяц (0 - воскресенье, -1 - понедельник, ...).
    """
    # Код выполняет вывод календаря для заданного месяца
    days_in_month = get_days_in_month(year, month)
    month_names = ["Январь", "Февраль", "Март", "Апрель", "Май", "Июнь",
                   "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"]
    print(f"\n{month_names[month - 1]} {year}")
    print("Пн Вт Ср Чт Пт Сб Вс")

    day_of_week = start_day
    for _ in range(abs(start_day) % 7):
         print("   ", end=" ")

    for day in range(1, days_in_month + 1):
        print(f"{day:2}", end=" ")
        day_of_week += 1
        if day_of_week % 7 == 0:
            print()
    print()
    
def print_calendar(year: int, start_day: int) -> None:
    """
    Выводит календарь для всего года.

    :param year: Год.
    :param start_day: День недели, с которого начинается год (0 - воскресенье, -1 - понедельник, ...).
    """
    # Код выполняет вывод календаря на весь год, вызывая функцию print_month_calendar для каждого месяца
    current_day = start_day
    for month in range(1, 13):
        print_month_calendar(year, month, current_day)
        current_day = (current_day + get_days_in_month(year, month))%7
        


def main():
    """
    Основная функция для запуска игры.
    """
    # Код запускает основной игровой цикл
    while True:
        try:
            year = int(input("Введите год: "))
            start_day = int(input("Введите день недели, с которого начинается год (0 - воскресенье, -1 - понедельник и т.д.): "))
            print_calendar(year, start_day)
            
            another_year = input("Хотите вывести календарь для другого года? (да/нет): ")
            if another_year.lower() != "да":
                print("Спасибо за использование программы!")
                break
        except ValueError as e:
            logger.error(f"Ошибка ввода: {e}")
            print("Некорректный ввод. Пожалуйста, введите число.")
        except Exception as e:
            logger.error(f"Произошла непредвиденная ошибка: {e}")
            print("Произошла непредвиденная ошибка. Попробуйте еще раз.")
            
if __name__ == "__main__":
    # Код запускает основную функцию, если скрипт вызывается напрямую
    main()
```