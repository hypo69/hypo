# Модуль нормализации данных (src.utils.string)

## Обзор

Модуль `normalizer` предоставляет функции для нормализации различных типов данных, включая строки, булевы значения, целые числа и числа с плавающей точкой. Также он содержит вспомогательные функции для обработки текста.


## Оглавление

1. [Обзор](#overview)
2. [Функции модуля](#module-functions)
   - [normalize_boolean](#normalize_boolean)
   - [normalize_string](#normalize_string)
   - [normalize_int](#normalize_int)
   - [normalize_float](#normalize_float)
   - [remove_line_breaks](#remove_line_breaks)
   - [remove_html_tags](#remove_html_tags)
   - [remove_special_characters](#remove_special_characters)
   - [normalize_sql_date](#normalize_sql_date)
3. [Пример использования](#usage-example)
4. [Требования](#requirements)


## Overview

Модуль предоставляет удобные утилиты для нормализации и обработки данных. Он может быть использован для:
- удаления HTML-тегов из строк;
- преобразования строк в числовые или булевы значения;
- очистки строк от специальных символов;
- преобразования списков строк в одну нормализованную строку.


## Функции модуля

### `normalize_boolean`

**Описание**: Преобразует входное значение в булево.

**Аргументы**:
- `input_data (Any)`: Данные, которые могут представлять булево значение (строка, число, тип bool).

**Возвращает**:
- `bool`: Преобразованное булево значение.

**Примеры**:
```python
normalize_boolean('yes')  # Результат: True
normalize_boolean(0)      # Результат: False
```

### `normalize_string`

**Описание**: Преобразует строку или список строк в нормализованную строку, удаляя лишние пробелы, HTML-теги и специальные символы.

**Аргументы**:
- `input_data (str | list)`: Строка или список строк.

**Возвращает**:
- `str`: Очищенная строка UTF-8.

**Примеры**:
```python
normalize_string(['  Пример строки  ', '<b>с HTML</b>'])  # Результат: 'Пример строки с HTML'
```


### `normalize_int`

**Описание**: Преобразует входное значение в целое число.

**Аргументы**:
- `input_data (str | int | float | Decimal)`: Число или его строковое представление.

**Возвращает**:
- `int`: Преобразованное целое число.

**Примеры**:
```python
normalize_int('42')  # Результат: 42
normalize_int(3.14)  # Результат: 3
```


### `normalize_float`

**Описание**: Преобразует входное значение в число с плавающей точкой.

**Аргументы**:
- `value (Any)`: Число, строка или список чисел.

**Возвращает**:
- `float | List[float] | None`: Число с плавающей точкой, список чисел с плавающей точкой или `None` в случае ошибки.

**Примеры**:
```python
normalize_float('3.14')         # Результат: 3.14
normalize_float([1, '2.5', 3])  # Результат: [1.0, 2.5, 3.0]
```


### `remove_line_breaks`

**Описание**: Удаляет символы перевода строки из строки.

**Аргументы**:
- `input_str (str)`: Входная строка.

**Возвращает**:
- `str`: Строка без символов перевода строки.

**Примеры**:
```python
remove_line_breaks('Строка\nс переводами строк\r')  # Результат: 'Строка с переводами строк'
```


### `remove_html_tags`

**Описание**: Удаляет HTML-теги из строки.

**Аргументы**:
- `input_html (str)`: Входная строка с HTML-тегами.

**Возвращает**:
- `str`: Строка без HTML-тегов.

**Примеры**:
```python
remove_html_tags('<p>Пример текста</p>')  # Результат: 'Пример текста'
```


### `remove_special_characters`

**Описание**: Удаляет специальные символы из строки или списка строк.

**Аргументы**:
- `input_str (str | list)`: Строка или список строк.

**Возвращает**:
- `str | list`: Строка или список строк без специальных символов.

**Примеры**:
```python
remove_special_characters('Привет@мир!')  # Результат: 'Приветмир'
```


### `normalize_sql_date`

**Описание**: Преобразует строку или объект datetime в стандартный формат даты SQL (`YYYY-MM-DD`).

**Аргументы**:
- `input_data (str | datetime)`: Строка или объект datetime, представляющий дату.

**Возвращает**:
- `str`: Нормализованная дата SQL в формате `YYYY-MM-DD`.

**Примеры**:
```python
normalize_sql_date('2024-12-06')  # Результат: '2024-12-06'
normalize_sql_date(datetime(2024, 12, 6))  # Результат: '2024-12-06'
```


## Пример использования

```python
from src.utils.string.normalizer import normalize_string, normalize_boolean, normalize_int, normalize_float, normalize_sql_date
from datetime import datetime

# Нормализация строки
чистая_строка = normalize_string(['<h1>Заголовок</h1>', '  текст с пробелами  '])
print(чистая_строка)  # 'Заголовок текст с пробелами'

# Нормализация булева значения
активно = normalize_boolean('Да')
print(активно)  # True

# Нормализация целого числа
целое_число = normalize_int('42')
print(целое_число)  # 42

# Нормализация числа с плавающей точкой
число_с_плавающей_точкой = normalize_float('3.14159')
print(число_с_плавающей_точкой)  # 3.14159

# Нормализация даты SQL
дата_sql = normalize_sql_date('2024-12-06')
print(дата_sql)  # '2024-12-06'
```


## Требования

- Python 3.10 или выше.
- Модуль `src.logger` для ведения журнала.
- Модуль используется в режиме разработки (``).


## Ведение журнала

Все ошибки и предупреждения регистрируются через `logger`:
- Ошибки регистрируются с помощью `logger.error`.
- Неожиданные значения регистрируются с помощью `logger.debug` или `logger.warning`.
```