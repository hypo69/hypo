Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код описывает класс `AliAffiliatedProducts`, предназначенный для сбора полной информации о продуктах с AliExpress Affiliate API.  Класс получает данные о продуктах по URL или ID, извлекает аффилированные ссылки, сохраняет изображения и видео, и записывает данные в JSON-формат.  Он использует `AliApi` в качестве базового класса и предоставляет методы для работы с продуктами.

Шаги выполнения
-------------------------
1. **Инициализация класса `AliAffiliatedProducts`**:  Создайте экземпляр класса, передав ему имя кампании, необязательную категорию, язык и валюту.  Это задаёт настройки для работы.
   ```python
   parser = AliAffiliatedProducts("МояКампания", "Электроника", "RU", "RUB")
   ```

2. **Подготовьте список URL или ID продуктов**:  Создайте список `prod_urls` с URL или ID продуктов, для которых нужно получить информацию.
   ```python
   prod_urls = ["https://www.aliexpress.com/item/123456789.html", "101112"]
   ```

3. **Обработка продуктов**:  Вызовите метод `process_affiliate_products` класса `AliAffiliatedProducts`, передав список `prod_urls`. Этот метод выполняет следующие действия:
    - **Проверка на наличие аффилированных ссылок:** Извлекает аффилированные ссылки для каждого продукта.
    - **Получение информации о продуктах:** Извлекает подробную информацию о каждом продукте, включая изображения и видео.
    - **Сохранение информации о продуктах**: Сохраняет изображения и видео локально, а также данные о продуктах в JSON-файлы в заранее заданном формате каталога.
    - **Обработка ошибок:** Логирует ошибки, которые могут возникнуть во время обработки. Если аффилированная ссылка не найдена, продукт пропускается или удаляется.
   ```python
   products = parser.process_affiliate_products(prod_urls)
   ```

4. **Обработка результатов**: Проверьте возвращаемый список `products`.  Он содержит объекты `SimpleNamespace` с информацией о каждом продукте.  Если список пуст, значит не было найдено ни одного аффилированного продукта или произошла ошибка.

Пример использования
-------------------------
.. code-block:: python

    import asyncio
    from src.suppliers.aliexpress import AliAffiliatedProducts
    from src.utils import gs

    async def main():
        campaign_name = "МояКампания"
        prod_urls = ["https://www.aliexpress.com/item/123456789.html", "101112"]
        parser = AliAffiliatedProducts(campaign_name, "Электроника", "RU", "RUB")
        products = await parser.process_affiliate_products(prod_urls)

        if products:
            for product in products:
                print(f"ID продукта: {product.product_id}, ссылка: {product.promotion_link}")
                # Обработка данных о продукте, например, сохранение в базу данных
        else:
            print("Нет доступных продуктов.")

    if __name__ == "__main__":
        asyncio.run(main())