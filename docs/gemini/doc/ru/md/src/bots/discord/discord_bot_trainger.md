# Модуль discord_bot_trainger

## Обзор

Данный модуль содержит код для бота Discord, который может обучаться моделям, обрабатывать текстовые и аудио сообщения, а также взаимодействовать с голосовыми каналами.

## Классы

### `Model`

**Описание**: Класс `Model` представляет собой модель для обучения и работы с данными.

**Методы**:

- `train(data, data_dir, positive)`: Обучает модель с предоставленными данными.
- `predict(test_data)`: Предсказывает результат на тестовых данных.
- `save_job_id(job_id, task_description)`: Сохраняет ID задачи и описание для отслеживания обучения.
- `handle_errors(predictions, test_data)`: Обрабатывает ошибки, возвращаемые при прогнозировании.
- `select_dataset_and_archive(path_to_dir_positive, positive)`: Выбирает и архивирует набор данных для обучения.
- `archive_files(directory)`: Архивирует файлы в указанном каталоге.
- `send_message(message)`: Обрабатывает входное сообщение и генерирует ответ.

## Функции

### `store_correction(original_text: str, correction: str)`

**Описание**: Сохраняет исправление для исходного текста в файл `corrections_log.txt`.

**Параметры**:

- `original_text` (str): Исходный текст.
- `correction` (str): Предложенное исправление.

**Вызывает исключения**:

- Нет

### `text_to_speech_and_play(text, channel)`

**Описание**: Преобразует текст в речь и воспроизводит его в указанном голосовом канале.

**Параметры**:

- `text` (str): Текст для преобразования.
- `channel` (discord.TextChannel): Объект Discord голосового канала.


**Возвращает**:

- Нет

### `recognizer(audio_url: str, language: str = 'ru-RU') -> str`

**Описание**:  Загружает аудиофайл, распознает речь и возвращает распознанный текст.

**Параметры**:

- `audio_url` (str): URL аудиофайла.
- `language` (str, опционально): Язык распознавания речи (по умолчанию 'ru-RU').

**Возвращает**:

- str: Распознанный текст.

**Вызывает исключения**:
- `sr.UnknownValueError`: Возникает, если Google Speech Recognition не смог распознать аудио.
- `sr.RequestError`: Возникает, если произошла ошибка при запросе к сервису Google Speech Recognition.


## Константы

### `MODE`

**Описание**: Переменная, содержащая режим работы бота.


### `PREFIX`

**Описание**: Префикс команды для бота Discord.

##  Команды Discord Bot

### `!hi`

**Описание**:  Приветственное сообщение.

**Возвращает**: `True`

### `!join`

**Описание**: Подключает бота к голосовому каналу пользователя.

**Возвращает**: `True`

### `!leave`

**Описание**: Отключает бота от голосового канала.

**Возвращает**: `True`

### `!train`

**Описание**: Обучает модель с предоставленными данными.

**Параметры**:

- `data` (str, опционально): Путь к файлу или данные для обучения.
- `data_dir` (str, опционально):  Каталог с данными для обучения.
- `positive` (bool, опционально): Признак положительных данных (True по умолчанию).
- `attachment` (discord.Attachment, опционально): Приложение с данными для обучения.

**Возвращает**: Сообщение о начале или неудаче обучения.

### `!test`

**Описание**: Тестирует модель с предоставленными тестовыми данными.

**Параметры**:

- `test_data` (str): Тестовые данные в формате JSON.

**Возвращает**: Сообщение о результатах тестирования или об ошибке.


### `!archive`

**Описание**: Архивирует файлы в указанном каталоге.

**Параметры**:

- `directory` (str): Путь к каталогу.


**Возвращает**: Сообщение об успешном или неудачном архивировании.


### `!select_dataset`

**Описание**: Выбирает и архивирует набор данных для обучения.

**Параметры**:

- `path_to_dir_positive` (str): Путь к каталогу с положительными данными.
- `positive` (bool, опционально): Признак положительных данных (True по умолчанию).


**Возвращает**: Сообщение об успешном или неудачном выборе набора данных.


### `!instruction`

**Описание**: Отображает инструкцию из внешнего файла.


**Возвращает**: Сообщение с инструкцией.


### `!correct`

**Описание**: Исправляет предыдущий ответ, предоставляя ID сообщения и исправление.


**Параметры**:

- `message_id` (int): ID сообщения.
- `correction` (str): Исправление.

**Возвращает**: Сообщение об успешном приеме исправления или ошибку.


### `!feedback`

**Описание**: Отправляет обратную связь о ответе модели.

**Параметры**:

- `feedback_text` (str): Текст обратной связи.

**Возвращает**: Сообщение об успешном получении обратной связи.


### `!getfile`

**Описание**: Прикрепляет файл из указанного пути.

**Параметры**:

- `file_path` (str): Путь к файлу.

**Возвращает**: Сообщение об успешном прикреплении файла или об ошибке.

## Обработчики событий

### `on_ready()`

**Описание**: Вызывается, когда бот готов к работе.

### `on_message()`

**Описание**: Обрабатывает входящие сообщения и реагирует на голосовые команды.