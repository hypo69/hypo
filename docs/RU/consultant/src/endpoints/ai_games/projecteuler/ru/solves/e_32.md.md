# Анализ кода модуля e_32.md

**Качество кода: 7/10**
- **Плюсы:**
    - Код предоставляет понятное и структурированное решение задачи Project Euler 32.
    - Используется генерация перестановок для поиска панцифровых чисел.
    - Логика решения, включая перебор множителей и проверку панцифровых свойств, достаточно ясна.
    - Включена блок-схема в формате mermaid для наглядного представления алгоритма.
- **Минусы:**
    - Код содержит дублирование логики проверки панцифровых произведений (два вложенных цикла с разными условиями), что усложняет его понимание и поддержку.
    - Отсутствуют docstring для функций и модуля.
    - Используется стандартный print для вывода результата, лучше использовать logging.
    - Есть потенциал для оптимизации производительности, особенно в части перебора всех возможных вариантов разбиения на множители.
    - Использованы множественные циклы `for`, что снижает читаемость.
    - Имеется дублирование кода для проверки панцифровых чисел.
    - Нет обработки ошибок.

**Рекомендации по улучшению:**
1. **Рефакторинг:** Упростить логику проверки, избавившись от дублирования циклов. Вынести логику проверки панцифрового произведения в отдельную функцию.
2. **Документация:** Добавить docstring для модуля и функций, чтобы сделать код более понятным и документированным в формате RST.
3. **Логирование:** Заменить `print` на использование `logger` для логирования результата, а также потенциальных ошибок.
4. **Оптимизация:**  Улучшить производительность, например, за счет оптимизации перебора вариантов разбиения на множители, если это возможно.
5. **Обработка ошибок:** Добавить минимальную обработку исключений с использованием `logger.error`.
6. **Улучшение читаемости**: Переписать множественные циклы `for` для лучшей читаемости.
7. **Именование переменных**: Уточнить именование переменных для повышения читаемости.
8. **Избегание дублирования кода**: Вынести общую логику в отдельную функцию.

**Оптимизированный код**
```python
"""
Модуль для решения задачи 32 Project Euler: Панцифровые произведения.
=========================================================================================

Этот модуль находит все панцифровые произведения, которые получаются умножением двух чисел,
используя все цифры от 1 до 9 ровно один раз.

Пример использования
--------------------

.. code-block:: python

    from src.endpoints.ai_games.projecteuler.ru.solves.e_32 import find_pandigital_products

    result = find_pandigital_products()
    print(result)
"""
from itertools import permutations
from src.logger.logger import logger # добавлен импорт для логгера

def is_pandigital(s: str) -> bool:
    """
    Проверяет, является ли строка панцифровой, то есть содержит все цифры от 1 до 9 ровно один раз.

    :param s: Строка для проверки.
    :return: True, если строка панцифровая, иначе False.
    """
    return set(s) == set('123456789') and len(s) == 9

def check_pandigital_product(digits: str, multiplier1: int, multiplier2: int, product: int) -> bool:
        """
        Проверяет, является ли произведение `product` панцифровым и соответствует ли исходному набору цифр.

        :param digits: Исходная строка цифр.
        :param multiplier1: Первый множитель.
        :param multiplier2: Второй множитель.
        :param product: Произведение множителей.
        :return: True, если произведение панцифровое и соответствует исходным цифрам, иначе False.
        """
        product_str = str(product)
        if len(product_str) + len(str(multiplier1)) + len(str(multiplier2)) != 9:
            return False
        if is_pandigital(product_str + str(multiplier1) + str(multiplier2)) :
            sorted_product_str = sorted(product_str + str(multiplier1) + str(multiplier2))
            sorted_digits = sorted(digits)
            if sorted_product_str == sorted_digits:
              return True
        return False


def find_pandigital_products() -> int:
    """
    Находит и суммирует все уникальные панцифровые произведения, полученные из
    перестановок цифр от 1 до 9.

    :return: Сумма уникальных панцифровых произведений.
    """
    pandigital_products = set()
    for digits_tuple in permutations('123456789'):
        digits = "".join(digits_tuple)
        for i in range(1, len(digits)):
            for j in range(i + 1, len(digits)):
                multiplier1 = int(digits[:i])
                multiplier2 = int("".join(digits[i:j]))
                product = multiplier1 * multiplier2
                if check_pandigital_product(digits, multiplier1, multiplier2, product):
                     pandigital_products.add(product)


    return sum(pandigital_products)


if __name__ == "__main__":
    # код исполняет поиск панцифровых произведений и выводит результат через логгер
    result = find_pandigital_products()
    logger.info(f'Сумма панцифровых произведений: {result}')
```