# Модуль `Wewordle.py`

## Обзор

Модуль предоставляет асинхронный класс `Wewordle`, который является провайдером для взаимодействия с API `wewordle.org`. Этот API используется для генерации текста с использованием модели GPT-3.5 Turbo. Модуль предназначен для интеграции с другими частями проекта `hypotez`, где требуется асинхронное взаимодействие с API для получения текстовых ответов.

## Подробнее

Модуль `Wewordle` предназначен для работы с API `wewordle.org` для генерации текста с использованием модели GPT-3.5 Turbo. Он предоставляет асинхронный интерфейс, что позволяет эффективно использовать ресурсы при выполнении запросов.

## Классы

### `Wewordle`

**Описание**: Асинхронный провайдер для взаимодействия с API `wewordle.org`.

**Наследует**: `AsyncProvider` (из `..base_provider`)

**Атрибуты**:
- `url` (str): URL API `wewordle.org`.
- `working` (bool): Указывает, работает ли провайдер.
- `supports_gpt_35_turbo` (bool): Указывает, поддерживает ли провайдер модель GPT-3.5 Turbo.

**Методы**:

- `create_async`

## Функции

### `create_async`

```python
    @classmethod
    async def create_async(
        cls,
        model: str,
        messages: list[dict[str, str]],
        proxy: str = None,
        **kwargs
    ) -> str:
        """
        Создает асинхронный запрос к API `wewordle.org` для генерации текста.

        Args:
            cls: Класс, для которого вызывается метод.
            model (str): Модель, используемая для генерации текста.
            messages (list[dict[str, str]]): Список сообщений для отправки в API.
            proxy (str, optional): Прокси-сервер для использования при подключении к API. По умолчанию `None`.
            **kwargs: Дополнительные аргументы.

        Returns:
            str: Сгенерированный текст от API.

        Raises:
            aiohttp.ClientResponseError: Если возникает ошибка при выполнении запроса к API.

        """
```

**Назначение**: Отправляет асинхронный запрос к API `wewordle.org` и возвращает сгенерированный текст.

**Параметры**:
- `cls`: Класс, для которого вызывается метод.
- `model` (str): Модель, используемая для генерации текста.
- `messages` (list[dict[str, str]]): Список сообщений для отправки в API.
- `proxy` (str, optional): Прокси-сервер для использования при подключении к API. По умолчанию `None`.
- `**kwargs`: Дополнительные аргументы.

**Возвращает**:
- `str`: Сгенерированный текст от API.

**Вызывает исключения**:
- `aiohttp.ClientResponseError`: Если возникает ошибка при выполнении запроса к API.

**Как работает функция**:

1.  **Инициализация параметров**:
    - Функция `create_async` принимает параметры, необходимые для создания запроса к API `wewordle.org`.
    - Из входных параметров формируются заголовки запроса и полезная нагрузка (payload) в формате JSON.
2.  **Генерация идентификаторов**:
    - Генерируются случайные идентификаторы пользователя (`_user_id`) и приложения (`_app_id`) с использованием символов нижнего регистра и цифр.
    - Формируется строка `_request_date` с текущей датой и временем в формате, требуемом API.
3.  **Формирование данных запроса**:
    - Создается словарь `data`, содержащий информацию о пользователе, сообщения и данные о подписке.
    - В словаре `subscriber` генерируются дополнительные поля, такие как `originalAppUserId`, `requestDate` и другие, необходимые для API.
4.  **Выполнение асинхронного запроса**:
    - Используется `aiohttp.ClientSession` для выполнения асинхронного POST-запроса к API `wewordle.org`.
    - В запросе передаются заголовки, прокси (если указан) и данные в формате JSON.
5.  **Обработка ответа**:
    - Полученный ответ от API преобразуется в JSON.
    - Из JSON-ответа извлекается поле `content` из структуры `response.json()["message"]["content"]`, которое содержит сгенерированный текст.
6.  **Возврат результата**:
    - Если поле `content` не пустое, функция возвращает извлеченный текст.

**ASCII flowchart функции**:

```
    Начало
    │
    ├─────────────────────────────┐
    │  Инициализация параметров   │
    └─────────────────────────────┘
    │
    ├─────────────────────────────┐
    │  Генерация идентификаторов  │
    └─────────────────────────────┘
    │
    ├─────────────────────────────┐
    │  Формирование данных запроса│
    └─────────────────────────────┘
    │
    ├─────────────────────────────┐
    │ Выполнение асинхронного    │
    │ POST-запроса               │
    └─────────────────────────────┘
    │
    ├─────────────────────────────┐
    │  Обработка ответа          │
    └─────────────────────────────┘
    │
    ├─────────────────────────────┐
    │  Извлечение контента        │
    └─────────────────────────────┘
    │
    Конец
```

**Примеры**:

```python
# Пример вызова функции create_async
import asyncio
async def main():
    model = "gpt-3.5-turbo"
    messages = [{"role": "user", "content": "Привет, как дела?"}]
    proxy = None
    result = await Wewordle.create_async(model=model, messages=messages, proxy=proxy)
    print(result)

if __name__ == "__main__":
    asyncio.run(main())