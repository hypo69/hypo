# Модуль `try_xpath_functions.js`

## Обзор

Этот модуль содержит набор функций для работы с XPath выражениями и DOM элементами в браузере.  Функции позволяют выполнять XPath запросы, получать результаты в виде различных типов данных (числа, строки, булевы значения, узлы DOM),  выполнять запросы `querySelector` и `querySelectorAll`, а также работать с атрибутами элементов.

## Функции

### `execExpr`

**Описание**: Выполняет XPath запрос, запрос `querySelector` или `querySelectorAll` на заданном контексте.

**Параметры**:

- `expr` (str): XPath выражение или CSS селектор.
- `method` (str): Тип операции ("evaluate", "querySelector", "querySelectorAll").
- `opts` (Optional[dict], optional): Опциональный словарь параметров.
    - `context` (Node | Document, optional): Контекст для выполнения запроса. По умолчанию - `document`.
    - `resolver` (Optional[callable | str], optional): Функция-резолвер или JSON строка для резолвера. По умолчанию - `null`.
    - `resultType` (Optional[int], optional): Тип результата для `evaluate`. По умолчанию - `xpathResult.ANY_TYPE`.
    - `document` (Document, optional): Дополнительный документ для работы.


**Возвращает**:

- `dict`: Словарь с результатами:
    - `items` (list): Список найденных элементов.
    - `method` (str): Тип выполненной операции.
    - `resultType` (int | null): Тип результата, полученный от `evaluate`, либо `null`.


**Вызывает исключения**:

- `Error`: В случае некорректного контекста или выражения. Ошибки, связанные с резолвером.


### `resToArr`

**Описание**: Преобразует результат XPath запроса в массив.

**Параметры**:

- `res` (XPathResult): Результат XPath запроса.
- `type` (Optional[int], optional): Тип результата. Если не указан, используется `res.resultType`.

**Возвращает**:

- `list`: Массив, содержащий результат XPath запроса.


**Вызывает исключения**:

- `Error`: В случае неподдерживаемого `resultType`.

### `makeResolver`

**Описание**: Создает функцию-резолвер для обработки JSON строки или функции.

**Параметры**:

- `obj` (Optional[callable | str | dict], optional): Функция-резолвер, JSON строка или словарь. Если `null`, возвращает `null`.

**Возвращает**:

- `callable | None`: Функция-резолвер или `null`.

**Вызывает исключения**:

- `Error`: Если `obj` является некорректной JSON строкой или словарём.


### `isValidDict`

**Описание**: Проверяет, является ли объект корректным словарем, содержащим только строковые значения.

**Параметры**:

- `obj` (object): Объект для проверки.

**Возвращает**:

- `bool`: `True`, если `obj` - корректный словарь, `False` - иначе.

### `objToMap`

**Описание**: Преобразует объект в Map.

**Параметры**:

- `obj` (object): Объект для преобразования.

**Возвращает**:

- `Map`: Объект `Map`, содержащий пары ключ-значение из `obj`.


### `isDocOrElem`

**Описание**: Проверяет, является ли объект `Document` или `Element`.

**Параметры**:

- `obj` (object): Объект для проверки.

**Возвращает**:

- `bool`: `True`, если объект - `Document` или `Element`, `False` - иначе.

### `listToArr`

**Описание**: Преобразует список в массив.

**Параметры**:

- `list` (Array): Список для преобразования.

**Возвращает**:

- `Array`: Массив, содержащий элементы из `list`.

### `getItemDetail`

**Описание**: Возвращает детальную информацию об элементе.

**Параметры**:

- `item` (object): Элемент для получения информации.

**Возвращает**:

- `dict`: Словарь с информацией об элементе.


### `getItemDetails`

**Описание**: Возвращает детальную информацию о списке элементов.

**Параметры**:

- `items` (Array): Список элементов.

**Возвращает**:

- `Array`: Массив словарей с информацией об элементах.

### `getNodeTypeStr`

**Описание**: Преобразует числовой тип узла в строковое представление.

**Параметры**:

- `nodeType` (int): Числовой тип узла.

**Возвращает**:

- `str`: Строковое представление типа узла.


### `getxpathResultStr`

**Описание**: Возвращает строковое представление типа результата XPath.

**Параметры**:

- `resultType` (int): Числовой тип результата.

**Возвращает**:

- `str`: Строковое представление типа результата.


### `getxpathResultNum`

**Описание**: Возвращает числовое представление типа результата XPath.

**Параметры**:

- `resultTypeStr` (str): Строковое представление типа результата.

**Возвращает**:

- `int`: Числовое представление типа результата или `NaN`.

### `isAttrItem`

**Описание**: Проверяет, является ли объект `Attr`.

**Параметры**:

- `item` (object): Объект для проверки.

**Возвращает**:

- `bool`: `True`, если объект - `Attr`, `False` - иначе.

### `isNodeItem`

**Описание**: Проверяет, является ли объект `Node`.

**Параметры**:

- `item` (object): Объект для проверки.

**Возвращает**:

- `bool`: `True`, если объект - `Node` (и не `Attr`), `False` - иначе.


### `isElementItem`

**Описание**: Проверяет, является ли объект `Element`.

**Параметры**:

- `item` (object): Объект для проверки.

**Возвращает**:

- `bool`: `True`, если объект - `Element`, `False` - иначе.

**(И так далее для остальных функций)**