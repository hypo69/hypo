# Модуль миграции базы данных: `upd_table_purschases`

## Обзор

Модуль содержит миграцию для базы данных, добавляющую столбец `payment_type` в таблицу `purchases` и создающую уникальный индекс для столбца `payment_id`. Он использует библиотеку `alembic` для управления изменениями схемы базы данных.

## Подробней

Этот модуль предназначен для обновления схемы базы данных, добавляя новую информацию о типе платежа в таблицу покупок и обеспечивая уникальность идентификаторов платежей. Он используется в процессе миграции базы данных для внесения изменений в структуру таблиц.

## Функции

### `upgrade`

```python
def upgrade() -> None:
    """
    Обновляет схему базы данных, добавляя столбец 'payment_type' в таблицу 'purchases' и создавая уникальный индекс для 'payment_id'.

    Args:
        None

    Returns:
        None

    Raises:
        Отсутствуют. Функция выполняет операции миграции базы данных и не предполагает явных исключений.

    Example:
        Вызов функции приведет к изменению структуры таблицы 'purchases' в базе данных.
    """
```

**Как работает функция**:
Функция `upgrade` использует `alembic` для выполнения следующих операций:
1. Добавляет столбец `payment_type` типа `String` в таблицу `purchases`. Значение `nullable=False` означает, что столбец не может содержать `NULL`.
2. Создает уникальный индекс для столбца `payment_id` в таблице `purchases`, гарантируя, что каждое значение `payment_id` будет уникальным.

### `downgrade`

```python
def downgrade() -> None:
    """
    Откатывает изменения, внесенные функцией `upgrade`, удаляя столбец 'payment_type' и уникальный индекс 'payment_id' из таблицы 'purchases'.

    Args:
        None

    Returns:
        None

    Raises:
        Отсутствуют. Функция выполняет операции миграции базы данных и не предполагает явных исключений.

    Example:
        Вызов функции приведет к возврату таблицы 'purchases' к ее предыдущему состоянию.
    """
```

**Как работает функция**:
Функция `downgrade` использует `alembic` для выполнения следующих операций, обратных тем, что были выполнены в `upgrade`:
1. Удаляет уникальный индекс для столбца `payment_id` из таблицы `purchases`.
2. Удаляет столбец `payment_type` из таблицы `purchases`.