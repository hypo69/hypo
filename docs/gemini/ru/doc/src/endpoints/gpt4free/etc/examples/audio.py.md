# Модуль для генерации и транскрибирования аудио с использованием g4f
==============================================================

Модуль демонстрирует примеры генерации аудио с использованием провайдера `PollinationsAI` и транскрибирования аудиофайла с использованием провайдера `Microsoft_Phi_4` через библиотеку `g4f`.

## Обзор

Данный модуль предоставляет примеры использования библиотеки `g4f` для выполнения задач, связанных с аудио: генерации речи из текста и транскрибирования аудиофайлов в текст. Он демонстрирует, как использовать асинхронный клиент `AsyncClient` для взаимодействия с различными провайдерами и моделями, предоставляемыми библиотекой `g4f`.

## Подробнее

Модуль использует асинхронную функцию `main` для демонстрации основных операций. Он включает в себя генерацию аудио с помощью провайдера `PollinationsAI` и транскрибирование аудиофайла с использованием провайдера `Microsoft_Phi_4`.

## Функции

### `main`

```python
async def main():
    """
    Асинхронная функция, демонстрирующая генерацию и транскрибирование аудио.

    Returns:
        None

    Raises:
        Exception: Если возникает ошибка при выполнении операций с аудио.
    """
    ...
```

**Назначение**:
Функция `main` является точкой входа в асинхронную программу. Она демонстрирует использование `AsyncClient` для генерации аудио из текста и транскрибирования аудиофайла в текст.

**Как работает функция**:

1.  **Создание асинхронного клиента**:
    Создается экземпляр класса `AsyncClient` с указанием провайдера `g4f.Provider.PollinationsAI`.
2.  **Генерация аудио с использованием PollinationsAI**:
    Используется метод `client.chat.completions.create` для генерации аудио на основе текстового сообщения. Указывается модель `openai-audio`, текстовое сообщение, параметры аудио (голос и формат).
3.  **Сохранение сгенерированного аудио**:
    Сгенерированное аудио сохраняется в файл `alloy.mp3`.
4.  **Транскрибирование аудиофайла**:
    Открывается аудиофайл `audio.wav` для чтения в бинарном режиме. Затем используется метод `client.chat.completions.create` для транскрибирования аудиофайла в текст с использованием провайдера `g4f.Provider.Microsoft_Phi_4`.
5.  **Вывод транскрибированного текста**:
    Полученный текст выводится в консоль.

**ASCII flowchart функции**:

```
A: Создание асинхронного клиента
|
B: Генерация аудио с использованием PollinationsAI
|
C: Сохранение сгенерированного аудио
|
D: Открытие аудиофайла для транскрибирования
|
E: Транскрибирование аудиофайла с использованием Microsoft_Phi_4
|
F: Вывод транскрибированного текста
```

**Примеры**:

```python
import asyncio
from g4f.client import AsyncClient
import g4f.Provider
import g4f.models

async def main():
    client = AsyncClient(provider=g4f.Provider.PollinationsAI)

    # Generate audio with PollinationsAI
    response = await client.chat.completions.create(
        model="openai-audio",
        messages=[{"role": "user", "content": "Say good day to the world"}],
        audio={ "voice": "alloy", "format": "mp3" },
    )
    response.choices[0].message.save("alloy.mp3")

    # Transcribe a audio file
    with open("audio.wav", "rb") as audio_file:
        response = await client.chat.completions.create(
            messages="Transcribe this audio",
            provider=g4f.Provider.Microsoft_Phi_4,
            media=[[audio_file, "audio.wav"]],
            modalities=["text"],
        )
        print(response.choices[0].message.content)
```

### `if __name__ == "__main__":`

```python
if __name__ == "__main__":
    asyncio.run(main())
```

**Назначение**:
Этот блок кода гарантирует, что асинхронная функция `main` будет запущена только при непосредственном запуске скрипта, а не при его импорте в качестве модуля.

**Как работает**:

1.  Проверяет, является ли текущий модуль главным модулем (`__name__ == "__main__"`).
2.  Если да, то запускает асинхронную функцию `main` с помощью `asyncio.run()`.