Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код представляет собой бота для Telegram, который обрабатывает голосовые и текстовые сообщения.  Бот принимает голосовое сообщение, преобразует его в текст с помощью OpenAI, обрабатывает полученный текст с помощью OpenAI API и отправляет ответ пользователю.  Также поддерживается обработка текстовых сообщений.

Шаги выполнения
-------------------------
1. **Импортирует необходимые библиотеки:** `Telegraf` для работы с Telegram ботом, фильтры сообщений, форматирование вывода и т.д. Подключаются конфигурационные файлы и функции для работы с файлами, OpenAI API и другими вспомогательными функциями.

2. **Создает экземпляр бота:** `bot = new Telegraf(config.get('TELEGRAM_TOKEN'))` инициализирует бота с помощью токена доступа.

3. **Обрабатывает команду start:** Обрабатывает команду `/start` и возвращает JSON представление объекта сообщения.

4. **Обрабатывает голосовые сообщения:**
    a. Выводит сообщение о принятии и ожидании ответа.
    b. Получает ссылку на загруженный голосовой файл.
    c. Создаёт уникальный идентификатор пользователя.
    d. Преобразует голосовое сообщение в OGG.
    e. Конвертирует OGG файл в MP3.
    f. Удаляет временный OGG файл.
    g. Использует OpenAI API для преобразования аудио в текст.
    h. Выводит полученный запрос в формате кода.
    i. Создаёт массив сообщений для OpenAI API, включая полученный текст.
    j. Вызывает OpenAI API для получения ответа на запрос.
    k. Отправляет ответ пользователю.
    l. Обрабатывает возможные ошибки при обработке голосового сообщения.

5. **Обрабатывает текстовые сообщения:**
    a. Выводит сообщение о принятии и ожидании ответа.
    b. Вызывает функцию `processTextToChat` для обработки текстового сообщения.
    c. Обрабатывает возможные ошибки при обработке текстового сообщения.

6. **Запускает бота:** `bot.launch()` запускает бота.

7. **Обработка сигналов завершения:** `process.once('SIGINT', ...)` и `process.once('SIGTERM', ...)` обрабатывают сигналы завершения процесса и останавливают бота.


Пример использования
-------------------------
.. code-block:: javascript
    
    // Пример использования в другом файле или части кода
    // (Предполагается, что функции `config.get`, `ogg`, `openai` и `removeFile` определены)
    const telegramBot = require('./main.js'); // Импортируем наш модуль
    telegramBot.bot.startPolling(); // Запускаем бота