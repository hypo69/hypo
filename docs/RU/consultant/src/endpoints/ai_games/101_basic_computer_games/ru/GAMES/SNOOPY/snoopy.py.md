# Анализ кода модуля `snoopy.py`

**Качество кода**
8
- Плюсы
    - Код хорошо структурирован и разбит на функции, что облегчает чтение и понимание.
    - Используются содержательные имена переменных и функций.
    - Логика игры реализована корректно.
    - Присутствует подробное описание алгоритма и блок-схема в комментариях.
- Минусы
    - Отсутствует обработка исключений.
    - Нет логирования.
    - Комментарии не соответствуют стандарту reStructuredText (RST).
    - Отсутствует импорт необходимых модулей.

**Рекомендации по улучшению**

1.  **Документирование кода**:
    *   Переписать все комментарии в формате RST, включая описание модуля, функций и переменных.
    *   Добавить docstring к каждой функции, описывающие назначение, параметры и возвращаемое значение.
2.  **Обработка исключений**:
    *   Добавить обработку исключений для возможных ошибок, например, при вводе пользователя.
    *   Использовать `logger.error` для логирования ошибок.
3.  **Импорты**:
    *   Добавить необходимые импорты, такие как `from src.logger.logger import logger`.
4.  **Избегать try-except**:
    *   Избегать избыточного использования try-except, предпочитая обработку ошибок с помощью `logger.error`.
5.  **Унификация стиля**:
    *   Использовать одинарные кавычки (`'`) во всем коде.

**Оптимизированный код**

```python
"""
Модуль игры "Снупи"
=========================================================================================

Этот модуль реализует игру "Снупи", в которой компьютер выбирает случайное слово,
а игрок пытается его отгадать, вводя буквы.

Правила игры:
1. Компьютер выбирает случайное слово из списка.
2. Игрок вводит одну букву.
3. Компьютер показывает позиции угаданных букв.
4. Игра продолжается, пока игрок не угадает все буквы.

Пример использования
--------------------

.. code-block:: python

    play_snoopy_game()
"""

import random
from src.logger.logger import logger


def choose_word(word_list: list) -> str:
    """
    Выбирает случайное слово из списка.

    :param word_list: Список слов.
    :return: Случайное слово из списка.
    """
    return random.choice(word_list)


def create_mask(word: str) -> list:
    """
    Создает маску слова, заменяя буквы на дефисы.

    :param word: Слово для создания маски.
    :return: Список дефисов, представляющий маску слова.
    """
    return ['-' for _ in word]


def update_mask(mask: list, word: str, letter: str) -> list:
    """
    Обновляет маску слова, показывая угаданные буквы.

    :param mask: Текущая маска слова.
    :param word: Исходное слово.
    :param letter: Угаданная буква.
    :return: Обновленная маска слова.
    """
    for i, char in enumerate(word):
        if char == letter:
            mask[i] = letter
    return mask


def play_snoopy_game():
    """
    Запускает игру "Снупи".

    Игра выбирает случайное слово из списка, и игрок пытается его угадать, вводя буквы.
    """
    word_list = ['SNOOPY', 'PEANUTS', 'CHARLIE']
    # Выбор случайного слова из списка
    target_word = choose_word(word_list).upper()
    # Создание маски для слова
    word_mask = create_mask(target_word)
    # Инициализация счетчика попыток
    number_of_guesses = 0

    # Основной цикл игры
    while True:
        # Вывод текущей маски слова
        print(' '.join(word_mask))
        # Увеличение счетчика попыток
        number_of_guesses += 1
        try:
            # Запрос ввода буквы у пользователя
            user_letter = input('Введите букву: ').upper()
        except Exception as e:
            logger.error(f'Ошибка ввода пользователя: {e}')
            continue

        # Проверка наличия введенной буквы в слове
        if user_letter in target_word:
            # Обновление маски слова
            word_mask = update_mask(word_mask, target_word, user_letter)

        # Проверка, угадано ли слово
        if '-' not in word_mask:
            print(f'ПОЗДРАВЛЯЮ! Вы угадали слово за {number_of_guesses} попыток! Слово было: {target_word}')
            break


if __name__ == '__main__':
    # Запуск игры, если скрипт запущен напрямую
    play_snoopy_game()
```