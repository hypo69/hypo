# Модуль hypotez/src/suppliers/supplier.py

## Обзор

Модуль `supplier.py` определяет базовый класс `Supplier` для работы с поставщиками.  Класс отвечает за загрузку настроек, выполнение логина и запуск сценариев.

## Классы

### `Supplier`

**Описание**: Базовый класс для работы с поставщиками.  Представляет собой объект, содержащий информацию о поставщике, его настройки и методы для взаимодействия с ним.

**Атрибуты**:

- `supplier_id` (Optional[int]): Идентификатор поставщика.
- `supplier_prefix` (str): Префикс имени поставщика (используется для импорта модулей).
- `locale` (str): Код локали в формате ISO 639-1 (по умолчанию 'en').
- `price_rule` (Optional[str]): Правило расчета цен.
- `related_modules` (Optional[ModuleType]): Модуль, содержащий функции, специфичные для данного поставщика.
- `scenario_files` (List[str]): Список файлов сценариев для выполнения.
- `current_scenario` (Dict[str, Any]): Текущий сценарий, который выполняется.
- `locators` (Dict[str, Any]): Локаторы для элементов веб-страницы.
- `driver` (Optional[Driver]): Веб-драйвер.

**Методы**:

- `__init__(self, **data)`: Инициализирует поставщика, загружает конфигурацию.
- `_payload(self) -> bool`: Загружает параметры поставщика из файла конфигурации (`j_loads_ns`). Возвращает `True`, если загрузка успешна, иначе `False`.
- `login(self) -> bool`: Выполняет вход на сайт поставщика. Возвращает `True`, если вход выполнен успешно, иначе `False`.
- `run_scenario_files(self, scenario_files: Optional[str | List[str]] = None) -> bool`: Выполняет один или несколько файлов сценариев.
- `run_scenarios(self, scenarios: dict | List[dict]) -> bool`: Выполняет список или один сценарий.


## Функции

(В этом модуле нет функций, только класс.)


## Обработка исключений

- `DefaultSettingsException`: Возникает при ошибке инициализации поставщика.
- `ModuleNotFoundError`: Возникает, если модуль, связанный с поставщиком, не найден.
- `ValueError`: Возникает, если `supplier_prefix` пустой.
- `Exception`: Общее исключение при загрузке настроек поставщика.


## Примеры использования

```python
# Пример создания объекта Supplier
from hypotez.src.suppliers.supplier import Supplier

supplier = Supplier(supplier_prefix='example_supplier')

# ... Проверка успешной инициализации ...

# Выполнение сценариев
supplier.run_scenario_files()
supplier.run_scenarios({'scenario': 'some_scenario'})
```

## Дополнительные замечания

- Метод `_payload` осуществляет импорт модуля, связанного с поставщиком, и загрузку настроек из файла `settings.json`.
- Используются типы данных из `typing` и `pydantic`.
- Логирование осуществляется с помощью `logger`.
- Класс `Supplier` использует `BaseModel` из `pydantic`.
- Важно проверить корректность загрузки настроек и обработки исключений.