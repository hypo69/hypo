# Документация для разработчика: `request.json`

## Обзор

Файл `request.json` содержит структуру JSON, описывающую формат запроса к API Google Gemini. Этот файл определяет структуру данных, необходимую для отправки запросов к модели Gemini, включая параметры конфигурации, настройки безопасности, содержимое запроса и другие метаданные.

## Подробнее

Этот файл используется для определения структуры запроса, отправляемого к API Google Gemini. Он включает в себя различные параметры, такие как кэшированный контент, содержимое запроса, системные инструкции, инструменты, настройки безопасности и конфигурация генерации. Анализ данного файла позволяет разработчикам понимать, как правильно формировать запросы к API Gemini, а также какие параметры можно настраивать для получения желаемого результата.

## Структура JSON

### `cachedContent`

- **Описание**: Закешированное содержимое.
- **Тип**: `string`

### `contents`

- **Описание**: Массив объектов, представляющих содержимое запроса. Каждый объект содержит роль и части содержимого.
- **Тип**: `array`

#### Элементы массива `contents`

##### `role`

- **Описание**: Роль содержимого (например, "user" или "model").
- **Тип**: `string`

##### `parts`

- **Описание**: Массив объектов, представляющих части содержимого. Каждая часть может содержать текст, встроенные данные (например, изображение), данные файла или метаданные видео.
- **Тип**: `array`

###### Элементы массива `parts`

-   Объект, содержащий один из следующих полей (может быть только одно):

    -   `text`

        -   **Описание**: Текст.
        -   **Тип**: `string`

    -   `inlineData`

        -   **Описание**: Встроенные данные (например, изображение).
        -   **Тип**: `object`

        -   `mimeType`

            -   **Описание**: MIME-тип данных.
            -   **Тип**: `string`

        -   `data`

            -   **Описание**: Данные, представленные в виде строки.
            -   **Тип**: `string`

    -   `fileData`

        -   **Описание**: Данные файла.
        -   **Тип**: `object`

        -   `mimeType`

            -   **Описание**: MIME-тип файла.
            -   **Тип**: `string`

        -   `fileUri`

            -   **Описание**: URI файла.
            -   **Тип**: `string`

    -   `videoMetadata`

        -   **Описание**: Метаданные видео.
        -   **Тип**: `object`

        -   `startOffset`

            -   **Описание**: Смещение начала видео.
            -   **Тип**: `object`

            -   `seconds`

                -   **Описание**: Секунды.
                -   **Тип**: `integer`

            -   `nanos`

                -   **Описание**: Наносекунды.
                -   **Тип**: `integer`

        -   `endOffset`

            -   **Описание**: Смещение конца видео.
            -   **Тип**: `object`

            -   `seconds`

                -   **Описание**: Секунды.
                -   **Тип**: `integer`

            -   `nanos`

                -   **Описание**: Наносекунды.
                -   **Тип**: `integer`

### `systemInstruction`

- **Описание**: Системные инструкции для модели.
- **Тип**: `object`

-   `role`

    -   **Описание**: Роль системной инструкции.
    -   **Тип**: `string`

-   `parts`

    -   **Описание**: Массив объектов, представляющих части системной инструкции.
    -   **Тип**: `array`

    -   `text`

        -   **Описание**: Текст инструкции.
        -   **Тип**: `string`

### `tools`

- **Описание**: Список инструментов, которые модель может использовать.
- **Тип**: `array`

#### Элементы массива `tools`

##### `functionDeclarations`

-   **Описание**: Массив объявлений функций.
-   **Тип**: `array`

    -   `name`

        -   **Описание**: Имя функции.
        -   **Тип**: `string`

    -   `description`

        -   **Описание**: Описание функции.
        -   **Тип**: `string`

    -   `parameters`

        -   **Описание**: Параметры функции (описываются схемой JSON).
        -   **Тип**: `object`

### `safetySettings`

- **Описание**: Настройки безопасности.
- **Тип**: `array`

#### Элементы массива `safetySettings`

##### `category`

-   **Описание**: Категория вреда.
-   **Тип**: `enum` (`HarmCategory`)

##### `threshold`

-   **Описание**: Порог блокировки.
-   **Тип**: `enum` (`HarmBlockThreshold`)

### `generationConfig`

- **Описание**: Конфигурация генерации.
- **Тип**: `object`

-   `temperature`

    -   **Описание**: Температура (случайность) генерации.
    -   **Тип**: `number`

-   `topP`

    -   **Описание**: Top-P (вероятностная обрезка) генерации.
    -   **Тип**: `number`

-   `topK`

    -   **Описание**: Top-K (выборка из K лучших) генерации.
    -   **Тип**: `number`

-   `candidateCount`

    -   **Описание**: Количество кандидатов.
    -   **Тип**: `integer`

-   `maxOutputTokens`

    -   **Описание**: Максимальное количество выходных токенов.
    -   **Тип**: `integer`

-   `presencePenalty`

    -   **Описание**: Штраф за присутствие.
    -   **Тип**: `float`

-   `frequencyPenalty`

    -   **Описание**: Штраф за частоту.
    -   **Тип**: `float`

-   `stopSequences`

    -   **Описание**: Список стоп-последовательностей.
    -   **Тип**: `array`

    -   `string`

        -   **Описание**: Элемент стоп-последовательности.
        -   **Тип**: `string`

-   `responseMimeType`

    -   **Описание**: MIME-тип ответа.
    -   **Тип**: `string`

-   `responseSchema`

    -   **Описание**: Схема ответа.
    -   **Тип**: `schema`

-   `seed`

    -   **Описание**: Зерно для случайной генерации.
    -   **Тип**: `integer`

-   `responseLogprobs`

    -   **Описание**: Включить лог-вероятности ответа.
    -   **Тип**: `boolean`

-   `logprobs`

    -   **Описание**: Количество лог-вероятностей.
    -   **Тип**: `integer`

-   `audioTimestamp`

    -   **Описание**: Включить метки времени аудио.
    -   **Тип**: `boolean`

### `labels`

- **Описание**: Метки.
- **Тип**: `object`

-   `string`

    -   **Описание**: Ключ метки.
    -   **Тип**: `string`

-   `string`

    -   **Описание**: Значение метки.
    -   **Тип**: `string`