# Модуль `testing_utils`

## Обзор

Модуль `testing_utils` содержит вспомогательные функции для тестирования компонентов проекта `TinyTroupe`.  Он предоставляет инструменты для проверки действий, стимулов, а также для работы с агентами и окружением.  Включает функции для проверки наличия определённых типов действий/стимулов, проверки соответствия конфигураций агентов, работы с кэшированием ответов OpenAI, создания тестовых сообщений и удаления файлов.

## Оглавление

- [Модуль `testing_utils`](#модуль-testing_utils)
- [Функции](#функции)
    - [`contains_action_type`](#contains_action_type)
    - [`contains_action_content`](#contains_action_content)
    - [`contains_stimulus_type`](#contains_stimulus_type)
    - [`contains_stimulus_content`](#contains_stimulus_content)
    - [`terminates_with_action_type`](#terminates_with_action_type)
    - [`proposition_holds`](#proposition_holds)
    - [`only_alphanumeric`](#only_alphanumeric)
    - [`create_test_system_user_message`](#create_test_system_user_message)
    - [`agents_configs_are_equal`](#agents_configs_are_equal)
- [Функции ввода-вывода](#функции-ввода-вывода)
    - [`remove_file_if_exists`](#remove_file_if_exists)
    - [`get_relative_to_test_path`](#get_relative_to_test_path)
- [Фикстуры](#фикстуры)
    - [`focus_group_world`](#focus_group_world)
    - [`setup`](#setup)


## Функции

### `contains_action_type`

**Описание**: Проверяет, содержит ли список действий действие заданного типа.

**Параметры**:
- `actions` (list): Список словарей, каждый из которых представляет собой действие. Ожидается, что каждый словарь содержит ключ `action` со своим типом.
- `action_type` (str): Тип действия, который ищется.

**Возвращает**:
- bool: `True`, если действие заданного типа найдено, `False` в противном случае.


### `contains_action_content`

**Описание**: Проверяет, содержит ли список действий действие с заданным содержанием.

**Параметры**:
- `actions` (list): Список словарей, каждый из которых представляет собой действие.
- `action_content` (str):  Контент действия, который ищется.

**Возвращает**:
- bool: `True`, если действие с заданным содержанием найдено, `False` в противном случае.


### `contains_stimulus_type`

**Описание**: Проверяет, содержит ли список стимулов стимул заданного типа.

**Параметры**:
- `stimuli` (list): Список словарей, каждый из которых представляет собой стимул.
- `stimulus_type` (str): Тип стимула, который ищется.

**Возвращает**:
- bool: `True`, если стимул заданного типа найдено, `False` в противном случае.


### `contains_stimulus_content`

**Описание**: Проверяет, содержит ли список стимулов стимул с заданным содержанием.

**Параметры**:
- `stimuli` (list): Список словарей, каждый из которых представляет собой стимул.
- `stimulus_content` (str):  Контент стимула, который ищется.

**Возвращает**:
- bool: `True`, если стимул с заданным содержанием найдено, `False` в противном случае.


### `terminates_with_action_type`

**Описание**: Проверяет, завершается ли список действий действием заданного типа.

**Параметры**:
- `actions` (list): Список словарей, каждый из которых представляет собой действие.
- `action_type` (str): Тип действия, который ищется.

**Возвращает**:
- bool: `True`, если список действий завершается действием заданного типа, `False` в противном случае.


### `proposition_holds`

**Описание**: Проверяет истинность заданного утверждения с помощью вызова LLM.

**Параметры**:
- `proposition` (str): Утверждение для проверки.

**Возвращает**:
- bool: `True`, если утверждение истинно, `False` если ложно. Возможны исключения в случае нестандартного ответа LLM.


### `only_alphanumeric`

**Описание**: Возвращает строку, содержащую только буквенно-цифровые символы из входной строки.


**Параметры**:
- `string` (str): Входная строка.

**Возвращает**:
- str: Строка, содержащая только буквенно-цифровые символы.


### `create_test_system_user_message`

**Описание**: Создаёт список, содержащий одно системное сообщение и одно пользовательское сообщение.

**Параметры**:
- `user_prompt` (str, optional): Пользовательский запрос. По умолчанию `None`.
- `system_prompt` (str, optional): Системное сообщение. По умолчанию `"You are a helpful AI assistant."`.

**Возвращает**:
- list: Список системного и пользовательского сообщений.


### `agents_configs_are_equal`

**Описание**: Проверяет, равны ли конфигурации двух агентов, игнорируя (по желанию) имя.


**Параметры**:
- `agent1`: Первый агент.
- `agent2`: Второй агент.
- `ignore_name` (bool, optional): Флаг, определяющий игнорировать ли сравнение имени.

**Возвращает**:
- bool: `True`, если конфигурации равны, `False` в противном случае.



## Функции ввода-вывода

### `remove_file_if_exists`

**Описание**: Удаляет файл, если он существует.


**Параметры**:
- `file_path` (str): Путь к файлу.


### `get_relative_to_test_path`

**Описание**: Возвращает путь к тестовому файлу с заданным суффиксом.


**Параметры**:
- `path_suffix` (str): Суффикс пути.

**Возвращает**:
- str: Путь к тестовому файлу.



## Фикстуры

### `focus_group_world`

**Описание**: Возвращает тестовое окружение `TinyWorld` с заданными агентами.

**Возвращает**:
- `TinyWorld`: Тестовое окружение.


### `setup`

**Описание**: Фикстура для очистки агентов и окружений перед запуском тестов.