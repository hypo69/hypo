```markdown
# Модуль `hypotez/src/ai/gemini/generative_ai.py`

## Обзор

Этот модуль предоставляет класс `GoogleGenerativeAI` для взаимодействия с API Google Generative AI. Он позволяет отправлять запросы, получать ответы и сохранять диалоги в текстовые и JSON файлы. Класс также умеет описывать изображения.

## Оглавление

- [GoogleGenerativeAI](#googlegenerativeai)
- [Функции](#функции)
    - [chat](#chat)
    - [ask](#ask)
    - [describe_image](#describe_image)
    - [_save_dialogue](#_save_dialogue)


## Классы

### `GoogleGenerativeAI`

**Описание**: Класс для работы с API Google Generative AI. Предоставляет методы для отправки запросов, получения ответов и сохранения диалогов.

**Атрибуты**:
- `MODELS` (List[str]): Список доступных моделей AI.
- `api_key` (str): Ключ API для доступа к генеративной модели.
- `model_name` (str): Название модели для использования.
- `generation_config` (Dict): Конфигурация для генерации.
- `mode` (str): Режим работы модели.
- `dialogue_log_path` (Optional[Path]): Путь для логирования диалогов.
- `dialogue_txt_path` (Optional[Path]): Путь для сохранения текстовых файлов диалогов.
- `history_dir` (Path): Директория для хранения истории.
- `history_txt_file` (Optional[Path]): Путь к файлу для хранения истории в формате текста.
- `history_json_file` (Optional[Path]): Путь к файлу для хранения истории в формате JSON.
- `model` (Optional[genai.GenerativeModel]): Объект модели Google Generative AI.
- `system_instruction` (Optional[str]): Инструкция для системы.


**Методы**:
- `__init__`: Инициализация модели.
- `__post_init__`: Метод для инициализации модели после создания экземпляра.
- `_save_dialogue`: Сохранить диалог в текстовый и JSON файл с управлением размером файлов.
- `ask`: Отправить запрос к модели и получить ответ.
- `describe_image`: Генерирует описание изображения.


## Функции

### `chat`

**Описание**: Запускает интерактивную сессию чата с моделью.

**Параметры**:
Нет.

**Возвращает**:
- Нет.

**Вызывает исключения**:
- Нет.


### `ask`

**Описание**: Отправить запрос к модели и получить ответ.

**Параметры**:
- `q` (str): Вопрос, который будет отправлен модели.
- `attempts` (int, optional): Количество попыток для получения ответа. По умолчанию 3.

**Возвращает**:
- `Optional[str]`: Ответ от модели или `None`, если ответ не был получен.

**Вызывает исключения**:
- Любые исключения, которые могут возникнуть при работе с API Google Generative AI.


### `describe_image`

**Описание**: Генерирует описание изображения.

**Параметры**:
- `image_path` (Path): Путь к изображению, которое нужно описать.

**Возвращает**:
- `Optional[str]`: Описание изображения или `None`, если произошла ошибка.

**Вызывает исключения**:
- Любые исключения, которые могут возникнуть при чтении файла или работе с API Google Generative AI.


### `_save_dialogue`

**Описание**: Сохранение диалога в текстовые и JSON файлы.

**Параметры**:
- `dialogue` (list): Список сообщений, представляющих диалог, который нужно сохранить.

**Возвращает**:
- Нет.

**Вызывает исключения**:
- Любые исключения, связанные с записью в файлы.

```
