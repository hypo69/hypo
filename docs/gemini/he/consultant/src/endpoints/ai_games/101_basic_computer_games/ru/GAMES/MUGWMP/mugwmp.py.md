# Анализ кода модуля `mugwmp.py`

**Качество кода**
- **Соответствие требованиям к формату кода (1-10):** 8
    - **Преимущества:**
        - Код хорошо структурирован и читаем, разделен на функции для генерации числа и подсчета MUG/WMP.
        - Присутствуют подробные комментарии, объясняющие назначение каждой части кода.
        - Логика игры реализована правильно, согласно описанию.
        - Используются осмысленные имена переменных и функций.
        - Блок-схема хорошо визуализирует логику игры.
    - **Недостатки:**
        - Отсутствует docstring для модуля.
        - Отсутствуют docstring для функций в формате reStructuredText.
        - Не используется logger для обработки ошибок и отладки.
        - Используется стандартный `input()` для пользовательского ввода, что не оптимально для автоматизированного тестирования.
        - Проверка корректности пользовательского ввода реализована с помощью множественных условий в `if`, что можно улучшить.

**Рекомендации по улучшению**

1.  **Добавить docstring для модуля:** Добавить описание модуля в формате RST в начале файла.
2.  **Добавить docstring для функций:** Добавить подробное описание функций `generate_secret_number` и `count_mug_wmp` в формате RST с описанием параметров и возвращаемого значения.
3.  **Использовать logger:** Заменить `print` на `logger.info`, `logger.debug` или `logger.error` для записи сообщений и ошибок.
4.  **Улучшить проверку ввода:** Использовать более читаемый способ проверки корректности ввода пользователя, например, вынести проверку в отдельную функцию.
5.  **Улучшить читаемость:** Разделить код на более мелкие функции для лучшей читаемости.

**Улучшенный код**
```python
"""
Модуль игры "MUGWMP"
====================

Игра "MUGWMP" - это текстовая игра, в которой игрок угадывает четырехзначное число,
сгенерированное компьютером. После каждой попытки игрок получает подсказки в виде
количества правильно угаданных цифр на своих местах (MUG) и количества правильно
угаданных цифр не на своих местах (WMP). Цель - угадать число за минимальное количество попыток.

:Использование:

    При запуске скрипта, игра начинается автоматически.
    Игрок вводит четырехзначные числа, пока не угадает загаданное компьютером.
"""
import random  # Импортируем модуль random для генерации случайных чисел
from src.logger.logger import logger  # Импортируем logger для логирования

def generate_secret_number() -> str:
    """
    Генерирует случайное четырехзначное число с уникальными цифрами.

    :return: Строка, представляющая четырехзначное число.
    :rtype: str
    """
    digits = list(range(10))  # Создаем список цифр от 0 до 9
    random.shuffle(digits)  # Перемешиваем цифры случайным образом
    secret_number = "".join(map(str, digits[:4]))  # Преобразуем первые 4 цифры в строку
    logger.debug(f'Сгенерировано секретное число: {secret_number}')  # Логируем сгенерированное число
    return secret_number # Возвращаем сгенерированное число

def count_mug_wmp(secret: str, guess: str) -> tuple[int, int]:
    """
    Считает количество MUG (совпадений на своих местах) и WMP (совпадений не на своих местах).

    :param secret: Секретное число.
    :type secret: str
    :param guess: Предположение игрока.
    :type guess: str
    :return: Кортеж, содержащий количество MUG и WMP.
    :rtype: tuple[int, int]
    """
    mug = 0 # Инициализируем счетчик MUG
    wmp = 0 # Инициализируем счетчик WMP
    for i in range(len(secret)):  # Итерируемся по цифрам секретного числа
        if secret[i] == guess[i]:  # Если цифра на текущей позиции совпадает, увеличиваем счетчик MUG
            mug += 1
        elif guess[i] in secret:  # Если цифра из предположения есть в секретном числе, но не на своей позиции, увеличиваем счетчик WMP
            wmp += 1
    logger.debug(f'Результат подсчета MUG/WMP: MUG = {mug}, WMP = {wmp}')  # Логируем результат подсчета
    return mug, wmp # Возвращаем кортеж с MUG и WMP

def is_valid_guess(guess: str) -> bool:
    """
    Проверяет, является ли введенное число корректным (четырехзначным и с уникальными цифрами).

    :param guess: Предположение игрока.
    :type guess: str
    :return: True, если число корректно, False в противном случае.
    :rtype: bool
    """
    if len(guess) != 4 or not guess.isdigit() or len(set(guess)) != 4: # Проверяем длину, наличие цифр и уникальность
         logger.error(f'Некорректный ввод: {guess}. Введите четырехзначное число с уникальными цифрами') # Логируем ошибку
         return False # Возвращаем False, если ввод некорректный
    return True # Возвращаем True, если ввод корректный

def play_mugwmp():
    """
    Запускает игру "MUGWMP".
    """
    # 1. Генерируем случайное четырехзначное число с уникальными цифрами
    secret_number = generate_secret_number()

    # 2. Инициализируем счетчик попыток
    number_of_guesses = 0

    # 3. Основной игровой цикл
    while True:
        # 3.1. Увеличиваем счетчик попыток
        number_of_guesses += 1

        # 3.2. Запрашиваем ввод числа у пользователя
        while True:
            user_guess = input("Введите четырехзначное число с уникальными цифрами: ")

            # 3.3. Проверяем корректность ввода
            if is_valid_guess(user_guess):
                break # Если ввод корректный, выходим из цикла
            else:
                print("Ошибка ввода. Пожалуйста, введите корректное четырехзначное число с уникальными цифрами.") # Выводим сообщение об ошибке

        # 3.4. Проверяем, угадано ли число
        if user_guess == secret_number: # Если число угадано
            print(f"ПОЗДРАВЛЯЮ! Вы угадали число за {number_of_guesses} попыток!") # Выводим сообщение о победе
            logger.info(f'Игрок угадал число {secret_number} за {number_of_guesses} попыток.') # Логируем результат
            break  # Завершаем цикл, если число угадано

        # 3.5. Подсчитываем MUG и WMP
        mug, wmp = count_mug_wmp(secret_number, user_guess) # Считаем MUG и WMP

        # 3.6. Выводим подсказку
        print(f"MUG = {mug}, WMP = {wmp}") # Выводим подсказку

if __name__ == '__main__':
    play_mugwmp() # Запускаем игру
```