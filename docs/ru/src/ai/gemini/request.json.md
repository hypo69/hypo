# Документация для `request.json`

## Обзор

Файл `request.json` содержит структуру JSON, описывающую формат запроса к модели Gemini. Он определяет параметры и типы данных, используемые для взаимодействия с API Gemini, включая содержимое запроса, настройки безопасности, конфигурацию генерации и инструменты.

## Подробней

Этот файл предоставляет схему для создания запросов к API Gemini. Он описывает структуру JSON, которую необходимо использовать для отправки запросов к модели Gemini. Схема включает определения для различных полей, таких как `cachedContent`, `contents`, `systemInstruction`, `tools`, `safetySettings`, `generationConfig` и `labels`. Каждый из этих полей имеет свою структуру и назначение, что позволяет точно настроить запрос к модели.

## Структура JSON

### `cachedContent`

**Описание**: Кэшированное содержимое запроса.

**Как работает**: Представляет собой строку, содержащую кэшированную версию содержимого запроса. Может использоваться для оптимизации запросов, чтобы избежать повторной обработки одних и тех же данных.

**Параметры**:
-   Тип: `string`

### `contents`

**Описание**: Массив содержимого запроса.

**Как работает**: Представляет собой массив объектов, каждый из которых содержит роль и части контента. Каждая часть контента может быть текстом, встроенными данными (например, изображением) или ссылкой на файл.

**Параметры**:
-   Тип: `array`
-   Элементы массива:
    -   `role` (string): Роль содержимого (например, "user" или "model").
    -   `parts` (array): Массив частей контента.
        -   `text` (string): Текстовое содержимое.
        -   `inlineData` (object): Встроенные данные.
            -   `mimeType` (string): MIME-тип данных.
            -   `data` (string): Данные в формате base64.
        -   `fileData` (object): Ссылка на файл.
            -   `mimeType` (string): MIME-тип файла.
            -   `fileUri` (string): URI файла.
        -   `videoMetadata` (object): Метаданные видео.
            -   `startOffset` (object): Начальное смещение.
                -   `seconds` (integer): Секунды.
                -   `nanos` (integer): Наносекунды.
            -   `endOffset` (object): Конечное смещение.
                -   `seconds` (integer): Секунды.
                -   `nanos` (integer): Наносекунды.

### `systemInstruction`

**Описание**: Системные инструкции для модели.

**Как работает**: Предоставляет инструкции для модели, которые определяют ее поведение и контекст.

**Параметры**:
-   `role` (string): Роль инструкции (например, "system").
-   `parts` (array): Массив частей инструкции.
    -   `text` (string): Текстовое содержимое инструкции.

### `tools`

**Описание**: Инструменты, доступные для модели.

**Как работает**: Определяет набор инструментов, которые модель может использовать для выполнения запроса.

**Параметры**:
-   `functionDeclarations` (array): Массив объявлений функций.
    -   `name` (string): Имя функции.
    -   `description` (string): Описание функции.
    -   `parameters` (object): Параметры функции.

### `safetySettings`

**Описание**: Настройки безопасности для фильтрации контента.

**Как работает**: Определяет параметры безопасности, которые используются для фильтрации контента, генерируемого моделью.

**Параметры**:
-   `category` (enum): Категория вредоносности.
-   `threshold` (enum): Порог блокировки.

### `generationConfig`

**Описание**: Конфигурация генерации контента.

**Как работает**: Определяет параметры, которые управляют процессом генерации контента, такие как температура, вероятность выбора наиболее вероятного токена и максимальное количество токенов в выходных данных.

**Параметры**:
-   `temperature` (number): Температура генерации.
-   `topP` (number): Вероятность выбора наиболее вероятного токена.
-   `topK` (number): Количество наиболее вероятных токенов для выбора.
-   `candidateCount` (integer): Количество кандидатов для генерации.
-   `maxOutputTokens` (integer): Максимальное количество токенов в выходных данных.
-   `presencePenalty` (float): Штраф за повторение токенов.
-   `frequencyPenalty` (float): Штраф за частоту токенов.
-   `stopSequences` (array): Список стоп-последовательностей.
-   `responseMimeType` (string): MIME-тип ответа.
-   `responseSchema` (schema): Схема ответа.
-   `seed` (integer): Зерно для случайной генерации.
-   `responseLogprobs` (boolean): Флаг для включения лог-вероятностей ответа.
-   `logprobs` (integer): Количество лог-вероятностей.
-   `audioTimestamp` (boolean): Флаг для включения временных меток аудио.

### `labels`

**Описание**: Метки для запроса.

**Как работает**: Предоставляет возможность добавлять метки к запросу для организации и фильтрации.

**Параметры**:
-   Тип: `object`
-   Ключи: `string`
-   Значения: `string`