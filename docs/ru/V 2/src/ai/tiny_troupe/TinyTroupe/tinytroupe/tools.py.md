# Модуль `tools.py`

## Обзор

Модуль `tools.py` предоставляет набор инструментов, которые агенты могут использовать для выполнения специализированных задач. Включает базовый класс `TinyTool` и конкретные реализации, такие как `TinyCalendar` для управления событиями и `TinyWordProcessor` для создания документов.

## Содержание

- [Классы](#Классы)
    - [`TinyTool`](#TinyTool)
    - [`TinyCalendar`](#TinyCalendar)
    - [`TinyWordProcessor`](#TinyWordProcessor)
- [Импортируемые модули](#Импортируемые-модули)

## Классы

### `TinyTool`

**Описание**: Базовый класс для всех инструментов, предоставляющий общую логику для управления доступом, побочными эффектами и обработкой действий.

**Методы**:

- `__init__(self, name, description, owner=None, real_world_side_effects=False, exporter=None, enricher=None)`
    
    **Описание**: Инициализирует новый инструмент.
    
    **Параметры**:
    - `name` (str): Имя инструмента.
    - `description` (str): Краткое описание инструмента.
    - `owner` (Optional[str]): Агент, владеющий инструментом. Если `None`, инструмент может использовать любой агент. По умолчанию `None`.
    - `real_world_side_effects` (bool): Указывает, имеет ли инструмент побочные эффекты в реальном мире. По умолчанию `False`.
    - `exporter` (Optional[ArtifactExporter]): Экспортер для сохранения результатов. По умолчанию `None`.
    - `enricher` (Optional[TinyEnricher]): Обогатитель для расширения результатов. По умолчанию `None`.
- `_process_action(self, agent, action: dict) -> bool`

    **Описание**: Абстрактный метод для обработки действий. Должен быть реализован в подклассах.

    **Параметры**:
        - `agent` (Agent): Агент, выполняющий действие.
        - `action` (dict): Словарь, представляющий действие.

    **Возвращает**:
        - `bool`: `True`, если действие обработано успешно, иначе `False`.

    **Вызывает исключения**:
        - `NotImplementedError`: Если метод не реализован в подклассе.
- `_protect_real_world(self)`

    **Описание**: Проверяет и предупреждает о наличии побочных эффектов в реальном мире.

- `_enforce_ownership(self, agent)`

    **Описание**: Проверяет права владения инструментом.

    **Параметры**:
        - `agent` (Agent): Агент, пытающийся использовать инструмент.

    **Вызывает исключения**:
        - `ValueError`: Если агент не является владельцем инструмента.
- `set_owner(self, owner)`

    **Описание**: Устанавливает владельца инструмента.

    **Параметры**:
        - `owner` (Agent): Агент, который становится владельцем инструмента.
-  `actions_definitions_prompt(self) -> str`
    
     **Описание**: Абстрактный метод для получения описания действий, которые может выполнять инструмент.
    
    **Возвращает**:
        - `str`: Описание действий инструмента.
    
    **Вызывает исключения**:
        - `NotImplementedError`: Если метод не реализован в подклассе.
- `actions_constraints_prompt(self) -> str`

    **Описание**: Абстрактный метод для получения ограничений для действий инструмента.

    **Возвращает**:
        - `str`: Ограничения для действий инструмента.
    
    **Вызывает исключения**:
        - `NotImplementedError`: Если метод не реализован в подклассе.

- `process_action(self, agent, action: dict) -> bool`
    
    **Описание**: Обрабатывает действие агента, проверяя побочные эффекты и права владения.
    
    **Параметры**:
       - `agent` (Agent): Агент, выполняющий действие.
       - `action` (dict): Словарь, представляющий действие.
    
    **Возвращает**:
        - `bool`: `True`, если действие обработано успешно, иначе `False`.

### `TinyCalendar`

**Описание**: Инструмент для управления календарем, позволяющий агентам отслеживать встречи и события.

**Методы**:

- `__init__(self, owner=None)`
    
    **Описание**: Инициализирует календарь.
    
    **Параметры**:
    - `owner` (Optional[str]): Владелец календаря. По умолчанию `None`.
- `add_event(self, date, title, description=None, owner=None, mandatory_attendees=None, optional_attendees=None, start_time=None, end_time=None)`

    **Описание**: Добавляет новое событие в календарь.
    
    **Параметры**:
    - `date` (str): Дата события.
    - `title` (str): Название события.
    - `description` (Optional[str]): Описание события. По умолчанию `None`.
    - `owner` (Optional[str]): Владелец события. По умолчанию `None`.
    - `mandatory_attendees` (Optional[list]): Список обязательных участников. По умолчанию `None`.
    - `optional_attendees` (Optional[list]): Список приглашенных участников. По умолчанию `None`.
    - `start_time` (Optional[str]): Время начала события. По умолчанию `None`.
    - `end_time` (Optional[str]): Время окончания события. По умолчанию `None`.
- `find_events(self, year, month, day, hour=None, minute=None)`

    **Описание**: Ищет события по заданным критериям.
    
    **Параметры**:
    - `year` (int): Год события.
    - `month` (int): Месяц события.
    - `day` (int): День события.
    - `hour` (Optional[int]): Час события. По умолчанию `None`.
    - `minute` (Optional[int]): Минута события. По умолчанию `None`.
- `_process_action(self, agent, action) -> bool`
    
    **Описание**: Обрабатывает действия, связанные с календарем, такие как создание событий.
    
    **Параметры**:
        - `agent` (Agent): Агент, выполняющий действие.
        - `action` (dict): Словарь, представляющий действие.

    **Возвращает**:
        - `bool`: `True`, если действие обработано успешно, иначе `False`.
- `actions_definitions_prompt(self) -> str`
    
    **Описание**: Возвращает описание действий, которые может выполнять календарь.
    
    **Возвращает**:
         - `str`: Описание действий календаря.
- `actions_constraints_prompt(self) -> str`

    **Описание**: Возвращает ограничения для действий календаря.
    
    **Возвращает**:
        - `str`: Ограничения для действий календаря.

### `TinyWordProcessor`

**Описание**: Инструмент для создания документов, позволяющий агентам писать и сохранять текст.

**Методы**:

- `__init__(self, owner=None, exporter=None, enricher=None)`
    
    **Описание**: Инициализирует текстовый процессор.
    
    **Параметры**:
        - `owner` (Optional[str]): Владелец текстового процессора. По умолчанию `None`.
        - `exporter` (Optional[ArtifactExporter]): Экспортер для сохранения документов. По умолчанию `None`.
        - `enricher` (Optional[TinyEnricher]): Обогатитель для расширения контента. По умолчанию `None`.
- `write_document(self, title, content, author=None)`

    **Описание**: Создает и сохраняет документ.

    **Параметры**:
        - `title` (str): Заголовок документа.
        - `content` (str): Содержание документа в формате Markdown.
        - `author` (Optional[str]): Автор документа. По умолчанию `None`.
- `_process_action(self, agent, action) -> bool`

    **Описание**: Обрабатывает действия, связанные с текстовым процессором, такие как создание документов.
    
    **Параметры**:
        - `agent` (Agent): Агент, выполняющий действие.
        - `action` (dict): Словарь, представляющий действие.
    
    **Возвращает**:
         - `bool`: `True`, если действие обработано успешно, иначе `False`.

    **Вызывает исключения**:
        - `json.JSONDecodeError`: Если не удалось распарсить JSON содержимое.
- `actions_definitions_prompt(self) -> str`
    
    **Описание**: Возвращает описание действий, которые может выполнять текстовый процессор.
    
    **Возвращает**:
        - `str`: Описание действий текстового процессора.

- `actions_constraints_prompt(self) -> str`

    **Описание**: Возвращает ограничения для действий текстового процессора.
    
    **Возвращает**:
        - `str`: Ограничения для действий текстового процессора.

## Импортируемые модули

- `textwrap`: Используется для работы с текстом, включая удаление отступов.
- `json`: Используется для работы с JSON-форматом данных.
- `copy`: Используется для создания копий объектов.
- `logging`: Используется для логирования событий.
- `tinytroupe.utils`: Набор утилит, используемых в проекте.
- `tinytroupe.extraction`: Содержит класс `ArtifactExporter` для экспорта артефактов.
- `tinytroupe.enrichment`: Содержит класс `TinyEnricher` для обогащения контента.