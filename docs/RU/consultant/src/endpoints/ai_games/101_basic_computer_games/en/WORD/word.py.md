# Анализ кода модуля word.py

**Качество кода**
8
-  Плюсы
    - Код хорошо структурирован и логически понятен, следуя предоставленному алгоритму.
    - Присутствуют комментарии, объясняющие основные блоки кода и логику игры.
    - Используется функция для вычисления чисел Фибоначчи, что способствует модульности кода.
    - Обработка ошибок ввода гарантирует, что программа не сломается при некорректном вводе пользователя.
 -  Минусы
    - Код не соответствует требованиям к оформлению, а именно отсутствуют docstring и reStructuredText (RST) комментарии.
    - Используются стандартные `print` вместо логирования ошибок через `logger.error`.
    - Код не использует `j_loads` или `j_loads_ns` для загрузки данных, что, впрочем, не требуется в этом конкретном файле.
    - Отсутствует импорт `from src.logger.logger import logger`.

**Рекомендации по улучшению**

1.  **Документация**: Добавить docstring в формате reStructuredText (RST) для модуля и функции `fibonacci(n)`.
2.  **Логирование**: Заменить `print` на `logger.error` для вывода ошибок и `logger.info` для вывода сообщений. Добавить импорт `from src.logger.logger import logger`.
3.  **Комментарии**: Все комментарии `#` должны быть переписаны в формате RST, объясняющие каждый блок кода.
4.  **Избегать `try-except` без необходимости**: Использовать `logger.error` для обработки ошибок и не заворачивать весь ввод в `try-except`.
5.  **Использовать константы**: Если есть магические числа, лучше заменить на константы.

**Оптимизированный код**

```python
"""
Модуль, реализующий игру "Фибоначчи в степени".
====================================================

В этой игре компьютер выбирает случайное число, а игрок пытается угадать это число,
возведенное в степень числа Фибоначчи, соответствующего номеру попытки.

"""
import random
# TODO: Добавить импорт logger
from src.logger.logger import logger


def fibonacci(n: int) -> int:
    """
    Вычисляет n-е число Фибоначчи.

    :param n: Порядковый номер числа Фибоначчи.
    :type n: int
    :return: n-е число Фибоначчи.
    :rtype: int
    """
    if n <= 0:
        return 0
    elif n == 1:
        return 1
    else:
        a, b = 0, 1
        # код исполняет итеративный расчет чисел Фибоначчи
        for _ in range(2, n + 1):
            a, b = b, a + b
        return b


# Инициализация счетчика попыток
numberOfGuesses = 0
# Генерируем случайное число от 1 до 100
targetNumber = random.randint(1, 100)

# Основной игровой цикл
while True:
    # Увеличиваем количество попыток
    numberOfGuesses += 1
    # Вычисляем число Фибоначчи для текущей попытки
    fibonacciNumber = fibonacci(numberOfGuesses)
    # Возводим загаданное число в степень числа Фибоначчи
    poweredNumber = targetNumber ** fibonacciNumber

    # Запрашиваем ввод числа у пользователя
    try:
        # код запрашивает ввод числа у пользователя и преобразует его в целое число
        userGuess = int(input(f"Попытка {numberOfGuesses}: Введите число: "))
    except ValueError as e:
        # Логируем ошибку ввода
        logger.error("Пожалуйста, введите целое число.", exc_info=e)
        continue

    # Проверяем, угадано ли число
    if userGuess == poweredNumber:
        # Код выводит сообщение о победе с указанием количества попыток
        logger.info(f"ПОЗДРАВЛЯЮ! Вы угадали число за {numberOfGuesses} попыток!")
        break  # Завершаем цикл, если число угадано
    else:
         # Код сообщает, что нужно попробовать еще раз
         logger.info("Попробуйте ещё раз!")


"""
Объяснение кода:
================

1.  **Импорт модуля `random`**:
    -   `import random`: Импортирует модуль `random`, который используется для генерации случайного числа.
     -   `from src.logger.logger import logger`: Импортирует модуль `logger`, который используется для логирования ошибок.
2.  **Функция `fibonacci(n)`**:
    -   Определяет функцию `fibonacci(n)`, которая вычисляет n-е число Фибоначчи.
    -   Использует итеративный подход для расчета чисел Фибоначчи.
3.  **Инициализация переменных**:
    -   `numberOfGuesses = 0`: Инициализирует переменную `numberOfGuesses` для подсчета попыток игрока.
    -   `targetNumber = random.randint(1, 100)`: Генерирует случайное целое число в диапазоне от 1 до 100 и сохраняет его в `targetNumber`.
4.  **Основной цикл `while True:`**:
    -   Бесконечный цикл, который продолжается до тех пор, пока игрок не угадает число (будет выполнена команда `break`).
    -   `numberOfGuesses += 1`: Увеличивает счетчик попыток на 1 при каждом новом витке цикла.
    -   `fibonacciNumber = fibonacci(numberOfGuesses)`: Вызывает функцию `fibonacci` для получения числа Фибоначчи, соответствующего текущей попытке.
    -   `poweredNumber = targetNumber ** fibonacciNumber`: Вычисляет загаданное число в степени числа Фибоначчи.
    -   **Ввод данных**:
        -   `try...except ValueError`: Блок try-except обрабатывает возможные ошибки ввода. Если пользователь введет не целое число, то будет выведено сообщение об ошибке.
        -   `userGuess = int(input(f"Попытка {numberOfGuesses}: Введите число: "))`: Запрашивает у пользователя число и преобразует его в целое число, сохраняя результат в `userGuess`.
    -   **Условие победы**:
        -   `if userGuess == poweredNumber:`: Проверяет, равно ли введенное число вычисленному значению.
        -   `logger.info(f"ПОЗДРАВЛЯЮ! Вы угадали число за {numberOfGuesses} попыток!")`: Выводит сообщение о победе и количестве попыток.
        -   `break`: Завершает цикл (игру), если число угадано.
    -   **Подсказка**:
        -   `else:`: Если число не угадано, выводится сообщение "Попробуйте еще раз!".
"""
```