# Модуль для перевода файлов README
## Обзор

Модуль `translate_readme.py` предназначен для автоматического перевода файлов `README.md` на другие языки с использованием AI-моделей. В частности, он использует возможности библиотеки `g4f` для взаимодействия с различными провайдерами AI, такими как OpenAI. Модуль позволяет переводить текстовые части документа, сохраняя при этом элементы кода и некоторые специфические конструкции без изменений.

## Подробнее

Этот модуль важен для интернационализации документации проекта `hypotez`. Он позволяет автоматически создавать версии `README` на разных языках, что делает проект более доступным для международной аудитории. В процессе перевода учитываются определенные блоки и конструкции, которые требуется сохранить без изменений (например, примеры кода и разделы, связанные с авторскими правами).

## Функции

### `read_text`

```python
def read_text(text: str) -> str:
    """
    Извлекает текст из markdown-блока, определяя начало и конец блока по символам ```.

    Args:
        text (str): Исходный текст, содержащий markdown-блок.

    Returns:
        str: Текст, извлеченный из markdown-блока.

    Как работает функция:
    Функция принимает на вход строку текста и разбивает её на строки. Затем она определяет начало и конец markdown-блока,
    ориентируясь на строки, начинающиеся с ```. Извлекается текст между этими разделителями.

    Внутри функции происходят следующие действия и преобразования:
     A: Разбиение текста на строки.
     |
     -- C: Определение начала и конца markdown-блока.
     |
     D: Извлечение текста между разделителями.

     Где:
     A - `Разбиение текста`: Исходный текст разбивается на отдельные строки.
     C - `Определение границ блока`: Идентифицируются строки, отмечающие начало и конец блока.
     D - `Извлечение контента`: Формируется новый текст на основе найденных границ блока.

    Примеры:
    >>> text = "Some text\\n```\\nCode example\\n```\\nMore text"
    >>> read_text(text)
    'Code example'
    """
    ...
```

### `translate`

```python
async def translate(text: str) -> str:
    """
    Переводит предоставленный текст с использованием AI-провайдера.

    Args:
        text (str): Текст для перевода.

    Returns:
        str: Переведенный текст.

    Как работает функция:
    Функция принимает текст, добавляет к нему префикс с инструкцией о необходимости перевода на заданный язык,
    использует AI-провайдера для выполнения перевода, и возвращает результат. Особое внимание уделяется сохранению
    структуры markdown-блоков.

    Внутри функции происходят следующие действия и преобразования:
     A: Формирование запроса для AI-провайдера.
     |
     -- C: Запрос к AI-провайдеру на перевод текста.
     |
     D: Извлечение переведенного текста.

     Где:
     A - `Формирование запроса`: Подготавливается запрос, содержащий текст и инструкцию о переводе.
     C - `Вызов AI-провайдера`: Отправляется запрос к AI-провайдеру для выполнения перевода.
     D - `Получение результата`: Извлекается переведенный текст из ответа AI-провайдера.

    Примеры:
    >>> await translate("Hello, world!")
    'Привет, мир!'
    """
    ...
```

### `translate_part`

```python
async def translate_part(part: str, i: int) -> str:
    """
    Переводит часть текста, исключая блоки из списка `blocklist`, но обрабатывая элементы из `allowlist`.

    Args:
        part (str): Часть текста для перевода.
        i (int): Индекс части текста.

    Returns:
        str: Переведенная часть текста.

    Как работает функция:
    Функция проверяет, содержит ли текущая часть текста блоки, которые не нужно переводить (из `blocklist`).
    Если такие блоки обнаружены, то переводится только заголовок этого блока. Если в части текста содержатся элементы
    из `allowlist`, они также переводятся. В противном случае переводится вся часть текста.

    Внутри функции происходят следующие действия и преобразования:
     A: Проверка наличия запрещенных блоков.
     |
     -- C: Перевод заголовка и элементов из разрешенного списка (если есть).
     |
     D: Полный перевод текста (если нет запрещенных блоков).

     Где:
     A - `Проверка блоков`: Анализируется наличие запрещенных для перевода блоков.
     C - `Частичный перевод`: Переводятся только отдельные части текста (заголовок и элементы из разрешенного списка).
     D - `Полный перевод`: Выполняется полный перевод текста, если нет запрещенных блоков.

    Примеры:
    >>> await translate_part("## Copyright notice", 1)
    '## Авторское право'
    """
    ...
```

### `translate_readme`

```python
async def translate_readme(readme: str) -> str:
    """
    Переводит содержимое файла README.

    Args:
        readme (str): Содержимое файла README.

    Returns:
        str: Переведенное содержимое файла README.

    Как работает функция:
    Функция разбивает текст файла README на части, используя разделитель `## `. Затем она асинхронно переводит каждую
    часть, используя функцию `translate_part`. В конце все переведенные части объединяются в один текст.

    Внутри функции происходят следующие действия и преобразования:
     A: Разбиение текста на части.
     |
     -- C: Асинхронный перевод каждой части.
     |
     D: Объединение переведенных частей.

     Где:
     A - `Разбиение текста`: Текст README разбивается на отдельные части для параллельного перевода.
     C - `Асинхронный перевод`: Каждая часть текста переводится независимо с использованием асинхронных вызовов.
     D - `Сборка результата`: Переведенные части объединяются в единый текст README.

    Примеры:
    >>> await translate_readme("## Overview\\nSome text")
    '## Обзор\\nНекоторый текст'
    """
    ...
```