# Модуль GetGpt для работы с провайдером GetGpt в G4F
## Обзор

Модуль предназначен для взаимодействия с провайдером GetGpt в библиотеке G4F. Он предоставляет функциональность для создания запросов к API GetGpt и получения ответов. Включает в себя шифрование данных для безопасной передачи.

## Подробнее

Этот модуль содержит функции для шифрования запросов и отправки их на сервер GetGpt, а также для обработки потоковых ответов. Он использует библиотеку `requests` для выполнения HTTP-запросов и `Crypto.Cipher` для шифрования данных.

## Функции

### `_create_completion`

```python
def _create_completion(model: str, messages: list, stream: bool, **kwargs):
    """
    Создает запрос к API GetGpt и возвращает ответ.

    Args:
        model (str): Название модели для запроса.
        messages (list): Список сообщений для отправки.
        stream (bool): Флаг, указывающий, нужно ли использовать потоковый режим.
        **kwargs: Дополнительные параметры запроса.

    Returns:
        Generator[str, None, None]: Генератор, возвращающий части ответа в потоковом режиме.

    Как работает функция:
    1. Определяются две вложенные функции: `encrypt` и `pad_data`.
    2. Функция `encrypt` шифрует данные, используя AES-шифрование.
    3. Функция `pad_data` дополняет данные до размера, кратного размеру блока AES.
    4. Формируются заголовки запроса, включая `Content-Type`, `Referer` и `user-agent`.
    5. Создается JSON-представление данных запроса, включающее сообщения, параметры модели и UUID.
    6. Данные шифруются с использованием функции `encrypt`.
    7. Отправляется POST-запрос на `https://chat.getgpt.world/api/chat/stream` с шифрованными данными и потоковым режимом.
    8. Итерируется по строкам ответа, извлекая содержимое из JSON-структуры и возвращая его через генератор.

    Внутренние функции:

    ### `encrypt`

    ```python
    def encrypt(e):
        """
        Шифрует переданные данные с использованием AES-шифрования.

        Args:
            e (str): Данные для шифрования.

        Returns:
            str: Зашифрованные данные в шестнадцатеричном представлении.

        Как работает функция:
        1. Генерируются случайные значения для ключа `t` и вектора инициализации `n`.
        2. Данные `e` кодируются в байты.
        3. Создается объект шифрования AES в режиме CBC с использованием ключа и вектора инициализации.
        4. Данные дополняются до размера, кратного размеру блока AES, с использованием функции `pad_data`.
        5. Данные шифруются, и результат преобразуется в шестнадцатеричную строку.
        6. К зашифрованным данным добавляются ключ и вектор инициализации.

        """
    ```

    ### `pad_data`

    ```python
    def pad_data(data: bytes) -> bytes:
        """
        Дополняет данные до размера, кратного размеру блока AES.

        Args:
            data (bytes): Данные для дополнения.

        Returns:
            bytes: Дополненные данные.
        
        Как работает функция:
        1. Определяется размер блока AES.
        2. Вычисляется размер необходимого дополнения.
        3. Создается байтовая строка, содержащая байты, равные размеру дополнения.
        4. Исходные данные дополняются этой строкой.

        """
    ```

    ASCII-схема работы функции `_create_completion`:

    ```
    Создание JSON данных -> Шифрование данных (encrypt) -> Отправка POST запроса -> Получение потокового ответа -> Извлечение контента из ответа (JSON) -> Выдача контента через генератор
    ```

    Примеры:

    ```python
    # Пример вызова функции с минимальным набором параметров
    _create_completion(model='gpt-3.5-turbo', messages=[{'role': 'user', 'content': 'Hello'}], stream=True)

    # Пример вызова функции с дополнительными параметрами
    _create_completion(model='gpt-3.5-turbo', messages=[{'role': 'user', 'content': 'Hello'}], stream=True, temperature=0.7, max_tokens=100)
    ```
    """
```

### `params`

```python
params = f'g4f.Providers.{os.path.basename(__file__)[:-3]} supports: ' + \
    '(%s)' % ', '.join(\
        [f'{name}: {get_type_hints(_create_completion)[name].__name__}' for name in _create_completion.__code__.co_varnames[:_create_completion.__code__.co_argcount]])
"""
str: Строка, содержащая информацию о поддерживаемых параметрах функции `_create_completion`.
        Формируется динамически на основе аннотаций типов аргументов функции `_create_completion`.
        Используется для документирования и отладки.

"""