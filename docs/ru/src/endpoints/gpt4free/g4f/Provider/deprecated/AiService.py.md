# Модуль AiService

## Обзор

Модуль `AiService` предоставляет класс `AiService`, который является устаревшим поставщиком API, взаимодействующим с сервисом `aiservice.vercel.app` для создания текстовых завершений на основе предоставленных сообщений.
Этот модуль предназначен для работы с моделями, поддерживающими `gpt-3.5-turbo`.

## Подробней

Модуль реализует класс `AiService`, который наследуется от `AbstractProvider`.
Он отправляет POST-запросы к API `aiservice.vercel.app` и возвращает сгенерированный ответ.
Модуль помечен как устаревший и может быть удален или заменен в будущих версиях проекта.

## Классы

### `AiService`

**Описание**: Класс `AiService` предоставляет функциональность для взаимодействия с API `aiservice.vercel.app`.

**Принцип работы**:
Класс отправляет POST-запросы к API `aiservice.vercel.app/api/chat/answer` с использованием предоставленных сообщений
и возвращает ответ в виде текстового завершения.
Класс поддерживает модель `gpt-3.5-turbo`.

**Методы**:
- `create_completion`: Метод для создания завершения текста на основе предоставленных сообщений.

#### `create_completion`

```python
    @staticmethod
    def create_completion(
        model: str,
        messages: Messages,
        stream: bool,
        **kwargs: Any,
    ) -> CreateResult:
        """
        Создает завершение текста на основе предоставленных сообщений.

        Args:
            model (str): Имя модели для генерации завершения.
            messages (Messages): Список сообщений, используемых в качестве контекста для генерации.
            stream (bool): Флаг, указывающий, должен ли ответ быть возвращен в виде потока.
            **kwargs (Any): Дополнительные аргументы.

        Returns:
            CreateResult: Результат создания завершения.

        Raises:
            requests.exceptions.HTTPError: Если HTTP-запрос возвращает код ошибки.

        Как работает функция:
        1. Преобразует список сообщений в строку, где каждое сообщение форматируется как "{role}: {content}".
        2. Формирует заголовки для HTTP-запроса, включая `accept`, `content-type`, `sec-fetch-dest`, `sec-fetch-mode`, `sec-fetch-site` и `Referer`.
        3. Создает словарь `data`, содержащий строку сообщений в поле `input`.
        4. Отправляет POST-запрос к `https://aiservice.vercel.app/api/chat/answer` с заголовками и данными.
        5. Проверяет статус ответа HTTP-запроса и вызывает исключение `HTTPError`, если статус указывает на ошибку.
        6. Извлекает данные из JSON-ответа и возвращает их в виде генератора.

        Внутри функции происходят следующие действия и преобразования:
        A: Преобразование сообщений в строку для отправки в запросе.
        |
        B: Формирование HTTP-заголовков.
        |
        C: Отправка POST-запроса к API.
        |
        D: Обработка ответа и извлечение данных.

        Примеры:
            >>> messages = [{"role": "user", "content": "Hello"}, {"role": "assistant", "content": "Hi"}]
            >>> model = "gpt-3.5-turbo"
            >>> stream = False
            >>> result = AiService.create_completion(model, messages, stream)
            >>> for chunk in result:
            ...     print(chunk)
        """
```