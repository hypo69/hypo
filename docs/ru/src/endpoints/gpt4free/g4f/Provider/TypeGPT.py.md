# Модуль `TypeGPT`

## Обзор

Модуль `TypeGPT` предоставляет класс для взаимодействия с моделью TypeGPT через API. Он наследуется от `OpenaiTemplate` и содержит настройки для подключения и работы с этой конкретной моделью.

## Подробнее

Этот модуль является частью проекта `hypotez` и предназначен для обеспечения доступа к API TypeGPT. Он определяет URL, заголовки и модели, используемые для запросов к API. Класс `TypeGPT` предоставляет метод `get_models` для получения списка доступных моделей.

## Классы

### `TypeGPT`

**Описание**: Класс `TypeGPT` предназначен для взаимодействия с API TypeGPT.

**Наследует**:

- `OpenaiTemplate`: Обеспечивает базовую функциональность для работы с API OpenAI.

**Атрибуты**:

- `label` (str): Метка для идентификации провайдера, значение "TypeGpt".
- `url` (str): URL для доступа к TypeGPT, значение "https://chat.typegpt.net".
- `api_base` (str): Базовый URL для API TypeGPT, значение "https://chat.typegpt.net/api/openai/v1".
- `working` (bool): Указывает, что провайдер работает, значение `True`.
- `headers` (dict): Заголовки HTTP-запроса, необходимые для взаимодействия с API.
- `default_model` (str): Модель по умолчанию, значение 'gpt-4o-mini-2024-07-18'.
- `default_vision_model` (str): Модель для работы с изображениями по умолчанию, значение 'gpt-4o-mini-2024-07-18'.
- `vision_models` (list): Список моделей, поддерживающих работу с изображениями.
- `fallback_models` (list): Список резервных моделей.
- `image_models` (list): Список моделей для генерации изображений.
- `model_aliases` (dict): Словарь псевдонимов моделей.

**Методы**:

- `get_models()`: Получает список доступных моделей из API.

## Функции

### `get_models`

```python
    @classmethod
    def get_models(cls, **kwargs):
        ...
```

**Назначение**: Получает список доступных моделей из API TypeGPT.

**Параметры**:

- `cls` (Type[TypeGPT]): Ссылка на класс `TypeGPT`.
- `**kwargs`: Дополнительные параметры (не используются).

**Возвращает**:

- `list`: Список доступных моделей.

**Как работает функция**:

1. **Проверка наличия моделей**: Функция проверяет, был ли уже получен список моделей из API. Если список `cls.models` пуст, то выполняется запрос к API.
2. **Получение списка моделей**: Выполняется GET-запрос к эндпоинту `/api/config` для получения конфигурации, содержащей список доступных моделей.
3. **Извлечение и форматирование моделей**: Из полученного JSON извлекается строка `customModels`, которая разделяется на список моделей. Отфильтровываются модели, начинающиеся с "+" и не входящие в список `image_models`. Из каждой модели удаляется префикс "+" и все, что находится после символа "@".
4. **Возврат списка моделей**: Полученный и отформатированный список моделей возвращается.

```ascii
Проверка наличия моделей --> Запрос к API --> Извлечение и форматирование моделей --> Возврат списка моделей
```

**Примеры**:

```python
models = TypeGPT.get_models()
print(models)