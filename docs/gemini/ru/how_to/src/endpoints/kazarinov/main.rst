Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Данный код представляет собой скрипт для запуска Telegram бота KazarinovTelegramBot. Он принимает параметры запуска как через командную строку, так и из файла настроек JSON.  Код парсит аргументы, загружает настройки из файла, если он указан, и запускает бота с заданными параметрами. Обрабатывает возможные ошибки при запуске.

Шаги выполнения
-------------------------
1. **Импортирование необходимых библиотек:** Код импортирует библиотеки `argparse`, `asyncio`, `json`, `pathlib`, `pydantic`, `logger` (из модуля `src.logger`) и `KazarinovTelegramBot` (из модуля `.bot`).
2. **Парсинг аргументов командной строки:** Функция `parse_args()` использует `argparse` для анализа аргументов командной строки.  Пользователь может указать путь к файлу настроек (`--settings`) и режим работы бота (`--mode`).
3. **Загрузка настроек из файла:** Если путь к файлу настроек передан через аргумент `--settings`, код пытается загрузить настройки из этого файла. Если файл существует и содержит корректные данные в формате JSON, он загружает настройки и добавляет режим работы. Если файл не найден, выводится сообщение об ошибке, и выполнение скрипта завершается.
4. **Создание экземпляра бота:** Если файл настроек не указан, код создает экземпляр `KazarinovTelegramBot` с режимом, указанным в аргументах командной строки или по умолчанию.
5. **Запуск бота:** Код запускает асинхронный цикл приложения бота `bot.application.run_polling()` с помощью `asyncio.run()`.
6. **Обработка ошибок:** Блок `try...except` обрабатывает возможные исключения во время запуска бота и записывает ошибку в лог с помощью `logger.error()`.

Пример использования
-------------------------
.. code-block:: bash

    python main.py --settings settings.json --mode prod

.. code-block:: python

    # Содержание файла settings.json
    {
        "token": "YOUR_BOT_TOKEN",
        "chat_id": 1234567890,
        "mode": "prod"
    }

В этом примере:
    - `python main.py`:  Вызов скрипта.
    - `--settings settings.json`: Указание пути к файлу настроек.
    - `--mode prod`: Указание режима работы "prod".

Если файл `settings.json` содержит корректные данные, бот запустится с указанными параметрами.  При отсутствии файла `settings.json`, бот будет запущен с параметрами, указанными в командной строке, или с параметрами по умолчанию.