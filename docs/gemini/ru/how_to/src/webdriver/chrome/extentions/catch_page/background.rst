Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код реализует обработку сообщений, полученных от других частей расширения Chrome.  Он слушает сообщения с действием `'collectData'` и, при их получении, отправляет URL страницы в функцию `sendDataToServer` для дальнейшей обработки. Функция `sendDataToServer` отправляет собранные данные на сервер.  Код использует `chrome.storage.local` для получения ранее сохранённых данных.

Шаги выполнения
-------------------------
1. Расширение Chrome прослушивает события `chrome.action.onClicked`.  При клике на иконку расширения, отправляется сообщение `collectData` активной вкладке.
2. Активная вкладка, получив сообщение, отправляет текущий `url`  в фоне расширения.
3. Функция `chrome.runtime.onMessage.addListener` обрабатывает сообщения с действием `'collectData'`.
4. При получении сообщения `'collectData'`, извлечённый `url` передаётся в функцию `sendDataToServer`.
5. `sendDataToServer` забирает сохранённые ранее данные из `chrome.storage.local`.
6. Если данные найдены, данные отправляются на сервер `http://127.0.0.1/hypotez/catch_request.php` методом POST с заголовком `'Content-Type': 'application/json'`.
7. Если данные не найдены, выводится сообщение об ошибке.
8. Проверяется успешность отправки данных на сервер.  При успешной отправке выводится сообщение об успехе. При ошибке выводится сообщение об ошибке.


Пример использования
-------------------------
.. code-block:: javascript
    // content.js (или другой скрипт, отправляющий запрос)
    chrome.runtime.sendMessage({
        action: 'collectData',
        url: window.location.href
    });