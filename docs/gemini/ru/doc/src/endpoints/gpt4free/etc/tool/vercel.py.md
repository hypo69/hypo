# Модуль для получения и обработки информации о моделях Vercel AI SDK
====================================================================

Модуль предназначен для получения информации о моделях, доступных через Vercel AI SDK, преобразования этой информации и вывода в нужном формате.

## Обзор

Модуль содержит функции для:

- Получения информации о моделях с сайта Vercel AI SDK.
- Преобразования полученной информации в удобный формат.
- Вывода информации о моделях в формате JSON.
- Генерации кода для определения моделей и их соответствия в проекте.

## Подробней

Этот код используется для автоматического получения информации о моделях, поддерживаемых Vercel AI SDK, и генерации кода, который можно использовать в проекте для работы с этими моделями. Это позволяет избежать ручного обновления информации о моделях и упрощает интеграцию с Vercel AI SDK. Модуль `vercel.py` выполняет парсинг веб-страниц, извлекает необходимые данные о моделях, преобразует их в удобный формат и генерирует Python-код для определения моделей с указанием провайдера Vercel.

## Функции

### `get_model_info`

```python
def get_model_info() -> dict[str, Any]:
    """
    Извлекает информацию о моделях с сайта Vercel AI SDK.

    Args:
        None

    Returns:
        dict[str, Any]: Словарь, содержащий информацию о моделях.

    Raises:
        Exception: Возникает при ошибке запроса или парсинга данных.

    Как работает функция:
    1. Отправляет GET-запрос на URL "https://sdk.vercel.ai".
    2. Извлекает HTML-код из ответа.
    3. Находит пути к JavaScript файлам, содержащим информацию о моделях.
    4. Запрашивает содержимое каждого JavaScript файла.
    5. Извлекает строку, содержащую информацию о моделях, используя регулярные выражения.
    6. Преобразует строку в JSON объект с помощью quickjs.
    7. Возвращает JSON объект.

    Внутри функции происходят следующие действия и преобразования:
     A. Запрос HTML страницы
     |
     -- B. Извлечение путей к JavaScript файлам
     |
     C. Запрос JavaScript файлов
     |
     D. Извлечение информации о моделях
     |
     E. Преобразование в JSON

    Примеры:
        >>> models = get_model_info()
        >>> print(models.keys())
        dict_keys(['openai:gpt-3.5-turbo', 'openai:gpt-4', ...])
    """
    ...
```

### `convert_model_info`

```python
def convert_model_info(models: dict[str, Any]) -> dict[str, Any]:
    """
    Преобразует информацию о моделях в нужный формат.

    Args:
        models (dict[str, Any]): Словарь с информацией о моделях.

    Returns:
        dict[str, Any]: Преобразованный словарь с информацией о моделях.

    Как работает функция:
    1. Перебирает модели в словаре `models`.
    2. Для каждой модели извлекает параметры по умолчанию, используя функцию `params_to_default_params`.
    3. Создает новый словарь `model_info`, где ключами являются имена моделей, а значениями - словари с `id` модели и параметрами по умолчанию (`default_params`).
    4. Возвращает `model_info`.

    Внутри функции происходят следующие действия и преобразования:
     A. Инициализация словаря `model_info`
     |
     -- B. Перебор моделей
     |
     C. Получение параметров по умолчанию
     |
     D. Формирование словаря `model_info`

    Примеры:
        >>> models = {'model1': {'id': '123', 'parameters': {'param1': {'value': 'a'}, 'param2': {'value': 1}}}, 'model2': {'id': '456', 'parameters': {'param3': {'value': 'b'}, 'param4': {'value': 2}}}}
        >>> converted_models = convert_model_info(models)
        >>> print(converted_models)
        {'model1': {'id': '123', 'default_params': {'param1': 'a', 'param2': 1}}, 'model2': {'id': '456', 'default_params': {'param3': 'b', 'param4': 2}}}
    """
    ...
```

### `params_to_default_params`

```python
def params_to_default_params(parameters: dict[str, Any]):
    """
    Извлекает значения параметров по умолчанию из словаря параметров.

    Args:
        parameters (dict[str, Any]): Словарь, содержащий параметры модели.

    Returns:
        dict[str, Any]: Словарь, содержащий значения параметров по умолчанию.

    Как работает функция:
    1. Инициализирует пустой словарь `defaults`.
    2. Перебирает параметры в словаре `parameters`.
    3. Если ключ параметра равен "maximumLength", заменяет его на "maxTokens".
    4. Добавляет значение параметра в словарь `defaults`.
    5. Возвращает словарь `defaults`.

    Внутри функции происходят следующие действия и преобразования:
     A. Инициализация словаря `defaults`
     |
     -- B. Перебор параметров
     |
     C. Преобразование ключа "maximumLength" в "maxTokens"
     |
     D. Добавление значения параметра в `defaults`

    Примеры:
        >>> parameters = {'param1': {'value': 'a'}, 'maximumLength': {'value': 100}, 'param3': {'value': True}}
        >>> default_params = params_to_default_params(parameters)
        >>> print(default_params)
        {'param1': 'a', 'maxTokens': 100, 'param3': True}
    """
    ...
```

### `get_model_names`

```python
def get_model_names(model_info: dict[str, Any]):
    """
    Извлекает имена моделей из словаря информации о моделях.

    Args:
        model_info (dict[str, Any]): Словарь с информацией о моделях.

    Returns:
        list[str]: Список имен моделей, отсортированный по алфавиту.

    Как работает функция:
    1. Извлекает имена моделей из ключей словаря `model_info`.
    2. Фильтрует список, удаляя модели "openai:gpt-4" и "openai:gpt-3.5-turbo".
    3. Сортирует список имен моделей по алфавиту.
    4. Возвращает отсортированный список имен моделей.

    Внутри функции происходят следующие действия и преобразования:
     A. Получение имен моделей из ключей `model_info`
     |
     -- B. Фильтрация списка моделей
     |
     C. Сортировка списка моделей

    Примеры:
        >>> model_info = {'model1': {'id': '123'}, 'openai:gpt-4': {'id': '456'}, 'model2': {'id': '789'}}
        >>> model_names = get_model_names(model_info)
        >>> print(model_names)
        ['model1', 'model2']
    """
    ...
```

### `print_providers`

```python
def print_providers(model_names: list[str]):
    """
    Выводит строки кода для определения моделей с указанием провайдера Vercel.

    Args:
        model_names (list[str]): Список имен моделей.

    Returns:
        None

    Как работает функция:
    1. Перебирает имена моделей в списке `model_names`.
    2. Разбивает имя модели на части, используя разделители ":" и "/".
    3. Извлекает базового провайдера (первую часть имени).
    4. Формирует имя переменной, заменяя символы "-" и "." на "_".
    5. Формирует строку кода для определения модели.
    6. Выводит строку кода в консоль.

    Внутри функции происходят следующие действия и преобразования:
     A. Перебор имен моделей
     |
     -- B. Разбиение имени модели на части
     |
     C. Формирование имени переменной
     |
     D. Формирование строки кода

    Примеры:
        >>> model_names = ['cohere:xlarge', 'ai21labs/j2-grande']
        >>> print_providers(model_names)
        xlarge = Model(name="cohere:xlarge", base_provider="cohere", best_provider=Vercel,)
        j2_grande = Model(name="ai21labs/j2-grande", base_provider="ai21labs", best_provider=Vercel,)
    """
    ...
```

### `print_convert`

```python
def print_convert(model_names: list[str]):
    """
    Выводит строки кода для создания словаря соответствия имен моделей и переменных.

    Args:
        model_names (list[str]): Список имен моделей.

    Returns:
        None

    Как работает функция:
    1. Перебирает имена моделей в списке `model_names`.
    2. Разбивает имя модели на части, используя разделители ":" и "/".
    3. Извлекает ключ модели (последнюю часть имени).
    4. Формирует имя переменной, заменяя символы "-" и "." на "_".
    5. Формирует строку кода для добавления элемента в словарь.
    6. Выводит строку кода в консоль.

    Внутри функции происходят следующие действия и преобразования:
     A. Перебор имен моделей
     |
     -- B. Разбиение имени модели на части
     |
     C. Формирование имени переменной
     |
     D. Формирование строки кода

    Примеры:
        >>> model_names = ['cohere:xlarge', 'ai21labs/j2-grande']
        >>> print_convert(model_names)
                "xlarge": xlarge,
                "j2-grande": j2_grande,
    """
    ...
```

### `main`

```python
def main():
    """
    Основная функция модуля.

    Args:
        None

    Returns:
        None

    Как работает функция:
    1. Получает информацию о моделях, используя функцию `get_model_info`.
    2. Преобразует информацию о моделях, используя функцию `convert_model_info`.
    3. Выводит преобразованную информацию в формате JSON.
    4. Получает список имен моделей, используя функцию `get_model_names`.
    5. Выводит строки кода для определения моделей, используя функцию `print_providers`.
    6. Выводит строки кода для создания словаря соответствия, используя функцию `print_convert`.

    Внутри функции происходят следующие действия и преобразования:
     A. Получение информации о моделях
     |
     -- B. Преобразование информации о моделях
     |
     C. Вывод информации в формате JSON
     |
     D. Получение списка имен моделей
     |
     E. Вывод строк кода для определения моделей
     |
     F. Вывод строк кода для создания словаря соответствия

    Примеры:
        >>> main()
        {
          "cohere:xlarge": {
            "id": "cohere:xlarge",
            "default_params": {
              "maxTokens": 200,
              "temperature": 0.75,
              "p": 0.01,
              "k": 0
            }
          },
          ...
        }
        --------------------------------------------------------------------------------------------------------------------------------------------------------
        xlarge = Model(name="cohere:xlarge", base_provider="cohere", best_provider=Vercel,)
        ...
        --------------------------------------------------------------------------------------------------------------------------------------------------------
                "xlarge": xlarge,
        ...
    """
    ...