# Модуль `hypotez/src/suppliers/graber.py`

## Обзор

Данный модуль содержит базовый класс `Graber` для сбора данных о товарах со страниц HTML поставщиков.  Класс использует веб-драйвер (класс `Driver`) для извлечения данных по заданным локаторам, хранящимся в JSON-файлах в подкаталогах `locators` каждого поставщика.  Для нестандартной обработки полей товара можно переопределить соответствующие методы в дочерних классах. Модуль предоставляет инструменты для нормализации данных (типов данных).  Реализует декоратор `@close_pop_up` для закрытия всплывающих окон.

## Оглавление

* [Модуль `hypotez/src/suppliers/graber.py`](#модуль-hypotezsrcsuppliersgraberpy)
* [Обзор](#обзор)
* [Класс `Context`](#класс-context)
* [Декоратор `close_pop_up`](#декоратор-close_pop_up)
* [Класс `Graber`](#класс-graber)
    * [`__init__`](#инициализация-класса-graber)
    * [`error`](#обработчик-ошибок-для-полей)
    * [`set_field_value`](#универсальная-функция-для-установления-значений-полей-с-обработкой-ошибок)
    * [`grab_page`](#асинхронная-функция-для-сбора-полей-продукта)
    * [Остальные методы (список)](#остальные-методы-список)


## Класс `Context`

**Описание**: Класс для хранения глобальных настроек, таких как драйвер, локаторы и префикс поставщика.

**Атрибуты**:

* `driver` (Driver): Объект драйвера.
* `locator` (SimpleNamespace): Пространство имен для хранения локаторов.
* `supplier_prefix` (str): Префикс поставщика.


## Декоратор `close_pop_up`

**Описание**: Создает декоратор для закрытия всплывающих окон перед выполнением основной логики функции.  

**Аргументы**:

* `value` (Driver, необязательно): Дополнительное значение для декоратора.

**Возвращает**:

* `Callable`: Декоратор, оборачивающий функцию.

**Обрабатываемые исключения**:

* `ExecuteLocatorException`: Ошибка выполнения локатора.


## Класс `Graber`

**Описание**: Базовый класс для сбора данных о товаре.


### `__init__`

**Описание**: Инициализирует объект `Graber`.

**Аргументы**:

* `supplier_prefix` (str): Префикс поставщика.
* `driver` (Driver): Экземпляр класса `Driver`.


**Возвращает**:

* None


### `error`

**Описание**: Обработчик ошибок для полей.

**Аргументы**:

* `field` (str): Название поля с ошибкой.


**Возвращает**:

* None


### `set_field_value`

**Описание**: Универсальная функция для установки значений полей с обработкой ошибок.

**Аргументы**:

* `value` (Any): Значение для установки.
* `locator_func` (Callable[[], Any]): Функция для получения значения из локатора.
* `field_name` (str): Название поля.
* `default` (Any, необязательно): Значение по умолчанию. По умолчанию пустая строка.


**Возвращает**:

* Any: Установленное значение.


### `grab_page`

**Описание**: Асинхронная функция для сбора полей продукта.

**Аргументы**:

* `args` (tuple): Кортеж с именами полей для сбора.
* `kwards` (dict): Словарь с ключами и значениями для каждого поля.


**Возвращает**:

* ProductFields: Собранные поля продукта.


### Остальные методы (список)

Класс `Graber` содержит большое количество методов для извлечения значений различных полей товара, например: `additional_shipping_cost`, `delivery_in_stock`, `active`,  `additional_delivery_times`,  `advanced_stock_management`, ... Каждый метод имеет подробное описание в коде.  Все методы асинхронные (`async def`) и используют декоратор `@close_pop_up`.