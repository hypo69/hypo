```markdown
# combined-stream - Documentation

This module creates a stream that emits multiple other streams one after another.

**Important Note:**  `combined-stream` currently only supports Node.js streams version 1.  Development is underway to switch to streams version 2. Contributions are welcome!  In the meantime, consider `combined-stream2` or `multistream` for streams2 compatibility.

## Installation

```bash
npm install combined-stream
```

## Usage

### Simple Combination

Combine two files into one:

```javascript
const CombinedStream = require('combined-stream');
const fs = require('fs');

const combinedStream = CombinedStream.create();
combinedStream.append(fs.createReadStream('file1.txt'));
combinedStream.append(fs.createReadStream('file2.txt'));

combinedStream.pipe(fs.createWriteStream('combined.txt'));
```

### Avoiding Stream Pausing (Important!)

By default, `combined-stream` pauses all source streams until they're needed.  This can lead to delays. To prevent this, set `pauseStreams: false`:

```javascript
const CombinedStream = require('combined-stream');
const fs = require('fs');

const combinedStream = CombinedStream.create({ pauseStreams: false });
combinedStream.append(fs.createReadStream('file1.txt'));
combinedStream.append(fs.createReadStream('file2.txt'));

combinedStream.pipe(fs.createWriteStream('combined.txt'));
```

### Asynchronous Stream Appending

If you don't have all the source streams available immediately, or to avoid loading resources upfront:

```javascript
const CombinedStream = require('combined-stream');
const fs = require('fs');

const combinedStream = CombinedStream.create();
combinedStream.append(function(next) {
  next(fs.createReadStream('file1.txt'));
});
combinedStream.append(function(next) {
  next(fs.createReadStream('file2.txt'));
});

combinedStream.pipe(fs.createWriteStream('combined.txt'));
```


## API

### `CombinedStream.create([options])`

Creates a new combined stream object.

*   **`options`**: An optional object with the following properties:
    *   **`maxDataSize`**:  Maximum buffer size in bytes. Defaults to 2MB. Exceeding this limit triggers an error.
    *   **`pauseStreams`**: Whether to pause underlying streams. Defaults to `true`. Setting to `false` prevents pausing, but may increase memory consumption.

### Stream Properties

*   **`combinedStream.pauseStreams`**:  Boolean; whether to pause underlying streams.
*   **`combinedStream.maxDataSize`**: Maximum buffer size (bytes).
*   **`combinedStream.dataSize`**: Current buffered data size (bytes).


### `combinedStream.append(stream)`

Appends a stream to the combined stream.  Can also be a function that accepts a `next` callback to provide the stream asynchronously.

*   **`stream`**: The stream to append. Can also be a string or Buffer.


### `combinedStream.resume()`

Starts processing appended streams. Idempotent. Emits a 'resume' event.

### `combinedStream.pause()`

Pauses processing. Emits a 'pause' event (only effective if `pauseStreams` is true).

### `combinedStream.end()`

Sets the stream to non-writable, emits 'end' and removes all streams.

### `combinedStream.destroy()`

Same as `end()`, but emits a 'close' event.


**Important:**  Avoid calling `combinedStream.write(data)`.  `combined-stream` manages piping internally.


This documentation clarifies the behavior, important options, and correct usage of `combined-stream` to avoid common pitfalls.
```