# Модуль для определения структур данных для API g4f

## Обзор

Модуль `stubs.py` определяет структуры данных, используемые для конфигурации и обмена данными с API g4f. Он включает в себя модели для конфигурации чат-комплишенов, генерации изображений, а также модели ответов от провайдеров и моделей.

## Подробнее

Модуль содержит классы, основанные на `pydantic.BaseModel`, которые определяют структуру данных для различных запросов и ответов API. Они включают в себя конфигурации для текстовых и визуальных задач, а также модели для обработки ошибок и возврата информации о моделях и провайдерах. Этот модуль обеспечивает строгую типизацию данных и упрощает процесс валидации и сериализации данных при взаимодействии с API g4f.

## Классы

### `ChatCompletionsConfig`

**Описание**: Конфигурация для запросов чат-комплишенов.

**Принцип работы**:
Класс `ChatCompletionsConfig` используется для определения параметров, необходимых для выполнения запросов к API, связанным с генерацией текста в чате. Он включает в себя параметры, такие как сообщения, модель, провайдер, а также настройки для стриминга, работы с изображениями, управления температурой и другими параметрами генерации.

**Атрибуты**:
- `messages` (Messages): Список сообщений, используемых для генерации ответа. Пример: `[{"role": "system", "content": ""}, {"role": "user", "content": ""}]`.
- `model` (str): Идентификатор модели, используемой для генерации текста. По умолчанию "".
- `provider` (Optional[str]): Идентификатор провайдера, используемого для генерации текста. По умолчанию `None`.
- `stream` (bool): Флаг, указывающий, следует ли использовать потоковую передачу данных. По умолчанию `False`.
- `image` (Optional[str]): URL изображения, используемого в запросе. По умолчанию `None`.
- `image_name` (Optional[str]): Имя изображения, используемого в запросе. По умолчанию `None`.
- `images` (Optional[list[tuple[str, str]]]): Список кортежей, содержащих URL и имя изображения. По умолчанию `None`.
- `media` (Optional[list[tuple[str, str]]]): Список кортежей, содержащих URL и тип медиафайла. По умолчанию `None`.
- `modalities` (Optional[list[str]]): Список модальностей (например, "text", "audio"). По умолчанию `["text", "audio"]`.
- `temperature` (Optional[float]): Параметр, контролирующий случайность генерации текста. По умолчанию `None`.
- `presence_penalty` (Optional[float]): Параметр, влияющий на вероятность повторения новых токенов. По умолчанию `None`.
- `frequency_penalty` (Optional[float]): Параметр, влияющий на вероятность повторения существующих токенов. По умолчанию `None`.
- `top_p` (Optional[float]): Параметр, ограничивающий выбор токенов наиболее вероятными. По умолчанию `None`.
- `max_tokens` (Optional[int]): Максимальное количество токенов в сгенерированном тексте. По умолчанию `None`.
- `stop` (Union[list[str], str, None]): Список стоп-слов или фраза, при достижении которых генерация текста прекращается. По умолчанию `None`.
- `api_key` (Optional[str]): Ключ API для аутентификации. По умолчанию `None`.
- `api_base` (str): Базовый URL API. По умолчанию `None`.
- `web_search` (Optional[bool]): Флаг, указывающий, следует ли использовать поиск в интернете. По умолчанию `None`.
- `proxy` (Optional[str]): URL прокси-сервера. По умолчанию `None`.
- `conversation_id` (Optional[str]): Идентификатор беседы. По умолчанию `None`.
- `conversation` (Optional[dict]): Словарь, содержащий историю беседы. По умолчанию `None`.
- `return_conversation` (Optional[bool]): Флаг, указывающий, следует ли возвращать историю беседы. По умолчанию `None`.
- `history_disabled` (Optional[bool]): Флаг, указывающий, следует ли отключить историю. По умолчанию `None`.
- `timeout` (Optional[int]): Время ожидания запроса в секундах. По умолчанию `None`.
- `tool_calls` (list): Список инструментов, используемых для выполнения запроса. Пример: `[{ "function": { "arguments": {"query":"search query", "max_results":5, "max_words": 2500, "backend": "auto", "add_text": True, "timeout": 5}, "name": "search_tool" }, "type": "function" }]`.
- `tools` (list): Список инструментов, используемых для выполнения запроса. По умолчанию `None`.
- `parallel_tool_calls` (bool): Флаг, указывающий, следует ли выполнять вызовы инструментов параллельно. По умолчанию `None`.
- `tool_choice` (Optional[str]): Выбор инструмента. По умолчанию `None`.
- `reasoning_effort` (Optional[str]): Уровень усилий для рассуждений. По умолчанию `None`.
- `logit_bias` (Optional[dict]): Словарь смещений для логитов. По умолчанию `None`.
- `modalities` (Optional[list[str]]): Список модальностей (например, "text", "audio"). По умолчанию `None`.
- `audio` (Optional[dict]): Дополнительные параметры для аудио. По умолчанию `None`.
- `response_format` (Optional[dict]): Формат ответа. По умолчанию `None`.
- `extra_data` (Optional[dict]): Дополнительные данные. По умолчанию `None`.

### `ImageGenerationConfig`

**Описание**: Конфигурация для запросов генерации изображений.

**Принцип работы**:
Класс `ImageGenerationConfig` используется для определения параметров, необходимых для выполнения запросов к API, связанным с генерацией изображений. Он включает в себя параметры, такие как текст запроса, модель, провайдер, а также настройки для размера изображения, количества шагов вывода и других параметров генерации.

**Атрибуты**:
- `prompt` (str): Текст запроса для генерации изображения.
- `model` (Optional[str]): Идентификатор модели, используемой для генерации изображения. По умолчанию `None`.
- `provider` (Optional[str]): Идентификатор провайдера, используемого для генерации изображения. По умолчанию `None`.
- `response_format` (Optional[str]): Формат ответа (например, "url" или "b64_json"). По умолчанию `None`.
- `api_key` (Optional[str]): Ключ API для аутентификации. По умолчанию `None`.
- `proxy` (Optional[str]): URL прокси-сервера. По умолчанию `None`.
- `width` (Optional[int]): Ширина изображения. По умолчанию `None`.
- `height` (Optional[int]): Высота изображения. По умолчанию `None`.
- `num_inference_steps` (Optional[int]): Количество шагов вывода. По умолчанию `None`.
- `seed` (Optional[int]): Зерно для генерации случайных чисел. По умолчанию `None`.
- `guidance_scale` (Optional[int]): Масштаб соответствия запросу. По умолчанию `None`.
- `aspect_ratio` (Optional[str]): Соотношение сторон изображения. По умолчанию `None`.
- `n` (Optional[int]): Количество генерируемых изображений. По умолчанию `None`.
- `negative_prompt` (Optional[str]): Негативный текст запроса, описывающий, что не должно быть на изображении. По умолчанию `None`.
- `resolution` (Optional[str]): Разрешение изображения. По умолчанию `None`.

### `ProviderResponseModel`

**Описание**: Модель ответа от провайдера.

**Принцип работы**:
Класс `ProviderResponseModel` используется для представления структуры данных, возвращаемых API после запроса к провайдеру. Он содержит идентификатор, тип объекта, время создания, а также URL и метку, если они доступны.

**Атрибуты**:
- `id` (str): Идентификатор ответа.
- `object` (str): Тип объекта (всегда "provider").
- `created` (int): Время создания ответа.
- `url` (Optional[str]): URL, связанный с ответом. По умолчанию `None`.
- `label` (Optional[str]): Метка, связанная с ответом. По умолчанию `None`.

### `ProviderResponseDetailModel`

**Описание**: Расширенная модель ответа от провайдера, содержащая детали о моделях.

**Принцип работы**:
Класс `ProviderResponseDetailModel` наследует `ProviderResponseModel` и добавляет детали о моделях, поддерживаемых провайдером, включая модели для изображений и параметры.

**Наследует**:
- `ProviderResponseModel`

**Атрибуты**:
- `models` (list[str]): Список идентификаторов моделей.
- `image_models` (list[str]): Список идентификаторов моделей для изображений.
- `vision_models` (list[str]): Список идентификаторов моделей для vision задач.
- `params` (list[str]): Список параметров, поддерживаемых провайдером.

### `ModelResponseModel`

**Описание**: Модель ответа, представляющая информацию о модели.

**Принцип работы**:
Класс `ModelResponseModel` используется для представления информации о модели, включая её идентификатор, тип объекта, время создания и владельца.

**Атрибуты**:
- `id` (str): Идентификатор модели.
- `object` (str): Тип объекта (всегда "model").
- `created` (int): Время создания.
- `owned_by` (Optional[str]): Владелец модели. По умолчанию `None`.

### `UploadResponseModel`

**Описание**: Модель ответа на загрузку файла.

**Принцип работы**:
Класс `UploadResponseModel` используется для представления информации об успешной загрузке файла, включая идентификатор бакета и URL загруженного файла.

**Атрибуты**:
- `bucket_id` (str): Идентификатор бакета.
- `url` (str): URL загруженного файла.

### `ErrorResponseModel`

**Описание**: Модель ответа, представляющая информацию об ошибке.

**Принцип работы**:
Класс `ErrorResponseModel` используется для представления информации об ошибке, включая сообщение об ошибке, модель и провайдера, если они связаны с ошибкой.

**Атрибуты**:
- `error` (ErrorResponseMessageModel): Модель сообщения об ошибке.
- `model` (Optional[str]): Идентификатор модели, связанной с ошибкой. По умолчанию `None`.
- `provider` (Optional[str]): Идентификатор провайдера, связанного с ошибкой. По умолчанию `None`.

### `ErrorResponseMessageModel`

**Описание**: Модель сообщения об ошибке.

**Принцип работы**:
Класс `ErrorResponseMessageModel` используется для представления сообщения об ошибке.

**Атрибуты**:
- `message` (str): Текст сообщения об ошибке.

### `FileResponseModel`

**Описание**: Модель ответа, представляющая информацию о файле.

**Принцип работы**:
Класс `FileResponseModel` используется для представления информации о файле, включая имя файла.

**Атрибуты**:
- `filename` (str): Имя файла.

## Функции

В данном модуле нет функций.