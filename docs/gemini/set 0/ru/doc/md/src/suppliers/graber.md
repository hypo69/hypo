# Модуль hypotez/src/suppliers/graber.py

## Обзор

Данный модуль содержит базовый класс `Graber` для сбора данных с веб-страниц поставщиков.  Класс использует веб-драйвер (`Driver`) для извлечения целевых полей HTML страницы, локаторы для которых хранятся в файлах JSON в директории `locators` каждого поставщика. Подробная информация о локаторах доступна в файле `locators.ru.md`.  Для нестандартной обработки полей товара можно переопределить соответствующие методы в дочерних классах.

## Классы

### `Graber`

**Описание**: Базовый класс для сбора данных с веб-страниц поставщиков.  Содержит методы для извлечения различных полей товара, используя локаторы и веб-драйвер.

**Методы**

* `__init__(self, supplier_prefix: str, driver: Driver)`:
    **Описание**: Инициализирует объект `Graber`.
    **Параметры**:
        - `supplier_prefix` (str): Префикс имени поставщика.
        - `driver` (Driver): Объект веб-драйвера.
    **Возвращает**:
        - None

* `error(self, field: str)`:
    **Описание**: Обработчик ошибок для полей. Выводит сообщение об ошибке в лог.
    **Параметры**:
        - `field` (str): Название поля, где произошла ошибка.
    **Возвращает**:
        - None

* `set_field_value(self, value: Any, locator_func: Callable[[], Any], field_name: str, default: Any = '')`:
    **Описание**: Универсальная функция для установки значения поля.
    **Параметры**:
        - `value` (Any): Значение, которое нужно установить.
        - `locator_func` (Callable[[], Any]): Функция для извлечения значения из локатора.
        - `field_name` (str): Название поля.
        - `default` (Any, optional): Значение по умолчанию (по умолчанию пустая строка).
    **Возвращает**:
        - Any: Установленное значение.

* `grab_page(self) -> ProductFields`:
    **Описание**: Асинхронная функция сбора данных со страницы.
    **Возвращает**:
        - `ProductFields`: Объект, содержащий собранные поля продукта.

* `{Остальные методы (id_product, name, price, etc.)}`:
    **Описание**:  Методы для извлечения конкретных полей данных.  Каждый метод принимает `value` (опциональный параметр), который может быть передан при инициализации класса, чтобы использовать определенное значение.
    **Параметры**:
        - `value` (Any, optional): Переданное значение для поля.
    **Возвращает**:
        - bool: True если поле успешно заполнено, иначе None.


## Функции

### `close_pop_up(value: Any = None) -> Callable`

**Описание**: Создает декоратор для закрытия всплывающих окон перед выполнением основной логики функции.

**Параметры**:
    - `value` (Any, optional): Дополнительное значение для декоратора.

**Возвращает**:
    - Callable: Декоратор, оборачивающий функцию.

**Вызывает исключения**:
- `ExecuteLocatorException`: Ошибка при выполнении локатора.


##  Глобальные настройки (Context)

### `Context`

**Описание**: Класс для хранения глобальных настроек.

**Атрибуты**:

* `driver: Driver`: Объект драйвера (для управления браузером).
* `locator: SimpleNamespace`: Пространство имен для хранения локаторов (с декоратором `@close_pop_up`).
* `supplier_prefix: str`: Префикс поставщика.