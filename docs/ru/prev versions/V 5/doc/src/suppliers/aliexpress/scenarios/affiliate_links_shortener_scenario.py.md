# Модуль: Сокращение партнерских ссылок AliExpress

## Обзор

Модуль `affiliate_links_shortener_scenario.py` предназначен для сокращения длинных партнерских ссылок AliExpress с использованием веб-браузера. Он предоставляет функцию для автоматического получения коротких ссылок, которые удобнее для распространения и отслеживания.

## Подробнее

Этот модуль автоматизирует процесс сокращения ссылок через веб-интерфейс AliExpress. Он использует `selenium` для взаимодействия с элементами страницы, ввода длинной ссылки и получения короткой. Модуль также проверяет корректность короткой ссылки, открывая её в новой вкладке и убеждаясь, что она не ведет на страницу ошибок. Это позволяет убедиться в работоспособности сгенерированной ссылки.

## Функции

### `get_short_affiliate_link`

```python
def get_short_affiliate_link(d: Driver, url: str) -> str:
    """
    Script for generating a shortened affiliate link

    Args:
        d (Driver): Экземпляр веб-драйвера `selenium`.
        url (str): Полный URL для сокращения.

    Returns:
        str: Сокращенный URL.
    """
```

**Описание**: Функция `get_short_affiliate_link` принимает полный URL и возвращает его сокращенную версию, полученную через веб-интерфейс AliExpress.

**Как работает функция**:
1. Вводит предоставленный URL в текстовое поле на странице сокращения ссылок AliExpress.
2. Нажимает кнопку для получения короткой ссылки.
3. Ожидает обновления страницы.
4. Извлекает короткую ссылку из соответствующего текстового поля.
5. Открывает короткую ссылку в новой вкладке для проверки.
6. Проверяет, не ведет ли короткая ссылка на страницу ошибок.
7. Закрывает новую вкладку.
8. Возвращается на основную вкладку.
9. Возвращает сокращенный URL.

**Параметры**:
- `d` (Driver): Экземпляр драйвера веб-браузера, используемый для автоматизации действий в браузере.
- `url` (str): Полный URL, который необходимо сократить.

**Возвращает**:
- `str`: Сокращенный URL.

**Вызывает исключения**:
- `ValueError`: Если не удалось получить короткий URL или если короткий URL ведет на страницу ошибок.

**Примеры**:

```python
from src.webdriver.driver import Driver
from selenium import webdriver

# Инициализация веб-драйвера (пример с Chrome)
driver = Driver(webdriver.Chrome())

# URL для сокращения
long_url = "https://aliexpress.com/some/long/affiliate/link"

# Получение короткой ссылки
short_url = get_short_affiliate_link(driver, long_url)

# Вывод короткой ссылки
print(f"Сокращенная ссылка: {short_url}")

# Закрытие веб-драйвера
driver.quit()