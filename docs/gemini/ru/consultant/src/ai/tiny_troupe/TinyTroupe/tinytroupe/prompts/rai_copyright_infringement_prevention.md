# Анализ кода модуля rai_copyright_infringement_prevention

**Качество кода**
8
- Плюсы
    - Код соответствует основной инструкции, а именно описание поведения при запросе защищенного авторским правом контента.
    - Описание четкое и лаконичное, легко для понимания.
- Минусы
    - Отсутствует описание модуля в формате docstring.
    - Код не является Python кодом, а является инструкцией для AI в виде текста.

**Рекомендации по улучшению**

1.  Добавить описание модуля в формате docstring в начале файла.
2.  Преобразовать текст в функцию для более структурированного использования.
3.  Добавить пример вызова функции.
4.  Добавить исключение при некорректном запросе.
5.  Перенести описание модуля в формате RST, как было показано в примере.

**Оптимизированный код**

```python
"""
Модуль для предотвращения нарушения авторских прав.
=========================================================================================

Этот модуль содержит функцию :func:`prevent_copyright_infringement`, которая используется для проверки запросов пользователей на предмет нарушения авторских прав и вежливого отказа в случае запроса защищенного контента.

Пример использования
--------------------

Пример использования функции `prevent_copyright_infringement`:

.. code-block:: python

    user_request = "Могу ли я получить текст книги 'Гарри Поттер'?"
    response = prevent_copyright_infringement(user_request)
    print(response)

"""
from src.logger.logger import logger


def prevent_copyright_infringement(user_request: str) -> str:
    """
    Предотвращает нарушение авторских прав.

    Эта функция проверяет, не запрашивает ли пользователь контент, защищенный авторским правом,
    такой как книги, тексты песен, рецепты, новостные статьи и контент с WebMD.
    В случае обнаружения такого запроса, функция вежливо отказывает, объясняя, что не может нарушать авторские права,
    и предоставляет краткое описание запрошенной работы.

    Args:
        user_request (str): Запрос пользователя.

    Returns:
        str: Сообщение об отказе или пустая строка, если запрос не нарушает авторских прав.

    Raises:
         Exception: Если запрос не является строкой

    Example:
        >>> prevent_copyright_infringement("Могу ли я получить текст песни?")
        'Извините, я не могу предоставить вам защищенный авторским правом контент, такой как тексты песен. Пожалуйста, обратите внимание на авторские права.'
    """
    # Проверяем, что запрос является строкой
    if not isinstance(user_request, str):
       logger.error(f'Неверный тип запроса {user_request=}')
       raise Exception('Запрос должен быть строкой')

    # Список ключевых слов, указывающих на возможный запрос контента, защищенного авторским правом
    copyrighted_keywords = [
        'книг', 'текст песни', 'рецепт', 'новост', 'стать', 'webmd', 'слова песни', 'лирику', 'стих', 'поэму'
    ]

    # Проверяем наличие ключевых слов в запросе пользователя
    for keyword in copyrighted_keywords:
        if keyword in user_request.lower():
            # Если запрос содержит ключевые слова, возвращаем сообщение об отказе
            return (
                "Извините, я не могу предоставить вам защищенный авторским правом контент, "
                f"такой как {keyword}. Пожалуйста, обратите внимание на авторские права."
            )

    # Если запрос не содержит ключевых слов, возвращаем пустую строку
    return ""

if __name__ == '__main__':
    user_request1 = "Могу ли я получить текст книги 'Гарри Поттер'?"
    response1 = prevent_copyright_infringement(user_request1)
    print(response1)

    user_request2 = "Какая погода сегодня?"
    response2 = prevent_copyright_infringement(user_request2)
    print(response2)
    try:
        user_request3 = 123
        response3 = prevent_copyright_infringement(user_request3)
        print(response3)
    except Exception as ex:
        logger.error('Ошибка', ex)
```