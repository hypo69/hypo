# Модуль для запуска gpt4free через командную строку

## Обзор

Модуль `cli.py` предоставляет интерфейс командной строки (CLI) для запуска приложения gpt4free в различных режимах: API и GUI. Он использует библиотеку `argparse` для обработки аргументов командной строки и запуска соответствующих функций для каждого режима.

## Подробнее

Этот модуль является точкой входа для запуска gpt4free. Он определяет аргументы командной строки для настройки API и GUI, а затем вызывает соответствующие функции для запуска приложения в выбранном режиме.

## Функции

### `get_api_parser`

```python
def get_api_parser() -> ArgumentParser:
    """Создает парсер аргументов для API режима.

    Args:
        Нет

    Returns:
        ArgumentParser: Объект парсера аргументов, настроенный для API режима.

    Как работает функция:
     1. Создает экземпляр `ArgumentParser` с описанием "Run the API and GUI".
     2. Добавляет аргументы командной строки, специфичные для API режима, такие как `--bind`, `--port`, `--debug`, `--gui`, `--model`, `--provider`, `--image-provider`, `--proxy`, `--workers`, `--disable-colors`, `--ignore-cookie-files`, `--g4f-api-key`, `--ignored-providers`, `--cookie-browsers`, `--reload`, `--demo`, `--ssl-keyfile`, `--ssl-certfile`, и `--log-config`.
     3. Возвращает настроенный парсер аргументов.

    ascii
     Создание парсера ArgumentParser
     ↓
     Добавление аргументов командной строки
     ↓
     Возврат парсера ArgumentParser
    """
```

### `main`

```python
def main() -> None:
    """Основная функция для запуска gpt4free.

    Args:
        Нет

    Returns:
        None

    Как работает функция:
     1. Создает главный парсер аргументов с описанием "Run gpt4free".
     2. Создает подпарсеры для режимов "api" и "gui", используя `get_api_parser` и `gui_parser` соответственно.
     3. Обрабатывает аргументы командной строки.
     4. В зависимости от выбранного режима ("api" или "gui"), вызывает соответствующие функции (`run_api_args` или `run_gui_args`).
     5. Если режим не указан, выводит справку и завершает программу с кодом ошибки 1.
    ascii
     Создание главного парсера ArgumentParser
     ↓
     Создание подпарсеров для режимов "api" и "gui"
     ↓
     Обработка аргументов командной строки
     ↓
     Вызов соответствующей функции в зависимости от выбранного режима
    """
```

### `run_api_args`

```python
def run_api_args(args: argparse.Namespace) -> None:
    """Запускает API режим с заданными аргументами.

    Args:
        args (argparse.Namespace): Объект, содержащий аргументы командной строки.

    Returns:
        None

    Как работает функция:
     1. Импортирует `AppConfig` и `run_api` из модуля `g4f.api`.
     2. Устанавливает конфигурацию приложения, используя аргументы командной строки.
     3. Если указаны браузеры для cookie, обновляет список браузеров в `g4f.cookies`.
     4. Вызывает функцию `run_api` с аргументами командной строки.
    ascii
     Импорт AppConfig и run_api
     ↓
     Установка конфигурации приложения
     ↓
     Обновление списка браузеров для cookie (если указаны)
     ↓
     Вызов функции run_api
    """