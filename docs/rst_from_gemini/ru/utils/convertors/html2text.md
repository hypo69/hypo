```markdown
# Модуль `html2text` для преобразования HTML в Markdown

Файл: `hypotez/src/utils/convertors/html2text.py`

Этот модуль предоставляет функцию `html2text`, которая преобразует HTML-код в эквивалентный Markdown-текст.  Модуль позволяет настраивать вывод, включая обработку изображений, ссылок, списков, заголовков и других HTML-элементов.

**Ключевые особенности:**

* **Преобразование HTML в Markdown:**  Основная функция модуля — преобразование HTML-документов в Markdown-формат.
* **Обработка различных элементов:** Поддерживается широкий набор HTML-элементов, включая:
    * Заголовки (h1-h9)
    * Абзацы (`<p>`)
    * Списки (`<ol>`, `<ul>`, `<li>`)
    * Цитаты (`<blockquote>`)
    * Ссылки (`<a>`)
    * Изображения (`<img>`)
    * Разделители (`<hr>`)
    * Элементы вставки (`<em>`, `<strong>`, `<u>`)
* **Настройка вывода:** Предоставляются опции для настройки поведения преобразователя:
    * `BODY_WIDTH`: Ширина вывода, чтобы избежать переполнения строки (значение по умолчанию 78).
    * `LINKS_EACH_PARAGRAPH`:  Позволяет размещать ссылки после каждого абзаца, а не в конце всего текста.
    * `SKIP_INTERNAL_LINKS`: Игнорирование внутренних ссылок (`href="#local-anchor"`).
    * `INLINE_LINKS`: Использование инлайн-форматирования для ссылок и изображений.
    * `GOOGLE_LIST_INDENT`: Отступ для вложенных списков в документах Google Docs.
    * `IGNORE_ANCHORS`, `IGNORE_IMAGES`: Опции игнорирования элементов `anchor` и `img`.
* **Обработка специальных символов и сущностей:** Реализована обработка HTML-сущностей (`&nbsp;`, `&mdash;`, `&copy;`, etc.) и символов, которые часто встречаются в HTML.
* **Поддержка Python 2 и 3:** Модуль написан с учетом совместимости с Python 2 и 3.
* **Настройка через опции:** Преобразователь позволяет настроить поведение с помощью командной строки или через передачу опций в функцию `html2text`.
* **Обработка Google Docs:**  Модуль адаптирован к преобразованию HTML-вывода Google Docs (опция `--google-doc`).


**Структура модуля:**

Модуль содержит множество функций и классов, включая:

* `_html2text`: Класс для парсинга HTML-кода.
* `unescape`: Функция для разбора HTML-сущностей.
* `html2text_file`: Функция для преобразования HTML-файла.
* `html2text`:  Функция для преобразования HTML-строки в Markdown.
* `optparse`: Обработка командной строки.

**Использование:**

Для преобразования HTML-строки в Markdown:

```python
import html2text

html_code = "<h1>Заголовок</h1><p>Это текст.</p>"
markdown_text = html2text.html2text(html_code)
print(markdown_text)
```

В командной строке:

```bash
python html2text.py input.html > output.md
```

**Важно:**

Этот код достаточно сложный, и для полного понимания всех функций и настроек следует внимательно изучить исходный код.


```