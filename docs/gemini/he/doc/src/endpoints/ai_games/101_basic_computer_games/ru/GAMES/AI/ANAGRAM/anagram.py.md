# anagram.py

## סקירה כללית

קובץ זה מכיל קוד ליישום משחק אנאגרמות באמצעות מודל Google Generative AI. המודול מגדיר מחלקה לגישה למודלי Google AI, מאתחל מודל עם מפתח API והנחיות מערכת, ומספק פונקציה לשאילתות של המודל. הוא כולל גם לולאת ממשק משתמש פשוטה שבה המשתמש יכול להזין אותיות ולקבל אנאגרמה.

## תוכן עניינים

- [מחלקות](#מחלקות)
  - [GoogleGenerativeAI](#GoogleGenerativeAI)
- [פונקציות](#פונקציות)
  - [`__init__`](#__init__)
  - [`ask`](#ask)
- [סקריפט](#סקריפט)

## מחלקות

### `GoogleGenerativeAI`

**Description**: מחלקה לאינטראקציה עם מודלים של Google Generative AI.

**Methods**:
- [`__init__`](#__init__): מאתחל את המחלקה עם מפתח API, הוראה למערכת ושם המודל.
- [`ask`](#ask): שולח שאילתה למודל ומחזיר תשובה.

## פונקציות

### `__init__`

**Description**: מאתחל את המופע של `GoogleGenerativeAI` עם מפתח API, הוראה למערכת ושם המודל.

```python
def __init__(self, api_key: str, system_instruction: str = "", model_name: str = "gemini-2.0-flash-exp") -> None:
    """
    Args:
        api_key (str): מפתח ה-API לגישה ל-Gemini.
        system_instruction (str, optional): הוראה למודל (הנחיה למערכת). ברירת מחדל: "".
        model_name (str, optional): שם מודל Gemini המשמש. ברירת מחדל: "gemini-2.0-flash-exp".

    Returns:
        None: הפונקציה אינה מחזירה דבר.
    """
```

### `ask`

**Description**: שולח שאילתה למודל ומחזיר תשובה.

```python
def ask(self, q: str) -> str:
    """
    Args:
        q (str): טקסט השאילתה.

    Returns:
        str: תשובת המודל או הודעת שגיאה.
    """
```

## סקריפט

```python
# הוראה עבור Gemini (הנחיה למערכת)
system_instruction = """
אתה מחולל אנגרמות. המשימה שלך היא למצוא מילה קיימת בשפה הרוסית מתוך קבוצת אותיות נתונה, תוך שימוש בכל האותיות או בחלקן.

כללים:

1. התעלם מכל סמל מלבד אותיות רוסיות. אין להביא בחשבון מספרים וסמלים אחרים.
2. אם ניתן ליצור מספר מילים מהאותיות הנתונות, החזר אחת מהן.
3. אם אי אפשר ליצור מילה בשפה הרוסית מהאותיות הנתונות, החזר את התשובה "Нет анаграмм".
4. אל תיצור ניאולוגיזמים או מילים מומצאות. השתמש רק במילים קיימות בשפה הרוסית.
5. אל תסביר את התהליך, פשוט החזר מילה או "Нет анаграмм".
"""

API_KEY: str = input("API ключ от `gemini`: ")  # Запрашиваем API ключ у пользователя
model = GoogleGenerativeAI(api_key=API_KEY, system_instruction=system_instruction) # Создаем экземпляр класса, передавая API ключ и инструкцию

if __name__ == "__main__":
    while True: # לולאה אינסופית לקבלת קלט
        q = input("Введите буквы, по которым Gemini подберет анаграмму (для выхода нажмите Ctrl+C): ")
        # Очистка ввода от не кириллических символов
        q = re.sub(r"[^а-яА-ЯёЁ]", "", q) # מחיקת כל התווים שאינם אותיות קיריליות
        if not q: # בודק אם המחרוזת נשארה ריקה לאחר ניקוי
            print("Введены некорректные символы. Введите русские буквы.")
            continue # מעבר לאיטרציה הבאה של הלולאה
        response = model.ask(q) # שולח בקשה למודל
        print(response) # הדפסת התגובה של המודל