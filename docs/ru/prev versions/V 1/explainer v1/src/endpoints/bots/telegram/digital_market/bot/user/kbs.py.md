## –ò–ù–°–¢–†–£–ö–¶–ò–Ø:

–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥ –ø–æ–¥—Ä–æ–±–Ω–æ –∏ –æ–±—ä—è—Å–Ω–∏ –µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å. –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å —Ç—Ä–∏ —Ä–∞–∑–¥–µ–ª–∞:

1.  **<–∞–ª–≥–æ—Ä–∏—Ç–º>**: –û–ø–∏—à–∏ —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å –≤ –≤–∏–¥–µ –ø–æ—à–∞–≥–æ–≤–æ–π –±–ª–æ–∫-—Å—Ö–µ–º—ã, –≤–∫–ª—é—á–∞—è –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –±–ª–æ–∫–∞, –∏ –ø—Ä–æ–∏–ª–ª—é—Å—Ç—Ä–∏—Ä—É–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏, –∫–ª–∞—Å—Å–∞–º–∏ –∏–ª–∏ –º–µ—Ç–æ–¥–∞–º–∏.
2.  **<mermaid>**: –ù–∞–ø–∏—à–∏ –∫–æ–¥ –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ `mermaid`, –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∏ –æ–±—ä—è—Å–Ω–∏ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏,
    –∫–æ—Ç–æ—Ä—ã–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–∏–∞–≥—Ä–∞–º–º—ã.
    **–í–ê–ñ–ù–û!** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ –¥–∏–∞–≥—Ä–∞–º–º–µ `mermaid`,
    –∏–º–µ—é—Ç –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –∏ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞. –ò–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤—Ä–æ–¥–µ `A`, `B`, `C`, –∏ —Ç.–¥., –Ω–µ –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è!

    **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –ï—Å–ª–∏ –≤ –∫–æ–¥–µ –µ—Å—Ç—å –∏–º–ø–æ—Ä—Ç `import header`, –¥–æ–±–∞–≤—å—Ç–µ –±–ª–æ–∫ `mermaid` flowchart, –æ–±—ä—è—Å–Ω—è—é—â–∏–π `header.py`:
    ```mermaid
    flowchart TD
        Start --> Header[<code>header.py</code><br> Determine Project Root]

        Header --> import[Import Global Settings: <br><code>from src import gs</code>]
    ```

3.  **<–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ>**: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è:
    *   **–ò–º–ø–æ—Ä—Ç—ã**: –ò—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ –≤–∑–∞–∏–º–æ—Å–≤—è–∑—å —Å –¥—Ä—É–≥–∏–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏ `src.`.
    *   **–ö–ª–∞—Å—Å—ã**: –ò—Ö —Ä–æ–ª—å, –∞—Ç—Ä–∏–±—É—Ç—ã, –º–µ—Ç–æ–¥—ã –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞.
    *   **–§—É–Ω–∫—Ü–∏–∏**: –ò—Ö –∞—Ä–≥—É–º–µ–Ω—Ç—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ –ø—Ä–∏–º–µ—Ä—ã.
    *   **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**: –ò—Ö —Ç–∏–ø—ã –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ.
    *   –í—ã–¥–µ–ª–∏—Ç–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏–ª–∏ –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è.

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ, –ø–æ—Å—Ç—Ä–æ–π—Ç–µ —Ü–µ–ø–æ—á–∫—É –≤–∑–∞–∏–º–æ—Å–≤—è–∑–µ–π —Å –¥—Ä—É–≥–∏–º–∏ —á–∞—Å—Ç—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ).

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—Å–µ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞.
## –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞: `.md` (markdown)
**–ö–û–ù–ï–¶ –ò–ù–°–¢–†–£–ö–¶–ò–ò**

## <–∞–ª–≥–æ—Ä–∏—Ç–º>
### –§—É–Ω–∫—Ü–∏—è `main_user_kb`
1.  **–ù–∞—á–∞–ª–æ**: –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `user_id` (—Ü–µ–ª–æ–µ —á–∏—Å–ª–æ).
    *   *–ü—Ä–∏–º–µ—Ä*: `user_id = 12345`
2.  **–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã**: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è `InlineKeyboardBuilder`.
3.  **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫**:
    *   –î–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫–Ω–æ–ø–∫–∏ "üë§ –ú–æ–∏ –ø–æ–∫—É–ø–∫–∏", "üõç –ö–∞—Ç–∞–ª–æ–≥", "‚ÑπÔ∏è –û –º–∞–≥–∞–∑–∏–Ω–µ", "üåü –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∞–≤—Ç–æ—Ä–∞ üåü" —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ `callback_data` –∏–ª–∏ `url`.
    *   *–ü—Ä–∏–º–µ—Ä:* –ö–Ω–æ–ø–∫–∞ "üõç –ö–∞—Ç–∞–ª–æ–≥" –∏–º–µ–µ—Ç `callback_data` —Ä–∞–≤–Ω–æ–µ `"catalog"`.
4.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, –≤—Ö–æ–¥–∏—Ç –ª–∏ `user_id` –≤ —Å–ø–∏—Å–æ–∫ `settings.ADMIN_IDS`.
    *   *–ü—Ä–∏–º–µ—Ä:* –ï—Å–ª–∏ `user_id = 12345` –∏ `settings.ADMIN_IDS = [12345, 67890]`, —Ç–æ —É—Å–ª–æ–≤–∏–µ –≤–µ—Ä–Ω–æ.
5.  **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω-–∫–Ω–æ–ø–∫–∏**: –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä, –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "‚öôÔ∏è –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å".
6.  **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è**: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–æ–ø–æ–∫ –≤ —Å—Ç—Ä–æ–∫–µ `kb.adjust(1)`.
7.  **–í–æ–∑–≤—Ä–∞—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã**: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ `InlineKeyboardMarkup` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è.

### –§—É–Ω–∫—Ü–∏—è `catalog_kb`
1.  **–ù–∞—á–∞–ª–æ**: –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–ø–∏—Å–æ–∫ `catalog_data` —Ç–∏–ø–∞ `List[Category]`.
    *   *–ü—Ä–∏–º–µ—Ä:* `catalog_data = [Category(id=1, category_name="–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞"), Category(id=2, category_name="–ö–Ω–∏–≥–∏")]`
2.  **–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã**: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è `InlineKeyboardBuilder`.
3.  **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π**: –î–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ `catalog_data` —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ —Å –∏–º–µ–Ω–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ `callback_data` –≤–∏–¥–∞ `"category_{category.id}"`.
    *   *–ü—Ä–∏–º–µ—Ä:* –î–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ `Category(id=1, category_name="–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞")` —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ —Å —Ç–µ–∫—Å—Ç–æ–º "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞" –∏ `callback_data` `"category_1"`.
4.  **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "–ù–∞ –≥–ª–∞–≤–Ω—É—é"**: –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é".
5.  **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è**: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–æ–ø–æ–∫ –≤ —Å—Ç—Ä–æ–∫–µ `kb.adjust(2)`.
6.  **–í–æ–∑–≤—Ä–∞—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã**: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ `InlineKeyboardMarkup` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è.

### –§—É–Ω–∫—Ü–∏—è `purchases_kb`
1.  **–ù–∞—á–∞–ª–æ**: –§—É–Ω–∫—Ü–∏—è –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤.
2.  **–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã**: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è `InlineKeyboardBuilder`.
3.  **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫**: –î–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫–Ω–æ–ø–∫–∏ "üóë –°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∫—É–ø–∫–∏" –∏ "üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é".
4.  **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è**: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–æ–ø–æ–∫ –≤ —Å—Ç—Ä–æ–∫–µ `kb.adjust(1)`.
5.  **–í–æ–∑–≤—Ä–∞—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã**: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ `InlineKeyboardMarkup` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è.

### –§—É–Ω–∫—Ü–∏—è `product_kb`
1.  **–ù–∞—á–∞–ª–æ**: –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `product_id`, `price` –∏ `stars_price`.
2.  **–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã**: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è `InlineKeyboardBuilder`.
3.  **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫**:
    *   –î–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫–Ω–æ–ø–∫–∏ "üí≥ –û–ø–ª–∞—Ç–∏—Ç—å –Æ–ö–∞—Å—Å–∞", "üí≥ –û–ø–ª–∞—Ç–∏—Ç—å Robocassa", "‚≠ê –û–ø–ª–∞—Ç–∏—Ç—å –∑–≤–µ–∑–¥–∞–º–∏" —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ `callback_data`.
    *   *–ü—Ä–∏–º–µ—Ä:* `product_id=100`, `price=500`, `stars_price=20`, `callback_data` –¥–ª—è –Æ–∫–∞—Å—Å—ã –±—É–¥–µ—Ç `buy_yukassa_100_500`.
    *   –î–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫–Ω–æ–ø–∫–∏ "üõç –ù–∞–∑–∞–¥", "üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é".
4.  **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è**: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–æ–ø–æ–∫ –≤ —Å—Ç—Ä–æ–∫–µ `kb.adjust(2)`.
5.  **–í–æ–∑–≤—Ä–∞—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã**: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ `InlineKeyboardMarkup` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è.

### –§—É–Ω–∫—Ü–∏—è `get_product_buy_youkassa`
1.  **–ù–∞—á–∞–ª–æ**: –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `price` –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç.
2.  **–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã**: –°–æ–∑–¥–∞–µ—Ç—Å—è `InlineKeyboardMarkup` —Å –¥–≤—É–º—è —Ä—è–¥–∞–º–∏ –∫–Ω–æ–ø–æ–∫:
    *   –ö–Ω–æ–ø–∫–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –Æ–ö–∞—Å—Å–∞.
    *   –ö–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∏—Ç—å".
3.  **–í–æ–∑–≤—Ä–∞—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã**: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ `InlineKeyboardMarkup` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è.

### –§—É–Ω–∫—Ü–∏—è `get_product_buy_robocassa`
1.  **–ù–∞—á–∞–ª–æ**: –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `price` –∏ `payment_link`.
2.  **–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã**: –°–æ–∑–¥–∞–µ—Ç—Å—è `InlineKeyboardMarkup` —Å –¥–≤—É–º—è —Ä—è–¥–∞–º–∏ –∫–Ω–æ–ø–æ–∫:
    *   –ö–Ω–æ–ø–∫–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ Robocassa, –∏—Å–ø–æ–ª—å–∑—É—é—â–∞—è `WebAppInfo` —Å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º `payment_link`.
    *   –ö–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∏—Ç—å".
3.  **–í–æ–∑–≤—Ä–∞—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã**: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ `InlineKeyboardMarkup` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è.

### –§—É–Ω–∫—Ü–∏—è `get_product_buy_stars`
1.  **–ù–∞—á–∞–ª–æ**: –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `price`.
2.  **–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã**: –°–æ–∑–¥–∞–µ—Ç—Å—è `InlineKeyboardMarkup` —Å –¥–≤—É–º—è —Ä—è–¥–∞–º–∏ –∫–Ω–æ–ø–æ–∫:
    *   –ö–Ω–æ–ø–∫–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã –∑–≤–µ–∑–¥–∞–º–∏.
    *   –ö–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∏—Ç—å".
3.  **–í–æ–∑–≤—Ä–∞—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã**: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ `InlineKeyboardMarkup` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è.

## <mermaid>

```mermaid
flowchart TD
    subgraph User Interaction
        MainUserKeyboard(main_user_kb) --> ProfileButton[–ú–æ–∏ –ø–æ–∫—É–ø–∫–∏]
        MainUserKeyboard --> CatalogButton[–ö–∞—Ç–∞–ª–æ–≥]
        MainUserKeyboard --> AboutButton[–û –º–∞–≥–∞–∑–∏–Ω–µ]
        MainUserKeyboard --> SupportButton[–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∞–≤—Ç–æ—Ä–∞]
        MainUserKeyboard --> AdminButton[–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å]
        CatalogButton --> CatalogKeyboard(catalog_kb)
        CatalogKeyboard --> CategoryButton[–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞]
        CategoryButton --> ProductKeyboard(product_kb)
        ProductKeyboard --> BuyYukassaButton[–û–ø–ª–∞—Ç–∏—Ç—å –Æ–ö–∞—Å—Å–∞]
        ProductKeyboard --> BuyRobocassaButton[–û–ø–ª–∞—Ç–∏—Ç—å Robocassa]
        ProductKeyboard --> BuyStarsButton[–û–ø–ª–∞—Ç–∏—Ç—å –∑–≤–µ–∑–¥–∞–º–∏]
        ProductKeyboard --> BackToCatalogButton[–ù–∞–∑–∞–¥]
        ProductKeyboard --> HomeButton[–ù–∞ –≥–ª–∞–≤–Ω—É—é]
        ProfileButton --> PurchasesKeyboard(purchases_kb)
        PurchasesKeyboard --> WatchPurchasesButton[–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∫—É–ø–∫–∏]
         WatchPurchasesButton --> HomeButton
        BuyYukassaButton --> YoukassaPayment(get_product_buy_youkassa)
        BuyRobocassaButton --> RobocassaPayment(get_product_buy_robocassa)
         BuyStarsButton --> StarsPayment(get_product_buy_stars)
        YoukassaPayment --> HomeButton
        RobocassaPayment --> HomeButton
        StarsPayment --> HomeButton
        AboutButton --> HomeButton
        AdminButton --> HomeButton
    end

    subgraph Data Flow
    CategoryData(List[Category])
    ProductData(product_id,price,stars_price)
        CatalogKeyboard -- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç --> CategoryData
        ProductKeyboard -- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç --> ProductData
        RobocassaPayment -- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç --> payment_link
    end

    MainUserKeyboard -- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç --> UserID(user_id)
    AdminButton -- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç --> AdminIDs(settings.ADMIN_IDS)
```

### –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π `mermaid`

1.  **User Interaction**:
    *   **`MainUserKeyboard`**: –ì–ª–∞–≤–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –∫–æ–≥–¥–∞ –æ–Ω –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞.
    *   **`ProfileButton`, `CatalogButton`, `AboutButton`, `SupportButton`, `AdminButton`**: –ö–Ω–æ–ø–∫–∏ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é.
    *   **`CatalogKeyboard`**: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–æ–≤–∞—Ä–æ–≤.
    *   **`CategoryButton`**: –ö–Ω–æ–ø–∫–∏, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤.
    *   **`ProductKeyboard`**: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–Ω–æ–ø–æ–∫ –æ–ø–ª–∞—Ç—ã —Ç–æ–≤–∞—Ä–∞.
    *   **`BuyYukassaButton`, `BuyRobocassaButton`, `BuyStarsButton`**: –ö–Ω–æ–ø–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã.
    *   **`BackToCatalogButton`, `HomeButton`**: –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏.
        *   `PurchasesKeyboard`: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–∞–∑–¥–µ–ª–∞ –ø–æ–∫—É–ø–æ–∫.
        *   `WatchPurchasesButton`: –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–ø–∏—Å–∫–∞ –ø–æ–∫—É–ø–æ–∫.
        *    `YoukassaPayment`: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –æ–ø–ª–∞—Ç—ã –Æ–∫–∞—Å—Å–∞.
        *    `RobocassaPayment`: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –æ–ø–ª–∞—Ç—ã Robocassa.
        *   `StarsPayment`: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –æ–ø–ª–∞—Ç—ã –∑–≤–µ–∑–¥–∞–º–∏.

2.  **Data Flow**:
    *   **`CategoryData`**: –°–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ `Category`, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π.
    *   **`ProductData`**: –î–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–µ (`product_id`, `price`, `stars_price`), –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è `callback_data` –∫–Ω–æ–ø–æ–∫ –æ–ø–ª–∞—Ç—ã.
    *   **`payment_link`**: –°—Å—ã–ª–∫–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ Robocassa.
    *   **`UserID`**:  ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    *   **`AdminIDs`**: –°–ø–∏—Å–æ–∫ ID –∞–¥–º–∏–Ω–æ–≤.

3.  **–°–≤—è–∑–∏**:
    *   –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞ –∏ –¥–∞–Ω–Ω—ã—Ö.
    *   `CatalogKeyboard` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `CategoryData` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π.
    *   `ProductKeyboard` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ProductData` –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫ –æ–ø–ª–∞—Ç—ã.
    *   `RobocassaPayment` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `payment_link` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
    *   `AdminButton` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `UserID` –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –≤ —Å–ø–∏—Å–∫–µ `AdminIDs`.
    *   –í—Å–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å–≤—è–∑–∞–Ω—ã –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º —á–µ—Ä–µ–∑ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏.

## <–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ>

### –ò–º–ø–æ—Ä—Ç—ã:
*   `from typing import List`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `List` –¥–ª—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—è —Å–ø–∏—Å–∫–∏.
*   `from aiogram.types import InlineKeyboardMarkup, ReplyKeyboardMarkup, InlineKeyboardButton, WebAppInfo`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∫–ª–∞—Å—Å—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä:
    *   `InlineKeyboardMarkup` –¥–ª—è –∫–Ω–æ–ø–æ–∫, –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã—Ö –∫ —Å–æ–æ–±—â–µ–Ω–∏—é,
    *   `ReplyKeyboardMarkup` –¥–ª—è –∫–Ω–æ–ø–æ–∫, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã—Ö –ø–æ–¥ –ø–æ–ª–µ–º –≤–≤–æ–¥–∞,
    *   `InlineKeyboardButton` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫ –≤–Ω—É—Ç—Ä–∏ `InlineKeyboardMarkup`,
    *   `WebAppInfo` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –¥–ª—è Robocassa.
*   `from aiogram.utils.keyboard import InlineKeyboardBuilder, ReplyKeyboardBuilder`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä:
    *   `InlineKeyboardBuilder` –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∏—è `InlineKeyboardMarkup`,
    *   `ReplyKeyboardBuilder` –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∏—è `ReplyKeyboardMarkup`.
*   `from bot.app.utils import generate_payment_link`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å—Å—ã–ª–∫–∏.
*   `from bot.config import settings`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞, –≤–∫–ª—é—á–∞—è —Å–ø–∏—Å–æ–∫ ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.
*   `from bot.dao.models import Category`: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∫–ª–∞—Å—Å `Category` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ —Ç–æ–≤–∞—Ä–æ–≤.

### –§—É–Ω–∫—Ü–∏–∏:

*   `main_user_kb(user_id: int) -> InlineKeyboardMarkup`:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**: `user_id` (int) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: `InlineKeyboardMarkup` - –≥–ª–∞–≤–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç –≥–ª–∞–≤–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∫–Ω–æ–ø–∫–∞–º–∏ "–ú–æ–∏ –ø–æ–∫—É–ø–∫–∏", "–ö–∞—Ç–∞–ª–æ–≥", "–û –º–∞–≥–∞–∑–∏–Ω–µ" –∏ "–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∞–≤—Ç–æ—Ä–∞", –∏ "–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å" (–µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä).
    *   **–ü—Ä–∏–º–µ—Ä**: `main_user_kb(12345)` –≤–µ—Ä–Ω–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å ID 12345.
*   `catalog_kb(catalog_data: List[Category]) -> InlineKeyboardMarkup`:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**: `catalog_data` (List[Category]) - —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–æ–≤–∞—Ä–æ–≤.
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: `InlineKeyboardMarkup` - –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ —Ç–æ–≤–∞—Ä–æ–≤.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ `catalog_data`.
    *   **–ü—Ä–∏–º–µ—Ä**: `catalog_kb([Category(id=1, category_name="–ö–Ω–∏–≥–∏"), Category(id=2, category_name="–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞")])` –≤–µ—Ä–Ω–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏ "–ö–Ω–∏–≥–∏" –∏ "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞".
*   `purchases_kb() -> InlineKeyboardMarkup`:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**: –ù–µ—Ç.
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: `InlineKeyboardMarkup` - –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ–∫—É–ø–æ–∫.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏ "–°–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∫—É–ø–∫–∏" –∏ "–ù–∞ –≥–ª–∞–≤–Ω—É—é".
    *   **–ü—Ä–∏–º–µ—Ä**: `purchases_kb()` –≤–µ—Ä–Ω–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–∫—É–ø–∫–∞–º–∏.
*    `product_kb(product_id, price, stars_price) -> InlineKeyboardMarkup`:
     *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**: `product_id` (int), `price` (int), `stars_price` (int) - ID —Ç–æ–≤–∞—Ä–∞, —Ü–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö, —Ü–µ–Ω–∞ –≤ –∑–≤–µ–∑–¥–∞—Ö.
     *   **–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: `InlineKeyboardMarkup` - –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã.
     *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã —Ç–æ–≤–∞—Ä–∞ (–Æ–ö–∞—Å—Å–∞, Robocassa, –∑–≤–µ–∑–¥—ã) –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (–Ω–∞–∑–∞–¥ –≤ –∫–∞—Ç–∞–ª–æ–≥, –Ω–∞ –≥–ª–∞–≤–Ω—É—é).
     *   **–ü—Ä–∏–º–µ—Ä**: `product_kb(100, 500, 20)` –≤–µ—Ä–Ω–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–ª—è –æ–ø–ª–∞—Ç—ã —Ç–æ–≤–∞—Ä–∞ —Å ID 100, —Ü–µ–Ω–æ–π 500 —Ä—É–±–ª–µ–π –∏ 20 –∑–≤–µ–∑–¥–∞–º–∏.
*   `get_product_buy_youkassa(price) -> InlineKeyboardMarkup`:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**: `price` (int) - —Ü–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞.
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: `InlineKeyboardMarkup` - –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –Æ–ö–∞—Å—Å–∞.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è –æ–ø–ª–∞—Ç—ã —Ç–æ–≤–∞—Ä–∞ —á–µ—Ä–µ–∑ –Æ–ö–∞—Å—Å–∞.
    *   **–ü—Ä–∏–º–µ—Ä**: `get_product_buy_youkassa(500)` –≤–µ—Ä–Ω–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–æ–π "–û–ø–ª–∞—Ç–∏—Ç—å 500‚ÇΩ" –∏ –∫–Ω–æ–ø–∫–æ–π "–û—Ç–º–µ–Ω–∏—Ç—å".
*   `get_product_buy_robocassa(price: int, payment_link: str) -> InlineKeyboardMarkup`:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**: `price` (int) - —Ü–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞, `payment_link` (str) - —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É.
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: `InlineKeyboardMarkup` - –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ Robocassa.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ Robocassa —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `WebAppInfo` –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ–ø–ª–∞—Ç—ã.
    *   **–ü—Ä–∏–º–µ—Ä**: `get_product_buy_robocassa(500, "https://robocassa.com/payment/12345")` –≤–µ—Ä–Ω–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–æ–π "–û–ø–ª–∞—Ç–∏—Ç—å 500‚ÇΩ" —Å –ø–µ—Ä–µ—Ö–æ–¥–æ–º –ø–æ —Å—Å—ã–ª–∫–µ –∏ –∫–Ω–æ–ø–∫–æ–π "–û—Ç–º–µ–Ω–∏—Ç—å".
*   `get_product_buy_stars(price) -> InlineKeyboardMarkup`:
    *   **–ê—Ä–≥—É–º–µ–Ω—Ç—ã**: `price` (int) - —Ü–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞ –≤ –∑–≤–µ–∑–¥–∞—Ö.
    *   **–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: `InlineKeyboardMarkup` - –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã –∑–≤–µ–∑–¥–∞–º–∏.
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è –æ–ø–ª–∞—Ç—ã —Ç–æ–≤–∞—Ä–∞ –∑–≤–µ–∑–¥–∞–º–∏.
    *   **–ü—Ä–∏–º–µ—Ä**: `get_product_buy_stars(20)` –≤–µ—Ä–Ω–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–æ–π "–û–ø–ª–∞—Ç–∏—Ç—å 20 ‚≠ê" –∏ –∫–Ω–æ–ø–∫–æ–π "–û—Ç–º–µ–Ω–∏—Ç—å".

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

*   `user_id` (int): ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
*   `catalog_data` (List[Category]): –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–æ–≤–∞—Ä–æ–≤.
*   `kb` (InlineKeyboardBuilder): –û–±—ä–µ–∫—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä.
*   `price` (int): –¶–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞.
*   `payment_link` (str): –°—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É —á–µ—Ä–µ–∑ Robocassa.
*   `stars_price` (int): –¶–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞ –≤ –∑–≤–µ–∑–¥–∞—Ö.
*   `product_id` (int): ID —Ç–æ–≤–∞—Ä–∞.
*   `settings.ADMIN_IDS` (List[int]): –°–ø–∏—Å–æ–∫ ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è:

*   **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –Ω–µ—É–¥–∞—á–Ω–æ–π –ø–æ–ø—ã—Ç–∫–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏–ª–∏ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å—Å—ã–ª–∫–∏.
*   **–ì–∏–±–∫–æ—Å—Ç—å**: –ö–æ–¥ –Ω–µ –æ—á–µ–Ω—å –≥–∏–±–∫–∏–π, —Ç–∞–∫ –∫–∞–∫ –∫–Ω–æ–ø–∫–∏ –∂–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω—ã. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–ª–∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –±–æ–ª–µ–µ –¥–∏–Ω–∞–º–∏—á–Ω–æ–≥–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫.
*  **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ —Ü–µ–Ω –∏ –¥—Ä—É–≥–∏—Ö —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω—É–∂–Ω–æ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.
*   **–õ–æ–≥–∏–∫–∞**: –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –ª–æ–≥–∏–∫–∏ –ø–æ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã).
*   **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –í —Ç–µ–∫—É—â–µ–º –≤–∏–¥–µ –∫–æ–¥ –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π.

### –í–∑–∞–∏–º–æ—Å–≤—è–∑—å —Å –¥—Ä—É–≥–∏–º–∏ —á–∞—Å—Ç—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞:

*   –ö–æ–¥ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å `bot.config.settings` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.
*   –ö–æ–¥ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å `bot.dao.models` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö —Ç–æ–≤–∞—Ä–æ–≤.
*   –ö–æ–¥ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å `bot.app.utils` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å—Å—ã–ª–∫–∏ –¥–ª—è Robocassa.
*   –≠—Ç–æ—Ç –∫–æ–¥ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –ª–æ–≥–∏–∫–∏ –±–æ—Ç–∞, –∏ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥–∞—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –±–æ—Ç–æ–º.

–í —Ü–µ–ª–æ–º, –∫–æ–¥ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–ª–∞–≤–∏–∞—Ç—É—Ä –¥–ª—è —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç–∞. –ö–æ–¥ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –≤ –ø–ª–∞–Ω–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫, –≥–∏–±–∫–æ—Å—Ç–∏, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏.