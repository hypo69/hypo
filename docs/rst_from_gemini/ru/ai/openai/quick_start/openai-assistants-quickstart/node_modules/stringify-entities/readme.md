```markdown
# stringify-entities

Serialize (encode) HTML character references.

[![Build Status][build-badge]][build]
[![Coverage Status][coverage-badge]][coverage]
[![Downloads][downloads-badge]][downloads]
[![Size][size-badge]][size]

## Contents

* [What is this?](#what-is-this)
* [When should I use this?](#when-should-i-use-this)
* [Install](#install)
* [Use](#use)
* [API](#api)
    * [`stringifyEntities(value[, options])`](#stringifyentitiesvalue-options)
* [Algorithm](#algorithm)
* [Types](#types)
* [Compatibility](#compatibility)
* [Security](#security)
* [Related](#related)
* [Contribute](#contribute)
* [License](#license)


## What is this?

A small and efficient encoder for HTML character references.  Offers a balance between options for minification/formatting and a small size when using `stringifyEntitiesLight`.


## When should I use this?

Use this package for spec-compliant encoding of character references. It's well-suited for use in HTML formatters and minifiers, providing reliable encoding, especially crucial when handling characters that might cause issues in older browsers.


## Install

This package is ESM only.

**Node.js (version 14.14+ and 16.0+)**

```bash
npm install stringify-entities
```

**Deno**

```javascript
import {stringifyEntities} from 'https://esm.sh/stringify-entities@4'
```

**Browsers**

```html
<script type="module">
  import {stringifyEntities} from 'https://esm.sh/stringify-entities@4?bundle'
</script>
```


## Use

```javascript
import {stringifyEntities} from 'stringify-entities';

console.log(stringifyEntities('alpha ¬© bravo ‚â† charlie ùåÜ delta'));
// Output: alpha &#xA9; bravo &#x2260; charlie &#x1D306; delta

console.log(stringifyEntities('alpha ¬© bravo ‚â† charlie ùåÜ delta', { useNamedReferences: true }));
// Output: alpha &copy; bravo &ne; charlie &#x1D306; delta
```


## API

This package exports `stringifyEntities` and `stringifyEntitiesLight`.  No default export.

### `stringifyEntities(value[, options])`

Encodes special characters in `value`.

#### Options

##### Core Options

* **`escapeOnly`**: (boolean, default: `false`)  Only escape potentially dangerous characters: `"`, `&`, `'`, `<`, `>`, and `\``.
* **`subset`**: (Array<string>, optional)  Specify a subset of characters to escape.  Note that this only supports BMP characters (no emoji).

##### Formatting Options

These options affect the type of character references generated.  If you don't need fine-grained control, use `stringifyEntitiesLight`.

* **`useNamedReferences`**: (boolean, default: `false`) Use named character references (`&amp;`) if available.
* **`useShortestReferences`**: (boolean, default: `false`) Use the shortest possible reference (decimal, hexadecimal, or named).
    * Note: `useNamedReferences` is omitted when `useShortestReferences` is used.
* **`omitOptionalSemicolons`**: (boolean, default: `false`) Omit semicolons when possible (potentially creates parse errors but is useful for minification).
    * Note: Using `omitOptionalSemicolons: true` implies some danger for uncontrolled usage.
* **`attribute`**: (boolean, default: `false`) Create character references suitable for use in HTML attributes.  Implies use of `omitOptionalSemicolons: true` when necessary.

#### Returns

The encoded string.


## Algorithm

By default, dangerous, non-ASCII, and non-printable ASCII characters are encoded using hexadecimal references. A subset of characters can be specified, or `escapeOnly` can be used to only escape the dangerous set.  Named references are optional; `stringifyEntitiesLight` always generates hexadecimal character references.


## Types

This package is TypeScript-typed.  It exports types `Options` and `LightOptions`.


## Compatibility

Compatible with Node.js 14.14+, 16.0+, Deno, and modern browsers.


## Security

This package is designed to be secure.


## Related

* [`parse-entities`](https://github.com/wooorm/parse-entities): Decodes HTML character references.
* [`wooorm/character-entities`](https://github.com/wooorm/character-entities): Information about character references.
* [`wooorm/character-entities-html4`](https://github.com/wooorm/character-entities-html4): HTML 4 character references.
* [`wooorm/character-entities-legacy`](https://github.com/wooorm/character-entities-legacy): Information about legacy character references.
* [`wooorm/character-reference-invalid`](https://github.com/wooorm/character-reference-invalid): Details on invalid numeric character references.


## Contribute

Contributions welcome!  See [How to Contribute to Open Source](https://opensource.guide/how-to-contribute/).


## License

[MIT][license] ¬© [Titus Wormer][author]


```