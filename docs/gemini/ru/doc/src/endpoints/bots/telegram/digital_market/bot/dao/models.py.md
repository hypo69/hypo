# Модуль `models.py`

## Обзор

Модуль содержит определения моделей базы данных, используемых для хранения информации о пользователях, категориях, продуктах и покупках в контексте Telegram-бота для цифрового магазина. В модуле определены классы, представляющие таблицы базы данных, с использованием SQLAlchemy ORM.

## Подробней

Этот модуль определяет структуру базы данных, необходимую для хранения информации о пользователях, категориях товаров, самих товарах и совершенных покупках. Он использует SQLAlchemy для определения моделей и их связей, что позволяет удобно взаимодействовать с базой данных. Модуль обеспечивает основу для хранения и управления данными, связанными с цифровым магазином в Telegram.

## Классы

### `User`

**Описание**: Класс представляет модель пользователя в базе данных.

**Как работает класс**:
Класс `User` наследуется от `Base` и определяет структуру таблицы `users` в базе данных. Он содержит информацию о Telegram ID пользователя, его имени пользователя, имени и фамилии. Также устанавливает связь "один ко многим" с таблицей `Purchase` через отношение `purchases`.

**Атрибуты**:
- `telegram_id` (int): Уникальный идентификатор пользователя в Telegram. Является первичным ключом таблицы.
- `username` (str | None): Имя пользователя в Telegram (может отсутствовать).
- `first_name` (str | None): Имя пользователя (может отсутствовать).
- `last_name` (str | None): Фамилия пользователя (может отсутствовать).
- `purchases` (List['Purchase']): Список покупок, связанных с пользователем.

**Методы**:
- `__repr__`: Возвращает строковое представление объекта `User`.

### `Category`

**Описание**: Класс представляет модель категории товаров в базе данных.

**Как работает класс**:
Класс `Category` наследуется от `Base` и определяет структуру таблицы `categories` в базе данных. Он содержит информацию о названии категории и устанавливает связь "один ко многим" с таблицей `Product` через отношение `products`.

**Атрибуты**:
- `category_name` (str): Название категории.
- `products` (List["Product"]): Список продуктов, связанных с категорией.

**Методы**:
- `__repr__`: Возвращает строковое представление объекта `Category`.

### `Product`

**Описание**: Класс представляет модель товара в базе данных.

**Как работает класс**:
Класс `Product` наследуется от `Base` и определяет структуру таблицы `products` в базе данных. Он содержит информацию о названии товара, описании, цене, идентификаторе файла (например, изображения), идентификаторе категории и скрытом содержимом. Устанавливает связь "многие к одному" с таблицей `Category` через отношение `category` и связь "один ко многим" с таблицей `Purchase` через отношение `purchases`.

**Атрибуты**:
- `name` (str): Название товара.
- `description` (str): Описание товара.
- `price` (int): Цена товара.
- `file_id` (str | None): Идентификатор файла, связанного с товаром (например, изображение).
- `category_id` (int): Идентификатор категории, к которой относится товар.
- `hidden_content` (str): Скрытое содержимое товара.
- `category` (Category): Категория, к которой относится товар.
- `purchases` (List['Purchase']): Список покупок, связанных с товаром.

**Методы**:
- `__repr__`: Возвращает строковое представление объекта `Product`.

### `Purchase`

**Описание**: Класс представляет модель покупки в базе данных.

**Как работает класс**:
Класс `Purchase` наследуется от `Base` и определяет структуру таблицы `purchases` в базе данных. Он содержит информацию об идентификаторе пользователя, идентификаторе товара, цене, типе оплаты и идентификаторе платежа. Устанавливает связь "многие к одному" с таблицами `User` и `Product` через отношения `user` и `product` соответственно.

**Атрибуты**:
- `user_id` (int): Идентификатор пользователя, совершившего покупку.
- `product_id` (int): Идентификатор приобретенного товара.
- `price` (int): Цена покупки.
- `payment_type` (str): Тип оплаты.
- `payment_id` (str): Уникальный идентификатор платежа.
- `user` (User): Пользователь, совершивший покупку.
- `product` (Product): Приобретенный товар.

**Методы**:
- `__repr__`: Возвращает строковое представление объекта `Purchase`.