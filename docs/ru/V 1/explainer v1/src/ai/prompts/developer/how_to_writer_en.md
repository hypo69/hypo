## <алгоритм>

1. **Анализ кода**:
   - Получить текущий блок кода и все предыдущие блоки кода в проекте.
   - Проанализировать, что делает каждый блок кода, какие функции он вызывает, какие проверки выполняет.

2. **Создание инструкции**:
   - Создать инструкцию в формате reStructuredText (RST) для текущего блока кода.
   - Разделить инструкцию на три раздела: "Описание", "Шаги выполнения", "Пример использования".

3. **Раздел "Описание"**:
   - Описать назначение текущего блока кода:
     - Какую задачу он решает.
     - Какую проверку выполняет.
     - Какие данные обрабатывает.

4. **Раздел "Шаги выполнения"**:
   - Описать последовательность действий, необходимых для выполнения кода.
   - Для каждого шага:
     - Детально описать, что происходит.
     - Если вызывается функция, указать, какая функция и с какими параметрами.
     - Если выполняется проверка, указать, какая проверка выполняется и над какими данными.
     - Использовать точные формулировки, например: "код проверяет", "код отправляет запрос", "код извлекает данные".

5. **Раздел "Пример использования"**:
   - Предоставить пример использования данного блока кода в проекте.
   - Привести пример вызова функций или методов, если они есть.
   - Вставить пример кода в формате `code-block:: python`.

6. **Примеры**:
   - **Пример проверки переменной:**
     - Описание: Код проверяет значение переменной `value`.
     - Шаги:
       1. Извлечение значения переменной с помощью `get_value()`.
       2. Проверка, является ли значение пустым или невалидным. Если да, запись ошибки и остановка.
       3. Если значение валидное, передача его в следующую функцию для обработки.
     - Пример:
       ```python
       value = get_value()
       if value:
           process_value(value)
       else:
           logger.error('Invalid value')
       ```

   - **Пример отправки запроса:**
     - Описание: Код отправляет запрос к API.
     - Шаги:
       1. Формирование запроса с необходимыми параметрами.
       2. Отправка запроса к API с помощью функции `send_request()`.
       3. Получение ответа от API.
       4. Обработка полученного ответа.
     - Пример:
       ```python
        request_data = create_request_data()
        response = send_request(request_data)
        if response.ok:
            process_response(response.json())
        else:
            logger.error('API request failed')
       ```

## <mermaid>

```mermaid
flowchart TD
    subgraph "Инструкция для кодовых блоков"
        A[Анализ кода] --> B(Создание RST инструкции);
        B --> C{Раздел "Описание"};
        C --> D{Раздел "Шаги выполнения"};
        D --> E{Раздел "Пример использования"};
        E --> F[Генерация RST документа];
    end

    subgraph "Раздел \"Шаги выполнения\""
        G[Начать описание шагов] --> H{Описать действие};
        H --> I{Вызов функции?};
        I -- Да --> J[Указать, какая функция и параметры];
        I -- Нет --> K{Проверка данных?};
        K -- Да --> L[Указать, какая проверка и над какими данными];
        K -- Нет --> M[Описание следующего действия];
        J --> M;
        L --> M;
        M --> N{Есть еще действия?};
        N -- Да --> H;
        N -- Нет --> O[Закончить описание шагов];
    end
```

**Объяснение `mermaid` диаграммы:**

Диаграмма `mermaid` описывает процесс создания документации для кодовых блоков. Она разделена на два подграфа: "Инструкция для кодовых блоков" и "Раздел `Шаги выполнения`".

1.  **Инструкция для кодовых блоков:**
    -   `A[Анализ кода]`: Начальный этап, где происходит анализ текущего и предыдущих блоков кода.
    -   `B(Создание RST инструкции)`: Создается общая структура инструкции в формате RST.
    -   `C{Раздел "Описание"}`: Создается раздел описания, в котором объясняется назначение блока кода.
    -   `D{Раздел "Шаги выполнения"}`: Создается раздел с подробным описанием шагов выполнения кода.
    -   `E{Раздел "Пример использования"}`: Создается раздел с примером использования кода.
    -   `F[Генерация RST документа]`: На основе собранной информации формируется окончательный RST документ.

2.  **Раздел `Шаги выполнения`:**
    -   `G[Начать описание шагов]`: Начало описания шагов выполнения.
    -   `H{Описать действие}`: Описывается текущее действие в коде.
    -   `I{Вызов функции?}`: Проверяется, происходит ли вызов функции на текущем шаге.
    -   `J[Указать, какая функция и параметры]`: Если функция вызывается, указывается имя функции и параметры.
    -   `K{Проверка данных?}`: Если функция не вызывается, проверяется, выполняется ли проверка данных.
    -   `L[Указать, какая проверка и над какими данными]`: Если проверка выполняется, указывается, какая именно проверка и над какими данными.
    -   `M[Описание следующего действия]`: Описание следующего действия в коде.
    -   `N{Есть еще действия?}`: Проверяется, есть ли еще действия в последовательности.
    -   `O[Закончить описание шагов]`: Завершение описания шагов выполнения.

**Зависимости:**

Диаграмма не имеет явных импортов, так как это описание логики процесса, а не код. Однако, для реализации этого процесса, потребовались бы модули для:

*   Анализа кода (возможно `ast`, `inspect`).
*   Генерации `reStructuredText`.

## <объяснение>

**Объяснение:**

Эта инструкция описывает, как создавать подробную документацию для каждого блока кода в проекте. Цель состоит в том, чтобы сделать код более понятным и легким для использования другими разработчиками.

**Импорты:**

В данном контексте не требуются импорты Python, поскольку это описание процесса, а не исполняемый код. Однако при реальной реализации такого процесса потребуются библиотеки для работы с кодом (например, `ast`, `inspect` для анализа кода), а также для генерации reStructuredText.

**Классы:**

В этом описании нет классов. Весь процесс построен на логических шагах и последовательностях действий. При реализации этого процесса могут потребоваться классы, например, для представления блоков кода или для генерации RST-документов.

**Функции:**

В этом описании также не используются конкретные функции. Однако подразумевается, что для реализации описанного процесса потребуются функции для:

*   Анализа кода.
*   Форматирования текста.
*   Генерации RST-документов.

**Переменные:**

В данном описании не используются конкретные переменные. Однако в реальной реализации могут использоваться переменные для хранения:

*   Данных о коде.
*   Последовательности шагов.
*   Сгенерированной документации.

**Подробные объяснения:**

1.  **Анализ кода**:
    -   Цель - понять, что делает каждый блок кода, его назначение, зависимости и логику работы. Это является основой для создания правильной и понятной документации.
    -   В этом шаге код разбирается на части, выделяются ключевые операции, функции и переменные.

2.  **Создание инструкции (RST)**:
    -   Формат RST выбран для структурирования документации. Он позволяет создавать читаемый и организованный текст.
    -   Каждая инструкция содержит три раздела: описание, шаги выполнения и пример использования.

3.  **Раздел "Описание"**:
    -   Здесь объясняется, для чего предназначен блок кода.
    -   Описание должно быть четким, кратким и понятным для пользователей.
    -   В этом разделе нужно указать, какую задачу решает этот блок, и что он проверяет или обрабатывает.

4.  **Раздел "Шаги выполнения"**:
    -   Описывает последовательность действий, которые нужно выполнить для корректного выполнения кода.
    -   Каждый шаг должен быть подробно описан.
    -   Если есть вызов функций, то нужно указать, какая функция вызывается и с какими параметрами.
    -   Использовать точные формулировки: "код проверяет", "код отправляет запрос", а не просто "код делает".

5.  **Раздел "Пример использования"**:
    -   Здесь приводится пример, как можно использовать этот блок кода в реальном проекте.
    -   Пример должен быть понятным, наглядным и показывать основной сценарий использования.
    -   Пример кода должен быть вставлен с использованием `code-block:: python`.

6.  **Примеры (в коде)**:
    -   Примеры помогают пользователям понять, как использовать блок кода.
    -   Примеры должны покрывать основные сценарии и показать, как правильно вызывать функции или обрабатывать данные.

**Потенциальные ошибки и области для улучшения:**

1.  **Автоматизация анализа кода:** В настоящее время анализ кода выполняется вручную. В будущем можно автоматизировать этот процесс с помощью инструментов статического анализа кода.
2.  **Гибкость:** Текущая инструкция предполагает фиксированную структуру документации. Можно сделать её более гибкой, чтобы можно было адаптировать её под разные типы блоков кода.
3.  **Поддержка разных языков:** В настоящее время инструкция ориентирована на Python. Можно сделать её универсальной, чтобы она работала и с другими языками.
4.  **Обратная связь:** Важно предусмотреть механизм обратной связи от разработчиков, чтобы можно было улучшать качество документации.

**Взаимосвязь с другими частями проекта:**

Эта инструкция тесно связана с любыми блоками кода, которые нужно документировать. Она используется для обеспечения единообразной и понятной документации. Это поможет другим разработчикам быстрее понимать и использовать код в проекте. Кроме того, этот подход к документированию может быть интегрирован в процесс CI/CD, где документация генерируется автоматически после каждого изменения кода.