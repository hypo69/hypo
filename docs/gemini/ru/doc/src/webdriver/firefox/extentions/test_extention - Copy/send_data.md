# Модуль send_data.js

## Обзор

Этот модуль JavaScript содержит функцию `onPageLoad`, которая собирает информацию о загруженной странице (заголовок, URL, содержимое) и отправляет её на сервер по POST запросу.  Функция обрабатывает успешный и неуспешный ответы сервера, выводит сообщения в консоль.


## Функции

### `onPageLoad`

**Описание**: Обрабатывает событие загрузки страницы, собирает данные о странице и отправляет их на сервер.

**Описание работы**:
1. Собирает данные о заголовке (`document.title`), URL страницы (`window.location.href`) и HTML содержимом (`document.body.innerHTML`).
2. Формирует объект `data` с собранными данными.
3. Использует `fetch` для отправки POST запроса на сервер `http://127.0.0.1/hypotez.online/api/`.
4. Обрабатывает ответ сервера:
    - Если ответ не успешный (`!response.ok`), выбрасывает ошибку.
    - Если ответ успешный, парсит ответ как JSON и выводит его в консоль.
5. Обрабатывает ошибки во время запроса к серверу, выводит сообщение об ошибке в консоль.

**Вызывает исключения**

- `Error`: Выбрасывается в случае неудачного ответа сервера (`response.ok == false`).  Подробности ошибки передаются в аргументе.

**Параметры**:
Нет входных параметров.

**Возвращает**:
Ничего не возвращает.


## Использование

Для использования модуля, необходимо добавить обработчик события `load` к объекту `window`. Это гарантирует, что функция `onPageLoad` будет вызвана после загрузки страницы.


```javascript
window.addEventListener('load', onPageLoad);
```

##  Возможные проблемы

* **Неверный формат ответа сервера**: Если сервер возвращает ответ в формате, не поддерживаемом `response.json()`, будет выброшена ошибка.  Проверьте формат ответа на серверной стороне.
* **Проблемы с сетевым соединением**: Если нет доступа к указанному URL-адресу, произойдет ошибка.
* **Ошибки JSON**: Если ответ сервера не является корректным JSON, возникнет ошибка при парсинге.


## Примечания

*  Для отладки можно использовать консоль браузера, чтобы увидеть логи `console.log('Response:', json)` и  `console.error('Error:', error)`.


```