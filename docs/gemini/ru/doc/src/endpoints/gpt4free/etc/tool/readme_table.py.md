# Модуль для генерации таблиц в формате Markdown

## Обзор

Модуль предназначен для генерации таблиц в формате Markdown, содержащих информацию о различных провайдерах и моделях, используемых в проекте `g4f` (GPT4Free). Он предоставляет функции для тестирования доступности провайдеров, а также для печати информации о провайдерах и моделях в виде таблиц Markdown.

## Подробней

Этот модуль используется для автоматического создания документации о доступных провайдерах и моделях, поддерживаемых библиотекой `g4f`. Он особенно полезен для отслеживания статуса и возможностей различных провайдеров, таких как поддержка стриминга, системных сообщений, истории сообщений и т.д. Сгенерированные таблицы можно использовать для информирования пользователей о текущем состоянии сервисов и их функциональности.

## Функции

### `test_async`

**Назначение**: Асинхронно проверяет работоспособность указанного провайдера.

**Параметры**:
- `provider` (ProviderType): Провайдер для тестирования.

**Возвращает**:
- `bool`: `True`, если провайдер работает и отвечает на запросы, `False` в противном случае.

**Вызывает исключения**:
- `Exception`: Логируется информация об исключении, если оно возникает при выполнении запроса к провайдеру.

**Как работает функция**:
1. Проверяет, является ли провайдер рабочим (`provider.working`). Если нет, возвращает `False`.
2. Отправляет асинхронный запрос к провайдеру с сообщением "Hello Assistant!".
3. Ожидает ответ в течение 30 секунд. Если ответ получен и не пустой, возвращает `True`.
4. В случае возникновения исключения, логирует информацию об ошибке и возвращает `False`.

```
A [Провайдер рабочий?]
|
-- No --> return False
|
Yes
|
B [Отправка запроса провайдеру]
|
C [Получен ответ?]
|
-- No (Exception) --> D [Логирование ошибки] --> return False
|
Yes
|
return True
```

**Примеры**:
```python
import asyncio
from g4f.providers import Bard

async def main():
    provider = Bard
    result = await test_async(provider)
    print(f"Provider {provider.__name__} is working: {result}")

asyncio.run(main())
```

### `test_async_list`

**Назначение**: Асинхронно тестирует список провайдеров и возвращает список результатов.

**Параметры**:
- `providers` (list[ProviderType]): Список провайдеров для тестирования.

**Возвращает**:
- `list`: Список булевых значений, где каждое значение соответствует результату теста для соответствующего провайдера.

**Как работает функция**:
1. Использует генератор списков для асинхронного тестирования каждого провайдера в списке `providers`.
2. Собирает результаты в список `responses`.
3. Возвращает список `responses`.

```
A [Получен список провайдеров]
|
B [Запуск асинхронного тестирования для каждого провайдера]
|
C [Сбор результатов в список]
|
return Список результатов
```

**Примеры**:
```python
import asyncio
from g4f.providers import Bard, Bing

async def main():
    providers = [Bard, Bing]
    results = test_async_list(providers)
    print(f"Results: {results}")

asyncio.run(main())
```

### `print_providers`

**Назначение**: Генерирует Markdown-таблицу с информацией о доступных провайдерах.

**Возвращает**:
- `list[str]`: Список строк, представляющих Markdown-таблицу с информацией о провайдерах.

**Как работает функция**:
1. Фильтрует список провайдеров, оставляя только рабочие (`provider.working == True`).
2. Создает списки строк для таблицы, разделяя провайдеры на "Free" и "Auth" в зависимости от необходимости аутентификации (`_provider.needs_auth`).
3. Для каждого провайдера добавляет информацию о его веб-сайте, статусе, поддержке стриминга, системных сообщений, истории сообщений и моделях.
4. Возвращает список строк, представляющих Markdown-таблицу.

```
A [Получение списка провайдеров]
|
B [Фильтрация рабочих провайдеров]
|
C [Разделение на Free и Auth провайдеров]
|
D [Создание строк таблицы для каждого провайдера]
|
E [Добавление информации о веб-сайте, статусе, поддержке и моделях]
|
return Список строк Markdown-таблицы
```

**Примеры**:
```python
# Пример вызова функции и печати результата
lines = print_providers()
for line in lines:
    print(line)
```

### `print_models`

**Назначение**: Генерирует Markdown-таблицу с информацией о моделях.

**Возвращает**:
- `list[str]`: Список строк, представляющих Markdown-таблицу с информацией о моделях.

**Как работает функция**:
1. Определяет базовые имена провайдеров и их URL.
2. Создает строки для Markdown-таблицы, перебирая модели и добавляя информацию о базовом провайдере, провайдере, веб-сайте.
3. Возвращает список строк, представляющих Markdown-таблицу.

```
A [Определение базовых имен провайдеров и их URL]
|
B [Создание строк таблицы для каждой модели]
|
C [Добавление информации о базовом провайдере, провайдере и веб-сайте]
|
return Список строк Markdown-таблицы
```

**Примеры**:
```python
# Пример вызова функции и печати результата
lines = print_models()
for line in lines:
    print(line)
```

### `print_image_models`

**Назначение**: Генерирует Markdown-таблицу с информацией об image моделях.

**Возвращает**:
- `list[str]`: Список строк, представляющих Markdown-таблицу с информацией об image моделях.

**Как работает функция**:
1.  Итерирует по списку провайдеров, проверяя, являются ли они рабочими и имеют ли атрибуты `image_models` или `vision_models`.
2.  Для каждого провайдера извлекает URL, имя, а также списки image и vision моделей.
3.  Формирует строку таблицы Markdown с информацией о провайдере и его моделях.

```
A [Итерация по списку провайдеров]
|
B [Проверка, является ли провайдер рабочим и имеет ли атрибуты image_models или vision_models]
|
C [Извлечение URL, имени, а также списков image и vision моделей]
|
D [Формирование строки таблицы Markdown]
|
return Список строк Markdown-таблицы
```

**Примеры**:

```python
# Пример вызова функции и печати результата
lines = print_image_models()
for line in lines:
    print(line)