# Документация модуля Discord-бота

## Обзор

Этот модуль содержит код Discord-бота, написанного на Python с использованием библиотеки `discord.py`. Бот выполняет различные функции, связанные с управлением моделью машинного обучения, обработкой аудио и взаимодействием с пользователями как в текстовых, так и в голосовых каналах Discord.

## Оглавление

1. [Обзор](#обзор)
2. [Классы](#классы)
3. [Функции](#функции)
   - [`recognizer`](#recognizer)
   - [`text_to_speech_and_play`](#text_to_speech_and_play)
4. [События](#события)
   - [`on_ready`](#on_ready)
   - [`on_message`](#on_message)
5. [Команды](#команды)
    - [`hi`](#hi)
    - [`join`](#join)
    - [`leave`](#leave)
    - [`train`](#train)
    - [`test`](#test)
    - [`archive`](#archive)
    - [`select_dataset`](#select_dataset)
    - [`instruction`](#instruction)
    - [`correct`](#correct)
    - [`feedback`](#feedback)
    - [`getfile`](#getfile)

## Классы

### `DiscordBot`

**Описание:** Основной класс бота, который наследуется от `discord.Client` и содержит все основные функции бота.

## Функции

### `recognizer`

**Описание**: Функция для распознавания речи в аудиофайле.

**Параметры**:
- `file_path` (str): Путь к аудиофайлу.

**Возвращает**:
- `str | None`: Распознанный текст или `None`, если распознавание не удалось.

**Вызывает исключения**:
- `speech_recognition.UnknownValueError`: Возникает, если речь не распознана.
- `speech_recognition.RequestError`: Возникает при проблемах с доступом к API распознавания речи.
- `FileNotFoundError`: Возникает, если файл по указанному пути не найден.
- `Exception`: Возникает при любых других ошибках.

### `text_to_speech_and_play`

**Описание**: Функция для преобразования текста в речь и воспроизведения в голосовом канале.

**Параметры**:
- `text` (str): Текст для преобразования в речь.
- `voice_channel` (discord.VoiceChannel): Голосовой канал, в котором нужно воспроизвести речь.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Вызывает исключения**:
- `Exception`: Возникает при любых ошибках в процессе преобразования или воспроизведения речи.

## События

### `on_ready`

**Описание**: Обработчик события, которое вызывается после успешного запуска бота.

**Параметры**:
- Нет.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Описание**: Выводит в консоль сообщение о том, что бот готов к работе.

### `on_message`

**Описание**: Обработчик события, которое вызывается при получении нового сообщения.

**Параметры**:
- `message` (discord.Message): Объект сообщения, содержащий информацию об отправленном сообщении.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Описание**: Обрабатывает входящие сообщения, игнорирует сообщения от самого бота. Если пользователь отправляет аудиофайл, бот распознает речь и отправляет текст в ответ. Если пользователь находится в голосовом канале, бот преобразует текст в речь и проигрывает ее в голосовом канале.

## Команды

### `hi`

**Описание**: Команда для приветствия пользователя.

**Параметры**:
- `ctx` (discord.ext.commands.Context): Контекст команды, содержащий информацию о сообщении и отправителе.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Описание**: Отправляет приветственное сообщение пользователю.

### `join`

**Описание**: Команда для подключения бота к голосовому каналу.

**Параметры**:
- `ctx` (discord.ext.commands.Context): Контекст команды, содержащий информацию о сообщении и отправителе.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Описание**: Подключает бота к голосовому каналу пользователя, если он в нём находится.

### `leave`

**Описание**: Команда для отключения бота от голосового канала.

**Параметры**:
- `ctx` (discord.ext.commands.Context): Контекст команды, содержащий информацию о сообщении и отправителе.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Описание**: Отключает бота от голосового канала, если он в нём находится.

### `train`

**Описание**: Команда для обучения модели машинного обучения.

**Параметры**:
- `ctx` (discord.ext.commands.Context): Контекст команды, содержащий информацию о сообщении и отправителе.
- `text` (str, optional): Текст для обучения модели. По умолчанию `None`.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Описание**: Обучает модель на предоставленных данных, будь то текст или файл.

### `test`

**Описание**: Команда для тестирования модели машинного обучения.

**Параметры**:
- `ctx` (discord.ext.commands.Context): Контекст команды, содержащий информацию о сообщении и отправителе.
- `text` (str, optional): Текст для тестирования модели. По умолчанию `None`.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Описание**: Тестирует модель на предоставленных данных, будь то текст или файл.

### `archive`

**Описание**: Команда для архивирования файлов в указанной директории.

**Параметры**:
- `ctx` (discord.ext.commands.Context): Контекст команды, содержащий информацию о сообщении и отправителе.
- `path` (str): Путь к директории для архивирования.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Описание**: Архивирует файлы в указанной директории.

### `select_dataset`

**Описание**: Команда для выбора набора данных для обучения модели.

**Параметры**:
- `ctx` (discord.ext.commands.Context): Контекст команды, содержащий информацию о сообщении и отправителе.
- `dataset_name` (str): Имя набора данных для выбора.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Описание**: Выбирает набор данных для обучения модели.

### `instruction`

**Описание**: Команда для отправки инструкции из внешнего файла.

**Параметры**:
- `ctx` (discord.ext.commands.Context): Контекст команды, содержащий информацию о сообщении и отправителе.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Описание**: Отправляет пользователю инструкции из внешнего файла.

### `correct`

**Описание**: Команда для исправления предыдущего сообщения бота.

**Параметры**:
- `ctx` (discord.ext.commands.Context): Контекст команды, содержащий информацию о сообщении и отправителе.
- `message_id` (int): ID сообщения бота, которое нужно исправить.
- `new_text` (str): Новый текст для исправления.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Описание**: Позволяет пользователю исправить предыдущее сообщение бота.

### `feedback`

**Описание**: Команда для отправки отзыва о работе бота.

**Параметры**:
- `ctx` (discord.ext.commands.Context): Контекст команды, содержащий информацию о сообщении и отправителе.
- `text` (str): Текст отзыва.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Описание**: Позволяет пользователю отправить отзыв о работе бота.

### `getfile`

**Описание**: Команда для отправки файла из указанного пути.

**Параметры**:
- `ctx` (discord.ext.commands.Context): Контекст команды, содержащий информацию о сообщении и отправителе.
- `path` (str): Путь к файлу, который нужно отправить.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Описание**: Отправляет запрошенный файл пользователю.