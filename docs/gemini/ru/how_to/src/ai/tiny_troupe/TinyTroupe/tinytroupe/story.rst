Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код реализует класс `TinyStory`, предназначенный для генерации историй на основе симуляций. Класс позволяет задать окружение (`TinyWorld`) или агента (`TinyPerson`), а также цель истории и контекст.  Он предоставляет методы для начала и продолжения истории, используя LLM (например, OpenAI).  Код учитывает взаимодействия агента/окружения при построении истории.

Шаги выполнения
-------------------------
1. **Инициализация класса `TinyStory`:** Создайте экземпляр класса, передавая `TinyWorld` или `TinyPerson`, а также другие опциональные параметры: `purpose`, `context`, `first_n`, `last_n` и `include_omission_info`.  Обратите внимание, что только один из параметров `environment` или `agent` должен быть предоставлен, иначе произойдёт исключение.

2. **Запуск истории (`start_story`):** Вызовите метод `start_story`, передавая требования к истории (`requirements`), желаемое количество слов (`number_of_words`) и флаг включения поворота сюжета (`include_plot_twist`).  Метод генерирует начальную часть истории с использованием шаблонов.

3. **Продолжение истории (`continue_story`):** Используйте метод `continue_story` для создания продолжения истории.  Аналогично предыдущему шагу, передайте требования, количество слов и флаг включения поворота сюжета.  Метод добавляет продолжение к существующему контексту.

4. **Получение текущей истории (`_current_story`):**  Этот метод используется внутренне для построения контекста истории, включающего в себя историю взаимодействий (`TinyWorld` или `TinyPerson`). Метод `_current_story` собирает историю взаимодействий, добавляет её в текущий контекст истории, и возвращает этот контекст.

Пример использования
-------------------------
.. code-block:: python

    from tinytroupe.story import TinyStory
    from tinytroupe.environment import TinyWorld
    from tinytroupe.agent import TinyPerson

    # Пример окружения
    env = TinyWorld()

    # Пример агента
    agent = TinyPerson()

    # Инициализация истории, основываясь на окружении
    story = TinyStory(environment=env, purpose="Протестировать новый метод обучения", first_n=5, last_n=10)

    # Начало истории
    story.start_story(requirements="Начать историю об исследовании нового метода обучения", number_of_words=150)

    # Вывод начальной части истории
    print(story.current_story)

    # Продолжение истории
    story.continue_story(requirements="Продолжить историю", number_of_words=100)

    # Вывод продолжения
    print(story.current_story)