# Модуль `src.endpoints.prestashop.category_async`

## Обзор

Модуль предоставляет асинхронный класс `PrestaCategoryAsync` для управления категориями в PrestaShop. Он позволяет получать список родительских категорий для заданной категории асинхронно.

## Подробней

Этот модуль является частью проекта `hypotez` и предназначен для работы с API PrestaShop. Он использует асинхронные запросы для получения информации о категориях, что позволяет повысить производительность при работе с большим количеством данных.

## Классы

### `PrestaCategoryAsync`

**Описание**: Асинхронный класс для управления категориями в PrestaShop.

**Как работает класс**:
Класс `PrestaCategoryAsync` наследуется от `PrestaShopAsync` и предоставляет методы для работы с категориями в PrestaShop. При инициализации класса требуется передать учетные данные (либо в виде словаря, либо как отдельные параметры `api_domain` и `api_key`). Класс позволяет асинхронно получать список родительских категорий для заданной категории.

**Методы**:
- `__init__`: Инициализирует экземпляр класса `PrestaCategoryAsync`.
- `get_parent_categories_list_async`: Асинхронно получает список родительских категорий для заданной категории.

#### `__init__`

```python
def __init__(self, credentials: Optional[Union[dict, SimpleNamespace]] = None, api_domain: Optional[str] = None, api_key: Optional[str] = None):
    """! Async class for managing categories in PrestaShop."""
    ...
```

**Описание**: Инициализирует экземпляр класса `PrestaCategoryAsync`.

**Как работает функция**:
Метод `__init__` инициализирует класс `PrestaCategoryAsync`, проверяя наличие переданных учетных данных. Учетные данные могут быть переданы либо в виде словаря `credentials`, либо как отдельные параметры `api_domain` и `api_key`. Если учетные данные не переданы или переданы не полностью, выбрасывается исключение `ValueError`.

**Параметры**:
- `credentials` (Optional[Union[dict, SimpleNamespace]], optional): Словарь или объект `SimpleNamespace`, содержащий учетные данные (api_domain и api_key). По умолчанию `None`.
- `api_domain` (Optional[str], optional): Домен API PrestaShop. По умолчанию `None`.
- `api_key` (Optional[str], optional): Ключ API PrestaShop. По умолчанию `None`.

**Вызывает исключения**:
- `ValueError`: Если не переданы `api_domain` и `api_key`.

#### `get_parent_categories_list_async`

```python
async def get_parent_categories_list_async(self, id_category: int|str , additional_categories_list: Optional[List[int] | int] = []) -> List[int]:
    """! Asynchronously retrieve parent categories for a given category."""
    ...
```

**Описание**: Асинхронно получает список родительских категорий для заданной категории.

**Как работает функция**:

Функция асинхронно извлекает список родительских категорий для указанной категории в PrestaShop.

Внутри функции происходят следующие действия и преобразования:
A. Преобразует `id_category` в целое число, если это возможно. Логирует ошибку, если формат недопустимый.
|
B. Преобразует `additional_categories_list` в список, если это необходимо, и добавляет в него `id_category`.
|
C. Итерируется по списку категорий (`additional_categories_list`) и для каждой категории пытается получить информацию о родительской категории через API PrestaShop.
|
D. Если родительская категория меньше или равна 2, функция возвращает накопленный список родительских категорий (`out_categories_list`), так как дерево категорий начинается с 2.
|
E. Добавляет родительскую категорию в `out_categories_list`.

**Параметры**:
- `id_category` (int|str): Идентификатор категории, для которой необходимо получить список родительских категорий.
- `additional_categories_list` (Optional[List[int] | int], optional): Дополнительный список категорий для обработки. По умолчанию `[]`.

**Возвращает**:
- `List[int]`: Список идентификаторов родительских категорий.

**Вызывает исключения**:
- `Exception`: Логируется в случае недопустимого формата категории или ошибки при чтении данных из API PrestaShop.

## Функции

### `main`

```python
async def main():
    """"""
    ...
```

**Описание**:
Функция `main` является асинхронной функцией, предназначенной для демонстрации или тестирования функциональности модуля.

**Как работает функция**:
Функция `main` в данном коде не содержит конкретной реализации (обозначена как `...`), но обычно в асинхронных программах она служит точкой входа для запуска асинхронных задач и координации их выполнения. В контексте данного модуля, она могла бы использоваться для демонстрации работы класса `PrestaCategoryAsync`, например, для получения списка родительских категорий для определенной категории в PrestaShop.

## Примеры

Примеры использования класса `PrestaCategoryAsync` и его методов могут быть добавлены здесь.