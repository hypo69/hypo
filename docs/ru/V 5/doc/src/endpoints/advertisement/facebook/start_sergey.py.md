# Модуль: Отправка рекламных объявлений в группы Facebook

## Обзор

Модуль `src.endpoints.advertisement.facebook.start_sergey` предназначен для автоматической отправки рекламных объявлений в различные группы Facebook. Он поддерживает мультиязычность и позволяет запускать рекламные кампании для разных рекламодателей, включая "kazarinov" и "aliexpress".

## Подробней

Этот модуль является частью системы автоматизации маркетинга `hypotez` и отвечает за взаимодействие с Facebook для продвижения товаров и услуг. Он использует библиотеку `selenium` для управления браузером и выполнения действий на сайте Facebook.
Код разбит на функции, каждая из которых выполняет определенную задачу, например, запуск рекламной кампании или управление циклом кампаний.

## Функции

### `run_campaign`

```python
def run_campaign(d: Driver, promoter_name: str, campaigns: list | str, group_file_paths: list, language: str, currency: str):
    """Запуск рекламной кампании.

    Args:
        d (Driver): Экземпляр драйвера.
        promoter_name (str): Имя рекламодателя.
        campaigns (list): Список кампаний.
        group_file_paths (list): Пути к файлам с группами.
        language (str): Язык рекламной кампании.
        currency (str): Валюта рекламной кампании.
    """
    ...
```

**Описание**: Запускает рекламную кампанию в Facebook.

**Как работает функция**:
1. Создает экземпляр класса `FacebookPromoter`.
2. Вызывает метод `run_campaigns` для запуска кампании с указанными параметрами.

**Параметры**:
- `d` (Driver): Экземпляр драйвера браузера, используемый для взаимодействия с Facebook.
- `promoter_name` (str): Имя рекламодателя (например, "kazarinov" или "aliexpress").
- `campaigns` (list | str): Список кампаний для запуска.
- `group_file_paths` (list): Список путей к файлам, содержащим информацию о группах Facebook, в которых будет размещаться реклама.
- `language` (str): Язык рекламной кампании (например, "RU" или "HE").
- `currency` (str): Валюта рекламной кампании (например, "ILS").

**Возвращает**:
- `None`

**Вызывает исключения**:
- Отсутствуют явные исключения.

**Примеры**:
```python
from src.webdriver.driver import Driver, Chrome
d = Driver(Chrome)
run_campaign(d, 'kazarinov', ['kazarinov_ru'], ['sergey_pages.json'], 'RU', 'ILS')
```

### `campaign_cycle`

```python
def campaign_cycle(d: Driver):
    """Цикл для управления запуском кампаний.

    Args:
        d (Driver): Экземпляр драйвера.
        aliexpress_adv (bool): Флаг для определения рекламодателя.
    """
    ...
```

**Описание**: Управляет циклом запуска рекламных кампаний для разных языков и рекламодателей.

**Как работает функция**:
1. Определяет пути к файлам с группами и рекламными объявлениями для русского и ивритоязычных кампаний.
2. Формирует список пар "язык-валюта".
3. Перебирает пары "язык-валюта" и запускает рекламные кампании для каждого языка.
4. Для каждого языка определяет список кампаний и запускает их.
5. Запускает рекламные кампании для "aliexpress".

**Параметры**:
- `d` (Driver): Экземпляр драйвера браузера.

**Возвращает**:
- `bool`: Всегда возвращает `True`.

**Вызывает исключения**:
- Отсутствуют явные исключения.

**Примеры**:
```python
from src.webdriver.driver import Driver, Chrome
d = Driver(Chrome)
campaign_cycle(d)
```

### `main`

```python
def main():
    """Основная функция для запуска рекламных кампаний."""
    try:
        d = Driver(Chrome)
        d.get_url(r"https://facebook.com")
        aliexpress_adv = True

        while True:
            if interval():
                print("Good night!")
                time.sleep(1000)

            # Первый цикл для русскоязычных кампаний
            campaign_cycle(d)
            ...

            # Логирование и задержка
            logger.debug(f"going to sleep at {time.strftime('%H:%M:%S')}", None, False)
            t = random.randint(30, 360)
            print(f"sleeping {t} sec")
            time.sleep(t)

    except KeyboardInterrupt as ex:
        logger.info("Campaign promotion interrupted.", ex, exc_info = True)
```

**Описание**: Основная функция для запуска рекламных кампаний.

**Как работает функция**:
1. Инициализирует драйвер браузера Chrome.
2. Открывает Facebook в браузере.
3. Запускает бесконечный цикл, в котором:
   - Проверяет, не наступило ли время для перерыва (с помощью функции `interval`).
   - Запускает цикл рекламных кампаний (`campaign_cycle`).
   - Выполняет логирование и задержку перед следующей итерацией цикла.

**Параметры**:
- Отсутствуют.

**Возвращает**:
- `None`

**Вызывает исключения**:
- `KeyboardInterrupt`: Обрабатывается прерывание с клавиатуры для завершения работы программы.

**Примеры**:
```python
if __name__ == "__main__":
    main()
```