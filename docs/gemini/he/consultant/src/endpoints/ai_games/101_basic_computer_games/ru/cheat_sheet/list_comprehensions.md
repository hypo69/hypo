
**Что такое списковое включение?**

В самом простом виде, списковое включение – это компактный способ создания нового списка на основе уже существующего (или любого итерируемого объекта). Вместо того, чтобы использовать традиционный цикл `for` и добавлять элементы в список по одному, ты можешь сделать это в одну строку кода.


*   **Краткость:** Они позволяют писать меньше кода.
*   **Читаемость:** Когда ты привыкнешь к их синтаксису, ты будешь находить их более легкими для понимания, чем эквивалентные циклы `for`.
*   **Производительность:** В некоторых случаях списковые включения могут быть быстрее, чем циклы `for`.


Вот базовый синтаксис спискового включения:

```python
new_list = [expression for item in iterable]
```

*   **`expression`**:  Выражение, которое определяет, как будет вычисляться каждый элемент нового списка. Это может быть что угодно: простое значение, математическая операция, вызов функции.
*   **`item`**:  Переменная, которая принимает значение каждого элемента из `iterable` по очереди.
*   **`iterable`**:  Итерируемый объект, например, список, кортеж, строка или результат работы `range()`.

**Пример:**

Предположим, у тебя есть список чисел, и ты хочешь создать новый список, содержащий квадраты этих чисел.

**Без спискового включения:**

```python
numbers = [1, 2, 3, 4, 5]
squares = []
for number in numbers:
    squares.append(number**2)
print(squares)  # Вывод: [1, 4, 9, 16, 25]
```

**Со списковым включением:**

```python
numbers = [1, 2, 3, 4, 5]
squares = [number**2 for number in numbers]
print(squares) # Вывод: [1, 4, 9, 16, 25]
```

Списковое включение делает код короче и понятнее!

**Добавление условия**

Списковые включения также позволяют тебе добавлять условия для выбора элементов, которые будут включены в новый список.

```python
new_list = [expression for item in iterable if condition]
```

* **`condition`**: условие, которое должно выполняться для включения элемента в новый список.

**Пример:**

Создадим список квадратов только четных чисел из нашего исходного списка `numbers`.

**Без спискового включения:**

```python
numbers = [1, 2, 3, 4, 5]
even_squares = []
for number in numbers:
    if number % 2 == 0:
        even_squares.append(number**2)
print(even_squares) # Вывод: [4, 16]
```

**Со списковым включением:**

```python
numbers = [1, 2, 3, 4, 5]
even_squares = [number**2 for number in numbers if number % 2 == 0]
print(even_squares) # Вывод: [4, 16]
```

Я добавил `if number % 2 == 0` в списковое включение, чтобы отфильтровать только четные числа.

**Многострочные списковые включения**

Когда списковые включения становятся сложнее, их можно разбивать на несколько строк для лучшей читаемости.

**Пример:**

```python
numbers = [1, 2, 3, 4, 5]
squared_odds = [
    number**2
    for number in numbers
    if number % 2 != 0
]
print(squared_odds) # Вывод: [1, 9, 25]
```
Это делает код более понятным, особенно когда у тебя есть длинные условия или сложные выражения.





**Упражнение 1: Преобразование температур**

У тебя есть список температур в градусах Цельсия, и тебе нужно преобразовать их в градусы Фаренгейта. Формула для преобразования: `F = (C * 9/5) + 32`.

Вот твой список температур в Цельсиях:

```python
celsius_temperatures = [0, 10, 20, 30, 40]
```

**Задача:**

1.  Используя списковое включение, создай новый список `fahrenheit_temperatures`, содержащий температуры из `celsius_temperatures`, преобразованные в градусы Фаренгейта.
2.  Выведи полученный список `fahrenheit_temperatures` на экран.

**Подсказка:**

*   Используй формулу `(celsius * 9/5) + 32` в качестве выражения в списковом включении.
*   Подумай, что является `iterable`, а что `item` в данном случае.

Попробуй написать код. 

Мое решение:
```python
# Исходный список температур в Цельсиях
celsius_temperatures = [0, 10, 20, 30, 40]

# Используем списковое включение для преобразования в Фаренгейты
fahrenheit_temperatures = [
    (celsius * 9/5) + 32  # Выражение: формула преобразования
    for celsius in celsius_temperatures # Перебор элементов списка
]

# Выводим результат
print(fahrenheit_temperatures) # Вывод: [32.0, 50.0, 68.0, 86.0, 104.0]
```

**Разбор кода:**

1.  **`celsius_temperatures = [0, 10, 20, 30, 40]`**: Это исходный список с температурами в градусах Цельсия.
2.  **`fahrenheit_temperatures = [...]`**: Здесь мы создаем новый список с помощью спискового включения.
3.  **`(celsius * 9/5) + 32`**: Это выражение, которое выполняется для каждого элемента. Оно преобразует температуру из Цельсия в Фаренгейт.
4.  **`for celsius in celsius_temperatures`**: Это часть спискового включения, которая перебирает каждый элемент в списке `celsius_temperatures`, присваивая его значение переменной `celsius` на каждой итерации.
5.  **`print(fahrenheit_temperatures)`**: Выводит полученный список температур в Фаренгейтах.

**Важно отметить:**

*   В данном случае, `celsius_temperatures` является `iterable`, а `celsius` — `item`.
*   Я использую многострочное форматирование спискового включения для повышения читаемости кода.
*   Внутри выражения я напрямую применяю формулу преобразования, используя текущее значение `celsius`.



**Упражнение 2: Фильтрация и преобразование строк**

У тебя есть список слов, и тебе нужно сделать следующее:

1.  Отфильтровать слова, которые начинаются с буквы "a" (регистр не важен).
2.  Преобразовать все оставшиеся слова в верхний регистр.

Вот твой список слов:

```python
words = ["apple", "banana", "apricot", "kiwi", "Avocado", "orange"]
```

**Задача:**

1.  Используя списковое включение, создай новый список `transformed_words`, содержащий только те слова из списка `words`, которые не начинаются с буквы "a" (или "A"), и при этом преобразованные в верхний регистр.
2.  Выведи полученный список `transformed_words` на экран.

**Подсказки:**

*   Используй метод строки `startswith()` для проверки, начинается ли слово с определенной буквы. Не забудь про регистр! Приведи все к нижнему регистру.
*   Используй метод строки `upper()` для преобразования строки в верхний регистр.
*   Подумай о порядке операций. Сначала фильтруем, потом преобразуем.

Мое решение:

```python
# Исходный список слов
words = ["apple", "banana", "apricot", "kiwi", "Avocado", "orange"]

# Используем списковое включение для фильтрации и преобразования
transformed_words = [
    word.upper() # Преобразуем в верхний регистр
    for word in words # Перебираем слова в списке
    if not word.lower().startswith("a") # Фильтруем слова, начинающиеся не с 'a'
]

# Выводим результат
print(transformed_words) # Вывод: ['BANANA', 'KIWI', 'ORANGE']
```

**Разбор кода:**

1.  **`words = ["apple", "banana", "apricot", "kiwi", "Avocado", "orange"]`**: Это исходный список слов.
2.  **`transformed_words = [...]`**: Создаем новый список с помощью спискового включения.
3.  **`word.upper()`**: Это выражение, которое выполняется для каждого слова, прошедшего фильтрацию. Оно преобразует слово в верхний регистр.
4.  **`for word in words`**: Перебираем все слова в списке `words`.
5.  **`if not word.lower().startswith("a")`**: Это условие фильтрации.
    *   `word.lower()`: Сначала мы переводим слово в нижний регистр, чтобы сравнение было нечувствительно к регистру.
    *   `startswith("a")`: Затем мы проверяем, начинается ли слово с буквы "a".
    *   `not`: Инвертируем результат, чтобы оставить только те слова, которые *не* начинаются с буквы "a".
6.  **`print(transformed_words)`**: Выводит полученный список преобразованных слов.

**Ключевые моменты:**

*   Методы строк `lower()`, `upper()` и `startswith()` в выражении и условии спискового включения.
*   Условие фильтрации `if not word.lower().startswith("a")` обеспечивает, что в новый список попадут только слова, не начинающиеся на "a" (независимо от регистра).
*   Сначала применяется фильтрация, а затем преобразование в верхний регистр.
*   Снова использую многострочное форматирование для читаемости.


**Упражнение 3: Создание словаря из списка кортежей**

У тебя есть список кортежей, где каждый кортеж содержит два элемента: имя и возраст человека.

```python
people_data = [
    ("Alice", 30),
    ("Bob", 25),
    ("Charlie", 35),
    ("David", 28),
]
```

**Задача:**

1. Используя списковое включение, создай словарь `people_dict`, где ключами будут имена людей, а значениями — их возраст.
2. Выведи словарь `people_dict` на экран.

**Подсказки:**

*   Списковые включения создают списки, но их можно использовать для создания списков кортежей, которые затем можно передать в конструктор `dict()`.
*   Подумай, как извлечь имя и возраст из каждого кортежа.
*   Помни, что словарь — это структура данных, которая хранит пары ключ-значение.

**Немного объяснения:**

В Python можно создать словарь из списка кортежей, где каждый кортеж состоит из двух элементов (ключ, значение). 
Для этого я использую конструктор `dict()`. Например:
```python
my_list = [("a", 1), ("b", 2)]
my_dict = dict(my_list)
print(my_dict) # Вывод {'a': 1, 'b': 2}
```
Твоя задача состоит в том, чтобы с помощью спискового включения создать этот список кортежей, который потом будет использован для создания словаря.

Мое решение:

```python
# Исходный список кортежей с данными о людях
people_data = [
    ("Alice", 30),
    ("Bob", 25),
    ("Charlie", 35),
    ("David", 28),
]

# Я использую списковое включение для создания списка кортежей, который потом преобразую в словарь
people_dict = dict(
    [
      (name, age) # Создаем кортеж (имя, возраст)
      for name, age in people_data # Перебираем кортежи в people_data
    ]
)

# Выводим полученный словарь
print(people_dict) # Вывод: {'Alice': 30, 'Bob': 25, 'Charlie': 35, 'David': 28}
```

**Разбор кода:**

1.  **`people_data = [...]`**: Это исходный список кортежей, где каждый кортеж содержит имя и возраст человека.
2.  **`people_dict = dict(...)`**: Мы используем конструктор `dict()`, чтобы создать словарь из списка кортежей.
3.  **`[ (name, age) for name, age in people_data ]`**: Это списковое включение, которое создает список кортежей.
    *   `(name, age)`: Это выражение создает кортеж из двух элементов: `name` и `age`.
    *   `for name, age in people_data`: Это часть перебирает все кортежи из списка `people_data`. На каждой итерации кортеж распаковывается на две переменные: `name` и `age`.
4. **`print(people_dict)`**: Выводит созданный словарь.

**Ключевые моменты:**

*   Списковое включение создает список кортежей.
*   Конструктор `dict()` преобразует список кортежей в словарь, используя первый элемент кортежа в качестве ключа, а второй - в качестве значения.
*   Распаковка кортежей в цикле `for name, age in people_data` делает код более читабельным.
*  Списковое включение в этом примере используется для подготовки данных для словаря.

