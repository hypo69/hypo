# ניתוח קוד המודול `boat.py`

**איכות הקוד**
7/10
- **יתרונות**
    - הקוד פשוט וקריא, ומיישם את הלוגיקה של המשחק כפי שמתואר בהוראות.
    - נעשה שימוש בפונקציות מופרדות למשימות שונות, מה שמקל על הבנת הקוד ותחזוקתו.
    - קיימת בדיקת תקינות קלט המשתמש.
    - משתמש בקבועים לשמירת גודל הלוח ומספר הניסיונות.
- **חסרונות**
    - חסרה תיעוד בפורמט reStructuredText (RST) לפונקציות, מודול, ומשתנים.
    - חסר שימוש בלוגר לרישום שגיאות ומידע.
    - אין טיפול מפורש בשגיאות קלט מעבר ל- `ValueError` בתוך הפונקציה `get_player_guess()`.
    - חסרים הסברים מפורטים על הקוד בפורמט RST.

**המלצות לשיפור**

1.  **תיעוד ב-RST**:
    - להוסיף תיעוד RST לכל הפונקציות, המשתנים והמודול.
    - לכלול תיאור תפקיד, פרמטרים והחזרות.
2.  **שימוש בלוגר**:
    - להשתמש במודול `logger` של הפרויקט לרישום מידע, אזהרות ושגיאות במקום `print()`.
    - להוסיף רישום כאשר המשתמש מזין קואורדינטות לא חוקיות.
3.  **שיפור טיפול בשגיאות**:
    - להוסיף טיפול בשגיאות נוספות, כגון שגיאות קלט לא צפויות מהמשתמש.
    - להשתמש בבלוק `try-except` באופן מושכל, בעיקר במקרים בהם עלולות להתרחש שגיאות לא צפויות.
4.  **הפרדת קלט/פלט**:
    - לשקול הפרדה של הקלט/פלט מהלוגיקה של המשחק כדי להקל על בדיקות אוטומטיות.

**קוד לאחר שיפורים**
```python
"""
מודול זה מיישם משחק ספינות פשוט.
==================================

המשחק הוא טקסטואלי בו השחקן מנסה להטביע ספינה על ידי ניחוש קואורדינטות
בתוך לוח משחק בגודל 10x10. לשחקן יש 10 ניסיונות לנחש את מיקום הספינה.

חוקי המשחק:
    1. לוח המשחק הוא בגודל 10x10.
    2. הספינה ממוקמת באופן אקראי על הלוח.
    3. השחקן מזין קואורדינטות (שורה ועמודה) של הניחוש שלו.
    4. אם הניחוש פוגע בספינה, השחקן מנצח.
    5. לשחקן יש 10 ניסיונות בלבד לנחש את מיקום הספינה.
    6. אם השחקן לא מצליח לפגוע בספינה בתוך 10 ניסיונות, המשחק מסתיים בהפסד.

אלגוריתם:
    1. אתחול לוח משחק 10x10 מלא ב-'O'.
    2. בחירה אקראית של מיקום הספינה.
    3. הגדרת מספר הניסיונות ל-10.
    4. לולאה כל עוד נותרו ניסיונות:
        4.1. הצגת לוח המשחק.
        4.2. קבלת קואורדינטות ניחוש מהמשתמש.
        4.3. אם הניחוש פוגע בספינה, הצגת "HIT!" וסיום.
        4.4. אחרת:
            4.4.1. סימון הניחוש השגוי בלוח ('X').
            4.4.2. הפחתת מספר הניסיונות.
    5. אם מספר הניסיונות הגיע ל-0, הצגת "YOU LOSE.".

"""
import random
from src.logger.logger import logger # ייבוא הלוגר

# הגדרת גודל לוח המשחק
BOARD_SIZE = 10
# הגדרת מספר הניסיונות
MAX_ATTEMPTS = 10


def initialize_board() -> list[list[str]]:
    """
    יוצרת לוח משחק ריק בגודל :data:`BOARD_SIZE` x :data:`BOARD_SIZE`, מלא ב-\'O\'.

    :return: לוח משחק מאותחל כרשימה של רשימות.
    :rtype: list[list[str]]
    """
    board = []
    for _ in range(BOARD_SIZE):
        row = ['O'] * BOARD_SIZE
        board.append(row)
    return board


def place_ship() -> tuple[int, int]:
    """
    בוחרת באופן אקראי את מיקום הספינה על הלוח.

    :return: קואורדינטות השורה והעמודה של הספינה.
    :rtype: tuple[int, int]
    """
    ship_row = random.randint(0, BOARD_SIZE - 1)
    ship_col = random.randint(0, BOARD_SIZE - 1)
    return ship_row, ship_col


def display_board(board: list[list[str]]) -> None:
    """
    מציגה את לוח המשחק הנוכחי למשתמש.

    :param board: לוח המשחק להצגה.
    :type board: list[list[str]]
    """
    print("  " + " ".join(str(i) for i in range(1, BOARD_SIZE + 1)))
    for i, row in enumerate(board):
        print(f"{i+1} {' '.join(row)}")


def get_player_guess() -> tuple[int, int]:
    """
    מבקשת מהמשתמש להזין את ניחוש הקואורדינטות שלו.

    :return: קואורדינטות השורה והעמודה שהוזנו על ידי המשתמש.
    :rtype: tuple[int, int]
    :raises ValueError: אם הקלט אינו מספר שלם.
    """
    while True:
        try:
            guess_row = int(input(f"נחש שורה (1-{BOARD_SIZE}): ")) - 1
            guess_col = int(input(f"נחש עמודה (1-{BOARD_SIZE}): ")) - 1
            if 0 <= guess_row < BOARD_SIZE and 0 <= guess_col < BOARD_SIZE:
                return guess_row, guess_col
            else:
                logger.error("קואורדינטות לא חוקיות, נסה שוב.") # רישום שגיאה בלוגר
                print("קואורדינטות לא חוקיות, נסה שוב.")
        except ValueError as e:
            logger.error(f"קלט לא חוקי, אנא הזן מספרים שלמים: {e}")# רישום שגיאה בלוגר
            print("קלט לא חוקי, אנא הזן מספרים שלמים.")


def play_game() -> None:
    """
    מגדירה את הלוגיקה של משחק הספינות.

    :return: None.
    """
    board = initialize_board()  # יצירת לוח המשחק
    ship_row, ship_col = place_ship()  # קביעת מיקום הספינה
    attempts = MAX_ATTEMPTS  # אתחול מספר הניסיונות

    while attempts > 0:
        display_board(board)  # הצגת הלוח למשתמש
        guess_row, guess_col = get_player_guess()  # קבלת ניחוש מהמשתמש

        if guess_row == ship_row and guess_col == ship_col:
            print("HIT!")  # פגיעה בספינה
            return  # המשחק הסתיים בניצחון
        else:
            if 0 <= guess_row < BOARD_SIZE and 0 <= guess_col < BOARD_SIZE:
                board[guess_row][guess_col] = 'X'  # סימון ניחוש שגוי
            attempts -= 1  # הפחתת מספר הניסיונות
            print(f"ניסיונות נותרו: {attempts}")

    print("YOU LOSE.")  # המשחק הסתיים בהפסד


if __name__ == "__main__":
    play_game()
```