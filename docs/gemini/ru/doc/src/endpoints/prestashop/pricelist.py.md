# Модуль для запроса списка цен в PrestaShop

## Обзор

Модуль `pricelist.py` предназначен для взаимодействия с API PrestaShop с целью получения и обновления информации о ценах товаров. Он содержит класс `PriceListRequester`, который наследуется от класса `PrestaShop` и предоставляет методы для запроса цен, обновления источника данных и модификации цен товаров.

## Подробней

Этот модуль является частью системы `hypotez` и используется для автоматизации процессов, связанных с ценами товаров в PrestaShop. Он позволяет получать актуальные цены товаров из API PrestaShop, а также обновлять цены товаров в случае необходимости. Модуль использует модуль `src.logger.logger` для логирования событий и ошибок, а также модуль `src.utils.jjson` для работы с JSON-данными.

## Классы

### `PriceListRequester`

**Описание**:
Класс `PriceListRequester` предназначен для запроса списка цен товаров в PrestaShop. Он наследуется от класса `PrestaShop` и предоставляет методы для запроса цен, обновления источника данных и модификации цен товаров.

**Как работает класс**:
1.  При инициализации класса происходит вызов конструктора родительского класса `PrestaShop` с передачей учетных данных для API PrestaShop.
2.  Метод `request_prices` позволяет получить список цен для указанных товаров.
3.  Метод `update_source` позволяет обновить источник данных для запроса цен.
4.  Метод `modify_product_price` позволяет изменить цену указанного товара.

**Методы**:

*   `__init__(self, api_credentials)`: Инициализирует объект класса `PriceListRequester`.
*   `request_prices(self, products)`: Запрашивает список цен для указанных товаров.
*   `update_source(self, new_source)`: Обновляет источник данных для запроса цен.
*   `modify_product_price(self, product, new_price)`: Модифицирует цену указанного товара.

#### `__init__(self, api_credentials)`

```python
    def __init__(self, api_credentials):
        """
        Инициализирует объект класса PriceListRequester.

        @param api_credentials: Словарь с учетными данными для API,
                                включая 'api_domain' и 'api_key'.
        """
        super().__init__(api_credentials['api_domain'], api_credentials['api_key'])
```

**Назначение**:
Инициализирует объект класса `PriceListRequester`, вызывая конструктор родительского класса `PrestaShop` с переданными учетными данными.

**Как работает функция**:
Функция принимает словарь `api_credentials`, содержащий учетные данные для доступа к API PrestaShop, а именно `'api_domain'` (домен API) и `'api_key'` (ключ API). Затем вызывает конструктор родительского класса `PrestaShop` через `super().__init__()`, передавая ему домен и ключ API. Таким образом, происходит инициализация объекта `PriceListRequester` и его связывание с API PrestaShop.

**Параметры**:

*   `api_credentials` (dict): Словарь, содержащий учетные данные для API PrestaShop, включая `'api_domain'` и `'api_key'`.

**Возвращает**:
Нет.

**Вызывает исключения**:
Нет.

**Примеры**:

```python
api_credentials = {'api_domain': 'example.com', 'api_key': '12345'}
pricelist_requester = PriceListRequester(api_credentials)
```

#### `request_prices(self, products)`

```python
    def request_prices(self, products):
        """
        Запрашивает список цен для указанных товаров.

        @param products: Список товаров, для которых требуется получить цены.
        @return: Словарь, где ключами являются товары, а значениями - их цены.
                 Например: {'product1': 10.99, 'product2': 5.99}
        """
        # Здесь код для отправки запроса на получение цен из источника данных
        pass
```

**Назначение**:
Запрашивает список цен для указанных товаров.

**Как работает функция**:
Функция принимает список товаров `products`, для которых требуется получить цены. Внутри функции должен быть реализован код для отправки запроса в источник данных (например, API PrestaShop) и получения цен для указанных товаров. После получения цен функция должна вернуть словарь, где ключами являются названия товаров, а значениями - их цены. В текущей реализации функция не содержит реальной логики и просто возвращает `None`.

**Параметры**:

*   `products` (list): Список товаров, для которых требуется получить цены.

**Возвращает**:

*   `dict`: Словарь, где ключами являются названия товаров, а значениями - их цены. Например: `{'product1': 10.99, 'product2': 5.99}`.

**Вызывает исключения**:
Нет.

**Примеры**:

```python
products = ['product1', 'product2']
prices = pricelist_requester.request_prices(products)
print(prices) # {'product1': 10.99, 'product2': 5.99}
```

#### `update_source(self, new_source)`

```python
    def update_source(self, new_source):
        """
        Обновляет источник данных для запроса цен.

        @param new_source: Новый источник данных.
        """
        self.source = new_source
```

**Назначение**:
Обновляет источник данных для запроса цен.

**Как работает функция**:
Функция принимает новый источник данных `new_source` и присваивает его атрибуту `source` текущего объекта класса `PriceListRequester`. Таким образом, происходит обновление источника данных, который будет использоваться для запроса цен.

**Параметры**:

*   `new_source`: Новый источник данных.

**Возвращает**:
Нет.

**Вызывает исключения**:
Нет.

**Примеры**:

```python
new_source = 'new_api_endpoint'
pricelist_requester.update_source(new_source)
print(pricelist_requester.source)  # new_api_endpoint
```

#### `modify_product_price(self, product, new_price)`

```python
    def modify_product_price(self, product, new_price):
        """
        Модифицирует цену указанного товара.

        @param product: Название товара.
        @param new_price: Новая цена товара.
        """
        # Здесь код для изменения цены товара в источнике данных
        pass
```

**Назначение**:
Модифицирует цену указанного товара.

**Как работает функция**:
Функция принимает название товара `product` и новую цену `new_price`. Внутри функции должен быть реализован код для изменения цены товара в источнике данных (например, в API PrestaShop). В текущей реализации функция не содержит реальной логики.

**Параметры**:

*   `product` (str): Название товара.
*   `new_price`: Новая цена товара.

**Возвращает**:
Нет.

**Вызывает исключения**:
Нет.

**Примеры**:

```python
product = 'product1'
new_price = 12.99
pricelist_requester.modify_product_price(product, new_price)
```

## Функции

В данном модуле функции отсутствуют.