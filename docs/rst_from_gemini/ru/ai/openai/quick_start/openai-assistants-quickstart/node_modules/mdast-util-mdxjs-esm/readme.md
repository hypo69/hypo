```markdown
# mdast-util-mdxjs-esm

[![Build][build-badge]][build]
[![Coverage][coverage-badge]][coverage]
[![Downloads][downloads-badge]][downloads]
[![Size][size-badge]][size]
[![Sponsors][sponsors-badge]][collective]
[![Backers][backers-badge]][collective]
[![Chat][chat-badge]][chat]

MDX ESM extensions for mdast. Parses and serializes MDX ESM import/export
syntax within Markdown.

## Overview

This package provides extensions to `mdast-util-from-markdown` and
`mdast-util-to-markdown` to handle MDX ESM (import/export) syntax within
markdown documents.  This allows you to parse and generate the AST representation
of MDX ESM code embedded in your Markdown files.

Crucially, it works in conjunction with the
[`micromark-extension-mdxjs-esm`](https://github.com/micromark/micromark-extension-mdxjs-esm)
micromark extension to correctly parse the ESM syntax within the markdown.

## Installation

```bash
npm install mdast-util-mdxjs-esm
```

or in Deno/ESM environments:

```javascript
import { mdxjsEsmFromMarkdown, mdxjsEsmToMarkdown } from 'https://esm.sh/mdast-util-mdxjs-esm@2';
```

## Usage

```javascript
import { fromMarkdown } from 'mdast-util-from-markdown';
import { toMarkdown } from 'mdast-util-to-markdown';
import { mdxjsEsm } from 'micromark-extension-mdxjs-esm';
import { mdxjsEsmFromMarkdown, mdxjsEsmToMarkdown } from 'mdast-util-mdxjs-esm';
import fs from 'fs/promises';


// Example input markdown containing MDX ESM
const markdown = `
import React from 'react'
export const MyComponent = () => <div>Hello</div>

Some text.
`;

// Using the extensions
const ast = fromMarkdown(markdown, {
  extensions: [mdxjsEsm({ addResult: true })],
  mdastExtensions: [mdxjsEsmFromMarkdown()],
});

console.log(JSON.stringify(ast, null, 2));

const outputMarkdown = toMarkdown(ast, { extensions: [mdxjsEsmToMarkdown()] });
console.log(outputMarkdown);
```

This example demonstrates how to parse a markdown string containing MDX ESM,
transform it using mdast, and then convert it back to markdown.

## API

This package exports the following functions:

*   `mdxjsEsmFromMarkdown()`: Creates an extension for
    `mdast-util-from-markdown` to parse MDX ESM.  Returns an
    `FromMarkdownExtension`.  Must be used in conjunction with
    `micromark-extension-mdxjs-esm`.
*   `mdxjsEsmToMarkdown()`: Creates an extension for
    `mdast-util-to-markdown` to serialize MDX ESM. Returns a
    `ToMarkdownExtension`.

The package also defines types for the `MdxjsEsm` node, including the
`data.estree` property containing the ESTree representation of the parsed
code.


## Compatibility

This package is designed to work with `mdast-util-from-markdown` and
`mdast-util-to-markdown` version 2 and above.  Ensure you have compatible
versions for best results.


## Related

*   [`micromark-extension-mdxjs-esm`](https://github.com/micromark/micromark-extension-mdxjs-esm):
    The micromark extension for parsing MDX ESM.  Essential for proper parsing.
*   [`mdast-util-mdx`](https://github.com/syntax-tree/mdast-util-mdx):  A
    more comprehensive MDX utility if you need complete MDX support.


## Contributing

See the [contributing guidelines](./CONTRIBUTING.md) for details.


```