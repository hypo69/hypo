# Модуль `tools.py`

## Обзор

Модуль `tools.py` содержит инструменты, позволяющие агентам выполнять специализированные задачи. Он включает в себя базовый класс `TinyTool` и конкретные реализации инструментов, такие как `TinyCalendar` и `TinyWordProcessor`.

## Содержание

1. [Классы](#классы)
    - [`TinyTool`](#tinytool)
    - [`TinyCalendar`](#tinycalendar)
    - [`TinyWordProcessor`](#tinywordprocessor)

## Классы

### `TinyTool`

**Описание**:
Базовый класс для всех инструментов. Предоставляет общую функциональность, такую как имя, описание, владелец и возможность экспорта и обогащения результатов.

**Методы**:
- `__init__`: Инициализирует новый инструмент.
- `_process_action`: Абстрактный метод, который должен быть реализован в подклассах для выполнения конкретных действий инструмента.
- `_protect_real_world`: Выводит предупреждение, если инструмент имеет побочные эффекты в реальном мире.
- `_enforce_ownership`: Проверяет, имеет ли агент право использовать инструмент.
- `set_owner`: Устанавливает владельца инструмента.
- `actions_definitions_prompt`: Абстрактный метод, который должен быть реализован в подклассах для возвращения подсказки с определением действий.
- `actions_constraints_prompt`: Абстрактный метод, который должен быть реализован в подклассах для возвращения подсказки с ограничениями на действия.
- `process_action`: Выполняет действия инструмента, предварительно проверяя наличие побочных эффектов и права собственности.

#### `__init__`

```python
def __init__(self, name, description, owner=None, real_world_side_effects=False, exporter=None, enricher=None)
```

**Описание**:
Инициализирует новый инструмент.

**Параметры**:
- `name` (str): Имя инструмента.
- `description` (str): Краткое описание инструмента.
- `owner` (Optional[str], optional): Агент, владеющий инструментом. Если `None`, инструмент может быть использован кем угодно. По умолчанию `None`.
- `real_world_side_effects` (bool): Указывает, имеет ли инструмент побочные эффекты в реальном мире. По умолчанию `False`.
- `exporter` (Optional[ArtifactExporter], optional): Экспортер для сохранения результатов работы инструмента. По умолчанию `None`.
- `enricher` (Optional[TinyEnricher], optional): Обогатитель для улучшения результатов работы инструмента. По умолчанию `None`.

#### `_process_action`

```python
def _process_action(self, agent, action: dict) -> bool
```

**Описание**:
Абстрактный метод для обработки действий инструмента.

**Параметры**:
- `agent` (Any): Агент, выполняющий действие.
- `action` (dict): Словарь, содержащий информацию о действии.

**Возвращает**:
- `bool`:  Возвращает `True`, если действие было успешно выполнено, `False` - в противном случае.

**Вызывает исключения**:
- `NotImplementedError`: Вызывается, если метод не переопределен в подклассе.

#### `_protect_real_world`

```python
def _protect_real_world(self)
```

**Описание**:
Выводит предупреждение в лог, если инструмент имеет побочные эффекты в реальном мире.

#### `_enforce_ownership`

```python
def _enforce_ownership(self, agent)
```

**Описание**:
Проверяет, имеет ли агент право использовать инструмент.

**Параметры**:
- `agent` (Any): Агент, выполняющий действие.

**Вызывает исключения**:
- `ValueError`: Вызывается, если агент не является владельцем инструмента.

#### `set_owner`

```python
def set_owner(self, owner)
```

**Описание**:
Устанавливает владельца инструмента.

**Параметры**:
- `owner` (Any): Агент, который будет владельцем инструмента.

#### `actions_definitions_prompt`

```python
def actions_definitions_prompt(self) -> str
```

**Описание**:
Абстрактный метод для получения подсказок с определениями действий.

**Возвращает**:
- `str`: Подсказка с определениями действий.

**Вызывает исключения**:
- `NotImplementedError`: Вызывается, если метод не переопределен в подклассе.

#### `actions_constraints_prompt`

```python
def actions_constraints_prompt(self) -> str
```

**Описание**:
Абстрактный метод для получения подсказок с ограничениями на действия.

**Возвращает**:
- `str`: Подсказка с ограничениями на действия.

**Вызывает исключения**:
- `NotImplementedError`: Вызывается, если метод не переопределен в подклассе.

#### `process_action`

```python
def process_action(self, agent, action: dict) -> bool
```

**Описание**:
Выполняет действия инструмента, предварительно проверяя наличие побочных эффектов и права собственности.

**Параметры**:
- `agent` (Any): Агент, выполняющий действие.
- `action` (dict): Словарь, содержащий информацию о действии.

**Возвращает**:
- `bool`: `True`, если действие было выполнено успешно, `False` - в противном случае.

### `TinyCalendar`

**Описание**:
Инструмент для работы с календарем, позволяющий агентам отслеживать встречи и события.

**Методы**:
- `__init__`: Инициализирует календарь.
- `add_event`: Добавляет новое событие в календарь.
- `find_events`: Находит события в календаре.
- `_process_action`: Выполняет действия, связанные с календарем (создание события).
- `actions_definitions_prompt`: Возвращает подсказку с определением действий для календаря.
- `actions_constraints_prompt`: Возвращает подсказку с ограничениями на действия для календаря.

#### `__init__`

```python
def __init__(self, owner=None)
```

**Описание**:
Инициализирует календарь.

**Параметры**:
- `owner` (Optional[str], optional): Агент, владеющий инструментом. По умолчанию `None`.

#### `add_event`

```python
def add_event(self, date, title, description=None, owner=None, mandatory_attendees=None, optional_attendees=None, start_time=None, end_time=None)
```

**Описание**:
Добавляет новое событие в календарь.

**Параметры**:
- `date` (Any): Дата события.
- `title` (str): Название события.
- `description` (Optional[str], optional): Описание события. По умолчанию `None`.
- `owner` (Optional[Any], optional): Владелец события. По умолчанию `None`.
- `mandatory_attendees` (Optional[list], optional): Список обязательных участников. По умолчанию `None`.
- `optional_attendees` (Optional[list], optional): Список приглашенных участников. По умолчанию `None`.
- `start_time` (Optional[Any], optional): Время начала события. По умолчанию `None`.
- `end_time` (Optional[Any], optional): Время окончания события. По умолчанию `None`.

#### `find_events`

```python
def find_events(self, year, month, day, hour=None, minute=None)
```

**Описание**:
Находит события в календаре.

**Параметры**:
- `year` (int): Год события.
- `month` (int): Месяц события.
- `day` (int): День события.
- `hour` (Optional[int], optional): Час события. По умолчанию `None`.
- `minute` (Optional[int], optional): Минута события. По умолчанию `None`.

#### `_process_action`

```python
def _process_action(self, agent, action) -> bool
```

**Описание**:
Выполняет действия, связанные с календарем (создание события).

**Параметры**:
- `agent` (Any): Агент, выполняющий действие.
- `action` (dict): Словарь, содержащий информацию о действии.

**Возвращает**:
- `bool`:  Возвращает `True`, если действие было успешно выполнено, `False` - в противном случае.

#### `actions_definitions_prompt`

```python
def actions_definitions_prompt(self) -> str
```

**Описание**:
Возвращает подсказку с определением действий для календаря.

**Возвращает**:
- `str`: Подсказка с определениями действий.

#### `actions_constraints_prompt`

```python
def actions_constraints_prompt(self) -> str
```

**Описание**:
Возвращает подсказку с ограничениями на действия для календаря.

**Возвращает**:
- `str`: Подсказка с ограничениями на действия.

### `TinyWordProcessor`

**Описание**:
Инструмент для работы с текстовыми документами, позволяющий агентам писать и сохранять документы.

**Методы**:
- `__init__`: Инициализирует текстовый процессор.
- `write_document`: Записывает документ.
- `_process_action`: Выполняет действия, связанные с текстовым процессором (создание документа).
- `actions_definitions_prompt`: Возвращает подсказку с определением действий для текстового процессора.
- `actions_constraints_prompt`: Возвращает подсказку с ограничениями на действия для текстового процессора.

#### `__init__`

```python
def __init__(self, owner=None, exporter=None, enricher=None)
```

**Описание**:
Инициализирует текстовый процессор.

**Параметры**:
- `owner` (Optional[str], optional): Агент, владеющий инструментом. По умолчанию `None`.
- `exporter` (Optional[ArtifactExporter], optional): Экспортер для сохранения документов. По умолчанию `None`.
- `enricher` (Optional[TinyEnricher], optional): Обогатитель для улучшения документов. По умолчанию `None`.

#### `write_document`

```python
def write_document(self, title, content, author=None)
```

**Описание**:
Записывает документ.

**Параметры**:
- `title` (str): Название документа.
- `content` (str): Содержание документа.
- `author` (Optional[str], optional): Автор документа. По умолчанию `None`.

#### `_process_action`

```python
def _process_action(self, agent, action) -> bool
```

**Описание**:
Выполняет действия, связанные с текстовым процессором (создание документа).

**Параметры**:
- `agent` (Any): Агент, выполняющий действие.
- `action` (dict): Словарь, содержащий информацию о действии.

**Возвращает**:
- `bool`: Возвращает `True`, если действие было успешно выполнено, `False` - в противном случае.

**Вызывает исключения**:
- `JSONDecodeError`: Вызывается, если возникает ошибка при парсинге JSON-содержимого действия.

#### `actions_definitions_prompt`

```python
def actions_definitions_prompt(self) -> str
```

**Описание**:
Возвращает подсказку с определением действий для текстового процессора.

**Возвращает**:
- `str`: Подсказка с определениями действий.

#### `actions_constraints_prompt`

```python
def actions_constraints_prompt(self) -> str
```

**Описание**:
Возвращает подсказку с ограничениями на действия для текстового процессора.

**Возвращает**:
- `str`: Подсказка с ограничениями на действия.