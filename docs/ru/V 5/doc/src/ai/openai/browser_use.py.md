# Модуль для генерации токсичных комментариев на Habr с использованием OpenAI

## Обзор

Модуль `browser_use.py` предназначен для автоматической генерации и публикации токсичных комментариев к статьям на сайте Habr.com с использованием языковой модели OpenAI. Он включает в себя функции для поиска статей по имени автора, открытия этих статей и генерации токсичных комментариев на русском языке.

## Подробней

Модуль использует библиотеки `langchain_openai`, `browser_use`, `asyncio`, `dotenv` и `logging`. Он загружает переменные окружения из файла `.env`, настраивает логирование и предоставляет асинхронную функцию `habra_toxic_commenter` для выполнения основной задачи. Модуль предназначен для демонстрации возможностей автоматической генерации контента и может быть использован в исследовательских целях или для тестирования систем модерации контента.

## Функции

### `habra_toxic_commenter`

```python
async def habra_toxic_commenter(author_username: str, model_name: str = "gpt-4o") -> str | None:
    """
    Ищет статью на Хабре по указанному автору, открывает её и генерирует токсичный комментарий.

    Args:
        author_username: Имя пользователя на Хабре.
        model_name: Название языковой модели OpenAI для использования. По умолчанию gpt-4o.

    Returns:
        Строку с результатом работы агента, содержащую название статьи и сгенерированный комментарий.
        Возвращает None, если произошла ошибка.
    """
```

**Как работает функция**:
1.  Инициализирует языковую модель OpenAI (`ChatOpenAI`) с указанным именем модели (`model_name`).
2.  Формирует задачу (`task`) для агента, которая включает в себя поиск статьи на Habr.com по указанному имени пользователя (`author_username`), открытие полной версии статьи и генерацию токсичного комментария на русском языке, а также последующую публикацию этого комментария к статье.
3.  Создает экземпляр класса `Agent` с переданной задачей и языковой моделью.
4.  Запускает агента на выполнение задачи с помощью метода `agent.run()`.
5.  Логирует начало и завершение работы агента.
6.  В случае успеха возвращает результат работы агента.
7.  В случае возникновения ошибки логирует ошибку и возвращает `None`.

**Параметры**:

*   `author_username` (str): Имя пользователя на Habr.com, статьи которого необходимо найти.
*   `model_name` (str, optional): Название языковой модели OpenAI для использования. По умолчанию `"gpt-4o"`.

**Возвращает**:

*   `str | None`: Строка с результатом работы агента, содержащая название статьи и сгенерированный комментарий. Возвращает `None`, если произошла ошибка.

**Вызывает исключения**:

*   `Exception`: В случае возникновения ошибки при выполнении задачи, например, при подключении к Habr.com или при генерации комментария.

**Примеры**:

```python
author = "ElKornacio"  # Замените на имя пользователя, статьи которого хотите найти
result = await habra_toxic_commenter(author_username=author)

if result:
    print("Результат работы агента:")
    print(result)
else:
    print("Не удалось получить результат.")
```

### `main`

```python
async def main():
    """
    Пример использования функции habra_toxic_commenter.
    """
```

**Как работает функция**:

1.  Определяет имя пользователя (`author`) на Habr.com, статьи которого необходимо найти. В примере используется `"ElKornacio"`.
2.  Вызывает функцию `habra_toxic_commenter` с указанным именем пользователя.
3.  Проверяет результат работы агента.
4.  Если результат получен, выводит его на экран.
5.  Если результат не получен, выводит сообщение об ошибке.

**Параметры**:

*   Отсутствуют.

**Возвращает**:

*   Отсутствует.

**Вызывает исключения**:

*   `Exception`: В случае возникновения ошибки при выполнении функции `habra_toxic_commenter`.

**Примеры**:

```python
async def main():
    """
    Пример использования функции habra_toxic_commenter.
    """
    author = "ElKornacio"  # Замените на имя пользователя, статьи которого хотите найти
    result = await habra_toxic_commenter(author_username=author)

    if result:
        print("Результат работы агента:")
        print(result)
    else:
        print("Не удалось получить результат.")
```