# Модуль `src.suppliers.etzmaleh.graber`

## Обзор

Модуль `src.suppliers.etzmaleh.graber` предназначен для сбора информации о товарах с веб-сайта `etzmaleh.co.il`. Он расширяет функциональность базового класса `Graber`, предоставляя специализированные методы для обработки полей товаров этого поставщика. Модуль включает механизмы для обработки веб-страниц, выполнения предварительных действий перед запросами к веб-драйверу и обработки исключений, возникающих в процессе сбора данных.

## Подробней

Этот модуль является частью системы для сбора и обработки данных о товарах от различных поставщиков. Он использует веб-драйвер для взаимодействия с сайтом `etzmaleh.co.il`, извлекая необходимую информацию о товарах. Класс `Graber` в этом модуле переопределяет или расширяет методы родительского класса для адаптации к специфической структуре и требованиям сайта `etzmaleh.co.il`.

В частности, модуль предоставляет возможность выполнения предварительных действий перед отправкой запроса к веб-драйверу через декоратор `close_pop_up`. Это позволяет, например, закрывать всплывающие окна, которые могут мешать сбору данных.

## Классы

### `Graber`

**Описание**: Класс `Graber` предназначен для сбора данных о товарах с сайта `etzmaleh.co.il`. Он наследуется от класса `Graber` (который, в свою очередь, импортируется как `Grbr`) и предоставляет специализированную функциональность для работы с этим конкретным поставщиком.

**Как работает класс**:
1.  **Инициализация**: При создании экземпляра класса `Graber` устанавливается префикс поставщика (`supplier_prefix`) как `'etzmaleh'`. Затем вызывается конструктор родительского класса `Grbr` для инициализации общих параметров, таких как веб-драйвер и индекс языка.
2.  **Декораторы**: Класс предоставляет возможность использования декораторов для выполнения предварительных действий перед выполнением основных операций с веб-страницей. В частности, декоратор `@close_pop_up` может использоваться для закрытия всплывающих окон, которые могут мешать сбору данных.

**Методы**:
*   `__init__`: Инициализирует экземпляр класса `Graber`, устанавливает префикс поставщика и вызывает конструктор родительского класса.

**Параметры**:
*   `driver` (Driver): Экземпляр веб-драйвера для взаимодействия с веб-страницами.
*   `lang_index` (int): Индекс языка, используемый для локализации контента.

**Примеры**:
```python
from src.webdriver.driver import Driver
from src.suppliers.etzmaleh.graber import Graber

# Пример создания экземпляра класса Graber
driver = Driver()  # Предполагается, что класс Driver инициализирован и настроен
graber = Graber(driver, lang_index=0)
```

## Функции

### `close_pop_up`

```python
def close_pop_up(value: Any = None):
    """Создает декоратор для закрытия всплывающих окон перед выполнением основной логики функции.

    Args:
        value (Any): Дополнительное значение для декоратора.

    Returns:
        Callable: Декоратор, оборачивающий функцию.
    """
```

**Описание**: Функция `close_pop_up` создает декоратор, который предназначен для закрытия всплывающих окон на веб-странице перед выполнением основной логики декорируемой функции.

**Как работает функция**:

1.  Функция `close_pop_up` принимает необязательный аргумент `value`, который может быть использован для передачи дополнительных параметров декоратору.
2.  Внутри функции определяется функция `decorator`, которая принимает функцию `func` в качестве аргумента.
3.  Функция `wrapper` оборачивает функцию `func` и выполняет следующие действия:
    *   Пытается выполнить локатор для закрытия всплывающего окна, используя `Context.driver.execute_locator(Context.locator.close_pop_up)`.
    *   Если выполнение локатора завершается неудачно, логируется сообщение об ошибке.
    *   Вызывает декорируемую функцию `func` с помощью `await func(*args, **kwargs)`.
4.  Функция `decorator` возвращает функцию `wrapper`.
5.  Функция `close_pop_up` возвращает функцию `decorator`.

**Параметры**:
*   `value` (Any, optional): Дополнительное значение для декоратора. По умолчанию `None`.

**Возвращает**:
*   `Callable`: Декоратор, который можно применить к функции.

**Вызывает исключения**:
*   `ExecuteLocatorException`: Возникает, если выполнение локатора для закрытия всплывающего окна завершается неудачно.

**Примеры**:

```python
from src.suppliers.etzmaleh.graber import close_pop_up

# Пример использования декоратора для закрытия всплывающего окна
@close_pop_up()
async def my_function():
    # Основная логика функции
    return "Function executed"